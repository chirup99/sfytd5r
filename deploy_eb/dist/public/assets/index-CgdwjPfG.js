var Ote=Object.defineProperty;var DI=t=>{throw TypeError(t)};var Rte=(t,e,r)=>e in t?Ote(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var qe=(t,e,r)=>Rte(t,typeof e!="symbol"?e+"":e,r),Ak=(t,e,r)=>e.has(t)||DI("Cannot "+r);var Re=(t,e,r)=>(Ak(t,e,"read from private field"),r?r.call(t):e.get(t)),wr=(t,e,r)=>e.has(t)?DI("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Yt=(t,e,r,s)=>(Ak(t,e,"write to private field"),s?s.call(t,r):e.set(t,r),r),un=(t,e,r)=>(Ak(t,e,"access private method"),r);var eN=(t,e,r,s)=>({set _(a){Yt(t,e,a,r)},get _(){return Re(t,e,s)}});function Dte(t,e){for(var r=0;r<e.length;r++){const s=e[r];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in t)){const i=Object.getOwnPropertyDescriptor(s,a);i&&Object.defineProperty(t,a,i.get?i:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var tN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var _k={exports:{}},Fv={},Ik={exports:{}},vn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $I;function $te(){if($I)return vn;$I=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.iterator;function x(U){return U===null||typeof U!="object"?null:(U=m&&U[m]||U["@@iterator"],typeof U=="function"?U:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,N={};function w(U,W,be){this.props=U,this.context=W,this.refs=N,this.updater=be||b}w.prototype.isReactComponent={},w.prototype.setState=function(U,W){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,W,"setState")},w.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function C(){}C.prototype=w.prototype;function T(U,W,be){this.props=U,this.context=W,this.refs=N,this.updater=be||b}var O=T.prototype=new C;O.constructor=T,j(O,w.prototype),O.isPureReactComponent=!0;var I=Array.isArray,P=Object.prototype.hasOwnProperty,A={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function B(U,W,be){var pe,ge={},Ce=null,he=null;if(W!=null)for(pe in W.ref!==void 0&&(he=W.ref),W.key!==void 0&&(Ce=""+W.key),W)P.call(W,pe)&&!R.hasOwnProperty(pe)&&(ge[pe]=W[pe]);var ue=arguments.length-2;if(ue===1)ge.children=be;else if(1<ue){for(var ce=Array(ue),Ee=0;Ee<ue;Ee++)ce[Ee]=arguments[Ee+2];ge.children=ce}if(U&&U.defaultProps)for(pe in ue=U.defaultProps,ue)ge[pe]===void 0&&(ge[pe]=ue[pe]);return{$$typeof:t,type:U,key:Ce,ref:he,props:ge,_owner:A.current}}function V(U,W){return{$$typeof:t,type:U.type,key:W,ref:U.ref,props:U.props,_owner:U._owner}}function X(U){return typeof U=="object"&&U!==null&&U.$$typeof===t}function ee(U){var W={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(be){return W[be]})}var Y=/\/+/g;function re(U,W){return typeof U=="object"&&U!==null&&U.key!=null?ee(""+U.key):W.toString(36)}function le(U,W,be,pe,ge){var Ce=typeof U;(Ce==="undefined"||Ce==="boolean")&&(U=null);var he=!1;if(U===null)he=!0;else switch(Ce){case"string":case"number":he=!0;break;case"object":switch(U.$$typeof){case t:case e:he=!0}}if(he)return he=U,ge=ge(he),U=pe===""?"."+re(he,0):pe,I(ge)?(be="",U!=null&&(be=U.replace(Y,"$&/")+"/"),le(ge,W,be,"",function(Ee){return Ee})):ge!=null&&(X(ge)&&(ge=V(ge,be+(!ge.key||he&&he.key===ge.key?"":(""+ge.key).replace(Y,"$&/")+"/")+U)),W.push(ge)),1;if(he=0,pe=pe===""?".":pe+":",I(U))for(var ue=0;ue<U.length;ue++){Ce=U[ue];var ce=pe+re(Ce,ue);he+=le(Ce,W,be,ce,ge)}else if(ce=x(U),typeof ce=="function")for(U=ce.call(U),ue=0;!(Ce=U.next()).done;)Ce=Ce.value,ce=pe+re(Ce,ue++),he+=le(Ce,W,be,ce,ge);else if(Ce==="object")throw W=String(U),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return he}function te(U,W,be){if(U==null)return U;var pe=[],ge=0;return le(U,pe,"","",function(Ce){return W.call(be,Ce,ge++)}),pe}function de(U){if(U._status===-1){var W=U._result;W=W(),W.then(function(be){(U._status===0||U._status===-1)&&(U._status=1,U._result=be)},function(be){(U._status===0||U._status===-1)&&(U._status=2,U._result=be)}),U._status===-1&&(U._status=0,U._result=W)}if(U._status===1)return U._result.default;throw U._result}var ie={current:null},Z={transition:null},ne={ReactCurrentDispatcher:ie,ReactCurrentBatchConfig:Z,ReactCurrentOwner:A};function oe(){throw Error("act(...) is not supported in production builds of React.")}return vn.Children={map:te,forEach:function(U,W,be){te(U,function(){W.apply(this,arguments)},be)},count:function(U){var W=0;return te(U,function(){W++}),W},toArray:function(U){return te(U,function(W){return W})||[]},only:function(U){if(!X(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},vn.Component=w,vn.Fragment=r,vn.Profiler=a,vn.PureComponent=T,vn.StrictMode=s,vn.Suspense=d,vn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ne,vn.act=oe,vn.cloneElement=function(U,W,be){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var pe=j({},U.props),ge=U.key,Ce=U.ref,he=U._owner;if(W!=null){if(W.ref!==void 0&&(Ce=W.ref,he=A.current),W.key!==void 0&&(ge=""+W.key),U.type&&U.type.defaultProps)var ue=U.type.defaultProps;for(ce in W)P.call(W,ce)&&!R.hasOwnProperty(ce)&&(pe[ce]=W[ce]===void 0&&ue!==void 0?ue[ce]:W[ce])}var ce=arguments.length-2;if(ce===1)pe.children=be;else if(1<ce){ue=Array(ce);for(var Ee=0;Ee<ce;Ee++)ue[Ee]=arguments[Ee+2];pe.children=ue}return{$$typeof:t,type:U.type,key:ge,ref:Ce,props:pe,_owner:he}},vn.createContext=function(U){return U={$$typeof:o,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:i,_context:U},U.Consumer=U},vn.createElement=B,vn.createFactory=function(U){var W=B.bind(null,U);return W.type=U,W},vn.createRef=function(){return{current:null}},vn.forwardRef=function(U){return{$$typeof:l,render:U}},vn.isValidElement=X,vn.lazy=function(U){return{$$typeof:f,_payload:{_status:-1,_result:U},_init:de}},vn.memo=function(U,W){return{$$typeof:h,type:U,compare:W===void 0?null:W}},vn.startTransition=function(U){var W=Z.transition;Z.transition={};try{U()}finally{Z.transition=W}},vn.unstable_act=oe,vn.useCallback=function(U,W){return ie.current.useCallback(U,W)},vn.useContext=function(U){return ie.current.useContext(U)},vn.useDebugValue=function(){},vn.useDeferredValue=function(U){return ie.current.useDeferredValue(U)},vn.useEffect=function(U,W){return ie.current.useEffect(U,W)},vn.useId=function(){return ie.current.useId()},vn.useImperativeHandle=function(U,W,be){return ie.current.useImperativeHandle(U,W,be)},vn.useInsertionEffect=function(U,W){return ie.current.useInsertionEffect(U,W)},vn.useLayoutEffect=function(U,W){return ie.current.useLayoutEffect(U,W)},vn.useMemo=function(U,W){return ie.current.useMemo(U,W)},vn.useReducer=function(U,W,be){return ie.current.useReducer(U,W,be)},vn.useRef=function(U){return ie.current.useRef(U)},vn.useState=function(U){return ie.current.useState(U)},vn.useSyncExternalStore=function(U,W,be){return ie.current.useSyncExternalStore(U,W,be)},vn.useTransition=function(){return ie.current.useTransition()},vn.version="18.3.1",vn}var LI;function V2(){return LI||(LI=1,Ik.exports=$te()),Ik.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FI;function Lte(){if(FI)return Fv;FI=1;var t=V2(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(l,d,h){var f,m={},x=null,b=null;h!==void 0&&(x=""+h),d.key!==void 0&&(x=""+d.key),d.ref!==void 0&&(b=d.ref);for(f in d)s.call(d,f)&&!i.hasOwnProperty(f)&&(m[f]=d[f]);if(l&&l.defaultProps)for(f in d=l.defaultProps,d)m[f]===void 0&&(m[f]=d[f]);return{$$typeof:e,type:l,key:x,ref:b,props:m,_owner:a.current}}return Fv.Fragment=r,Fv.jsx=o,Fv.jsxs=o,Fv}var BI;function Fte(){return BI||(BI=1,_k.exports=Lte()),_k.exports}var n=Fte(),rN={},Mk={exports:{}},Wl={},Ok={exports:{}},Rk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UI;function Bte(){return UI||(UI=1,(function(t){function e(Z,ne){var oe=Z.length;Z.push(ne);e:for(;0<oe;){var U=oe-1>>>1,W=Z[U];if(0<a(W,ne))Z[U]=ne,Z[oe]=W,oe=U;else break e}}function r(Z){return Z.length===0?null:Z[0]}function s(Z){if(Z.length===0)return null;var ne=Z[0],oe=Z.pop();if(oe!==ne){Z[0]=oe;e:for(var U=0,W=Z.length,be=W>>>1;U<be;){var pe=2*(U+1)-1,ge=Z[pe],Ce=pe+1,he=Z[Ce];if(0>a(ge,oe))Ce<W&&0>a(he,ge)?(Z[U]=he,Z[Ce]=oe,U=Ce):(Z[U]=ge,Z[pe]=oe,U=pe);else if(Ce<W&&0>a(he,oe))Z[U]=he,Z[Ce]=oe,U=Ce;else break e}}return ne}function a(Z,ne){var oe=Z.sortIndex-ne.sortIndex;return oe!==0?oe:Z.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var d=[],h=[],f=1,m=null,x=3,b=!1,j=!1,N=!1,w=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(Z){for(var ne=r(h);ne!==null;){if(ne.callback===null)s(h);else if(ne.startTime<=Z)s(h),ne.sortIndex=ne.expirationTime,e(d,ne);else break;ne=r(h)}}function I(Z){if(N=!1,O(Z),!j)if(r(d)!==null)j=!0,de(P);else{var ne=r(h);ne!==null&&ie(I,ne.startTime-Z)}}function P(Z,ne){j=!1,N&&(N=!1,C(B),B=-1),b=!0;var oe=x;try{for(O(ne),m=r(d);m!==null&&(!(m.expirationTime>ne)||Z&&!ee());){var U=m.callback;if(typeof U=="function"){m.callback=null,x=m.priorityLevel;var W=U(m.expirationTime<=ne);ne=t.unstable_now(),typeof W=="function"?m.callback=W:m===r(d)&&s(d),O(ne)}else s(d);m=r(d)}if(m!==null)var be=!0;else{var pe=r(h);pe!==null&&ie(I,pe.startTime-ne),be=!1}return be}finally{m=null,x=oe,b=!1}}var A=!1,R=null,B=-1,V=5,X=-1;function ee(){return!(t.unstable_now()-X<V)}function Y(){if(R!==null){var Z=t.unstable_now();X=Z;var ne=!0;try{ne=R(!0,Z)}finally{ne?re():(A=!1,R=null)}}else A=!1}var re;if(typeof T=="function")re=function(){T(Y)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,te=le.port2;le.port1.onmessage=Y,re=function(){te.postMessage(null)}}else re=function(){w(Y,0)};function de(Z){R=Z,A||(A=!0,re())}function ie(Z,ne){B=w(function(){Z(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_continueExecution=function(){j||b||(j=!0,de(P))},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return r(d)},t.unstable_next=function(Z){switch(x){case 1:case 2:case 3:var ne=3;break;default:ne=x}var oe=x;x=ne;try{return Z()}finally{x=oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Z,ne){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var oe=x;x=Z;try{return ne()}finally{x=oe}},t.unstable_scheduleCallback=function(Z,ne,oe){var U=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?U+oe:U):oe=U,Z){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=oe+W,Z={id:f++,callback:ne,priorityLevel:Z,startTime:oe,expirationTime:W,sortIndex:-1},oe>U?(Z.sortIndex=oe,e(h,Z),r(d)===null&&Z===r(h)&&(N?(C(B),B=-1):N=!0,ie(I,oe-U))):(Z.sortIndex=W,e(d,Z),j||b||(j=!0,de(P))),Z},t.unstable_shouldYield=ee,t.unstable_wrapCallback=function(Z){var ne=x;return function(){var oe=x;x=ne;try{return Z.apply(this,arguments)}finally{x=oe}}}})(Rk)),Rk}var zI;function Ute(){return zI||(zI=1,Ok.exports=Bte()),Ok.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VI;function zte(){if(VI)return Wl;VI=1;var t=V2(),e=Ute();function r(c){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+c,p=1;p<arguments.length;p++)u+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function i(c,u){o(c,u),o(c+"Capture",u)}function o(c,u){for(a[c]=u,c=0;c<u.length;c++)s.add(u[c])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function x(c){return d.call(m,c)?!0:d.call(f,c)?!1:h.test(c)?m[c]=!0:(f[c]=!0,!1)}function b(c,u,p,v){if(p!==null&&p.type===0)return!1;switch(typeof u){case"function":case"symbol":return!0;case"boolean":return v?!1:p!==null?!p.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function j(c,u,p,v){if(u===null||typeof u>"u"||b(c,u,p,v))return!0;if(v)return!1;if(p!==null)switch(p.type){case 3:return!u;case 4:return u===!1;case 5:return isNaN(u);case 6:return isNaN(u)||1>u}return!1}function N(c,u,p,v,k,_,F){this.acceptsBooleans=u===2||u===3||u===4,this.attributeName=v,this.attributeNamespace=k,this.mustUseProperty=p,this.propertyName=c,this.type=u,this.sanitizeURL=_,this.removeEmptyString=F}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){w[c]=new N(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var u=c[0];w[u]=new N(u,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){w[c]=new N(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){w[c]=new N(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){w[c]=new N(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){w[c]=new N(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){w[c]=new N(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){w[c]=new N(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){w[c]=new N(c,5,!1,c.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function T(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var u=c.replace(C,T);w[u]=new N(u,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var u=c.replace(C,T);w[u]=new N(u,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var u=c.replace(C,T);w[u]=new N(u,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){w[c]=new N(c,1,!1,c.toLowerCase(),null,!1,!1)}),w.xlinkHref=new N("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){w[c]=new N(c,1,!1,c.toLowerCase(),null,!0,!0)});function O(c,u,p,v){var k=w.hasOwnProperty(u)?w[u]:null;(k!==null?k.type!==0:v||!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(j(u,p,k,v)&&(p=null),v||k===null?x(u)&&(p===null?c.removeAttribute(u):c.setAttribute(u,""+p)):k.mustUseProperty?c[k.propertyName]=p===null?k.type===3?!1:"":p:(u=k.attributeName,v=k.attributeNamespace,p===null?c.removeAttribute(u):(k=k.type,p=k===3||k===4&&p===!0?"":""+p,v?c.setAttributeNS(v,u,p):c.setAttribute(u,p))))}var I=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=Symbol.for("react.element"),A=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),X=Symbol.for("react.provider"),ee=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),te=Symbol.for("react.memo"),de=Symbol.for("react.lazy"),ie=Symbol.for("react.offscreen"),Z=Symbol.iterator;function ne(c){return c===null||typeof c!="object"?null:(c=Z&&c[Z]||c["@@iterator"],typeof c=="function"?c:null)}var oe=Object.assign,U;function W(c){if(U===void 0)try{throw Error()}catch(p){var u=p.stack.trim().match(/\n( *(at )?)/);U=u&&u[1]||""}return`
`+U+c}var be=!1;function pe(c,u){if(!c||be)return"";be=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(xe){var v=xe}Reflect.construct(c,[],u)}else{try{u.call()}catch(xe){v=xe}c.call(u.prototype)}else{try{throw Error()}catch(xe){v=xe}c()}}catch(xe){if(xe&&v&&typeof xe.stack=="string"){for(var k=xe.stack.split(`
`),_=v.stack.split(`
`),F=k.length-1,se=_.length-1;1<=F&&0<=se&&k[F]!==_[se];)se--;for(;1<=F&&0<=se;F--,se--)if(k[F]!==_[se]){if(F!==1||se!==1)do if(F--,se--,0>se||k[F]!==_[se]){var J=`
`+k[F].replace(" at new "," at ");return c.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",c.displayName)),J}while(1<=F&&0<=se);break}}}finally{be=!1,Error.prepareStackTrace=p}return(c=c?c.displayName||c.name:"")?W(c):""}function ge(c){switch(c.tag){case 5:return W(c.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return c=pe(c.type,!1),c;case 11:return c=pe(c.type.render,!1),c;case 1:return c=pe(c.type,!0),c;default:return""}}function Ce(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case R:return"Fragment";case A:return"Portal";case V:return"Profiler";case B:return"StrictMode";case re:return"Suspense";case le:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case ee:return(c.displayName||"Context")+".Consumer";case X:return(c._context.displayName||"Context")+".Provider";case Y:var u=c.render;return c=c.displayName,c||(c=u.displayName||u.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case te:return u=c.displayName||null,u!==null?u:Ce(c.type)||"Memo";case de:u=c._payload,c=c._init;try{return Ce(c(u))}catch{}}return null}function he(c){var u=c.type;switch(c.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=u.render,c=c.displayName||c.name||"",u.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ce(u);case 8:return u===B?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function ue(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function ce(c){var u=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Ee(c){var u=ce(c)?"checked":"value",p=Object.getOwnPropertyDescriptor(c.constructor.prototype,u),v=""+c[u];if(!c.hasOwnProperty(u)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var k=p.get,_=p.set;return Object.defineProperty(c,u,{configurable:!0,get:function(){return k.call(this)},set:function(F){v=""+F,_.call(this,F)}}),Object.defineProperty(c,u,{enumerable:p.enumerable}),{getValue:function(){return v},setValue:function(F){v=""+F},stopTracking:function(){c._valueTracker=null,delete c[u]}}}}function Le(c){c._valueTracker||(c._valueTracker=Ee(c))}function Ie(c){if(!c)return!1;var u=c._valueTracker;if(!u)return!0;var p=u.getValue(),v="";return c&&(v=ce(c)?c.checked?"true":"false":c.value),c=v,c!==p?(u.setValue(c),!0):!1}function Ue(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function Ae(c,u){var p=u.checked;return oe({},u,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??c._wrapperState.initialChecked})}function We(c,u){var p=u.defaultValue==null?"":u.defaultValue,v=u.checked!=null?u.checked:u.defaultChecked;p=ue(u.value!=null?u.value:p),c._wrapperState={initialChecked:v,initialValue:p,controlled:u.type==="checkbox"||u.type==="radio"?u.checked!=null:u.value!=null}}function ot(c,u){u=u.checked,u!=null&&O(c,"checked",u,!1)}function It(c,u){ot(c,u);var p=ue(u.value),v=u.type;if(p!=null)v==="number"?(p===0&&c.value===""||c.value!=p)&&(c.value=""+p):c.value!==""+p&&(c.value=""+p);else if(v==="submit"||v==="reset"){c.removeAttribute("value");return}u.hasOwnProperty("value")?Ct(c,u.type,p):u.hasOwnProperty("defaultValue")&&Ct(c,u.type,ue(u.defaultValue)),u.checked==null&&u.defaultChecked!=null&&(c.defaultChecked=!!u.defaultChecked)}function tr(c,u,p){if(u.hasOwnProperty("value")||u.hasOwnProperty("defaultValue")){var v=u.type;if(!(v!=="submit"&&v!=="reset"||u.value!==void 0&&u.value!==null))return;u=""+c._wrapperState.initialValue,p||u===c.value||(c.value=u),c.defaultValue=u}p=c.name,p!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,p!==""&&(c.name=p)}function Ct(c,u,p){(u!=="number"||Ue(c.ownerDocument)!==c)&&(p==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+p&&(c.defaultValue=""+p))}var we=Array.isArray;function Fe(c,u,p,v){if(c=c.options,u){u={};for(var k=0;k<p.length;k++)u["$"+p[k]]=!0;for(p=0;p<c.length;p++)k=u.hasOwnProperty("$"+c[p].value),c[p].selected!==k&&(c[p].selected=k),k&&v&&(c[p].defaultSelected=!0)}else{for(p=""+ue(p),u=null,k=0;k<c.length;k++){if(c[k].value===p){c[k].selected=!0,v&&(c[k].defaultSelected=!0);return}u!==null||c[k].disabled||(u=c[k])}u!==null&&(u.selected=!0)}}function Ye(c,u){if(u.dangerouslySetInnerHTML!=null)throw Error(r(91));return oe({},u,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function lt(c,u){var p=u.value;if(p==null){if(p=u.children,u=u.defaultValue,p!=null){if(u!=null)throw Error(r(92));if(we(p)){if(1<p.length)throw Error(r(93));p=p[0]}u=p}u==null&&(u=""),p=u}c._wrapperState={initialValue:ue(p)}}function pt(c,u){var p=ue(u.value),v=ue(u.defaultValue);p!=null&&(p=""+p,p!==c.value&&(c.value=p),u.defaultValue==null&&c.defaultValue!==p&&(c.defaultValue=p)),v!=null&&(c.defaultValue=""+v)}function nt(c){var u=c.textContent;u===c._wrapperState.initialValue&&u!==""&&u!==null&&(c.value=u)}function wt(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lr(c,u){return c==null||c==="http://www.w3.org/1999/xhtml"?wt(u):c==="http://www.w3.org/2000/svg"&&u==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var Tr,Mr=(function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(u,p,v,k){MSApp.execUnsafeLocalFunction(function(){return c(u,p,v,k)})}:c})(function(c,u){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=u;else{for(Tr=Tr||document.createElement("div"),Tr.innerHTML="<svg>"+u.valueOf().toString()+"</svg>",u=Tr.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;u.firstChild;)c.appendChild(u.firstChild)}});function ta(c,u){if(u){var p=c.firstChild;if(p&&p===c.lastChild&&p.nodeType===3){p.nodeValue=u;return}}c.textContent=u}var st={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zt=["Webkit","ms","Moz","O"];Object.keys(st).forEach(function(c){zt.forEach(function(u){u=u+c.charAt(0).toUpperCase()+c.substring(1),st[u]=st[c]})});function Ft(c,u,p){return u==null||typeof u=="boolean"||u===""?"":p||typeof u!="number"||u===0||st.hasOwnProperty(c)&&st[c]?(""+u).trim():u+"px"}function pr(c,u){c=c.style;for(var p in u)if(u.hasOwnProperty(p)){var v=p.indexOf("--")===0,k=Ft(p,u[p],v);p==="float"&&(p="cssFloat"),v?c.setProperty(p,k):c[p]=k}}var kt=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Mt(c,u){if(u){if(kt[c]&&(u.children!=null||u.dangerouslySetInnerHTML!=null))throw Error(r(137,c));if(u.dangerouslySetInnerHTML!=null){if(u.children!=null)throw Error(r(60));if(typeof u.dangerouslySetInnerHTML!="object"||!("__html"in u.dangerouslySetInnerHTML))throw Error(r(61))}if(u.style!=null&&typeof u.style!="object")throw Error(r(62))}}function Ke(c,u){if(c.indexOf("-")===-1)return typeof u.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ne=null;function Oe(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var me=null,je=null,ke=null;function Te(c){if(c=Il(c)){if(typeof me!="function")throw Error(r(280));var u=c.stateNode;u&&(u=Ji(u),me(c.stateNode,c.type,u))}}function Je(c){je?ke?ke.push(c):ke=[c]:je=c}function Q(){if(je){var c=je,u=ke;if(ke=je=null,Te(c),u)for(c=0;c<u.length;c++)Te(u[c])}}function tt(c,u){return c(u)}function it(){}var ft=!1;function He(c,u,p){if(ft)return c(u,p);ft=!0;try{return tt(c,u,p)}finally{ft=!1,(je!==null||ke!==null)&&(it(),Q())}}function Vt(c,u){var p=c.stateNode;if(p===null)return null;var v=Ji(p);if(v===null)return null;p=v[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(c=c.type,v=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!v;break e;default:c=!1}if(c)return null;if(p&&typeof p!="function")throw Error(r(231,u,typeof p));return p}var Zt=!1;if(l)try{var vr={};Object.defineProperty(vr,"passive",{get:function(){Zt=!0}}),window.addEventListener("test",vr,vr),window.removeEventListener("test",vr,vr)}catch{Zt=!1}function Dt(c,u,p,v,k,_,F,se,J){var xe=Array.prototype.slice.call(arguments,3);try{u.apply(p,xe)}catch(ye){this.onError(ye)}}var Xt=!1,qt=null,ar=!1,Cr=null,An={onError:function(c){Xt=!0,qt=c}};function br(c,u,p,v,k,_,F,se,J){Xt=!1,qt=null,Dt.apply(An,arguments)}function yr(c,u,p,v,k,_,F,se,J){if(br.apply(this,arguments),Xt){if(Xt){var xe=qt;Xt=!1,qt=null}else throw Error(r(198));ar||(ar=!0,Cr=xe)}}function Qn(c){var u=c,p=c;if(c.alternate)for(;u.return;)u=u.return;else{c=u;do u=c,(u.flags&4098)!==0&&(p=u.return),c=u.return;while(c)}return u.tag===3?p:null}function Ws(c){if(c.tag===13){var u=c.memoizedState;if(u===null&&(c=c.alternate,c!==null&&(u=c.memoizedState)),u!==null)return u.dehydrated}return null}function oi(c){if(Qn(c)!==c)throw Error(r(188))}function qn(c){var u=c.alternate;if(!u){if(u=Qn(c),u===null)throw Error(r(188));return u!==c?null:c}for(var p=c,v=u;;){var k=p.return;if(k===null)break;var _=k.alternate;if(_===null){if(v=k.return,v!==null){p=v;continue}break}if(k.child===_.child){for(_=k.child;_;){if(_===p)return oi(k),c;if(_===v)return oi(k),u;_=_.sibling}throw Error(r(188))}if(p.return!==v.return)p=k,v=_;else{for(var F=!1,se=k.child;se;){if(se===p){F=!0,p=k,v=_;break}if(se===v){F=!0,v=k,p=_;break}se=se.sibling}if(!F){for(se=_.child;se;){if(se===p){F=!0,p=_,v=k;break}if(se===v){F=!0,v=_,p=k;break}se=se.sibling}if(!F)throw Error(r(189))}}if(p.alternate!==v)throw Error(r(190))}if(p.tag!==3)throw Error(r(188));return p.stateNode.current===p?c:u}function Jn(c){return c=qn(c),c!==null?Fr(c):null}function Fr(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var u=Fr(c);if(u!==null)return u;c=c.sibling}return null}var ct=e.unstable_scheduleCallback,yt=e.unstable_cancelCallback,ut=e.unstable_shouldYield,Bt=e.unstable_requestPaint,Nt=e.unstable_now,ur=e.unstable_getCurrentPriorityLevel,Br=e.unstable_ImmediatePriority,Xr=e.unstable_UserBlockingPriority,Er=e.unstable_NormalPriority,Sn=e.unstable_LowPriority,kr=e.unstable_IdlePriority,mn=null,Yr=null;function li(c){if(Yr&&typeof Yr.onCommitFiberRoot=="function")try{Yr.onCommitFiberRoot(mn,c,void 0,(c.current.flags&128)===128)}catch{}}var Ca=Math.clz32?Math.clz32:gf,Y0=Math.log,K0=Math.LN2;function gf(c){return c>>>=0,c===0?32:31-(Y0(c)/K0|0)|0}var xf=64,Nl=4194304;function jl(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function Kc(c,u){var p=c.pendingLanes;if(p===0)return 0;var v=0,k=c.suspendedLanes,_=c.pingedLanes,F=p&268435455;if(F!==0){var se=F&~k;se!==0?v=jl(se):(_&=F,_!==0&&(v=jl(_)))}else F=p&~k,F!==0?v=jl(F):_!==0&&(v=jl(_));if(v===0)return 0;if(u!==0&&u!==v&&(u&k)===0&&(k=v&-v,_=u&-u,k>=_||k===16&&(_&4194240)!==0))return u;if((v&4)!==0&&(v|=p&16),u=c.entangledLanes,u!==0)for(c=c.entanglements,u&=v;0<u;)p=31-Ca(u),k=1<<p,v|=c[p],u&=~k;return v}function _1(c,u){switch(c){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Im(c,u){for(var p=c.suspendedLanes,v=c.pingedLanes,k=c.expirationTimes,_=c.pendingLanes;0<_;){var F=31-Ca(_),se=1<<F,J=k[F];J===-1?((se&p)===0||(se&v)!==0)&&(k[F]=_1(se,u)):J<=u&&(c.expiredLanes|=se),_&=~se}}function Ds(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function Ju(){var c=xf;return xf<<=1,(xf&4194240)===0&&(xf=64),c}function Wo(c){for(var u=[],p=0;31>p;p++)u.push(c);return u}function Yo(c,u,p){c.pendingLanes|=u,u!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,u=31-Ca(u),c[u]=p}function Mm(c,u){var p=c.pendingLanes&~u;c.pendingLanes=u,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=u,c.mutableReadLanes&=u,c.entangledLanes&=u,u=c.entanglements;var v=c.eventTimes;for(c=c.expirationTimes;0<p;){var k=31-Ca(p),_=1<<k;u[k]=0,v[k]=-1,c[k]=-1,p&=~_}}function Zu(c,u){var p=c.entangledLanes|=u;for(c=c.entanglements;p;){var v=31-Ca(p),k=1<<v;k&u|c[v]&u&&(c[v]|=u),p&=~k}}var Qt=0;function Gc(c){return c&=-c,1<c?4<c?(c&268435455)!==0?16:536870912:4:1}var is,Sl,eh,yf,lg,Ys=!1,Om=[],ps=null,Xc=null,Ma=null,Rm=new Map,Pr=new Map,gs=[],vf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qc(c,u){switch(c){case"focusin":case"focusout":ps=null;break;case"dragenter":case"dragleave":Xc=null;break;case"mouseover":case"mouseout":Ma=null;break;case"pointerover":case"pointerout":Rm.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pr.delete(u.pointerId)}}function Oa(c,u,p,v,k,_){return c===null||c.nativeEvent!==_?(c={blockedOn:u,domEventName:p,eventSystemFlags:v,nativeEvent:_,targetContainers:[k]},u!==null&&(u=Il(u),u!==null&&Sl(u)),c):(c.eventSystemFlags|=v,u=c.targetContainers,k!==null&&u.indexOf(k)===-1&&u.push(k),c)}function ln(c,u,p,v,k){switch(u){case"focusin":return ps=Oa(ps,c,u,p,v,k),!0;case"dragenter":return Xc=Oa(Xc,c,u,p,v,k),!0;case"mouseover":return Ma=Oa(Ma,c,u,p,v,k),!0;case"pointerover":var _=k.pointerId;return Rm.set(_,Oa(Rm.get(_)||null,c,u,p,v,k)),!0;case"gotpointercapture":return _=k.pointerId,Pr.set(_,Oa(Pr.get(_)||null,c,u,p,v,k)),!0}return!1}function th(c){var u=Po(c.target);if(u!==null){var p=Qn(u);if(p!==null){if(u=p.tag,u===13){if(u=Ws(p),u!==null){c.blockedOn=u,lg(c.priority,function(){eh(p)});return}}else if(u===3&&p.stateNode.current.memoizedState.isDehydrated){c.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}c.blockedOn=null}function os(c){if(c.blockedOn!==null)return!1;for(var u=c.targetContainers;0<u.length;){var p=di(c.domEventName,c.eventSystemFlags,u[0],c.nativeEvent);if(p===null){p=c.nativeEvent;var v=new p.constructor(p.type,p);Ne=v,p.target.dispatchEvent(v),Ne=null}else return u=Il(p),u!==null&&Sl(u),c.blockedOn=p,!1;u.shift()}return!0}function rh(c,u,p){os(c)&&p.delete(u)}function Jc(){Ys=!1,ps!==null&&os(ps)&&(ps=null),Xc!==null&&os(Xc)&&(Xc=null),Ma!==null&&os(Ma)&&(Ma=null),Rm.forEach(rh),Pr.forEach(rh)}function Wd(c,u){c.blockedOn===u&&(c.blockedOn=null,Ys||(Ys=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Jc)))}function Zc(c){function u(k){return Wd(k,c)}if(0<Om.length){Wd(Om[0],c);for(var p=1;p<Om.length;p++){var v=Om[p];v.blockedOn===c&&(v.blockedOn=null)}}for(ps!==null&&Wd(ps,c),Xc!==null&&Wd(Xc,c),Ma!==null&&Wd(Ma,c),Rm.forEach(u),Pr.forEach(u),p=0;p<gs.length;p++)v=gs[p],v.blockedOn===c&&(v.blockedOn=null);for(;0<gs.length&&(p=gs[0],p.blockedOn===null);)th(p),p.blockedOn===null&&gs.shift()}var ed=I.ReactCurrentBatchConfig,sn=!0;function kl(c,u,p,v){var k=Qt,_=ed.transition;ed.transition=null;try{Qt=1,nh(c,u,p,v)}finally{Qt=k,ed.transition=_}}function ci(c,u,p,v){var k=Qt,_=ed.transition;ed.transition=null;try{Qt=4,nh(c,u,p,v)}finally{Qt=k,ed.transition=_}}function nh(c,u,p,v){if(sn){var k=di(c,u,p,v);if(k===null)eu(c,u,v,Ra,p),Qc(c,v);else if(ln(k,c,u,p,v))v.stopPropagation();else if(Qc(c,v),u&4&&-1<vf.indexOf(c)){for(;k!==null;){var _=Il(k);if(_!==null&&is(_),_=di(c,u,p,v),_===null&&eu(c,u,v,Ra,p),_===k)break;k=_}k!==null&&v.stopPropagation()}else eu(c,u,v,null,p)}}var Ra=null;function di(c,u,p,v){if(Ra=null,c=Oe(v),c=Po(c),c!==null)if(u=Qn(c),u===null)c=null;else if(p=u.tag,p===13){if(c=Ws(u),c!==null)return c;c=null}else if(p===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;c=null}else u!==c&&(c=null);return Ra=c,null}function Ko(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ur()){case Br:return 1;case Xr:return 4;case Er:case Sn:return 16;case kr:return 536870912;default:return 16}default:return 16}}var _n=null,Go=null,Or=null;function Da(){if(Or)return Or;var c,u=Go,p=u.length,v,k="value"in _n?_n.value:_n.textContent,_=k.length;for(c=0;c<p&&u[c]===k[c];c++);var F=p-c;for(v=1;v<=F&&u[p-v]===k[_-v];v++);return Or=k.slice(c,1<v?1-v:void 0)}function Dm(c){var u=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&u===13&&(c=13)):c=u,c===10&&(c=13),32<=c||c===13?c:0}function $m(){return!0}function cg(){return!1}function ui(c){function u(p,v,k,_,F){this._reactName=p,this._targetInst=k,this.type=v,this.nativeEvent=_,this.target=F,this.currentTarget=null;for(var se in c)c.hasOwnProperty(se)&&(p=c[se],this[se]=p?p(_):_[se]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?$m:cg,this.isPropagationStopped=cg,this}return oe(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=$m)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=$m)},persist:function(){},isPersistent:$m}),u}var sh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ah=ui(sh),Rr=oe({},sh,{view:0,detail:0}),Es=ui(Rr),Cl,ih,bf,Ln=oe({},Rr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pl,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==bf&&(bf&&c.type==="mousemove"?(Cl=c.screenX-bf.screenX,ih=c.screenY-bf.screenY):ih=Cl=0,bf=c),Cl)},movementY:function(c){return"movementY"in c?c.movementY:ih}}),wf=ui(Ln),ls=oe({},Ln,{dataTransfer:0}),$a=ui(ls),Hn=oe({},Rr,{relatedTarget:0}),Ci=ui(Hn),La=oe({},sh,{animationName:0,elapsedTime:0,pseudoElement:0}),Xo=ui(La),gr=oe({},sh,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),Lm=ui(gr),td=oe({},sh,{data:0}),El=ui(td),dg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fm(c){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(c):(c=Tl[c])?!!u[c]:!1}function Pl(){return Fm}var lh=oe({},Rr,{key:function(c){if(c.key){var u=dg[c.key]||c.key;if(u!=="Unidentified")return u}return c.type==="keypress"?(c=Dm(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?oh[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pl,charCode:function(c){return c.type==="keypress"?Dm(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Dm(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),G0=ui(lh),ug=oe({},Ln,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),X0=ui(ug),I1=oe({},Rr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pl}),M1=ui(I1),O1=oe({},sh,{propertyName:0,elapsedTime:0,pseudoElement:0}),R1=ui(O1),D1=oe({},Ln,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),$1=ui(D1),L1=[9,13,27,32],Yd=l&&"CompositionEvent"in window,jo=null;l&&"documentMode"in document&&(jo=document.documentMode);var Nf=l&&"TextEvent"in window&&!jo,Q0=l&&(!Yd||jo&&8<jo&&11>=jo),dc=" ",Bm=!1;function J0(c,u){switch(c){case"keyup":return L1.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hg(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var ch=!1;function Kd(c,u){switch(c){case"compositionend":return hg(u);case"keypress":return u.which!==32?null:(Bm=!0,dc);case"textInput":return c=u.data,c===dc&&Bm?null:c;default:return null}}function fg(c,u){if(ch)return c==="compositionend"||!Yd&&J0(c,u)?(c=Da(),Or=Go=_n=null,ch=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Q0&&u.locale!=="ko"?null:u.data;default:return null}}var Z0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gd(c){var u=c&&c.nodeName&&c.nodeName.toLowerCase();return u==="input"?!!Z0[c.type]:u==="textarea"}function mg(c,u,p,v){Je(v),u=kf(u,"onChange"),0<u.length&&(p=new ah("onChange","change",null,p,v),c.push({event:p,listeners:u}))}var dh=null,rd=null;function kv(c){Ks(c,0)}function Xd(c){var u=Ml(c);if(Ie(u))return c}function wn(c,u){if(c==="change")return u}var nd=!1;if(l){var cn;if(l){var Ya="oninput"in document;if(!Ya){var pg=document.createElement("div");pg.setAttribute("oninput","return;"),Ya=typeof pg.oninput=="function"}cn=Ya}else cn=!1;nd=cn&&(!document.documentMode||9<document.documentMode)}function Um(){dh&&(dh.detachEvent("onpropertychange",jf),rd=dh=null)}function jf(c){if(c.propertyName==="value"&&Xd(rd)){var u=[];mg(u,rd,c,Oe(c)),He(kv,u)}}function So(c,u,p){c==="focusin"?(Um(),dh=u,rd=p,dh.attachEvent("onpropertychange",jf)):c==="focusout"&&Um()}function Ka(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return Xd(rd)}function dn(c,u){if(c==="click")return Xd(u)}function xs(c,u){if(c==="input"||c==="change")return Xd(u)}function Qd(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var ko=typeof Object.is=="function"?Object.is:Qd;function uc(c,u){if(ko(c,u))return!0;if(typeof c!="object"||c===null||typeof u!="object"||u===null)return!1;var p=Object.keys(c),v=Object.keys(u);if(p.length!==v.length)return!1;for(v=0;v<p.length;v++){var k=p[v];if(!d.call(u,k)||!ko(c[k],u[k]))return!1}return!0}function sd(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function Sf(c,u){var p=sd(c);c=0;for(var v;p;){if(p.nodeType===3){if(v=c+p.textContent.length,c<=u&&v>=u)return{node:p,offset:u-c};c=v}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=sd(p)}}function Qo(c,u){return c&&u?c===u?!0:c&&c.nodeType===3?!1:u&&u.nodeType===3?Qo(c,u.parentNode):"contains"in c?c.contains(u):c.compareDocumentPosition?!!(c.compareDocumentPosition(u)&16):!1:!1}function Ea(){for(var c=window,u=Ue();u instanceof c.HTMLIFrameElement;){try{var p=typeof u.contentWindow.location.href=="string"}catch{p=!1}if(p)c=u.contentWindow;else break;u=Ue(c.document)}return u}function Jd(c){var u=c&&c.nodeName&&c.nodeName.toLowerCase();return u&&(u==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||u==="textarea"||c.contentEditable==="true")}function Zd(c){var u=Ea(),p=c.focusedElem,v=c.selectionRange;if(u!==p&&p&&p.ownerDocument&&Qo(p.ownerDocument.documentElement,p)){if(v!==null&&Jd(p)){if(u=v.start,c=v.end,c===void 0&&(c=u),"selectionStart"in p)p.selectionStart=u,p.selectionEnd=Math.min(c,p.value.length);else if(c=(u=p.ownerDocument||document)&&u.defaultView||window,c.getSelection){c=c.getSelection();var k=p.textContent.length,_=Math.min(v.start,k);v=v.end===void 0?_:Math.min(v.end,k),!c.extend&&_>v&&(k=v,v=_,_=k),k=Sf(p,_);var F=Sf(p,v);k&&F&&(c.rangeCount!==1||c.anchorNode!==k.node||c.anchorOffset!==k.offset||c.focusNode!==F.node||c.focusOffset!==F.offset)&&(u=u.createRange(),u.setStart(k.node,k.offset),c.removeAllRanges(),_>v?(c.addRange(u),c.extend(F.node,F.offset)):(u.setEnd(F.node,F.offset),c.addRange(u)))}}for(u=[],c=p;c=c.parentNode;)c.nodeType===1&&u.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<u.length;p++)c=u[p],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var kn=l&&"documentMode"in document&&11>=document.documentMode,Ta=null,Ts=null,cs=null,ad=!1;function Co(c,u,p){var v=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;ad||Ta==null||Ta!==Ue(v)||(v=Ta,"selectionStart"in v&&Jd(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),cs&&uc(cs,v)||(cs=v,v=kf(Ts,"onSelect"),0<v.length&&(u=new ah("onSelect","select",null,u,p),c.push({event:u,listeners:v}),u.target=Ta)))}function gg(c,u){var p={};return p[c.toLowerCase()]=u.toLowerCase(),p["Webkit"+c]="webkit"+u,p["Moz"+c]="moz"+u,p}var Ei={animationend:gg("Animation","AnimationEnd"),animationiteration:gg("Animation","AnimationIteration"),animationstart:gg("Animation","AnimationStart"),transitionend:gg("Transition","TransitionEnd")},Ki={},zm={};l&&(zm=document.createElement("div").style,"AnimationEvent"in window||(delete Ei.animationend.animation,delete Ei.animationiteration.animation,delete Ei.animationstart.animation),"TransitionEvent"in window||delete Ei.transitionend.transition);function hc(c){if(Ki[c])return Ki[c];if(!Ei[c])return c;var u=Ei[c],p;for(p in u)if(u.hasOwnProperty(p)&&p in zm)return Ki[c]=u[p];return c}var cr=hc("animationend"),hi=hc("animationiteration"),fc=hc("animationstart"),Gi=hc("transitionend"),id=new Map,Xi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Eo(c,u){id.set(c,u),i(u,[c])}for(var uh=0;uh<Xi.length;uh++){var ts=Xi[uh],od=ts.toLowerCase(),en=ts[0].toUpperCase()+ts.slice(1);Eo(od,"on"+en)}Eo(cr,"onAnimationEnd"),Eo(hi,"onAnimationIteration"),Eo(fc,"onAnimationStart"),Eo("dblclick","onDoubleClick"),Eo("focusin","onFocus"),Eo("focusout","onBlur"),Eo(Gi,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ld="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ti=new Set("cancel close invalid load scroll toggle".split(" ").concat(ld));function To(c,u,p){var v=c.type||"unknown-event";c.currentTarget=p,yr(v,u,void 0,c),c.currentTarget=null}function Ks(c,u){u=(u&4)!==0;for(var p=0;p<c.length;p++){var v=c[p],k=v.event;v=v.listeners;e:{var _=void 0;if(u)for(var F=v.length-1;0<=F;F--){var se=v[F],J=se.instance,xe=se.currentTarget;if(se=se.listener,J!==_&&k.isPropagationStopped())break e;To(k,se,xe),_=J}else for(F=0;F<v.length;F++){if(se=v[F],J=se.instance,xe=se.currentTarget,se=se.listener,J!==_&&k.isPropagationStopped())break e;To(k,se,xe),_=J}}}if(ar)throw c=Cr,ar=!1,Cr=null,c}function an(c,u){var p=u[fh];p===void 0&&(p=u[fh]=new Set);var v=c+"__bubble";p.has(v)||(Pi(u,c,2,!1),p.add(v))}function ex(c,u,p){var v=0;u&&(v|=4),Pi(p,c,v,u)}var Al="_reactListening"+Math.random().toString(36).slice(2);function tn(c){if(!c[Al]){c[Al]=!0,s.forEach(function(p){p!=="selectionchange"&&(Ti.has(p)||ex(p,!1,c),ex(p,!0,c))});var u=c.nodeType===9?c:c.ownerDocument;u===null||u[Al]||(u[Al]=!0,ex("selectionchange",!1,u))}}function Pi(c,u,p,v){switch(Ko(u)){case 1:var k=kl;break;case 4:k=ci;break;default:k=nh}p=k.bind(null,u,p,c),k=void 0,!Zt||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(k=!0),v?k!==void 0?c.addEventListener(u,p,{capture:!0,passive:k}):c.addEventListener(u,p,!0):k!==void 0?c.addEventListener(u,p,{passive:k}):c.addEventListener(u,p,!1)}function eu(c,u,p,v,k){var _=v;if((u&1)===0&&(u&2)===0&&v!==null)e:for(;;){if(v===null)return;var F=v.tag;if(F===3||F===4){var se=v.stateNode.containerInfo;if(se===k||se.nodeType===8&&se.parentNode===k)break;if(F===4)for(F=v.return;F!==null;){var J=F.tag;if((J===3||J===4)&&(J=F.stateNode.containerInfo,J===k||J.nodeType===8&&J.parentNode===k))return;F=F.return}for(;se!==null;){if(F=Po(se),F===null)return;if(J=F.tag,J===5||J===6){v=_=F;continue e}se=se.parentNode}}v=v.return}He(function(){var xe=_,ye=Oe(p),Pe=[];e:{var De=id.get(c);if(De!==void 0){var Ve=ah,Be=c;switch(c){case"keypress":if(Dm(p)===0)break e;case"keydown":case"keyup":Ve=G0;break;case"focusin":Be="focus",Ve=Ci;break;case"focusout":Be="blur",Ve=Ci;break;case"beforeblur":case"afterblur":Ve=Ci;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ve=wf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ve=$a;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ve=M1;break;case cr:case hi:case fc:Ve=Xo;break;case Gi:Ve=R1;break;case"scroll":Ve=Es;break;case"wheel":Ve=$1;break;case"copy":case"cut":case"paste":Ve=Lm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ve=X0}var et=(u&4)!==0,Xe=!et&&c==="scroll",Me=et?De!==null?De+"Capture":null:De;et=[];for(var _e=xe,ze;_e!==null;){ze=_e;var Ze=ze.stateNode;if(ze.tag===5&&Ze!==null&&(ze=Ze,Me!==null&&(Ze=Vt(_e,Me),Ze!=null&&et.push(Ga(_e,Ze,ze)))),Xe)break;_e=_e.return}0<et.length&&(De=new Ve(De,Be,null,p,ye),Pe.push({event:De,listeners:et}))}}if((u&7)===0){e:{if(De=c==="mouseover"||c==="pointerover",Ve=c==="mouseout"||c==="pointerout",De&&p!==Ne&&(Be=p.relatedTarget||p.fromElement)&&(Po(Be)||Be[Ps]))break e;if((Ve||De)&&(De=ye.window===ye?ye:(De=ye.ownerDocument)?De.defaultView||De.parentWindow:window,Ve?(Be=p.relatedTarget||p.toElement,Ve=xe,Be=Be?Po(Be):null,Be!==null&&(Xe=Qn(Be),Be!==Xe||Be.tag!==5&&Be.tag!==6)&&(Be=null)):(Ve=null,Be=xe),Ve!==Be)){if(et=wf,Ze="onMouseLeave",Me="onMouseEnter",_e="mouse",(c==="pointerout"||c==="pointerover")&&(et=X0,Ze="onPointerLeave",Me="onPointerEnter",_e="pointer"),Xe=Ve==null?De:Ml(Ve),ze=Be==null?De:Ml(Be),De=new et(Ze,_e+"leave",Ve,p,ye),De.target=Xe,De.relatedTarget=ze,Ze=null,Po(ye)===xe&&(et=new et(Me,_e+"enter",Be,p,ye),et.target=ze,et.relatedTarget=Xe,Ze=et),Xe=Ze,Ve&&Be)t:{for(et=Ve,Me=Be,_e=0,ze=et;ze;ze=cd(ze))_e++;for(ze=0,Ze=Me;Ze;Ze=cd(Ze))ze++;for(;0<_e-ze;)et=cd(et),_e--;for(;0<ze-_e;)Me=cd(Me),ze--;for(;_e--;){if(et===Me||Me!==null&&et===Me.alternate)break t;et=cd(et),Me=cd(Me)}et=null}else et=null;Ve!==null&&mc(Pe,De,Ve,et,!1),Be!==null&&Xe!==null&&mc(Pe,Xe,Be,et,!0)}}e:{if(De=xe?Ml(xe):window,Ve=De.nodeName&&De.nodeName.toLowerCase(),Ve==="select"||Ve==="input"&&De.type==="file")var vt=wn;else if(Gd(De))if(nd)vt=xs;else{vt=Ka;var jt=So}else(Ve=De.nodeName)&&Ve.toLowerCase()==="input"&&(De.type==="checkbox"||De.type==="radio")&&(vt=dn);if(vt&&(vt=vt(c,xe))){mg(Pe,vt,p,ye);break e}jt&&jt(c,De,xe),c==="focusout"&&(jt=De._wrapperState)&&jt.controlled&&De.type==="number"&&Ct(De,"number",De.value)}switch(jt=xe?Ml(xe):window,c){case"focusin":(Gd(jt)||jt.contentEditable==="true")&&(Ta=jt,Ts=xe,cs=null);break;case"focusout":cs=Ts=Ta=null;break;case"mousedown":ad=!0;break;case"contextmenu":case"mouseup":case"dragend":ad=!1,Co(Pe,p,ye);break;case"selectionchange":if(kn)break;case"keydown":case"keyup":Co(Pe,p,ye)}var Gt;if(Yd)e:{switch(c){case"compositionstart":var xr="onCompositionStart";break e;case"compositionend":xr="onCompositionEnd";break e;case"compositionupdate":xr="onCompositionUpdate";break e}xr=void 0}else ch?J0(c,p)&&(xr="onCompositionEnd"):c==="keydown"&&p.keyCode===229&&(xr="onCompositionStart");xr&&(Q0&&p.locale!=="ko"&&(ch||xr!=="onCompositionStart"?xr==="onCompositionEnd"&&ch&&(Gt=Da()):(_n=ye,Go="value"in _n?_n.value:_n.textContent,ch=!0)),jt=kf(xe,xr),0<jt.length&&(xr=new El(xr,c,null,p,ye),Pe.push({event:xr,listeners:jt}),Gt?xr.data=Gt:(Gt=hg(p),Gt!==null&&(xr.data=Gt)))),(Gt=Nf?Kd(c,p):fg(c,p))&&(xe=kf(xe,"onBeforeInput"),0<xe.length&&(ye=new El("onBeforeInput","beforeinput",null,p,ye),Pe.push({event:ye,listeners:xe}),ye.data=Gt))}Ks(Pe,u)})}function Ga(c,u,p){return{instance:c,listener:u,currentTarget:p}}function kf(c,u){for(var p=u+"Capture",v=[];c!==null;){var k=c,_=k.stateNode;k.tag===5&&_!==null&&(k=_,_=Vt(c,p),_!=null&&v.unshift(Ga(c,_,k)),_=Vt(c,u),_!=null&&v.push(Ga(c,_,k))),c=c.return}return v}function cd(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function mc(c,u,p,v,k){for(var _=u._reactName,F=[];p!==null&&p!==v;){var se=p,J=se.alternate,xe=se.stateNode;if(J!==null&&J===v)break;se.tag===5&&xe!==null&&(se=xe,k?(J=Vt(p,_),J!=null&&F.unshift(Ga(p,J,se))):k||(J=Vt(p,_),J!=null&&F.push(Ga(p,J,se)))),p=p.return}F.length!==0&&c.push({event:u,listeners:F})}var pc=/\r\n?/g,F1=/\u0000|\uFFFD/g;function Vm(c){return(typeof c=="string"?c:""+c).replace(pc,`
`).replace(F1,"")}function jr(c,u,p){if(u=Vm(u),Vm(c)!==u&&p)throw Error(r(425))}function dd(){}var rs=null,Qi=null;function $s(c,u){return c==="textarea"||c==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var _l=typeof setTimeout=="function"?setTimeout:void 0,fi=typeof clearTimeout=="function"?clearTimeout:void 0,tu=typeof Promise=="function"?Promise:void 0,Fa=typeof queueMicrotask=="function"?queueMicrotask:typeof tu<"u"?function(c){return tu.resolve(null).then(c).catch(ru)}:_l;function ru(c){setTimeout(function(){throw c})}function nu(c,u){var p=u,v=0;do{var k=p.nextSibling;if(c.removeChild(p),k&&k.nodeType===8)if(p=k.data,p==="/$"){if(v===0){c.removeChild(k),Zc(u);return}v--}else p!=="$"&&p!=="$?"&&p!=="$!"||v++;p=k}while(p);Zc(u)}function xa(c){for(;c!=null;c=c.nextSibling){var u=c.nodeType;if(u===1||u===3)break;if(u===8){if(u=c.data,u==="$"||u==="$!"||u==="$?")break;if(u==="/$")return null}}return c}function zr(c){c=c.previousSibling;for(var u=0;c;){if(c.nodeType===8){var p=c.data;if(p==="$"||p==="$!"||p==="$?"){if(u===0)return c;u--}else p==="/$"&&u++}c=c.previousSibling}return null}var gc=Math.random().toString(36).slice(2),Ur="__reactFiber$"+gc,hh="__reactProps$"+gc,Ps="__reactContainer$"+gc,fh="__reactEvents$"+gc,tx="__reactListeners$"+gc,xg="__reactHandles$"+gc;function Po(c){var u=c[Ur];if(u)return u;for(var p=c.parentNode;p;){if(u=p[Ps]||p[Ur]){if(p=u.alternate,u.child!==null||p!==null&&p.child!==null)for(c=zr(c);c!==null;){if(p=c[Ur])return p;c=zr(c)}return u}c=p,p=c.parentNode}return null}function Il(c){return c=c[Ur]||c[Ps],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function Ml(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(r(33))}function Ji(c){return c[hh]||null}var qm=[],Jo=-1;function Zo(c){return{current:c}}function In(c){0>Jo||(c.current=qm[Jo],qm[Jo]=null,Jo--)}function Fn(c,u){Jo++,qm[Jo]=c.current,c.current=u}var el={},As=Zo(el),ya=Zo(!1),Ol=el;function xc(c,u){var p=c.type.contextTypes;if(!p)return el;var v=c.stateNode;if(v&&v.__reactInternalMemoizedUnmaskedChildContext===u)return v.__reactInternalMemoizedMaskedChildContext;var k={},_;for(_ in p)k[_]=u[_];return v&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=u,c.__reactInternalMemoizedMaskedChildContext=k),k}function Qr(c){return c=c.childContextTypes,c!=null}function tl(){In(ya),In(As)}function Hm(c,u,p){if(As.current!==el)throw Error(r(168));Fn(As,u),Fn(ya,p)}function Rl(c,u,p){var v=c.stateNode;if(u=u.childContextTypes,typeof v.getChildContext!="function")return p;v=v.getChildContext();for(var k in v)if(!(k in u))throw Error(r(108,he(c)||"Unknown",k));return oe({},p,v)}function su(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||el,Ol=As.current,Fn(As,c),Fn(ya,ya.current),!0}function Cf(c,u,p){var v=c.stateNode;if(!v)throw Error(r(169));p?(c=Rl(c,u,Ol),v.__reactInternalMemoizedMergedChildContext=c,In(ya),In(As),Fn(As,c)):In(ya),Fn(ya,p)}var Gs=null,Ai=!1,Xa=!1;function Dl(c){Gs===null?Gs=[c]:Gs.push(c)}function B1(c){Ai=!0,Dl(c)}function Qa(){if(!Xa&&Gs!==null){Xa=!0;var c=0,u=Qt;try{var p=Gs;for(Qt=1;c<p.length;c++){var v=p[c];do v=v(!0);while(v!==null)}Gs=null,Ai=!1}catch(k){throw Gs!==null&&(Gs=Gs.slice(c+1)),ct(Br,Qa),k}finally{Qt=u,Xa=!1}}return null}var au=[],Cn=0,mh=null,$l=0,_i=[],Ao=0,iu=null,Ll=1,Zi="";function Mn(c,u){au[Cn++]=$l,au[Cn++]=mh,mh=c,$l=u}function Cv(c,u,p){_i[Ao++]=Ll,_i[Ao++]=Zi,_i[Ao++]=iu,iu=c;var v=Ll;c=Zi;var k=32-Ca(v)-1;v&=~(1<<k),p+=1;var _=32-Ca(u)+k;if(30<_){var F=k-k%5;_=(v&(1<<F)-1).toString(32),v>>=F,k-=F,Ll=1<<32-Ca(u)+k|p<<k|v,Zi=_+c}else Ll=1<<_|p<<k|v,Zi=c}function ir(c){c.return!==null&&(Mn(c,1),Cv(c,1,0))}function yg(c){for(;c===mh;)mh=au[--Cn],au[Cn]=null,$l=au[--Cn],au[Cn]=null;for(;c===iu;)iu=_i[--Ao],_i[Ao]=null,Zi=_i[--Ao],_i[Ao]=null,Ll=_i[--Ao],_i[Ao]=null}var eo=null,la=null,rt=!1,to=null;function ud(c,u){var p=Hl(5,null,null,0);p.elementType="DELETED",p.stateNode=u,p.return=c,u=c.deletions,u===null?(c.deletions=[p],c.flags|=16):u.push(p)}function ou(c,u){switch(c.tag){case 5:var p=c.type;return u=u.nodeType!==1||p.toLowerCase()!==u.nodeName.toLowerCase()?null:u,u!==null?(c.stateNode=u,eo=c,la=xa(u.firstChild),!0):!1;case 6:return u=c.pendingProps===""||u.nodeType!==3?null:u,u!==null?(c.stateNode=u,eo=c,la=null,!0):!1;case 13:return u=u.nodeType!==8?null:u,u!==null?(p=iu!==null?{id:Ll,overflow:Zi}:null,c.memoizedState={dehydrated:u,treeContext:p,retryLane:1073741824},p=Hl(18,null,null,0),p.stateNode=u,p.return=c,c.child=p,eo=c,la=null,!0):!1;default:return!1}}function Fl(c){return(c.mode&1)!==0&&(c.flags&128)===0}function ph(c){if(rt){var u=la;if(u){var p=u;if(!ou(c,u)){if(Fl(c))throw Error(r(418));u=xa(p.nextSibling);var v=eo;u&&ou(c,u)?ud(v,p):(c.flags=c.flags&-4097|2,rt=!1,eo=c)}}else{if(Fl(c))throw Error(r(418));c.flags=c.flags&-4097|2,rt=!1,eo=c}}}function hd(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;eo=c}function lu(c){if(c!==eo)return!1;if(!rt)return hd(c),rt=!0,!1;var u;if((u=c.tag!==3)&&!(u=c.tag!==5)&&(u=c.type,u=u!=="head"&&u!=="body"&&!$s(c.type,c.memoizedProps)),u&&(u=la)){if(Fl(c))throw yc(),Error(r(418));for(;u;)ud(c,u),u=xa(u.nextSibling)}if(hd(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));e:{for(c=c.nextSibling,u=0;c;){if(c.nodeType===8){var p=c.data;if(p==="/$"){if(u===0){la=xa(c.nextSibling);break e}u--}else p!=="$"&&p!=="$!"&&p!=="$?"||u++}c=c.nextSibling}la=null}}else la=eo?xa(c.stateNode.nextSibling):null;return!0}function yc(){for(var c=la;c;)c=xa(c.nextSibling)}function Bl(){la=eo=null,rt=!1}function gh(c){to===null?to=[c]:to.push(c)}var cu=I.ReactCurrentBatchConfig;function Vr(c,u,p){if(c=p.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(r(309));var v=p.stateNode}if(!v)throw Error(r(147,c));var k=v,_=""+c;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===_?u.ref:(u=function(F){var se=k.refs;F===null?delete se[_]:se[_]=F},u._stringRef=_,u)}if(typeof c!="string")throw Error(r(284));if(!p._owner)throw Error(r(290,c))}return c}function xh(c,u){throw c=Object.prototype.toString.call(u),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":c))}function yh(c){var u=c._init;return u(c._payload)}function Ef(c){function u(Me,_e){if(c){var ze=Me.deletions;ze===null?(Me.deletions=[_e],Me.flags|=16):ze.push(_e)}}function p(Me,_e){if(!c)return null;for(;_e!==null;)u(Me,_e),_e=_e.sibling;return null}function v(Me,_e){for(Me=new Map;_e!==null;)_e.key!==null?Me.set(_e.key,_e):Me.set(_e.index,_e),_e=_e.sibling;return Me}function k(Me,_e){return Me=Rh(Me,_e),Me.index=0,Me.sibling=null,Me}function _(Me,_e,ze){return Me.index=ze,c?(ze=Me.alternate,ze!==null?(ze=ze.index,ze<_e?(Me.flags|=2,_e):ze):(Me.flags|=2,_e)):(Me.flags|=1048576,_e)}function F(Me){return c&&Me.alternate===null&&(Me.flags|=2),Me}function se(Me,_e,ze,Ze){return _e===null||_e.tag!==6?(_e=Mv(ze,Me.mode,Ze),_e.return=Me,_e):(_e=k(_e,ze),_e.return=Me,_e)}function J(Me,_e,ze,Ze){var vt=ze.type;return vt===R?ye(Me,_e,ze.props.children,Ze,ze.key):_e!==null&&(_e.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===de&&yh(vt)===_e.type)?(Ze=k(_e,ze.props),Ze.ref=Vr(Me,_e,ze),Ze.return=Me,Ze):(Ze=ju(ze.type,ze.key,ze.props,null,Me.mode,Ze),Ze.ref=Vr(Me,_e,ze),Ze.return=Me,Ze)}function xe(Me,_e,ze,Ze){return _e===null||_e.tag!==4||_e.stateNode.containerInfo!==ze.containerInfo||_e.stateNode.implementation!==ze.implementation?(_e=Pc(ze,Me.mode,Ze),_e.return=Me,_e):(_e=k(_e,ze.children||[]),_e.return=Me,_e)}function ye(Me,_e,ze,Ze,vt){return _e===null||_e.tag!==7?(_e=Dh(ze,Me.mode,Ze,vt),_e.return=Me,_e):(_e=k(_e,ze),_e.return=Me,_e)}function Pe(Me,_e,ze){if(typeof _e=="string"&&_e!==""||typeof _e=="number")return _e=Mv(""+_e,Me.mode,ze),_e.return=Me,_e;if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case P:return ze=ju(_e.type,_e.key,_e.props,null,Me.mode,ze),ze.ref=Vr(Me,null,_e),ze.return=Me,ze;case A:return _e=Pc(_e,Me.mode,ze),_e.return=Me,_e;case de:var Ze=_e._init;return Pe(Me,Ze(_e._payload),ze)}if(we(_e)||ne(_e))return _e=Dh(_e,Me.mode,ze,null),_e.return=Me,_e;xh(Me,_e)}return null}function De(Me,_e,ze,Ze){var vt=_e!==null?_e.key:null;if(typeof ze=="string"&&ze!==""||typeof ze=="number")return vt!==null?null:se(Me,_e,""+ze,Ze);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case P:return ze.key===vt?J(Me,_e,ze,Ze):null;case A:return ze.key===vt?xe(Me,_e,ze,Ze):null;case de:return vt=ze._init,De(Me,_e,vt(ze._payload),Ze)}if(we(ze)||ne(ze))return vt!==null?null:ye(Me,_e,ze,Ze,null);xh(Me,ze)}return null}function Ve(Me,_e,ze,Ze,vt){if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number")return Me=Me.get(ze)||null,se(_e,Me,""+Ze,vt);if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case P:return Me=Me.get(Ze.key===null?ze:Ze.key)||null,J(_e,Me,Ze,vt);case A:return Me=Me.get(Ze.key===null?ze:Ze.key)||null,xe(_e,Me,Ze,vt);case de:var jt=Ze._init;return Ve(Me,_e,ze,jt(Ze._payload),vt)}if(we(Ze)||ne(Ze))return Me=Me.get(ze)||null,ye(_e,Me,Ze,vt,null);xh(_e,Ze)}return null}function Be(Me,_e,ze,Ze){for(var vt=null,jt=null,Gt=_e,xr=_e=0,as=null;Gt!==null&&xr<ze.length;xr++){Gt.index>xr?(as=Gt,Gt=null):as=Gt.sibling;var Nn=De(Me,Gt,ze[xr],Ze);if(Nn===null){Gt===null&&(Gt=as);break}c&&Gt&&Nn.alternate===null&&u(Me,Gt),_e=_(Nn,_e,xr),jt===null?vt=Nn:jt.sibling=Nn,jt=Nn,Gt=as}if(xr===ze.length)return p(Me,Gt),rt&&Mn(Me,xr),vt;if(Gt===null){for(;xr<ze.length;xr++)Gt=Pe(Me,ze[xr],Ze),Gt!==null&&(_e=_(Gt,_e,xr),jt===null?vt=Gt:jt.sibling=Gt,jt=Gt);return rt&&Mn(Me,xr),vt}for(Gt=v(Me,Gt);xr<ze.length;xr++)as=Ve(Gt,Me,xr,ze[xr],Ze),as!==null&&(c&&as.alternate!==null&&Gt.delete(as.key===null?xr:as.key),_e=_(as,_e,xr),jt===null?vt=as:jt.sibling=as,jt=as);return c&&Gt.forEach(function(Su){return u(Me,Su)}),rt&&Mn(Me,xr),vt}function et(Me,_e,ze,Ze){var vt=ne(ze);if(typeof vt!="function")throw Error(r(150));if(ze=vt.call(ze),ze==null)throw Error(r(151));for(var jt=vt=null,Gt=_e,xr=_e=0,as=null,Nn=ze.next();Gt!==null&&!Nn.done;xr++,Nn=ze.next()){Gt.index>xr?(as=Gt,Gt=null):as=Gt.sibling;var Su=De(Me,Gt,Nn.value,Ze);if(Su===null){Gt===null&&(Gt=as);break}c&&Gt&&Su.alternate===null&&u(Me,Gt),_e=_(Su,_e,xr),jt===null?vt=Su:jt.sibling=Su,jt=Su,Gt=as}if(Nn.done)return p(Me,Gt),rt&&Mn(Me,xr),vt;if(Gt===null){for(;!Nn.done;xr++,Nn=ze.next())Nn=Pe(Me,Nn.value,Ze),Nn!==null&&(_e=_(Nn,_e,xr),jt===null?vt=Nn:jt.sibling=Nn,jt=Nn);return rt&&Mn(Me,xr),vt}for(Gt=v(Me,Gt);!Nn.done;xr++,Nn=ze.next())Nn=Ve(Gt,Me,xr,Nn.value,Ze),Nn!==null&&(c&&Nn.alternate!==null&&Gt.delete(Nn.key===null?xr:Nn.key),_e=_(Nn,_e,xr),jt===null?vt=Nn:jt.sibling=Nn,jt=Nn);return c&&Gt.forEach(function(Lv){return u(Me,Lv)}),rt&&Mn(Me,xr),vt}function Xe(Me,_e,ze,Ze){if(typeof ze=="object"&&ze!==null&&ze.type===R&&ze.key===null&&(ze=ze.props.children),typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case P:e:{for(var vt=ze.key,jt=_e;jt!==null;){if(jt.key===vt){if(vt=ze.type,vt===R){if(jt.tag===7){p(Me,jt.sibling),_e=k(jt,ze.props.children),_e.return=Me,Me=_e;break e}}else if(jt.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===de&&yh(vt)===jt.type){p(Me,jt.sibling),_e=k(jt,ze.props),_e.ref=Vr(Me,jt,ze),_e.return=Me,Me=_e;break e}p(Me,jt);break}else u(Me,jt);jt=jt.sibling}ze.type===R?(_e=Dh(ze.props.children,Me.mode,Ze,ze.key),_e.return=Me,Me=_e):(Ze=ju(ze.type,ze.key,ze.props,null,Me.mode,Ze),Ze.ref=Vr(Me,_e,ze),Ze.return=Me,Me=Ze)}return F(Me);case A:e:{for(jt=ze.key;_e!==null;){if(_e.key===jt)if(_e.tag===4&&_e.stateNode.containerInfo===ze.containerInfo&&_e.stateNode.implementation===ze.implementation){p(Me,_e.sibling),_e=k(_e,ze.children||[]),_e.return=Me,Me=_e;break e}else{p(Me,_e);break}else u(Me,_e);_e=_e.sibling}_e=Pc(ze,Me.mode,Ze),_e.return=Me,Me=_e}return F(Me);case de:return jt=ze._init,Xe(Me,_e,jt(ze._payload),Ze)}if(we(ze))return Be(Me,_e,ze,Ze);if(ne(ze))return et(Me,_e,ze,Ze);xh(Me,ze)}return typeof ze=="string"&&ze!==""||typeof ze=="number"?(ze=""+ze,_e!==null&&_e.tag===6?(p(Me,_e.sibling),_e=k(_e,ze),_e.return=Me,Me=_e):(p(Me,_e),_e=Mv(ze,Me.mode,Ze),_e.return=Me,Me=_e),F(Me)):p(Me,_e)}return Xe}var vh=Ef(!0),fd=Ef(!1),_o=Zo(null),Tf=null,ro=null,du=null;function Pf(){du=ro=Tf=null}function Af(c){var u=_o.current;In(_o),c._currentValue=u}function Wm(c,u,p){for(;c!==null;){var v=c.alternate;if((c.childLanes&u)!==u?(c.childLanes|=u,v!==null&&(v.childLanes|=u)):v!==null&&(v.childLanes&u)!==u&&(v.childLanes|=u),c===p)break;c=c.return}}function vc(c,u){Tf=c,du=ro=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&u)!==0&&(va=!0),c.firstContext=null)}function no(c){var u=c._currentValue;if(du!==c)if(c={context:c,memoizedValue:u,next:null},ro===null){if(Tf===null)throw Error(r(308));ro=c,Tf.dependencies={lanes:0,firstContext:c}}else ro=ro.next=c;return u}var Ii=null;function Ba(c){Ii===null?Ii=[c]:Ii.push(c)}function rx(c,u,p,v){var k=u.interleaved;return k===null?(p.next=p,Ba(u)):(p.next=k.next,k.next=p),u.interleaved=p,bc(c,v)}function bc(c,u){c.lanes|=u;var p=c.alternate;for(p!==null&&(p.lanes|=u),p=c,c=c.return;c!==null;)c.childLanes|=u,p=c.alternate,p!==null&&(p.childLanes|=u),p=c,c=c.return;return p.tag===3?p.stateNode:null}var md=!1;function qr(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(c,u){c=c.updateQueue,u.updateQueue===c&&(u.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function so(c,u){return{eventTime:c,lane:u,tag:0,payload:null,callback:null,next:null}}function Io(c,u,p){var v=c.updateQueue;if(v===null)return null;if(v=v.shared,(En&2)!==0){var k=v.pending;return k===null?u.next=u:(u.next=k.next,k.next=u),v.pending=u,bc(c,p)}return k=v.interleaved,k===null?(u.next=u,Ba(v)):(u.next=k.next,k.next=u),v.interleaved=u,bc(c,p)}function Mi(c,u,p){if(u=u.updateQueue,u!==null&&(u=u.shared,(p&4194240)!==0)){var v=u.lanes;v&=c.pendingLanes,p|=v,u.lanes=p,Zu(c,p)}}function vg(c,u){var p=c.updateQueue,v=c.alternate;if(v!==null&&(v=v.updateQueue,p===v)){var k=null,_=null;if(p=p.firstBaseUpdate,p!==null){do{var F={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};_===null?k=_=F:_=_.next=F,p=p.next}while(p!==null);_===null?k=_=u:_=_.next=u}else k=_=u;p={baseState:v.baseState,firstBaseUpdate:k,lastBaseUpdate:_,shared:v.shared,effects:v.effects},c.updateQueue=p;return}c=p.lastBaseUpdate,c===null?p.firstBaseUpdate=u:c.next=u,p.lastBaseUpdate=u}function _f(c,u,p,v){var k=c.updateQueue;md=!1;var _=k.firstBaseUpdate,F=k.lastBaseUpdate,se=k.shared.pending;if(se!==null){k.shared.pending=null;var J=se,xe=J.next;J.next=null,F===null?_=xe:F.next=xe,F=J;var ye=c.alternate;ye!==null&&(ye=ye.updateQueue,se=ye.lastBaseUpdate,se!==F&&(se===null?ye.firstBaseUpdate=xe:se.next=xe,ye.lastBaseUpdate=J))}if(_!==null){var Pe=k.baseState;F=0,ye=xe=J=null,se=_;do{var De=se.lane,Ve=se.eventTime;if((v&De)===De){ye!==null&&(ye=ye.next={eventTime:Ve,lane:0,tag:se.tag,payload:se.payload,callback:se.callback,next:null});e:{var Be=c,et=se;switch(De=u,Ve=p,et.tag){case 1:if(Be=et.payload,typeof Be=="function"){Pe=Be.call(Ve,Pe,De);break e}Pe=Be;break e;case 3:Be.flags=Be.flags&-65537|128;case 0:if(Be=et.payload,De=typeof Be=="function"?Be.call(Ve,Pe,De):Be,De==null)break e;Pe=oe({},Pe,De);break e;case 2:md=!0}}se.callback!==null&&se.lane!==0&&(c.flags|=64,De=k.effects,De===null?k.effects=[se]:De.push(se))}else Ve={eventTime:Ve,lane:De,tag:se.tag,payload:se.payload,callback:se.callback,next:null},ye===null?(xe=ye=Ve,J=Pe):ye=ye.next=Ve,F|=De;if(se=se.next,se===null){if(se=k.shared.pending,se===null)break;De=se,se=De.next,De.next=null,k.lastBaseUpdate=De,k.shared.pending=null}}while(!0);if(ye===null&&(J=Pe),k.baseState=J,k.firstBaseUpdate=xe,k.lastBaseUpdate=ye,u=k.shared.interleaved,u!==null){k=u;do F|=k.lane,k=k.next;while(k!==u)}else _===null&&(k.shared.lanes=0);$o|=F,c.lanes=F,c.memoizedState=Pe}}function Ym(c,u,p){if(c=u.effects,u.effects=null,c!==null)for(u=0;u<c.length;u++){var v=c[u],k=v.callback;if(k!==null){if(v.callback=null,v=p,typeof k!="function")throw Error(r(191,k));k.call(v)}}}var wh={},Mo=Zo(wh),pd=Zo(wh),If=Zo(wh);function wc(c){if(c===wh)throw Error(r(174));return c}function Mf(c,u){switch(Fn(If,u),Fn(pd,c),Fn(Mo,wh),c=u.nodeType,c){case 9:case 11:u=(u=u.documentElement)?u.namespaceURI:Lr(null,"");break;default:c=c===8?u.parentNode:u,u=c.namespaceURI||null,c=c.tagName,u=Lr(u,c)}In(Mo),Fn(Mo,u)}function ra(){In(Mo),In(pd),In(If)}function Km(c){wc(If.current);var u=wc(Mo.current),p=Lr(u,c.type);u!==p&&(Fn(pd,c),Fn(Mo,p))}function ns(c){pd.current===c&&(In(Mo),In(pd))}var Wn=Zo(0);function gd(c){for(var u=c;u!==null;){if(u.tag===13){var p=u.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===c)break;for(;u.sibling===null;){if(u.return===null||u.return===c)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Nh=[];function Of(){for(var c=0;c<Nh.length;c++)Nh[c]._workInProgressVersionPrimary=null;Nh.length=0}var Nc=I.ReactCurrentDispatcher,bg=I.ReactCurrentBatchConfig,jc=0,ss=null,Ls=null,Xs=null,Oo=!1,uu=!1,Sc=0,Gm=0;function ca(){throw Error(r(321))}function xd(c,u){if(u===null)return!1;for(var p=0;p<u.length&&p<c.length;p++)if(!ko(c[p],u[p]))return!1;return!0}function Rf(c,u,p,v,k,_){if(jc=_,ss=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Nc.current=c===null||c.memoizedState===null?Uf:kg,c=p(v,k),uu){_=0;do{if(uu=!1,Sc=0,25<=_)throw Error(r(301));_+=1,Xs=Ls=null,u.updateQueue=null,Nc.current=ap,c=p(v,k)}while(uu)}if(Nc.current=bd,u=Ls!==null&&Ls.next!==null,jc=0,Xs=Ls=ss=null,Oo=!1,u)throw Error(r(300));return c}function hu(){var c=Sc!==0;return Sc=0,c}function rl(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xs===null?ss.memoizedState=Xs=c:Xs=Xs.next=c,Xs}function Fs(){if(Ls===null){var c=ss.alternate;c=c!==null?c.memoizedState:null}else c=Ls.next;var u=Xs===null?ss.memoizedState:Xs.next;if(u!==null)Xs=u,Ls=c;else{if(c===null)throw Error(r(310));Ls=c,c={memoizedState:Ls.memoizedState,baseState:Ls.baseState,baseQueue:Ls.baseQueue,queue:Ls.queue,next:null},Xs===null?ss.memoizedState=Xs=c:Xs=Xs.next=c}return Xs}function fu(c,u){return typeof u=="function"?u(c):u}function Oi(c){var u=Fs(),p=u.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=c;var v=Ls,k=v.baseQueue,_=p.pending;if(_!==null){if(k!==null){var F=k.next;k.next=_.next,_.next=F}v.baseQueue=k=_,p.pending=null}if(k!==null){_=k.next,v=v.baseState;var se=F=null,J=null,xe=_;do{var ye=xe.lane;if((jc&ye)===ye)J!==null&&(J=J.next={lane:0,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null}),v=xe.hasEagerState?xe.eagerState:c(v,xe.action);else{var Pe={lane:ye,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null};J===null?(se=J=Pe,F=v):J=J.next=Pe,ss.lanes|=ye,$o|=ye}xe=xe.next}while(xe!==null&&xe!==_);J===null?F=v:J.next=se,ko(v,u.memoizedState)||(va=!0),u.memoizedState=v,u.baseState=F,u.baseQueue=J,p.lastRenderedState=v}if(c=p.interleaved,c!==null){k=c;do _=k.lane,ss.lanes|=_,$o|=_,k=k.next;while(k!==c)}else k===null&&(p.lanes=0);return[u.memoizedState,p.dispatch]}function Xm(c){var u=Fs(),p=u.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=c;var v=p.dispatch,k=p.pending,_=u.memoizedState;if(k!==null){p.pending=null;var F=k=k.next;do _=c(_,F.action),F=F.next;while(F!==k);ko(_,u.memoizedState)||(va=!0),u.memoizedState=_,u.baseQueue===null&&(u.baseState=_),p.lastRenderedState=_}return[_,v]}function Qm(){}function Jm(c,u){var p=ss,v=Fs(),k=u(),_=!ko(v.memoizedState,k);if(_&&(v.memoizedState=k,va=!0),v=v.queue,jh(mu.bind(null,p,v,c),[c]),v.getSnapshot!==u||_||Xs!==null&&Xs.memoizedState.tag&1){if(p.flags|=2048,Ul(9,kc.bind(null,p,v,k,u),void 0,null),pi===null)throw Error(r(349));(jc&30)!==0||wg(p,u,k)}return k}function wg(c,u,p){c.flags|=16384,c={getSnapshot:u,value:p},u=ss.updateQueue,u===null?(u={lastEffect:null,stores:null},ss.updateQueue=u,u.stores=[c]):(p=u.stores,p===null?u.stores=[c]:p.push(c))}function kc(c,u,p,v){u.value=p,u.getSnapshot=v,Zm(u)&&ep(c)}function mu(c,u,p){return p(function(){Zm(u)&&ep(c)})}function Zm(c){var u=c.getSnapshot;c=c.value;try{var p=u();return!ko(c,p)}catch{return!0}}function ep(c){var u=bc(c,1);u!==null&&kd(u,c,1,-1)}function nl(c){var u=rl();return typeof c=="function"&&(c=c()),u.memoizedState=u.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fu,lastRenderedState:c},u.queue=c,c=c.dispatch=Sg.bind(null,ss,c),[u.memoizedState,c]}function Ul(c,u,p,v){return c={tag:c,create:u,destroy:p,deps:v,next:null},u=ss.updateQueue,u===null?(u={lastEffect:null,stores:null},ss.updateQueue=u,u.lastEffect=c.next=c):(p=u.lastEffect,p===null?u.lastEffect=c.next=c:(v=p.next,p.next=c,c.next=v,u.lastEffect=c)),c}function tp(){return Fs().memoizedState}function Df(c,u,p,v){var k=rl();ss.flags|=c,k.memoizedState=Ul(1|u,p,void 0,v===void 0?null:v)}function $f(c,u,p,v){var k=Fs();v=v===void 0?null:v;var _=void 0;if(Ls!==null){var F=Ls.memoizedState;if(_=F.destroy,v!==null&&xd(v,F.deps)){k.memoizedState=Ul(u,p,_,v);return}}ss.flags|=c,k.memoizedState=Ul(1|u,p,_,v)}function Ng(c,u){return Df(8390656,8,c,u)}function jh(c,u){return $f(2048,8,c,u)}function yd(c,u){return $f(4,2,c,u)}function rp(c,u){return $f(4,4,c,u)}function Lf(c,u){if(typeof u=="function")return c=c(),u(c),function(){u(null)};if(u!=null)return c=c(),u.current=c,function(){u.current=null}}function jg(c,u,p){return p=p!=null?p.concat([c]):null,$f(4,4,Lf.bind(null,u,c),p)}function Ff(){}function vd(c,u){var p=Fs();u=u===void 0?null:u;var v=p.memoizedState;return v!==null&&u!==null&&xd(u,v[1])?v[0]:(p.memoizedState=[c,u],c)}function Bf(c,u){var p=Fs();u=u===void 0?null:u;var v=p.memoizedState;return v!==null&&u!==null&&xd(u,v[1])?v[0]:(c=c(),p.memoizedState=[c,u],c)}function np(c,u,p){return(jc&21)===0?(c.baseState&&(c.baseState=!1,va=!0),c.memoizedState=p):(ko(p,u)||(p=Ju(),ss.lanes|=p,$o|=p,c.baseState=!0),u)}function Ro(c,u){var p=Qt;Qt=p!==0&&4>p?p:4,c(!0);var v=bg.transition;bg.transition={};try{c(!1),u()}finally{Qt=p,bg.transition=v}}function sp(){return Fs().memoizedState}function ao(c,u,p){var v=Nu(c);if(p={lane:v,action:p,hasEagerState:!1,eagerState:null,next:null},Sh(c))ys(u,p);else if(p=rx(c,u,p,v),p!==null){var k=Lo();kd(p,c,v,k),Ja(p,u,v)}}function Sg(c,u,p){var v=Nu(c),k={lane:v,action:p,hasEagerState:!1,eagerState:null,next:null};if(Sh(c))ys(u,k);else{var _=c.alternate;if(c.lanes===0&&(_===null||_.lanes===0)&&(_=u.lastRenderedReducer,_!==null))try{var F=u.lastRenderedState,se=_(F,p);if(k.hasEagerState=!0,k.eagerState=se,ko(se,F)){var J=u.interleaved;J===null?(k.next=k,Ba(u)):(k.next=J.next,J.next=k),u.interleaved=k;return}}catch{}finally{}p=rx(c,u,k,v),p!==null&&(k=Lo(),kd(p,c,v,k),Ja(p,u,v))}}function Sh(c){var u=c.alternate;return c===ss||u!==null&&u===ss}function ys(c,u){uu=Oo=!0;var p=c.pending;p===null?u.next=u:(u.next=p.next,p.next=u),c.pending=u}function Ja(c,u,p){if((p&4194240)!==0){var v=u.lanes;v&=c.pendingLanes,p|=v,u.lanes=p,Zu(c,p)}}var bd={readContext:no,useCallback:ca,useContext:ca,useEffect:ca,useImperativeHandle:ca,useInsertionEffect:ca,useLayoutEffect:ca,useMemo:ca,useReducer:ca,useRef:ca,useState:ca,useDebugValue:ca,useDeferredValue:ca,useTransition:ca,useMutableSource:ca,useSyncExternalStore:ca,useId:ca,unstable_isNewReconciler:!1},Uf={readContext:no,useCallback:function(c,u){return rl().memoizedState=[c,u===void 0?null:u],c},useContext:no,useEffect:Ng,useImperativeHandle:function(c,u,p){return p=p!=null?p.concat([c]):null,Df(4194308,4,Lf.bind(null,u,c),p)},useLayoutEffect:function(c,u){return Df(4194308,4,c,u)},useInsertionEffect:function(c,u){return Df(4,2,c,u)},useMemo:function(c,u){var p=rl();return u=u===void 0?null:u,c=c(),p.memoizedState=[c,u],c},useReducer:function(c,u,p){var v=rl();return u=p!==void 0?p(u):u,v.memoizedState=v.baseState=u,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:u},v.queue=c,c=c.dispatch=ao.bind(null,ss,c),[v.memoizedState,c]},useRef:function(c){var u=rl();return c={current:c},u.memoizedState=c},useState:nl,useDebugValue:Ff,useDeferredValue:function(c){return rl().memoizedState=c},useTransition:function(){var c=nl(!1),u=c[0];return c=Ro.bind(null,c[1]),rl().memoizedState=c,[u,c]},useMutableSource:function(){},useSyncExternalStore:function(c,u,p){var v=ss,k=rl();if(rt){if(p===void 0)throw Error(r(407));p=p()}else{if(p=u(),pi===null)throw Error(r(349));(jc&30)!==0||wg(v,u,p)}k.memoizedState=p;var _={value:p,getSnapshot:u};return k.queue=_,Ng(mu.bind(null,v,_,c),[c]),v.flags|=2048,Ul(9,kc.bind(null,v,_,p,u),void 0,null),p},useId:function(){var c=rl(),u=pi.identifierPrefix;if(rt){var p=Zi,v=Ll;p=(v&~(1<<32-Ca(v)-1)).toString(32)+p,u=":"+u+"R"+p,p=Sc++,0<p&&(u+="H"+p.toString(32)),u+=":"}else p=Gm++,u=":"+u+"r"+p.toString(32)+":";return c.memoizedState=u},unstable_isNewReconciler:!1},kg={readContext:no,useCallback:vd,useContext:no,useEffect:jh,useImperativeHandle:jg,useInsertionEffect:yd,useLayoutEffect:rp,useMemo:Bf,useReducer:Oi,useRef:tp,useState:function(){return Oi(fu)},useDebugValue:Ff,useDeferredValue:function(c){var u=Fs();return np(u,Ls.memoizedState,c)},useTransition:function(){var c=Oi(fu)[0],u=Fs().memoizedState;return[c,u]},useMutableSource:Qm,useSyncExternalStore:Jm,useId:sp,unstable_isNewReconciler:!1},ap={readContext:no,useCallback:vd,useContext:no,useEffect:jh,useImperativeHandle:jg,useInsertionEffect:yd,useLayoutEffect:rp,useMemo:Bf,useReducer:Xm,useRef:tp,useState:function(){return Xm(fu)},useDebugValue:Ff,useDeferredValue:function(c){var u=Fs();return Ls===null?u.memoizedState=c:np(u,Ls.memoizedState,c)},useTransition:function(){var c=Xm(fu)[0],u=Fs().memoizedState;return[c,u]},useMutableSource:Qm,useSyncExternalStore:Jm,useId:sp,unstable_isNewReconciler:!1};function mi(c,u){if(c&&c.defaultProps){u=oe({},u),c=c.defaultProps;for(var p in c)u[p]===void 0&&(u[p]=c[p]);return u}return u}function Cg(c,u,p,v){u=c.memoizedState,p=p(v,u),p=p==null?u:oe({},u,p),c.memoizedState=p,c.lanes===0&&(c.updateQueue.baseState=p)}var kh={isMounted:function(c){return(c=c._reactInternals)?Qn(c)===c:!1},enqueueSetState:function(c,u,p){c=c._reactInternals;var v=Lo(),k=Nu(c),_=so(v,k);_.payload=u,p!=null&&(_.callback=p),u=Io(c,_,k),u!==null&&(kd(u,c,k,v),Mi(u,c,k))},enqueueReplaceState:function(c,u,p){c=c._reactInternals;var v=Lo(),k=Nu(c),_=so(v,k);_.tag=1,_.payload=u,p!=null&&(_.callback=p),u=Io(c,_,k),u!==null&&(kd(u,c,k,v),Mi(u,c,k))},enqueueForceUpdate:function(c,u){c=c._reactInternals;var p=Lo(),v=Nu(c),k=so(p,v);k.tag=2,u!=null&&(k.callback=u),u=Io(c,k,v),u!==null&&(kd(u,c,v,p),Mi(u,c,v))}};function nx(c,u,p,v,k,_,F){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(v,_,F):u.prototype&&u.prototype.isPureReactComponent?!uc(p,v)||!uc(k,_):!0}function ip(c,u,p){var v=!1,k=el,_=u.contextType;return typeof _=="object"&&_!==null?_=no(_):(k=Qr(u)?Ol:As.current,v=u.contextTypes,_=(v=v!=null)?xc(c,k):el),u=new u(p,_),c.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=kh,c.stateNode=u,u._reactInternals=c,v&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=k,c.__reactInternalMemoizedMaskedChildContext=_),u}function sx(c,u,p,v){c=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(p,v),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(p,v),u.state!==c&&kh.enqueueReplaceState(u,u.state,null)}function pu(c,u,p,v){var k=c.stateNode;k.props=p,k.state=c.memoizedState,k.refs={},qr(c);var _=u.contextType;typeof _=="object"&&_!==null?k.context=no(_):(_=Qr(u)?Ol:As.current,k.context=xc(c,_)),k.state=c.memoizedState,_=u.getDerivedStateFromProps,typeof _=="function"&&(Cg(c,u,_,p),k.state=c.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(u=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),u!==k.state&&kh.enqueueReplaceState(k,k.state,null),_f(c,p,k,v),k.state=c.memoizedState),typeof k.componentDidMount=="function"&&(c.flags|=4194308)}function io(c,u){try{var p="",v=u;do p+=ge(v),v=v.return;while(v);var k=p}catch(_){k=`
Error generating stack: `+_.message+`
`+_.stack}return{value:c,source:u,stack:k,digest:null}}function Eg(c,u,p){return{value:c,source:null,stack:p??null,digest:u??null}}function Ch(c,u){try{console.error(u.value)}catch(p){setTimeout(function(){throw p})}}var Ri=typeof WeakMap=="function"?WeakMap:Map;function gu(c,u,p){p=so(-1,p),p.tag=3,p.payload={element:null};var v=u.value;return p.callback=function(){bu||(bu=!0,Ot=v),Ch(c,u)},p}function da(c,u,p){p=so(-1,p),p.tag=3;var v=c.type.getDerivedStateFromError;if(typeof v=="function"){var k=u.value;p.payload=function(){return v(k)},p.callback=function(){Ch(c,u)}}var _=c.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(p.callback=function(){Ch(c,u),typeof v!="function"&&(Tc===null?Tc=new Set([this]):Tc.add(this));var F=u.stack;this.componentDidCatch(u.value,{componentStack:F!==null?F:""})}),p}function Cc(c,u,p){var v=c.pingCache;if(v===null){v=c.pingCache=new Ri;var k=new Set;v.set(u,k)}else k=v.get(u),k===void 0&&(k=new Set,v.set(u,k));k.has(p)||(k.add(p),c=K1.bind(null,c,u,p),u.then(c,c))}function Bs(c){do{var u;if((u=c.tag===13)&&(u=c.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return c;c=c.return}while(c!==null);return null}function Eh(c,u,p,v,k){return(c.mode&1)===0?(c===u?c.flags|=65536:(c.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(u=so(-1,1),u.tag=2,Io(p,u,1))),p.lanes|=1),c):(c.flags|=65536,c.lanes=k,c)}var Tg=I.ReactCurrentOwner,va=!1;function na(c,u,p,v){u.child=c===null?fd(u,null,p,v):vh(u,c.child,p,v)}function Pg(c,u,p,v,k){p=p.render;var _=u.ref;return vc(u,k),v=Rf(c,u,p,v,_,k),p=hu(),c!==null&&!va?(u.updateQueue=c.updateQueue,u.flags&=-2053,c.lanes&=~k,$t(c,u,k)):(rt&&p&&ir(u),u.flags|=1,na(c,u,v,k),u.child)}function xu(c,u,p,v,k){if(c===null){var _=p.type;return typeof _=="function"&&!Iv(_)&&_.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(u.tag=15,u.type=_,Th(c,u,_,v,k)):(c=ju(p.type,null,v,u,u.mode,k),c.ref=u.ref,c.return=u,u.child=c)}if(_=c.child,(c.lanes&k)===0){var F=_.memoizedProps;if(p=p.compare,p=p!==null?p:uc,p(F,v)&&c.ref===u.ref)return $t(c,u,k)}return u.flags|=1,c=Rh(_,v),c.ref=u.ref,c.return=u,u.child=c}function Th(c,u,p,v,k){if(c!==null){var _=c.memoizedProps;if(uc(_,v)&&c.ref===u.ref)if(va=!1,u.pendingProps=v=_,(c.lanes&k)!==0)(c.flags&131072)!==0&&(va=!0);else return u.lanes=c.lanes,$t(c,u,k)}return S(c,u,p,v,k)}function ua(c,u,p){var v=u.pendingProps,k=v.children,_=c!==null?c.memoizedState:null;if(v.mode==="hidden")if((u.mode&1)===0)u.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fn(_h,Do),Do|=p;else{if((p&1073741824)===0)return c=_!==null?_.baseLanes|p:p,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:c,cachePool:null,transitions:null},u.updateQueue=null,Fn(_h,Do),Do|=c,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},v=_!==null?_.baseLanes:p,Fn(_h,Do),Do|=v}else _!==null?(v=_.baseLanes|p,u.memoizedState=null):v=p,Fn(_h,Do),Do|=v;return na(c,u,k,p),u.child}function yu(c,u){var p=u.ref;(c===null&&p!==null||c!==null&&c.ref!==p)&&(u.flags|=512,u.flags|=2097152)}function S(c,u,p,v,k){var _=Qr(p)?Ol:As.current;return _=xc(u,_),vc(u,k),p=Rf(c,u,p,v,_,k),v=hu(),c!==null&&!va?(u.updateQueue=c.updateQueue,u.flags&=-2053,c.lanes&=~k,$t(c,u,k)):(rt&&v&&ir(u),u.flags|=1,na(c,u,p,k),u.child)}function L(c,u,p,v,k){if(Qr(p)){var _=!0;su(u)}else _=!1;if(vc(u,k),u.stateNode===null)Tt(c,u),ip(u,p,v),pu(u,p,v,k),v=!0;else if(c===null){var F=u.stateNode,se=u.memoizedProps;F.props=se;var J=F.context,xe=p.contextType;typeof xe=="object"&&xe!==null?xe=no(xe):(xe=Qr(p)?Ol:As.current,xe=xc(u,xe));var ye=p.getDerivedStateFromProps,Pe=typeof ye=="function"||typeof F.getSnapshotBeforeUpdate=="function";Pe||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(se!==v||J!==xe)&&sx(u,F,v,xe),md=!1;var De=u.memoizedState;F.state=De,_f(u,v,F,k),J=u.memoizedState,se!==v||De!==J||ya.current||md?(typeof ye=="function"&&(Cg(u,p,ye,v),J=u.memoizedState),(se=md||nx(u,p,se,v,De,J,xe))?(Pe||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount()),typeof F.componentDidMount=="function"&&(u.flags|=4194308)):(typeof F.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=v,u.memoizedState=J),F.props=v,F.state=J,F.context=xe,v=se):(typeof F.componentDidMount=="function"&&(u.flags|=4194308),v=!1)}else{F=u.stateNode,bh(c,u),se=u.memoizedProps,xe=u.type===u.elementType?se:mi(u.type,se),F.props=xe,Pe=u.pendingProps,De=F.context,J=p.contextType,typeof J=="object"&&J!==null?J=no(J):(J=Qr(p)?Ol:As.current,J=xc(u,J));var Ve=p.getDerivedStateFromProps;(ye=typeof Ve=="function"||typeof F.getSnapshotBeforeUpdate=="function")||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(se!==Pe||De!==J)&&sx(u,F,v,J),md=!1,De=u.memoizedState,F.state=De,_f(u,v,F,k);var Be=u.memoizedState;se!==Pe||De!==Be||ya.current||md?(typeof Ve=="function"&&(Cg(u,p,Ve,v),Be=u.memoizedState),(xe=md||nx(u,p,xe,v,De,Be,J)||!1)?(ye||typeof F.UNSAFE_componentWillUpdate!="function"&&typeof F.componentWillUpdate!="function"||(typeof F.componentWillUpdate=="function"&&F.componentWillUpdate(v,Be,J),typeof F.UNSAFE_componentWillUpdate=="function"&&F.UNSAFE_componentWillUpdate(v,Be,J)),typeof F.componentDidUpdate=="function"&&(u.flags|=4),typeof F.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof F.componentDidUpdate!="function"||se===c.memoizedProps&&De===c.memoizedState||(u.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||se===c.memoizedProps&&De===c.memoizedState||(u.flags|=1024),u.memoizedProps=v,u.memoizedState=Be),F.props=v,F.state=Be,F.context=J,v=xe):(typeof F.componentDidUpdate!="function"||se===c.memoizedProps&&De===c.memoizedState||(u.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||se===c.memoizedProps&&De===c.memoizedState||(u.flags|=1024),v=!1)}return D(c,u,p,v,_,k)}function D(c,u,p,v,k,_){yu(c,u);var F=(u.flags&128)!==0;if(!v&&!F)return k&&Cf(u,p,!1),$t(c,u,_);v=u.stateNode,Tg.current=u;var se=F&&typeof p.getDerivedStateFromError!="function"?null:v.render();return u.flags|=1,c!==null&&F?(u.child=vh(u,c.child,null,_),u.child=vh(u,null,se,_)):na(c,u,se,_),u.memoizedState=v.state,k&&Cf(u,p,!0),u.child}function q(c){var u=c.stateNode;u.pendingContext?Hm(c,u.pendingContext,u.pendingContext!==u.context):u.context&&Hm(c,u.context,!1),Mf(c,u.containerInfo)}function fe(c,u,p,v,k){return Bl(),gh(k),u.flags|=256,na(c,u,p,v),u.child}var Se={dehydrated:null,treeContext:null,retryLane:0};function ve(c){return{baseLanes:c,cachePool:null,transitions:null}}function Ge(c,u,p){var v=u.pendingProps,k=Wn.current,_=!1,F=(u.flags&128)!==0,se;if((se=F)||(se=c!==null&&c.memoizedState===null?!1:(k&2)!==0),se?(_=!0,u.flags&=-129):(c===null||c.memoizedState!==null)&&(k|=1),Fn(Wn,k&1),c===null)return ph(u),c=u.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?((u.mode&1)===0?u.lanes=1:c.data==="$!"?u.lanes=8:u.lanes=1073741824,null):(F=v.children,c=v.fallback,_?(v=u.mode,_=u.child,F={mode:"hidden",children:F},(v&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=F):_=Hf(F,v,0,null),c=Dh(c,v,p,null),_.return=u,c.return=u,_.sibling=c,u.child=_,u.child.memoizedState=ve(p),u.memoizedState=Se,c):Qe(u,F));if(k=c.memoizedState,k!==null&&(se=k.dehydrated,se!==null))return Et(c,u,F,v,se,k,p);if(_){_=v.fallback,F=u.mode,k=c.child,se=k.sibling;var J={mode:"hidden",children:v.children};return(F&1)===0&&u.child!==k?(v=u.child,v.childLanes=0,v.pendingProps=J,u.deletions=null):(v=Rh(k,J),v.subtreeFlags=k.subtreeFlags&14680064),se!==null?_=Rh(se,_):(_=Dh(_,F,p,null),_.flags|=2),_.return=u,v.return=u,v.sibling=_,u.child=v,v=_,_=u.child,F=c.child.memoizedState,F=F===null?ve(p):{baseLanes:F.baseLanes|p,cachePool:null,transitions:F.transitions},_.memoizedState=F,_.childLanes=c.childLanes&~p,u.memoizedState=Se,v}return _=c.child,c=_.sibling,v=Rh(_,{mode:"visible",children:v.children}),(u.mode&1)===0&&(v.lanes=p),v.return=u,v.sibling=null,c!==null&&(p=u.deletions,p===null?(u.deletions=[c],u.flags|=16):p.push(c)),u.child=v,u.memoizedState=null,v}function Qe(c,u){return u=Hf({mode:"visible",children:u},c.mode,0,null),u.return=c,c.child=u}function ht(c,u,p,v){return v!==null&&gh(v),vh(u,c.child,null,p),c=Qe(u,u.pendingProps.children),c.flags|=2,u.memoizedState=null,c}function Et(c,u,p,v,k,_,F){if(p)return u.flags&256?(u.flags&=-257,v=Eg(Error(r(422))),ht(c,u,F,v)):u.memoizedState!==null?(u.child=c.child,u.flags|=128,null):(_=v.fallback,k=u.mode,v=Hf({mode:"visible",children:v.children},k,0,null),_=Dh(_,k,F,null),_.flags|=2,v.return=u,_.return=u,v.sibling=_,u.child=v,(u.mode&1)!==0&&vh(u,c.child,null,F),u.child.memoizedState=ve(F),u.memoizedState=Se,_);if((u.mode&1)===0)return ht(c,u,F,null);if(k.data==="$!"){if(v=k.nextSibling&&k.nextSibling.dataset,v)var se=v.dgst;return v=se,_=Error(r(419)),v=Eg(_,v,void 0),ht(c,u,F,v)}if(se=(F&c.childLanes)!==0,va||se){if(v=pi,v!==null){switch(F&-F){case 4:k=2;break;case 16:k=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:k=32;break;case 536870912:k=268435456;break;default:k=0}k=(k&(v.suspendedLanes|F))!==0?0:k,k!==0&&k!==_.retryLane&&(_.retryLane=k,bc(c,k),kd(v,c,k,-1))}return fp(),v=Eg(Error(r(421))),ht(c,u,F,v)}return k.data==="$?"?(u.flags|=128,u.child=c.child,u=RI.bind(null,c),k._reactRetry=u,null):(c=_.treeContext,la=xa(k.nextSibling),eo=u,rt=!0,to=null,c!==null&&(_i[Ao++]=Ll,_i[Ao++]=Zi,_i[Ao++]=iu,Ll=c.id,Zi=c.overflow,iu=u),u=Qe(u,v.children),u.flags|=4096,u)}function Pt(c,u,p){c.lanes|=u;var v=c.alternate;v!==null&&(v.lanes|=u),Wm(c.return,u,p)}function rr(c,u,p,v,k){var _=c.memoizedState;_===null?c.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:v,tail:p,tailMode:k}:(_.isBackwards=u,_.rendering=null,_.renderingStartTime=0,_.last=v,_.tail=p,_.tailMode=k)}function hr(c,u,p){var v=u.pendingProps,k=v.revealOrder,_=v.tail;if(na(c,u,v.children,p),v=Wn.current,(v&2)!==0)v=v&1|2,u.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=u.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&Pt(c,p,u);else if(c.tag===19)Pt(c,p,u);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===u)break e;for(;c.sibling===null;){if(c.return===null||c.return===u)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}v&=1}if(Fn(Wn,v),(u.mode&1)===0)u.memoizedState=null;else switch(k){case"forwards":for(p=u.child,k=null;p!==null;)c=p.alternate,c!==null&&gd(c)===null&&(k=p),p=p.sibling;p=k,p===null?(k=u.child,u.child=null):(k=p.sibling,p.sibling=null),rr(u,!1,k,p,_);break;case"backwards":for(p=null,k=u.child,u.child=null;k!==null;){if(c=k.alternate,c!==null&&gd(c)===null){u.child=k;break}c=k.sibling,k.sibling=p,p=k,k=c}rr(u,!0,p,null,_);break;case"together":rr(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Tt(c,u){(u.mode&1)===0&&c!==null&&(c.alternate=null,u.alternate=null,u.flags|=2)}function $t(c,u,p){if(c!==null&&(u.dependencies=c.dependencies),$o|=u.lanes,(p&u.childLanes)===0)return null;if(c!==null&&u.child!==c.child)throw Error(r(153));if(u.child!==null){for(c=u.child,p=Rh(c,c.pendingProps),u.child=p,p.return=u;c.sibling!==null;)c=c.sibling,p=p.sibling=Rh(c,c.pendingProps),p.return=u;p.sibling=null}return u.child}function vs(c,u,p){switch(u.tag){case 3:q(u),Bl();break;case 5:Km(u);break;case 1:Qr(u.type)&&su(u);break;case 4:Mf(u,u.stateNode.containerInfo);break;case 10:var v=u.type._context,k=u.memoizedProps.value;Fn(_o,v._currentValue),v._currentValue=k;break;case 13:if(v=u.memoizedState,v!==null)return v.dehydrated!==null?(Fn(Wn,Wn.current&1),u.flags|=128,null):(p&u.child.childLanes)!==0?Ge(c,u,p):(Fn(Wn,Wn.current&1),c=$t(c,u,p),c!==null?c.sibling:null);Fn(Wn,Wn.current&1);break;case 19:if(v=(p&u.childLanes)!==0,(c.flags&128)!==0){if(v)return hr(c,u,p);u.flags|=128}if(k=u.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),Fn(Wn,Wn.current),v)break;return null;case 22:case 23:return u.lanes=0,ua(c,u,p)}return $t(c,u,p)}var er,On,Hr,dr;er=function(c,u){for(var p=u.child;p!==null;){if(p.tag===5||p.tag===6)c.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===u)break;for(;p.sibling===null;){if(p.return===null||p.return===u)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},On=function(){},Hr=function(c,u,p,v){var k=c.memoizedProps;if(k!==v){c=u.stateNode,wc(Mo.current);var _=null;switch(p){case"input":k=Ae(c,k),v=Ae(c,v),_=[];break;case"select":k=oe({},k,{value:void 0}),v=oe({},v,{value:void 0}),_=[];break;case"textarea":k=Ye(c,k),v=Ye(c,v),_=[];break;default:typeof k.onClick!="function"&&typeof v.onClick=="function"&&(c.onclick=dd)}Mt(p,v);var F;p=null;for(xe in k)if(!v.hasOwnProperty(xe)&&k.hasOwnProperty(xe)&&k[xe]!=null)if(xe==="style"){var se=k[xe];for(F in se)se.hasOwnProperty(F)&&(p||(p={}),p[F]="")}else xe!=="dangerouslySetInnerHTML"&&xe!=="children"&&xe!=="suppressContentEditableWarning"&&xe!=="suppressHydrationWarning"&&xe!=="autoFocus"&&(a.hasOwnProperty(xe)?_||(_=[]):(_=_||[]).push(xe,null));for(xe in v){var J=v[xe];if(se=k!=null?k[xe]:void 0,v.hasOwnProperty(xe)&&J!==se&&(J!=null||se!=null))if(xe==="style")if(se){for(F in se)!se.hasOwnProperty(F)||J&&J.hasOwnProperty(F)||(p||(p={}),p[F]="");for(F in J)J.hasOwnProperty(F)&&se[F]!==J[F]&&(p||(p={}),p[F]=J[F])}else p||(_||(_=[]),_.push(xe,p)),p=J;else xe==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,se=se?se.__html:void 0,J!=null&&se!==J&&(_=_||[]).push(xe,J)):xe==="children"?typeof J!="string"&&typeof J!="number"||(_=_||[]).push(xe,""+J):xe!=="suppressContentEditableWarning"&&xe!=="suppressHydrationWarning"&&(a.hasOwnProperty(xe)?(J!=null&&xe==="onScroll"&&an("scroll",c),_||se===J||(_=[])):(_=_||[]).push(xe,J))}p&&(_=_||[]).push("style",p);var xe=_;(u.updateQueue=xe)&&(u.flags|=4)}},dr=function(c,u,p,v){p!==v&&(u.flags|=4)};function Dr(c,u){if(!rt)switch(c.tailMode){case"hidden":u=c.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?c.tail=null:p.sibling=null;break;case"collapsed":p=c.tail;for(var v=null;p!==null;)p.alternate!==null&&(v=p),p=p.sibling;v===null?u||c.tail===null?c.tail=null:c.tail.sibling=null:v.sibling=null}}function Wt(c){var u=c.alternate!==null&&c.alternate.child===c.child,p=0,v=0;if(u)for(var k=c.child;k!==null;)p|=k.lanes|k.childLanes,v|=k.subtreeFlags&14680064,v|=k.flags&14680064,k.return=c,k=k.sibling;else for(k=c.child;k!==null;)p|=k.lanes|k.childLanes,v|=k.subtreeFlags,v|=k.flags,k.return=c,k=k.sibling;return c.subtreeFlags|=v,c.childLanes=p,u}function Bn(c,u,p){var v=u.pendingProps;switch(yg(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(u),null;case 1:return Qr(u.type)&&tl(),Wt(u),null;case 3:return v=u.stateNode,ra(),In(ya),In(As),Of(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(c===null||c.child===null)&&(lu(u)?u.flags|=4:c===null||c.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,to!==null&&(Ua(to),to=null))),On(c,u),Wt(u),null;case 5:ns(u);var k=wc(If.current);if(p=u.type,c!==null&&u.stateNode!=null)Hr(c,u,p,v,k),c.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!v){if(u.stateNode===null)throw Error(r(166));return Wt(u),null}if(c=wc(Mo.current),lu(u)){v=u.stateNode,p=u.type;var _=u.memoizedProps;switch(v[Ur]=u,v[hh]=_,c=(u.mode&1)!==0,p){case"dialog":an("cancel",v),an("close",v);break;case"iframe":case"object":case"embed":an("load",v);break;case"video":case"audio":for(k=0;k<ld.length;k++)an(ld[k],v);break;case"source":an("error",v);break;case"img":case"image":case"link":an("error",v),an("load",v);break;case"details":an("toggle",v);break;case"input":We(v,_),an("invalid",v);break;case"select":v._wrapperState={wasMultiple:!!_.multiple},an("invalid",v);break;case"textarea":lt(v,_),an("invalid",v)}Mt(p,_),k=null;for(var F in _)if(_.hasOwnProperty(F)){var se=_[F];F==="children"?typeof se=="string"?v.textContent!==se&&(_.suppressHydrationWarning!==!0&&jr(v.textContent,se,c),k=["children",se]):typeof se=="number"&&v.textContent!==""+se&&(_.suppressHydrationWarning!==!0&&jr(v.textContent,se,c),k=["children",""+se]):a.hasOwnProperty(F)&&se!=null&&F==="onScroll"&&an("scroll",v)}switch(p){case"input":Le(v),tr(v,_,!0);break;case"textarea":Le(v),nt(v);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(v.onclick=dd)}v=k,u.updateQueue=v,v!==null&&(u.flags|=4)}else{F=k.nodeType===9?k:k.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=wt(p)),c==="http://www.w3.org/1999/xhtml"?p==="script"?(c=F.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof v.is=="string"?c=F.createElement(p,{is:v.is}):(c=F.createElement(p),p==="select"&&(F=c,v.multiple?F.multiple=!0:v.size&&(F.size=v.size))):c=F.createElementNS(c,p),c[Ur]=u,c[hh]=v,er(c,u,!1,!1),u.stateNode=c;e:{switch(F=Ke(p,v),p){case"dialog":an("cancel",c),an("close",c),k=v;break;case"iframe":case"object":case"embed":an("load",c),k=v;break;case"video":case"audio":for(k=0;k<ld.length;k++)an(ld[k],c);k=v;break;case"source":an("error",c),k=v;break;case"img":case"image":case"link":an("error",c),an("load",c),k=v;break;case"details":an("toggle",c),k=v;break;case"input":We(c,v),k=Ae(c,v),an("invalid",c);break;case"option":k=v;break;case"select":c._wrapperState={wasMultiple:!!v.multiple},k=oe({},v,{value:void 0}),an("invalid",c);break;case"textarea":lt(c,v),k=Ye(c,v),an("invalid",c);break;default:k=v}Mt(p,k),se=k;for(_ in se)if(se.hasOwnProperty(_)){var J=se[_];_==="style"?pr(c,J):_==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,J!=null&&Mr(c,J)):_==="children"?typeof J=="string"?(p!=="textarea"||J!=="")&&ta(c,J):typeof J=="number"&&ta(c,""+J):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(a.hasOwnProperty(_)?J!=null&&_==="onScroll"&&an("scroll",c):J!=null&&O(c,_,J,F))}switch(p){case"input":Le(c),tr(c,v,!1);break;case"textarea":Le(c),nt(c);break;case"option":v.value!=null&&c.setAttribute("value",""+ue(v.value));break;case"select":c.multiple=!!v.multiple,_=v.value,_!=null?Fe(c,!!v.multiple,_,!1):v.defaultValue!=null&&Fe(c,!!v.multiple,v.defaultValue,!0);break;default:typeof k.onClick=="function"&&(c.onclick=dd)}switch(p){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}}v&&(u.flags|=4)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return Wt(u),null;case 6:if(c&&u.stateNode!=null)dr(c,u,c.memoizedProps,v);else{if(typeof v!="string"&&u.stateNode===null)throw Error(r(166));if(p=wc(If.current),wc(Mo.current),lu(u)){if(v=u.stateNode,p=u.memoizedProps,v[Ur]=u,(_=v.nodeValue!==p)&&(c=eo,c!==null))switch(c.tag){case 3:jr(v.nodeValue,p,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&jr(v.nodeValue,p,(c.mode&1)!==0)}_&&(u.flags|=4)}else v=(p.nodeType===9?p:p.ownerDocument).createTextNode(v),v[Ur]=u,u.stateNode=v}return Wt(u),null;case 13:if(In(Wn),v=u.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(rt&&la!==null&&(u.mode&1)!==0&&(u.flags&128)===0)yc(),Bl(),u.flags|=98560,_=!1;else if(_=lu(u),v!==null&&v.dehydrated!==null){if(c===null){if(!_)throw Error(r(318));if(_=u.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(r(317));_[Ur]=u}else Bl(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Wt(u),_=!1}else to!==null&&(Ua(to),to=null),_=!0;if(!_)return u.flags&65536?u:null}return(u.flags&128)!==0?(u.lanes=p,u):(v=v!==null,v!==(c!==null&&c.memoizedState!==null)&&v&&(u.child.flags|=8192,(u.mode&1)!==0&&(c===null||(Wn.current&1)!==0?Pa===0&&(Pa=3):fp())),u.updateQueue!==null&&(u.flags|=4),Wt(u),null);case 4:return ra(),On(c,u),c===null&&tn(u.stateNode.containerInfo),Wt(u),null;case 10:return Af(u.type._context),Wt(u),null;case 17:return Qr(u.type)&&tl(),Wt(u),null;case 19:if(In(Wn),_=u.memoizedState,_===null)return Wt(u),null;if(v=(u.flags&128)!==0,F=_.rendering,F===null)if(v)Dr(_,!1);else{if(Pa!==0||c!==null&&(c.flags&128)!==0)for(c=u.child;c!==null;){if(F=gd(c),F!==null){for(u.flags|=128,Dr(_,!1),v=F.updateQueue,v!==null&&(u.updateQueue=v,u.flags|=4),u.subtreeFlags=0,v=p,p=u.child;p!==null;)_=p,c=v,_.flags&=14680066,F=_.alternate,F===null?(_.childLanes=0,_.lanes=c,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=F.childLanes,_.lanes=F.lanes,_.child=F.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=F.memoizedProps,_.memoizedState=F.memoizedState,_.updateQueue=F.updateQueue,_.type=F.type,c=F.dependencies,_.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),p=p.sibling;return Fn(Wn,Wn.current&1|2),u.child}c=c.sibling}_.tail!==null&&Nt()>Sd&&(u.flags|=128,v=!0,Dr(_,!1),u.lanes=4194304)}else{if(!v)if(c=gd(F),c!==null){if(u.flags|=128,v=!0,p=c.updateQueue,p!==null&&(u.updateQueue=p,u.flags|=4),Dr(_,!0),_.tail===null&&_.tailMode==="hidden"&&!F.alternate&&!rt)return Wt(u),null}else 2*Nt()-_.renderingStartTime>Sd&&p!==1073741824&&(u.flags|=128,v=!0,Dr(_,!1),u.lanes=4194304);_.isBackwards?(F.sibling=u.child,u.child=F):(p=_.last,p!==null?p.sibling=F:u.child=F,_.last=F)}return _.tail!==null?(u=_.tail,_.rendering=u,_.tail=u.sibling,_.renderingStartTime=Nt(),u.sibling=null,p=Wn.current,Fn(Wn,v?p&1|2:p&1),u):(Wt(u),null);case 22:case 23:return Mh(),v=u.memoizedState!==null,c!==null&&c.memoizedState!==null!==v&&(u.flags|=8192),v&&(u.mode&1)!==0?(Do&1073741824)!==0&&(Wt(u),u.subtreeFlags&6&&(u.flags|=8192)):Wt(u),null;case 24:return null;case 25:return null}throw Error(r(156,u.tag))}function _s(c,u){switch(yg(u),u.tag){case 1:return Qr(u.type)&&tl(),c=u.flags,c&65536?(u.flags=c&-65537|128,u):null;case 3:return ra(),In(ya),In(As),Of(),c=u.flags,(c&65536)!==0&&(c&128)===0?(u.flags=c&-65537|128,u):null;case 5:return ns(u),null;case 13:if(In(Wn),c=u.memoizedState,c!==null&&c.dehydrated!==null){if(u.alternate===null)throw Error(r(340));Bl()}return c=u.flags,c&65536?(u.flags=c&-65537|128,u):null;case 19:return In(Wn),null;case 4:return ra(),null;case 10:return Af(u.type._context),null;case 22:case 23:return Mh(),null;case 24:return null;default:return null}}var bs=!1,Jr=!1,oo=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function sl(c,u){var p=c.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(v){sa(c,u,v)}else p.current=null}function wd(c,u,p){try{p()}catch(v){sa(c,u,v)}}var Nd=!1;function al(c,u){if(rs=sn,c=Ea(),Jd(c)){if("selectionStart"in c)var p={start:c.selectionStart,end:c.selectionEnd};else e:{p=(p=c.ownerDocument)&&p.defaultView||window;var v=p.getSelection&&p.getSelection();if(v&&v.rangeCount!==0){p=v.anchorNode;var k=v.anchorOffset,_=v.focusNode;v=v.focusOffset;try{p.nodeType,_.nodeType}catch{p=null;break e}var F=0,se=-1,J=-1,xe=0,ye=0,Pe=c,De=null;t:for(;;){for(var Ve;Pe!==p||k!==0&&Pe.nodeType!==3||(se=F+k),Pe!==_||v!==0&&Pe.nodeType!==3||(J=F+v),Pe.nodeType===3&&(F+=Pe.nodeValue.length),(Ve=Pe.firstChild)!==null;)De=Pe,Pe=Ve;for(;;){if(Pe===c)break t;if(De===p&&++xe===k&&(se=F),De===_&&++ye===v&&(J=F),(Ve=Pe.nextSibling)!==null)break;Pe=De,De=Pe.parentNode}Pe=Ve}p=se===-1||J===-1?null:{start:se,end:J}}else p=null}p=p||{start:0,end:0}}else p=null;for(Qi={focusedElem:c,selectionRange:p},sn=!1,Lt=u;Lt!==null;)if(u=Lt,c=u.child,(u.subtreeFlags&1028)!==0&&c!==null)c.return=u,Lt=c;else for(;Lt!==null;){u=Lt;try{var Be=u.alternate;if((u.flags&1024)!==0)switch(u.tag){case 0:case 11:case 15:break;case 1:if(Be!==null){var et=Be.memoizedProps,Xe=Be.memoizedState,Me=u.stateNode,_e=Me.getSnapshotBeforeUpdate(u.elementType===u.type?et:mi(u.type,et),Xe);Me.__reactInternalSnapshotBeforeUpdate=_e}break;case 3:var ze=u.stateNode.containerInfo;ze.nodeType===1?ze.textContent="":ze.nodeType===9&&ze.documentElement&&ze.removeChild(ze.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Ze){sa(u,u.return,Ze)}if(c=u.sibling,c!==null){c.return=u.return,Lt=c;break}Lt=u.return}return Be=Nd,Nd=!1,Be}function zl(c,u,p){var v=u.updateQueue;if(v=v!==null?v.lastEffect:null,v!==null){var k=v=v.next;do{if((k.tag&c)===c){var _=k.destroy;k.destroy=void 0,_!==void 0&&wd(u,p,_)}k=k.next}while(k!==v)}}function op(c,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var p=u=u.next;do{if((p.tag&c)===c){var v=p.create;p.destroy=v()}p=p.next}while(p!==u)}}function Ph(c){var u=c.ref;if(u!==null){var p=c.stateNode;switch(c.tag){case 5:c=p;break;default:c=p}typeof u=="function"?u(c):u.current=c}}function il(c){var u=c.alternate;u!==null&&(c.alternate=null,il(u)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(u=c.stateNode,u!==null&&(delete u[Ur],delete u[hh],delete u[fh],delete u[tx],delete u[xg])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function Vl(c){return c.tag===5||c.tag===3||c.tag===4}function zf(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||Vl(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function ql(c,u,p){var v=c.tag;if(v===5||v===6)c=c.stateNode,u?p.nodeType===8?p.parentNode.insertBefore(c,u):p.insertBefore(c,u):(p.nodeType===8?(u=p.parentNode,u.insertBefore(c,p)):(u=p,u.appendChild(c)),p=p._reactRootContainer,p!=null||u.onclick!==null||(u.onclick=dd));else if(v!==4&&(c=c.child,c!==null))for(ql(c,u,p),c=c.sibling;c!==null;)ql(c,u,p),c=c.sibling}function lp(c,u,p){var v=c.tag;if(v===5||v===6)c=c.stateNode,u?p.insertBefore(c,u):p.appendChild(c);else if(v!==4&&(c=c.child,c!==null))for(lp(c,u,p),c=c.sibling;c!==null;)lp(c,u,p),c=c.sibling}var Yn=null,Za=!1;function ei(c,u,p){for(p=p.child;p!==null;)Ah(c,u,p),p=p.sibling}function Ah(c,u,p){if(Yr&&typeof Yr.onCommitFiberUnmount=="function")try{Yr.onCommitFiberUnmount(mn,p)}catch{}switch(p.tag){case 5:Jr||sl(p,u);case 6:var v=Yn,k=Za;Yn=null,ei(c,u,p),Yn=v,Za=k,Yn!==null&&(Za?(c=Yn,p=p.stateNode,c.nodeType===8?c.parentNode.removeChild(p):c.removeChild(p)):Yn.removeChild(p.stateNode));break;case 18:Yn!==null&&(Za?(c=Yn,p=p.stateNode,c.nodeType===8?nu(c.parentNode,p):c.nodeType===1&&nu(c,p),Zc(c)):nu(Yn,p.stateNode));break;case 4:v=Yn,k=Za,Yn=p.stateNode.containerInfo,Za=!0,ei(c,u,p),Yn=v,Za=k;break;case 0:case 11:case 14:case 15:if(!Jr&&(v=p.updateQueue,v!==null&&(v=v.lastEffect,v!==null))){k=v=v.next;do{var _=k,F=_.destroy;_=_.tag,F!==void 0&&((_&2)!==0||(_&4)!==0)&&wd(p,u,F),k=k.next}while(k!==v)}ei(c,u,p);break;case 1:if(!Jr&&(sl(p,u),v=p.stateNode,typeof v.componentWillUnmount=="function"))try{v.props=p.memoizedProps,v.state=p.memoizedState,v.componentWillUnmount()}catch(se){sa(p,u,se)}ei(c,u,p);break;case 21:ei(c,u,p);break;case 22:p.mode&1?(Jr=(v=Jr)||p.memoizedState!==null,ei(c,u,p),Jr=v):ei(c,u,p);break;default:ei(c,u,p)}}function cp(c){var u=c.updateQueue;if(u!==null){c.updateQueue=null;var p=c.stateNode;p===null&&(p=c.stateNode=new oo),u.forEach(function(v){var k=G1.bind(null,c,v);p.has(v)||(p.add(v),v.then(k,k))})}}function ol(c,u){var p=u.deletions;if(p!==null)for(var v=0;v<p.length;v++){var k=p[v];try{var _=c,F=u,se=F;e:for(;se!==null;){switch(se.tag){case 5:Yn=se.stateNode,Za=!1;break e;case 3:Yn=se.stateNode.containerInfo,Za=!0;break e;case 4:Yn=se.stateNode.containerInfo,Za=!0;break e}se=se.return}if(Yn===null)throw Error(r(160));Ah(_,F,k),Yn=null,Za=!1;var J=k.alternate;J!==null&&(J.return=null),k.return=null}catch(xe){sa(k,u,xe)}}if(u.subtreeFlags&12854)for(u=u.child;u!==null;)U1(u,c),u=u.sibling}function U1(c,u){var p=c.alternate,v=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(ol(u,c),jd(c),v&4){try{zl(3,c,c.return),op(3,c)}catch(et){sa(c,c.return,et)}try{zl(5,c,c.return)}catch(et){sa(c,c.return,et)}}break;case 1:ol(u,c),jd(c),v&512&&p!==null&&sl(p,p.return);break;case 5:if(ol(u,c),jd(c),v&512&&p!==null&&sl(p,p.return),c.flags&32){var k=c.stateNode;try{ta(k,"")}catch(et){sa(c,c.return,et)}}if(v&4&&(k=c.stateNode,k!=null)){var _=c.memoizedProps,F=p!==null?p.memoizedProps:_,se=c.type,J=c.updateQueue;if(c.updateQueue=null,J!==null)try{se==="input"&&_.type==="radio"&&_.name!=null&&ot(k,_),Ke(se,F);var xe=Ke(se,_);for(F=0;F<J.length;F+=2){var ye=J[F],Pe=J[F+1];ye==="style"?pr(k,Pe):ye==="dangerouslySetInnerHTML"?Mr(k,Pe):ye==="children"?ta(k,Pe):O(k,ye,Pe,xe)}switch(se){case"input":It(k,_);break;case"textarea":pt(k,_);break;case"select":var De=k._wrapperState.wasMultiple;k._wrapperState.wasMultiple=!!_.multiple;var Ve=_.value;Ve!=null?Fe(k,!!_.multiple,Ve,!1):De!==!!_.multiple&&(_.defaultValue!=null?Fe(k,!!_.multiple,_.defaultValue,!0):Fe(k,!!_.multiple,_.multiple?[]:"",!1))}k[hh]=_}catch(et){sa(c,c.return,et)}}break;case 6:if(ol(u,c),jd(c),v&4){if(c.stateNode===null)throw Error(r(162));k=c.stateNode,_=c.memoizedProps;try{k.nodeValue=_}catch(et){sa(c,c.return,et)}}break;case 3:if(ol(u,c),jd(c),v&4&&p!==null&&p.memoizedState.isDehydrated)try{Zc(u.containerInfo)}catch(et){sa(c,c.return,et)}break;case 4:ol(u,c),jd(c);break;case 13:ol(u,c),jd(c),k=c.child,k.flags&8192&&(_=k.memoizedState!==null,k.stateNode.isHidden=_,!_||k.alternate!==null&&k.alternate.memoizedState!==null||(lo=Nt())),v&4&&cp(c);break;case 22:if(ye=p!==null&&p.memoizedState!==null,c.mode&1?(Jr=(xe=Jr)||ye,ol(u,c),Jr=xe):ol(u,c),jd(c),v&8192){if(xe=c.memoizedState!==null,(c.stateNode.isHidden=xe)&&!ye&&(c.mode&1)!==0)for(Lt=c,ye=c.child;ye!==null;){for(Pe=Lt=ye;Lt!==null;){switch(De=Lt,Ve=De.child,De.tag){case 0:case 11:case 14:case 15:zl(4,De,De.return);break;case 1:sl(De,De.return);var Be=De.stateNode;if(typeof Be.componentWillUnmount=="function"){v=De,p=De.return;try{u=v,Be.props=u.memoizedProps,Be.state=u.memoizedState,Be.componentWillUnmount()}catch(et){sa(v,p,et)}}break;case 5:sl(De,De.return);break;case 22:if(De.memoizedState!==null){ix(Pe);continue}}Ve!==null?(Ve.return=De,Lt=Ve):ix(Pe)}ye=ye.sibling}e:for(ye=null,Pe=c;;){if(Pe.tag===5){if(ye===null){ye=Pe;try{k=Pe.stateNode,xe?(_=k.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(se=Pe.stateNode,J=Pe.memoizedProps.style,F=J!=null&&J.hasOwnProperty("display")?J.display:null,se.style.display=Ft("display",F))}catch(et){sa(c,c.return,et)}}}else if(Pe.tag===6){if(ye===null)try{Pe.stateNode.nodeValue=xe?"":Pe.memoizedProps}catch(et){sa(c,c.return,et)}}else if((Pe.tag!==22&&Pe.tag!==23||Pe.memoizedState===null||Pe===c)&&Pe.child!==null){Pe.child.return=Pe,Pe=Pe.child;continue}if(Pe===c)break e;for(;Pe.sibling===null;){if(Pe.return===null||Pe.return===c)break e;ye===Pe&&(ye=null),Pe=Pe.return}ye===Pe&&(ye=null),Pe.sibling.return=Pe.return,Pe=Pe.sibling}}break;case 19:ol(u,c),jd(c),v&4&&cp(c);break;case 21:break;default:ol(u,c),jd(c)}}function jd(c){var u=c.flags;if(u&2){try{e:{for(var p=c.return;p!==null;){if(Vl(p)){var v=p;break e}p=p.return}throw Error(r(160))}switch(v.tag){case 5:var k=v.stateNode;v.flags&32&&(ta(k,""),v.flags&=-33);var _=zf(c);lp(c,_,k);break;case 3:case 4:var F=v.stateNode.containerInfo,se=zf(c);ql(c,se,F);break;default:throw Error(r(161))}}catch(J){sa(c,c.return,J)}c.flags&=-3}u&4096&&(c.flags&=-4097)}function Sk(c,u,p){Lt=c,ax(c)}function ax(c,u,p){for(var v=(c.mode&1)!==0;Lt!==null;){var k=Lt,_=k.child;if(k.tag===22&&v){var F=k.memoizedState!==null||bs;if(!F){var se=k.alternate,J=se!==null&&se.memoizedState!==null||Jr;se=bs;var xe=Jr;if(bs=F,(Jr=J)&&!xe)for(Lt=k;Lt!==null;)F=Lt,J=F.child,F.tag===22&&F.memoizedState!==null?z1(k):J!==null?(J.return=F,Lt=J):z1(k);for(;_!==null;)Lt=_,ax(_),_=_.sibling;Lt=k,bs=se,Jr=xe}Ag(c)}else(k.subtreeFlags&8772)!==0&&_!==null?(_.return=k,Lt=_):Ag(c)}}function Ag(c){for(;Lt!==null;){var u=Lt;if((u.flags&8772)!==0){var p=u.alternate;try{if((u.flags&8772)!==0)switch(u.tag){case 0:case 11:case 15:Jr||op(5,u);break;case 1:var v=u.stateNode;if(u.flags&4&&!Jr)if(p===null)v.componentDidMount();else{var k=u.elementType===u.type?p.memoizedProps:mi(u.type,p.memoizedProps);v.componentDidUpdate(k,p.memoizedState,v.__reactInternalSnapshotBeforeUpdate)}var _=u.updateQueue;_!==null&&Ym(u,_,v);break;case 3:var F=u.updateQueue;if(F!==null){if(p=null,u.child!==null)switch(u.child.tag){case 5:p=u.child.stateNode;break;case 1:p=u.child.stateNode}Ym(u,F,p)}break;case 5:var se=u.stateNode;if(p===null&&u.flags&4){p=se;var J=u.memoizedProps;switch(u.type){case"button":case"input":case"select":case"textarea":J.autoFocus&&p.focus();break;case"img":J.src&&(p.src=J.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(u.memoizedState===null){var xe=u.alternate;if(xe!==null){var ye=xe.memoizedState;if(ye!==null){var Pe=ye.dehydrated;Pe!==null&&Zc(Pe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Jr||u.flags&512&&Ph(u)}catch(De){sa(u,u.return,De)}}if(u===c){Lt=null;break}if(p=u.sibling,p!==null){p.return=u.return,Lt=p;break}Lt=u.return}}function ix(c){for(;Lt!==null;){var u=Lt;if(u===c){Lt=null;break}var p=u.sibling;if(p!==null){p.return=u.return,Lt=p;break}Lt=u.return}}function z1(c){for(;Lt!==null;){var u=Lt;try{switch(u.tag){case 0:case 11:case 15:var p=u.return;try{op(4,u)}catch(J){sa(u,p,J)}break;case 1:var v=u.stateNode;if(typeof v.componentDidMount=="function"){var k=u.return;try{v.componentDidMount()}catch(J){sa(u,k,J)}}var _=u.return;try{Ph(u)}catch(J){sa(u,_,J)}break;case 5:var F=u.return;try{Ph(u)}catch(J){sa(u,F,J)}}}catch(J){sa(u,u.return,J)}if(u===c){Lt=null;break}var se=u.sibling;if(se!==null){se.return=u.return,Lt=se;break}Lt=u.return}}var V1=Math.ceil,dp=I.ReactCurrentDispatcher,Ev=I.ReactCurrentOwner,Ec=I.ReactCurrentBatchConfig,En=0,pi=null,ba=null,Di=0,Do=0,_h=Zo(0),Pa=0,_g=null,$o=0,ox=0,Tv=0,lx=null,ll=null,lo=0,Sd=1/0,vu=null,bu=!1,Ot=null,Tc=null,Kr=!1,wu=null,Ig=0,up=0,cx=null,$i=-1,dx=0;function Lo(){return(En&6)!==0?Nt():$i!==-1?$i:$i=Nt()}function Nu(c){return(c.mode&1)===0?1:(En&2)!==0&&Di!==0?Di&-Di:cu.transition!==null?(dx===0&&(dx=Ju()),dx):(c=Qt,c!==0||(c=window.event,c=c===void 0?16:Ko(c.type)),c)}function kd(c,u,p,v){if(50<up)throw up=0,cx=null,Error(r(185));Yo(c,p,v),((En&2)===0||c!==pi)&&(c===pi&&((En&2)===0&&(ox|=p),Pa===4&&Cd(c,Di)),co(c,v),p===1&&En===0&&(u.mode&1)===0&&(Sd=Nt()+500,Ai&&Qa()))}function co(c,u){var p=c.callbackNode;Im(c,u);var v=Kc(c,c===pi?Di:0);if(v===0)p!==null&&yt(p),c.callbackNode=null,c.callbackPriority=0;else if(u=v&-v,c.callbackPriority!==u){if(p!=null&&yt(p),u===1)c.tag===0?B1(Ed.bind(null,c)):Dl(Ed.bind(null,c)),Fa(function(){(En&6)===0&&Qa()}),p=null;else{switch(Gc(v)){case 1:p=Br;break;case 4:p=Xr;break;case 16:p=Er;break;case 536870912:p=kr;break;default:p=Er}p=Q1(p,ux.bind(null,c))}c.callbackPriority=u,c.callbackNode=p}}function ux(c,u){if($i=-1,dx=0,(En&6)!==0)throw Error(r(327));var p=c.callbackNode;if(qf()&&c.callbackNode!==p)return null;var v=Kc(c,c===pi?Di:0);if(v===0)return null;if((v&30)!==0||(v&c.expiredLanes)!==0||u)u=_v(c,v);else{u=v;var k=En;En|=2;var _=kk();(pi!==c||Di!==u)&&(vu=null,Sd=Nt()+500,hp(c,u));do try{H1();break}catch(se){Vf(c,se)}while(!0);Pf(),dp.current=_,En=k,ba!==null?u=0:(pi=null,Di=0,u=Pa)}if(u!==0){if(u===2&&(k=Ds(c),k!==0&&(v=k,u=Pv(c,k))),u===1)throw p=_g,hp(c,0),Cd(c,v),co(c,Nt()),p;if(u===6)Cd(c,v);else{if(k=c.current.alternate,(v&30)===0&&!Av(k)&&(u=_v(c,v),u===2&&(_=Ds(c),_!==0&&(v=_,u=Pv(c,_))),u===1))throw p=_g,hp(c,0),Cd(c,v),co(c,Nt()),p;switch(c.finishedWork=k,c.finishedLanes=v,u){case 0:case 1:throw Error(r(345));case 2:cl(c,ll,vu);break;case 3:if(Cd(c,v),(v&130023424)===v&&(u=lo+500-Nt(),10<u)){if(Kc(c,0)!==0)break;if(k=c.suspendedLanes,(k&v)!==v){Lo(),c.pingedLanes|=c.suspendedLanes&k;break}c.timeoutHandle=_l(cl.bind(null,c,ll,vu),u);break}cl(c,ll,vu);break;case 4:if(Cd(c,v),(v&4194240)===v)break;for(u=c.eventTimes,k=-1;0<v;){var F=31-Ca(v);_=1<<F,F=u[F],F>k&&(k=F),v&=~_}if(v=k,v=Nt()-v,v=(120>v?120:480>v?480:1080>v?1080:1920>v?1920:3e3>v?3e3:4320>v?4320:1960*V1(v/1960))-v,10<v){c.timeoutHandle=_l(cl.bind(null,c,ll,vu),v);break}cl(c,ll,vu);break;case 5:cl(c,ll,vu);break;default:throw Error(r(329))}}}return co(c,Nt()),c.callbackNode===p?ux.bind(null,c):null}function Pv(c,u){var p=lx;return c.current.memoizedState.isDehydrated&&(hp(c,u).flags|=256),c=_v(c,u),c!==2&&(u=ll,ll=p,u!==null&&Ua(u)),c}function Ua(c){ll===null?ll=c:ll.push.apply(ll,c)}function Av(c){for(var u=c;;){if(u.flags&16384){var p=u.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var v=0;v<p.length;v++){var k=p[v],_=k.getSnapshot;k=k.value;try{if(!ko(_(),k))return!1}catch{return!1}}}if(p=u.child,u.subtreeFlags&16384&&p!==null)p.return=u,u=p;else{if(u===c)break;for(;u.sibling===null;){if(u.return===null||u.return===c)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Cd(c,u){for(u&=~Tv,u&=~ox,c.suspendedLanes|=u,c.pingedLanes&=~u,c=c.expirationTimes;0<u;){var p=31-Ca(u),v=1<<p;c[p]=-1,u&=~v}}function Ed(c){if((En&6)!==0)throw Error(r(327));qf();var u=Kc(c,0);if((u&1)===0)return co(c,Nt()),null;var p=_v(c,u);if(c.tag!==0&&p===2){var v=Ds(c);v!==0&&(u=v,p=Pv(c,v))}if(p===1)throw p=_g,hp(c,0),Cd(c,u),co(c,Nt()),p;if(p===6)throw Error(r(345));return c.finishedWork=c.current.alternate,c.finishedLanes=u,cl(c,ll,vu),co(c,Nt()),null}function q1(c,u){var p=En;En|=1;try{return c(u)}finally{En=p,En===0&&(Sd=Nt()+500,Ai&&Qa())}}function Ih(c){wu!==null&&wu.tag===0&&(En&6)===0&&qf();var u=En;En|=1;var p=Ec.transition,v=Qt;try{if(Ec.transition=null,Qt=1,c)return c()}finally{Qt=v,Ec.transition=p,En=u,(En&6)===0&&Qa()}}function Mh(){Do=_h.current,In(_h)}function hp(c,u){c.finishedWork=null,c.finishedLanes=0;var p=c.timeoutHandle;if(p!==-1&&(c.timeoutHandle=-1,fi(p)),ba!==null)for(p=ba.return;p!==null;){var v=p;switch(yg(v),v.tag){case 1:v=v.type.childContextTypes,v!=null&&tl();break;case 3:ra(),In(ya),In(As),Of();break;case 5:ns(v);break;case 4:ra();break;case 13:In(Wn);break;case 19:In(Wn);break;case 10:Af(v.type._context);break;case 22:case 23:Mh()}p=p.return}if(pi=c,ba=c=Rh(c.current,null),Di=Do=u,Pa=0,_g=null,Tv=ox=$o=0,ll=lx=null,Ii!==null){for(u=0;u<Ii.length;u++)if(p=Ii[u],v=p.interleaved,v!==null){p.interleaved=null;var k=v.next,_=p.pending;if(_!==null){var F=_.next;_.next=k,v.next=F}p.pending=v}Ii=null}return c}function Vf(c,u){do{var p=ba;try{if(Pf(),Nc.current=bd,Oo){for(var v=ss.memoizedState;v!==null;){var k=v.queue;k!==null&&(k.pending=null),v=v.next}Oo=!1}if(jc=0,Xs=Ls=ss=null,uu=!1,Sc=0,Ev.current=null,p===null||p.return===null){Pa=1,_g=u,ba=null;break}e:{var _=c,F=p.return,se=p,J=u;if(u=Di,se.flags|=32768,J!==null&&typeof J=="object"&&typeof J.then=="function"){var xe=J,ye=se,Pe=ye.tag;if((ye.mode&1)===0&&(Pe===0||Pe===11||Pe===15)){var De=ye.alternate;De?(ye.updateQueue=De.updateQueue,ye.memoizedState=De.memoizedState,ye.lanes=De.lanes):(ye.updateQueue=null,ye.memoizedState=null)}var Ve=Bs(F);if(Ve!==null){Ve.flags&=-257,Eh(Ve,F,se,_,u),Ve.mode&1&&Cc(_,xe,u),u=Ve,J=xe;var Be=u.updateQueue;if(Be===null){var et=new Set;et.add(J),u.updateQueue=et}else Be.add(J);break e}else{if((u&1)===0){Cc(_,xe,u),fp();break e}J=Error(r(426))}}else if(rt&&se.mode&1){var Xe=Bs(F);if(Xe!==null){(Xe.flags&65536)===0&&(Xe.flags|=256),Eh(Xe,F,se,_,u),gh(io(J,se));break e}}_=J=io(J,se),Pa!==4&&(Pa=2),lx===null?lx=[_]:lx.push(_),_=F;do{switch(_.tag){case 3:_.flags|=65536,u&=-u,_.lanes|=u;var Me=gu(_,J,u);vg(_,Me);break e;case 1:se=J;var _e=_.type,ze=_.stateNode;if((_.flags&128)===0&&(typeof _e.getDerivedStateFromError=="function"||ze!==null&&typeof ze.componentDidCatch=="function"&&(Tc===null||!Tc.has(ze)))){_.flags|=65536,u&=-u,_.lanes|=u;var Ze=da(_,se,u);vg(_,Ze);break e}}_=_.return}while(_!==null)}W1(p)}catch(vt){u=vt,ba===p&&p!==null&&(ba=p=p.return);continue}break}while(!0)}function kk(){var c=dp.current;return dp.current=bd,c===null?bd:c}function fp(){(Pa===0||Pa===3||Pa===2)&&(Pa=4),pi===null||($o&268435455)===0&&(ox&268435455)===0||Cd(pi,Di)}function _v(c,u){var p=En;En|=2;var v=kk();(pi!==c||Di!==u)&&(vu=null,hp(c,u));do try{OI();break}catch(k){Vf(c,k)}while(!0);if(Pf(),En=p,dp.current=v,ba!==null)throw Error(r(261));return pi=null,Di=0,Pa}function OI(){for(;ba!==null;)Ck(ba)}function H1(){for(;ba!==null&&!ut();)Ck(ba)}function Ck(c){var u=X1(c.alternate,c,Do);c.memoizedProps=c.pendingProps,u===null?W1(c):ba=u,Ev.current=null}function W1(c){var u=c;do{var p=u.alternate;if(c=u.return,(u.flags&32768)===0){if(p=Bn(p,u,Do),p!==null){ba=p;return}}else{if(p=_s(p,u),p!==null){p.flags&=32767,ba=p;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Pa=6,ba=null;return}}if(u=u.sibling,u!==null){ba=u;return}ba=u=c}while(u!==null);Pa===0&&(Pa=5)}function cl(c,u,p){var v=Qt,k=Ec.transition;try{Ec.transition=null,Qt=1,Ek(c,u,p,v)}finally{Ec.transition=k,Qt=v}return null}function Ek(c,u,p,v){do qf();while(wu!==null);if((En&6)!==0)throw Error(r(327));p=c.finishedWork;var k=c.finishedLanes;if(p===null)return null;if(c.finishedWork=null,c.finishedLanes=0,p===c.current)throw Error(r(177));c.callbackNode=null,c.callbackPriority=0;var _=p.lanes|p.childLanes;if(Mm(c,_),c===pi&&(ba=pi=null,Di=0),(p.subtreeFlags&2064)===0&&(p.flags&2064)===0||Kr||(Kr=!0,Q1(Er,function(){return qf(),null})),_=(p.flags&15990)!==0,(p.subtreeFlags&15990)!==0||_){_=Ec.transition,Ec.transition=null;var F=Qt;Qt=1;var se=En;En|=4,Ev.current=null,al(c,p),U1(p,c),Zd(Qi),sn=!!rs,Qi=rs=null,c.current=p,Sk(p),Bt(),En=se,Qt=F,Ec.transition=_}else c.current=p;if(Kr&&(Kr=!1,wu=c,Ig=k),_=c.pendingLanes,_===0&&(Tc=null),li(p.stateNode),co(c,Nt()),u!==null)for(v=c.onRecoverableError,p=0;p<u.length;p++)k=u[p],v(k.value,{componentStack:k.stack,digest:k.digest});if(bu)throw bu=!1,c=Ot,Ot=null,c;return(Ig&1)!==0&&c.tag!==0&&qf(),_=c.pendingLanes,(_&1)!==0?c===cx?up++:(up=0,cx=c):up=0,Qa(),null}function qf(){if(wu!==null){var c=Gc(Ig),u=Ec.transition,p=Qt;try{if(Ec.transition=null,Qt=16>c?16:c,wu===null)var v=!1;else{if(c=wu,wu=null,Ig=0,(En&6)!==0)throw Error(r(331));var k=En;for(En|=4,Lt=c.current;Lt!==null;){var _=Lt,F=_.child;if((Lt.flags&16)!==0){var se=_.deletions;if(se!==null){for(var J=0;J<se.length;J++){var xe=se[J];for(Lt=xe;Lt!==null;){var ye=Lt;switch(ye.tag){case 0:case 11:case 15:zl(8,ye,_)}var Pe=ye.child;if(Pe!==null)Pe.return=ye,Lt=Pe;else for(;Lt!==null;){ye=Lt;var De=ye.sibling,Ve=ye.return;if(il(ye),ye===xe){Lt=null;break}if(De!==null){De.return=Ve,Lt=De;break}Lt=Ve}}}var Be=_.alternate;if(Be!==null){var et=Be.child;if(et!==null){Be.child=null;do{var Xe=et.sibling;et.sibling=null,et=Xe}while(et!==null)}}Lt=_}}if((_.subtreeFlags&2064)!==0&&F!==null)F.return=_,Lt=F;else e:for(;Lt!==null;){if(_=Lt,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:zl(9,_,_.return)}var Me=_.sibling;if(Me!==null){Me.return=_.return,Lt=Me;break e}Lt=_.return}}var _e=c.current;for(Lt=_e;Lt!==null;){F=Lt;var ze=F.child;if((F.subtreeFlags&2064)!==0&&ze!==null)ze.return=F,Lt=ze;else e:for(F=_e;Lt!==null;){if(se=Lt,(se.flags&2048)!==0)try{switch(se.tag){case 0:case 11:case 15:op(9,se)}}catch(vt){sa(se,se.return,vt)}if(se===F){Lt=null;break e}var Ze=se.sibling;if(Ze!==null){Ze.return=se.return,Lt=Ze;break e}Lt=se.return}}if(En=k,Qa(),Yr&&typeof Yr.onPostCommitFiberRoot=="function")try{Yr.onPostCommitFiberRoot(mn,c)}catch{}v=!0}return v}finally{Qt=p,Ec.transition=u}}return!1}function Y1(c,u,p){u=io(p,u),u=gu(c,u,1),c=Io(c,u,1),u=Lo(),c!==null&&(Yo(c,1,u),co(c,u))}function sa(c,u,p){if(c.tag===3)Y1(c,c,p);else for(;u!==null;){if(u.tag===3){Y1(u,c,p);break}else if(u.tag===1){var v=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Tc===null||!Tc.has(v))){c=io(p,c),c=da(u,c,1),u=Io(u,c,1),c=Lo(),u!==null&&(Yo(u,1,c),co(u,c));break}}u=u.return}}function K1(c,u,p){var v=c.pingCache;v!==null&&v.delete(u),u=Lo(),c.pingedLanes|=c.suspendedLanes&p,pi===c&&(Di&p)===p&&(Pa===4||Pa===3&&(Di&130023424)===Di&&500>Nt()-lo?hp(c,0):Tv|=p),co(c,u)}function Oh(c,u){u===0&&((c.mode&1)===0?u=1:(u=Nl,Nl<<=1,(Nl&130023424)===0&&(Nl=4194304)));var p=Lo();c=bc(c,u),c!==null&&(Yo(c,u,p),co(c,p))}function RI(c){var u=c.memoizedState,p=0;u!==null&&(p=u.retryLane),Oh(c,p)}function G1(c,u){var p=0;switch(c.tag){case 13:var v=c.stateNode,k=c.memoizedState;k!==null&&(p=k.retryLane);break;case 19:v=c.stateNode;break;default:throw Error(r(314))}v!==null&&v.delete(u),Oh(c,p)}var X1;X1=function(c,u,p){if(c!==null)if(c.memoizedProps!==u.pendingProps||ya.current)va=!0;else{if((c.lanes&p)===0&&(u.flags&128)===0)return va=!1,vs(c,u,p);va=(c.flags&131072)!==0}else va=!1,rt&&(u.flags&1048576)!==0&&Cv(u,$l,u.index);switch(u.lanes=0,u.tag){case 2:var v=u.type;Tt(c,u),c=u.pendingProps;var k=xc(u,As.current);vc(u,p),k=Rf(null,u,v,c,k,p);var _=hu();return u.flags|=1,typeof k=="object"&&k!==null&&typeof k.render=="function"&&k.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,Qr(v)?(_=!0,su(u)):_=!1,u.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,qr(u),k.updater=kh,u.stateNode=k,k._reactInternals=u,pu(u,v,c,p),u=D(null,u,v,!0,_,p)):(u.tag=0,rt&&_&&ir(u),na(null,u,k,p),u=u.child),u;case 16:v=u.elementType;e:{switch(Tt(c,u),c=u.pendingProps,k=v._init,v=k(v._payload),u.type=v,k=u.tag=J1(v),c=mi(v,c),k){case 0:u=S(null,u,v,c,p);break e;case 1:u=L(null,u,v,c,p);break e;case 11:u=Pg(null,u,v,c,p);break e;case 14:u=xu(null,u,v,mi(v.type,c),p);break e}throw Error(r(306,v,""))}return u;case 0:return v=u.type,k=u.pendingProps,k=u.elementType===v?k:mi(v,k),S(c,u,v,k,p);case 1:return v=u.type,k=u.pendingProps,k=u.elementType===v?k:mi(v,k),L(c,u,v,k,p);case 3:e:{if(q(u),c===null)throw Error(r(387));v=u.pendingProps,_=u.memoizedState,k=_.element,bh(c,u),_f(u,v,null,p);var F=u.memoizedState;if(v=F.element,_.isDehydrated)if(_={element:v,isDehydrated:!1,cache:F.cache,pendingSuspenseBoundaries:F.pendingSuspenseBoundaries,transitions:F.transitions},u.updateQueue.baseState=_,u.memoizedState=_,u.flags&256){k=io(Error(r(423)),u),u=fe(c,u,v,p,k);break e}else if(v!==k){k=io(Error(r(424)),u),u=fe(c,u,v,p,k);break e}else for(la=xa(u.stateNode.containerInfo.firstChild),eo=u,rt=!0,to=null,p=fd(u,null,v,p),u.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(Bl(),v===k){u=$t(c,u,p);break e}na(c,u,v,p)}u=u.child}return u;case 5:return Km(u),c===null&&ph(u),v=u.type,k=u.pendingProps,_=c!==null?c.memoizedProps:null,F=k.children,$s(v,k)?F=null:_!==null&&$s(v,_)&&(u.flags|=32),yu(c,u),na(c,u,F,p),u.child;case 6:return c===null&&ph(u),null;case 13:return Ge(c,u,p);case 4:return Mf(u,u.stateNode.containerInfo),v=u.pendingProps,c===null?u.child=vh(u,null,v,p):na(c,u,v,p),u.child;case 11:return v=u.type,k=u.pendingProps,k=u.elementType===v?k:mi(v,k),Pg(c,u,v,k,p);case 7:return na(c,u,u.pendingProps,p),u.child;case 8:return na(c,u,u.pendingProps.children,p),u.child;case 12:return na(c,u,u.pendingProps.children,p),u.child;case 10:e:{if(v=u.type._context,k=u.pendingProps,_=u.memoizedProps,F=k.value,Fn(_o,v._currentValue),v._currentValue=F,_!==null)if(ko(_.value,F)){if(_.children===k.children&&!ya.current){u=$t(c,u,p);break e}}else for(_=u.child,_!==null&&(_.return=u);_!==null;){var se=_.dependencies;if(se!==null){F=_.child;for(var J=se.firstContext;J!==null;){if(J.context===v){if(_.tag===1){J=so(-1,p&-p),J.tag=2;var xe=_.updateQueue;if(xe!==null){xe=xe.shared;var ye=xe.pending;ye===null?J.next=J:(J.next=ye.next,ye.next=J),xe.pending=J}}_.lanes|=p,J=_.alternate,J!==null&&(J.lanes|=p),Wm(_.return,p,u),se.lanes|=p;break}J=J.next}}else if(_.tag===10)F=_.type===u.type?null:_.child;else if(_.tag===18){if(F=_.return,F===null)throw Error(r(341));F.lanes|=p,se=F.alternate,se!==null&&(se.lanes|=p),Wm(F,p,u),F=_.sibling}else F=_.child;if(F!==null)F.return=_;else for(F=_;F!==null;){if(F===u){F=null;break}if(_=F.sibling,_!==null){_.return=F.return,F=_;break}F=F.return}_=F}na(c,u,k.children,p),u=u.child}return u;case 9:return k=u.type,v=u.pendingProps.children,vc(u,p),k=no(k),v=v(k),u.flags|=1,na(c,u,v,p),u.child;case 14:return v=u.type,k=mi(v,u.pendingProps),k=mi(v.type,k),xu(c,u,v,k,p);case 15:return Th(c,u,u.type,u.pendingProps,p);case 17:return v=u.type,k=u.pendingProps,k=u.elementType===v?k:mi(v,k),Tt(c,u),u.tag=1,Qr(v)?(c=!0,su(u)):c=!1,vc(u,p),ip(u,v,k),pu(u,v,k,p),D(null,u,v,!0,c,p);case 19:return hr(c,u,p);case 22:return ua(c,u,p)}throw Error(r(156,u.tag))};function Q1(c,u){return ct(c,u)}function Tk(c,u,p,v){this.tag=c,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hl(c,u,p,v){return new Tk(c,u,p,v)}function Iv(c){return c=c.prototype,!(!c||!c.isReactComponent)}function J1(c){if(typeof c=="function")return Iv(c)?1:0;if(c!=null){if(c=c.$$typeof,c===Y)return 11;if(c===te)return 14}return 2}function Rh(c,u){var p=c.alternate;return p===null?(p=Hl(c.tag,u,c.key,c.mode),p.elementType=c.elementType,p.type=c.type,p.stateNode=c.stateNode,p.alternate=c,c.alternate=p):(p.pendingProps=u,p.type=c.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=c.flags&14680064,p.childLanes=c.childLanes,p.lanes=c.lanes,p.child=c.child,p.memoizedProps=c.memoizedProps,p.memoizedState=c.memoizedState,p.updateQueue=c.updateQueue,u=c.dependencies,p.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},p.sibling=c.sibling,p.index=c.index,p.ref=c.ref,p}function ju(c,u,p,v,k,_){var F=2;if(v=c,typeof c=="function")Iv(c)&&(F=1);else if(typeof c=="string")F=5;else e:switch(c){case R:return Dh(p.children,k,_,u);case B:F=8,k|=8;break;case V:return c=Hl(12,p,u,k|2),c.elementType=V,c.lanes=_,c;case re:return c=Hl(13,p,u,k),c.elementType=re,c.lanes=_,c;case le:return c=Hl(19,p,u,k),c.elementType=le,c.lanes=_,c;case ie:return Hf(p,k,_,u);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case X:F=10;break e;case ee:F=9;break e;case Y:F=11;break e;case te:F=14;break e;case de:F=16,v=null;break e}throw Error(r(130,c==null?c:typeof c,""))}return u=Hl(F,p,u,k),u.elementType=c,u.type=v,u.lanes=_,u}function Dh(c,u,p,v){return c=Hl(7,c,v,u),c.lanes=p,c}function Hf(c,u,p,v){return c=Hl(22,c,v,u),c.elementType=ie,c.lanes=p,c.stateNode={isHidden:!1},c}function Mv(c,u,p){return c=Hl(6,c,null,u),c.lanes=p,c}function Pc(c,u,p){return u=Hl(4,c.children!==null?c.children:[],c.key,u),u.lanes=p,u.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},u}function Pk(c,u,p,v,k){this.tag=u,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wo(0),this.expirationTimes=Wo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wo(0),this.identifierPrefix=v,this.onRecoverableError=k,this.mutableSourceEagerHydrationData=null}function hx(c,u,p,v,k,_,F,se,J){return c=new Pk(c,u,p,se,J),u===1?(u=1,_===!0&&(u|=8)):u=0,_=Hl(3,null,null,u),c.current=_,_.stateNode=c,_.memoizedState={element:v,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},qr(_),c}function Ov(c,u,p){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:A,key:v==null?null:""+v,children:c,containerInfo:u,implementation:p}}function Rv(c){if(!c)return el;c=c._reactInternals;e:{if(Qn(c)!==c||c.tag!==1)throw Error(r(170));var u=c;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(Qr(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(r(171))}if(c.tag===1){var p=c.type;if(Qr(p))return Rl(c,p,u)}return u}function fx(c,u,p,v,k,_,F,se,J){return c=hx(p,v,!0,c,k,_,F,se,J),c.context=Rv(null),p=c.current,v=Lo(),k=Nu(p),_=so(v,k),_.callback=u??null,Io(p,_,k),c.current.lanes=k,Yo(c,k,v),co(c,v),c}function Mg(c,u,p,v){var k=u.current,_=Lo(),F=Nu(k);return p=Rv(p),u.context===null?u.context=p:u.pendingContext=p,u=so(_,F),u.payload={element:c},v=v===void 0?null:v,v!==null&&(u.callback=v),c=Io(k,u,F),c!==null&&(kd(c,k,F,_),Mi(c,k,F)),F}function mx(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function Dv(c,u){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var p=c.retryLane;c.retryLane=p!==0&&p<u?p:u}}function px(c,u){Dv(c,u),(c=c.alternate)&&Dv(c,u)}function Z1(){return null}var $v=typeof reportError=="function"?reportError:function(c){console.error(c)};function gx(c){this._internalRoot=c}Og.prototype.render=gx.prototype.render=function(c){var u=this._internalRoot;if(u===null)throw Error(r(409));Mg(c,u,null,null)},Og.prototype.unmount=gx.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var u=c.containerInfo;Ih(function(){Mg(null,c,null,null)}),u[Ps]=null}};function Og(c){this._internalRoot=c}Og.prototype.unstable_scheduleHydration=function(c){if(c){var u=yf();c={blockedOn:null,target:c,priority:u};for(var p=0;p<gs.length&&u!==0&&u<gs[p].priority;p++);gs.splice(p,0,c),p===0&&th(c)}};function xx(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function y(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function E(){}function M(c,u,p,v,k){if(k){if(typeof v=="function"){var _=v;v=function(){var xe=mx(F);_.call(xe)}}var F=fx(u,v,c,0,null,!1,!1,"",E);return c._reactRootContainer=F,c[Ps]=F.current,tn(c.nodeType===8?c.parentNode:c),Ih(),F}for(;k=c.lastChild;)c.removeChild(k);if(typeof v=="function"){var se=v;v=function(){var xe=mx(J);se.call(xe)}}var J=hx(c,0,!1,null,null,!1,!1,"",E);return c._reactRootContainer=J,c[Ps]=J.current,tn(c.nodeType===8?c.parentNode:c),Ih(function(){Mg(u,J,p,v)}),J}function z(c,u,p,v,k){var _=p._reactRootContainer;if(_){var F=_;if(typeof k=="function"){var se=k;k=function(){var J=mx(F);se.call(J)}}Mg(u,F,c,k)}else F=M(p,u,c,k,v);return mx(F)}is=function(c){switch(c.tag){case 3:var u=c.stateNode;if(u.current.memoizedState.isDehydrated){var p=jl(u.pendingLanes);p!==0&&(Zu(u,p|1),co(u,Nt()),(En&6)===0&&(Sd=Nt()+500,Qa()))}break;case 13:Ih(function(){var v=bc(c,1);if(v!==null){var k=Lo();kd(v,c,1,k)}}),px(c,1)}},Sl=function(c){if(c.tag===13){var u=bc(c,134217728);if(u!==null){var p=Lo();kd(u,c,134217728,p)}px(c,134217728)}},eh=function(c){if(c.tag===13){var u=Nu(c),p=bc(c,u);if(p!==null){var v=Lo();kd(p,c,u,v)}px(c,u)}},yf=function(){return Qt},lg=function(c,u){var p=Qt;try{return Qt=c,u()}finally{Qt=p}},me=function(c,u,p){switch(u){case"input":if(It(c,p),u=p.name,p.type==="radio"&&u!=null){for(p=c;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+u)+'][type="radio"]'),u=0;u<p.length;u++){var v=p[u];if(v!==c&&v.form===c.form){var k=Ji(v);if(!k)throw Error(r(90));Ie(v),It(v,k)}}}break;case"textarea":pt(c,p);break;case"select":u=p.value,u!=null&&Fe(c,!!p.multiple,u,!1)}},tt=q1,it=Ih;var K={usingClientEntryPoint:!1,Events:[Il,Ml,Ji,Je,Q,q1]},G={findFiberByHostInstance:Po,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$={bundleType:G.bundleType,version:G.version,rendererPackageName:G.rendererPackageName,rendererConfig:G.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=Jn(c),c===null?null:c.stateNode},findFiberByHostInstance:G.findFiberByHostInstance||Z1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ae=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ae.isDisabled&&ae.supportsFiber)try{mn=ae.inject($),Yr=ae}catch{}}return Wl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K,Wl.createPortal=function(c,u){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xx(u))throw Error(r(200));return Ov(c,u,null,p)},Wl.createRoot=function(c,u){if(!xx(c))throw Error(r(299));var p=!1,v="",k=$v;return u!=null&&(u.unstable_strictMode===!0&&(p=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onRecoverableError!==void 0&&(k=u.onRecoverableError)),u=hx(c,1,!1,null,null,p,!1,v,k),c[Ps]=u.current,tn(c.nodeType===8?c.parentNode:c),new gx(u)},Wl.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var u=c._reactInternals;if(u===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=Jn(u),c=c===null?null:c.stateNode,c},Wl.flushSync=function(c){return Ih(c)},Wl.hydrate=function(c,u,p){if(!y(u))throw Error(r(200));return z(null,c,u,!0,p)},Wl.hydrateRoot=function(c,u,p){if(!xx(c))throw Error(r(405));var v=p!=null&&p.hydratedSources||null,k=!1,_="",F=$v;if(p!=null&&(p.unstable_strictMode===!0&&(k=!0),p.identifierPrefix!==void 0&&(_=p.identifierPrefix),p.onRecoverableError!==void 0&&(F=p.onRecoverableError)),u=fx(u,null,c,1,p??null,k,!1,_,F),c[Ps]=u.current,tn(c),v)for(c=0;c<v.length;c++)p=v[c],k=p._getVersion,k=k(p._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[p,k]:u.mutableSourceEagerHydrationData.push(p,k);return new Og(u)},Wl.render=function(c,u,p){if(!y(u))throw Error(r(200));return z(null,c,u,!1,p)},Wl.unmountComponentAtNode=function(c){if(!y(c))throw Error(r(40));return c._reactRootContainer?(Ih(function(){z(null,null,c,!1,function(){c._reactRootContainer=null,c[Ps]=null})}),!0):!1},Wl.unstable_batchedUpdates=q1,Wl.unstable_renderSubtreeIntoContainer=function(c,u,p,v){if(!y(p))throw Error(r(200));if(c==null||c._reactInternals===void 0)throw Error(r(38));return z(c,u,p,!1,v)},Wl.version="18.3.1-next-f1338f8080-20240426",Wl}var qI;function IV(){if(qI)return Mk.exports;qI=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Mk.exports=zte(),Mk.exports}var HI;function Vte(){if(HI)return rN;HI=1;var t=IV();return rN.createRoot=t.createRoot,rN.hydrateRoot=t.hydrateRoot,rN}var qte=Vte(),g=V2();const $e=Hs(g),lA=Dte({__proto__:null,default:$e},[g]);function Hte(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var r,s,a,i,o=[],l="",d=t.split("/");for(d[0]||d.shift();a=d.shift();)r=a[0],r==="*"?(o.push(r),l+=a[1]==="?"?"(?:/(.*))?":"/(.*)"):r===":"?(s=a.indexOf("?",1),i=a.indexOf(".",1),o.push(a.substring(1,~s?s:~i?i:a.length)),l+=~s&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~s?"?":"")+"\\"+a.substring(i))):l+="/"+a;return{keys:o,pattern:new RegExp("^"+l+(e?"(?=$|/)":"/?$"),"i")}}var Dk={exports:{}},$k={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WI;function Wte(){if(WI)return $k;WI=1;var t=V2();function e(m,x){return m===x&&(m!==0||1/m===1/x)||m!==m&&x!==x}var r=typeof Object.is=="function"?Object.is:e,s=t.useState,a=t.useEffect,i=t.useLayoutEffect,o=t.useDebugValue;function l(m,x){var b=x(),j=s({inst:{value:b,getSnapshot:x}}),N=j[0].inst,w=j[1];return i(function(){N.value=b,N.getSnapshot=x,d(N)&&w({inst:N})},[m,b,x]),a(function(){return d(N)&&w({inst:N}),m(function(){d(N)&&w({inst:N})})},[m]),o(b),b}function d(m){var x=m.getSnapshot;m=m.value;try{var b=x();return!r(m,b)}catch{return!0}}function h(m,x){return x()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:l;return $k.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:f,$k}var YI;function Yte(){return YI||(YI=1,Dk.exports=Wte()),Dk.exports}var MV=Yte();const Kte=lA.useInsertionEffect,Gte=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Xte=Gte?g.useLayoutEffect:g.useEffect,Qte=Kte||Xte,OV=t=>{const e=g.useRef([t,(...r)=>e[0](...r)]).current;return Qte(()=>{e[0]=t}),e[1]},Jte="popstate",cA="pushState",dA="replaceState",Zte="hashchange",KI=[Jte,cA,dA,Zte],ere=t=>{for(const e of KI)addEventListener(e,t);return()=>{for(const e of KI)removeEventListener(e,t)}},RV=(t,e)=>MV.useSyncExternalStore(ere,t,e),tre=()=>location.search,rre=({ssrSearch:t=""}={})=>RV(tre,()=>t),GI=()=>location.pathname,nre=({ssrPath:t}={})=>RV(GI,t?()=>t:GI),sre=(t,{replace:e=!1,state:r=null}={})=>history[e?dA:cA](r,"",t),are=(t={})=>[nre(t),sre],XI=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[XI]>"u"){for(const t of[cA,dA]){const e=history[t];history[t]=function(){const r=e.apply(this,arguments),s=new Event(t);return s.arguments=arguments,dispatchEvent(s),r}}Object.defineProperty(window,XI,{value:!0})}const ire=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",DV=(t="")=>t==="/"?"":t,ore=(t,e)=>t[0]==="~"?t.slice(1):DV(e)+t,lre=(t="",e)=>ire(QI(DV(t)),QI(e)),QI=t=>{try{return decodeURI(t)}catch{return t}},$V={hook:are,searchHook:rre,parser:Hte,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:t=>t},LV=g.createContext($V),$0=()=>g.useContext(LV),FV={},BV=g.createContext(FV),UV=()=>g.useContext(BV),q2=t=>{const[e,r]=t.hook(t);return[lre(t.base,e),OV((s,a)=>r(ore(s,t.base),a))]},Jy=()=>q2($0()),uA=(t,e,r,s)=>{const{pattern:a,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",s),o=a.exec(r)||[],[l,...d]=o;return l!==void 0?[!0,(()=>{const h=i!==!1?Object.fromEntries(i.map((m,x)=>[m,d[x]])):o.groups;let f={...d};return h&&Object.assign(f,h),f})(),...s?[l]:[]]:[!1,null]},JI=t=>uA($0().parser,t,Jy()[0]),cre=({children:t,...e})=>{var f,m;const r=$0(),s=e.hook?$V:r;let a=s;const[i,o]=((f=e.ssrPath)==null?void 0:f.split("?"))??[];o&&(e.ssrSearch=o,e.ssrPath=i),e.hrefs=e.hrefs??((m=e.hook)==null?void 0:m.hrefs);let l=g.useRef({}),d=l.current,h=d;for(let x in s){const b=x==="base"?s[x]+(e[x]||""):e[x]||s[x];d===h&&b!==h[x]&&(l.current=h={...h}),h[x]=b,(b!==s[x]||b!==a[x])&&(a=h)}return g.createElement(LV.Provider,{value:a,children:t})},ZI=({children:t,component:e},r)=>e?g.createElement(e,{params:r}):typeof t=="function"?t(r):t,dre=t=>{let e=g.useRef(FV);const r=e.current;return e.current=Object.keys(t).length!==Object.keys(r).length||Object.entries(t).some(([s,a])=>a!==r[s])?t:r},Fo=({path:t,nest:e,match:r,...s})=>{const a=$0(),[i]=q2(a),[o,l,d]=r??uA(a.parser,t,i,e),h=dre({...UV(),...l});if(!o)return null;const f=d?g.createElement(cre,{base:d},ZI(s,h)):ZI(s,h);return g.createElement(BV.Provider,{value:h,children:f})};g.forwardRef((t,e)=>{const r=$0(),[s,a]=q2(r),{to:i="",href:o=i,onClick:l,asChild:d,children:h,className:f,replace:m,state:x,...b}=t,j=OV(w=>{w.ctrlKey||w.metaKey||w.altKey||w.shiftKey||w.button!==0||(l==null||l(w),w.defaultPrevented||(w.preventDefault(),a(o,t)))}),N=r.hrefs(o[0]==="~"?o.slice(1):r.base+o,r);return d&&g.isValidElement(h)?g.cloneElement(h,{onClick:j,href:N}):g.createElement("a",{...b,onClick:j,href:N,className:f!=null&&f.call?f(s===o):f,children:h,ref:e})});const zV=t=>Array.isArray(t)?t.flatMap(e=>zV(e&&e.type===g.Fragment?e.props.children:e)):[t],ure=({children:t,location:e})=>{const r=$0(),[s]=q2(r);for(const a of zV(t)){let i=0;if(g.isValidElement(a)&&(i=uA(r.parser,a.props.path,e||s,a.props.nest))[0])return g.cloneElement(a,{match:i})}return null};var Zy=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},hre={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Sp,oA,L9,fre=(L9=class{constructor(){wr(this,Sp,hre);wr(this,oA,!1)}setTimeoutProvider(t){Yt(this,Sp,t)}setTimeout(t,e){return Re(this,Sp).setTimeout(t,e)}clearTimeout(t){Re(this,Sp).clearTimeout(t)}setInterval(t,e){return Re(this,Sp).setInterval(t,e)}clearInterval(t){Re(this,Sp).clearInterval(t)}},Sp=new WeakMap,oA=new WeakMap,L9),Hg=new fre;function mre(t){setTimeout(t,0)}var m0=typeof window>"u"||"Deno"in globalThis;function fl(){}function pre(t,e){return typeof t=="function"?t(e):t}function L3(t){return typeof t=="number"&&t>=0&&t!==1/0}function VV(t,e){return Math.max(t+(e||0)-Date.now(),0)}function $p(t,e){return typeof t=="function"?t(e):t}function Rd(t,e){return typeof t=="function"?t(e):t}function e6(t,e){const{type:r="all",exact:s,fetchStatus:a,predicate:i,queryKey:o,stale:l}=t;if(o){if(s){if(e.queryHash!==hA(o,e.options))return!1}else if(!Fb(e.queryKey,o))return!1}if(r!=="all"){const d=e.isActive();if(r==="active"&&!d||r==="inactive"&&d)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||a&&a!==e.state.fetchStatus||i&&!i(e))}function t6(t,e){const{exact:r,status:s,predicate:a,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(r){if(p0(e.options.mutationKey)!==p0(i))return!1}else if(!Fb(e.options.mutationKey,i))return!1}return!(s&&e.state.status!==s||a&&!a(e))}function hA(t,e){return((e==null?void 0:e.queryKeyHashFn)||p0)(t)}function p0(t){return JSON.stringify(t,(e,r)=>F3(r)?Object.keys(r).sort().reduce((s,a)=>(s[a]=r[a],s),{}):r)}function Fb(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>Fb(t[r],e[r])):!1}var gre=Object.prototype.hasOwnProperty;function qV(t,e){if(t===e)return t;const r=r6(t)&&r6(e);if(!r&&!(F3(t)&&F3(e)))return e;const a=(r?t:Object.keys(t)).length,i=r?e:Object.keys(e),o=i.length,l=r?new Array(o):{};let d=0;for(let h=0;h<o;h++){const f=r?h:i[h],m=t[f],x=e[f];if(m===x){l[f]=m,(r?h<a:gre.call(t,f))&&d++;continue}if(m===null||x===null||typeof m!="object"||typeof x!="object"){l[f]=x;continue}const b=qV(m,x);l[f]=b,b===m&&d++}return a===o&&d===a?t:l}function oj(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function r6(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function F3(t){if(!n6(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!n6(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function n6(t){return Object.prototype.toString.call(t)==="[object Object]"}function xre(t){return new Promise(e=>{Hg.setTimeout(e,t)})}function B3(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?qV(t,e):e}function yre(t,e,r=0){const s=[...t,e];return r&&s.length>r?s.slice(1):s}function vre(t,e,r=0){const s=[e,...t];return r&&s.length>r?s.slice(0,-1):s}var fA=Symbol();function HV(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===fA?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function WV(t,e){return typeof t=="function"?t(...e):!!t}var Jg,kp,ry,F9,bre=(F9=class extends Zy{constructor(){super();wr(this,Jg);wr(this,kp);wr(this,ry);Yt(this,ry,e=>{if(!m0&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){Re(this,kp)||this.setEventListener(Re(this,ry))}onUnsubscribe(){var e;this.hasListeners()||((e=Re(this,kp))==null||e.call(this),Yt(this,kp,void 0))}setEventListener(e){var r;Yt(this,ry,e),(r=Re(this,kp))==null||r.call(this),Yt(this,kp,e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(e){Re(this,Jg)!==e&&(Yt(this,Jg,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof Re(this,Jg)=="boolean"?Re(this,Jg):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Jg=new WeakMap,kp=new WeakMap,ry=new WeakMap,F9),mA=new bre;function U3(){let t,e;const r=new Promise((a,i)=>{t=a,e=i});r.status="pending",r.catch(()=>{});function s(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{s({status:"fulfilled",value:a}),t(a)},r.reject=a=>{s({status:"rejected",reason:a}),e(a)},r}var wre=mre;function Nre(){let t=[],e=0,r=l=>{l()},s=l=>{l()},a=wre;const i=l=>{e?t.push(l):a(()=>{r(l)})},o=()=>{const l=t;t=[],l.length&&a(()=>{s(()=>{l.forEach(d=>{r(d)})})})};return{batch:l=>{let d;e++;try{d=l()}finally{e--,e||o()}return d},batchCalls:l=>(...d)=>{i(()=>{l(...d)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{a=l}}}var bi=Nre(),ny,Cp,sy,B9,jre=(B9=class extends Zy{constructor(){super();wr(this,ny,!0);wr(this,Cp);wr(this,sy);Yt(this,sy,e=>{if(!m0&&window.addEventListener){const r=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",s)}}})}onSubscribe(){Re(this,Cp)||this.setEventListener(Re(this,sy))}onUnsubscribe(){var e;this.hasListeners()||((e=Re(this,Cp))==null||e.call(this),Yt(this,Cp,void 0))}setEventListener(e){var r;Yt(this,sy,e),(r=Re(this,Cp))==null||r.call(this),Yt(this,Cp,e(this.setOnline.bind(this)))}setOnline(e){Re(this,ny)!==e&&(Yt(this,ny,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return Re(this,ny)}},ny=new WeakMap,Cp=new WeakMap,sy=new WeakMap,B9),lj=new jre;function Sre(t){return Math.min(1e3*2**t,3e4)}function YV(t){return(t??"online")==="online"?lj.isOnline():!0}var z3=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function KV(t){let e=!1,r=0,s;const a=U3(),i=()=>a.status!=="pending",o=N=>{var w;if(!i()){const C=new z3(N);x(C),(w=t.onCancel)==null||w.call(t,C)}},l=()=>{e=!0},d=()=>{e=!1},h=()=>mA.isFocused()&&(t.networkMode==="always"||lj.isOnline())&&t.canRun(),f=()=>YV(t.networkMode)&&t.canRun(),m=N=>{i()||(s==null||s(),a.resolve(N))},x=N=>{i()||(s==null||s(),a.reject(N))},b=()=>new Promise(N=>{var w;s=C=>{(i()||h())&&N(C)},(w=t.onPause)==null||w.call(t)}).then(()=>{var N;s=void 0,i()||(N=t.onContinue)==null||N.call(t)}),j=()=>{if(i())return;let N;const w=r===0?t.initialPromise:void 0;try{N=w??t.fn()}catch(C){N=Promise.reject(C)}Promise.resolve(N).then(m).catch(C=>{var A;if(i())return;const T=t.retry??(m0?0:3),O=t.retryDelay??Sre,I=typeof O=="function"?O(r,C):O,P=T===!0||typeof T=="number"&&r<T||typeof T=="function"&&T(r,C);if(e||!P){x(C);return}r++,(A=t.onFail)==null||A.call(t,r,C),xre(I).then(()=>h()?void 0:b()).then(()=>{e?x(C):j()})})};return{promise:a,status:()=>a.status,cancel:o,continue:()=>(s==null||s(),a),cancelRetry:l,continueRetry:d,canStart:f,start:()=>(f()?j():b().then(j),a)}}var Zg,U9,GV=(U9=class{constructor(){wr(this,Zg)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),L3(this.gcTime)&&Yt(this,Zg,Hg.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(m0?1/0:300*1e3))}clearGcTimeout(){Re(this,Zg)&&(Hg.clearTimeout(Re(this,Zg)),Yt(this,Zg,void 0))}},Zg=new WeakMap,U9),e0,ay,Id,t0,Fi,Kw,r0,Eu,Gf,z9,kre=(z9=class extends GV{constructor(e){super();wr(this,Eu);wr(this,e0);wr(this,ay);wr(this,Id);wr(this,t0);wr(this,Fi);wr(this,Kw);wr(this,r0);Yt(this,r0,!1),Yt(this,Kw,e.defaultOptions),this.setOptions(e.options),this.observers=[],Yt(this,t0,e.client),Yt(this,Id,Re(this,t0).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Yt(this,e0,s6(this.options)),this.state=e.state??Re(this,e0),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=Re(this,Fi))==null?void 0:e.promise}setOptions(e){if(this.options={...Re(this,Kw),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=s6(this.options);r.data!==void 0&&(this.setData(r.data,{updatedAt:r.dataUpdatedAt,manual:!0}),Yt(this,e0,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Re(this,Id).remove(this)}setData(e,r){const s=B3(this.state.data,e,this.options);return un(this,Eu,Gf).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(e,r){un(this,Eu,Gf).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var s,a;const r=(s=Re(this,Fi))==null?void 0:s.promise;return(a=Re(this,Fi))==null||a.cancel(e),r?r.then(fl).catch(fl):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Re(this,e0))}isActive(){return this.observers.some(e=>Rd(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===fA||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>$p(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!VV(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(s=>s.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=Re(this,Fi))==null||r.continue()}onOnline(){var r;const e=this.observers.find(s=>s.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=Re(this,Fi))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),Re(this,Id).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(Re(this,Fi)&&(Re(this,r0)?Re(this,Fi).cancel({revert:!0}):Re(this,Fi).cancelRetry()),this.scheduleGc()),Re(this,Id).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||un(this,Eu,Gf).call(this,{type:"invalidate"})}async fetch(e,r){var d,h,f,m,x,b,j,N,w,C,T,O;if(this.state.fetchStatus!=="idle"&&((d=Re(this,Fi))==null?void 0:d.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Re(this,Fi))return Re(this,Fi).continueRetry(),Re(this,Fi).promise}if(e&&this.setOptions(e),!this.options.queryFn){const I=this.observers.find(P=>P.options.queryFn);I&&this.setOptions(I.options)}const s=new AbortController,a=I=>{Object.defineProperty(I,"signal",{enumerable:!0,get:()=>(Yt(this,r0,!0),s.signal)})},i=()=>{const I=HV(this.options,r),A=(()=>{const R={client:Re(this,t0),queryKey:this.queryKey,meta:this.meta};return a(R),R})();return Yt(this,r0,!1),this.options.persister?this.options.persister(I,A,this):I(A)},l=(()=>{const I={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Re(this,t0),state:this.state,fetchFn:i};return a(I),I})();(h=this.options.behavior)==null||h.onFetch(l,this),Yt(this,ay,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&un(this,Eu,Gf).call(this,{type:"fetch",meta:(m=l.fetchOptions)==null?void 0:m.meta}),Yt(this,Fi,KV({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:I=>{I instanceof z3&&I.revert&&this.setState({...Re(this,ay),fetchStatus:"idle"}),s.abort()},onFail:(I,P)=>{un(this,Eu,Gf).call(this,{type:"failed",failureCount:I,error:P})},onPause:()=>{un(this,Eu,Gf).call(this,{type:"pause"})},onContinue:()=>{un(this,Eu,Gf).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const I=await Re(this,Fi).start();if(I===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(I),(b=(x=Re(this,Id).config).onSuccess)==null||b.call(x,I,this),(N=(j=Re(this,Id).config).onSettled)==null||N.call(j,I,this.state.error,this),I}catch(I){if(I instanceof z3){if(I.silent)return Re(this,Fi).promise;if(I.revert){if(this.state.data===void 0)throw I;return this.state.data}}throw un(this,Eu,Gf).call(this,{type:"error",error:I}),(C=(w=Re(this,Id).config).onError)==null||C.call(w,I,this),(O=(T=Re(this,Id).config).onSettled)==null||O.call(T,this.state.data,I,this),I}finally{this.scheduleGc()}}},e0=new WeakMap,ay=new WeakMap,Id=new WeakMap,t0=new WeakMap,Fi=new WeakMap,Kw=new WeakMap,r0=new WeakMap,Eu=new WeakSet,Gf=function(e){const r=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...XV(s.data,this.options),fetchMeta:e.meta??null};case"success":const a={...s,data:e.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Yt(this,ay,e.manual?a:void 0),a;case"error":const i=e.error;return{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=r(this.state),bi.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),Re(this,Id).notify({query:this,type:"updated",action:e})})},z9);function XV(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:YV(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function s6(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,s=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Yl,Rn,Gw,dl,n0,iy,Zf,Ep,Xw,oy,ly,s0,a0,Tp,cy,hs,ob,V3,q3,H3,W3,Y3,K3,G3,QV,V9,Cre=(V9=class extends Zy{constructor(e,r){super();wr(this,hs);wr(this,Yl);wr(this,Rn);wr(this,Gw);wr(this,dl);wr(this,n0);wr(this,iy);wr(this,Zf);wr(this,Ep);wr(this,Xw);wr(this,oy);wr(this,ly);wr(this,s0);wr(this,a0);wr(this,Tp);wr(this,cy,new Set);this.options=r,Yt(this,Yl,e),Yt(this,Ep,null),Yt(this,Zf,U3()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Re(this,Rn).addObserver(this),a6(Re(this,Rn),this.options)?un(this,hs,ob).call(this):this.updateResult(),un(this,hs,W3).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return X3(Re(this,Rn),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return X3(Re(this,Rn),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,un(this,hs,Y3).call(this),un(this,hs,K3).call(this),Re(this,Rn).removeObserver(this)}setOptions(e){const r=this.options,s=Re(this,Rn);if(this.options=Re(this,Yl).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Rd(this.options.enabled,Re(this,Rn))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");un(this,hs,G3).call(this),Re(this,Rn).setOptions(this.options),r._defaulted&&!oj(this.options,r)&&Re(this,Yl).getQueryCache().notify({type:"observerOptionsUpdated",query:Re(this,Rn),observer:this});const a=this.hasListeners();a&&i6(Re(this,Rn),s,this.options,r)&&un(this,hs,ob).call(this),this.updateResult(),a&&(Re(this,Rn)!==s||Rd(this.options.enabled,Re(this,Rn))!==Rd(r.enabled,Re(this,Rn))||$p(this.options.staleTime,Re(this,Rn))!==$p(r.staleTime,Re(this,Rn)))&&un(this,hs,V3).call(this);const i=un(this,hs,q3).call(this);a&&(Re(this,Rn)!==s||Rd(this.options.enabled,Re(this,Rn))!==Rd(r.enabled,Re(this,Rn))||i!==Re(this,Tp))&&un(this,hs,H3).call(this,i)}getOptimisticResult(e){const r=Re(this,Yl).getQueryCache().build(Re(this,Yl),e),s=this.createResult(r,e);return Tre(this,s)&&(Yt(this,dl,s),Yt(this,iy,this.options),Yt(this,n0,Re(this,Rn).state)),s}getCurrentResult(){return Re(this,dl)}trackResult(e,r){return new Proxy(e,{get:(s,a)=>(this.trackProp(a),r==null||r(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&Re(this,Zf).status==="pending"&&Re(this,Zf).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(s,a))})}trackProp(e){Re(this,cy).add(e)}getCurrentQuery(){return Re(this,Rn)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const r=Re(this,Yl).defaultQueryOptions(e),s=Re(this,Yl).getQueryCache().build(Re(this,Yl),r);return s.fetch().then(()=>this.createResult(s,r))}fetch(e){return un(this,hs,ob).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),Re(this,dl)))}createResult(e,r){var V;const s=Re(this,Rn),a=this.options,i=Re(this,dl),o=Re(this,n0),l=Re(this,iy),h=e!==s?e.state:Re(this,Gw),{state:f}=e;let m={...f},x=!1,b;if(r._optimisticResults){const X=this.hasListeners(),ee=!X&&a6(e,r),Y=X&&i6(e,s,r,a);(ee||Y)&&(m={...m,...XV(f.data,e.options)}),r._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:j,errorUpdatedAt:N,status:w}=m;b=m.data;let C=!1;if(r.placeholderData!==void 0&&b===void 0&&w==="pending"){let X;i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(X=i.data,C=!0):X=typeof r.placeholderData=="function"?r.placeholderData((V=Re(this,ly))==null?void 0:V.state.data,Re(this,ly)):r.placeholderData,X!==void 0&&(w="success",b=B3(i==null?void 0:i.data,X,r),x=!0)}if(r.select&&b!==void 0&&!C)if(i&&b===(o==null?void 0:o.data)&&r.select===Re(this,Xw))b=Re(this,oy);else try{Yt(this,Xw,r.select),b=r.select(b),b=B3(i==null?void 0:i.data,b,r),Yt(this,oy,b),Yt(this,Ep,null)}catch(X){Yt(this,Ep,X)}Re(this,Ep)&&(j=Re(this,Ep),b=Re(this,oy),N=Date.now(),w="error");const T=m.fetchStatus==="fetching",O=w==="pending",I=w==="error",P=O&&T,A=b!==void 0,B={status:w,fetchStatus:m.fetchStatus,isPending:O,isSuccess:w==="success",isError:I,isInitialLoading:P,isLoading:P,data:b,dataUpdatedAt:m.dataUpdatedAt,error:j,errorUpdatedAt:N,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>h.dataUpdateCount||m.errorUpdateCount>h.errorUpdateCount,isFetching:T,isRefetching:T&&!O,isLoadingError:I&&!A,isPaused:m.fetchStatus==="paused",isPlaceholderData:x,isRefetchError:I&&A,isStale:pA(e,r),refetch:this.refetch,promise:Re(this,Zf),isEnabled:Rd(r.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const X=re=>{B.status==="error"?re.reject(B.error):B.data!==void 0&&re.resolve(B.data)},ee=()=>{const re=Yt(this,Zf,B.promise=U3());X(re)},Y=Re(this,Zf);switch(Y.status){case"pending":e.queryHash===s.queryHash&&X(Y);break;case"fulfilled":(B.status==="error"||B.data!==Y.value)&&ee();break;case"rejected":(B.status!=="error"||B.error!==Y.reason)&&ee();break}}return B}updateResult(){const e=Re(this,dl),r=this.createResult(Re(this,Rn),this.options);if(Yt(this,n0,Re(this,Rn).state),Yt(this,iy,this.options),Re(this,n0).data!==void 0&&Yt(this,ly,Re(this,Rn)),oj(r,e))return;Yt(this,dl,r);const s=()=>{if(!e)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!Re(this,cy).size)return!0;const o=new Set(i??Re(this,cy));return this.options.throwOnError&&o.add("error"),Object.keys(Re(this,dl)).some(l=>{const d=l;return Re(this,dl)[d]!==e[d]&&o.has(d)})};un(this,hs,QV).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&un(this,hs,W3).call(this)}},Yl=new WeakMap,Rn=new WeakMap,Gw=new WeakMap,dl=new WeakMap,n0=new WeakMap,iy=new WeakMap,Zf=new WeakMap,Ep=new WeakMap,Xw=new WeakMap,oy=new WeakMap,ly=new WeakMap,s0=new WeakMap,a0=new WeakMap,Tp=new WeakMap,cy=new WeakMap,hs=new WeakSet,ob=function(e){un(this,hs,G3).call(this);let r=Re(this,Rn).fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(fl)),r},V3=function(){un(this,hs,Y3).call(this);const e=$p(this.options.staleTime,Re(this,Rn));if(m0||Re(this,dl).isStale||!L3(e))return;const s=VV(Re(this,dl).dataUpdatedAt,e)+1;Yt(this,s0,Hg.setTimeout(()=>{Re(this,dl).isStale||this.updateResult()},s))},q3=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Re(this,Rn)):this.options.refetchInterval)??!1},H3=function(e){un(this,hs,K3).call(this),Yt(this,Tp,e),!(m0||Rd(this.options.enabled,Re(this,Rn))===!1||!L3(Re(this,Tp))||Re(this,Tp)===0)&&Yt(this,a0,Hg.setInterval(()=>{(this.options.refetchIntervalInBackground||mA.isFocused())&&un(this,hs,ob).call(this)},Re(this,Tp)))},W3=function(){un(this,hs,V3).call(this),un(this,hs,H3).call(this,un(this,hs,q3).call(this))},Y3=function(){Re(this,s0)&&(Hg.clearTimeout(Re(this,s0)),Yt(this,s0,void 0))},K3=function(){Re(this,a0)&&(Hg.clearInterval(Re(this,a0)),Yt(this,a0,void 0))},G3=function(){const e=Re(this,Yl).getQueryCache().build(Re(this,Yl),this.options);if(e===Re(this,Rn))return;const r=Re(this,Rn);Yt(this,Rn,e),Yt(this,Gw,e.state),this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))},QV=function(e){bi.batch(()=>{e.listeners&&this.listeners.forEach(r=>{r(Re(this,dl))}),Re(this,Yl).getQueryCache().notify({query:Re(this,Rn),type:"observerResultsUpdated"})})},V9);function Ere(t,e){return Rd(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function a6(t,e){return Ere(t,e)||t.state.data!==void 0&&X3(t,e,e.refetchOnMount)}function X3(t,e,r){if(Rd(e.enabled,t)!==!1&&$p(e.staleTime,t)!=="static"){const s=typeof r=="function"?r(t):r;return s==="always"||s!==!1&&pA(t,e)}return!1}function i6(t,e,r,s){return(t!==e||Rd(s.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&pA(t,r)}function pA(t,e){return Rd(e.enabled,t)!==!1&&t.isStaleByTime($p(e.staleTime,t))}function Tre(t,e){return!oj(t.getCurrentResult(),e)}function o6(t){return{onFetch:(e,r)=>{var f,m,x,b,j;const s=e.options,a=(x=(m=(f=e.fetchOptions)==null?void 0:f.meta)==null?void 0:m.fetchMore)==null?void 0:x.direction,i=((b=e.state.data)==null?void 0:b.pages)||[],o=((j=e.state.data)==null?void 0:j.pageParams)||[];let l={pages:[],pageParams:[]},d=0;const h=async()=>{let N=!1;const w=O=>{Object.defineProperty(O,"signal",{enumerable:!0,get:()=>(e.signal.aborted?N=!0:e.signal.addEventListener("abort",()=>{N=!0}),e.signal)})},C=HV(e.options,e.fetchOptions),T=async(O,I,P)=>{if(N)return Promise.reject();if(I==null&&O.pages.length)return Promise.resolve(O);const R=(()=>{const ee={client:e.client,queryKey:e.queryKey,pageParam:I,direction:P?"backward":"forward",meta:e.options.meta};return w(ee),ee})(),B=await C(R),{maxPages:V}=e.options,X=P?vre:yre;return{pages:X(O.pages,B,V),pageParams:X(O.pageParams,I,V)}};if(a&&i.length){const O=a==="backward",I=O?Pre:l6,P={pages:i,pageParams:o},A=I(s,P);l=await T(P,A,O)}else{const O=t??i.length;do{const I=d===0?o[0]??s.initialPageParam:l6(s,l);if(d>0&&I==null)break;l=await T(l,I),d++}while(d<O)}return l};e.options.persister?e.fetchFn=()=>{var N,w;return(w=(N=e.options).persister)==null?void 0:w.call(N,h,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=h}}}function l6(t,{pages:e,pageParams:r}){const s=e.length-1;return e.length>0?t.getNextPageParam(e[s],e,r[s],r):void 0}function Pre(t,{pages:e,pageParams:r}){var s;return e.length>0?(s=t.getPreviousPageParam)==null?void 0:s.call(t,e[0],e,r[0],r):void 0}var Qw,Vh,ul,i0,qh,yp,q9,Are=(q9=class extends GV{constructor(e){super();wr(this,qh);wr(this,Qw);wr(this,Vh);wr(this,ul);wr(this,i0);Yt(this,Qw,e.client),this.mutationId=e.mutationId,Yt(this,ul,e.mutationCache),Yt(this,Vh,[]),this.state=e.state||JV(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){Re(this,Vh).includes(e)||(Re(this,Vh).push(e),this.clearGcTimeout(),Re(this,ul).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Yt(this,Vh,Re(this,Vh).filter(r=>r!==e)),this.scheduleGc(),Re(this,ul).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){Re(this,Vh).length||(this.state.status==="pending"?this.scheduleGc():Re(this,ul).remove(this))}continue(){var e;return((e=Re(this,i0))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,l,d,h,f,m,x,b,j,N,w,C,T,O,I,P,A,R,B,V;const r=()=>{un(this,qh,yp).call(this,{type:"continue"})},s={client:Re(this,Qw),meta:this.options.meta,mutationKey:this.options.mutationKey};Yt(this,i0,KV({fn:()=>this.options.mutationFn?this.options.mutationFn(e,s):Promise.reject(new Error("No mutationFn found")),onFail:(X,ee)=>{un(this,qh,yp).call(this,{type:"failed",failureCount:X,error:ee})},onPause:()=>{un(this,qh,yp).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Re(this,ul).canRun(this)}));const a=this.state.status==="pending",i=!Re(this,i0).canStart();try{if(a)r();else{un(this,qh,yp).call(this,{type:"pending",variables:e,isPaused:i}),await((l=(o=Re(this,ul).config).onMutate)==null?void 0:l.call(o,e,this,s));const ee=await((h=(d=this.options).onMutate)==null?void 0:h.call(d,e,s));ee!==this.state.context&&un(this,qh,yp).call(this,{type:"pending",context:ee,variables:e,isPaused:i})}const X=await Re(this,i0).start();return await((m=(f=Re(this,ul).config).onSuccess)==null?void 0:m.call(f,X,e,this.state.context,this,s)),await((b=(x=this.options).onSuccess)==null?void 0:b.call(x,X,e,this.state.context,s)),await((N=(j=Re(this,ul).config).onSettled)==null?void 0:N.call(j,X,null,this.state.variables,this.state.context,this,s)),await((C=(w=this.options).onSettled)==null?void 0:C.call(w,X,null,e,this.state.context,s)),un(this,qh,yp).call(this,{type:"success",data:X}),X}catch(X){try{throw await((O=(T=Re(this,ul).config).onError)==null?void 0:O.call(T,X,e,this.state.context,this,s)),await((P=(I=this.options).onError)==null?void 0:P.call(I,X,e,this.state.context,s)),await((R=(A=Re(this,ul).config).onSettled)==null?void 0:R.call(A,void 0,X,this.state.variables,this.state.context,this,s)),await((V=(B=this.options).onSettled)==null?void 0:V.call(B,void 0,X,e,this.state.context,s)),X}finally{un(this,qh,yp).call(this,{type:"error",error:X})}}finally{Re(this,ul).runNext(this)}}},Qw=new WeakMap,Vh=new WeakMap,ul=new WeakMap,i0=new WeakMap,qh=new WeakSet,yp=function(e){const r=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),bi.batch(()=>{Re(this,Vh).forEach(s=>{s.onMutationUpdate(e)}),Re(this,ul).notify({mutation:this,type:"updated",action:e})})},q9);function JV(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var em,Tu,Jw,H9,_re=(H9=class extends Zy{constructor(e={}){super();wr(this,em);wr(this,Tu);wr(this,Jw);this.config=e,Yt(this,em,new Set),Yt(this,Tu,new Map),Yt(this,Jw,0)}build(e,r,s){const a=new Are({client:e,mutationCache:this,mutationId:++eN(this,Jw)._,options:e.defaultMutationOptions(r),state:s});return this.add(a),a}add(e){Re(this,em).add(e);const r=nN(e);if(typeof r=="string"){const s=Re(this,Tu).get(r);s?s.push(e):Re(this,Tu).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(Re(this,em).delete(e)){const r=nN(e);if(typeof r=="string"){const s=Re(this,Tu).get(r);if(s)if(s.length>1){const a=s.indexOf(e);a!==-1&&s.splice(a,1)}else s[0]===e&&Re(this,Tu).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=nN(e);if(typeof r=="string"){const s=Re(this,Tu).get(r),a=s==null?void 0:s.find(i=>i.state.status==="pending");return!a||a===e}else return!0}runNext(e){var s;const r=nN(e);if(typeof r=="string"){const a=(s=Re(this,Tu).get(r))==null?void 0:s.find(i=>i!==e&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){bi.batch(()=>{Re(this,em).forEach(e=>{this.notify({type:"removed",mutation:e})}),Re(this,em).clear(),Re(this,Tu).clear()})}getAll(){return Array.from(Re(this,em))}find(e){const r={exact:!0,...e};return this.getAll().find(s=>t6(r,s))}findAll(e={}){return this.getAll().filter(r=>t6(e,r))}notify(e){bi.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return bi.batch(()=>Promise.all(e.map(r=>r.continue().catch(fl))))}},em=new WeakMap,Tu=new WeakMap,Jw=new WeakMap,H9);function nN(t){var e;return(e=t.options.scope)==null?void 0:e.id}var tm,Pp,Kl,rm,ym,UN,Q3,W9,Ire=(W9=class extends Zy{constructor(r,s){super();wr(this,ym);wr(this,tm);wr(this,Pp);wr(this,Kl);wr(this,rm);Yt(this,tm,r),this.setOptions(s),this.bindMethods(),un(this,ym,UN).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const s=this.options;this.options=Re(this,tm).defaultMutationOptions(r),oj(this.options,s)||Re(this,tm).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Re(this,Kl),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&p0(s.mutationKey)!==p0(this.options.mutationKey)?this.reset():((a=Re(this,Kl))==null?void 0:a.state.status)==="pending"&&Re(this,Kl).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=Re(this,Kl))==null||r.removeObserver(this)}onMutationUpdate(r){un(this,ym,UN).call(this),un(this,ym,Q3).call(this,r)}getCurrentResult(){return Re(this,Pp)}reset(){var r;(r=Re(this,Kl))==null||r.removeObserver(this),Yt(this,Kl,void 0),un(this,ym,UN).call(this),un(this,ym,Q3).call(this)}mutate(r,s){var a;return Yt(this,rm,s),(a=Re(this,Kl))==null||a.removeObserver(this),Yt(this,Kl,Re(this,tm).getMutationCache().build(Re(this,tm),this.options)),Re(this,Kl).addObserver(this),Re(this,Kl).execute(r)}},tm=new WeakMap,Pp=new WeakMap,Kl=new WeakMap,rm=new WeakMap,ym=new WeakSet,UN=function(){var s;const r=((s=Re(this,Kl))==null?void 0:s.state)??JV();Yt(this,Pp,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},Q3=function(r){bi.batch(()=>{var s,a,i,o,l,d,h,f;if(Re(this,rm)&&this.hasListeners()){const m=Re(this,Pp).variables,x=Re(this,Pp).context,b={client:Re(this,tm),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((a=(s=Re(this,rm)).onSuccess)==null||a.call(s,r.data,m,x,b),(o=(i=Re(this,rm)).onSettled)==null||o.call(i,r.data,null,m,x,b)):(r==null?void 0:r.type)==="error"&&((d=(l=Re(this,rm)).onError)==null||d.call(l,r.error,m,x,b),(f=(h=Re(this,rm)).onSettled)==null||f.call(h,void 0,r.error,m,x,b))}this.listeners.forEach(m=>{m(Re(this,Pp))})})},W9),Hh,Y9,Mre=(Y9=class extends Zy{constructor(e={}){super();wr(this,Hh);this.config=e,Yt(this,Hh,new Map)}build(e,r,s){const a=r.queryKey,i=r.queryHash??hA(a,r);let o=this.get(i);return o||(o=new kre({client:e,queryKey:a,queryHash:i,options:e.defaultQueryOptions(r),state:s,defaultOptions:e.getQueryDefaults(a)}),this.add(o)),o}add(e){Re(this,Hh).has(e.queryHash)||(Re(this,Hh).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=Re(this,Hh).get(e.queryHash);r&&(e.destroy(),r===e&&Re(this,Hh).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){bi.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Re(this,Hh).get(e)}getAll(){return[...Re(this,Hh).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(s=>e6(r,s))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(s=>e6(e,s)):r}notify(e){bi.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){bi.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){bi.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Hh=new WeakMap,Y9),Aa,Ap,_p,dy,uy,Ip,hy,fy,K9,Ore=(K9=class{constructor(t={}){wr(this,Aa);wr(this,Ap);wr(this,_p);wr(this,dy);wr(this,uy);wr(this,Ip);wr(this,hy);wr(this,fy);Yt(this,Aa,t.queryCache||new Mre),Yt(this,Ap,t.mutationCache||new _re),Yt(this,_p,t.defaultOptions||{}),Yt(this,dy,new Map),Yt(this,uy,new Map),Yt(this,Ip,0)}mount(){eN(this,Ip)._++,Re(this,Ip)===1&&(Yt(this,hy,mA.subscribe(async t=>{t&&(await this.resumePausedMutations(),Re(this,Aa).onFocus())})),Yt(this,fy,lj.subscribe(async t=>{t&&(await this.resumePausedMutations(),Re(this,Aa).onOnline())})))}unmount(){var t,e;eN(this,Ip)._--,Re(this,Ip)===0&&((t=Re(this,hy))==null||t.call(this),Yt(this,hy,void 0),(e=Re(this,fy))==null||e.call(this),Yt(this,fy,void 0))}isFetching(t){return Re(this,Aa).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Re(this,Ap).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=Re(this,Aa).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=Re(this,Aa).build(this,e),s=r.state.data;return s===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime($p(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(s))}getQueriesData(t){return Re(this,Aa).findAll(t).map(({queryKey:e,state:r})=>{const s=r.data;return[e,s]})}setQueryData(t,e,r){const s=this.defaultQueryOptions({queryKey:t}),a=Re(this,Aa).get(s.queryHash),i=a==null?void 0:a.state.data,o=pre(e,i);if(o!==void 0)return Re(this,Aa).build(this,s).setData(o,{...r,manual:!0})}setQueriesData(t,e,r){return bi.batch(()=>Re(this,Aa).findAll(t).map(({queryKey:s})=>[s,this.setQueryData(s,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=Re(this,Aa).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=Re(this,Aa);bi.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=Re(this,Aa);return bi.batch(()=>(r.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},s=bi.batch(()=>Re(this,Aa).findAll(t).map(a=>a.cancel(r)));return Promise.all(s).then(fl).catch(fl)}invalidateQueries(t,e={}){return bi.batch(()=>(Re(this,Aa).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},s=bi.batch(()=>Re(this,Aa).findAll(t).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(fl)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(fl)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=Re(this,Aa).build(this,e);return r.isStaleByTime($p(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(fl).catch(fl)}fetchInfiniteQuery(t){return t.behavior=o6(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(fl).catch(fl)}ensureInfiniteQueryData(t){return t.behavior=o6(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return lj.isOnline()?Re(this,Ap).resumePausedMutations():Promise.resolve()}getQueryCache(){return Re(this,Aa)}getMutationCache(){return Re(this,Ap)}getDefaultOptions(){return Re(this,_p)}setDefaultOptions(t){Yt(this,_p,t)}setQueryDefaults(t,e){Re(this,dy).set(p0(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...Re(this,dy).values()],r={};return e.forEach(s=>{Fb(t,s.queryKey)&&Object.assign(r,s.defaultOptions)}),r}setMutationDefaults(t,e){Re(this,uy).set(p0(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...Re(this,uy).values()],r={};return e.forEach(s=>{Fb(t,s.mutationKey)&&Object.assign(r,s.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...Re(this,_p).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=hA(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===fA&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Re(this,_p).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Re(this,Aa).clear(),Re(this,Ap).clear()}},Aa=new WeakMap,Ap=new WeakMap,_p=new WeakMap,dy=new WeakMap,uy=new WeakMap,Ip=new WeakMap,hy=new WeakMap,fy=new WeakMap,K9),ZV=g.createContext(void 0),qu=t=>{const e=g.useContext(ZV);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Rre=({client:t,children:e})=>(g.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),n.jsx(ZV.Provider,{value:t,children:e})),eq=g.createContext(!1),Dre=()=>g.useContext(eq);eq.Provider;function $re(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Lre=g.createContext($re()),Fre=()=>g.useContext(Lre),Bre=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},Ure=t=>{g.useEffect(()=>{t.clearReset()},[t])},zre=({result:t,errorResetBoundary:e,throwOnError:r,query:s,suspense:a})=>t.isError&&!e.isReset()&&!t.isFetching&&s&&(a&&t.data===void 0||WV(r,[t.error,s])),Vre=t=>{if(t.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),s=t.staleTime;t.staleTime=typeof s=="function"?(...a)=>r(s(...a)):r(s),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},qre=(t,e)=>t.isLoading&&t.isFetching&&!e,Hre=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,c6=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function Wre(t,e,r){var m,x,b,j,N;const s=Dre(),a=Fre(),i=qu(),o=i.defaultQueryOptions(t);(x=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_beforeQuery)==null||x.call(m,o),o._optimisticResults=s?"isRestoring":"optimistic",Vre(o),Bre(o,a),Ure(a);const l=!i.getQueryCache().get(o.queryHash),[d]=g.useState(()=>new e(i,o)),h=d.getOptimisticResult(o),f=!s&&t.subscribed!==!1;if(g.useSyncExternalStore(g.useCallback(w=>{const C=f?d.subscribe(bi.batchCalls(w)):fl;return d.updateResult(),C},[d,f]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),g.useEffect(()=>{d.setOptions(o)},[o,d]),Hre(o,h))throw c6(o,d,a);if(zre({result:h,errorResetBoundary:a,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw h.error;if((j=(b=i.getDefaultOptions().queries)==null?void 0:b._experimental_afterQuery)==null||j.call(b,o,h),o.experimental_prefetchInRender&&!m0&&qre(h,s)){const w=l?c6(o,d,a):(N=i.getQueryCache().get(o.queryHash))==null?void 0:N.promise;w==null||w.catch(fl).finally(()=>{d.updateResult()})}return o.notifyOnChangeProps?h:d.trackResult(h)}function xn(t,e){return Wre(t,Cre)}function yo(t,e){const r=qu(),[s]=g.useState(()=>new Ire(r,t));g.useEffect(()=>{s.setOptions(t)},[s,t]);const a=g.useSyncExternalStore(g.useCallback(o=>s.subscribe(bi.batchCalls(o)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),i=g.useCallback((o,l)=>{s.mutate(o,l).catch(fl)},[s]);if(a.error&&WV(s.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}const tq="";async function rq(t){if(!t.ok){let e;try{const s=t.headers.get("content-type");if(s&&s.includes("application/json")){const a=await t.json();e=a.message||a.error||t.statusText}else e=await t.text()||t.statusText}catch{e=t.statusText}const r=new Error(e);throw r.status=t.status,r}}function Yre(t,e,r=3e4){return new Promise((s,a)=>{const i=setTimeout(()=>{a(new Error("Request timeout. Please check your connection and try again."))},r);fetch(t,e).then(o=>{clearTimeout(i),s(o)}).catch(o=>{clearTimeout(i),a(o)})})}async function Bp(t,e,r){let s,a,i;if(typeof t=="object"&&t.url)s=t.url,a=t.method,i=t.body;else if(typeof t=="string"&&e)a=t,s=e,i=r;else throw new Error("Invalid apiRequest parameters");const o=s.startsWith("http")?s:`${tq}${s}`;try{const l=await Yre(o,{method:a,headers:i?{"Content-Type":"application/json"}:{},body:i?JSON.stringify(i):void 0,credentials:"include"},3e4);return await rq(l),await l.json()}catch(l){if((l.status===401||l.status===403)&&(console.warn(" [API] Session expired, triggering background re-authentication..."),fetch("/api/angel-one/auto-connect",{method:"POST"}).catch(()=>{})),l.message&&l.message.includes("timeout")){const d=new Error("Connection timeout. The server is taking too long to respond. Please try again.");throw d.isTimeout=!0,d}else if(l.message&&(l.message.includes("Failed to fetch")||l.message.includes("NetworkError"))){const d=new Error("Network error. Please check your internet connection and try again.");throw d.isNetworkError=!0,d}else if(l.status)throw l;throw l}}const Kre=({on401:t})=>async({queryKey:e})=>{const r=e.join("/"),s=r.startsWith("http")?r:`${tq}${r}`,a=await fetch(s,{credentials:"include"});return await rq(a),await a.json()},Vi=new Ore({defaultOptions:{queries:{queryFn:Kre({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:1,retryDelay:1e3},mutations:{retry:2,retryDelay:t=>Math.min(1e3*2**t,5e3)}}}),Gre=1,Xre=1e6;let Lk=0;function Qre(){return Lk=(Lk+1)%Number.MAX_SAFE_INTEGER,Lk.toString()}const Fk=new Map,d6=t=>{if(Fk.has(t))return;const e=setTimeout(()=>{Fk.delete(t),xb({type:"REMOVE_TOAST",toastId:t})},Xre);Fk.set(t,e)},Jre=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,Gre)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===e.toast.id?{...r,...e.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=e;return r?d6(r):t.toasts.forEach(s=>{d6(s.id)}),{...t,toasts:t.toasts.map(s=>s.id===r||r===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==e.toastId)}}},zN=[];let VN={toasts:[]};function xb(t){VN=Jre(VN,t),zN.forEach(e=>{e(VN)})}function Zre({...t}){const e=Qre(),r=a=>xb({type:"UPDATE_TOAST",toast:{...a,id:e}}),s=()=>xb({type:"DISMISS_TOAST",toastId:e});return xb({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:a=>{a||s()}}}),{id:e,dismiss:s,update:r}}function Ia(){const[t,e]=g.useState(VN);return g.useEffect(()=>(zN.push(e),()=>{const r=zN.indexOf(e);r>-1&&zN.splice(r,1)}),[t]),{...t,toast:Zre,dismiss:r=>xb({type:"DISMISS_TOAST",toastId:r})}}var ev=IV();const ene=Hs(ev);function At(t,e,{checkForDefaultPrevented:r=!0}={}){return function(a){if(t==null||t(a),r===!1||!a.defaultPrevented)return e==null?void 0:e(a)}}function u6(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function vm(...t){return e=>{let r=!1;const s=t.map(a=>{const i=u6(a,e);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<s.length;a++){const i=s[a];typeof i=="function"?i():u6(t[a],null)}}}}function $n(...t){return g.useCallback(vm(...t),t)}function tne(t,e){const r=g.createContext(e),s=i=>{const{children:o,...l}=i,d=g.useMemo(()=>l,Object.values(l));return n.jsx(r.Provider,{value:d,children:o})};s.displayName=t+"Provider";function a(i){const o=g.useContext(r);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[s,a]}function Hc(t,e=[]){let r=[];function s(i,o){const l=g.createContext(o),d=r.length;r=[...r,o];const h=m=>{var C;const{scope:x,children:b,...j}=m,N=((C=x==null?void 0:x[t])==null?void 0:C[d])||l,w=g.useMemo(()=>j,Object.values(j));return n.jsx(N.Provider,{value:w,children:b})};h.displayName=i+"Provider";function f(m,x){var N;const b=((N=x==null?void 0:x[t])==null?void 0:N[d])||l,j=g.useContext(b);if(j)return j;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${i}\``)}return[h,f]}const a=()=>{const i=r.map(o=>g.createContext(o));return function(l){const d=(l==null?void 0:l[t])||i;return g.useMemo(()=>({[`__scope${t}`]:{...l,[t]:d}}),[l,d])}};return a.scopeName=t,[s,rne(a,...e)]}function rne(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const s=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=s.reduce((l,{useScope:d,scopeName:h})=>{const m=d(i)[`__scope${h}`];return{...l,...m}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}function Up(t){const e=sne(t),r=g.forwardRef((s,a)=>{const{children:i,...o}=s,l=g.Children.toArray(i),d=l.find(ine);if(d){const h=d.props.children,f=l.map(m=>m===d?g.Children.count(h)>1?g.Children.only(null):g.isValidElement(h)?h.props.children:null:m);return n.jsx(e,{...o,ref:a,children:g.isValidElement(h)?g.cloneElement(h,void 0,f):null})}return n.jsx(e,{...o,ref:a,children:i})});return r.displayName=`${t}.Slot`,r}var nne=Up("Slot");function sne(t){const e=g.forwardRef((r,s)=>{const{children:a,...i}=r;if(g.isValidElement(a)){const o=lne(a),l=one(i,a.props);return a.type!==g.Fragment&&(l.ref=s?vm(s,o):o),g.cloneElement(a,l)}return g.Children.count(a)>1?g.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var nq=Symbol("radix.slottable");function ane(t){const e=({children:r})=>n.jsx(n.Fragment,{children:r});return e.displayName=`${t}.Slottable`,e.__radixId=nq,e}function ine(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===nq}function one(t,e){const r={...e};for(const s in e){const a=t[s],i=e[s];/^on[A-Z]/.test(s)?a&&i?r[s]=(...l)=>{const d=i(...l);return a(...l),d}:a&&(r[s]=a):s==="style"?r[s]={...a,...i}:s==="className"&&(r[s]=[a,i].filter(Boolean).join(" "))}return{...t,...r}}function lne(t){var s,a;let e=(s=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function H2(t){const e=t+"CollectionProvider",[r,s]=Hc(e),[a,i]=r(e,{collectionRef:{current:null},itemMap:new Map}),o=N=>{const{scope:w,children:C}=N,T=$e.useRef(null),O=$e.useRef(new Map).current;return n.jsx(a,{scope:w,itemMap:O,collectionRef:T,children:C})};o.displayName=e;const l=t+"CollectionSlot",d=Up(l),h=$e.forwardRef((N,w)=>{const{scope:C,children:T}=N,O=i(l,C),I=$n(w,O.collectionRef);return n.jsx(d,{ref:I,children:T})});h.displayName=l;const f=t+"CollectionItemSlot",m="data-radix-collection-item",x=Up(f),b=$e.forwardRef((N,w)=>{const{scope:C,children:T,...O}=N,I=$e.useRef(null),P=$n(w,I),A=i(f,C);return $e.useEffect(()=>(A.itemMap.set(I,{ref:I,...O}),()=>void A.itemMap.delete(I))),n.jsx(x,{[m]:"",ref:P,children:T})});b.displayName=f;function j(N){const w=i(t+"CollectionConsumer",N);return $e.useCallback(()=>{const T=w.collectionRef.current;if(!T)return[];const O=Array.from(T.querySelectorAll(`[${m}]`));return Array.from(w.itemMap.values()).sort((A,R)=>O.indexOf(A.ref.current)-O.indexOf(R.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:o,Slot:h,ItemSlot:b},j,s]}var cne=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],lr=cne.reduce((t,e)=>{const r=Up(`Primitive.${e}`),s=g.forwardRef((a,i)=>{const{asChild:o,...l}=a,d=o?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(d,{...l,ref:i})});return s.displayName=`Primitive.${e}`,{...t,[e]:s}},{});function gA(t,e){t&&ev.flushSync(()=>t.dispatchEvent(e))}function yl(t){const e=g.useRef(t);return g.useEffect(()=>{e.current=t}),g.useMemo(()=>(...r)=>{var s;return(s=e.current)==null?void 0:s.call(e,...r)},[])}function dne(t,e=globalThis==null?void 0:globalThis.document){const r=yl(t);g.useEffect(()=>{const s=a=>{a.key==="Escape"&&r(a)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[r,e])}var une="DismissableLayer",J3="dismissableLayer.update",hne="dismissableLayer.pointerDownOutside",fne="dismissableLayer.focusOutside",h6,sq=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),L0=g.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...d}=t,h=g.useContext(sq),[f,m]=g.useState(null),x=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,b]=g.useState({}),j=$n(e,R=>m(R)),N=Array.from(h.layers),[w]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),C=N.indexOf(w),T=f?N.indexOf(f):-1,O=h.layersWithOutsidePointerEventsDisabled.size>0,I=T>=C,P=pne(R=>{const B=R.target,V=[...h.branches].some(X=>X.contains(B));!I||V||(a==null||a(R),o==null||o(R),R.defaultPrevented||l==null||l())},x),A=gne(R=>{const B=R.target;[...h.branches].some(X=>X.contains(B))||(i==null||i(R),o==null||o(R),R.defaultPrevented||l==null||l())},x);return dne(R=>{T===h.layers.size-1&&(s==null||s(R),!R.defaultPrevented&&l&&(R.preventDefault(),l()))},x),g.useEffect(()=>{if(f)return r&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(h6=x.body.style.pointerEvents,x.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(f)),h.layers.add(f),f6(),()=>{r&&h.layersWithOutsidePointerEventsDisabled.size===1&&(x.body.style.pointerEvents=h6)}},[f,x,r,h]),g.useEffect(()=>()=>{f&&(h.layers.delete(f),h.layersWithOutsidePointerEventsDisabled.delete(f),f6())},[f,h]),g.useEffect(()=>{const R=()=>b({});return document.addEventListener(J3,R),()=>document.removeEventListener(J3,R)},[]),n.jsx(lr.div,{...d,ref:j,style:{pointerEvents:O?I?"auto":"none":void 0,...t.style},onFocusCapture:At(t.onFocusCapture,A.onFocusCapture),onBlurCapture:At(t.onBlurCapture,A.onBlurCapture),onPointerDownCapture:At(t.onPointerDownCapture,P.onPointerDownCapture)})});L0.displayName=une;var mne="DismissableLayerBranch",aq=g.forwardRef((t,e)=>{const r=g.useContext(sq),s=g.useRef(null),a=$n(e,s);return g.useEffect(()=>{const i=s.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),n.jsx(lr.div,{...t,ref:a})});aq.displayName=mne;function pne(t,e=globalThis==null?void 0:globalThis.document){const r=yl(t),s=g.useRef(!1),a=g.useRef(()=>{});return g.useEffect(()=>{const i=l=>{if(l.target&&!s.current){let d=function(){iq(hne,r,h,{discrete:!0})};const h={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",a.current),a.current=d,e.addEventListener("click",a.current,{once:!0})):d()}else e.removeEventListener("click",a.current);s.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",a.current)}},[e,r]),{onPointerDownCapture:()=>s.current=!0}}function gne(t,e=globalThis==null?void 0:globalThis.document){const r=yl(t),s=g.useRef(!1);return g.useEffect(()=>{const a=i=>{i.target&&!s.current&&iq(fne,r,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",a),()=>e.removeEventListener("focusin",a)},[e,r]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function f6(){const t=new CustomEvent(J3);document.dispatchEvent(t)}function iq(t,e,r,{discrete:s}){const a=r.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&a.addEventListener(t,e,{once:!0}),s?gA(a,i):a.dispatchEvent(i)}var xne=L0,yne=aq,ii=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},vne="Portal",tv=g.forwardRef((t,e)=>{var l;const{container:r,...s}=t,[a,i]=g.useState(!1);ii(()=>i(!0),[]);const o=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?ene.createPortal(n.jsx(lr.div,{...s,ref:e}),o):null});tv.displayName=vne;function bne(t,e){return g.useReducer((r,s)=>e[r][s]??r,t)}var Wc=t=>{const{present:e,children:r}=t,s=wne(e),a=typeof r=="function"?r({present:s.isPresent}):g.Children.only(r),i=$n(s.ref,Nne(a));return typeof r=="function"||s.isPresent?g.cloneElement(a,{ref:i}):null};Wc.displayName="Presence";function wne(t){const[e,r]=g.useState(),s=g.useRef(null),a=g.useRef(t),i=g.useRef("none"),o=t?"mounted":"unmounted",[l,d]=bne(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const h=sN(s.current);i.current=l==="mounted"?h:"none"},[l]),ii(()=>{const h=s.current,f=a.current;if(f!==t){const x=i.current,b=sN(h);t?d("MOUNT"):b==="none"||(h==null?void 0:h.display)==="none"?d("UNMOUNT"):d(f&&x!==b?"ANIMATION_OUT":"UNMOUNT"),a.current=t}},[t,d]),ii(()=>{if(e){let h;const f=e.ownerDocument.defaultView??window,m=b=>{const N=sN(s.current).includes(CSS.escape(b.animationName));if(b.target===e&&N&&(d("ANIMATION_END"),!a.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",h=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},x=b=>{b.target===e&&(i.current=sN(s.current))};return e.addEventListener("animationstart",x),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{f.clearTimeout(h),e.removeEventListener("animationstart",x),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:g.useCallback(h=>{s.current=h?getComputedStyle(h):null,r(h)},[])}}function sN(t){return(t==null?void 0:t.animationName)||"none"}function Nne(t){var s,a;let e=(s=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var jne=lA[" useInsertionEffect ".trim().toString()]||ii;function bm({prop:t,defaultProp:e,onChange:r=()=>{},caller:s}){const[a,i,o]=Sne({defaultProp:e,onChange:r}),l=t!==void 0,d=l?t:a;{const f=g.useRef(t!==void 0);g.useEffect(()=>{const m=f.current;m!==l&&console.warn(`${s} is changing from ${m?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,s])}const h=g.useCallback(f=>{var m;if(l){const x=kne(f)?f(t):f;x!==t&&((m=o.current)==null||m.call(o,x))}else i(f)},[l,t,i,o]);return[d,h]}function Sne({defaultProp:t,onChange:e}){const[r,s]=g.useState(t),a=g.useRef(r),i=g.useRef(e);return jne(()=>{i.current=e},[e]),g.useEffect(()=>{var o;a.current!==r&&((o=i.current)==null||o.call(i,r),a.current=r)},[r,a]),[r,s,i]}function kne(t){return typeof t=="function"}var oq=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Cne="VisuallyHidden",W2=g.forwardRef((t,e)=>n.jsx(lr.span,{...t,ref:e,style:{...oq,...t.style}}));W2.displayName=Cne;var Ene=W2,xA="ToastProvider",[yA,Tne,Pne]=H2("Toast"),[lq]=Hc("Toast",[Pne]),[Ane,Y2]=lq(xA),cq=t=>{const{__scopeToast:e,label:r="Notification",duration:s=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=t,[l,d]=g.useState(null),[h,f]=g.useState(0),m=g.useRef(!1),x=g.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${xA}\`. Expected non-empty \`string\`.`),n.jsx(yA.Provider,{scope:e,children:n.jsx(Ane,{scope:e,label:r,duration:s,swipeDirection:a,swipeThreshold:i,toastCount:h,viewport:l,onViewportChange:d,onToastAdd:g.useCallback(()=>f(b=>b+1),[]),onToastRemove:g.useCallback(()=>f(b=>b-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:x,children:o})})};cq.displayName=xA;var dq="ToastViewport",_ne=["F8"],Z3="toast.viewportPause",eP="toast.viewportResume",uq=g.forwardRef((t,e)=>{const{__scopeToast:r,hotkey:s=_ne,label:a="Notifications ({hotkey})",...i}=t,o=Y2(dq,r),l=Tne(r),d=g.useRef(null),h=g.useRef(null),f=g.useRef(null),m=g.useRef(null),x=$n(e,m,o.onViewportChange),b=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),j=o.toastCount>0;g.useEffect(()=>{const w=C=>{var O;s.length!==0&&s.every(I=>C[I]||C.code===I)&&((O=m.current)==null||O.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[s]),g.useEffect(()=>{const w=d.current,C=m.current;if(j&&w&&C){const T=()=>{if(!o.isClosePausedRef.current){const A=new CustomEvent(Z3);C.dispatchEvent(A),o.isClosePausedRef.current=!0}},O=()=>{if(o.isClosePausedRef.current){const A=new CustomEvent(eP);C.dispatchEvent(A),o.isClosePausedRef.current=!1}},I=A=>{!w.contains(A.relatedTarget)&&O()},P=()=>{w.contains(document.activeElement)||O()};return w.addEventListener("focusin",T),w.addEventListener("focusout",I),w.addEventListener("pointermove",T),w.addEventListener("pointerleave",P),window.addEventListener("blur",T),window.addEventListener("focus",O),()=>{w.removeEventListener("focusin",T),w.removeEventListener("focusout",I),w.removeEventListener("pointermove",T),w.removeEventListener("pointerleave",P),window.removeEventListener("blur",T),window.removeEventListener("focus",O)}}},[j,o.isClosePausedRef]);const N=g.useCallback(({tabbingDirection:w})=>{const T=l().map(O=>{const I=O.ref.current,P=[I,...qne(I)];return w==="forwards"?P:P.reverse()});return(w==="forwards"?T.reverse():T).flat()},[l]);return g.useEffect(()=>{const w=m.current;if(w){const C=T=>{var P,A,R;const O=T.altKey||T.ctrlKey||T.metaKey;if(T.key==="Tab"&&!O){const B=document.activeElement,V=T.shiftKey;if(T.target===w&&V){(P=h.current)==null||P.focus();return}const Y=N({tabbingDirection:V?"backwards":"forwards"}),re=Y.findIndex(le=>le===B);Bk(Y.slice(re+1))?T.preventDefault():V?(A=h.current)==null||A.focus():(R=f.current)==null||R.focus()}};return w.addEventListener("keydown",C),()=>w.removeEventListener("keydown",C)}},[l,N]),n.jsxs(yne,{ref:d,role:"region","aria-label":a.replace("{hotkey}",b),tabIndex:-1,style:{pointerEvents:j?void 0:"none"},children:[j&&n.jsx(tP,{ref:h,onFocusFromOutsideViewport:()=>{const w=N({tabbingDirection:"forwards"});Bk(w)}}),n.jsx(yA.Slot,{scope:r,children:n.jsx(lr.ol,{tabIndex:-1,...i,ref:x})}),j&&n.jsx(tP,{ref:f,onFocusFromOutsideViewport:()=>{const w=N({tabbingDirection:"backwards"});Bk(w)}})]})});uq.displayName=dq;var hq="ToastFocusProxy",tP=g.forwardRef((t,e)=>{const{__scopeToast:r,onFocusFromOutsideViewport:s,...a}=t,i=Y2(hq,r);return n.jsx(W2,{tabIndex:0,...a,ref:e,style:{position:"fixed"},onFocus:o=>{var h;const l=o.relatedTarget;!((h=i.viewport)!=null&&h.contains(l))&&s()}})});tP.displayName=hq;var Zw="Toast",Ine="toast.swipeStart",Mne="toast.swipeMove",One="toast.swipeCancel",Rne="toast.swipeEnd",fq=g.forwardRef((t,e)=>{const{forceMount:r,open:s,defaultOpen:a,onOpenChange:i,...o}=t,[l,d]=bm({prop:s,defaultProp:a??!0,onChange:i,caller:Zw});return n.jsx(Wc,{present:r||l,children:n.jsx(Lne,{open:l,...o,ref:e,onClose:()=>d(!1),onPause:yl(t.onPause),onResume:yl(t.onResume),onSwipeStart:At(t.onSwipeStart,h=>{h.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:At(t.onSwipeMove,h=>{const{x:f,y:m}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","move"),h.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:At(t.onSwipeCancel,h=>{h.currentTarget.setAttribute("data-swipe","cancel"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:At(t.onSwipeEnd,h=>{const{x:f,y:m}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","end"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),d(!1)})})})});fq.displayName=Zw;var[Dne,$ne]=lq(Zw,{onClose(){}}),Lne=g.forwardRef((t,e)=>{const{__scopeToast:r,type:s="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:d,onResume:h,onSwipeStart:f,onSwipeMove:m,onSwipeCancel:x,onSwipeEnd:b,...j}=t,N=Y2(Zw,r),[w,C]=g.useState(null),T=$n(e,le=>C(le)),O=g.useRef(null),I=g.useRef(null),P=a||N.duration,A=g.useRef(0),R=g.useRef(P),B=g.useRef(0),{onToastAdd:V,onToastRemove:X}=N,ee=yl(()=>{var te;(w==null?void 0:w.contains(document.activeElement))&&((te=N.viewport)==null||te.focus()),o()}),Y=g.useCallback(le=>{!le||le===1/0||(window.clearTimeout(B.current),A.current=new Date().getTime(),B.current=window.setTimeout(ee,le))},[ee]);g.useEffect(()=>{const le=N.viewport;if(le){const te=()=>{Y(R.current),h==null||h()},de=()=>{const ie=new Date().getTime()-A.current;R.current=R.current-ie,window.clearTimeout(B.current),d==null||d()};return le.addEventListener(Z3,de),le.addEventListener(eP,te),()=>{le.removeEventListener(Z3,de),le.removeEventListener(eP,te)}}},[N.viewport,P,d,h,Y]),g.useEffect(()=>{i&&!N.isClosePausedRef.current&&Y(P)},[i,P,N.isClosePausedRef,Y]),g.useEffect(()=>(V(),()=>X()),[V,X]);const re=g.useMemo(()=>w?bq(w):null,[w]);return N.viewport?n.jsxs(n.Fragment,{children:[re&&n.jsx(Fne,{__scopeToast:r,role:"status","aria-live":s==="foreground"?"assertive":"polite",children:re}),n.jsx(Dne,{scope:r,onClose:ee,children:ev.createPortal(n.jsx(yA.ItemSlot,{scope:r,children:n.jsx(xne,{asChild:!0,onEscapeKeyDown:At(l,()=>{N.isFocusedToastEscapeKeyDownRef.current||ee(),N.isFocusedToastEscapeKeyDownRef.current=!1}),children:n.jsx(lr.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":N.swipeDirection,...j,ref:T,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:At(t.onKeyDown,le=>{le.key==="Escape"&&(l==null||l(le.nativeEvent),le.nativeEvent.defaultPrevented||(N.isFocusedToastEscapeKeyDownRef.current=!0,ee()))}),onPointerDown:At(t.onPointerDown,le=>{le.button===0&&(O.current={x:le.clientX,y:le.clientY})}),onPointerMove:At(t.onPointerMove,le=>{if(!O.current)return;const te=le.clientX-O.current.x,de=le.clientY-O.current.y,ie=!!I.current,Z=["left","right"].includes(N.swipeDirection),ne=["left","up"].includes(N.swipeDirection)?Math.min:Math.max,oe=Z?ne(0,te):0,U=Z?0:ne(0,de),W=le.pointerType==="touch"?10:2,be={x:oe,y:U},pe={originalEvent:le,delta:be};ie?(I.current=be,aN(Mne,m,pe,{discrete:!1})):m6(be,N.swipeDirection,W)?(I.current=be,aN(Ine,f,pe,{discrete:!1}),le.target.setPointerCapture(le.pointerId)):(Math.abs(te)>W||Math.abs(de)>W)&&(O.current=null)}),onPointerUp:At(t.onPointerUp,le=>{const te=I.current,de=le.target;if(de.hasPointerCapture(le.pointerId)&&de.releasePointerCapture(le.pointerId),I.current=null,O.current=null,te){const ie=le.currentTarget,Z={originalEvent:le,delta:te};m6(te,N.swipeDirection,N.swipeThreshold)?aN(Rne,b,Z,{discrete:!0}):aN(One,x,Z,{discrete:!0}),ie.addEventListener("click",ne=>ne.preventDefault(),{once:!0})}})})})}),N.viewport)})]}):null}),Fne=t=>{const{__scopeToast:e,children:r,...s}=t,a=Y2(Zw,e),[i,o]=g.useState(!1),[l,d]=g.useState(!1);return zne(()=>o(!0)),g.useEffect(()=>{const h=window.setTimeout(()=>d(!0),1e3);return()=>window.clearTimeout(h)},[]),l?null:n.jsx(tv,{asChild:!0,children:n.jsx(W2,{...s,children:i&&n.jsxs(n.Fragment,{children:[a.label," ",r]})})})},Bne="ToastTitle",mq=g.forwardRef((t,e)=>{const{__scopeToast:r,...s}=t;return n.jsx(lr.div,{...s,ref:e})});mq.displayName=Bne;var Une="ToastDescription",pq=g.forwardRef((t,e)=>{const{__scopeToast:r,...s}=t;return n.jsx(lr.div,{...s,ref:e})});pq.displayName=Une;var gq="ToastAction",xq=g.forwardRef((t,e)=>{const{altText:r,...s}=t;return r.trim()?n.jsx(vq,{altText:r,asChild:!0,children:n.jsx(vA,{...s,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${gq}\`. Expected non-empty \`string\`.`),null)});xq.displayName=gq;var yq="ToastClose",vA=g.forwardRef((t,e)=>{const{__scopeToast:r,...s}=t,a=$ne(yq,r);return n.jsx(vq,{asChild:!0,children:n.jsx(lr.button,{type:"button",...s,ref:e,onClick:At(t.onClick,a.onClose)})})});vA.displayName=yq;var vq=g.forwardRef((t,e)=>{const{__scopeToast:r,altText:s,...a}=t;return n.jsx(lr.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...a,ref:e})});function bq(t){const e=[];return Array.from(t.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&e.push(s.textContent),Vne(s)){const a=s.ariaHidden||s.hidden||s.style.display==="none",i=s.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=s.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...bq(s))}}),e}function aN(t,e,r,{discrete:s}){const a=r.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r});e&&a.addEventListener(t,e,{once:!0}),s?gA(a,i):a.dispatchEvent(i)}var m6=(t,e,r=0)=>{const s=Math.abs(t.x),a=Math.abs(t.y),i=s>a;return e==="left"||e==="right"?i&&s>r:!i&&a>r};function zne(t=()=>{}){const e=yl(t);ii(()=>{let r=0,s=0;return r=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(s)}},[e])}function Vne(t){return t.nodeType===t.ELEMENT_NODE}function qne(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function Bk(t){const e=document.activeElement;return t.some(r=>r===e?!0:(r.focus(),document.activeElement!==e))}var Hne=cq,wq=uq,Nq=fq,jq=mq,Sq=pq,kq=xq,Cq=vA;function Eq(t){var e,r,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=Eq(t[e]))&&(s&&(s+=" "),s+=r)}else for(r in t)t[r]&&(s&&(s+=" "),s+=r);return s}function jn(){for(var t,e,r=0,s="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=Eq(t))&&(s&&(s+=" "),s+=e);return s}const p6=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,g6=jn,K2=(t,e)=>r=>{var s;if((e==null?void 0:e.variants)==null)return g6(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=e,o=Object.keys(a).map(h=>{const f=r==null?void 0:r[h],m=i==null?void 0:i[h];if(f===null)return null;const x=p6(f)||p6(m);return a[h][x]}),l=r&&Object.entries(r).reduce((h,f)=>{let[m,x]=f;return x===void 0||(h[m]=x),h},{}),d=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((h,f)=>{let{class:m,className:x,...b}=f;return Object.entries(b).every(j=>{let[N,w]=j;return Array.isArray(w)?w.includes({...i,...l}[N]):{...i,...l}[N]===w})?[...h,m,x]:h},[]);return g6(t,o,d,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wne=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Tq=(...t)=>t.filter((e,r,s)=>!!e&&s.indexOf(e)===r).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Yne={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kne=g.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:a="",children:i,iconNode:o,...l},d)=>g.createElement("svg",{ref:d,...Yne,width:e,height:e,stroke:t,strokeWidth:s?Number(r)*24/Number(e):r,className:Tq("lucide",a),...l},[...o.map(([h,f])=>g.createElement(h,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=(t,e)=>{const r=g.forwardRef(({className:s,...a},i)=>g.createElement(Kne,{ref:i,iconNode:e,className:Tq(`lucide-${Wne(t)}`,s),...a}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jl=dt("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const my=dt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uk=dt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gne=dt("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pq=dt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=dt("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=dt("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xne=dt("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qne=dt("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x6=dt("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wm=dt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=dt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=dt("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hl=dt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mp=dt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Du=dt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zh=dt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bb=dt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yx=dt("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=dt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=dt("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jne=dt("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Np=dt("CircleDot",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zne=dt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sm=dt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ese=dt("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bi=dt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y6=dt("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aq=dt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zk=dt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gl=dt("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _q=dt("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=dt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o0=dt("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=dt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vk=dt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qk=dt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tse=dt("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bb=dt("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rse=dt("Hammer",[["path",{d:"m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9",key:"eefl8a"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"b7pghm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=dt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=dt("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iq=dt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nse=dt("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mq=dt("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sse=dt("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ase=dt("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=dt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=dt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rP=dt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oq=dt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ise=dt("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ose=dt("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l0=dt("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=dt("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lse=dt("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cse=dt("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nP=dt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dse=dt("Move",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=dt("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=dt("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=dt("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rq=dt("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ui=dt("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const use=dt("Plug",[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M9 8V2",key:"14iosj"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z",key:"osxo6l"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=dt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vg=dt("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=dt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v6=dt("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hse=dt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fse=dt("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mse=dt("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zl=dt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2=dt("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=dt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cb=dt("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dq=dt("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pse=dt("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ax=dt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hk=dt("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gse=dt("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xse=dt("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oc=dt("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bh=dt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b6=dt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sP=dt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w6=dt("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nm=dt("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=dt("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yse=dt("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wk=dt("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yk=dt("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=dt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=dt("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=dt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N6=dt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ac=dt("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vse=dt("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bse=dt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ub=dt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wb=dt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=dt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wse=dt("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nse=dt("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jse=dt("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=dt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=dt("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sse=dt("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kse=dt("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),jA="-",Cse=t=>{const e=Tse(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:s}=t;return{getClassGroupId:o=>{const l=o.split(jA);return l[0]===""&&l.length!==1&&l.shift(),$q(l,e)||Ese(o)},getConflictingClassGroupIds:(o,l)=>{const d=r[o]||[];return l&&s[o]?[...d,...s[o]]:d}}},$q=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const r=t[0],s=e.nextPart.get(r),a=s?$q(t.slice(1),s):void 0;if(a)return a;if(e.validators.length===0)return;const i=t.join(jA);return(o=e.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},j6=/^\[(.+)\]$/,Ese=t=>{if(j6.test(t)){const e=j6.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},Tse=t=>{const{theme:e,prefix:r}=t,s={nextPart:new Map,validators:[]};return Ase(Object.entries(t.classGroups),r).forEach(([i,o])=>{aP(o,s,i,e)}),s},aP=(t,e,r,s)=>{t.forEach(a=>{if(typeof a=="string"){const i=a===""?e:S6(e,a);i.classGroupId=r;return}if(typeof a=="function"){if(Pse(a)){aP(a(s),e,r,s);return}e.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,o])=>{aP(o,S6(e,i),r,s)})})},S6=(t,e)=>{let r=t;return e.split(jA).forEach(s=>{r.nextPart.has(s)||r.nextPart.set(s,{nextPart:new Map,validators:[]}),r=r.nextPart.get(s)}),r},Pse=t=>t.isThemeGetter,Ase=(t,e)=>e?t.map(([r,s])=>{const a=s.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[e+o,l])):i);return[r,a]}):t,_se=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,s=new Map;const a=(i,o)=>{r.set(i,o),e++,e>t&&(e=0,s=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=s.get(i))!==void 0)return a(i,o),o},set(i,o){r.has(i)?r.set(i,o):a(i,o)}}},Lq="!",Ise=t=>{const{separator:e,experimentalParseClassName:r}=t,s=e.length===1,a=e[0],i=e.length,o=l=>{const d=[];let h=0,f=0,m;for(let w=0;w<l.length;w++){let C=l[w];if(h===0){if(C===a&&(s||l.slice(w,w+i)===e)){d.push(l.slice(f,w)),f=w+i;continue}if(C==="/"){m=w;continue}}C==="["?h++:C==="]"&&h--}const x=d.length===0?l:l.substring(f),b=x.startsWith(Lq),j=b?x.substring(1):x,N=m&&m>f?m-f:void 0;return{modifiers:d,hasImportantModifier:b,baseClassName:j,maybePostfixModifierPosition:N}};return r?l=>r({className:l,parseClassName:o}):o},Mse=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(s=>{s[0]==="["?(e.push(...r.sort(),s),r=[]):r.push(s)}),e.push(...r.sort()),e},Ose=t=>({cache:_se(t.cacheSize),parseClassName:Ise(t),...Cse(t)}),Rse=/\s+/,Dse=(t,e)=>{const{parseClassName:r,getClassGroupId:s,getConflictingClassGroupIds:a}=e,i=[],o=t.trim().split(Rse);let l="";for(let d=o.length-1;d>=0;d-=1){const h=o[d],{modifiers:f,hasImportantModifier:m,baseClassName:x,maybePostfixModifierPosition:b}=r(h);let j=!!b,N=s(j?x.substring(0,b):x);if(!N){if(!j){l=h+(l.length>0?" "+l:l);continue}if(N=s(x),!N){l=h+(l.length>0?" "+l:l);continue}j=!1}const w=Mse(f).join(":"),C=m?w+Lq:w,T=C+N;if(i.includes(T))continue;i.push(T);const O=a(N,j);for(let I=0;I<O.length;++I){const P=O[I];i.push(C+P)}l=h+(l.length>0?" "+l:l)}return l};function $se(){let t=0,e,r,s="";for(;t<arguments.length;)(e=arguments[t++])&&(r=Fq(e))&&(s&&(s+=" "),s+=r);return s}const Fq=t=>{if(typeof t=="string")return t;let e,r="";for(let s=0;s<t.length;s++)t[s]&&(e=Fq(t[s]))&&(r&&(r+=" "),r+=e);return r};function Lse(t,...e){let r,s,a,i=o;function o(d){const h=e.reduce((f,m)=>m(f),t());return r=Ose(h),s=r.cache.get,a=r.cache.set,i=l,l(d)}function l(d){const h=s(d);if(h)return h;const f=Dse(d,r);return a(d,f),f}return function(){return i($se.apply(null,arguments))}}const aa=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},Bq=/^\[(?:([a-z-]+):)?(.+)\]$/i,Fse=/^\d+\/\d+$/,Bse=new Set(["px","full","screen"]),Use=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,zse=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Vse=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,qse=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Hse=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Wf=t=>Vx(t)||Bse.has(t)||Fse.test(t),mp=t=>nv(t,"length",Zse),Vx=t=>!!t&&!Number.isNaN(Number(t)),Kk=t=>nv(t,"number",Vx),Bv=t=>!!t&&Number.isInteger(Number(t)),Wse=t=>t.endsWith("%")&&Vx(t.slice(0,-1)),on=t=>Bq.test(t),pp=t=>Use.test(t),Yse=new Set(["length","size","percentage"]),Kse=t=>nv(t,Yse,Uq),Gse=t=>nv(t,"position",Uq),Xse=new Set(["image","url"]),Qse=t=>nv(t,Xse,tae),Jse=t=>nv(t,"",eae),Uv=()=>!0,nv=(t,e,r)=>{const s=Bq.exec(t);return s?s[1]?typeof e=="string"?s[1]===e:e.has(s[1]):r(s[2]):!1},Zse=t=>zse.test(t)&&!Vse.test(t),Uq=()=>!1,eae=t=>qse.test(t),tae=t=>Hse.test(t),rae=()=>{const t=aa("colors"),e=aa("spacing"),r=aa("blur"),s=aa("brightness"),a=aa("borderColor"),i=aa("borderRadius"),o=aa("borderSpacing"),l=aa("borderWidth"),d=aa("contrast"),h=aa("grayscale"),f=aa("hueRotate"),m=aa("invert"),x=aa("gap"),b=aa("gradientColorStops"),j=aa("gradientColorStopPositions"),N=aa("inset"),w=aa("margin"),C=aa("opacity"),T=aa("padding"),O=aa("saturate"),I=aa("scale"),P=aa("sepia"),A=aa("skew"),R=aa("space"),B=aa("translate"),V=()=>["auto","contain","none"],X=()=>["auto","hidden","clip","visible","scroll"],ee=()=>["auto",on,e],Y=()=>[on,e],re=()=>["",Wf,mp],le=()=>["auto",Vx,on],te=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],de=()=>["solid","dashed","dotted","double","none"],ie=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Z=()=>["start","end","center","between","around","evenly","stretch"],ne=()=>["","0",on],oe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],U=()=>[Vx,on];return{cacheSize:500,separator:":",theme:{colors:[Uv],spacing:[Wf,mp],blur:["none","",pp,on],brightness:U(),borderColor:[t],borderRadius:["none","","full",pp,on],borderSpacing:Y(),borderWidth:re(),contrast:U(),grayscale:ne(),hueRotate:U(),invert:ne(),gap:Y(),gradientColorStops:[t],gradientColorStopPositions:[Wse,mp],inset:ee(),margin:ee(),opacity:U(),padding:Y(),saturate:U(),scale:U(),sepia:ne(),skew:U(),space:Y(),translate:Y()},classGroups:{aspect:[{aspect:["auto","square","video",on]}],container:["container"],columns:[{columns:[pp]}],"break-after":[{"break-after":oe()}],"break-before":[{"break-before":oe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...te(),on]}],overflow:[{overflow:X()}],"overflow-x":[{"overflow-x":X()}],"overflow-y":[{"overflow-y":X()}],overscroll:[{overscroll:V()}],"overscroll-x":[{"overscroll-x":V()}],"overscroll-y":[{"overscroll-y":V()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[N]}],"inset-x":[{"inset-x":[N]}],"inset-y":[{"inset-y":[N]}],start:[{start:[N]}],end:[{end:[N]}],top:[{top:[N]}],right:[{right:[N]}],bottom:[{bottom:[N]}],left:[{left:[N]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Bv,on]}],basis:[{basis:ee()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",on]}],grow:[{grow:ne()}],shrink:[{shrink:ne()}],order:[{order:["first","last","none",Bv,on]}],"grid-cols":[{"grid-cols":[Uv]}],"col-start-end":[{col:["auto",{span:["full",Bv,on]},on]}],"col-start":[{"col-start":le()}],"col-end":[{"col-end":le()}],"grid-rows":[{"grid-rows":[Uv]}],"row-start-end":[{row:["auto",{span:[Bv,on]},on]}],"row-start":[{"row-start":le()}],"row-end":[{"row-end":le()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",on]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",on]}],gap:[{gap:[x]}],"gap-x":[{"gap-x":[x]}],"gap-y":[{"gap-y":[x]}],"justify-content":[{justify:["normal",...Z()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Z(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Z(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[T]}],px:[{px:[T]}],py:[{py:[T]}],ps:[{ps:[T]}],pe:[{pe:[T]}],pt:[{pt:[T]}],pr:[{pr:[T]}],pb:[{pb:[T]}],pl:[{pl:[T]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[R]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[R]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",on,e]}],"min-w":[{"min-w":[on,e,"min","max","fit"]}],"max-w":[{"max-w":[on,e,"none","full","min","max","fit","prose",{screen:[pp]},pp]}],h:[{h:[on,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[on,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[on,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[on,e,"auto","min","max","fit"]}],"font-size":[{text:["base",pp,mp]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Kk]}],"font-family":[{font:[Uv]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",on]}],"line-clamp":[{"line-clamp":["none",Vx,Kk]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Wf,on]}],"list-image":[{"list-image":["none",on]}],"list-style-type":[{list:["none","disc","decimal",on]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[C]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[C]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...de(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Wf,mp]}],"underline-offset":[{"underline-offset":["auto",Wf,on]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Y()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",on]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",on]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[C]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...te(),Gse]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Kse]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Qse]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[j]}],"gradient-via-pos":[{via:[j]}],"gradient-to-pos":[{to:[j]}],"gradient-from":[{from:[b]}],"gradient-via":[{via:[b]}],"gradient-to":[{to:[b]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[C]}],"border-style":[{border:[...de(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[C]}],"divide-style":[{divide:de()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...de()]}],"outline-offset":[{"outline-offset":[Wf,on]}],"outline-w":[{outline:[Wf,mp]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:re()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[C]}],"ring-offset-w":[{"ring-offset":[Wf,mp]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",pp,Jse]}],"shadow-color":[{shadow:[Uv]}],opacity:[{opacity:[C]}],"mix-blend":[{"mix-blend":[...ie(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ie()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[s]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",pp,on]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[m]}],saturate:[{saturate:[O]}],sepia:[{sepia:[P]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[C]}],"backdrop-saturate":[{"backdrop-saturate":[O]}],"backdrop-sepia":[{"backdrop-sepia":[P]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",on]}],duration:[{duration:U()}],ease:[{ease:["linear","in","out","in-out",on]}],delay:[{delay:U()}],animate:[{animate:["none","spin","ping","pulse","bounce",on]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[I]}],"scale-x":[{"scale-x":[I]}],"scale-y":[{"scale-y":[I]}],rotate:[{rotate:[Bv,on]}],"translate-x":[{"translate-x":[B]}],"translate-y":[{"translate-y":[B]}],"skew-x":[{"skew-x":[A]}],"skew-y":[{"skew-y":[A]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",on]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",on]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Y()}],"scroll-mx":[{"scroll-mx":Y()}],"scroll-my":[{"scroll-my":Y()}],"scroll-ms":[{"scroll-ms":Y()}],"scroll-me":[{"scroll-me":Y()}],"scroll-mt":[{"scroll-mt":Y()}],"scroll-mr":[{"scroll-mr":Y()}],"scroll-mb":[{"scroll-mb":Y()}],"scroll-ml":[{"scroll-ml":Y()}],"scroll-p":[{"scroll-p":Y()}],"scroll-px":[{"scroll-px":Y()}],"scroll-py":[{"scroll-py":Y()}],"scroll-ps":[{"scroll-ps":Y()}],"scroll-pe":[{"scroll-pe":Y()}],"scroll-pt":[{"scroll-pt":Y()}],"scroll-pr":[{"scroll-pr":Y()}],"scroll-pb":[{"scroll-pb":Y()}],"scroll-pl":[{"scroll-pl":Y()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",on]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Wf,mp,Kk]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},nae=Lse(rae);function Ht(...t){return nae(jn(t))}const sae=Hne,zq=g.forwardRef(({className:t,...e},r)=>n.jsx(wq,{ref:r,className:Ht("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));zq.displayName=wq.displayName;const aae=K2("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Vq=g.forwardRef(({className:t,variant:e,...r},s)=>n.jsx(Nq,{ref:s,className:Ht(aae({variant:e}),t),...r}));Vq.displayName=Nq.displayName;const iae=g.forwardRef(({className:t,...e},r)=>n.jsx(kq,{ref:r,className:Ht("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));iae.displayName=kq.displayName;const qq=g.forwardRef(({className:t,...e},r)=>n.jsx(Cq,{ref:r,className:Ht("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:n.jsx(Wr,{className:"h-4 w-4"})}));qq.displayName=Cq.displayName;const Hq=g.forwardRef(({className:t,...e},r)=>n.jsx(jq,{ref:r,className:Ht("text-sm font-semibold",t),...e}));Hq.displayName=jq.displayName;const Wq=g.forwardRef(({className:t,...e},r)=>n.jsx(Sq,{ref:r,className:Ht("text-sm opacity-90",t),...e}));Wq.displayName=Sq.displayName;function oae(){const{toasts:t}=Ia();return n.jsxs(sae,{children:[t.map(function({id:e,title:r,description:s,action:a,...i}){return n.jsxs(Vq,{...i,children:[n.jsxs("div",{className:"grid gap-1",children:[r&&n.jsx(Hq,{children:r}),s&&n.jsx(Wq,{children:s})]}),a,n.jsx(qq,{})]},e)}),n.jsx(zq,{})]})}var lae=lA[" useId ".trim().toString()]||(()=>{}),cae=0;function wo(t){const[e,r]=g.useState(lae());return ii(()=>{r(s=>s??String(cae++))},[t]),e?`radix-${e}`:""}const dae=["top","right","bottom","left"],zp=Math.min,Dc=Math.max,hj=Math.round,oN=Math.floor,ef=t=>({x:t,y:t}),uae={left:"right",right:"left",bottom:"top",top:"bottom"},hae={start:"end",end:"start"};function iP(t,e,r){return Dc(t,zp(e,r))}function Nm(t,e){return typeof t=="function"?t(e):t}function jm(t){return t.split("-")[0]}function sv(t){return t.split("-")[1]}function SA(t){return t==="x"?"y":"x"}function kA(t){return t==="y"?"height":"width"}const fae=new Set(["top","bottom"]);function Xh(t){return fae.has(jm(t))?"y":"x"}function CA(t){return SA(Xh(t))}function mae(t,e,r){r===void 0&&(r=!1);const s=sv(t),a=CA(t),i=kA(a);let o=a==="x"?s===(r?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=fj(o)),[o,fj(o)]}function pae(t){const e=fj(t);return[oP(t),e,oP(e)]}function oP(t){return t.replace(/start|end/g,e=>hae[e])}const k6=["left","right"],C6=["right","left"],gae=["top","bottom"],xae=["bottom","top"];function yae(t,e,r){switch(t){case"top":case"bottom":return r?e?C6:k6:e?k6:C6;case"left":case"right":return e?gae:xae;default:return[]}}function vae(t,e,r,s){const a=sv(t);let i=yae(jm(t),r==="start",s);return a&&(i=i.map(o=>o+"-"+a),e&&(i=i.concat(i.map(oP)))),i}function fj(t){return t.replace(/left|right|bottom|top/g,e=>uae[e])}function bae(t){return{top:0,right:0,bottom:0,left:0,...t}}function Yq(t){return typeof t!="number"?bae(t):{top:t,right:t,bottom:t,left:t}}function mj(t){const{x:e,y:r,width:s,height:a}=t;return{width:s,height:a,top:r,left:e,right:e+s,bottom:r+a,x:e,y:r}}function E6(t,e,r){let{reference:s,floating:a}=t;const i=Xh(e),o=CA(e),l=kA(o),d=jm(e),h=i==="y",f=s.x+s.width/2-a.width/2,m=s.y+s.height/2-a.height/2,x=s[l]/2-a[l]/2;let b;switch(d){case"top":b={x:f,y:s.y-a.height};break;case"bottom":b={x:f,y:s.y+s.height};break;case"right":b={x:s.x+s.width,y:m};break;case"left":b={x:s.x-a.width,y:m};break;default:b={x:s.x,y:s.y}}switch(sv(e)){case"start":b[o]-=x*(r&&h?-1:1);break;case"end":b[o]+=x*(r&&h?-1:1);break}return b}const wae=async(t,e,r)=>{const{placement:s="bottom",strategy:a="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),d=await(o.isRTL==null?void 0:o.isRTL(e));let h=await o.getElementRects({reference:t,floating:e,strategy:a}),{x:f,y:m}=E6(h,s,d),x=s,b={},j=0;for(let N=0;N<l.length;N++){const{name:w,fn:C}=l[N],{x:T,y:O,data:I,reset:P}=await C({x:f,y:m,initialPlacement:s,placement:x,strategy:a,middlewareData:b,rects:h,platform:o,elements:{reference:t,floating:e}});f=T??f,m=O??m,b={...b,[w]:{...b[w],...I}},P&&j<=50&&(j++,typeof P=="object"&&(P.placement&&(x=P.placement),P.rects&&(h=P.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:a}):P.rects),{x:f,y:m}=E6(h,x,d)),N=-1)}return{x:f,y:m,placement:x,strategy:a,middlewareData:b}};async function zb(t,e){var r;e===void 0&&(e={});const{x:s,y:a,platform:i,rects:o,elements:l,strategy:d}=t,{boundary:h="clippingAncestors",rootBoundary:f="viewport",elementContext:m="floating",altBoundary:x=!1,padding:b=0}=Nm(e,t),j=Yq(b),w=l[x?m==="floating"?"reference":"floating":m],C=mj(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(w)))==null||r?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:h,rootBoundary:f,strategy:d})),T=m==="floating"?{x:s,y:a,width:o.floating.width,height:o.floating.height}:o.reference,O=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),I=await(i.isElement==null?void 0:i.isElement(O))?await(i.getScale==null?void 0:i.getScale(O))||{x:1,y:1}:{x:1,y:1},P=mj(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:T,offsetParent:O,strategy:d}):T);return{top:(C.top-P.top+j.top)/I.y,bottom:(P.bottom-C.bottom+j.bottom)/I.y,left:(C.left-P.left+j.left)/I.x,right:(P.right-C.right+j.right)/I.x}}const Nae=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:s,placement:a,rects:i,platform:o,elements:l,middlewareData:d}=e,{element:h,padding:f=0}=Nm(t,e)||{};if(h==null)return{};const m=Yq(f),x={x:r,y:s},b=CA(a),j=kA(b),N=await o.getDimensions(h),w=b==="y",C=w?"top":"left",T=w?"bottom":"right",O=w?"clientHeight":"clientWidth",I=i.reference[j]+i.reference[b]-x[b]-i.floating[j],P=x[b]-i.reference[b],A=await(o.getOffsetParent==null?void 0:o.getOffsetParent(h));let R=A?A[O]:0;(!R||!await(o.isElement==null?void 0:o.isElement(A)))&&(R=l.floating[O]||i.floating[j]);const B=I/2-P/2,V=R/2-N[j]/2-1,X=zp(m[C],V),ee=zp(m[T],V),Y=X,re=R-N[j]-ee,le=R/2-N[j]/2+B,te=iP(Y,le,re),de=!d.arrow&&sv(a)!=null&&le!==te&&i.reference[j]/2-(le<Y?X:ee)-N[j]/2<0,ie=de?le<Y?le-Y:le-re:0;return{[b]:x[b]+ie,data:{[b]:te,centerOffset:le-te-ie,...de&&{alignmentOffset:ie}},reset:de}}}),jae=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,s;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:d,elements:h}=e,{mainAxis:f=!0,crossAxis:m=!0,fallbackPlacements:x,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:j="none",flipAlignment:N=!0,...w}=Nm(t,e);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const C=jm(a),T=Xh(l),O=jm(l)===l,I=await(d.isRTL==null?void 0:d.isRTL(h.floating)),P=x||(O||!N?[fj(l)]:pae(l)),A=j!=="none";!x&&A&&P.push(...vae(l,N,j,I));const R=[l,...P],B=await zb(e,w),V=[];let X=((s=i.flip)==null?void 0:s.overflows)||[];if(f&&V.push(B[C]),m){const le=mae(a,o,I);V.push(B[le[0]],B[le[1]])}if(X=[...X,{placement:a,overflows:V}],!V.every(le=>le<=0)){var ee,Y;const le=(((ee=i.flip)==null?void 0:ee.index)||0)+1,te=R[le];if(te&&(!(m==="alignment"?T!==Xh(te):!1)||X.every(Z=>Xh(Z.placement)===T?Z.overflows[0]>0:!0)))return{data:{index:le,overflows:X},reset:{placement:te}};let de=(Y=X.filter(ie=>ie.overflows[0]<=0).sort((ie,Z)=>ie.overflows[1]-Z.overflows[1])[0])==null?void 0:Y.placement;if(!de)switch(b){case"bestFit":{var re;const ie=(re=X.filter(Z=>{if(A){const ne=Xh(Z.placement);return ne===T||ne==="y"}return!0}).map(Z=>[Z.placement,Z.overflows.filter(ne=>ne>0).reduce((ne,oe)=>ne+oe,0)]).sort((Z,ne)=>Z[1]-ne[1])[0])==null?void 0:re[0];ie&&(de=ie);break}case"initialPlacement":de=l;break}if(a!==de)return{reset:{placement:de}}}return{}}}};function T6(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function P6(t){return dae.some(e=>t[e]>=0)}const Sae=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:s="referenceHidden",...a}=Nm(t,e);switch(s){case"referenceHidden":{const i=await zb(e,{...a,elementContext:"reference"}),o=T6(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:P6(o)}}}case"escaped":{const i=await zb(e,{...a,altBoundary:!0}),o=T6(i,r.floating);return{data:{escapedOffsets:o,escaped:P6(o)}}}default:return{}}}}},Kq=new Set(["left","top"]);async function kae(t,e){const{placement:r,platform:s,elements:a}=t,i=await(s.isRTL==null?void 0:s.isRTL(a.floating)),o=jm(r),l=sv(r),d=Xh(r)==="y",h=Kq.has(o)?-1:1,f=i&&d?-1:1,m=Nm(e,t);let{mainAxis:x,crossAxis:b,alignmentAxis:j}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof j=="number"&&(b=l==="end"?j*-1:j),d?{x:b*f,y:x*h}:{x:x*h,y:b*f}}const Cae=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,s;const{x:a,y:i,placement:o,middlewareData:l}=e,d=await kae(e,t);return o===((r=l.offset)==null?void 0:r.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:a+d.x,y:i+d.y,data:{...d,placement:o}}}}},Eae=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:s,placement:a}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:w=>{let{x:C,y:T}=w;return{x:C,y:T}}},...d}=Nm(t,e),h={x:r,y:s},f=await zb(e,d),m=Xh(jm(a)),x=SA(m);let b=h[x],j=h[m];if(i){const w=x==="y"?"top":"left",C=x==="y"?"bottom":"right",T=b+f[w],O=b-f[C];b=iP(T,b,O)}if(o){const w=m==="y"?"top":"left",C=m==="y"?"bottom":"right",T=j+f[w],O=j-f[C];j=iP(T,j,O)}const N=l.fn({...e,[x]:b,[m]:j});return{...N,data:{x:N.x-r,y:N.y-s,enabled:{[x]:i,[m]:o}}}}}},Tae=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:s,placement:a,rects:i,middlewareData:o}=e,{offset:l=0,mainAxis:d=!0,crossAxis:h=!0}=Nm(t,e),f={x:r,y:s},m=Xh(a),x=SA(m);let b=f[x],j=f[m];const N=Nm(l,e),w=typeof N=="number"?{mainAxis:N,crossAxis:0}:{mainAxis:0,crossAxis:0,...N};if(d){const O=x==="y"?"height":"width",I=i.reference[x]-i.floating[O]+w.mainAxis,P=i.reference[x]+i.reference[O]-w.mainAxis;b<I?b=I:b>P&&(b=P)}if(h){var C,T;const O=x==="y"?"width":"height",I=Kq.has(jm(a)),P=i.reference[m]-i.floating[O]+(I&&((C=o.offset)==null?void 0:C[m])||0)+(I?0:w.crossAxis),A=i.reference[m]+i.reference[O]+(I?0:((T=o.offset)==null?void 0:T[m])||0)-(I?w.crossAxis:0);j<P?j=P:j>A&&(j=A)}return{[x]:b,[m]:j}}}},Pae=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,s;const{placement:a,rects:i,platform:o,elements:l}=e,{apply:d=()=>{},...h}=Nm(t,e),f=await zb(e,h),m=jm(a),x=sv(a),b=Xh(a)==="y",{width:j,height:N}=i.floating;let w,C;m==="top"||m==="bottom"?(w=m,C=x===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(C=m,w=x==="end"?"top":"bottom");const T=N-f.top-f.bottom,O=j-f.left-f.right,I=zp(N-f[w],T),P=zp(j-f[C],O),A=!e.middlewareData.shift;let R=I,B=P;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(B=O),(s=e.middlewareData.shift)!=null&&s.enabled.y&&(R=T),A&&!x){const X=Dc(f.left,0),ee=Dc(f.right,0),Y=Dc(f.top,0),re=Dc(f.bottom,0);b?B=j-2*(X!==0||ee!==0?X+ee:Dc(f.left,f.right)):R=N-2*(Y!==0||re!==0?Y+re:Dc(f.top,f.bottom))}await d({...e,availableWidth:B,availableHeight:R});const V=await o.getDimensions(l.floating);return j!==V.width||N!==V.height?{reset:{rects:!0}}:{}}}};function Q2(){return typeof window<"u"}function av(t){return Gq(t)?(t.nodeName||"").toLowerCase():"#document"}function Uc(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ff(t){var e;return(e=(Gq(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Gq(t){return Q2()?t instanceof Node||t instanceof Uc(t).Node:!1}function Bu(t){return Q2()?t instanceof Element||t instanceof Uc(t).Element:!1}function of(t){return Q2()?t instanceof HTMLElement||t instanceof Uc(t).HTMLElement:!1}function A6(t){return!Q2()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Uc(t).ShadowRoot}const Aae=new Set(["inline","contents"]);function e1(t){const{overflow:e,overflowX:r,overflowY:s,display:a}=Uu(t);return/auto|scroll|overlay|hidden|clip/.test(e+s+r)&&!Aae.has(a)}const _ae=new Set(["table","td","th"]);function Iae(t){return _ae.has(av(t))}const Mae=[":popover-open",":modal"];function J2(t){return Mae.some(e=>{try{return t.matches(e)}catch{return!1}})}const Oae=["transform","translate","scale","rotate","perspective"],Rae=["transform","translate","scale","rotate","perspective","filter"],Dae=["paint","layout","strict","content"];function EA(t){const e=TA(),r=Bu(t)?Uu(t):t;return Oae.some(s=>r[s]?r[s]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||Rae.some(s=>(r.willChange||"").includes(s))||Dae.some(s=>(r.contain||"").includes(s))}function $ae(t){let e=Vp(t);for(;of(e)&&!py(e);){if(EA(e))return e;if(J2(e))return null;e=Vp(e)}return null}function TA(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Lae=new Set(["html","body","#document"]);function py(t){return Lae.has(av(t))}function Uu(t){return Uc(t).getComputedStyle(t)}function Z2(t){return Bu(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Vp(t){if(av(t)==="html")return t;const e=t.assignedSlot||t.parentNode||A6(t)&&t.host||ff(t);return A6(e)?e.host:e}function Xq(t){const e=Vp(t);return py(e)?t.ownerDocument?t.ownerDocument.body:t.body:of(e)&&e1(e)?e:Xq(e)}function Vb(t,e,r){var s;e===void 0&&(e=[]),r===void 0&&(r=!0);const a=Xq(t),i=a===((s=t.ownerDocument)==null?void 0:s.body),o=Uc(a);if(i){const l=lP(o);return e.concat(o,o.visualViewport||[],e1(a)?a:[],l&&r?Vb(l):[])}return e.concat(a,Vb(a,[],r))}function lP(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Qq(t){const e=Uu(t);let r=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const a=of(t),i=a?t.offsetWidth:r,o=a?t.offsetHeight:s,l=hj(r)!==i||hj(s)!==o;return l&&(r=i,s=o),{width:r,height:s,$:l}}function PA(t){return Bu(t)?t:t.contextElement}function qx(t){const e=PA(t);if(!of(e))return ef(1);const r=e.getBoundingClientRect(),{width:s,height:a,$:i}=Qq(e);let o=(i?hj(r.width):r.width)/s,l=(i?hj(r.height):r.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const Fae=ef(0);function Jq(t){const e=Uc(t);return!TA()||!e.visualViewport?Fae:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Bae(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==Uc(t)?!1:e}function g0(t,e,r,s){e===void 0&&(e=!1),r===void 0&&(r=!1);const a=t.getBoundingClientRect(),i=PA(t);let o=ef(1);e&&(s?Bu(s)&&(o=qx(s)):o=qx(t));const l=Bae(i,r,s)?Jq(i):ef(0);let d=(a.left+l.x)/o.x,h=(a.top+l.y)/o.y,f=a.width/o.x,m=a.height/o.y;if(i){const x=Uc(i),b=s&&Bu(s)?Uc(s):s;let j=x,N=lP(j);for(;N&&s&&b!==j;){const w=qx(N),C=N.getBoundingClientRect(),T=Uu(N),O=C.left+(N.clientLeft+parseFloat(T.paddingLeft))*w.x,I=C.top+(N.clientTop+parseFloat(T.paddingTop))*w.y;d*=w.x,h*=w.y,f*=w.x,m*=w.y,d+=O,h+=I,j=Uc(N),N=lP(j)}}return mj({width:f,height:m,x:d,y:h})}function eS(t,e){const r=Z2(t).scrollLeft;return e?e.left+r:g0(ff(t)).left+r}function Zq(t,e){const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-eS(t,r),a=r.top+e.scrollTop;return{x:s,y:a}}function Uae(t){let{elements:e,rect:r,offsetParent:s,strategy:a}=t;const i=a==="fixed",o=ff(s),l=e?J2(e.floating):!1;if(s===o||l&&i)return r;let d={scrollLeft:0,scrollTop:0},h=ef(1);const f=ef(0),m=of(s);if((m||!m&&!i)&&((av(s)!=="body"||e1(o))&&(d=Z2(s)),of(s))){const b=g0(s);h=qx(s),f.x=b.x+s.clientLeft,f.y=b.y+s.clientTop}const x=o&&!m&&!i?Zq(o,d):ef(0);return{width:r.width*h.x,height:r.height*h.y,x:r.x*h.x-d.scrollLeft*h.x+f.x+x.x,y:r.y*h.y-d.scrollTop*h.y+f.y+x.y}}function zae(t){return Array.from(t.getClientRects())}function Vae(t){const e=ff(t),r=Z2(t),s=t.ownerDocument.body,a=Dc(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),i=Dc(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let o=-r.scrollLeft+eS(t);const l=-r.scrollTop;return Uu(s).direction==="rtl"&&(o+=Dc(e.clientWidth,s.clientWidth)-a),{width:a,height:i,x:o,y:l}}const _6=25;function qae(t,e){const r=Uc(t),s=ff(t),a=r.visualViewport;let i=s.clientWidth,o=s.clientHeight,l=0,d=0;if(a){i=a.width,o=a.height;const f=TA();(!f||f&&e==="fixed")&&(l=a.offsetLeft,d=a.offsetTop)}const h=eS(s);if(h<=0){const f=s.ownerDocument,m=f.body,x=getComputedStyle(m),b=f.compatMode==="CSS1Compat"&&parseFloat(x.marginLeft)+parseFloat(x.marginRight)||0,j=Math.abs(s.clientWidth-m.clientWidth-b);j<=_6&&(i-=j)}else h<=_6&&(i+=h);return{width:i,height:o,x:l,y:d}}const Hae=new Set(["absolute","fixed"]);function Wae(t,e){const r=g0(t,!0,e==="fixed"),s=r.top+t.clientTop,a=r.left+t.clientLeft,i=of(t)?qx(t):ef(1),o=t.clientWidth*i.x,l=t.clientHeight*i.y,d=a*i.x,h=s*i.y;return{width:o,height:l,x:d,y:h}}function I6(t,e,r){let s;if(e==="viewport")s=qae(t,r);else if(e==="document")s=Vae(ff(t));else if(Bu(e))s=Wae(e,r);else{const a=Jq(t);s={x:e.x-a.x,y:e.y-a.y,width:e.width,height:e.height}}return mj(s)}function eH(t,e){const r=Vp(t);return r===e||!Bu(r)||py(r)?!1:Uu(r).position==="fixed"||eH(r,e)}function Yae(t,e){const r=e.get(t);if(r)return r;let s=Vb(t,[],!1).filter(l=>Bu(l)&&av(l)!=="body"),a=null;const i=Uu(t).position==="fixed";let o=i?Vp(t):t;for(;Bu(o)&&!py(o);){const l=Uu(o),d=EA(o);!d&&l.position==="fixed"&&(a=null),(i?!d&&!a:!d&&l.position==="static"&&!!a&&Hae.has(a.position)||e1(o)&&!d&&eH(t,o))?s=s.filter(f=>f!==o):a=l,o=Vp(o)}return e.set(t,s),s}function Kae(t){let{element:e,boundary:r,rootBoundary:s,strategy:a}=t;const o=[...r==="clippingAncestors"?J2(e)?[]:Yae(e,this._c):[].concat(r),s],l=o[0],d=o.reduce((h,f)=>{const m=I6(e,f,a);return h.top=Dc(m.top,h.top),h.right=zp(m.right,h.right),h.bottom=zp(m.bottom,h.bottom),h.left=Dc(m.left,h.left),h},I6(e,l,a));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function Gae(t){const{width:e,height:r}=Qq(t);return{width:e,height:r}}function Xae(t,e,r){const s=of(e),a=ff(e),i=r==="fixed",o=g0(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const d=ef(0);function h(){d.x=eS(a)}if(s||!s&&!i)if((av(e)!=="body"||e1(a))&&(l=Z2(e)),s){const b=g0(e,!0,i,e);d.x=b.x+e.clientLeft,d.y=b.y+e.clientTop}else a&&h();i&&!s&&a&&h();const f=a&&!s&&!i?Zq(a,l):ef(0),m=o.left+l.scrollLeft-d.x-f.x,x=o.top+l.scrollTop-d.y-f.y;return{x:m,y:x,width:o.width,height:o.height}}function Gk(t){return Uu(t).position==="static"}function M6(t,e){if(!of(t)||Uu(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return ff(t)===r&&(r=r.ownerDocument.body),r}function tH(t,e){const r=Uc(t);if(J2(t))return r;if(!of(t)){let a=Vp(t);for(;a&&!py(a);){if(Bu(a)&&!Gk(a))return a;a=Vp(a)}return r}let s=M6(t,e);for(;s&&Iae(s)&&Gk(s);)s=M6(s,e);return s&&py(s)&&Gk(s)&&!EA(s)?r:s||$ae(t)||r}const Qae=async function(t){const e=this.getOffsetParent||tH,r=this.getDimensions,s=await r(t.floating);return{reference:Xae(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function Jae(t){return Uu(t).direction==="rtl"}const Zae={convertOffsetParentRelativeRectToViewportRelativeRect:Uae,getDocumentElement:ff,getClippingRect:Kae,getOffsetParent:tH,getElementRects:Qae,getClientRects:zae,getDimensions:Gae,getScale:qx,isElement:Bu,isRTL:Jae};function rH(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function eie(t,e){let r=null,s;const a=ff(t);function i(){var l;clearTimeout(s),(l=r)==null||l.disconnect(),r=null}function o(l,d){l===void 0&&(l=!1),d===void 0&&(d=1),i();const h=t.getBoundingClientRect(),{left:f,top:m,width:x,height:b}=h;if(l||e(),!x||!b)return;const j=oN(m),N=oN(a.clientWidth-(f+x)),w=oN(a.clientHeight-(m+b)),C=oN(f),O={rootMargin:-j+"px "+-N+"px "+-w+"px "+-C+"px",threshold:Dc(0,zp(1,d))||1};let I=!0;function P(A){const R=A[0].intersectionRatio;if(R!==d){if(!I)return o();R?o(!1,R):s=setTimeout(()=>{o(!1,1e-7)},1e3)}R===1&&!rH(h,t.getBoundingClientRect())&&o(),I=!1}try{r=new IntersectionObserver(P,{...O,root:a.ownerDocument})}catch{r=new IntersectionObserver(P,O)}r.observe(t)}return o(!0),i}function tie(t,e,r,s){s===void 0&&(s={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:d=!1}=s,h=PA(t),f=a||i?[...h?Vb(h):[],...Vb(e)]:[];f.forEach(C=>{a&&C.addEventListener("scroll",r,{passive:!0}),i&&C.addEventListener("resize",r)});const m=h&&l?eie(h,r):null;let x=-1,b=null;o&&(b=new ResizeObserver(C=>{let[T]=C;T&&T.target===h&&b&&(b.unobserve(e),cancelAnimationFrame(x),x=requestAnimationFrame(()=>{var O;(O=b)==null||O.observe(e)})),r()}),h&&!d&&b.observe(h),b.observe(e));let j,N=d?g0(t):null;d&&w();function w(){const C=g0(t);N&&!rH(N,C)&&r(),N=C,j=requestAnimationFrame(w)}return r(),()=>{var C;f.forEach(T=>{a&&T.removeEventListener("scroll",r),i&&T.removeEventListener("resize",r)}),m==null||m(),(C=b)==null||C.disconnect(),b=null,d&&cancelAnimationFrame(j)}}const rie=Cae,nie=Eae,sie=jae,aie=Pae,iie=Sae,O6=Nae,oie=Tae,lie=(t,e,r)=>{const s=new Map,a={platform:Zae,...r},i={...a.platform,_c:s};return wae(t,e,{...a,platform:i})};var cie=typeof document<"u",die=function(){},WN=cie?g.useLayoutEffect:die;function pj(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,s,a;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(s=r;s--!==0;)if(!pj(t[s],e[s]))return!1;return!0}if(a=Object.keys(t),r=a.length,r!==Object.keys(e).length)return!1;for(s=r;s--!==0;)if(!{}.hasOwnProperty.call(e,a[s]))return!1;for(s=r;s--!==0;){const i=a[s];if(!(i==="_owner"&&t.$$typeof)&&!pj(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function nH(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function R6(t,e){const r=nH(t);return Math.round(e*r)/r}function Xk(t){const e=g.useRef(t);return WN(()=>{e.current=t}),e}function uie(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:s=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:d,open:h}=t,[f,m]=g.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[x,b]=g.useState(s);pj(x,s)||b(s);const[j,N]=g.useState(null),[w,C]=g.useState(null),T=g.useCallback(Z=>{Z!==A.current&&(A.current=Z,N(Z))},[]),O=g.useCallback(Z=>{Z!==R.current&&(R.current=Z,C(Z))},[]),I=i||j,P=o||w,A=g.useRef(null),R=g.useRef(null),B=g.useRef(f),V=d!=null,X=Xk(d),ee=Xk(a),Y=Xk(h),re=g.useCallback(()=>{if(!A.current||!R.current)return;const Z={placement:e,strategy:r,middleware:x};ee.current&&(Z.platform=ee.current),lie(A.current,R.current,Z).then(ne=>{const oe={...ne,isPositioned:Y.current!==!1};le.current&&!pj(B.current,oe)&&(B.current=oe,ev.flushSync(()=>{m(oe)}))})},[x,e,r,ee,Y]);WN(()=>{h===!1&&B.current.isPositioned&&(B.current.isPositioned=!1,m(Z=>({...Z,isPositioned:!1})))},[h]);const le=g.useRef(!1);WN(()=>(le.current=!0,()=>{le.current=!1}),[]),WN(()=>{if(I&&(A.current=I),P&&(R.current=P),I&&P){if(X.current)return X.current(I,P,re);re()}},[I,P,re,X,V]);const te=g.useMemo(()=>({reference:A,floating:R,setReference:T,setFloating:O}),[T,O]),de=g.useMemo(()=>({reference:I,floating:P}),[I,P]),ie=g.useMemo(()=>{const Z={position:r,left:0,top:0};if(!de.floating)return Z;const ne=R6(de.floating,f.x),oe=R6(de.floating,f.y);return l?{...Z,transform:"translate("+ne+"px, "+oe+"px)",...nH(de.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:ne,top:oe}},[r,l,de.floating,f.x,f.y]);return g.useMemo(()=>({...f,update:re,refs:te,elements:de,floatingStyles:ie}),[f,re,te,de,ie])}const hie=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:s,padding:a}=typeof t=="function"?t(r):t;return s&&e(s)?s.current!=null?O6({element:s.current,padding:a}).fn(r):{}:s?O6({element:s,padding:a}).fn(r):{}}}},fie=(t,e)=>({...rie(t),options:[t,e]}),mie=(t,e)=>({...nie(t),options:[t,e]}),pie=(t,e)=>({...oie(t),options:[t,e]}),gie=(t,e)=>({...sie(t),options:[t,e]}),xie=(t,e)=>({...aie(t),options:[t,e]}),yie=(t,e)=>({...iie(t),options:[t,e]}),vie=(t,e)=>({...hie(t),options:[t,e]});var bie="Arrow",sH=g.forwardRef((t,e)=>{const{children:r,width:s=10,height:a=5,...i}=t;return n.jsx(lr.svg,{...i,ref:e,width:s,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:n.jsx("polygon",{points:"0,0 30,0 15,10"})})});sH.displayName=bie;var wie=sH;function aH(t){const[e,r]=g.useState(void 0);return ii(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const s=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const d=i.borderBoxSize,h=Array.isArray(d)?d[0]:d;o=h.inlineSize,l=h.blockSize}else o=t.offsetWidth,l=t.offsetHeight;r({width:o,height:l})});return s.observe(t,{box:"border-box"}),()=>s.unobserve(t)}else r(void 0)},[t]),e}var AA="Popper",[iH,Jp]=Hc(AA),[Nie,oH]=iH(AA),lH=t=>{const{__scopePopper:e,children:r}=t,[s,a]=g.useState(null);return n.jsx(Nie,{scope:e,anchor:s,onAnchorChange:a,children:r})};lH.displayName=AA;var cH="PopperAnchor",dH=g.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:s,...a}=t,i=oH(cH,r),o=g.useRef(null),l=$n(e,o),d=g.useRef(null);return g.useEffect(()=>{const h=d.current;d.current=(s==null?void 0:s.current)||o.current,h!==d.current&&i.onAnchorChange(d.current)}),s?null:n.jsx(lr.div,{...a,ref:l})});dH.displayName=cH;var _A="PopperContent",[jie,Sie]=iH(_A),uH=g.forwardRef((t,e)=>{var he,ue,ce,Ee,Le,Ie;const{__scopePopper:r,side:s="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:d=!0,collisionBoundary:h=[],collisionPadding:f=0,sticky:m="partial",hideWhenDetached:x=!1,updatePositionStrategy:b="optimized",onPlaced:j,...N}=t,w=oH(_A,r),[C,T]=g.useState(null),O=$n(e,Ue=>T(Ue)),[I,P]=g.useState(null),A=aH(I),R=(A==null?void 0:A.width)??0,B=(A==null?void 0:A.height)??0,V=s+(i!=="center"?"-"+i:""),X=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},ee=Array.isArray(h)?h:[h],Y=ee.length>0,re={padding:X,boundary:ee.filter(Cie),altBoundary:Y},{refs:le,floatingStyles:te,placement:de,isPositioned:ie,middlewareData:Z}=uie({strategy:"fixed",placement:V,whileElementsMounted:(...Ue)=>tie(...Ue,{animationFrame:b==="always"}),elements:{reference:w.anchor},middleware:[fie({mainAxis:a+B,alignmentAxis:o}),d&&mie({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?pie():void 0,...re}),d&&gie({...re}),xie({...re,apply:({elements:Ue,rects:Ae,availableWidth:We,availableHeight:ot})=>{const{width:It,height:tr}=Ae.reference,Ct=Ue.floating.style;Ct.setProperty("--radix-popper-available-width",`${We}px`),Ct.setProperty("--radix-popper-available-height",`${ot}px`),Ct.setProperty("--radix-popper-anchor-width",`${It}px`),Ct.setProperty("--radix-popper-anchor-height",`${tr}px`)}}),I&&vie({element:I,padding:l}),Eie({arrowWidth:R,arrowHeight:B}),x&&yie({strategy:"referenceHidden",...re})]}),[ne,oe]=mH(de),U=yl(j);ii(()=>{ie&&(U==null||U())},[ie,U]);const W=(he=Z.arrow)==null?void 0:he.x,be=(ue=Z.arrow)==null?void 0:ue.y,pe=((ce=Z.arrow)==null?void 0:ce.centerOffset)!==0,[ge,Ce]=g.useState();return ii(()=>{C&&Ce(window.getComputedStyle(C).zIndex)},[C]),n.jsx("div",{ref:le.setFloating,"data-radix-popper-content-wrapper":"",style:{...te,transform:ie?te.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ge,"--radix-popper-transform-origin":[(Ee=Z.transformOrigin)==null?void 0:Ee.x,(Le=Z.transformOrigin)==null?void 0:Le.y].join(" "),...((Ie=Z.hide)==null?void 0:Ie.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:n.jsx(jie,{scope:r,placedSide:ne,onArrowChange:P,arrowX:W,arrowY:be,shouldHideArrow:pe,children:n.jsx(lr.div,{"data-side":ne,"data-align":oe,...N,ref:O,style:{...N.style,animation:ie?void 0:"none"}})})})});uH.displayName=_A;var hH="PopperArrow",kie={top:"bottom",right:"left",bottom:"top",left:"right"},fH=g.forwardRef(function(e,r){const{__scopePopper:s,...a}=e,i=Sie(hH,s),o=kie[i.placedSide];return n.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:n.jsx(wie,{...a,ref:r,style:{...a.style,display:"block"}})})});fH.displayName=hH;function Cie(t){return t!==null}var Eie=t=>({name:"transformOrigin",options:t,fn(e){var w,C,T;const{placement:r,rects:s,middlewareData:a}=e,o=((w=a.arrow)==null?void 0:w.centerOffset)!==0,l=o?0:t.arrowWidth,d=o?0:t.arrowHeight,[h,f]=mH(r),m={start:"0%",center:"50%",end:"100%"}[f],x=(((C=a.arrow)==null?void 0:C.x)??0)+l/2,b=(((T=a.arrow)==null?void 0:T.y)??0)+d/2;let j="",N="";return h==="bottom"?(j=o?m:`${x}px`,N=`${-d}px`):h==="top"?(j=o?m:`${x}px`,N=`${s.floating.height+d}px`):h==="right"?(j=`${-d}px`,N=o?m:`${b}px`):h==="left"&&(j=`${s.floating.width+d}px`,N=o?m:`${b}px`),{data:{x:j,y:N}}}});function mH(t){const[e,r="center"]=t.split("-");return[e,r]}var IA=lH,t1=dH,tS=uH,rS=fH,[nS]=Hc("Tooltip",[Jp]),MA=Jp(),pH="TooltipProvider",Tie=700,D6="tooltip.open",[Pie,gH]=nS(pH),xH=t=>{const{__scopeTooltip:e,delayDuration:r=Tie,skipDelayDuration:s=300,disableHoverableContent:a=!1,children:i}=t,o=g.useRef(!0),l=g.useRef(!1),d=g.useRef(0);return g.useEffect(()=>{const h=d.current;return()=>window.clearTimeout(h)},[]),n.jsx(Pie,{scope:e,isOpenDelayedRef:o,delayDuration:r,onOpen:g.useCallback(()=>{window.clearTimeout(d.current),o.current=!1},[]),onClose:g.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>o.current=!0,s)},[s]),isPointerInTransitRef:l,onPointerInTransitChange:g.useCallback(h=>{l.current=h},[]),disableHoverableContent:a,children:i})};xH.displayName=pH;var yH="Tooltip",[AMe,sS]=nS(yH),cP="TooltipTrigger",Aie=g.forwardRef((t,e)=>{const{__scopeTooltip:r,...s}=t,a=sS(cP,r),i=gH(cP,r),o=MA(r),l=g.useRef(null),d=$n(e,l,a.onTriggerChange),h=g.useRef(!1),f=g.useRef(!1),m=g.useCallback(()=>h.current=!1,[]);return g.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),n.jsx(t1,{asChild:!0,...o,children:n.jsx(lr.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...s,ref:d,onPointerMove:At(t.onPointerMove,x=>{x.pointerType!=="touch"&&!f.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),f.current=!0)}),onPointerLeave:At(t.onPointerLeave,()=>{a.onTriggerLeave(),f.current=!1}),onPointerDown:At(t.onPointerDown,()=>{a.open&&a.onClose(),h.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:At(t.onFocus,()=>{h.current||a.onOpen()}),onBlur:At(t.onBlur,a.onClose),onClick:At(t.onClick,a.onClose)})})});Aie.displayName=cP;var _ie="TooltipPortal",[_Me,Iie]=nS(_ie,{forceMount:void 0}),gy="TooltipContent",vH=g.forwardRef((t,e)=>{const r=Iie(gy,t.__scopeTooltip),{forceMount:s=r.forceMount,side:a="top",...i}=t,o=sS(gy,t.__scopeTooltip);return n.jsx(Wc,{present:s||o.open,children:o.disableHoverableContent?n.jsx(bH,{side:a,...i,ref:e}):n.jsx(Mie,{side:a,...i,ref:e})})}),Mie=g.forwardRef((t,e)=>{const r=sS(gy,t.__scopeTooltip),s=gH(gy,t.__scopeTooltip),a=g.useRef(null),i=$n(e,a),[o,l]=g.useState(null),{trigger:d,onClose:h}=r,f=a.current,{onPointerInTransitChange:m}=s,x=g.useCallback(()=>{l(null),m(!1)},[m]),b=g.useCallback((j,N)=>{const w=j.currentTarget,C={x:j.clientX,y:j.clientY},T=Lie(C,w.getBoundingClientRect()),O=Fie(C,T),I=Bie(N.getBoundingClientRect()),P=zie([...O,...I]);l(P),m(!0)},[m]);return g.useEffect(()=>()=>x(),[x]),g.useEffect(()=>{if(d&&f){const j=w=>b(w,f),N=w=>b(w,d);return d.addEventListener("pointerleave",j),f.addEventListener("pointerleave",N),()=>{d.removeEventListener("pointerleave",j),f.removeEventListener("pointerleave",N)}}},[d,f,b,x]),g.useEffect(()=>{if(o){const j=N=>{const w=N.target,C={x:N.clientX,y:N.clientY},T=(d==null?void 0:d.contains(w))||(f==null?void 0:f.contains(w)),O=!Uie(C,o);T?x():O&&(x(),h())};return document.addEventListener("pointermove",j),()=>document.removeEventListener("pointermove",j)}},[d,f,o,h,x]),n.jsx(bH,{...t,ref:i})}),[Oie,Rie]=nS(yH,{isInside:!1}),Die=ane("TooltipContent"),bH=g.forwardRef((t,e)=>{const{__scopeTooltip:r,children:s,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=t,d=sS(gy,r),h=MA(r),{onClose:f}=d;return g.useEffect(()=>(document.addEventListener(D6,f),()=>document.removeEventListener(D6,f)),[f]),g.useEffect(()=>{if(d.trigger){const m=x=>{const b=x.target;b!=null&&b.contains(d.trigger)&&f()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[d.trigger,f]),n.jsx(L0,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:m=>m.preventDefault(),onDismiss:f,children:n.jsxs(tS,{"data-state":d.stateAttribute,...h,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[n.jsx(Die,{children:s}),n.jsx(Oie,{scope:r,isInside:!0,children:n.jsx(Ene,{id:d.contentId,role:"tooltip",children:a||s})})]})})});vH.displayName=gy;var wH="TooltipArrow",$ie=g.forwardRef((t,e)=>{const{__scopeTooltip:r,...s}=t,a=MA(r);return Rie(wH,r).isInside?null:n.jsx(rS,{...a,...s,ref:e})});$ie.displayName=wH;function Lie(t,e){const r=Math.abs(e.top-t.y),s=Math.abs(e.bottom-t.y),a=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(r,s,a,i)){case i:return"left";case a:return"right";case r:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function Fie(t,e,r=5){const s=[];switch(e){case"top":s.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":s.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":s.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":s.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return s}function Bie(t){const{top:e,right:r,bottom:s,left:a}=t;return[{x:a,y:e},{x:r,y:e},{x:r,y:s},{x:a,y:s}]}function Uie(t,e){const{x:r,y:s}=t;let a=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const l=e[i],d=e[o],h=l.x,f=l.y,m=d.x,x=d.y;f>s!=x>s&&r<(m-h)*(s-f)/(x-f)+h&&(a=!a)}return a}function zie(t){const e=t.slice();return e.sort((r,s)=>r.x<s.x?-1:r.x>s.x?1:r.y<s.y?-1:r.y>s.y?1:0),Vie(e)}function Vie(t){if(t.length<=1)return t.slice();const e=[];for(let s=0;s<t.length;s++){const a=t[s];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))e.pop();else break}e.push(a)}e.pop();const r=[];for(let s=t.length-1;s>=0;s--){const a=t[s];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))r.pop();else break}r.push(a)}return r.pop(),e.length===1&&r.length===1&&e[0].x===r[0].x&&e[0].y===r[0].y?e:e.concat(r)}var qie=xH,NH=vH;const Hie=qie,Wie=g.forwardRef(({className:t,sideOffset:e=4,...r},s)=>n.jsx(NH,{ref:s,sideOffset:e,className:Ht("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...r}));Wie.displayName=NH.displayName;const jH=g.createContext(void 0);function Yie({children:t}){const[e,r]=g.useState("light");g.useEffect(()=>{const i=localStorage.getItem("theme");i&&r(i)},[]),g.useEffect(()=>{const i=window.document.documentElement;i.classList.remove("light","dark"),e==="dark"&&i.classList.add("dark"),localStorage.setItem("theme",e)},[e]);const a={theme:e,setTheme:r,toggleTheme:()=>{r(i=>i==="dark"?"light":"dark")}};return n.jsx(jH.Provider,{value:a,children:t})}const OA=()=>{const t=g.useContext(jH);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},Kie=K2("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),H=g.forwardRef(({className:t,variant:e,size:r,asChild:s=!1,...a},i)=>{const o=s?nne:"button";return n.jsx(o,{className:Ht(Kie({variant:e,size:r,className:t})),ref:i,...a})});H.displayName="Button";var Qk="focusScope.autoFocusOnMount",Jk="focusScope.autoFocusOnUnmount",$6={bubbles:!1,cancelable:!0},Gie="FocusScope",r1=g.forwardRef((t,e)=>{const{loop:r=!1,trapped:s=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=t,[l,d]=g.useState(null),h=yl(a),f=yl(i),m=g.useRef(null),x=$n(e,N=>d(N)),b=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(s){let N=function(O){if(b.paused||!l)return;const I=O.target;l.contains(I)?m.current=I:vp(m.current,{select:!0})},w=function(O){if(b.paused||!l)return;const I=O.relatedTarget;I!==null&&(l.contains(I)||vp(m.current,{select:!0}))},C=function(O){if(document.activeElement===document.body)for(const P of O)P.removedNodes.length>0&&vp(l)};document.addEventListener("focusin",N),document.addEventListener("focusout",w);const T=new MutationObserver(C);return l&&T.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",N),document.removeEventListener("focusout",w),T.disconnect()}}},[s,l,b.paused]),g.useEffect(()=>{if(l){F6.add(b);const N=document.activeElement;if(!l.contains(N)){const C=new CustomEvent(Qk,$6);l.addEventListener(Qk,h),l.dispatchEvent(C),C.defaultPrevented||(Xie(toe(SH(l)),{select:!0}),document.activeElement===N&&vp(l))}return()=>{l.removeEventListener(Qk,h),setTimeout(()=>{const C=new CustomEvent(Jk,$6);l.addEventListener(Jk,f),l.dispatchEvent(C),C.defaultPrevented||vp(N??document.body,{select:!0}),l.removeEventListener(Jk,f),F6.remove(b)},0)}}},[l,h,f,b]);const j=g.useCallback(N=>{if(!r&&!s||b.paused)return;const w=N.key==="Tab"&&!N.altKey&&!N.ctrlKey&&!N.metaKey,C=document.activeElement;if(w&&C){const T=N.currentTarget,[O,I]=Qie(T);O&&I?!N.shiftKey&&C===I?(N.preventDefault(),r&&vp(O,{select:!0})):N.shiftKey&&C===O&&(N.preventDefault(),r&&vp(I,{select:!0})):C===T&&N.preventDefault()}},[r,s,b.paused]);return n.jsx(lr.div,{tabIndex:-1,...o,ref:x,onKeyDown:j})});r1.displayName=Gie;function Xie(t,{select:e=!1}={}){const r=document.activeElement;for(const s of t)if(vp(s,{select:e}),document.activeElement!==r)return}function Qie(t){const e=SH(t),r=L6(e,t),s=L6(e.reverse(),t);return[r,s]}function SH(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function L6(t,e){for(const r of t)if(!Jie(r,{upTo:e}))return r}function Jie(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Zie(t){return t instanceof HTMLInputElement&&"select"in t}function vp(t,{select:e=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&Zie(t)&&e&&t.select()}}var F6=eoe();function eoe(){let t=[];return{add(e){const r=t[0];e!==r&&(r==null||r.pause()),t=B6(t,e),t.unshift(e)},remove(e){var r;t=B6(t,e),(r=t[0])==null||r.resume()}}}function B6(t,e){const r=[...t],s=r.indexOf(e);return s!==-1&&r.splice(s,1),r}function toe(t){return t.filter(e=>e.tagName!=="A")}var Zk=0;function aS(){g.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??U6()),document.body.insertAdjacentElement("beforeend",t[1]??U6()),Zk++,()=>{Zk===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Zk--}},[])}function U6(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Wh=function(){return Wh=Object.assign||function(e){for(var r,s=1,a=arguments.length;s<a;s++){r=arguments[s];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Wh.apply(this,arguments)};function kH(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(r[s[a]]=t[s[a]]);return r}function roe(t,e,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(f){try{h(s.next(f))}catch(m){o(m)}}function d(f){try{h(s.throw(f))}catch(m){o(m)}}function h(f){f.done?i(f.value):a(f.value).then(l,d)}h((s=s.apply(t,e||[])).next())})}function noe(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},s,a,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(h){return function(f){return d([h,f])}}function d(h){if(s)throw new TypeError("Generator is already executing.");for(;o&&(o=0,h[0]&&(r=0)),r;)try{if(s=1,a&&(i=h[0]&2?a.return:h[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,h[1])).done)return i;switch(a=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,a=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){r.label=h[1];break}if(h[0]===6&&r.label<i[1]){r.label=i[1],i=h;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(h);break}i[2]&&r.ops.pop(),r.trys.pop();continue}h=e.call(t,r)}catch(f){h=[6,f],a=0}finally{s=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function soe(t,e,r){if(r||arguments.length===2)for(var s=0,a=e.length,i;s<a;s++)(i||!(s in e))&&(i||(i=Array.prototype.slice.call(e,0,s)),i[s]=e[s]);return t.concat(i||Array.prototype.slice.call(e))}var YN="right-scroll-bar-position",KN="width-before-scroll-bar",aoe="with-scroll-bars-hidden",ioe="--removed-body-scroll-bar-size";function eC(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function ooe(t,e){var r=g.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(s){var a=r.value;a!==s&&(r.value=s,r.callback(s,a))}}}})[0];return r.callback=e,r.facade}var loe=typeof window<"u"?g.useLayoutEffect:g.useEffect,z6=new WeakMap;function coe(t,e){var r=ooe(null,function(s){return t.forEach(function(a){return eC(a,s)})});return loe(function(){var s=z6.get(r);if(s){var a=new Set(s),i=new Set(t),o=r.current;a.forEach(function(l){i.has(l)||eC(l,null)}),i.forEach(function(l){a.has(l)||eC(l,o)})}z6.set(r,t)},[t]),r}function doe(t){return t}function uoe(t,e){e===void 0&&(e=doe);var r=[],s=!1,a={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(i){var o=e(i,s);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(s=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){s=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(i),o=r}var d=function(){var f=o;o=[],f.forEach(i)},h=function(){return Promise.resolve().then(d)};h(),r={push:function(f){o.push(f),h()},filter:function(f){return o=o.filter(f),r}}}};return a}function hoe(t){t===void 0&&(t={});var e=uoe(null);return e.options=Wh({async:!0,ssr:!1},t),e}var CH=function(t){var e=t.sideCar,r=kH(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=e.read();if(!s)throw new Error("Sidecar medium not found");return g.createElement(s,Wh({},r))};CH.isSideCarExport=!0;function foe(t,e){return t.useMedium(e),CH}var EH=hoe(),tC=function(){},iS=g.forwardRef(function(t,e){var r=g.useRef(null),s=g.useState({onScrollCapture:tC,onWheelCapture:tC,onTouchMoveCapture:tC}),a=s[0],i=s[1],o=t.forwardProps,l=t.children,d=t.className,h=t.removeScrollBar,f=t.enabled,m=t.shards,x=t.sideCar,b=t.noRelative,j=t.noIsolation,N=t.inert,w=t.allowPinchZoom,C=t.as,T=C===void 0?"div":C,O=t.gapMode,I=kH(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),P=x,A=coe([r,e]),R=Wh(Wh({},I),a);return g.createElement(g.Fragment,null,f&&g.createElement(P,{sideCar:EH,removeScrollBar:h,shards:m,noRelative:b,noIsolation:j,inert:N,setCallbacks:i,allowPinchZoom:!!w,lockRef:r,gapMode:O}),o?g.cloneElement(g.Children.only(l),Wh(Wh({},R),{ref:A})):g.createElement(T,Wh({},R,{className:d,ref:A}),l))});iS.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};iS.classNames={fullWidth:KN,zeroRight:YN};var moe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function poe(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=moe();return e&&t.setAttribute("nonce",e),t}function goe(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function xoe(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var yoe=function(){var t=0,e=null;return{add:function(r){t==0&&(e=poe())&&(goe(e,r),xoe(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},voe=function(){var t=yoe();return function(e,r){g.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},TH=function(){var t=voe(),e=function(r){var s=r.styles,a=r.dynamic;return t(s,a),null};return e},boe={left:0,top:0,right:0,gap:0},rC=function(t){return parseInt(t||"",10)||0},woe=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],s=e[t==="padding"?"paddingTop":"marginTop"],a=e[t==="padding"?"paddingRight":"marginRight"];return[rC(r),rC(s),rC(a)]},Noe=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return boe;var e=woe(t),r=document.documentElement.clientWidth,s=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,s-r+e[2]-e[0])}},joe=TH(),Hx="data-scroll-locked",Soe=function(t,e,r,s){var a=t.left,i=t.top,o=t.right,l=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(aoe,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(l,"px ").concat(s,`;
  }
  body[`).concat(Hx,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(s,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(s,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(YN,` {
    right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(KN,` {
    margin-right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(YN," .").concat(YN,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(KN," .").concat(KN,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(Hx,`] {
    `).concat(ioe,": ").concat(l,`px;
  }
`)},V6=function(){var t=parseInt(document.body.getAttribute(Hx)||"0",10);return isFinite(t)?t:0},koe=function(){g.useEffect(function(){return document.body.setAttribute(Hx,(V6()+1).toString()),function(){var t=V6()-1;t<=0?document.body.removeAttribute(Hx):document.body.setAttribute(Hx,t.toString())}},[])},Coe=function(t){var e=t.noRelative,r=t.noImportant,s=t.gapMode,a=s===void 0?"margin":s;koe();var i=g.useMemo(function(){return Noe(a)},[a]);return g.createElement(joe,{styles:Soe(i,!e,a,r?"":"!important")})},dP=!1;if(typeof window<"u")try{var lN=Object.defineProperty({},"passive",{get:function(){return dP=!0,!0}});window.addEventListener("test",lN,lN),window.removeEventListener("test",lN,lN)}catch{dP=!1}var vx=dP?{passive:!1}:!1,Eoe=function(t){return t.tagName==="TEXTAREA"},PH=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!Eoe(t)&&r[e]==="visible")},Toe=function(t){return PH(t,"overflowY")},Poe=function(t){return PH(t,"overflowX")},q6=function(t,e){var r=e.ownerDocument,s=e;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var a=AH(t,s);if(a){var i=_H(t,s),o=i[1],l=i[2];if(o>l)return!0}s=s.parentNode}while(s&&s!==r.body);return!1},Aoe=function(t){var e=t.scrollTop,r=t.scrollHeight,s=t.clientHeight;return[e,r,s]},_oe=function(t){var e=t.scrollLeft,r=t.scrollWidth,s=t.clientWidth;return[e,r,s]},AH=function(t,e){return t==="v"?Toe(e):Poe(e)},_H=function(t,e){return t==="v"?Aoe(e):_oe(e)},Ioe=function(t,e){return t==="h"&&e==="rtl"?-1:1},Moe=function(t,e,r,s,a){var i=Ioe(t,window.getComputedStyle(e).direction),o=i*s,l=r.target,d=e.contains(l),h=!1,f=o>0,m=0,x=0;do{if(!l)break;var b=_H(t,l),j=b[0],N=b[1],w=b[2],C=N-w-i*j;(j||C)&&AH(t,l)&&(m+=C,x+=j);var T=l.parentNode;l=T&&T.nodeType===Node.DOCUMENT_FRAGMENT_NODE?T.host:T}while(!d&&l!==document.body||d&&(e.contains(l)||e===l));return(f&&Math.abs(m)<1||!f&&Math.abs(x)<1)&&(h=!0),h},cN=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},H6=function(t){return[t.deltaX,t.deltaY]},W6=function(t){return t&&"current"in t?t.current:t},Ooe=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Roe=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Doe=0,bx=[];function $oe(t){var e=g.useRef([]),r=g.useRef([0,0]),s=g.useRef(),a=g.useState(Doe++)[0],i=g.useState(TH)[0],o=g.useRef(t);g.useEffect(function(){o.current=t},[t]),g.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(a));var N=soe([t.lockRef.current],(t.shards||[]).map(W6),!0).filter(Boolean);return N.forEach(function(w){return w.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),N.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(a))})}}},[t.inert,t.lockRef.current,t.shards]);var l=g.useCallback(function(N,w){if("touches"in N&&N.touches.length===2||N.type==="wheel"&&N.ctrlKey)return!o.current.allowPinchZoom;var C=cN(N),T=r.current,O="deltaX"in N?N.deltaX:T[0]-C[0],I="deltaY"in N?N.deltaY:T[1]-C[1],P,A=N.target,R=Math.abs(O)>Math.abs(I)?"h":"v";if("touches"in N&&R==="h"&&A.type==="range")return!1;var B=q6(R,A);if(!B)return!0;if(B?P=R:(P=R==="v"?"h":"v",B=q6(R,A)),!B)return!1;if(!s.current&&"changedTouches"in N&&(O||I)&&(s.current=P),!P)return!0;var V=s.current||P;return Moe(V,w,N,V==="h"?O:I)},[]),d=g.useCallback(function(N){var w=N;if(!(!bx.length||bx[bx.length-1]!==i)){var C="deltaY"in w?H6(w):cN(w),T=e.current.filter(function(P){return P.name===w.type&&(P.target===w.target||w.target===P.shadowParent)&&Ooe(P.delta,C)})[0];if(T&&T.should){w.cancelable&&w.preventDefault();return}if(!T){var O=(o.current.shards||[]).map(W6).filter(Boolean).filter(function(P){return P.contains(w.target)}),I=O.length>0?l(w,O[0]):!o.current.noIsolation;I&&w.cancelable&&w.preventDefault()}}},[]),h=g.useCallback(function(N,w,C,T){var O={name:N,delta:w,target:C,should:T,shadowParent:Loe(C)};e.current.push(O),setTimeout(function(){e.current=e.current.filter(function(I){return I!==O})},1)},[]),f=g.useCallback(function(N){r.current=cN(N),s.current=void 0},[]),m=g.useCallback(function(N){h(N.type,H6(N),N.target,l(N,t.lockRef.current))},[]),x=g.useCallback(function(N){h(N.type,cN(N),N.target,l(N,t.lockRef.current))},[]);g.useEffect(function(){return bx.push(i),t.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:x}),document.addEventListener("wheel",d,vx),document.addEventListener("touchmove",d,vx),document.addEventListener("touchstart",f,vx),function(){bx=bx.filter(function(N){return N!==i}),document.removeEventListener("wheel",d,vx),document.removeEventListener("touchmove",d,vx),document.removeEventListener("touchstart",f,vx)}},[]);var b=t.removeScrollBar,j=t.inert;return g.createElement(g.Fragment,null,j?g.createElement(i,{styles:Roe(a)}):null,b?g.createElement(Coe,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Loe(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Foe=foe(EH,$oe);var n1=g.forwardRef(function(t,e){return g.createElement(iS,Wh({},t,{ref:e,sideCar:Foe}))});n1.classNames=iS.classNames;var Boe=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},wx=new WeakMap,dN=new WeakMap,uN={},nC=0,IH=function(t){return t&&(t.host||IH(t.parentNode))},Uoe=function(t,e){return e.map(function(r){if(t.contains(r))return r;var s=IH(r);return s&&t.contains(s)?s:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},zoe=function(t,e,r,s){var a=Uoe(e,Array.isArray(t)?t:[t]);uN[r]||(uN[r]=new WeakMap);var i=uN[r],o=[],l=new Set,d=new Set(a),h=function(m){!m||l.has(m)||(l.add(m),h(m.parentNode))};a.forEach(h);var f=function(m){!m||d.has(m)||Array.prototype.forEach.call(m.children,function(x){if(l.has(x))f(x);else try{var b=x.getAttribute(s),j=b!==null&&b!=="false",N=(wx.get(x)||0)+1,w=(i.get(x)||0)+1;wx.set(x,N),i.set(x,w),o.push(x),N===1&&j&&dN.set(x,!0),w===1&&x.setAttribute(r,"true"),j||x.setAttribute(s,"true")}catch(C){console.error("aria-hidden: cannot operate on ",x,C)}})};return f(e),l.clear(),nC++,function(){o.forEach(function(m){var x=wx.get(m)-1,b=i.get(m)-1;wx.set(m,x),i.set(m,b),x||(dN.has(m)||m.removeAttribute(s),dN.delete(m)),b||m.removeAttribute(r)}),nC--,nC||(wx=new WeakMap,wx=new WeakMap,dN=new WeakMap,uN={})}},oS=function(t,e,r){r===void 0&&(r="data-aria-hidden");var s=Array.from(Array.isArray(t)?t:[t]),a=Boe(t);return a?(s.push.apply(s,Array.from(a.querySelectorAll("[aria-live], script"))),zoe(s,a,r,"aria-hidden")):function(){return null}},lS="Dialog",[MH]=Hc(lS),[Voe,Hu]=MH(lS),OH=t=>{const{__scopeDialog:e,children:r,open:s,defaultOpen:a,onOpenChange:i,modal:o=!0}=t,l=g.useRef(null),d=g.useRef(null),[h,f]=bm({prop:s,defaultProp:a??!1,onChange:i,caller:lS});return n.jsx(Voe,{scope:e,triggerRef:l,contentRef:d,contentId:wo(),titleId:wo(),descriptionId:wo(),open:h,onOpenChange:f,onOpenToggle:g.useCallback(()=>f(m=>!m),[f]),modal:o,children:r})};OH.displayName=lS;var RH="DialogTrigger",DH=g.forwardRef((t,e)=>{const{__scopeDialog:r,...s}=t,a=Hu(RH,r),i=$n(e,a.triggerRef);return n.jsx(lr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":$A(a.open),...s,ref:i,onClick:At(t.onClick,a.onOpenToggle)})});DH.displayName=RH;var RA="DialogPortal",[qoe,$H]=MH(RA,{forceMount:void 0}),LH=t=>{const{__scopeDialog:e,forceMount:r,children:s,container:a}=t,i=Hu(RA,e);return n.jsx(qoe,{scope:e,forceMount:r,children:g.Children.map(s,o=>n.jsx(Wc,{present:r||i.open,children:n.jsx(tv,{asChild:!0,container:a,children:o})}))})};LH.displayName=RA;var gj="DialogOverlay",FH=g.forwardRef((t,e)=>{const r=$H(gj,t.__scopeDialog),{forceMount:s=r.forceMount,...a}=t,i=Hu(gj,t.__scopeDialog);return i.modal?n.jsx(Wc,{present:s||i.open,children:n.jsx(Woe,{...a,ref:e})}):null});FH.displayName=gj;var Hoe=Up("DialogOverlay.RemoveScroll"),Woe=g.forwardRef((t,e)=>{const{__scopeDialog:r,...s}=t,a=Hu(gj,r);return n.jsx(n1,{as:Hoe,allowPinchZoom:!0,shards:[a.contentRef],children:n.jsx(lr.div,{"data-state":$A(a.open),...s,ref:e,style:{pointerEvents:"auto",...s.style}})})}),x0="DialogContent",BH=g.forwardRef((t,e)=>{const r=$H(x0,t.__scopeDialog),{forceMount:s=r.forceMount,...a}=t,i=Hu(x0,t.__scopeDialog);return n.jsx(Wc,{present:s||i.open,children:i.modal?n.jsx(Yoe,{...a,ref:e}):n.jsx(Koe,{...a,ref:e})})});BH.displayName=x0;var Yoe=g.forwardRef((t,e)=>{const r=Hu(x0,t.__scopeDialog),s=g.useRef(null),a=$n(e,r.contentRef,s);return g.useEffect(()=>{const i=s.current;if(i)return oS(i)},[]),n.jsx(UH,{...t,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:At(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:At(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:At(t.onFocusOutside,i=>i.preventDefault())})}),Koe=g.forwardRef((t,e)=>{const r=Hu(x0,t.__scopeDialog),s=g.useRef(!1),a=g.useRef(!1);return n.jsx(UH,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(s.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:i=>{var d,h;(d=t.onInteractOutside)==null||d.call(t,i),i.defaultPrevented||(s.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((h=r.triggerRef.current)==null?void 0:h.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),UH=g.forwardRef((t,e)=>{const{__scopeDialog:r,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=t,l=Hu(x0,r),d=g.useRef(null),h=$n(e,d);return aS(),n.jsxs(n.Fragment,{children:[n.jsx(r1,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:i,children:n.jsx(L0,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":$A(l.open),...o,ref:h,onDismiss:()=>l.onOpenChange(!1)})}),n.jsxs(n.Fragment,{children:[n.jsx(Goe,{titleId:l.titleId}),n.jsx(Qoe,{contentRef:d,descriptionId:l.descriptionId})]})]})}),DA="DialogTitle",zH=g.forwardRef((t,e)=>{const{__scopeDialog:r,...s}=t,a=Hu(DA,r);return n.jsx(lr.h2,{id:a.titleId,...s,ref:e})});zH.displayName=DA;var VH="DialogDescription",qH=g.forwardRef((t,e)=>{const{__scopeDialog:r,...s}=t,a=Hu(VH,r);return n.jsx(lr.p,{id:a.descriptionId,...s,ref:e})});qH.displayName=VH;var HH="DialogClose",WH=g.forwardRef((t,e)=>{const{__scopeDialog:r,...s}=t,a=Hu(HH,r);return n.jsx(lr.button,{type:"button",...s,ref:e,onClick:At(t.onClick,()=>a.onOpenChange(!1))})});WH.displayName=HH;function $A(t){return t?"open":"closed"}var YH="DialogTitleWarning",[IMe,KH]=tne(YH,{contentName:x0,titleName:DA,docsSlug:"dialog"}),Goe=({titleId:t})=>{const e=KH(YH),r=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return g.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},Xoe="DialogDescriptionWarning",Qoe=({contentRef:t,descriptionId:e})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${KH(Xoe).contentName}}.`;return g.useEffect(()=>{var i;const a=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&a&&(document.getElementById(e)||console.warn(s))},[s,t,e]),null},GH=OH,Joe=DH,XH=LH,LA=FH,FA=BH,QH=zH,JH=qH,ZH=WH;const bn=GH,Zoe=Joe,ele=XH,tle=ZH,eW=g.forwardRef(({className:t,...e},r)=>n.jsx(LA,{ref:r,className:Ht("fixed inset-0 z-50 bg-black/20 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));eW.displayName=LA.displayName;const pn=g.forwardRef(({className:t,children:e,...r},s)=>n.jsxs(ele,{children:[n.jsx(eW,{}),n.jsxs(FA,{ref:s,className:Ht("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[e,n.jsxs(ZH,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[n.jsx(Wr,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));pn.displayName=FA.displayName;const Zn=({className:t,...e})=>n.jsx("div",{className:Ht("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Zn.displayName="DialogHeader";const Xn=g.forwardRef(({className:t,...e},r)=>n.jsx(QH,{ref:r,className:Ht("text-lg font-semibold leading-none tracking-tight",t),...e}));Xn.displayName=QH.displayName;const BA=g.forwardRef(({className:t,...e},r)=>n.jsx(JH,{ref:r,className:Ht("text-sm text-muted-foreground",t),...e}));BA.displayName=JH.displayName;const Nr=g.forwardRef(({className:t,type:e,...r},s)=>n.jsx("input",{type:e,className:Ht("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...r}));Nr.displayName="Input";const rle=K2("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Sr({className:t,variant:e,...r}){return n.jsx("div",{className:Ht(rle({variant:e}),t),...r})}var nle=g.createContext(void 0);function cS(t){const e=g.useContext(nle);return t||e||"ltr"}var sC="rovingFocusGroup.onEntryFocus",sle={bubbles:!1,cancelable:!0},s1="RovingFocusGroup",[uP,tW,ale]=H2(s1),[ile,dS]=Hc(s1,[ale]),[ole,lle]=ile(s1),rW=g.forwardRef((t,e)=>n.jsx(uP.Provider,{scope:t.__scopeRovingFocusGroup,children:n.jsx(uP.Slot,{scope:t.__scopeRovingFocusGroup,children:n.jsx(cle,{...t,ref:e})})}));rW.displayName=s1;var cle=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,orientation:s,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:d,onEntryFocus:h,preventScrollOnEntryFocus:f=!1,...m}=t,x=g.useRef(null),b=$n(e,x),j=cS(i),[N,w]=bm({prop:o,defaultProp:l??null,onChange:d,caller:s1}),[C,T]=g.useState(!1),O=yl(h),I=tW(r),P=g.useRef(!1),[A,R]=g.useState(0);return g.useEffect(()=>{const B=x.current;if(B)return B.addEventListener(sC,O),()=>B.removeEventListener(sC,O)},[O]),n.jsx(ole,{scope:r,orientation:s,dir:j,loop:a,currentTabStopId:N,onItemFocus:g.useCallback(B=>w(B),[w]),onItemShiftTab:g.useCallback(()=>T(!0),[]),onFocusableItemAdd:g.useCallback(()=>R(B=>B+1),[]),onFocusableItemRemove:g.useCallback(()=>R(B=>B-1),[]),children:n.jsx(lr.div,{tabIndex:C||A===0?-1:0,"data-orientation":s,...m,ref:b,style:{outline:"none",...t.style},onMouseDown:At(t.onMouseDown,()=>{P.current=!0}),onFocus:At(t.onFocus,B=>{const V=!P.current;if(B.target===B.currentTarget&&V&&!C){const X=new CustomEvent(sC,sle);if(B.currentTarget.dispatchEvent(X),!X.defaultPrevented){const ee=I().filter(de=>de.focusable),Y=ee.find(de=>de.active),re=ee.find(de=>de.id===N),te=[Y,re,...ee].filter(Boolean).map(de=>de.ref.current);aW(te,f)}}P.current=!1}),onBlur:At(t.onBlur,()=>T(!1))})})}),nW="RovingFocusGroupItem",sW=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,focusable:s=!0,active:a=!1,tabStopId:i,children:o,...l}=t,d=wo(),h=i||d,f=lle(nW,r),m=f.currentTabStopId===h,x=tW(r),{onFocusableItemAdd:b,onFocusableItemRemove:j,currentTabStopId:N}=f;return g.useEffect(()=>{if(s)return b(),()=>j()},[s,b,j]),n.jsx(uP.ItemSlot,{scope:r,id:h,focusable:s,active:a,children:n.jsx(lr.span,{tabIndex:m?0:-1,"data-orientation":f.orientation,...l,ref:e,onMouseDown:At(t.onMouseDown,w=>{s?f.onItemFocus(h):w.preventDefault()}),onFocus:At(t.onFocus,()=>f.onItemFocus(h)),onKeyDown:At(t.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){f.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const C=hle(w,f.orientation,f.dir);if(C!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let O=x().filter(I=>I.focusable).map(I=>I.ref.current);if(C==="last")O.reverse();else if(C==="prev"||C==="next"){C==="prev"&&O.reverse();const I=O.indexOf(w.currentTarget);O=f.loop?fle(O,I+1):O.slice(I+1)}setTimeout(()=>aW(O))}}),children:typeof o=="function"?o({isCurrentTabStop:m,hasTabStop:N!=null}):o})})});sW.displayName=nW;var dle={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ule(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function hle(t,e,r){const s=ule(t.key,r);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return dle[s]}function aW(t,e=!1){const r=document.activeElement;for(const s of t)if(s===r||(s.focus({preventScroll:e}),document.activeElement!==r))return}function fle(t,e){return t.map((r,s)=>t[(e+s)%t.length])}var iW=rW,oW=sW,uS="Tabs",[mle]=Hc(uS,[dS]),lW=dS(),[ple,UA]=mle(uS),cW=g.forwardRef((t,e)=>{const{__scopeTabs:r,value:s,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:d="automatic",...h}=t,f=cS(l),[m,x]=bm({prop:s,onChange:a,defaultProp:i??"",caller:uS});return n.jsx(ple,{scope:r,baseId:wo(),value:m,onValueChange:x,orientation:o,dir:f,activationMode:d,children:n.jsx(lr.div,{dir:f,"data-orientation":o,...h,ref:e})})});cW.displayName=uS;var dW="TabsList",uW=g.forwardRef((t,e)=>{const{__scopeTabs:r,loop:s=!0,...a}=t,i=UA(dW,r),o=lW(r);return n.jsx(iW,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:s,children:n.jsx(lr.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:e})})});uW.displayName=dW;var hW="TabsTrigger",fW=g.forwardRef((t,e)=>{const{__scopeTabs:r,value:s,disabled:a=!1,...i}=t,o=UA(hW,r),l=lW(r),d=gW(o.baseId,s),h=xW(o.baseId,s),f=s===o.value;return n.jsx(oW,{asChild:!0,...l,focusable:!a,active:f,children:n.jsx(lr.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":h,"data-state":f?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:d,...i,ref:e,onMouseDown:At(t.onMouseDown,m=>{!a&&m.button===0&&m.ctrlKey===!1?o.onValueChange(s):m.preventDefault()}),onKeyDown:At(t.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&o.onValueChange(s)}),onFocus:At(t.onFocus,()=>{const m=o.activationMode!=="manual";!f&&!a&&m&&o.onValueChange(s)})})})});fW.displayName=hW;var mW="TabsContent",pW=g.forwardRef((t,e)=>{const{__scopeTabs:r,value:s,forceMount:a,children:i,...o}=t,l=UA(mW,r),d=gW(l.baseId,s),h=xW(l.baseId,s),f=s===l.value,m=g.useRef(f);return g.useEffect(()=>{const x=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(x)},[]),n.jsx(Wc,{present:a||f,children:({present:x})=>n.jsx(lr.div,{"data-state":f?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":d,hidden:!x,id:h,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:m.current?"0s":void 0},children:x&&i})})});pW.displayName=mW;function gW(t,e){return`${t}-trigger-${e}`}function xW(t,e){return`${t}-content-${e}`}var gle=cW,yW=uW,vW=fW,bW=pW;const zA=gle,hS=g.forwardRef(({className:t,...e},r)=>n.jsx(yW,{ref:r,className:Ht("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));hS.displayName=yW.displayName;const Yh=g.forwardRef(({className:t,...e},r)=>n.jsx(vW,{ref:r,className:Ht("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));Yh.displayName=vW.displayName;const Kh=g.forwardRef(({className:t,...e},r)=>n.jsx(bW,{ref:r,className:Ht("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Kh.displayName=bW.displayName;function xle(t){const{showOrderModal:e,setShowOrderModal:r,orderTab:s,setOrderTab:a,showUserId:i,setShowUserId:o,zerodhaClientId:l,zerodhaUserName:d,upstoxAccessToken:h,upstoxUserId:f,upstoxUserName:m,brokerOrders:x,fetchingBrokerOrders:b,zerodhaAccessToken:j,recordAllBrokerOrders:N,brokerPositions:w,fetchingBrokerPositions:C,showBrokerImportModal:T,setShowBrokerImportModal:O,handleBrokerImport:I,showImportModal:P,setShowImportModal:A,handleFileUpload:R,activeFormat:B,detectedFormatLabel:V,isBuildMode:X,setIsBuildMode:ee,brokerSearchInput:Y,setBrokerSearchInput:re,showBrokerSuggestions:le,setShowBrokerSuggestions:te,filteredBrokers:de,buildModeData:ie,setBuildModeData:Z,allColumnsFilledForSave:ne,missingColumns:oe,saveFormatToUniversalLibrary:U,currentUser:W,getCognitoToken:be,setSavedFormats:pe,importDataTextareaRef:ge,brokerFunds:Ce}=t,he=j||h,ue=j?"zerodha":h?"upstox":null;return n.jsx(n.Fragment,{children:n.jsx(bn,{open:e,onOpenChange:r,children:n.jsxs(pn,{className:"max-w-4xl max-h-[90vh] overflow-y-auto custom-thin-scrollbar p-0",children:[n.jsxs("div",{className:"sticky top-0 z-10 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800 px-4 py-3 flex items-center",children:[n.jsxs("div",{className:"w-1/3 flex items-center gap-3",children:[n.jsx("span",{className:"text-sm font-semibold text-slate-800 dark:text-slate-100",children:"Orders & Positions"}),he?n.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-0.5 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 rounded-full text-[10px] font-medium border border-green-100 dark:border-green-800",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"}),"Live Connected"]}):null]}),n.jsxs("div",{className:"w-1/3 flex flex-col items-center justify-center",children:[n.jsx("span",{className:"text-[10px] font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Available Funds"}),n.jsx("span",{className:"text-xs font-bold text-green-600 dark:text-green-400",children:i?`${(Ce==null?void 0:Ce.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}))||"0.00"}`:"***"})]}),n.jsx("div",{className:"w-1/3 flex items-center justify-end gap-3",children:n.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 dark:text-slate-400",children:[n.jsxs("div",{className:"flex items-center gap-1 bg-gray-50 dark:bg-gray-800/50 rounded px-2 py-1",children:[ue==="zerodha"&&n.jsxs(n.Fragment,{children:[n.jsx("img",{src:"https://zerodha.com/static/images/products/kite-logo.svg",alt:"Zerodha",className:"w-3 h-3"}),n.jsxs("span",{children:["id: ",i?l||"N/A":""," | ",i?d||"N/A":""]})]}),ue==="upstox"&&n.jsxs(n.Fragment,{children:[n.jsx("img",{src:"https://assets.upstox.com/content/assets/images/cms/202494/MediumWordmark_UP(WhiteOnPurple).png",alt:"Upstox",className:"w-3 h-3"}),n.jsxs("span",{children:["id: ",i?f||"N/A":""," | ",i?m&&m!=="undefined"&&m!=="N/A"?m:"Upstox User":""]})]})]}),(ue==="zerodha"||ue==="upstox")&&n.jsx("button",{onClick:()=>o(!i),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors","data-testid":"button-toggle-user-id",title:i?"Hide ID":"Show ID",children:i?n.jsx(Au,{className:"w-3 h-3"}):n.jsx(o0,{className:"w-3 h-3"})})]})})]}),n.jsx("div",{className:"p-4",children:n.jsxs(zA,{value:s,onValueChange:a,className:"w-full",children:[n.jsxs(hS,{className:"grid w-full grid-cols-2 mb-3",children:[n.jsx(Yh,{value:"history",children:"Orders"}),n.jsx(Yh,{value:"positions",children:"Positions"})]}),n.jsxs(Kh,{value:"history",className:"space-y-4",children:[n.jsx("div",{className:"max-h-96 overflow-y-auto border rounded-lg custom-thin-scrollbar",children:n.jsxs("table",{className:"w-full text-xs",children:[n.jsx("thead",{className:"bg-gray-100 dark:bg-gray-700 sticky top-0",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-2 py-2 text-left font-medium",children:"Time"}),n.jsx("th",{className:"px-2 py-2 text-left font-medium",children:"Order"}),n.jsx("th",{className:"px-2 py-2 text-left font-medium",children:"Symbol"}),n.jsx("th",{className:"px-2 py-2 text-left font-medium",children:"Type"}),n.jsx("th",{className:"px-2 py-2 text-left font-medium",children:"Qty"}),n.jsx("th",{className:"px-2 py-2 text-left font-medium",children:"Price"}),n.jsx("th",{className:"px-2 py-2 text-left font-medium",children:"Status"})]})}),n.jsx("tbody",{children:x.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"px-2 py-4 text-center text-gray-500",children:b?"Loading orders...":he?"No orders found":"Connect to broker to view orders"})}):[...x].sort((ce,Ee)=>{const Le=String(ce.status||"").toUpperCase().trim(),Ie=String(Ee.status||"").toUpperCase().trim();return(Le==="COMPLETE"||Le==="PENDING"?0:Le==="REJECTED"||Le==="CANCELLED"?999:500)-(Ie==="COMPLETE"||Ie==="PENDING"?0:Ie==="REJECTED"||Ie==="CANCELLED"?999:500)}).map((ce,Ee)=>n.jsxs("tr",{className:"border-b hover:bg-gray-50 dark:hover:bg-gray-700",children:[n.jsx("td",{className:"px-2 py-2 font-medium",children:ce.time}),n.jsx("td",{className:"px-2 py-2",children:n.jsx("span",{className:`px-1 py-0.5 rounded text-xs ${ce.order==="BUY"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"}`,children:ce.order})}),n.jsx("td",{className:"px-2 py-2 font-medium",children:ce.symbol}),n.jsx("td",{className:"px-2 py-2",children:ce.type}),n.jsx("td",{className:"px-2 py-2",children:ce.qty}),n.jsxs("td",{className:"px-2 py-2",children:["",ce.price]}),n.jsx("td",{className:"px-2 py-2",children:n.jsx("span",{className:`text-xs font-medium ${ce.status==="COMPLETE"?"text-green-600 dark:text-green-400":ce.status==="REJECTED"?"text-red-600 dark:text-red-400":ce.status==="CANCELLED"?"text-yellow-600 dark:text-yellow-400":"text-blue-600 dark:text-blue-400"}`,children:ce.status||"PENDING"})})]},Ee))})]})}),n.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200 dark:border-gray-700 mt-2",children:[n.jsx("button",{onClick:N,disabled:x.length===0,className:"px-3 py-1.5 text-xs bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded transition-colors","data-testid":"button-record-broker-orders",children:"Record to Journal"}),n.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[x.length," orders"]})]})]}),n.jsxs(Kh,{value:"positions",className:"space-y-4",children:[n.jsx("div",{className:"max-h-96 overflow-y-auto border rounded-lg custom-thin-scrollbar",children:n.jsxs("table",{className:"w-full text-xs",children:[n.jsx("thead",{className:"bg-gray-100 dark:bg-gray-700 sticky top-0",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-2 py-2 text-left font-medium",children:"Symbol"}),n.jsx("th",{className:"px-2 py-2 text-left font-medium",children:"Entry Price"}),n.jsx("th",{className:"px-2 py-2 text-left font-medium",children:"Current Price"}),n.jsx("th",{className:"px-2 py-2 text-left font-medium",children:"Qty"}),n.jsx("th",{className:"px-2 py-2 text-left font-medium",children:"Unrealized P&L"}),n.jsx("th",{className:"px-2 py-2 text-left font-medium",children:"Return %"}),n.jsx("th",{className:"px-2 py-2 text-left font-medium",children:"Status"})]})}),n.jsx("tbody",{children:w.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"px-2 py-4 text-center text-gray-500",children:C?"Loading positions...":he?"No open positions":"Connect to broker to view positions"})}):[...w].sort((ce,Ee)=>{const Le=String(ce.status||"Open").toUpperCase().trim(),Ie=String(Ee.status||"Open").toUpperCase().trim();return(Le==="OPEN"?0:999)-(Ie==="OPEN"?0:999)}).map((ce,Ee)=>{const Le=ce.entryPrice||ce.entry_price||0,Ie=ce.currentPrice||ce.current_price||0,Ue=ce.qty||ce.quantity||0,Ae=(Ie-Le)*Ue,We=Le>0?(Ie-Le)/Le*100:0;return n.jsxs("tr",{className:"border-b hover:bg-gray-50 dark:hover:bg-gray-700",children:[n.jsx("td",{className:"px-2 py-2 font-medium",children:ce.symbol}),n.jsxs("td",{className:"px-2 py-2",children:["",Le.toFixed(2)]}),n.jsxs("td",{className:"px-2 py-2",children:["",Ie.toFixed(2)]}),n.jsx("td",{className:"px-2 py-2",children:Ue}),n.jsxs("td",{className:`px-2 py-2 font-medium ${Ae>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:["",Ae.toFixed(2)]}),n.jsxs("td",{className:`px-2 py-2 ${We>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[We.toFixed(2),"%"]}),n.jsx("td",{className:"px-2 py-2",children:ce.status||"Open"})]},Ee)})})]})}),n.jsx("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200 dark:border-gray-700 mt-2",children:n.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[w.length," open positions"]})})]})]})})]})})})}function yle(){var x;const{toast:t}=Ia(),[e,r]=g.useState(!1),[s,a]=g.useState(!1),{data:i,isLoading:o}=xn({queryKey:["/api/angelone/status"],refetchInterval:5e3}),{data:l}=xn({queryKey:["/api/angelone/profile"],enabled:!!(i!=null&&i.connected&&(i!=null&&i.authenticated)),refetchInterval:1e4}),d=yo({mutationFn:async()=>await Bp("POST","/api/angelone/connect-env"),onSuccess:()=>{Vi.invalidateQueries({queryKey:["/api/angelone/status"]}),Vi.invalidateQueries({queryKey:["/api/angelone/profile"]}),a(!1),t({title:"Connected!",description:"Angel One API connected successfully."})},onError:b=>{t({title:"Connection Failed",description:(b==null?void 0:b.message)||"Failed to connect. Check environment credentials.",variant:"destructive"})}}),h=yo({mutationFn:async()=>await Bp("POST","/api/angelone/disconnect"),onSuccess:()=>{Vi.invalidateQueries({queryKey:["/api/angelone/status"]}),Vi.invalidateQueries({queryKey:["/api/angelone/profile"]}),t({title:"Disconnected",description:"Angel One API disconnected."})},onError:b=>{t({title:"Error",description:(b==null?void 0:b.message)||"Failed to disconnect.",variant:"destructive"})}});g.useEffect(()=>{!o&&!e&&i&&!i.connected&&!d.isPending&&(r(!0),console.log(" [Angel One] Auto-connecting with environment credentials..."),d.mutate())},[o,i,e,d.isPending]),g.useEffect(()=>{if(!o&&i&&i.connected&&i.authenticated){const b=i.tokenExpired,j=i.tokenExpiry?Math.floor((i.tokenExpiry*1e3-Date.now())/(1e3*60*60)):null;(b||j!==null&&j<=1)&&!s&&!d.isPending&&(a(!0),console.log(" [Angel One] Token expired or expiring soon, auto-reconnecting..."),t({title:"Token Expiring",description:"Automatically reconnecting to Angel One..."}),setTimeout(()=>{d.mutate()},500))}},[o,i==null?void 0:i.tokenExpired,i==null?void 0:i.tokenExpiry,i==null?void 0:i.connected,i==null?void 0:i.authenticated,d.isPending,s]);const f=(i==null?void 0:i.connected)&&(i==null?void 0:i.authenticated),m=((x=l==null?void 0:l.profile)==null?void 0:x.name)||(i==null?void 0:i.clientCode)||"User";return f?n.jsx("div",{className:"bg-orange-50 dark:bg-orange-950 border border-orange-200 dark:border-orange-800 rounded-lg p-4 mb-6",children:n.jsxs("div",{className:"flex items-center justify-between gap-4",children:[n.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[n.jsx("div",{className:"w-8 h-8 bg-orange-100 dark:bg-orange-900 rounded-lg flex items-center justify-center flex-shrink-0",children:n.jsx(Jne,{className:"text-orange-600 dark:text-orange-400 h-4 w-4"})}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("h3",{className:"text-sm font-medium text-orange-900 dark:text-orange-200",children:"Angel One Connected"}),n.jsxs("p",{className:"text-xs text-orange-700 dark:text-orange-300 truncate",children:["User: ",n.jsx("span",{className:"font-semibold",children:m})]})]})]}),n.jsx(H,{onClick:()=>h.mutate(),disabled:h.isPending,variant:"outline",size:"sm",className:"border-orange-600 dark:border-orange-600 text-orange-600 dark:text-orange-400 flex-shrink-0","data-testid":"button-angelone-disconnect",children:h.isPending?n.jsx(Vo,{className:"h-4 w-4 animate-spin"}):"Disconnect"})]})}):d.isPending?n.jsx("div",{className:"bg-orange-50 dark:bg-orange-950/50 border border-orange-200 dark:border-orange-800 rounded-lg p-4 mb-6",children:n.jsxs("div",{className:"flex items-center justify-center gap-3 py-2",children:[n.jsx(Vo,{className:"h-5 w-5 text-orange-600 animate-spin"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-orange-900 dark:text-orange-200",children:"Connecting to Angel One..."}),n.jsx("p",{className:"text-xs text-orange-700 dark:text-orange-300",children:"Using environment credentials"})]})]})}):n.jsx("div",{className:"bg-orange-50 dark:bg-orange-950/50 border border-orange-200 dark:border-orange-800 rounded-lg p-4 mb-6",children:n.jsxs("div",{className:"flex items-center justify-between gap-4",children:[n.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[n.jsx("div",{className:"w-8 h-8 bg-orange-100 dark:bg-orange-900 rounded-lg flex items-center justify-center flex-shrink-0",children:d.isError?n.jsx(rv,{className:"text-red-600 dark:text-red-400 h-4 w-4"}):n.jsx(use,{className:"text-orange-600 dark:text-orange-400 h-4 w-4"})}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("h3",{className:"text-sm font-medium text-orange-900 dark:text-orange-200",children:d.isError?"Connection Failed":"Angel One Disconnected"}),n.jsx("p",{className:"text-xs text-orange-700 dark:text-orange-300",children:d.isError?"Tap Connect to retry":"Tap Connect to authenticate"})]})]}),n.jsxs(H,{onClick:()=>{r(!0),d.mutate()},disabled:d.isPending,size:"sm",className:"bg-orange-600 hover:bg-orange-700 text-white flex-shrink-0","data-testid":"button-angelone-connect",children:[n.jsx(nse,{className:"mr-2 h-4 w-4"}),"Connect"]})]})})}function vle(){var d;const{toast:t}=Ia(),{data:e}=xn({queryKey:["/api/angelone/status"],refetchInterval:3e3}),{data:r}=xn({queryKey:["/api/angelone/profile"],enabled:!!(e!=null&&e.connected&&(e!=null&&e.authenticated)),refetchInterval:1e4}),s=yo({mutationFn:()=>Bp("POST","/api/angelone/status/refresh"),onSuccess:()=>{Vi.invalidateQueries({queryKey:["/api/angelone/status"]}),Vi.invalidateQueries({queryKey:["/api/angelone/statistics"]}),Vi.invalidateQueries({queryKey:["/api/angelone/activity-logs"]})},onError:()=>{t({title:"Refresh Failed",description:"Failed to refresh Angel One API connection status.",variant:"destructive"})}}),a=yo({mutationFn:()=>Bp("POST","/api/angelone/disconnect"),onSuccess:()=>{Vi.invalidateQueries({queryKey:["/api/angelone/status"]}),Vi.invalidateQueries({queryKey:["/api/angelone/statistics"]}),Vi.invalidateQueries({queryKey:["/api/angelone/activity-logs"]}),Vi.invalidateQueries({queryKey:["/api/angelone/profile"]}),t({title:"Disconnected",description:"Angel One connection has been closed."})},onError:()=>{t({title:"Disconnect Failed",description:"Failed to disconnect from Angel One.",variant:"destructive"})}}),i=e==null?void 0:e.connected,o=e==null?void 0:e.authenticated,l=((d=r==null?void 0:r.profile)==null?void 0:d.name)||(e==null?void 0:e.clientCode)||"Not connected";return n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[n.jsx("span",{className:`w-2 h-2 rounded-full animate-pulse ${i&&o?"bg-green-500":"bg-gray-400"}`}),"Angel One Connection"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(H,{onClick:()=>s.mutate(),disabled:s.isPending||a.isPending,size:"sm",variant:"ghost",className:"h-8","data-testid":"button-angelone-refresh",title:"Refresh connection status",children:n.jsx(go,{className:`h-4 w-4 ${s.isPending?"animate-spin":""}`})}),i&&o&&n.jsx(H,{onClick:()=>{confirm("Are you sure you want to disconnect from Angel One?")&&a.mutate()},disabled:a.isPending||s.isPending,size:"sm",variant:"ghost",className:"h-8 text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20","data-testid":"button-angelone-disconnect",title:"Disconnect from Angel One",children:n.jsx(bA,{className:`h-4 w-4 ${a.isPending?"animate-spin":""}`})})]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${i?"bg-orange-100 dark:bg-orange-900/30":"bg-gray-100 dark:bg-gray-700"}`,children:n.jsx(Bc,{className:`h-4 w-4 ${i?"text-orange-600 dark:text-orange-400":"text-gray-400"}`})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-gray-900 dark:text-gray-100",children:i?"Connected":"Disconnected"}),n.jsx("p",{className:"text-xs text-gray-500",children:"API Status"})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${o?"bg-orange-100 dark:bg-orange-900/30":"bg-gray-100 dark:bg-gray-700"}`,children:n.jsx(Ax,{className:`h-4 w-4 ${o?"text-orange-600 dark:text-orange-400":"text-gray-400"}`})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-gray-900 dark:text-gray-100",children:o?"Authenticated":"Not Auth"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Auth Status"})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-8 h-8 bg-orange-50 dark:bg-orange-900/20 rounded-lg flex items-center justify-center",children:n.jsx(sm,{className:"h-4 w-4 text-orange-600 dark:text-orange-400"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-gray-900 dark:text-gray-100 truncate max-w-[80px]",children:l}),n.jsx("p",{className:"text-xs text-gray-500",children:"User"})]})]})]})]})}function ble(){var i,o;const{data:t}=xn({queryKey:["/api/angelone/statistics"],refetchInterval:5e3}),e=Math.min(((t==null?void 0:t.responseTime)||0)/100*100,100),r=(t==null?void 0:t.successRate)||0,s=parseFloat(((i=t==null?void 0:t.throughput)==null?void 0:i.split(" ")[0])||"0"),a=Math.min(s/5*100,100);return n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm p-4",children:[n.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-4 mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-orange-600 dark:text-orange-400",children:"Angel One API Statistics"}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Real-time API performance metrics"})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Average Response Time"}),n.jsxs("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:[(t==null?void 0:t.responseTime)||0,"ms"]})]}),n.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:n.jsx("div",{className:"bg-orange-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.max(e,5)}%`}})})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Success Rate"}),n.jsxs("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:[(t==null?void 0:t.successRate)||0,"%"]})]}),n.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:n.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${r}%`}})})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Data Throughput"}),n.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:(t==null?void 0:t.throughput)||"0 MB/s"})]}),n.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:n.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.max(a,5)}%`}})})]})]}),n.jsxs("div",{className:"mt-8 grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4 text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:(t==null?void 0:t.activeSymbols)||0}),n.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Active Symbols"})]}),n.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4 text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:((o=t==null?void 0:t.updatesPerSec)==null?void 0:o.toLocaleString())||0}),n.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Updates/sec"})]}),n.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4 text-center",children:[n.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:[(t==null?void 0:t.uptime)||0,"%"]}),n.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Uptime"})]}),n.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4 text-center",children:[n.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:[(t==null?void 0:t.latency)||0,"ms"]}),n.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Avg Latency"})]})]})]})}function wle(){const{data:t}=xn({queryKey:["/api/angelone/statistics"],refetchInterval:5e3}),{data:e}=xn({queryKey:["/api/angelone/activity-logs"],refetchInterval:1e4}),r=(e==null?void 0:e.logs)||[],s=o=>{try{const l=new Date(o);return isNaN(l.getTime())?"Invalid time":l.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",second:"2-digit",hour12:!0,timeZone:"Asia/Kolkata"})}catch{return"Invalid time"}},a=o=>{switch(o){case"success":return"bg-green-500";case"info":return"bg-blue-500";case"warning":return"bg-yellow-500";case"error":return"bg-red-500";default:return"bg-gray-400"}},i=o=>{try{const l=new Date,d=new Date(o);if(isNaN(d.getTime()))return"unknown";const h=Math.floor((l.getTime()-d.getTime())/6e4);return h<1?"just now":h<60?`${h} min ago`:`${Math.floor(h/60)} hr ago`}catch{return"unknown"}};return n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm p-4",children:[n.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-4 mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-orange-600 dark:text-orange-400",children:"Angel One System Status"}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Error handling and system notifications"})]}),n.jsxs("div",{className:`flex items-center space-x-3 p-4 rounded-lg ${t!=null&&t.connected?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"}`,children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${t!=null&&t.connected?"bg-green-100 dark:bg-green-800":"bg-red-100 dark:bg-red-800"}`,children:n.jsx(Bc,{className:`h-4 w-4 ${t!=null&&t.connected?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:t!=null&&t.connected?"All Systems Operational":"Connection Issues Detected"}),n.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:t!=null&&t.connected?"Angel One API connection stable, no errors detected":"Unable to connect to Angel One API, please check credentials"})]}),n.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:t!=null&&t.lastUpdate?i(t.lastUpdate):"Unknown"})]}),n.jsxs("div",{className:"mt-6",children:[n.jsx("h4",{className:"text-sm font-medium text-orange-600 dark:text-orange-400 mb-3",children:"Recent Activity"}),n.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:r.length>0?r.slice(0,5).map(o=>n.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[n.jsx("div",{className:`w-2 h-2 rounded-full ${a(o.type)}`}),n.jsx("span",{className:"text-gray-600 dark:text-gray-400 text-xs w-20",children:s(o.timestamp)}),n.jsx("span",{className:"text-gray-900 dark:text-gray-100 text-xs flex-1 truncate",children:o.message})]},o.id)):n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No recent activity"})})]})]})}function Nle(){var x,b,j,N,w,C;const[t,e]=g.useState(!0);g.useEffect(()=>{const T=()=>{e(document.visibilityState==="visible")};return document.addEventListener("visibilitychange",T),()=>document.removeEventListener("visibilitychange",T)},[]);const{data:r,isLoading:s,isError:a}=xn({queryKey:["/api/angelone/live-indices"],refetchInterval:t?700:!1,retry:t?2:0,staleTime:0,enabled:t}),i=T=>T===0?"--":T.toLocaleString("en-IN",{maximumFractionDigits:2}),o=(T,O)=>{if(T===0&&O===0)return"--";const I=T>=0?"+":"";return`${I}${T.toFixed(2)} (${I}${O.toFixed(2)}%)`},l=(T,O)=>{if(!O)return"bg-gray-100 dark:bg-gray-700 text-gray-500";switch(T){case"NSE":return"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400";case"BSE":return"bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400";case"MCX":return"bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400";default:return"bg-gray-100 dark:bg-gray-700 text-gray-500"}},d=[{symbol:"BANKNIFTY",name:"Bank Nifty",token:"99926009",exchange:"NSE",marketOpen:!1,ltp:0,change:0,changePercent:0,isLive:!1,open:0,high:0,low:0,close:0,volume:0,lastUpdate:null},{symbol:"SENSEX",name:"Sensex",token:"99919000",exchange:"BSE",marketOpen:!1,ltp:0,change:0,changePercent:0,isLive:!1,open:0,high:0,low:0,close:0,volume:0,lastUpdate:null},{symbol:"GOLD",name:"Gold",token:"99920003",exchange:"MCX",marketOpen:!1,ltp:0,change:0,changePercent:0,isLive:!1,open:0,high:0,low:0,close:0,volume:0,lastUpdate:null}],h=(r==null?void 0:r.connected)??!1,f=(r==null?void 0:r.websocketActive)??!1,m=r!=null&&r.indices&&r.indices.length>0?r.indices:d;return n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm p-4",children:[n.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-3 mb-4",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Jl,{className:"h-5 w-5 text-orange-600 dark:text-orange-400"}),n.jsx("h3",{className:"text-lg font-semibold text-orange-600 dark:text-orange-400",children:"Live Market Prices"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[f?n.jsx(jse,{className:"h-4 w-4 text-green-500"}):n.jsx(Nse,{className:"h-4 w-4 text-gray-400"}),n.jsx("span",{className:`text-xs font-medium ${f?"text-green-600 dark:text-green-400":"text-gray-500"}`,children:f?"WebSocket Active":"WebSocket Off"})]}),(s||a)&&n.jsx(Vo,{className:"h-4 w-4 animate-spin text-orange-500"})]})]}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:h?"Real-time 700ms tick data from Angel One API":"Waiting for Angel One connection..."}),a&&n.jsx("p",{className:"text-xs text-red-500 dark:text-red-400 mt-1",children:"Error fetching prices, retrying..."})]}),n.jsx("div",{className:"space-y-3",children:m.map(T=>n.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-50 dark:bg-gray-700/50 border border-gray-100 dark:border-gray-600","data-testid":`live-price-${T.symbol.toLowerCase()}`,children:[n.jsx("div",{className:"flex items-center gap-3",children:n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:T.name}),n.jsx(Sr,{variant:"outline",className:`text-xs px-1.5 py-0 ${l(T.exchange,T.marketOpen)}`,children:T.exchange}),T.isLive&&n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),n.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:"LIVE"})]}),!T.isLive&&T.ltp>0&&n.jsx("span",{className:"text-xs text-gray-500",children:"Last Close"})]}),n.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:T.marketOpen?"Market Open":"Market Closed"})]})}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[T.change!==0&&(T.change>=0?n.jsx(Gn,{className:"h-4 w-4 text-green-500"}):n.jsx($c,{className:"h-4 w-4 text-red-500"})),n.jsx("span",{className:"font-bold text-lg text-gray-900 dark:text-gray-100",children:i(T.ltp)})]}),n.jsx("span",{className:`text-sm font-medium ${T.change>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:o(T.change,T.changePercent)})]})]},T.symbol))}),n.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200 dark:border-gray-700",children:n.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[n.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),n.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["NSE ",(b=(x=r==null?void 0:r.indices)==null?void 0:x[0])!=null&&b.marketOpen?"Open":"Closed"]})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"w-2 h-2 rounded-full bg-purple-500"}),n.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["BSE ",(N=(j=r==null?void 0:r.indices)==null?void 0:j[1])!=null&&N.marketOpen?"Open":"Closed"]})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"w-2 h-2 rounded-full bg-amber-500"}),n.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["MCX ",(C=(w=r==null?void 0:r.indices)==null?void 0:w[2])!=null&&C.marketOpen?"Open":"Closed"]})]})]}),(r==null?void 0:r.timestamp)&&n.jsxs("span",{className:"text-xs text-gray-500",children:["Updated: ",new Date(r.timestamp).toLocaleTimeString("en-IN",{timeZone:"Asia/Kolkata"})]})]})})]})}function jle(){const{data:t,isLoading:e}=xn({queryKey:["/api/angelone/status"],refetchInterval:5e3}),r=yo({mutationFn:async()=>await Bp("POST","/api/angelone/connect-env"),onSuccess:()=>{Vi.invalidateQueries({queryKey:["/api/angelone/status"]}),Vi.invalidateQueries({queryKey:["/api/angelone/profile"]})}});return g.useEffect(()=>{!e&&t&&!t.connected&&!r.isPending&&(console.log(" [Angel One] Global auto-connect with environment credentials..."),r.mutate())},[e,t==null?void 0:t.connected]),null}function Sle({open:t,onOpenChange:e}){return n.jsx(bn,{open:t,onOpenChange:e,children:n.jsxs(pn,{className:"max-w-sm w-[90vw] pl-[5px] pr-[5px] pt-[12px] pb-[12px]",children:[n.jsxs(Zn,{className:"text-center",children:[n.jsx("div",{className:"flex justify-center mb-2",children:n.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center",children:n.jsx(Iq,{className:"h-6 w-6 text-white"})})}),n.jsx(Xn,{className:"text-xl font-bold text-center",children:"Trading Journal"}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 text-center",children:"Track Your Trading Progress"})]}),n.jsxs("div",{className:"py-4 space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg",children:[n.jsx(wm,{className:"h-5 w-5 text-blue-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium",children:"Daily Trade Tracking"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Record and monitor all your trades"})]})]}),n.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg",children:[n.jsx(ia,{className:"h-5 w-5 text-green-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium",children:"AI Performance Analysis"}),n.jsx("p",{className:"text-xs text-gray-500",children:"View detailed P&L and trading statistics"})]})]}),n.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg",children:[n.jsx(Gn,{className:"h-5 w-5 text-amber-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium",children:"Improve Your Trading"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Learn from your trading mistakes and patterns"})]})]}),n.jsxs("div",{className:"mt-1 p-2 bg-red-50/30 dark:bg-red-900/5 rounded-md border border-red-100/30 dark:border-red-900/10",children:[n.jsxs("p",{className:"text-[10px] leading-tight text-red-700/80 dark:text-red-400/80 font-medium text-center",children:["Aggregate Losses Exceed 1.8 Lakh Crores Over Three Years ",n.jsxs("div",{className:"inline-flex items-center gap-1 ml-1 bg-white/20 rounded px-1 py-0.5",children:[n.jsx($c,{className:"h-3 w-3"}),n.jsx(ia,{className:"h-3 w-3"})]})]}),n.jsx("div",{className:"mt-0.5 text-center",children:n.jsx("p",{className:"text-[8px] text-gray-600 dark:text-gray-400 font-medium uppercase tracking-tighter",children:"Top 3 Loss Traders States:"})}),n.jsxs("div",{className:"mt-0.5 flex items-center justify-center gap-2 py-1 px-2 bg-slate-50/70 dark:bg-slate-800/40 rounded-md border border-slate-100 dark:border-slate-700/60",children:[n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("span",{className:"text-[9px] text-gray-600 dark:text-gray-200 uppercase tracking-tighter",children:"Telangana"}),n.jsx("div",{className:"h-1 w-6 bg-red-600 dark:bg-red-500 rounded-full mt-0.5"})]}),n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("span",{className:"text-[9px] text-gray-600 dark:text-gray-200 uppercase tracking-tighter",children:"AP"}),n.jsx("div",{className:"h-1 w-4 bg-red-500 dark:bg-red-500 rounded-full mt-0.5"})]}),n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("span",{className:"text-[9px] text-gray-600 dark:text-gray-200 uppercase tracking-tighter",children:"Tamil Nadu"}),n.jsx("div",{className:"h-1 w-3 bg-red-400 dark:bg-red-500 rounded-full mt-0.5"})]})]})]}),n.jsx("div",{className:"mt-1.5 p-2 bg-red-50 dark:bg-red-900/10 border border-red-100/50 dark:border-red-900/20 rounded-lg space-y-1",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(rv,{className:"h-3 w-3 text-red-500 shrink-0 mt-0.5"}),n.jsxs("div",{className:"space-y-0.5",children:[n.jsx("p",{className:"text-[9px] leading-snug text-gray-700 dark:text-gray-300",children:"93% of over 1 crore individual F&O traders incurred average losses of around 2 lakh per trader (inclusive of transaction costs) during the three years from FY22 to FY24."}),n.jsx("p",{className:"text-[9px] leading-snug text-gray-700 dark:text-gray-300",children:"Only 1% of individual traders managed to earn profits exceeding 1 lakh, after adjusting for transaction costs."})]})]})})]}),n.jsx(H,{onClick:()=>e(!1),className:"w-full","data-testid":"button-close-journal-modal",children:"Got It"})]})})}const St=g.forwardRef(({className:t,...e},r)=>n.jsx("div",{ref:r,className:Ht("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));St.displayName="Card";const um=g.forwardRef(({className:t,...e},r)=>n.jsx("div",{ref:r,className:Ht("flex flex-col space-y-1.5 p-6",t),...e}));um.displayName="CardHeader";const hm=g.forwardRef(({className:t,...e},r)=>n.jsx("div",{ref:r,className:Ht("text-2xl font-semibold leading-none tracking-tight",t),...e}));hm.displayName="CardTitle";const Nb=g.forwardRef(({className:t,...e},r)=>n.jsx("div",{ref:r,className:Ht("text-sm text-muted-foreground",t),...e}));Nb.displayName="CardDescription";const Kt=g.forwardRef(({className:t,...e},r)=>n.jsx("div",{ref:r,className:Ht("p-6 pt-0",t),...e}));Kt.displayName="CardContent";const kle=g.forwardRef(({className:t,...e},r)=>n.jsx("div",{ref:r,className:Ht("flex items-center p-6 pt-0",t),...e}));kle.displayName="CardFooter";function Cle(){const{data:t,isLoading:e,error:r,isFetching:s}=xn({queryKey:["/api/signin-data-all"],queryFn:async()=>{try{const i=new AbortController,o=setTimeout(()=>i.abort(),5e3),l=await fetch("/api/signin-data-all",{signal:i.signal,headers:{Accept:"application/json"}});if(clearTimeout(o),!l.ok)throw new Error(`HTTP ${l.status}: ${l.statusText}`);return await l.json()}catch(i){return console.log(" Signin data not available:",i.message),{success:!0,recordsFound:3,source:"frontend_fallback_data",data:[{userId:"demo.user.1",email:"demo1@example.com",signupDate:"2025-09-07",lastUpdated:new Date().toISOString()},{userId:"demo.user.2",email:"demo2@example.com",signupDate:"2025-09-07",lastUpdated:new Date().toISOString()},{userId:"demo.user.3",email:"demo3@example.com",signupDate:"2025-09-07",lastUpdated:new Date().toISOString()}]}}},refetchInterval:3e4,staleTime:2e4,retry:0}),a=()=>{Vi.invalidateQueries({queryKey:["/api/signin-data-all"]})};return e?n.jsxs(St,{children:[n.jsxs(um,{children:[n.jsxs(hm,{className:"flex items-center gap-2 text-base",children:[n.jsx(Uo,{className:"h-5 w-5"}),"Sign In Data"]}),n.jsx(Nb,{children:"Google Cloud User Database"})]}),n.jsx(Kt,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"}),n.jsx("div",{className:"h-2 bg-gray-200 rounded animate-pulse"}),n.jsx("div",{className:"text-xs text-center text-muted-foreground",children:"Loading user data..."})]})})]}):r||!(t!=null&&t.success)?n.jsxs(St,{children:[n.jsxs(um,{children:[n.jsxs(hm,{className:"flex items-center gap-2 text-base",children:[n.jsx(Uo,{className:"h-5 w-5"}),"Sign In Data"]}),n.jsx(Nb,{children:"Google Cloud User Database"})]}),n.jsx(Kt,{children:n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx(sm,{className:"h-8 w-8 mx-auto text-orange-500"}),n.jsx("p",{className:"text-sm text-orange-600",children:"Connecting to Google Cloud..."}),n.jsxs(H,{variant:"outline",size:"sm",onClick:a,disabled:s,className:"flex items-center gap-2",children:[n.jsx(go,{className:Ht("h-4 w-4",s&&"animate-spin")}),"Retry"]})]})})]}):n.jsxs("div",{className:"space-y-4",children:[n.jsxs(St,{children:[n.jsx(um,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(hm,{className:"flex items-center gap-2 text-base",children:[n.jsx(Uo,{className:"h-5 w-5"}),"Sign In Data"]}),n.jsx(Nb,{children:" Google Cloud User Database Records"})]}),n.jsxs(H,{variant:"outline",size:"sm",onClick:a,disabled:s,className:"flex items-center gap-2","data-testid":"button-refresh-signin-data",children:[n.jsx(go,{className:Ht("h-4 w-4",s&&"animate-spin")}),"Refresh"]})]})}),n.jsxs(Kt,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-3 p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(y6,{className:"h-4 w-4 text-green-500"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-semibold",children:t.recordsFound}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Users"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Uo,{className:"h-4 w-4 text-blue-500"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-semibold",children:t.source}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Data Source"})]})]})]}),n.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:t.data&&t.data.length>0?t.data.map((i,o)=>n.jsxs("div",{className:"flex items-center justify-between p-2 border rounded-lg bg-white dark:bg-gray-800",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(Uo,{className:"h-3 w-3 text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:i.userId})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(rP,{className:"h-3 w-3 text-gray-400 flex-shrink-0"}),n.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:i.email})]})]}),n.jsx("div",{className:"text-xs text-muted-foreground text-right flex-shrink-0 ml-2",children:new Date(i.signupDate).toLocaleDateString()})]},`${i.userId}-${o}`)):n.jsxs("div",{className:"text-center py-4",children:[n.jsx(Uo,{className:"h-8 w-8 mx-auto text-gray-400 mb-2"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"No user data found"})]})}),n.jsxs("div",{className:"pt-2 border-t",children:[n.jsx("div",{className:"flex items-center gap-2",children:t.success?n.jsxs(n.Fragment,{children:[n.jsx(y6,{className:"h-4 w-4 text-green-500"}),n.jsx("span",{className:"text-sm text-green-600",children:"Connected to Google Cloud Database"})]}):n.jsxs(n.Fragment,{children:[n.jsx(sm,{className:"h-4 w-4 text-orange-500"}),n.jsx("span",{className:"text-sm text-orange-600",children:"Connecting to Google Cloud..."})]})}),n.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:" Separate signin database | Real-time user data"})]})]})]}),n.jsx(Ele,{})]})}function Ele(){const[t,e]=g.useState(""),[r,s]=g.useState(null),{toast:a}=Ia();g.useEffect(()=>{const l=localStorage.getItem("youtube_banner_url");l&&(s(l),e(l))},[]);const i=()=>{var d,h;if(!t.trim()){a({title:"Error",description:"Please enter a valid YouTube link",variant:"destructive"});return}let l=t;t.includes("youtube.com/watch?v=")?l=`https://www.youtube.com/embed/${(d=t.split("v=")[1])==null?void 0:d.split("&")[0]}?enablejsapi=1`:t.includes("youtu.be/")?l=`https://www.youtube.com/embed/${(h=t.split("youtu.be/")[1])==null?void 0:h.split("?")[0]}?enablejsapi=1`:t.includes("/embed/")||(l=`${t}${t.includes("?")?"&":"?"}enablejsapi=1`),localStorage.setItem("youtube_banner_url",l),s(l),window.dispatchEvent(new CustomEvent("livestream-url-updated",{detail:{url:l}})),a({title:" Connected",description:"YouTube video is now playing on Social Feed banner!"})},o=()=>{localStorage.removeItem("youtube_banner_url"),e(""),s(null),window.dispatchEvent(new CustomEvent("livestream-url-updated",{detail:{url:""}})),a({title:"Cleared",description:"Banner reset to default"})};return n.jsxs(St,{children:[n.jsxs(um,{children:[n.jsxs(hm,{className:"flex items-center gap-2 text-base",children:[n.jsx(Vg,{className:"h-5 w-5"}),"Livestream Ads"]}),n.jsx(Nb,{children:"Insert YouTube link to display on Social Feed banner"})]}),n.jsxs(Kt,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"YouTube Link"}),n.jsx(Nr,{type:"text",placeholder:"https://youtube.com/watch?v=... or https://youtu.be/...",value:t,onChange:l=>e(l.target.value),"data-testid":"input-stream-link"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Paste any YouTube URL (watch, embed, or short link)"})]}),r&&n.jsxs("div",{className:"p-2 bg-green-50 dark:bg-green-900/20 rounded border border-green-200 dark:border-green-800",children:[n.jsx("p",{className:"text-xs text-green-700 dark:text-green-400 font-medium",children:" Active Banner URL"}),n.jsx("p",{className:"text-xs text-green-600 dark:text-green-500 truncate mt-1",children:r})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(H,{className:"flex-1 bg-green-500 hover:bg-green-600 text-white",onClick:i,"data-testid":"button-connect-stream",children:"Connect"}),r&&n.jsx(H,{variant:"outline",onClick:o,"data-testid":"button-clear-stream",children:"Clear"})]})]})]})}const wW=g.forwardRef(function({images:e=[],onImagesChange:r},s){const[a,i]=g.useState([]),[o,l]=g.useState(0),[d,h]=g.useState(!1),[f,m]=g.useState(0),[x,b]=g.useState(!1),[j,N]=g.useState(null),[w,C]=g.useState(null),[T,O]=g.useState({}),[I,P]=g.useState(null),A=g.useRef(null),R=g.useRef(0),B=g.useRef(0),V=g.useRef(null),{toast:X}=Ia();g.useEffect(()=>{i(e)},[e]);const ee=g.useCallback(he=>{i(he),r==null||r(he)},[r]);g.useImperativeHandle(s,()=>({getCurrentImages:()=>a}),[a]);const Y=he=>{h(!0);const ue=[];let ce=0;he.forEach(Ee=>{const Le=new FileReader;Le.onload=Ie=>{var Ue;if(ue.push({id:Math.random().toString(36).substr(2,9),url:(Ue=Ie.target)==null?void 0:Ue.result,name:Ee.name,file:Ee}),ce++,ce===he.length){const Ae=[...a,...ue];ee(Ae),h(!1),X({title:"Images uploaded",description:`Added ${ue.length} image(s)`})}},Le.readAsDataURL(Ee)})},re=he=>{const ue=Array.from(he.target.files||[]);ue.length>0&&Y(ue),A.current&&(A.current.value="")},le=()=>{l((o-1+(a.length>0?a.length:5))%(a.length>0?a.length:5))},te=()=>{l((o+1)%(a.length>0?a.length:5))},de=he=>{R.current=he.touches[0].clientX,B.current=he.touches[0].clientY,b(!0),m(0)},ie=he=>{if(!x)return;const ue=he.touches[0].clientX,ce=he.touches[0].clientY,Ee=ue-R.current;Math.abs(ce-B.current)<50&&m(Ee)},Z=he=>{b(!1);const ue=50;f>ue?le():f<-ue&&te(),m(0)},ne=he=>{R.current=he.clientX,B.current=he.clientY,b(!0),m(0)},oe=he=>{if(!x)return;const ue=he.clientX,ce=he.clientY,Ee=ue-R.current;Math.abs(ce-B.current)<50&&m(Ee)},U=()=>{b(!1);const he=50;f>he?le():f<-he&&te(),m(0)},be=[{id:"card-1",label:"Upload Image"},{id:"card-2",label:"Upload Articles Images"},{id:"card-3",label:"Technical Analysis"},{id:"card-4",label:"Fundamentals"},{id:"card-5",label:"Strategy Image"}].map((he,ue)=>({...he,image:a[ue]||null})),pe=be.filter(he=>he.image!==null),ge=be.filter(he=>he.image===null),Ce=[...pe,...ge];return n.jsxs("div",{className:"w-full h-full flex flex-col bg-transparent relative overflow-hidden",onPaste:he=>{var ce;he.preventDefault();const ue=(ce=he.clipboardData)==null?void 0:ce.items;if(ue){const Ee=[];for(let Le=0;Le<ue.length;Le++)if(ue[Le].kind==="file"&&ue[Le].type.startsWith("image/")){const Ie=ue[Le].getAsFile();Ie&&Ee.push(Ie)}Ee.length>0&&Y(Ee)}},children:[n.jsx("div",{ref:V,className:`flex-1 relative bg-transparent flex items-center justify-center select-none cursor-grab active:cursor-grabbing transition-opacity ${j?"opacity-0 pointer-events-none":""}`,onTouchStart:de,onTouchMove:ie,onTouchEnd:Z,onMouseDown:ne,onMouseMove:oe,onMouseUp:U,onMouseLeave:U,children:n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:Ce.map((he,ue)=>{let Ee=ue-o;const Le=Ce.length;if(Ee<-Le/2?Ee+=Le:Ee>Le/2&&(Ee-=Le),Math.abs(Ee)>2)return null;const Ie=x&&Ee===0?f:0,Ue=x&&Ee===0?f*.15:0,Ae=Ee*8+Ue,We=Ee*45+Ie*.3,ot=Math.abs(Ee)*15,It=1-Math.abs(Ee)*.06,tr=10-Math.abs(Ee),Ct=Ee===0?1:.65;return n.jsx("div",{className:`absolute ${x?"":"transition-all duration-400 ease-out"}`,style:{transform:`translateX(${We}px) translateY(${ot}px) scale(${It}) rotate(${Ae}deg)`,zIndex:tr,opacity:Ct},children:n.jsx("div",{className:"relative rounded-2xl overflow-hidden shadow-lg bg-gray-100 dark:bg-black border border-gray-200 dark:border-gray-700 cursor-pointer transition-transform hover:scale-105",style:{width:"200px",height:"150px"},onClick:()=>{var we;he.image?(C(ue),N(he.image)):(we=A.current)==null||we.click()},children:he.image?n.jsx("div",{className:"w-full h-full bg-gray-50 dark:bg-gray-800 flex items-center justify-center overflow-hidden",children:n.jsx("img",{src:he.image.url,alt:he.label,className:"w-full h-full object-contain pointer-events-none","data-testid":`img-card-${ue}`})}):n.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center gap-2 p-3 bg-gray-200 dark:bg-gray-900",children:[n.jsx(vi,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"}),n.jsx("span",{className:"text-gray-800 dark:text-white text-xs font-medium text-center line-clamp-2",children:he.label}),n.jsx("span",{className:"text-gray-600 dark:text-gray-300 text-xs opacity-75",children:"Paste or upload"})]})})},he.id)})})}),n.jsxs("div",{className:"h-16 relative bg-transparent flex items-center justify-center overflow-hidden",children:[n.jsx("svg",{className:"absolute inset-0 w-full h-full opacity-40",viewBox:"0 0 800 60",preserveAspectRatio:"none",children:n.jsx("path",{d:"M 0 15 Q 400 50, 800 15",stroke:"#9ca3af",strokeWidth:"1.5",fill:"none"})}),n.jsx("div",{className:`relative z-10 bg-gray-500 dark:bg-gray-600 text-white rounded-full w-8 h-8 flex items-center justify-center text-xs font-semibold shadow-md border border-gray-400 dark:border-gray-500 ${x?"":"transition-transform duration-400 ease-out"}`,style:{transform:`translateX(${f*.5}px)`},children:a.length===0?`${o+1}/5`:`${Math.min(o+1,a.length)}/${a.length}`})]}),n.jsx("input",{type:"file",ref:A,onChange:re,multiple:!0,accept:"image/*",className:"hidden","data-testid":"input-file-upload"}),w!==null&&n.jsxs("div",{className:"fixed inset-0 z-50 bg-black/70 backdrop-blur-sm p-4 animate-in fade-in duration-300 flex flex-col items-center justify-center",onClick:()=>{C(null),N(null)},onTouchStart:he=>{R.current=he.touches[0].clientX,B.current=0},onTouchMove:he=>{const ue=he.touches[0].clientX,ce=ue-R.current;if(Math.abs(ce)>50){const Ee=Ce.findIndex(Le=>{var Ie;return((Ie=Le.image)==null?void 0:Ie.id)===j.id});if(ce>0){const Le=Ee>0?Ee-1:Ce.length-1;Ce[Le].image&&N(Ce[Le].image)}else{const Le=Ee<Ce.length-1?Ee+1:0;Ce[Le].image&&N(Ce[Le].image)}R.current=ue}},children:[n.jsxs("div",{className:"relative bg-white dark:bg-gray-900 rounded-2xl shadow-2xl max-w-2xl w-full h-auto flex-shrink-0 animate-modal-bounce flex flex-col",style:{maxHeight:"calc(100vh - 300px)"},onClick:he=>he.stopPropagation(),children:[n.jsx("button",{onClick:()=>{C(null),N(null)},className:"absolute top-4 right-4 z-10 p-2 bg-white dark:bg-gray-800 rounded-full shadow-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","data-testid":"button-close-modal",children:n.jsx(Wr,{className:"w-5 h-5 text-gray-800 dark:text-white"})}),n.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50 dark:bg-gray-800 rounded-t-2xl overflow-hidden min-h-96",children:j?n.jsx("img",{src:j.url,alt:j.name,className:"max-w-full max-h-full object-contain pointer-events-none","data-testid":"img-modal-display"}):n.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 p-8 text-center",children:[n.jsx(vi,{className:"w-8 h-8 text-gray-400 dark:text-gray-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"No image added"}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Click button below to upload or paste an image"})]})]})}),n.jsx("div",{className:"p-3 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 rounded-b-2xl flex items-center justify-between gap-3",children:j?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>P(I===j.id?null:j.id),className:"flex-shrink-0 p-1.5 rounded hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","data-testid":"button-edit-caption",children:n.jsx(Rq,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}),n.jsx("div",{className:"flex-1",children:I===j.id?n.jsx("input",{type:"text",value:T[j.id]||"",onChange:he=>O(ue=>({...ue,[j.id]:he.target.value})),placeholder:"Add caption...",autoFocus:!0,className:"w-full text-xs bg-gray-50 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded px-2 py-1 text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-1 focus:ring-blue-500","data-testid":"input-caption"}):n.jsx("p",{className:"text-xs font-medium text-center text-gray-800 dark:text-gray-100 truncate",children:T[j.id]||j.name})}),n.jsx("button",{onClick:()=>{i(a.filter(he=>he.id!==j.id)),O(he=>{const ue={...he};return delete ue[j.id],ue}),N(null),X({title:"Image deleted",description:"The image has been removed"})},className:"flex-shrink-0 p-1.5 rounded hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors","data-testid":"button-delete-image",children:n.jsx(za,{className:"w-4 h-4 text-red-600 dark:text-red-400"})})]}):n.jsx("button",{onClick:()=>{var he;return(he=A.current)==null?void 0:he.click()},className:"w-full py-2 px-3 bg-blue-600 dark:bg-blue-700 hover:bg-blue-700 dark:hover:bg-blue-800 text-white rounded text-xs font-medium transition-colors","data-testid":"button-upload-from-dialog",children:"Click to upload image"})})]}),n.jsx("div",{className:"flex gap-2 mt-6 overflow-x-auto pb-2 w-full items-center justify-center flex-shrink-0",onTouchStart:he=>{R.current=he.touches[0].clientX},onTouchMove:he=>{const ue=he.touches[0].clientX,ce=ue-R.current;if(Math.abs(ce)>50){const Ee=Ce.findIndex(Le=>{var Ie;return((Ie=Le.image)==null?void 0:Ie.id)===j.id});if(ce>0){const Le=Ee>0?Ee-1:Ce.length-1;Ce[Le].image&&N(Ce[Le].image)}else{const Le=Ee<Ce.length-1?Ee+1:0;Ce[Le].image&&N(Ce[Le].image)}R.current=ue}},style:{maxWidth:"500px"},children:Ce.map((he,ue)=>n.jsx("button",{onClick:ce=>{ce.stopPropagation(),C(ue),he.image?N(he.image):N(null)},className:`flex-shrink-0 rounded-md overflow-hidden transition-all cursor-pointer ${w===ue&&he.image&&(j==null?void 0:j.id)===he.image.id?"ring-2 ring-white":w===ue?"ring-2 ring-blue-400":he.image?"opacity-70 hover:opacity-100":"opacity-40 hover:opacity-60"}`,style:{width:"48px",height:"48px"},"data-testid":`button-thumbnail-${ue}`,children:he.image?n.jsx("img",{src:he.image.url,alt:he.image.name,className:"w-full h-full object-cover"}):n.jsx("div",{className:"w-full h-full bg-gray-300 dark:bg-gray-600 flex items-center justify-center text-xs text-gray-500 dark:text-gray-400"})},he.id))})]})]})}),Tle="modulepreload",Ple=function(t){return"/"+t},Y6={},Ale=function(e,r,s){let a=Promise.resolve();if(r&&r.length>0){let o=function(h){return Promise.all(h.map(f=>Promise.resolve(f).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),d=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=o(r.map(h=>{if(h=Ple(h),h in Y6)return;Y6[h]=!0;const f=h.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${m}`))return;const x=document.createElement("link");if(x.rel=f?"stylesheet":Tle,f||(x.as="script"),x.crossOrigin="",x.href=h,d&&x.setAttribute("nonce",d),document.head.appendChild(x),f)return new Promise((b,j)=>{x.addEventListener("load",b),x.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},qp=g.forwardRef(({className:t,...e},r)=>n.jsx("textarea",{className:Ht("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...e}));qp.displayName="Textarea";var _le="Label",NW=g.forwardRef((t,e)=>n.jsx(lr.label,{...t,ref:e,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=t.onMouseDown)==null||a.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));NW.displayName=_le;var jW=NW;const Ile=K2("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Un=g.forwardRef(({className:t,...e},r)=>n.jsx(jW,{ref:r,className:Ht(Ile(),t),...e}));Un.displayName=jW.displayName;function K6(t,[e,r]){return Math.min(r,Math.max(e,t))}function SW(t){const e=g.useRef({value:t,previous:t});return g.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Mle=[" ","Enter","ArrowUp","ArrowDown"],Ole=[" ","Enter"],y0="Select",[fS,mS,Rle]=H2(y0),[iv]=Hc(y0,[Rle,Jp]),pS=Jp(),[Dle,Zp]=iv(y0),[$le,Lle]=iv(y0),kW=t=>{const{__scopeSelect:e,children:r,open:s,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:d,dir:h,name:f,autoComplete:m,disabled:x,required:b,form:j}=t,N=pS(e),[w,C]=g.useState(null),[T,O]=g.useState(null),[I,P]=g.useState(!1),A=cS(h),[R,B]=bm({prop:s,defaultProp:a??!1,onChange:i,caller:y0}),[V,X]=bm({prop:o,defaultProp:l,onChange:d,caller:y0}),ee=g.useRef(null),Y=w?j||!!w.closest("form"):!0,[re,le]=g.useState(new Set),te=Array.from(re).map(de=>de.props.value).join(";");return n.jsx(IA,{...N,children:n.jsxs(Dle,{required:b,scope:e,trigger:w,onTriggerChange:C,valueNode:T,onValueNodeChange:O,valueNodeHasChildren:I,onValueNodeHasChildrenChange:P,contentId:wo(),value:V,onValueChange:X,open:R,onOpenChange:B,dir:A,triggerPointerDownPosRef:ee,disabled:x,children:[n.jsx(fS.Provider,{scope:e,children:n.jsx($le,{scope:t.__scopeSelect,onNativeOptionAdd:g.useCallback(de=>{le(ie=>new Set(ie).add(de))},[]),onNativeOptionRemove:g.useCallback(de=>{le(ie=>{const Z=new Set(ie);return Z.delete(de),Z})},[]),children:r})}),Y?n.jsxs(GW,{"aria-hidden":!0,required:b,tabIndex:-1,name:f,autoComplete:m,value:V,onChange:de=>X(de.target.value),disabled:x,form:j,children:[V===void 0?n.jsx("option",{value:""}):null,Array.from(re)]},te):null]})})};kW.displayName=y0;var CW="SelectTrigger",EW=g.forwardRef((t,e)=>{const{__scopeSelect:r,disabled:s=!1,...a}=t,i=pS(r),o=Zp(CW,r),l=o.disabled||s,d=$n(e,o.onTriggerChange),h=mS(r),f=g.useRef("touch"),[m,x,b]=QW(N=>{const w=h().filter(O=>!O.disabled),C=w.find(O=>O.value===o.value),T=JW(w,N,C);T!==void 0&&o.onValueChange(T.value)}),j=N=>{l||(o.onOpenChange(!0),b()),N&&(o.triggerPointerDownPosRef.current={x:Math.round(N.pageX),y:Math.round(N.pageY)})};return n.jsx(t1,{asChild:!0,...i,children:n.jsx(lr.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":XW(o.value)?"":void 0,...a,ref:d,onClick:At(a.onClick,N=>{N.currentTarget.focus(),f.current!=="mouse"&&j(N)}),onPointerDown:At(a.onPointerDown,N=>{f.current=N.pointerType;const w=N.target;w.hasPointerCapture(N.pointerId)&&w.releasePointerCapture(N.pointerId),N.button===0&&N.ctrlKey===!1&&N.pointerType==="mouse"&&(j(N),N.preventDefault())}),onKeyDown:At(a.onKeyDown,N=>{const w=m.current!=="";!(N.ctrlKey||N.altKey||N.metaKey)&&N.key.length===1&&x(N.key),!(w&&N.key===" ")&&Mle.includes(N.key)&&(j(),N.preventDefault())})})})});EW.displayName=CW;var TW="SelectValue",PW=g.forwardRef((t,e)=>{const{__scopeSelect:r,className:s,style:a,children:i,placeholder:o="",...l}=t,d=Zp(TW,r),{onValueNodeHasChildrenChange:h}=d,f=i!==void 0,m=$n(e,d.onValueNodeChange);return ii(()=>{h(f)},[h,f]),n.jsx(lr.span,{...l,ref:m,style:{pointerEvents:"none"},children:XW(d.value)?n.jsx(n.Fragment,{children:o}):i})});PW.displayName=TW;var Fle="SelectIcon",AW=g.forwardRef((t,e)=>{const{__scopeSelect:r,children:s,...a}=t;return n.jsx(lr.span,{"aria-hidden":!0,...a,ref:e,children:s||""})});AW.displayName=Fle;var Ble="SelectPortal",_W=t=>n.jsx(tv,{asChild:!0,...t});_W.displayName=Ble;var v0="SelectContent",IW=g.forwardRef((t,e)=>{const r=Zp(v0,t.__scopeSelect),[s,a]=g.useState();if(ii(()=>{a(new DocumentFragment)},[]),!r.open){const i=s;return i?ev.createPortal(n.jsx(MW,{scope:t.__scopeSelect,children:n.jsx(fS.Slot,{scope:t.__scopeSelect,children:n.jsx("div",{children:t.children})})}),i):null}return n.jsx(OW,{...t,ref:e})});IW.displayName=v0;var Cu=10,[MW,eg]=iv(v0),Ule="SelectContentImpl",zle=Up("SelectContent.RemoveScroll"),OW=g.forwardRef((t,e)=>{const{__scopeSelect:r,position:s="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:d,align:h,alignOffset:f,arrowPadding:m,collisionBoundary:x,collisionPadding:b,sticky:j,hideWhenDetached:N,avoidCollisions:w,...C}=t,T=Zp(v0,r),[O,I]=g.useState(null),[P,A]=g.useState(null),R=$n(e,he=>I(he)),[B,V]=g.useState(null),[X,ee]=g.useState(null),Y=mS(r),[re,le]=g.useState(!1),te=g.useRef(!1);g.useEffect(()=>{if(O)return oS(O)},[O]),aS();const de=g.useCallback(he=>{const[ue,...ce]=Y().map(Ie=>Ie.ref.current),[Ee]=ce.slice(-1),Le=document.activeElement;for(const Ie of he)if(Ie===Le||(Ie==null||Ie.scrollIntoView({block:"nearest"}),Ie===ue&&P&&(P.scrollTop=0),Ie===Ee&&P&&(P.scrollTop=P.scrollHeight),Ie==null||Ie.focus(),document.activeElement!==Le))return},[Y,P]),ie=g.useCallback(()=>de([B,O]),[de,B,O]);g.useEffect(()=>{re&&ie()},[re,ie]);const{onOpenChange:Z,triggerPointerDownPosRef:ne}=T;g.useEffect(()=>{if(O){let he={x:0,y:0};const ue=Ee=>{var Le,Ie;he={x:Math.abs(Math.round(Ee.pageX)-(((Le=ne.current)==null?void 0:Le.x)??0)),y:Math.abs(Math.round(Ee.pageY)-(((Ie=ne.current)==null?void 0:Ie.y)??0))}},ce=Ee=>{he.x<=10&&he.y<=10?Ee.preventDefault():O.contains(Ee.target)||Z(!1),document.removeEventListener("pointermove",ue),ne.current=null};return ne.current!==null&&(document.addEventListener("pointermove",ue),document.addEventListener("pointerup",ce,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ue),document.removeEventListener("pointerup",ce,{capture:!0})}}},[O,Z,ne]),g.useEffect(()=>{const he=()=>Z(!1);return window.addEventListener("blur",he),window.addEventListener("resize",he),()=>{window.removeEventListener("blur",he),window.removeEventListener("resize",he)}},[Z]);const[oe,U]=QW(he=>{const ue=Y().filter(Le=>!Le.disabled),ce=ue.find(Le=>Le.ref.current===document.activeElement),Ee=JW(ue,he,ce);Ee&&setTimeout(()=>Ee.ref.current.focus())}),W=g.useCallback((he,ue,ce)=>{const Ee=!te.current&&!ce;(T.value!==void 0&&T.value===ue||Ee)&&(V(he),Ee&&(te.current=!0))},[T.value]),be=g.useCallback(()=>O==null?void 0:O.focus(),[O]),pe=g.useCallback((he,ue,ce)=>{const Ee=!te.current&&!ce;(T.value!==void 0&&T.value===ue||Ee)&&ee(he)},[T.value]),ge=s==="popper"?hP:RW,Ce=ge===hP?{side:l,sideOffset:d,align:h,alignOffset:f,arrowPadding:m,collisionBoundary:x,collisionPadding:b,sticky:j,hideWhenDetached:N,avoidCollisions:w}:{};return n.jsx(MW,{scope:r,content:O,viewport:P,onViewportChange:A,itemRefCallback:W,selectedItem:B,onItemLeave:be,itemTextRefCallback:pe,focusSelectedItem:ie,selectedItemText:X,position:s,isPositioned:re,searchRef:oe,children:n.jsx(n1,{as:zle,allowPinchZoom:!0,children:n.jsx(r1,{asChild:!0,trapped:T.open,onMountAutoFocus:he=>{he.preventDefault()},onUnmountAutoFocus:At(a,he=>{var ue;(ue=T.trigger)==null||ue.focus({preventScroll:!0}),he.preventDefault()}),children:n.jsx(L0,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:he=>he.preventDefault(),onDismiss:()=>T.onOpenChange(!1),children:n.jsx(ge,{role:"listbox",id:T.contentId,"data-state":T.open?"open":"closed",dir:T.dir,onContextMenu:he=>he.preventDefault(),...C,...Ce,onPlaced:()=>le(!0),ref:R,style:{display:"flex",flexDirection:"column",outline:"none",...C.style},onKeyDown:At(C.onKeyDown,he=>{const ue=he.ctrlKey||he.altKey||he.metaKey;if(he.key==="Tab"&&he.preventDefault(),!ue&&he.key.length===1&&U(he.key),["ArrowUp","ArrowDown","Home","End"].includes(he.key)){let Ee=Y().filter(Le=>!Le.disabled).map(Le=>Le.ref.current);if(["ArrowUp","End"].includes(he.key)&&(Ee=Ee.slice().reverse()),["ArrowUp","ArrowDown"].includes(he.key)){const Le=he.target,Ie=Ee.indexOf(Le);Ee=Ee.slice(Ie+1)}setTimeout(()=>de(Ee)),he.preventDefault()}})})})})})})});OW.displayName=Ule;var Vle="SelectItemAlignedPosition",RW=g.forwardRef((t,e)=>{const{__scopeSelect:r,onPlaced:s,...a}=t,i=Zp(v0,r),o=eg(v0,r),[l,d]=g.useState(null),[h,f]=g.useState(null),m=$n(e,R=>f(R)),x=mS(r),b=g.useRef(!1),j=g.useRef(!0),{viewport:N,selectedItem:w,selectedItemText:C,focusSelectedItem:T}=o,O=g.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&h&&N&&w&&C){const R=i.trigger.getBoundingClientRect(),B=h.getBoundingClientRect(),V=i.valueNode.getBoundingClientRect(),X=C.getBoundingClientRect();if(i.dir!=="rtl"){const Le=X.left-B.left,Ie=V.left-Le,Ue=R.left-Ie,Ae=R.width+Ue,We=Math.max(Ae,B.width),ot=window.innerWidth-Cu,It=K6(Ie,[Cu,Math.max(Cu,ot-We)]);l.style.minWidth=Ae+"px",l.style.left=It+"px"}else{const Le=B.right-X.right,Ie=window.innerWidth-V.right-Le,Ue=window.innerWidth-R.right-Ie,Ae=R.width+Ue,We=Math.max(Ae,B.width),ot=window.innerWidth-Cu,It=K6(Ie,[Cu,Math.max(Cu,ot-We)]);l.style.minWidth=Ae+"px",l.style.right=It+"px"}const ee=x(),Y=window.innerHeight-Cu*2,re=N.scrollHeight,le=window.getComputedStyle(h),te=parseInt(le.borderTopWidth,10),de=parseInt(le.paddingTop,10),ie=parseInt(le.borderBottomWidth,10),Z=parseInt(le.paddingBottom,10),ne=te+de+re+Z+ie,oe=Math.min(w.offsetHeight*5,ne),U=window.getComputedStyle(N),W=parseInt(U.paddingTop,10),be=parseInt(U.paddingBottom,10),pe=R.top+R.height/2-Cu,ge=Y-pe,Ce=w.offsetHeight/2,he=w.offsetTop+Ce,ue=te+de+he,ce=ne-ue;if(ue<=pe){const Le=ee.length>0&&w===ee[ee.length-1].ref.current;l.style.bottom="0px";const Ie=h.clientHeight-N.offsetTop-N.offsetHeight,Ue=Math.max(ge,Ce+(Le?be:0)+Ie+ie),Ae=ue+Ue;l.style.height=Ae+"px"}else{const Le=ee.length>0&&w===ee[0].ref.current;l.style.top="0px";const Ue=Math.max(pe,te+N.offsetTop+(Le?W:0)+Ce)+ce;l.style.height=Ue+"px",N.scrollTop=ue-pe+N.offsetTop}l.style.margin=`${Cu}px 0`,l.style.minHeight=oe+"px",l.style.maxHeight=Y+"px",s==null||s(),requestAnimationFrame(()=>b.current=!0)}},[x,i.trigger,i.valueNode,l,h,N,w,C,i.dir,s]);ii(()=>O(),[O]);const[I,P]=g.useState();ii(()=>{h&&P(window.getComputedStyle(h).zIndex)},[h]);const A=g.useCallback(R=>{R&&j.current===!0&&(O(),T==null||T(),j.current=!1)},[O,T]);return n.jsx(Hle,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:b,onScrollButtonChange:A,children:n.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:I},children:n.jsx(lr.div,{...a,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});RW.displayName=Vle;var qle="SelectPopperPosition",hP=g.forwardRef((t,e)=>{const{__scopeSelect:r,align:s="start",collisionPadding:a=Cu,...i}=t,o=pS(r);return n.jsx(tS,{...o,...i,ref:e,align:s,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});hP.displayName=qle;var[Hle,VA]=iv(v0,{}),fP="SelectViewport",DW=g.forwardRef((t,e)=>{const{__scopeSelect:r,nonce:s,...a}=t,i=eg(fP,r),o=VA(fP,r),l=$n(e,i.onViewportChange),d=g.useRef(0);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),n.jsx(fS.Slot,{scope:r,children:n.jsx(lr.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:At(a.onScroll,h=>{const f=h.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:x}=o;if(x!=null&&x.current&&m){const b=Math.abs(d.current-f.scrollTop);if(b>0){const j=window.innerHeight-Cu*2,N=parseFloat(m.style.minHeight),w=parseFloat(m.style.height),C=Math.max(N,w);if(C<j){const T=C+b,O=Math.min(j,T),I=T-O;m.style.height=O+"px",m.style.bottom==="0px"&&(f.scrollTop=I>0?I:0,m.style.justifyContent="flex-end")}}}d.current=f.scrollTop})})})]})});DW.displayName=fP;var $W="SelectGroup",[Wle,Yle]=iv($W),Kle=g.forwardRef((t,e)=>{const{__scopeSelect:r,...s}=t,a=wo();return n.jsx(Wle,{scope:r,id:a,children:n.jsx(lr.div,{role:"group","aria-labelledby":a,...s,ref:e})})});Kle.displayName=$W;var LW="SelectLabel",FW=g.forwardRef((t,e)=>{const{__scopeSelect:r,...s}=t,a=Yle(LW,r);return n.jsx(lr.div,{id:a.id,...s,ref:e})});FW.displayName=LW;var xj="SelectItem",[Gle,BW]=iv(xj),UW=g.forwardRef((t,e)=>{const{__scopeSelect:r,value:s,disabled:a=!1,textValue:i,...o}=t,l=Zp(xj,r),d=eg(xj,r),h=l.value===s,[f,m]=g.useState(i??""),[x,b]=g.useState(!1),j=$n(e,T=>{var O;return(O=d.itemRefCallback)==null?void 0:O.call(d,T,s,a)}),N=wo(),w=g.useRef("touch"),C=()=>{a||(l.onValueChange(s),l.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return n.jsx(Gle,{scope:r,value:s,disabled:a,textId:N,isSelected:h,onItemTextChange:g.useCallback(T=>{m(O=>O||((T==null?void 0:T.textContent)??"").trim())},[]),children:n.jsx(fS.ItemSlot,{scope:r,value:s,disabled:a,textValue:f,children:n.jsx(lr.div,{role:"option","aria-labelledby":N,"data-highlighted":x?"":void 0,"aria-selected":h&&x,"data-state":h?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:j,onFocus:At(o.onFocus,()=>b(!0)),onBlur:At(o.onBlur,()=>b(!1)),onClick:At(o.onClick,()=>{w.current!=="mouse"&&C()}),onPointerUp:At(o.onPointerUp,()=>{w.current==="mouse"&&C()}),onPointerDown:At(o.onPointerDown,T=>{w.current=T.pointerType}),onPointerMove:At(o.onPointerMove,T=>{var O;w.current=T.pointerType,a?(O=d.onItemLeave)==null||O.call(d):w.current==="mouse"&&T.currentTarget.focus({preventScroll:!0})}),onPointerLeave:At(o.onPointerLeave,T=>{var O;T.currentTarget===document.activeElement&&((O=d.onItemLeave)==null||O.call(d))}),onKeyDown:At(o.onKeyDown,T=>{var I;((I=d.searchRef)==null?void 0:I.current)!==""&&T.key===" "||(Ole.includes(T.key)&&C(),T.key===" "&&T.preventDefault())})})})})});UW.displayName=xj;var db="SelectItemText",zW=g.forwardRef((t,e)=>{const{__scopeSelect:r,className:s,style:a,...i}=t,o=Zp(db,r),l=eg(db,r),d=BW(db,r),h=Lle(db,r),[f,m]=g.useState(null),x=$n(e,C=>m(C),d.onItemTextChange,C=>{var T;return(T=l.itemTextRefCallback)==null?void 0:T.call(l,C,d.value,d.disabled)}),b=f==null?void 0:f.textContent,j=g.useMemo(()=>n.jsx("option",{value:d.value,disabled:d.disabled,children:b},d.value),[d.disabled,d.value,b]),{onNativeOptionAdd:N,onNativeOptionRemove:w}=h;return ii(()=>(N(j),()=>w(j)),[N,w,j]),n.jsxs(n.Fragment,{children:[n.jsx(lr.span,{id:d.textId,...i,ref:x}),d.isSelected&&o.valueNode&&!o.valueNodeHasChildren?ev.createPortal(i.children,o.valueNode):null]})});zW.displayName=db;var VW="SelectItemIndicator",qW=g.forwardRef((t,e)=>{const{__scopeSelect:r,...s}=t;return BW(VW,r).isSelected?n.jsx(lr.span,{"aria-hidden":!0,...s,ref:e}):null});qW.displayName=VW;var mP="SelectScrollUpButton",HW=g.forwardRef((t,e)=>{const r=eg(mP,t.__scopeSelect),s=VA(mP,t.__scopeSelect),[a,i]=g.useState(!1),o=$n(e,s.onScrollButtonChange);return ii(()=>{if(r.viewport&&r.isPositioned){let l=function(){const h=d.scrollTop>0;i(h)};const d=r.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?n.jsx(YW,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=r;l&&d&&(l.scrollTop=l.scrollTop-d.offsetHeight)}}):null});HW.displayName=mP;var pP="SelectScrollDownButton",WW=g.forwardRef((t,e)=>{const r=eg(pP,t.__scopeSelect),s=VA(pP,t.__scopeSelect),[a,i]=g.useState(!1),o=$n(e,s.onScrollButtonChange);return ii(()=>{if(r.viewport&&r.isPositioned){let l=function(){const h=d.scrollHeight-d.clientHeight,f=Math.ceil(d.scrollTop)<h;i(f)};const d=r.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?n.jsx(YW,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=r;l&&d&&(l.scrollTop=l.scrollTop+d.offsetHeight)}}):null});WW.displayName=pP;var YW=g.forwardRef((t,e)=>{const{__scopeSelect:r,onAutoScroll:s,...a}=t,i=eg("SelectScrollButton",r),o=g.useRef(null),l=mS(r),d=g.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return g.useEffect(()=>()=>d(),[d]),ii(()=>{var f;const h=l().find(m=>m.ref.current===document.activeElement);(f=h==null?void 0:h.ref.current)==null||f.scrollIntoView({block:"nearest"})},[l]),n.jsx(lr.div,{"aria-hidden":!0,...a,ref:e,style:{flexShrink:0,...a.style},onPointerDown:At(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(s,50))}),onPointerMove:At(a.onPointerMove,()=>{var h;(h=i.onItemLeave)==null||h.call(i),o.current===null&&(o.current=window.setInterval(s,50))}),onPointerLeave:At(a.onPointerLeave,()=>{d()})})}),Xle="SelectSeparator",KW=g.forwardRef((t,e)=>{const{__scopeSelect:r,...s}=t;return n.jsx(lr.div,{"aria-hidden":!0,...s,ref:e})});KW.displayName=Xle;var gP="SelectArrow",Qle=g.forwardRef((t,e)=>{const{__scopeSelect:r,...s}=t,a=pS(r),i=Zp(gP,r),o=eg(gP,r);return i.open&&o.position==="popper"?n.jsx(rS,{...a,...s,ref:e}):null});Qle.displayName=gP;var Jle="SelectBubbleInput",GW=g.forwardRef(({__scopeSelect:t,value:e,...r},s)=>{const a=g.useRef(null),i=$n(s,a),o=SW(e);return g.useEffect(()=>{const l=a.current;if(!l)return;const d=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(d,"value").set;if(o!==e&&f){const m=new Event("change",{bubbles:!0});f.call(l,e),l.dispatchEvent(m)}},[o,e]),n.jsx(lr.select,{...r,style:{...oq,...r.style},ref:i,defaultValue:e})});GW.displayName=Jle;function XW(t){return t===""||t===void 0}function QW(t){const e=yl(t),r=g.useRef(""),s=g.useRef(0),a=g.useCallback(o=>{const l=r.current+o;e(l),(function d(h){r.current=h,window.clearTimeout(s.current),h!==""&&(s.current=window.setTimeout(()=>d(""),1e3))})(l)},[e]),i=g.useCallback(()=>{r.current="",window.clearTimeout(s.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(s.current),[]),[r,a,i]}function JW(t,e,r){const a=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,i=r?t.indexOf(r):-1;let o=Zle(t,Math.max(i,0));a.length===1&&(o=o.filter(h=>h!==r));const d=o.find(h=>h.textValue.toLowerCase().startsWith(a.toLowerCase()));return d!==r?d:void 0}function Zle(t,e){return t.map((r,s)=>t[(e+s)%t.length])}var ece=kW,ZW=EW,tce=PW,rce=AW,nce=_W,eY=IW,sce=DW,tY=FW,rY=UW,ace=zW,ice=qW,nY=HW,sY=WW,aY=KW;const Ms=ece,Os=tce,Ns=g.forwardRef(({className:t,children:e,...r},s)=>n.jsxs(ZW,{ref:s,className:Ht("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[e,n.jsx(rce,{asChild:!0,children:n.jsx(Mp,{className:"h-4 w-4 opacity-50"})})]}));Ns.displayName=ZW.displayName;const iY=g.forwardRef(({className:t,...e},r)=>n.jsx(nY,{ref:r,className:Ht("flex cursor-default items-center justify-center py-1",t),...e,children:n.jsx(Bb,{className:"h-4 w-4"})}));iY.displayName=nY.displayName;const oY=g.forwardRef(({className:t,...e},r)=>n.jsx(sY,{ref:r,className:Ht("flex cursor-default items-center justify-center py-1",t),...e,children:n.jsx(Mp,{className:"h-4 w-4"})}));oY.displayName=sY.displayName;const js=g.forwardRef(({className:t,children:e,position:r="popper",...s},a)=>n.jsx(nce,{children:n.jsxs(eY,{ref:a,className:Ht("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...s,children:[n.jsx(iY,{}),n.jsx(sce,{className:Ht("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),n.jsx(oY,{})]})}));js.displayName=eY.displayName;const oce=g.forwardRef(({className:t,...e},r)=>n.jsx(tY,{ref:r,className:Ht("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));oce.displayName=tY.displayName;const gt=g.forwardRef(({className:t,children:e,...r},s)=>n.jsxs(rY,{ref:s,className:Ht("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(ice,{children:n.jsx(hl,{className:"h-4 w-4"})})}),n.jsx(ace,{children:e})]}));gt.displayName=rY.displayName;const lce=g.forwardRef(({className:t,...e},r)=>n.jsx(aY,{ref:r,className:Ht("-mx-1 my-1 h-px bg-muted",t),...e}));lce.displayName=aY.displayName;var gS="Switch",[cce]=Hc(gS),[dce,uce]=cce(gS),lY=g.forwardRef((t,e)=>{const{__scopeSwitch:r,name:s,checked:a,defaultChecked:i,required:o,disabled:l,value:d="on",onCheckedChange:h,form:f,...m}=t,[x,b]=g.useState(null),j=$n(e,O=>b(O)),N=g.useRef(!1),w=x?f||!!x.closest("form"):!0,[C,T]=bm({prop:a,defaultProp:i??!1,onChange:h,caller:gS});return n.jsxs(dce,{scope:r,checked:C,disabled:l,children:[n.jsx(lr.button,{type:"button",role:"switch","aria-checked":C,"aria-required":o,"data-state":hY(C),"data-disabled":l?"":void 0,disabled:l,value:d,...m,ref:j,onClick:At(t.onClick,O=>{T(I=>!I),w&&(N.current=O.isPropagationStopped(),N.current||O.stopPropagation())})}),w&&n.jsx(uY,{control:x,bubbles:!N.current,name:s,value:d,checked:C,required:o,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});lY.displayName=gS;var cY="SwitchThumb",dY=g.forwardRef((t,e)=>{const{__scopeSwitch:r,...s}=t,a=uce(cY,r);return n.jsx(lr.span,{"data-state":hY(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:e})});dY.displayName=cY;var hce="SwitchBubbleInput",uY=g.forwardRef(({__scopeSwitch:t,control:e,checked:r,bubbles:s=!0,...a},i)=>{const o=g.useRef(null),l=$n(o,i),d=SW(r),h=aH(e);return g.useEffect(()=>{const f=o.current;if(!f)return;const m=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(m,"checked").set;if(d!==r&&b){const j=new Event("click",{bubbles:s});b.call(f,r),f.dispatchEvent(j)}},[d,r,s]),n.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:l,style:{...a.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});uY.displayName=hce;function hY(t){return t?"checked":"unchecked"}var fY=lY,fce=dY;const qA=g.forwardRef(({className:t,...e},r)=>n.jsx(fY,{className:Ht("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:r,children:n.jsx(fce,{className:Ht("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));qA.displayName=fY.displayName;function mce({snippets:t,onRemove:e}){const[r,s]=g.useState([]),[a,i]=g.useState(0),[o,l]=g.useState(!1),[d,h]=g.useState(null),[f,m]=g.useState(!1),x=g.useRef(null),{toast:b}=Ia();g.useEffect(()=>{const P=r.map(B=>B.id),A=t.map(B=>B.id),R=t.filter(B=>!P.includes(B.id));if(R.length>0){l(!0);const B=R.map((V,X)=>({...V,colorIndex:(a+X)%5}));s(V=>[...B,...V.filter(X=>A.includes(X.id))]),i((a+R.length)%5),setTimeout(()=>l(!1),600)}else P.length!==A.length&&s(B=>B.filter(V=>A.includes(V.id)))},[t]);const j=g.useCallback(P=>{if(!(!P.text||P.text.trim().length===0))try{window.speechSynthesis.cancel();const A=O(P.text),R=new SpeechSynthesisUtterance(A);R.rate=1,R.pitch=1,R.volume=1,R.onstart=()=>{h(P.id)},R.onend=()=>{h(null)},R.onerror=B=>{console.error("Speech synthesis error:",B),h(null)},window.speechSynthesis.speak(R)}catch(A){console.error("Error playing audio:",A),h(null)}},[]);g.useEffect(()=>{if(f&&r.length>0&&r[0].id!==x.current){x.current=r[0].id;const P=setTimeout(()=>{j(r[0])},100);return()=>clearTimeout(P)}else r.length>0&&(x.current=r[0].id)},[r,f,j]);const N=P=>{window.speechSynthesis.cancel(),h(null),m(!0),s(A=>{const R=[...A];if(P==="right"){const B=R.shift();B&&R.push(B)}else{const B=R.pop();B&&R.unshift(B)}return R})},[w,C]=g.useState(0),T=P=>{const A=[{from:"from-blue-500",to:"to-blue-600",label:"TECH NEWS",icon:""},{from:"from-purple-500",to:"to-purple-600",label:"MARKET UPDATE",icon:""},{from:"from-pink-500",to:"to-pink-600",label:"TRADING ALERT",icon:""},{from:"from-indigo-500",to:"to-indigo-600",label:"FINANCE NEWS",icon:""},{from:"from-cyan-500",to:"to-cyan-600",label:"INSIGHT",icon:""}];return A[P%A.length]},O=P=>P.replace(/[\u{1F600}-\u{1F64F}]|[\u{1F300}-\u{1F5FF}]|[\u{1F680}-\u{1F6FF}]|[\u{1F1E0}-\u{1F1FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}]|[\u{1F900}-\u{1F9FF}]|[\u{1F018}-\u{1F270}]|[\u{238C}-\u{2454}]|[\u{20D0}-\u{20FF}]/gu,""),I=(P,A)=>{if(A.stopPropagation(),m(!1),d===P.id){window.speechSynthesis.cancel(),h(null);return}if(!P.text||P.text.trim().length===0){b({description:"No content to read",variant:"destructive"});return}try{j(P)}catch(R){console.error("Error playing audio:",R),h(null),b({description:"Audio playback not supported in this browser",variant:"destructive"})}};return r.length===0?null:n.jsx("div",{className:"relative w-28 h-40 mx-auto",style:{perspective:"1000px"},children:r.slice(0,5).map((P,A)=>{const R=A===0,B=A===1,V=A===2,X=A===3,ee=A===4,Y=T(P.colorIndex),re=P.authorDisplayName||P.authorUsername||"Trading";let le="",te=1,de=40;if(!R){const Z=A*3,ne=A*8,oe=1-A*.03,U=A*-2;le=`translateY(${ne}px) translateX(${U}px) rotate(${Z}deg) scale(${oe})`,te=B?.95:V?.85:X?.75:ee?.65:.5,de=B?30:V?20:X?15:ee?10:5}const ie=o&&R?"translateY(-100px) scale(0.8) rotate(-10deg)":le;return n.jsx("div",{"data-card-index":A,style:{transform:ie,transition:o&&R?"transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.5s ease-out":"transform 0.3s ease-out, opacity 0.3s ease-out",opacity:o&&R?.3:te,zIndex:de},className:`absolute inset-0 ${R?"cursor-grab active:cursor-grabbing":""}`,onMouseDown:Z=>{if(!R)return;const ne=Z.clientX,oe=Z.clientY,U=Z.currentTarget;let W=!1;const be=ge=>{const Ce=ge.clientX-ne,he=ge.clientY-oe;if(!W&&(Math.abs(Ce)>5||Math.abs(he)>5)&&(W=!0),W){const ue=Ce*.1;U.style.transform=`translate(${Ce}px, ${he}px) rotate(${ue}deg)`,U.style.opacity=String(Math.max(.3,1-Math.abs(Ce)/300)),C(Ce)}},pe=ge=>{if(W){const Ce=ge.clientX-ne;if(C(0),Math.abs(Ce)>40){const he=Ce>0?"right":"left";if(he==="right"){const ue="150%",ce="30deg";U.style.transform=`translate(${ue}, ${Ce*.5}px) rotate(${ce})`,U.style.opacity="0",setTimeout(()=>{U.style.transform="",U.style.opacity="",N(he)},300)}else U.style.transform="",U.style.opacity="",N(he),setTimeout(()=>{var ce;const ue=(ce=U.parentElement)==null?void 0:ce.querySelector('[data-card-index="0"]');ue&&(ue.style.transform="translate(150%, 0) rotate(30deg)",ue.style.opacity="0",setTimeout(()=>{ue.style.transform="",ue.style.opacity="",ue.style.transition="transform 300ms ease-out, opacity 300ms ease-out",setTimeout(()=>{ue.style.transition=""},300)},10))},10)}else U.style.transform="",U.style.opacity=""}document.removeEventListener("mousemove",be),document.removeEventListener("mouseup",pe)};document.addEventListener("mousemove",be),document.addEventListener("mouseup",pe)},onTouchStart:Z=>{if(!R)return;const ne=Z.touches[0].clientX,oe=Z.touches[0].clientY,U=Z.currentTarget;let W=!1;const be=ge=>{const Ce=ge.touches[0].clientX-ne,he=ge.touches[0].clientY-oe;if(!W&&(Math.abs(Ce)>5||Math.abs(he)>5)&&(W=!0),W){ge.preventDefault();const ue=Ce*.1;U.style.transform=`translate(${Ce}px, ${he}px) rotate(${ue}deg)`,U.style.opacity=String(Math.max(.3,1-Math.abs(Ce)/300)),C(Ce)}},pe=ge=>{if(W){const Ce=ge.changedTouches[0].clientX-ne;if(C(0),Math.abs(Ce)>40){const he=Ce>0?"right":"left";if(he==="right"){const ue="150%",ce="30deg";U.style.transform=`translate(${ue}, ${Ce*.5}px) rotate(${ce})`,U.style.opacity="0",setTimeout(()=>{U.style.transform="",U.style.opacity="",N(he)},300)}else U.style.transform="",U.style.opacity="",N(he),setTimeout(()=>{var ce;const ue=(ce=U.parentElement)==null?void 0:ce.querySelector('[data-card-index="0"]');ue&&(ue.style.transform="translate(150%, 0) rotate(30deg)",ue.style.opacity="0",setTimeout(()=>{ue.style.transform="",ue.style.opacity="",ue.style.transition="transform 300ms ease-out, opacity 300ms ease-out",setTimeout(()=>{ue.style.transition=""},300)},10))},10)}else U.style.transform="",U.style.opacity=""}document.removeEventListener("touchmove",be),document.removeEventListener("touchend",pe)};document.addEventListener("touchmove",be,{passive:!1}),document.addEventListener("touchend",pe)},children:n.jsxs("div",{className:`bg-gradient-to-br ${Y.from} ${Y.to} rounded-xl p-3 h-full relative overflow-hidden border-2 border-white/10`,style:{boxShadow:R?"0 20px 40px rgba(0,0,0,0.4), 0 10px 20px rgba(0,0,0,0.3)":`0 ${8+A*4}px ${16+A*8}px rgba(0,0,0,${.3+A*.1})`},children:[n.jsx("div",{className:"absolute bottom-0 right-0 w-16 h-16 opacity-30",children:n.jsx("div",{className:"w-full h-full bg-gradient-to-br from-white/20 to-white/10 rounded-full"})}),n.jsxs("div",{className:"relative z-10",children:[n.jsx("div",{className:"text-[8px] text-white/80 mb-1 uppercase tracking-wide font-medium",children:Y.label}),n.jsxs("h3",{className:"text-xs font-bold text-white mb-2 leading-tight",children:["Latest in",n.jsx("br",{}),re.toLowerCase()]}),n.jsx("button",{type:"button",className:`bg-white px-2 py-1 rounded-full text-[10px] font-medium shadow-lg transition-colors ${d===P.id?"text-blue-600 hover:bg-gray-100":"text-gray-800 hover:bg-gray-100"}`,onClick:Z=>I(P,Z),"data-testid":`button-read-now-card-${P.id}`,children:n.jsx("div",{className:"flex items-center gap-1",children:d===P.id?n.jsxs(n.Fragment,{children:[n.jsx(G2,{className:"w-2 h-2 fill-current"}),n.jsx("span",{children:"Stop"})]}):n.jsxs(n.Fragment,{children:[n.jsx(Ui,{className:"w-2 h-2"}),n.jsx("span",{children:"Read Now"})]})})})]}),n.jsx("div",{className:"absolute top-2 right-2 text-sm filter drop-shadow-lg",children:Y.icon}),R&&n.jsx("button",{type:"button",onClick:Z=>{Z.stopPropagation(),e(P.id)},className:"absolute top-1 left-1 w-4 h-4 rounded-full bg-white/20 hover:bg-white/40 flex items-center justify-center transition-all hover:scale-110 z-30","data-testid":`button-remove-snippet-${P.id}`,children:n.jsx(Wr,{className:"w-2 h-2 text-white"})}),!R&&n.jsx("div",{className:"absolute inset-0 bg-black/10 rounded-2xl"})]})},P.id)})})}const pce="Logging",gce="NoHubcallbackProvidedException";var Ic;(function(t){t.DEBUG="DEBUG",t.ERROR="ERROR",t.INFO="INFO",t.WARN="WARN",t.VERBOSE="VERBOSE",t.NONE="NONE"})(Ic||(Ic={}));const G6={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,NONE:6};class zc{constructor(e,r=Ic.WARN){this.name=e,this.level=r,this._pluggables=[]}_padding(e){return e<10?"0"+e:""+e}_ts(){const e=new Date;return[this._padding(e.getMinutes()),this._padding(e.getSeconds())].join(":")+"."+e.getMilliseconds()}configure(e){return e?(this._config=e,this._config):this._config}_log(e,...r){let s=this.level;zc.LOG_LEVEL&&(s=zc.LOG_LEVEL),typeof window<"u"&&window.LOG_LEVEL&&(s=window.LOG_LEVEL);const a=G6[s];if(!(G6[e]>=a))return;let o=console.log.bind(console);e===Ic.ERROR&&console.error&&(o=console.error.bind(console)),e===Ic.WARN&&console.warn&&(o=console.warn.bind(console)),zc.BIND_ALL_LOG_LEVELS&&(e===Ic.INFO&&console.info&&(o=console.info.bind(console)),e===Ic.DEBUG&&console.debug&&(o=console.debug.bind(console)));const l=`[${e}] ${this._ts()} ${this.name}`;let d="";if(r.length===1&&typeof r[0]=="string")d=`${l} - ${r[0]}`,o(d);else if(r.length===1)d=`${l} ${r[0]}`,o(l,r[0]);else if(typeof r[0]=="string"){let h=r.slice(1);h.length===1&&(h=h[0]),d=`${l} - ${r[0]} ${h}`,o(`${l} - ${r[0]}`,h)}else d=`${l} ${r}`,o(l,r);for(const h of this._pluggables){const f={message:d,timestamp:Date.now()};h.pushLogs([f])}}log(...e){this._log(Ic.INFO,...e)}info(...e){this._log(Ic.INFO,...e)}warn(...e){this._log(Ic.WARN,...e)}error(...e){this._log(Ic.ERROR,...e)}debug(...e){this._log(Ic.DEBUG,...e)}verbose(...e){this._log(Ic.VERBOSE,...e)}addPluggable(e){e&&e.getCategoryName()===pce&&(this._pluggables.push(e),e.configure(this._config))}listPluggables(){return this._pluggables}}zc.LOG_LEVEL=null;zc.BIND_ALL_LOG_LEVELS=!1;class sc extends Error{constructor({message:e,name:r,recoverySuggestion:s,underlyingError:a,metadata:i}){if(super(e),this.name=r,this.underlyingError=a,this.recoverySuggestion=s,i){const{extendedRequestId:o,httpStatusCode:l,requestId:d}=i;this.metadata={extendedRequestId:o,httpStatusCode:l,requestId:d}}this.constructor=sc,Object.setPrototypeOf(this,sc.prototype)}}var b0;(function(t){t.NoEndpointId="NoEndpointId",t.PlatformNotSupported="PlatformNotSupported",t.Unknown="Unknown",t.NetworkError="NetworkError"})(b0||(b0={}));const HA=(t,e=sc)=>(r,s,a)=>{const{message:i,recoverySuggestion:o}=t[s];if(!r)throw new e({name:s,message:a?`${i} ${a}`:i,recoverySuggestion:o})},w0=typeof Symbol<"u"?Symbol("amplify_default"):"@@amplify_default",zv=new zc("Hub");class mY{constructor(e){this.listeners=new Map,this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=e}_remove(e,r){const s=this.listeners.get(e);if(!s){zv.warn(`No listeners for ${e}`);return}this.listeners.set(e,[...s.filter(({callback:a})=>a!==r)])}dispatch(e,r,s,a){typeof e=="string"&&this.protectedChannels.indexOf(e)>-1&&(a===w0||zv.warn(`WARNING: ${e} is protected and dispatching on it can have unintended consequences`));const i={channel:e,payload:{...r},source:s,patternInfo:[]};try{this._toListeners(i)}catch(o){zv.error(o)}}listen(e,r,s="noname"){let a;if(typeof r!="function")throw new sc({name:gce,message:"No callback supplied to Hub"});a=r;let i=this.listeners.get(e);return i||(i=[],this.listeners.set(e,i)),i.push({name:s,callback:a}),()=>{this._remove(e,a)}}_toListeners(e){const{channel:r,payload:s}=e,a=this.listeners.get(r);a&&a.forEach(i=>{zv.debug(`Dispatching to ${r} with `,s);try{i.callback(e)}catch(o){zv.error(o)}})}}const xy=new mY("__default__"),X6=new mY("internal-hub"),xce=()=>{if(typeof window=="object"&&typeof window.crypto=="object")return window.crypto;if(typeof crypto=="object")return crypto;throw new sc({name:"MissingPolyfill",message:"Cannot resolve the `crypto` function from the environment."})},yce=()=>{if(typeof window<"u"&&typeof window.btoa=="function")return window.btoa;if(typeof btoa=="function")return btoa;throw new sc({name:"Base64EncoderError",message:"Cannot resolve the `btoa` function from the environment."})},vce=()=>{if(typeof window<"u"&&typeof window.atob=="function")return window.atob;if(typeof atob=="function")return atob;throw new sc({name:"Base64EncoderError",message:"Cannot resolve the `atob` function from the environment."})},WA={convert(t,e){let r=t;return e!=null&&e.urlSafe&&(r=r.replace(/-/g,"+").replace(/_/g,"/")),vce()(r)}};var Gh;(function(t){t.AuthTokenConfigException="AuthTokenConfigException",t.AuthUserPoolAndIdentityPoolException="AuthUserPoolAndIdentityPoolException",t.AuthUserPoolException="AuthUserPoolException",t.InvalidIdentityPoolIdException="InvalidIdentityPoolIdException",t.OAuthNotConfigureException="OAuthNotConfigureException"})(Gh||(Gh={}));const bce={[Gh.AuthTokenConfigException]:{message:"Auth Token Provider not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app."},[Gh.AuthUserPoolAndIdentityPoolException]:{message:"Auth UserPool or IdentityPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with UserPoolId and IdentityPoolId."},[Gh.AuthUserPoolException]:{message:"Auth UserPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with userPoolId and userPoolClientId."},[Gh.InvalidIdentityPoolIdException]:{message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."},[Gh.OAuthNotConfigureException]:{message:"oauth param not configured.",recoverySuggestion:"Make sure to call Amplify.configure with oauth parameter in your app."}},YA=HA(bce);function Ss(t){let e=!0;t?e=!!t.userPoolId&&!!t.userPoolClientId:e=!1,YA(e,Gh.AuthUserPoolException)}function pY(t){var r,s,a,i,o,l,d,h;const e=!!((s=(r=t==null?void 0:t.loginWith)==null?void 0:r.oauth)!=null&&s.domain)&&!!((i=(a=t==null?void 0:t.loginWith)==null?void 0:a.oauth)!=null&&i.redirectSignOut)&&!!((l=(o=t==null?void 0:t.loginWith)==null?void 0:o.oauth)!=null&&l.redirectSignIn)&&!!((h=(d=t==null?void 0:t.loginWith)==null?void 0:d.oauth)!=null&&h.responseType);YA(e,Gh.OAuthNotConfigureException)}function GN(t){const e=!!(t!=null&&t.identityPoolId);YA(e,Gh.InvalidIdentityPoolIdException)}function N0(t){const e=t.split(".");if(e.length!==3)throw new Error("Invalid token");try{const s=e[1].replace(/-/g,"+").replace(/_/g,"/"),a=decodeURIComponent(WA.convert(s).split("").map(o=>`%${`00${o.charCodeAt(0).toString(16)}`.slice(-2)}`).join("")),i=JSON.parse(a);return{toString:()=>t,payload:i}}catch{throw new Error("Invalid token payload")}}const gY=t=>{const e=Reflect.ownKeys(t);for(const r of e){const s=t[r];(s&&typeof s=="object"||typeof s=="function")&&gY(s)}return Object.freeze(t)},wce=new zc("parseAWSExports"),Nce={API_KEY:"apiKey",AWS_IAM:"iam",AMAZON_COGNITO_USER_POOLS:"userPool",OPENID_CONNECT:"oidc",NONE:"none",AWS_LAMBDA:"lambda",LAMBDA:"lambda"},jce=(t={})=>{var pe,ge,Ce,he,ue,ce;if(!Object.prototype.hasOwnProperty.call(t,"aws_project_region"))throw new sc({name:"InvalidParameterException",message:"Invalid config parameter.",recoverySuggestion:"Ensure passing the config object imported from  `amplifyconfiguration.json`."});const{aws_appsync_apiKey:e,aws_appsync_authenticationType:r,aws_appsync_graphqlEndpoint:s,aws_appsync_region:a,aws_bots_config:i,aws_cognito_identity_pool_id:o,aws_cognito_sign_up_verification_method:l,aws_cognito_mfa_configuration:d,aws_cognito_mfa_types:h,aws_cognito_password_protection_settings:f,aws_cognito_verification_mechanisms:m,aws_cognito_signup_attributes:x,aws_cognito_social_providers:b,aws_cognito_username_attributes:j,aws_mandatory_sign_in:N,aws_mobile_analytics_app_id:w,aws_mobile_analytics_app_region:C,aws_user_files_s3_bucket:T,aws_user_files_s3_bucket_region:O,aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing:I,aws_user_pools_id:P,aws_user_pools_web_client_id:A,geo:R,oauth:B,predictions:V,aws_cloud_logic_custom:X,Notifications:ee,modelIntrospection:Y}=t,re={};w&&(re.Analytics={Pinpoint:{appId:w,region:C}});const{InAppMessaging:le,Push:te}=ee??{};if(le!=null&&le.AWSPinpoint||te!=null&&te.AWSPinpoint){if(le!=null&&le.AWSPinpoint){const{appId:Ee,region:Le}=le.AWSPinpoint;re.Notifications={InAppMessaging:{Pinpoint:{appId:Ee,region:Le}}}}if(te!=null&&te.AWSPinpoint){const{appId:Ee,region:Le}=te.AWSPinpoint;re.Notifications={...re.Notifications,PushNotification:{Pinpoint:{appId:Ee,region:Le}}}}}if(Array.isArray(i)&&(re.Interactions={LexV1:Object.fromEntries(i.map(Ee=>[Ee.name,Ee]))}),s){const Ee=Nce[r];Ee||wce.debug(`Invalid authentication type ${r}. Falling back to IAM.`),re.API={GraphQL:{endpoint:s,apiKey:e,region:a,defaultAuthMode:Ee??"iam"}},Y&&(re.API.GraphQL.modelIntrospection=Y)}const de=d?{status:d&&d.toLowerCase(),totpEnabled:(h==null?void 0:h.includes("TOTP"))??!1,smsEnabled:(h==null?void 0:h.includes("SMS"))??!1}:void 0,ie=f?{minLength:f.passwordPolicyMinLength,requireLowercase:((pe=f.passwordPolicyCharacters)==null?void 0:pe.includes("REQUIRES_LOWERCASE"))??!1,requireUppercase:((ge=f.passwordPolicyCharacters)==null?void 0:ge.includes("REQUIRES_UPPERCASE"))??!1,requireNumbers:((Ce=f.passwordPolicyCharacters)==null?void 0:Ce.includes("REQUIRES_NUMBERS"))??!1,requireSpecialCharacters:((he=f.passwordPolicyCharacters)==null?void 0:he.includes("REQUIRES_SYMBOLS"))??!1}:void 0,ne=Array.from(new Set([...m??[],...x??[]])).reduce((Ee,Le)=>({...Ee,[Le.toLowerCase()]:{required:!0}}),{}),oe=(j==null?void 0:j.includes("EMAIL"))??!1,U=(j==null?void 0:j.includes("PHONE_NUMBER"))??!1;(o||P)&&(re.Auth={Cognito:{identityPoolId:o,allowGuestAccess:N!=="enable",signUpVerificationMethod:l,userAttributes:ne,userPoolClientId:A,userPoolId:P,mfa:de,passwordFormat:ie,loginWith:{username:!(oe||U),email:oe,phone:U}}});const W=B?Object.keys(B).length>0:!1,be=b?b.length>0:!1;if(re.Auth&&W&&(re.Auth.Cognito.loginWith={...re.Auth.Cognito.loginWith,oauth:{...Sce(B),...be&&{providers:kce(b)}}}),T&&(re.Storage={S3:{bucket:T,region:O,dangerouslyConnectToHttpEndpointForTesting:I}}),R){const{amazon_location_service:Ee}=R;re.Geo={LocationService:{maps:Ee.maps,geofenceCollections:Ee.geofenceCollections,searchIndices:Ee.search_indices,region:Ee.region}}}if(X&&(re.API={...re.API,REST:X.reduce((Ee,Le)=>{const{name:Ie,endpoint:Ue,region:Ae,service:We}=Le;return{...Ee,[Ie]:{endpoint:Ue,...We?{service:We}:void 0,...Ae?{region:Ae}:void 0}}},{})}),V){const{VoiceId:Ee}=((ce=(ue=V==null?void 0:V.convert)==null?void 0:ue.speechGenerator)==null?void 0:ce.defaults)??{};re.Predictions=Ee?{...V,convert:{...V.convert,speechGenerator:{...V.convert.speechGenerator,defaults:{voiceId:Ee}}}}:V}return re},Q6=t=>(t==null?void 0:t.split(","))??[],Sce=({domain:t,scope:e,redirectSignIn:r,redirectSignOut:s,responseType:a})=>({domain:t,scopes:e,redirectSignIn:Q6(r),redirectSignOut:Q6(s),responseType:a}),kce=t=>t.map(e=>{const r=e.toLowerCase();return r.charAt(0).toUpperCase()+r.slice(1)}),Cce=Symbol("oauth-listener"),uo=[];for(let t=0;t<256;++t)uo.push((t+256).toString(16).slice(1));function Ece(t,e=0){return(uo[t[e+0]]+uo[t[e+1]]+uo[t[e+2]]+uo[t[e+3]]+"-"+uo[t[e+4]]+uo[t[e+5]]+"-"+uo[t[e+6]]+uo[t[e+7]]+"-"+uo[t[e+8]]+uo[t[e+9]]+"-"+uo[t[e+10]]+uo[t[e+11]]+uo[t[e+12]]+uo[t[e+13]]+uo[t[e+14]]+uo[t[e+15]]).toLowerCase()}let aC;const Tce=new Uint8Array(16);function Pce(){if(!aC){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");aC=crypto.getRandomValues.bind(crypto)}return aC(Tce)}const Ace=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),J6={randomUUID:Ace};function _ce(t,e,r){var a;if(J6.randomUUID&&!e&&!t)return J6.randomUUID();t=t||{};const s=t.random??((a=t.rng)==null?void 0:a.call(t))??Pce();if(s.length<16)throw new Error("Random bytes length must be >= 16");if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,e){if(r=r||0,r<0||r+16>e.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[r+i]=s[i];return e}return Ece(s)}function Ice(t){const{version:e}=t;return e?e.startsWith("1"):!1}function Mce(t){if(!t)return;const{bucket_name:e,aws_region:r,buckets:s}=t;return{S3:{bucket:e,region:r,buckets:s&&qce(s)}}}function Oce(t){if(!t)return;const{user_pool_id:e,user_pool_client_id:r,identity_pool_id:s,password_policy:a,mfa_configuration:i,mfa_methods:o,unauthenticated_identities_enabled:l,oauth:d,username_attributes:h,standard_required_attributes:f,groups:m}=t,x={Cognito:{userPoolId:e,userPoolClientId:r,groups:m}};return s&&(x.Cognito={...x.Cognito,identityPoolId:s}),a&&(x.Cognito.passwordFormat={requireLowercase:a.require_lowercase,requireNumbers:a.require_numbers,requireUppercase:a.require_uppercase,requireSpecialCharacters:a.require_symbols,minLength:a.min_length??6}),i&&(x.Cognito.mfa={status:Vce(i),smsEnabled:o==null?void 0:o.includes("SMS"),totpEnabled:o==null?void 0:o.includes("TOTP")}),l&&(x.Cognito.allowGuestAccess=l),d&&(x.Cognito.loginWith={oauth:{domain:d.domain,redirectSignIn:d.redirect_sign_in_uri,redirectSignOut:d.redirect_sign_out_uri,responseType:d.response_type==="token"?"token":"code",scopes:d.scopes,providers:zce(d.identity_providers)}}),h&&(x.Cognito.loginWith={...x.Cognito.loginWith,email:h.includes("email"),phone:h.includes("phone_number"),username:h.includes("username")}),f&&(x.Cognito.userAttributes=f.reduce((b,j)=>({...b,[j]:{required:!0}}),{})),x}function Rce(t){if(!(t!=null&&t.amazon_pinpoint))return;const{amazon_pinpoint:e}=t;return{Pinpoint:{appId:e.app_id,region:e.aws_region}}}function Dce(t){if(!t)return;const{aws_region:e,geofence_collections:r,maps:s,search_indices:a}=t;return{LocationService:{region:e,searchIndices:a,geofenceCollections:r,maps:s}}}function $ce(t){if(!t)return;const{aws_region:e,default_authorization_type:r,url:s,api_key:a,model_introspection:i}=t;return{GraphQL:{endpoint:s,defaultAuthMode:xY(r),region:e,apiKey:a,modelIntrospection:i}}}function Lce(t){if(!(t!=null&&t.events))return;const{url:e,aws_region:r,api_key:s,default_authorization_type:a}=t.events;return{Events:{endpoint:e,defaultAuthMode:xY(a),region:r,apiKey:s}}}function Fce(t){if(!t)return;const{aws_region:e,channels:r,amazon_pinpoint_app_id:s}=t,a=r.includes("IN_APP_MESSAGING"),i=r.includes("APNS")||r.includes("FCM");if(!(a||i))return;const o={};return a&&(o.InAppMessaging={Pinpoint:{appId:s,region:e}}),i&&(o.PushNotification={Pinpoint:{appId:s,region:e}}),o}function Bce(t){const e={};if(t.storage&&(e.Storage=Mce(t.storage)),t.auth&&(e.Auth=Oce(t.auth)),t.analytics&&(e.Analytics=Rce(t.analytics)),t.geo&&(e.Geo=Dce(t.geo)),t.data&&(e.API=$ce(t.data)),t.custom){const r=Lce(t.custom);r&&"Events"in r&&(e.API={...e.API,...r})}return t.notifications&&(e.Notifications=Fce(t.notifications)),e}const Uce={AMAZON_COGNITO_USER_POOLS:"userPool",API_KEY:"apiKey",AWS_IAM:"iam",AWS_LAMBDA:"lambda",OPENID_CONNECT:"oidc"};function xY(t){return Uce[t]}const Z6={GOOGLE:"Google",LOGIN_WITH_AMAZON:"Amazon",FACEBOOK:"Facebook",SIGN_IN_WITH_APPLE:"Apple"};function zce(t=[]){return t.reduce((e,r)=>(Z6[r]!==void 0&&e.push(Z6[r]),e),[])}function Vce(t){return t==="OPTIONAL"?"optional":t==="REQUIRED"?"on":"off"}function qce(t){const e={};return t.forEach(({name:r,bucket_name:s,aws_region:a,paths:i})=>{if(r in e)throw new Error(`Duplicate friendly name found: ${r}. Name must be unique.`);const o=i?Object.entries(i).reduce((l,[d,h])=>(h!==void 0&&(l[d]=h),l),{}):void 0;e[r]={bucketName:s,region:a,paths:o}}),e}const yY=t=>Object.keys(t).some(e=>e.startsWith("aws_"))?jce(t):Ice(t)?Bce(t):t;var Md=64,Hce=32,Wce=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Yce=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],Kce=Math.pow(2,53)-1,XN=(function(){function t(){this.state=Int32Array.from(Yce),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return t.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var r=0,s=e.byteLength;if(this.bytesHashed+=s,this.bytesHashed*8>Kce)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;s>0;)this.buffer[this.bufferLength++]=e[r++],s--,this.bufferLength===Md&&(this.hashBuffer(),this.bufferLength=0)},t.prototype.digest=function(){if(!this.finished){var e=this.bytesHashed*8,r=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),s=this.bufferLength;if(r.setUint8(this.bufferLength++,128),s%Md>=Md-8){for(var a=this.bufferLength;a<Md;a++)r.setUint8(a,0);this.hashBuffer(),this.bufferLength=0}for(var a=this.bufferLength;a<Md-8;a++)r.setUint8(a,0);r.setUint32(Md-8,Math.floor(e/4294967296),!0),r.setUint32(Md-4,e),this.hashBuffer(),this.finished=!0}for(var i=new Uint8Array(Hce),a=0;a<8;a++)i[a*4]=this.state[a]>>>24&255,i[a*4+1]=this.state[a]>>>16&255,i[a*4+2]=this.state[a]>>>8&255,i[a*4+3]=this.state[a]>>>0&255;return i},t.prototype.hashBuffer=function(){for(var e=this,r=e.buffer,s=e.state,a=s[0],i=s[1],o=s[2],l=s[3],d=s[4],h=s[5],f=s[6],m=s[7],x=0;x<Md;x++){if(x<16)this.temp[x]=(r[x*4]&255)<<24|(r[x*4+1]&255)<<16|(r[x*4+2]&255)<<8|r[x*4+3]&255;else{var b=this.temp[x-2],j=(b>>>17|b<<15)^(b>>>19|b<<13)^b>>>10;b=this.temp[x-15];var N=(b>>>7|b<<25)^(b>>>18|b<<14)^b>>>3;this.temp[x]=(j+this.temp[x-7]|0)+(N+this.temp[x-16]|0)}var w=(((d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+(d&h^~d&f)|0)+(m+(Wce[x]+this.temp[x]|0)|0)|0,C=((a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10))+(a&i^a&o^i&o)|0;m=f,f=h,h=d,d=l+w|0,l=o,o=i,i=a,a=w+C|0}s[0]+=a,s[1]+=i,s[2]+=o,s[3]+=l,s[4]+=d,s[5]+=h,s[6]+=f,s[7]+=m},t})();const Gce=t=>new TextEncoder().encode(t);var Xce=typeof Buffer<"u"&&Buffer.from?function(t){return Buffer.from(t,"utf8")}:Gce;function vY(t){return t instanceof Uint8Array?t:typeof t=="string"?Xce(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}function Qce(t){return typeof t=="string"?t.length===0:t.byteLength===0}var yj=(function(){function t(e){this.secret=e,this.hash=new XN,this.reset()}return t.prototype.update=function(e){if(!(Qce(e)||this.error))try{this.hash.update(vY(e))}catch(r){this.error=r}},t.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},t.prototype.digest=function(){return roe(this,void 0,void 0,function(){return noe(this,function(e){return[2,this.digestSync()]})})},t.prototype.reset=function(){if(this.hash=new XN,this.secret){this.outer=new XN;var e=Jce(this.secret),r=new Uint8Array(Md);r.set(e);for(var s=0;s<Md;s++)e[s]^=54,r[s]^=92;this.hash.update(e),this.outer.update(r);for(var s=0;s<e.byteLength;s++)e[s]=0}},t})();function Jce(t){var e=vY(t);if(e.byteLength>Md){var r=new XN;r.update(e),e=r.digest()}var s=new Uint8Array(Md);return s.set(e),s}for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`)}var ri;(function(t){t.WebUnknown="0",t.React="1",t.NextJs="2",t.Angular="3",t.VueJs="4",t.Nuxt="5",t.Svelte="6",t.ServerSideUnknown="100",t.ReactSSR="101",t.NextJsSSR="102",t.AngularSSR="103",t.VueJsSSR="104",t.NuxtSSR="105",t.SvelteSSR="106",t.ReactNative="201",t.Expo="202"})(ri||(ri={}));var xP;(function(t){t.AI="ai",t.API="api",t.Auth="auth",t.Analytics="analytics",t.DataStore="datastore",t.Geo="geo",t.InAppMessaging="inappmessaging",t.Interactions="interactions",t.Predictions="predictions",t.PubSub="pubsub",t.PushNotification="pushnotification",t.Storage="storage"})(xP||(xP={}));var eM;(function(t){t.CreateConversation="1",t.GetConversation="2",t.ListConversations="3",t.DeleteConversation="4",t.SendMessage="5",t.ListMessages="6",t.OnMessage="7",t.Generation="8",t.UpdateConversation="9"})(eM||(eM={}));var tM;(function(t){t.Record="1",t.IdentifyUser="2"})(tM||(tM={}));var rM;(function(t){t.GraphQl="1",t.Get="2",t.Post="3",t.Put="4",t.Patch="5",t.Del="6",t.Head="7"})(rM||(rM={}));var ac;(function(t){t.SignUp="1",t.ConfirmSignUp="2",t.ResendSignUpCode="3",t.SignIn="4",t.FetchMFAPreference="6",t.UpdateMFAPreference="7",t.SetUpTOTP="10",t.VerifyTOTPSetup="11",t.ConfirmSignIn="12",t.DeleteUserAttributes="15",t.DeleteUser="16",t.UpdateUserAttributes="17",t.FetchUserAttributes="18",t.ConfirmUserAttribute="22",t.SignOut="26",t.UpdatePassword="27",t.ResetPassword="28",t.ConfirmResetPassword="29",t.FederatedSignIn="30",t.RememberDevice="32",t.ForgetDevice="33",t.FetchDevices="34",t.SendUserAttributeVerificationCode="35",t.SignInWithRedirect="36",t.StartWebAuthnRegistration="37",t.CompleteWebAuthnRegistration="38",t.ListWebAuthnCredentials="39",t.DeleteWebAuthnCredential="40"})(ac||(ac={}));var nM;(function(t){t.Subscribe="1",t.GraphQl="2"})(nM||(nM={}));var sM;(function(t){t.SearchByText="0",t.SearchByCoordinates="1",t.SearchForSuggestions="2",t.SearchByPlaceId="3",t.SaveGeofences="4",t.GetGeofence="5",t.ListGeofences="6",t.DeleteGeofences="7"})(sM||(sM={}));var aM;(function(t){t.SyncMessages="1",t.IdentifyUser="2",t.NotifyMessageInteraction="3"})(aM||(aM={}));var iM;(function(t){t.None="0"})(iM||(iM={}));var oM;(function(t){t.Convert="1",t.Identify="2",t.Interpret="3"})(oM||(oM={}));var lM;(function(t){t.Subscribe="1"})(lM||(lM={}));var cM;(function(t){t.InitializePushNotifications="1",t.IdentifyUser="2"})(cM||(cM={}));var dM;(function(t){t.UploadData="1",t.DownloadData="2",t.List="3",t.Copy="4",t.Remove="5",t.GetProperties="6",t.GetUrl="7",t.GetDataAccess="8",t.ListCallerAccessGrants="9"})(dM||(dM={}));const Zce="6.15.9",xS=()=>typeof global<"u",ov=()=>typeof window<"u",bY=()=>typeof document<"u",KA=()=>typeof process<"u",qb=(t,e)=>!!Object.keys(t).find(r=>r.startsWith(e));var uM={};function ede(){const t=s=>s.startsWith("_react")||s.startsWith("__react"),e=s=>Object.keys(s).find(t),r=()=>Array.from(document.querySelectorAll("[id]"));return bY()&&r().some(e)}function tde(){return KA()&&typeof uM<"u"&&!!Object.keys(uM).find(t=>t.includes("react"))}function rde(){return ov()&&qb(window,"__VUE")}function nde(){return xS()&&qb(global,"__VUE")}var hM={};function sde(){return ov()&&qb(window,"__SVELTE")}function ade(){return KA()&&typeof hM<"u"&&!!Object.keys(hM).find(t=>t.includes("svelte"))}function ide(){return ov()&&window.next&&typeof window.next=="object"}function ode(){return xS()&&(qb(global,"__next")||qb(global,"__NEXT"))}function lde(){return ov()&&(window.__NUXT__!==void 0||window.$nuxt!==void 0)}function cde(){return xS()&&typeof global.__NUXT_PATHS__<"u"}var fM={};function dde(){const t=!!(bY()&&document.querySelector("[ng-version]")),e=!!(ov()&&typeof window.ng<"u");return t||e}function ude(){var t;return KA()&&typeof fM=="object"&&((t=fM.npm_lifecycle_script)==null?void 0:t.startsWith("ng "))||!1}function hde(){return typeof navigator<"u"&&typeof navigator.product<"u"&&navigator.product==="ReactNative"}function fde(){return xS()&&typeof global.expo<"u"}function mde(){return ov()}const pde=[{platform:ri.Expo,detectionMethod:fde},{platform:ri.ReactNative,detectionMethod:hde},{platform:ri.NextJs,detectionMethod:ide},{platform:ri.Nuxt,detectionMethod:lde},{platform:ri.Angular,detectionMethod:dde},{platform:ri.React,detectionMethod:ede},{platform:ri.VueJs,detectionMethod:rde},{platform:ri.Svelte,detectionMethod:sde},{platform:ri.WebUnknown,detectionMethod:mde},{platform:ri.NextJsSSR,detectionMethod:ode},{platform:ri.NuxtSSR,detectionMethod:cde},{platform:ri.ReactSSR,detectionMethod:tde},{platform:ri.VueJsSSR,detectionMethod:nde},{platform:ri.AngularSSR,detectionMethod:ude},{platform:ri.SvelteSSR,detectionMethod:ade}];function gde(){var t;return((t=pde.find(e=>e.detectionMethod()))==null?void 0:t.platform)||ri.ServerSideUnknown}let jb;const iC=[];let yP=!1;const xde=10,yde=10,vde=1e3,wY=()=>{var t;if(!jb){if(jb=gde(),yP)for(;iC.length;)(t=iC.pop())==null||t();else iC.forEach(e=>{e()});mM(ri.ServerSideUnknown,xde),mM(ri.WebUnknown,yde)}return jb};function bde(){jb=void 0}function mM(t,e){jb===t&&!yP&&setTimeout(()=>{bde(),yP=!0,setTimeout(wY,vde)},e)}const wde={},Nde=(t,e)=>{var r,s;return(s=(r=wde[t])==null?void 0:r[e])==null?void 0:s.additionalDetails},jde="aws-amplify",Sde=t=>t.replace(/\+.*/,""),kde=({category:t,action:e}={})=>{const r=[[jde,Sde(Zce)]];if(t&&r.push([t,e]),r.push(["framework",wY()]),t&&e){const s=Nde(t,e);s&&s.forEach(a=>{r.push(a)})}return r},yS=t=>kde(t).map(([s,a])=>s&&a?`${s}/${a}`:s).join(" "),NY=()=>typeof window<"u"&&typeof window.document<"u",pM=new zc("Auth");class Cde{configure(e,r){var s,a;this.authConfig=e,this.authOptions=r,e&&((s=e.Cognito)!=null&&s.userPoolEndpoint)&&pM.warn(gM("Amazon Cognito User Pool")),e&&((a=e.Cognito)!=null&&a.identityPoolEndpoint)&&pM.warn(gM("Amazon Cognito Identity Pool"))}async fetchAuthSession(e={}){var i,o,l,d,h,f;let r,s;const a=await this.getTokens(e);return a?(s=(o=(i=a.accessToken)==null?void 0:i.payload)==null?void 0:o.sub,r=await((d=(l=this.authOptions)==null?void 0:l.credentialsProvider)==null?void 0:d.getCredentialsAndIdentityId({authConfig:this.authConfig,tokens:a,authenticated:!0,forceRefresh:e.forceRefresh}))):r=await((f=(h=this.authOptions)==null?void 0:h.credentialsProvider)==null?void 0:f.getCredentialsAndIdentityId({authConfig:this.authConfig,authenticated:!1,forceRefresh:e.forceRefresh})),{tokens:a,credentials:r==null?void 0:r.credentials,identityId:r==null?void 0:r.identityId,userSub:s}}async clearCredentials(){var e,r;await((r=(e=this.authOptions)==null?void 0:e.credentialsProvider)==null?void 0:r.clearCredentialsAndIdentityId())}async getTokens(e){var r,s;return await((s=(r=this.authOptions)==null?void 0:r.tokenProvider)==null?void 0:s.getTokens(e))??void 0}}const gM=t=>`You are using a custom Amazon ${t} endpoint, ensure the endpoint is correct.`;class Ede{constructor(){this.oAuthListener=void 0,this.isConfigured=!1,this.resourcesConfig={},this.libraryOptions={},this.Auth=new Cde}configure(e,r){const s=yY(e);this.resourcesConfig=s,r&&(this.libraryOptions=r),this.resourcesConfig=gY(this.resourcesConfig),this.Auth.configure(this.resourcesConfig.Auth,this.libraryOptions.Auth),xy.dispatch("core",{event:"configure",data:this.resourcesConfig},"Configure",w0),this.notifyOAuthListener(),this.isConfigured=!0}getConfig(){return this.isConfigured||console.warn("Amplify has not been configured. Please call Amplify.configure() before using this service."),this.resourcesConfig}[Cce](e){var r,s,a;(s=(r=this.resourcesConfig.Auth)==null?void 0:r.Cognito.loginWith)!=null&&s.oauth?e((a=this.resourcesConfig.Auth)==null?void 0:a.Cognito):this.oAuthListener=e}notifyOAuthListener(){var e,r,s;!((r=(e=this.resourcesConfig.Auth)==null?void 0:e.Cognito.loginWith)!=null&&r.oauth)||!this.oAuthListener||(this.oAuthListener((s=this.resourcesConfig.Auth)==null?void 0:s.Cognito),this.oAuthListener=void 0)}}const pa=new Ede,jY=(t,e)=>t.Auth.fetchAuthSession(e),F0=t=>jY(pa,t);function SY(){return pa.Auth.clearCredentials()}const vS=t=>{const{headers:e,statusCode:r}=t;return{...Tde(t)?t.$metadata:{},httpStatusCode:r,requestId:e["x-amzn-requestid"]??e["x-amzn-request-id"]??e["x-amz-request-id"],extendedRequestId:e["x-amz-id-2"],cfId:e["x-amz-cf-id"]}},Tde=t=>typeof(t==null?void 0:t.$metadata)=="object",lv=async t=>{if(!t||t.statusCode<300)return;const e=await a1(t),s=(o=>{const[l]=o.toString().split(/[,:]+/);return l.includes("#")?l.split("#")[1]:l})(t.headers["x-amzn-errortype"]??e.code??e.__type??"UnknownError"),a=e.message??e.Message??"Unknown error",i=new Error(a);return Object.assign(i,{name:s,$metadata:vS(t)})},a1=async t=>{if(!t.body)throw new Error("Missing response payload");const e=await t.body.json();return Object.assign(e,{$metadata:vS(t)})},Yc=(t,e,r,s)=>async(a,i)=>{const o={...s,...a},l=await o.endpointResolver(o,i),d=await e(i,l),h=await t(d,{...o});return r(h)},Pde=300*1e3;function Ade(t=Pde){return s=>{const a=2**s*100+100*Math.random();return a>t?!1:a}}const kY=3,xM="amz-sdk-invocation-id",_de="amz-sdk-request",yM=300*1e3,CY=t=>{const r=Ade(yM)(t);return r===!1?yM:r},Ide=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch","BadRequestException"],Mde=t=>!!t&&Ide.includes(t),EY=t=>async(e,r)=>{const s=r??await t(e)??void 0,a=(s==null?void 0:s.code)||(s==null?void 0:s.name),i=e==null?void 0:e.statusCode;return{retryable:$de(r)||Dde(i,a)||Mde(a)||Lde(i,a)}},Ode=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException"],Rde=["TimeoutError","RequestTimeout","RequestTimeoutException"],Dde=(t,e)=>t===429||!!e&&Ode.includes(e),$de=t=>[b0.NetworkError,"ERR_NETWORK"].includes(t==null?void 0:t.name),Lde=(t,e)=>!!t&&[500,502,503,504].includes(t)||!!e&&Rde.includes(e),TY="cognito-identity",PY={service:TY,retryDecider:EY(lv),computeDelay:CY,cache:"no-store"},Fde=({maxAttempts:t=kY,retryDecider:e,computeDelay:r,abortSignal:s})=>{if(t<1)throw new Error("maxAttempts must be greater than 0");return(a,i)=>async function(l){let d,h=i.attemptsCount??0,f;const m=()=>{if(f)return vM(f,h),f;throw vM(d,h),d};for(;!(s!=null&&s.aborted)&&h<t;){try{f=await a(l),d=void 0}catch(j){d=j,f=void 0}h=(i.attemptsCount??0)>h?i.attemptsCount??0:h+1,i.attemptsCount=h;const{isCredentialsExpiredError:x,retryable:b}=await e(f,d,i);if(b){if(i.isCredentialsExpired=!!x,!(s!=null&&s.aborted)&&h<t){const j=r(h);await Bde(j,s)}continue}else return m()}if(s!=null&&s.aborted)throw new Error("Request aborted.");return m()}},Bde=(t,e)=>{if(e!=null&&e.aborted)return Promise.resolve();let r,s;const a=new Promise(i=>{s=i,r=setTimeout(i,t)});return e==null||e.addEventListener("abort",function i(o){clearTimeout(r),e==null||e.removeEventListener("abort",i),s()}),a},vM=(t,e)=>{Object.prototype.toString.call(t)==="[object Object]"&&(t.$metadata={...t.$metadata??{},attempts:e})},Ude=_ce,zde=()=>t=>async function(r){return r.headers[xM]||(r.headers[xM]=Ude()),t(r)},Vde=({maxAttempts:t=kY})=>(e,r)=>async function(a){const i=r.attemptsCount??0;return a.headers[_de]=`attempt=${i+1}; max=${t}`,e(a)},qde=({userAgentHeader:t="x-amz-user-agent",userAgentValue:e=""})=>r=>async function(a){if(e.trim().length===0)return await r(a);{const i=t.toLowerCase();return a.headers[i]=a.headers[i]?`${a.headers[i]} ${e}`:e,await r(a)}},GA=(t,e)=>(r,s)=>{const a={};let i=o=>t(o,s);for(let o=e.length-1;o>=0;o--){const l=e[o];i=l(s)(i,a)}return i(r)},oC=t=>{let e;return()=>(e||(e=t()),e)},Hde=t=>!["HEAD","GET"].includes(t.toUpperCase()),Wde=async({url:t,method:e,headers:r,body:s},{abortSignal:a,cache:i,withCrossDomainCredentials:o})=>{var m;let l;try{l=await fetch(t,{method:e,headers:r,body:Hde(e)?s:void 0,signal:a,cache:i,credentials:o?"include":"same-origin"})}catch(x){throw x instanceof TypeError?new sc({name:b0.NetworkError,message:"A network error has occurred.",underlyingError:x}):x}const d={};(m=l.headers)==null||m.forEach((x,b)=>{d[b.toLowerCase()]=x});const h={statusCode:l.status,headers:d,body:null},f=Object.assign(l.body??{},{text:oC(()=>l.text()),blob:oC(()=>l.blob()),json:oC(()=>l.json())});return{...h,body:f}},AY=GA(Wde,[qde,zde,Fde,Vde]),Yde=()=>t=>async function(r){return r.headers["cache-control"]="no-store",t(r)},_Y=GA(AY,[Yde]),IY=t=>(e,r)=>{const s=Kde(t),a=JSON.stringify(e);return Gde(r,s,a)},Kde=t=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${t}`}),Gde=({url:t},e,r)=>({headers:e,url:t,body:r,method:"POST"}),bM=t=>Yc(_Y,IY("GetCredentialsForIdentity"),Xde,{...PY,...t,userAgentValue:yS()}),Xde=async t=>{if(t.statusCode>=300)throw await lv(t);const e=await a1(t);return{IdentityId:e.IdentityId,Credentials:Qde(e.Credentials),$metadata:vS(t)}},Qde=({Expiration:t,...e}={})=>({...e,Expiration:t&&new Date(t*1e3)}),Jde=t=>Yc(_Y,IY("GetId"),Zde,{...PY,...t,userAgentValue:yS()}),Zde=async t=>{if(t.statusCode>=300)throw await lv(t);return{IdentityId:(await a1(t)).IdentityId,$metadata:vS(t)}},MY={id:"aws",outputs:{dnsSuffix:"amazonaws.com"},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:["aws-global"]},eue={partitions:[MY,{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn"},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:["aws-cn-global"]}]},OY=t=>{const{partitions:e}=eue;for(const{regions:r,outputs:s,regionRegex:a}of e){const i=new RegExp(a);if(r.includes(t)||i.test(t))return s.dnsSuffix}return MY.outputs.dnsSuffix},i1=URL,tue=({region:t})=>({url:new i1(`https://${TY}.${t}.${OY(t)}`)});class ub extends sc{constructor(){super({name:b0.PlatformNotSupported,message:"Function not supported on current platform"})}}class RY{constructor(e){this.storage=e}async setItem(e,r){if(!this.storage)throw new ub;this.storage.setItem(e,r)}async getItem(e){if(!this.storage)throw new ub;return this.storage.getItem(e)}async removeItem(e){if(!this.storage)throw new ub;this.storage.removeItem(e)}async clear(){if(!this.storage)throw new ub;this.storage.clear()}}class DY{constructor(){this.storage=new Map}get length(){return this.storage.size}key(e){return e>this.length-1?null:Array.from(this.storage.keys())[e]}setItem(e,r){this.storage.set(e,r)}getItem(e){return this.storage.get(e)??null}removeItem(e){this.storage.delete(e)}clear(){this.storage.clear()}}const $Y=new zc("CoreStorageUtils"),rue=()=>{try{if(typeof window<"u"&&window.localStorage)return window.localStorage}catch{$Y.info("localStorage not found. InMemoryStorage is used as a fallback.")}return new DY},LY=()=>{try{if(typeof window<"u"&&window.sessionStorage)return window.sessionStorage.getItem("test"),window.sessionStorage;throw new Error("sessionStorage is not defined")}catch{return $Y.info("sessionStorage not found. InMemoryStorage is used as a fallback."),new DY}};class nue extends RY{constructor(){super(rue())}}class sue extends RY{constructor(){super(LY())}}class aue{constructor(e){this._storage=e}get storage(){if(!this._storage)throw new ub;return this._storage}setItem(e,r){this.storage.setItem(e,r)}getItem(e){return this.storage.getItem(e)}removeItem(e){this.storage.removeItem(e)}clear(){this.storage.clear()}}class iue extends aue{constructor(){super(LY())}}/*! js-cookie v3.0.5 | MIT */function hN(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)t[s]=r[s]}return t}var oue={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function vP(t,e){function r(a,i,o){if(!(typeof document>"u")){o=hN({},e,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),a=encodeURIComponent(a).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var l="";for(var d in o)o[d]&&(l+="; "+d,o[d]!==!0&&(l+="="+o[d].split(";")[0]));return document.cookie=a+"="+t.write(i,a)+l}}function s(a){if(!(typeof document>"u"||arguments.length&&!a)){for(var i=document.cookie?document.cookie.split("; "):[],o={},l=0;l<i.length;l++){var d=i[l].split("="),h=d.slice(1).join("=");try{var f=decodeURIComponent(d[0]);if(o[f]=t.read(h,f),a===f)break}catch{}}return a?o[a]:o}}return Object.create({set:r,get:s,remove:function(a,i){r(a,"",hN({},i,{expires:-1}))},withAttributes:function(a){return vP(this.converter,hN({},this.attributes,a))},withConverter:function(a){return vP(hN({},this.converter,a),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var fN=vP(oue,{path:"/"});class lue{constructor(e={}){const{path:r,domain:s,expires:a,sameSite:i,secure:o}=e;if(this.domain=s,this.path=r||"/",this.expires=Object.prototype.hasOwnProperty.call(e,"expires")?a:365,this.secure=Object.prototype.hasOwnProperty.call(e,"secure")?o:!0,Object.prototype.hasOwnProperty.call(e,"sameSite")){if(!i||!["strict","lax","none"].includes(i))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if(i==="none"&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=i}}async setItem(e,r){fN.set(e,r,this.getData())}async getItem(e){return fN.get(e)??null}async removeItem(e){fN.remove(e,this.getData())}async clear(){const e=fN.get(),r=Object.keys(e).map(s=>this.removeItem(s));await Promise.all(r)}getData(){return{path:this.path,expires:this.expires,domain:this.domain,secure:this.secure,...this.sameSite&&{sameSite:this.sameSite}}}}const o1=new nue;new sue;const am=new iue,cue=t=>{let e;return async(...r)=>e||(e=new Promise((s,a)=>{t(...r).then(i=>{s(i)}).catch(i=>{a(i)}).finally(()=>{e=void 0})}),e)};function wM({expiresAt:t,clockDrift:e,tolerance:r=5e3}){return Date.now()+e+r>t}const due=async()=>{const{userAgentData:t}=navigator;if(!t)return navigator.userAgent;const{platform:e="",platformVersion:r="",model:s="",architecture:a="",fullVersionList:i=[]}=await t.getHighEntropyValues(["platform","platformVersion","architecture","model","fullVersionList"]),o=i.map(d=>`${d.brand}/${d.version}`).join(";");return[e,r,a,s,e,o].filter(d=>d).join(" ")||navigator.userAgent};function uue(t){return Array.from(t,e=>String.fromCodePoint(e)).join("")}const Hb={convert(t,e={urlSafe:!1,skipPadding:!1}){const r=typeof t=="string"?t:uue(t);let s=yce()(r);return e.urlSafe&&(s=s.replace(/\+/g,"-").replace(/\//g,"_")),e.skipPadding&&(s=s.replace(/=/g,"")),s}};function hue(){return xce().getRandomValues(new Uint32Array(1))[0]}function fue(t){const{words:e}=t,{sigBytes:r}=t,s=[];for(let a=0;a<r;a++){const i=e[a>>>2]>>>24-a%4*8&255;s.push((i>>>4).toString(16)),s.push((i&15).toString(16))}return s.join("")}class XA{constructor(e,r){this.words=[];let s=e;s=this.words=s||[],r!==void 0?this.sigBytes=r:this.sigBytes=s.length*4}random(e){const r=[];for(let s=0;s<e;s+=4)r.push(hue());return new XA(r,e)}toString(){return fue(this)}}var Pn;(function(t){t.EmptySignInUsername="EmptySignInUsername",t.EmptySignInPassword="EmptySignInPassword",t.CustomAuthSignInPassword="CustomAuthSignInPassword",t.EmptySignUpUsername="EmptySignUpUsername",t.EmptySignUpPassword="EmptySignUpPassword",t.EmptyConfirmSignUpUsername="EmptyConfirmSignUpUsername",t.EmptyConfirmSignUpCode="EmptyConfirmSignUpCode",t.EmptyResendSignUpCodeUsername="EmptyresendSignUpCodeUsername",t.EmptyChallengeResponse="EmptyChallengeResponse",t.EmptyConfirmResetPasswordUsername="EmptyConfirmResetPasswordUsername",t.EmptyConfirmResetPasswordNewPassword="EmptyConfirmResetPasswordNewPassword",t.EmptyConfirmResetPasswordConfirmationCode="EmptyConfirmResetPasswordConfirmationCode",t.EmptyResetPasswordUsername="EmptyResetPasswordUsername",t.EmptyVerifyTOTPSetupCode="EmptyVerifyTOTPSetupCode",t.EmptyConfirmUserAttributeCode="EmptyConfirmUserAttributeCode",t.IncorrectMFAMethod="IncorrectMFAMethod",t.EmptyUpdatePassword="EmptyUpdatePassword"})(Pn||(Pn={}));const FY={[Pn.EmptyChallengeResponse]:{message:"challengeResponse is required to confirmSignIn"},[Pn.EmptyConfirmResetPasswordUsername]:{message:"username is required to confirmResetPassword"},[Pn.EmptyConfirmSignUpCode]:{message:"code is required to confirmSignUp"},[Pn.EmptyConfirmSignUpUsername]:{message:"username is required to confirmSignUp"},[Pn.EmptyConfirmResetPasswordConfirmationCode]:{message:"confirmationCode is required to confirmResetPassword"},[Pn.EmptyConfirmResetPasswordNewPassword]:{message:"newPassword is required to confirmResetPassword"},[Pn.EmptyResendSignUpCodeUsername]:{message:"username is required to confirmSignUp"},[Pn.EmptyResetPasswordUsername]:{message:"username is required to resetPassword"},[Pn.EmptySignInPassword]:{message:"password is required to signIn"},[Pn.EmptySignInUsername]:{message:"username is required to signIn"},[Pn.EmptySignUpPassword]:{message:"password is required to signUp"},[Pn.EmptySignUpUsername]:{message:"username is required to signUp"},[Pn.CustomAuthSignInPassword]:{message:"A password is not needed when signing in with CUSTOM_WITHOUT_SRP",recoverySuggestion:"Do not include a password in your signIn call."},[Pn.IncorrectMFAMethod]:{message:"Incorrect MFA method was chosen. It should be either SMS, TOTP, or EMAIL",recoverySuggestion:"Try to pass SMS, TOTP, or EMAIL as the challengeResponse"},[Pn.EmptyVerifyTOTPSetupCode]:{message:"code is required to verifyTotpSetup"},[Pn.EmptyUpdatePassword]:{message:"oldPassword and newPassword are required to changePassword"},[Pn.EmptyConfirmUserAttributeCode]:{message:"confirmation code is required to confirmUserAttribute"}};var NM;(function(t){t.DEFAULT_MSG="Authentication Error",t.EMPTY_EMAIL="Email cannot be empty",t.EMPTY_PHONE="Phone number cannot be empty",t.EMPTY_USERNAME="Username cannot be empty",t.INVALID_USERNAME="The username should either be a string or one of the sign in types",t.EMPTY_PASSWORD="Password cannot be empty",t.EMPTY_CODE="Confirmation code cannot be empty",t.SIGN_UP_ERROR="Error creating account",t.NO_MFA="No valid MFA method provided",t.INVALID_MFA="Invalid MFA type",t.EMPTY_CHALLENGE="Challenge response cannot be empty",t.NO_USER_SESSION="Failed to get the session because the user is empty",t.NETWORK_ERROR="Network Error",t.DEVICE_CONFIG="Device tracking has not been configured in this User Pool",t.AUTOSIGNIN_ERROR="Please use your credentials to sign in",t.OAUTH_ERROR="Couldn't finish OAuth flow, check your User Pool HostedUI settings"})(NM||(NM={}));var yy;(function(t){t.SignInException="SignInException",t.OAuthSignInError="OAuthSignInException"})(yy||(yy={}));class Zr extends sc{constructor(e){super(e),this.constructor=Zr,Object.setPrototypeOf(this,Zr.prototype)}}function qo(t,e){const{message:r,recoverySuggestion:s}=FY[e];if(!t)throw new Zr({name:e,message:r,recoverySuggestion:s})}function qi(t){const e=t==null?void 0:t.split("_")[0];if(!t||t.indexOf("_")<0||!e||typeof e!="string")throw new Zr({name:"InvalidUserPoolId",message:"Invalid user pool id provided."});return e}function bP(t){if(!t||!t.includes(":"))throw new Zr({name:"InvalidIdentityPoolIdException",message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."});return t.split(":")[0]}function jM(t){return Object.entries(t).map(([e,r])=>({Name:e,Value:r}))}function mue(t){const e={};return t==null||t.forEach(r=>{r.Name&&(e[r.Name]=r.Value)}),e}var SM;(function(t){t.ConcurrentModificationException="ConcurrentModificationException",t.ForbiddenException="ForbiddenException",t.InternalErrorException="InternalErrorException",t.InvalidParameterException="InvalidParameterException",t.NotAuthorizedException="NotAuthorizedException",t.ResourceNotFoundException="ResourceNotFoundException",t.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException"})(SM||(SM={}));var kM;(function(t){t.ForbiddenException="ForbiddenException",t.InternalErrorException="InternalErrorException",t.InvalidParameterException="InvalidParameterException",t.InvalidPasswordException="InvalidPasswordException",t.LimitExceededException="LimitExceededException",t.NotAuthorizedException="NotAuthorizedException",t.PasswordResetRequiredException="PasswordResetRequiredException",t.ResourceNotFoundException="ResourceNotFoundException",t.TooManyRequestsException="TooManyRequestsException",t.UserNotConfirmedException="UserNotConfirmedException",t.UserNotFoundException="UserNotFoundException"})(kM||(kM={}));var CM;(function(t){t.ForbiddenException="ForbiddenException",t.InternalErrorException="InternalErrorException",t.InvalidLambdaResponseException="InvalidLambdaResponseException",t.InvalidParameterException="InvalidParameterException",t.InvalidPasswordException="InvalidPasswordException",t.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",t.NotAuthorizedException="NotAuthorizedException",t.PasswordResetRequiredException="PasswordResetRequiredException",t.ResourceNotFoundException="ResourceNotFoundException",t.TooManyRequestsException="TooManyRequestsException",t.UsernameExistsException="UsernameExistsException",t.UserNotConfirmedException="UserNotConfirmedException",t.UserNotFoundException="UserNotFoundException"})(CM||(CM={}));var EM;(function(t){t.CodeMismatchException="CodeMismatchException",t.ExpiredCodeException="ExpiredCodeException",t.ForbiddenException="ForbiddenException",t.InternalErrorException="InternalErrorException",t.InvalidLambdaResponseException="InvalidLambdaResponseException",t.InvalidParameterException="InvalidParameterException",t.InvalidPasswordException="InvalidPasswordException",t.LimitExceededException="LimitExceededException",t.NotAuthorizedException="NotAuthorizedException",t.ResourceNotFoundException="ResourceNotFoundException",t.TooManyFailedAttemptsException="TooManyFailedAttemptsException",t.TooManyRequestsException="TooManyRequestsException",t.UnexpectedLambdaException="UnexpectedLambdaException",t.UserLambdaValidationException="UserLambdaValidationException",t.UserNotConfirmedException="UserNotConfirmedException",t.UserNotFoundException="UserNotFoundException"})(EM||(EM={}));var TM;(function(t){t.AliasExistsException="AliasExistsException",t.CodeMismatchException="CodeMismatchException",t.ExpiredCodeException="ExpiredCodeException",t.ForbiddenException="ForbiddenException",t.InternalErrorException="InternalErrorException",t.InvalidLambdaResponseException="InvalidLambdaResponseException",t.InvalidParameterException="InvalidParameterException",t.LimitExceededException="LimitExceededException",t.NotAuthorizedException="NotAuthorizedException",t.ResourceNotFoundException="ResourceNotFoundException",t.TooManyFailedAttemptsException="TooManyFailedAttemptsException",t.TooManyRequestsException="TooManyRequestsException",t.UnexpectedLambdaException="UnexpectedLambdaException",t.UserLambdaValidationException="UserLambdaValidationException",t.UserNotFoundException="UserNotFoundException"})(TM||(TM={}));var PM;(function(t){t.ForbiddenException="ForbiddenException",t.InternalErrorException="InternalErrorException",t.InvalidParameterException="InvalidParameterException",t.NotAuthorizedException="NotAuthorizedException",t.PasswordResetRequiredException="PasswordResetRequiredException",t.ResourceNotFoundException="ResourceNotFoundException",t.TooManyRequestsException="TooManyRequestsException",t.UserNotConfirmedException="UserNotConfirmedException",t.UserNotFoundException="UserNotFoundException"})(PM||(PM={}));var AM;(function(t){t.ForbiddenException="ForbiddenException",t.InternalErrorException="InternalErrorException",t.InvalidParameterException="InvalidParameterException",t.NotAuthorizedException="NotAuthorizedException",t.PasswordResetRequiredException="PasswordResetRequiredException",t.ResourceNotFoundException="ResourceNotFoundException",t.TooManyRequestsException="TooManyRequestsException",t.UserNotConfirmedException="UserNotConfirmedException",t.UserNotFoundException="UserNotFoundException"})(AM||(AM={}));var _M;(function(t){t.ForbiddenException="ForbiddenException",t.InternalErrorException="InternalErrorException",t.InvalidParameterException="InvalidParameterException",t.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",t.NotAuthorizedException="NotAuthorizedException",t.PasswordResetRequiredException="PasswordResetRequiredException",t.ResourceNotFoundException="ResourceNotFoundException",t.TooManyRequestsException="TooManyRequestsException",t.UserNotConfirmedException="UserNotConfirmedException",t.UserNotFoundException="UserNotFoundException"})(_M||(_M={}));var IM;(function(t){t.CodeDeliveryFailureException="CodeDeliveryFailureException",t.ForbiddenException="ForbiddenException",t.InternalErrorException="InternalErrorException",t.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",t.InvalidLambdaResponseException="InvalidLambdaResponseException",t.InvalidParameterException="InvalidParameterException",t.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",t.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",t.LimitExceededException="LimitExceededException",t.NotAuthorizedException="NotAuthorizedException",t.ResourceNotFoundException="ResourceNotFoundException",t.TooManyRequestsException="TooManyRequestsException",t.UnexpectedLambdaException="UnexpectedLambdaException",t.UserLambdaValidationException="UserLambdaValidationException",t.UserNotFoundException="UserNotFoundException"})(IM||(IM={}));var MM;(function(t){t.ForbiddenException="ForbiddenException",t.InternalErrorException="InternalErrorException",t.InvalidParameterException="InvalidParameterException",t.NotAuthorizedException="NotAuthorizedException",t.PasswordResetRequiredException="PasswordResetRequiredException",t.ResourceNotFoundException="ResourceNotFoundException",t.TooManyRequestsException="TooManyRequestsException",t.UserNotConfirmedException="UserNotConfirmedException",t.UserNotFoundException="UserNotFoundException"})(MM||(MM={}));var OM;(function(t){t.ExternalServiceException="ExternalServiceException",t.InternalErrorException="InternalErrorException",t.InvalidParameterException="InvalidParameterException",t.LimitExceededException="LimitExceededException",t.NotAuthorizedException="NotAuthorizedException",t.ResourceConflictException="ResourceConflictException",t.ResourceNotFoundException="ResourceNotFoundException",t.TooManyRequestsException="TooManyRequestsException"})(OM||(OM={}));var RM;(function(t){t.ExternalServiceException="ExternalServiceException",t.InternalErrorException="InternalErrorException",t.InvalidIdentityPoolConfigurationException="InvalidIdentityPoolConfigurationException",t.InvalidParameterException="InvalidParameterException",t.NotAuthorizedException="NotAuthorizedException",t.ResourceConflictException="ResourceConflictException",t.ResourceNotFoundException="ResourceNotFoundException",t.TooManyRequestsException="TooManyRequestsException"})(RM||(RM={}));var DM;(function(t){t.CodeDeliveryFailureException="CodeDeliveryFailureException",t.ForbiddenException="ForbiddenException",t.InternalErrorException="InternalErrorException",t.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",t.InvalidLambdaResponseException="InvalidLambdaResponseException",t.InvalidParameterException="InvalidParameterException",t.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",t.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",t.LimitExceededException="LimitExceededException",t.NotAuthorizedException="NotAuthorizedException",t.PasswordResetRequiredException="PasswordResetRequiredException",t.ResourceNotFoundException="ResourceNotFoundException",t.TooManyRequestsException="TooManyRequestsException",t.UnexpectedLambdaException="UnexpectedLambdaException",t.UserLambdaValidationException="UserLambdaValidationException",t.UserNotConfirmedException="UserNotConfirmedException",t.UserNotFoundException="UserNotFoundException"})(DM||(DM={}));var $M;(function(t){t.ForbiddenException="ForbiddenException",t.InternalErrorException="InternalErrorException",t.InvalidParameterException="InvalidParameterException",t.NotAuthorizedException="NotAuthorizedException",t.PasswordResetRequiredException="PasswordResetRequiredException",t.ResourceNotFoundException="ResourceNotFoundException",t.TooManyRequestsException="TooManyRequestsException",t.UserNotConfirmedException="UserNotConfirmedException"})($M||($M={}));var vj;(function(t){t.PasswordResetRequiredException="PasswordResetRequiredException",t.ForbiddenException="ForbiddenException",t.InternalErrorException="InternalErrorException",t.InvalidLambdaResponseException="InvalidLambdaResponseException",t.InvalidParameterException="InvalidParameterException",t.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",t.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",t.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",t.NotAuthorizedException="NotAuthorizedException",t.ResourceNotFoundException="ResourceNotFoundException",t.TooManyRequestsException="TooManyRequestsException",t.UnexpectedLambdaException="UnexpectedLambdaException",t.UserLambdaValidationException="UserLambdaValidationException",t.UserNotConfirmedException="UserNotConfirmedException",t.UserNotFoundException="UserNotFoundException"})(vj||(vj={}));var LM;(function(t){t.CodeDeliveryFailureException="CodeDeliveryFailureException",t.ForbiddenException="ForbiddenException",t.InternalErrorException="InternalErrorException",t.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",t.InvalidLambdaResponseException="InvalidLambdaResponseException",t.InvalidParameterException="InvalidParameterException",t.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",t.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",t.LimitExceededException="LimitExceededException",t.NotAuthorizedException="NotAuthorizedException",t.ResourceNotFoundException="ResourceNotFoundException",t.TooManyRequestsException="TooManyRequestsException",t.UnexpectedLambdaException="UnexpectedLambdaException",t.UserLambdaValidationException="UserLambdaValidationException",t.UserNotFoundException="UserNotFoundException"})(LM||(LM={}));var FM;(function(t){t.AliasExistsException="AliasExistsException",t.CodeMismatchException="CodeMismatchException",t.ExpiredCodeException="ExpiredCodeException",t.ForbiddenException="ForbiddenException",t.InternalErrorException="InternalErrorException",t.InvalidLambdaResponseException="InvalidLambdaResponseException",t.InvalidParameterException="InvalidParameterException",t.InvalidPasswordException="InvalidPasswordException",t.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",t.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",t.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",t.MFAMethodNotFoundException="MFAMethodNotFoundException",t.NotAuthorizedException="NotAuthorizedException",t.PasswordResetRequiredException="PasswordResetRequiredException",t.ResourceNotFoundException="ResourceNotFoundException",t.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",t.TooManyRequestsException="TooManyRequestsException",t.UnexpectedLambdaException="UnexpectedLambdaException",t.UserLambdaValidationException="UserLambdaValidationException",t.UserNotConfirmedException="UserNotConfirmedException",t.UserNotFoundException="UserNotFoundException"})(FM||(FM={}));var BM;(function(t){t.ForbiddenException="ForbiddenException",t.InternalErrorException="InternalErrorException",t.InvalidParameterException="InvalidParameterException",t.NotAuthorizedException="NotAuthorizedException",t.PasswordResetRequiredException="PasswordResetRequiredException",t.ResourceNotFoundException="ResourceNotFoundException",t.UserNotConfirmedException="UserNotConfirmedException",t.UserNotFoundException="UserNotFoundException"})(BM||(BM={}));var wP;(function(t){t.CodeDeliveryFailureException="CodeDeliveryFailureException",t.InternalErrorException="InternalErrorException",t.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",t.InvalidLambdaResponseException="InvalidLambdaResponseException",t.InvalidParameterException="InvalidParameterException",t.InvalidPasswordException="InvalidPasswordException",t.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",t.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",t.NotAuthorizedException="NotAuthorizedException",t.ResourceNotFoundException="ResourceNotFoundException",t.TooManyRequestsException="TooManyRequestsException",t.UnexpectedLambdaException="UnexpectedLambdaException",t.UserLambdaValidationException="UserLambdaValidationException",t.UsernameExistsException="UsernameExistsException"})(wP||(wP={}));var UM;(function(t){t.AliasExistsException="AliasExistsException",t.CodeDeliveryFailureException="CodeDeliveryFailureException",t.CodeMismatchException="CodeMismatchException",t.ExpiredCodeException="ExpiredCodeException",t.ForbiddenException="ForbiddenException",t.InternalErrorException="InternalErrorException",t.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",t.InvalidLambdaResponseException="InvalidLambdaResponseException",t.InvalidParameterException="InvalidParameterException",t.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",t.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",t.NotAuthorizedException="NotAuthorizedException",t.PasswordResetRequiredException="PasswordResetRequiredException",t.ResourceNotFoundException="ResourceNotFoundException",t.TooManyRequestsException="TooManyRequestsException",t.UnexpectedLambdaException="UnexpectedLambdaException",t.UserLambdaValidationException="UserLambdaValidationException",t.UserNotConfirmedException="UserNotConfirmedException",t.UserNotFoundException="UserNotFoundException"})(UM||(UM={}));var zM;(function(t){t.CodeMismatchException="CodeMismatchException",t.EnableSoftwareTokenMFAException="EnableSoftwareTokenMFAException",t.ForbiddenException="ForbiddenException",t.InternalErrorException="InternalErrorException",t.InvalidParameterException="InvalidParameterException",t.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",t.NotAuthorizedException="NotAuthorizedException",t.PasswordResetRequiredException="PasswordResetRequiredException",t.ResourceNotFoundException="ResourceNotFoundException",t.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",t.TooManyRequestsException="TooManyRequestsException",t.UserNotConfirmedException="UserNotConfirmedException",t.UserNotFoundException="UserNotFoundException"})(zM||(zM={}));var VM;(function(t){t.AliasExistsException="AliasExistsException",t.CodeMismatchException="CodeMismatchException",t.ExpiredCodeException="ExpiredCodeException",t.ForbiddenException="ForbiddenException",t.InternalErrorException="InternalErrorException",t.InvalidParameterException="InvalidParameterException",t.LimitExceededException="LimitExceededException",t.NotAuthorizedException="NotAuthorizedException",t.PasswordResetRequiredException="PasswordResetRequiredException",t.ResourceNotFoundException="ResourceNotFoundException",t.TooManyRequestsException="TooManyRequestsException",t.UserNotConfirmedException="UserNotConfirmedException",t.UserNotFoundException="UserNotFoundException"})(VM||(VM={}));var qM;(function(t){t.ForbiddenException="ForbiddenException",t.InternalErrorException="InternalErrorException",t.InvalidParameterException="InvalidParameterException",t.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",t.NotAuthorizedException="NotAuthorizedException",t.PasswordResetRequiredException="PasswordResetRequiredException",t.ResourceNotFoundException="ResourceNotFoundException",t.TooManyRequestsException="TooManyRequestsException",t.UserNotConfirmedException="UserNotConfirmedException",t.UserNotFoundException="UserNotFoundException"})(qM||(qM={}));var HM;(function(t){t.ForbiddenException="ForbiddenException",t.InternalErrorException="InternalErrorException",t.InvalidParameterException="InvalidParameterException",t.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",t.NotAuthorizedException="NotAuthorizedException",t.PasswordResetRequiredException="PasswordResetRequiredException",t.ResourceNotFoundException="ResourceNotFoundException",t.TooManyRequestsException="TooManyRequestsException",t.UserNotConfirmedException="UserNotConfirmedException",t.UserNotFoundException="UserNotFoundException"})(HM||(HM={}));const bS="UserUnAuthenticatedException",pue="UserAlreadyAuthenticatedException",gue="DeviceMetadataNotFoundException",xue="InvalidRedirectException",yue="InvalidAppSchemeException",vue="InvalidPreferredRedirectUrlException",bue=new Zr({name:xue,message:"signInRedirect or signOutRedirect had an invalid format or was not found.",recoverySuggestion:"Please make sure the signIn/Out redirect in your oauth config is valid."});new Zr({name:yue,message:"A valid non-http app scheme was not found in the config.",recoverySuggestion:"Please make sure a valid custom app scheme is present in the config."});new Zr({name:vue,message:"The given preferredRedirectUrl does not match any items in the redirectSignOutUrls array from the config.",recoverySuggestion:"Please make sure a matching preferredRedirectUrl is provided."});const wue="InvalidOriginException",Nue=new Zr({name:wue,message:"redirect is coming from a different origin. The oauth flow needs to be initiated from the same origin",recoverySuggestion:"Please call signInWithRedirect from the same origin."}),jue="OAuthSignOutException",Sue="TokenRefreshException",kue="UnexpectedSignInInterruptionException";function wS(t){if(!t||!t.accessToken)throw new Zr({name:bS,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}function Cue(t){if(!t||!t.idToken)throw new Zr({name:bS,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}const Eue=new Zr({name:Sue,message:`Token refresh is not supported when authenticated with the 'implicit grant' (token) oauth flow. 
	Please change your oauth configuration to use 'code grant' flow.`,recoverySuggestion:`Please logout and change your Amplify configuration to use "code grant" flow. 
	E.g { responseType: 'code' }`}),Tue=new Zr({name:bS,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."});function BY(t){if(_ue(t))throw Eue;if(!Aue(t))throw Tue}function UY(t){if(!t||!t.deviceKey||!t.deviceGroupKey||!t.randomPassword)throw new Zr({name:gue,message:"Either deviceKey, deviceGroupKey or secretPassword were not found during the sign-in process.",recoverySuggestion:"Make sure to not clear storage after calling the signIn API."})}const Pue={inflightOAuth:"inflightOAuth",oauthSignIn:"oauthSignIn",oauthPKCE:"oauthPKCE",oauthState:"oauthState"};function zY(t){return(t==null?void 0:t.accessToken)||(t==null?void 0:t.idToken)}function Aue(t){return zY(t)&&(t==null?void 0:t.refreshToken)}function _ue(t){return zY(t)&&!(t!=null&&t.refreshToken)}const Iue=async t=>{var l,d;const e=(l=t.getConfig().Auth)==null?void 0:l.Cognito;Ss(e);const r=await t.Auth.getTokens({forceRefresh:!1});wS(r);const{"cognito:username":s,sub:a}=((d=r.idToken)==null?void 0:d.payload)??{},i={username:s,userId:a},o=Mue(r);return o&&(i.signInDetails=o),i};function Mue(t){return t==null?void 0:t.signInDetails}const QA=async()=>Iue(pa),qd=(t,e)=>yS({category:xP.Auth,action:t,...e}),Wu=t=>(e,r)=>{const s=Oue(t),a=JSON.stringify(e);return Rue(r,s,a)},Oue=t=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityProviderService.${t}`}),Rue=({url:t},e,r)=>({headers:e,url:t,body:r,method:"POST"});function zu(t){if(!t||t.name==="Error"||t instanceof TypeError)throw new Zr({name:b0.Unknown,message:"An unknown error has occurred.",underlyingError:t})}const mf=()=>async t=>{if(t.statusCode>=300){const e=await lv(t);throw zu(e),new Zr({name:e.name,message:e.message,metadata:e.$metadata})}return a1(t)},Due=()=>(t,e)=>async function(s){return s.headers["cache-control"]="no-store",t(s)},Yu=GA(AY,[Due]),VY="cognito-idp",Ku={service:VY,retryDecider:EY(lv),computeDelay:CY,get userAgentValue(){return yS()},cache:"no-store"},l1=t=>Yc(Yu,Wu("InitiateAuth"),mf(),{...Ku,...t}),NS=t=>Yc(Yu,Wu("RespondToAuthChallenge"),mf(),{...Ku,...t}),$ue=t=>Yc(Yu,Wu("AssociateSoftwareToken"),mf(),{...Ku,...t}),Lue=({region:t})=>({url:new i1(`https://${VY}.${t}.${OY(t)}`)}),Hi=({endpointOverride:t})=>e=>t?{url:new i1(t)}:Lue(e),Fue=t=>Yc(Yu,Wu("GetTokensFromRefreshToken"),mf(),{...Ku,...t}),Bue=async({tokens:t,authConfig:e,username:r,clientMetadata:s})=>{var j;Ss(e==null?void 0:e.Cognito);const{userPoolId:a,userPoolClientId:i,userPoolEndpoint:o}=e.Cognito,l=qi(a);BY(t);const d=Fue({endpointResolver:Hi({endpointOverride:o})}),{AuthenticationResult:h}=await d({region:l},{ClientId:i,RefreshToken:t.refreshToken,DeviceKey:(j=t.deviceMetadata)==null?void 0:j.deviceKey,ClientMetadata:s}),f=N0((h==null?void 0:h.AccessToken)??""),m=h!=null&&h.IdToken?N0(h.IdToken):void 0,{iat:x}=f.payload;if(!x)throw new Zr({name:"iatNotFoundException",message:"iat not found in access token"});const b=x*1e3-new Date().getTime();return{accessToken:f,idToken:m,clockDrift:b,refreshToken:(h==null?void 0:h.RefreshToken)??t.refreshToken,username:r}},Uue=cue(Bue),zue={accessToken:"accessToken",idToken:"idToken",oidcProvider:"oidcProvider",clockDrift:"clockDrift",refreshToken:"refreshToken",deviceKey:"deviceKey",randomPasswordKey:"randomPasswordKey",deviceGroupKey:"deviceGroupKey",signInDetails:"signInDetails",oauthMetadata:"oauthMetadata"};var bj;(function(t){t.InvalidAuthTokens="InvalidAuthTokens"})(bj||(bj={}));const Vue={[bj.InvalidAuthTokens]:{message:"Invalid tokens.",recoverySuggestion:"Make sure the tokens are valid."}},que=HA(Vue),WM="CognitoIdentityServiceProvider";class Hue{getKeyValueStorage(){if(!this.keyValueStorage)throw new Zr({name:"KeyValueStorageNotFoundException",message:"KeyValueStorage was not found in TokenStore"});return this.keyValueStorage}setKeyValueStorage(e){this.keyValueStorage=e}setAuthConfig(e){this.authConfig=e}async loadTokens(){try{const e=await this.getAuthKeys(),r=await this.getKeyValueStorage().getItem(e.accessToken);if(!r)throw new Zr({name:"NoSessionFoundException",message:"Auth session was not found. Make sure to call signIn."});const s=N0(r),a=await this.getKeyValueStorage().getItem(e.idToken),i=a?N0(a):void 0,o=await this.getKeyValueStorage().getItem(e.refreshToken)??void 0,l=await this.getKeyValueStorage().getItem(e.clockDrift)??"0",d=Number.parseInt(l),h=await this.getKeyValueStorage().getItem(e.signInDetails),f={accessToken:s,idToken:i,refreshToken:o,deviceMetadata:await this.getDeviceMetadata()??void 0,clockDrift:d,username:await this.getLastAuthUser()};return h&&(f.signInDetails=JSON.parse(h)),f}catch{return null}}async storeTokens(e){que(e!==void 0,bj.InvalidAuthTokens);const r=e.username;await this.getKeyValueStorage().setItem(this.getLastAuthUserKey(),r);const s=await this.getAuthKeys();await this.getKeyValueStorage().setItem(s.accessToken,e.accessToken.toString()),e.idToken?await this.getKeyValueStorage().setItem(s.idToken,e.idToken.toString()):await this.getKeyValueStorage().removeItem(s.idToken),e.refreshToken?await this.getKeyValueStorage().setItem(s.refreshToken,e.refreshToken):await this.getKeyValueStorage().removeItem(s.refreshToken),e.deviceMetadata&&(e.deviceMetadata.deviceKey&&await this.getKeyValueStorage().setItem(s.deviceKey,e.deviceMetadata.deviceKey),e.deviceMetadata.deviceGroupKey&&await this.getKeyValueStorage().setItem(s.deviceGroupKey,e.deviceMetadata.deviceGroupKey),await this.getKeyValueStorage().setItem(s.randomPasswordKey,e.deviceMetadata.randomPassword)),e.signInDetails?await this.getKeyValueStorage().setItem(s.signInDetails,JSON.stringify(e.signInDetails)):await this.getKeyValueStorage().removeItem(s.signInDetails),await this.getKeyValueStorage().setItem(s.clockDrift,`${e.clockDrift}`)}async clearTokens(){const e=await this.getAuthKeys();await Promise.all([this.getKeyValueStorage().removeItem(e.accessToken),this.getKeyValueStorage().removeItem(e.idToken),this.getKeyValueStorage().removeItem(e.clockDrift),this.getKeyValueStorage().removeItem(e.refreshToken),this.getKeyValueStorage().removeItem(e.signInDetails),this.getKeyValueStorage().removeItem(this.getLastAuthUserKey()),this.getKeyValueStorage().removeItem(e.oauthMetadata)])}async getDeviceMetadata(e){const r=await this.getAuthKeys(e),s=await this.getKeyValueStorage().getItem(r.deviceKey),a=await this.getKeyValueStorage().getItem(r.deviceGroupKey),i=await this.getKeyValueStorage().getItem(r.randomPasswordKey);return i&&a&&s?{deviceKey:s,deviceGroupKey:a,randomPassword:i}:null}async clearDeviceMetadata(e){const r=await this.getAuthKeys(e);await Promise.all([this.getKeyValueStorage().removeItem(r.deviceKey),this.getKeyValueStorage().removeItem(r.deviceGroupKey),this.getKeyValueStorage().removeItem(r.randomPasswordKey)])}async getAuthKeys(e){var s;Ss((s=this.authConfig)==null?void 0:s.Cognito);const r=e??await this.getLastAuthUser();return Wue(WM,`${this.authConfig.Cognito.userPoolClientId}.${r}`)}getLastAuthUserKey(){var r;Ss((r=this.authConfig)==null?void 0:r.Cognito);const e=this.authConfig.Cognito.userPoolClientId;return`${WM}.${e}.LastAuthUser`}async getLastAuthUser(){return await this.getKeyValueStorage().getItem(this.getLastAuthUserKey())??"username"}async setOAuthMetadata(e){const{oauthMetadata:r}=await this.getAuthKeys();await this.getKeyValueStorage().setItem(r,JSON.stringify(e))}async getOAuthMetadata(){const{oauthMetadata:e}=await this.getAuthKeys(),r=await this.getKeyValueStorage().getItem(e);return r&&JSON.parse(r)}}const Wue=(t,e)=>JA(zue)(`${t}`,e);function JA(t){const e=Object.values({...t});return(r,s)=>e.reduce((a,i)=>({...a,[i]:`${r}.${s}.${i}`}),{})}const YM="amplify-signin-with-hostedUI",$h="CognitoIdentityServiceProvider";class qY{constructor(e){this.keyValueStorage=e}async clearOAuthInflightData(){Ss(this.cognitoConfig);const e=Lh($h,this.cognitoConfig.userPoolClientId);await Promise.all([this.keyValueStorage.removeItem(e.inflightOAuth),this.keyValueStorage.removeItem(e.oauthPKCE),this.keyValueStorage.removeItem(e.oauthState)])}async clearOAuthData(){Ss(this.cognitoConfig);const e=Lh($h,this.cognitoConfig.userPoolClientId);return await this.clearOAuthInflightData(),await this.keyValueStorage.removeItem(YM),this.keyValueStorage.removeItem(e.oauthSignIn)}loadOAuthState(){Ss(this.cognitoConfig);const e=Lh($h,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(e.oauthState)}storeOAuthState(e){Ss(this.cognitoConfig);const r=Lh($h,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(r.oauthState,e)}loadPKCE(){Ss(this.cognitoConfig);const e=Lh($h,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(e.oauthPKCE)}storePKCE(e){Ss(this.cognitoConfig);const r=Lh($h,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(r.oauthPKCE,e)}setAuthConfig(e){this.cognitoConfig=e}async loadOAuthInFlight(){Ss(this.cognitoConfig);const e=Lh($h,this.cognitoConfig.userPoolClientId);return await this.keyValueStorage.getItem(e.inflightOAuth)==="true"}async storeOAuthInFlight(e){Ss(this.cognitoConfig);const r=Lh($h,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(r.inflightOAuth,`${e}`)}async loadOAuthSignIn(){var i;Ss(this.cognitoConfig);const e=Lh($h,this.cognitoConfig.userPoolClientId),r=await this.keyValueStorage.getItem(YM),[s,a]=((i=await this.keyValueStorage.getItem(e.oauthSignIn))==null?void 0:i.split(","))??[];return{isOAuthSignIn:s==="true"||r==="true",preferPrivateSession:a==="true"}}async storeOAuthSignIn(e,r=!1){Ss(this.cognitoConfig);const s=Lh($h,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(s.oauthSignIn,`${e},${r}`)}}const Lh=(t,e)=>JA(Pue)(t,e),KM=new qY(o1);class Yue{constructor(){this.waitForInflightOAuth=NY()?async()=>{if(await KM.loadOAuthInFlight())return this.inflightPromise?this.inflightPromise:(this.inflightPromise=new Promise((e,r)=>{}),this.inflightPromise)}:async()=>{}}setAuthConfig(e){KM.setAuthConfig(e.Cognito),this.authConfig=e}setTokenRefresher(e){this.tokenRefresher=e}setAuthTokenStore(e){this.tokenStore=e}getTokenStore(){if(!this.tokenStore)throw new Zr({name:"EmptyTokenStoreException",message:"TokenStore not set"});return this.tokenStore}getTokenRefresher(){if(!this.tokenRefresher)throw new Zr({name:"EmptyTokenRefresherException",message:"TokenRefresher not set"});return this.tokenRefresher}setClientMetadataProvider(e){this.clientMetadataProvider=e}async getTokens(e){var o,l,d,h,f,m;let r;try{Ss((o=this.authConfig)==null?void 0:o.Cognito)}catch{return null}await this.waitForInflightOAuth(),this.inflightPromise=void 0,r=await this.getTokenStore().loadTokens();const s=await this.getTokenStore().getLastAuthUser();if(r===null)return null;const a=!!(r!=null&&r.idToken)&&wM({expiresAt:(((d=(l=r.idToken)==null?void 0:l.payload)==null?void 0:d.exp)??0)*1e3,clockDrift:r.clockDrift??0}),i=wM({expiresAt:(((f=(h=r.accessToken)==null?void 0:h.payload)==null?void 0:f.exp)??0)*1e3,clockDrift:r.clockDrift??0});return(e!=null&&e.forceRefresh||a||i)&&(r=await this.refreshTokens({tokens:r,username:s,clientMetadata:(e==null?void 0:e.clientMetadata)??await((m=this.clientMetadataProvider)==null?void 0:m.call(this))}),r===null)?null:{accessToken:r==null?void 0:r.accessToken,idToken:r==null?void 0:r.idToken,signInDetails:r==null?void 0:r.signInDetails}}async refreshTokens({tokens:e,username:r,clientMetadata:s}){try{const{signInDetails:a}=e,i=await this.getTokenRefresher()({tokens:e,authConfig:this.authConfig,username:r,clientMetadata:s});return i.signInDetails=a,await this.setTokens({tokens:i}),xy.dispatch("auth",{event:"tokenRefresh"},"Auth",w0),i}catch(a){return this.handleErrors(a)}}handleErrors(e){if(zu(e),this.isAuthenticationError(e)&&this.clearTokens(),xy.dispatch("auth",{event:"tokenRefresh_failure",data:{error:e}},"Auth",w0),e.name.startsWith("NotAuthorizedException"))return null;throw e}isAuthenticationError(e){return["NotAuthorizedException","TokenRevokedException","UserNotFoundException","PasswordResetRequiredException","UserNotConfirmedException","RefreshTokenReuseException"].some(s=>{var a,i;return(i=(a=e==null?void 0:e.name)==null?void 0:a.startsWith)==null?void 0:i.call(a,s)})}async setTokens({tokens:e}){return this.getTokenStore().storeTokens(e)}async clearTokens(){return this.getTokenStore().clearTokens()}getDeviceMetadata(e){return this.getTokenStore().getDeviceMetadata(e)}clearDeviceMetadata(e){return this.getTokenStore().clearDeviceMetadata(e)}setOAuthMetadata(e){return this.getTokenStore().setOAuthMetadata(e)}getOAuthMetadata(){return this.getTokenStore().getOAuthMetadata()}}class Kue{constructor(){this.authTokenStore=new Hue,this.authTokenStore.setKeyValueStorage(o1),this.tokenOrchestrator=new Yue,this.tokenOrchestrator.setAuthTokenStore(this.authTokenStore),this.tokenOrchestrator.setTokenRefresher(Uue)}getTokens(e={}){return this.tokenOrchestrator.getTokens(e)}setKeyValueStorage(e){this.authTokenStore.setKeyValueStorage(e)}setClientMetadataProvider(e){this.tokenOrchestrator.setClientMetadataProvider(e)}setAuthConfig(e){this.authTokenStore.setAuthConfig(e),this.tokenOrchestrator.setAuthConfig(e)}}const hb=new Kue,{tokenOrchestrator:zd}=hb;async function cv(t){if(t.AccessToken){const e=N0(t.AccessToken),r=(e.payload.iat||0)*1e3,s=new Date().getTime(),a=r>0?r-s:0;let i,o,l;t.RefreshToken&&(o=t.RefreshToken),t.IdToken&&(i=N0(t.IdToken)),t!=null&&t.NewDeviceMetadata&&(l=t.NewDeviceMetadata);const d={accessToken:e,idToken:i,refreshToken:o,clockDrift:a,deviceMetadata:l,username:t.username};t!=null&&t.signInDetails&&(d.signInDetails=t.signInDetails),await zd.setTokens({tokens:d})}else throw new sc({message:"Invalid tokens",name:"InvalidTokens",recoverySuggestion:"Check Cognito UserPool settings"})}const Gue="Unable to get user session following successful sign-in.",dv=async()=>{try{xy.dispatch("auth",{event:"signedIn",data:await QA()},"Auth",w0)}catch(t){throw t.name===bS?new Zr({name:kue,message:Gue,recoverySuggestion:"This most likely is due to auth tokens not being persisted. If you are using cookie store, please ensure cookies can be correctly set from your server."}):t}};function HY(){return{active:!1}}const Xue=(t,e)=>{switch(e.type){case"SET_USERNAME":return{...t,username:e.value};case"SET_SESSION":return{...t,session:e.value};case"START":return{...t,active:!0};case"RESET":return HY();default:return t}},Que=t=>{let e=t(HY(),{type:"RESET"});return{getState:()=>e,dispatch:r=>{e=t(e,r)}}},Dx=Que(Xue),Jue=180*1e3,mN="CognitoSignInState",im={username:`${mN}.username`,challengeName:`${mN}.challengeName`,signInSession:`${mN}.signInSession`,expiry:`${mN}.expiry`},Zue=(t,e)=>{switch(e.type){case"SET_SIGN_IN_SESSION":return pN({signInSession:e.value}),{...t,signInSession:e.value};case"SET_SIGN_IN_STATE":return pN(e.value),{...e.value};case"SET_CHALLENGE_NAME":return pN({challengeName:e.value}),{...t,challengeName:e.value};case"SET_USERNAME":return pN({username:e.value}),{...t,username:e.value};case"SET_INITIAL_STATE":return the();case"RESET_STATE":return WY(),ZA();default:return t}},ehe=t=>{const e=Number(t),r=Date.now();return e<=r},lf=()=>{Hp.dispatch({type:"RESET_STATE"})},WY=()=>{for(const t of Object.values(im))am.removeItem(t)},ZA=()=>({username:void 0,challengeName:void 0,signInSession:void 0}),the=()=>{const t=am.getItem(im.expiry);if(!t||ehe(t))return WY(),ZA();const e=am.getItem(im.username)??void 0,r=am.getItem(im.challengeName)??void 0,s=am.getItem(im.signInSession)??void 0;return{username:e,challengeName:r,signInSession:s}},rhe=t=>{let e=t(ZA(),{type:"SET_INITIAL_STATE"});return{getState:()=>e,dispatch:r=>{e=t(e,r)}}},Hp=rhe(Zue);function uv(t){Hp.dispatch({type:"SET_SIGN_IN_STATE",value:t})}const pN=({challengeName:t,signInSession:e,username:r})=>{r&&am.setItem(im.username,r),t&&am.setItem(im.challengeName,t),e&&(am.setItem(im.signInSession,e),am.setItem(im.expiry,String(Date.now()+Jue)))},GM="Passkeys may not be supported on this device. Ensure your application is running in a secure context (HTTPS) and Web Authentication API is supported.";class fm extends sc{constructor(e){super(e),this.constructor=fm,Object.setPrototypeOf(this,fm.prototype)}}var Va;(function(t){t.PasskeyNotSupported="PasskeyNotSupported",t.PasskeyAlreadyExists="PasskeyAlreadyExists",t.InvalidPasskeyRegistrationOptions="InvalidPasskeyRegistrationOptions",t.InvalidPasskeyAuthenticationOptions="InvalidPasskeyAuthenticationOptions",t.RelyingPartyMismatch="RelyingPartyMismatch",t.PasskeyRegistrationFailed="PasskeyRegistrationFailed",t.PasskeyRetrievalFailed="PasskeyRetrievalFailed",t.PasskeyRegistrationCanceled="PasskeyRegistrationCanceled",t.PasskeyAuthenticationCanceled="PasskeyAuthenticationCanceled",t.PasskeyOperationAborted="PasskeyOperationAborted"})(Va||(Va={}));const lC="User may have canceled the ceremony or another interruption has occurred. Check underlying error for details.",XM="Ensure your user pool is configured to support the WEB_AUTHN as an authentication factor.",wj={[Va.PasskeyNotSupported]:{message:"Passkeys may not be supported on this device.",recoverySuggestion:GM},[Va.InvalidPasskeyRegistrationOptions]:{message:"Invalid passkey registration options.",recoverySuggestion:XM},[Va.InvalidPasskeyAuthenticationOptions]:{message:"Invalid passkey authentication options.",recoverySuggestion:XM},[Va.PasskeyRegistrationFailed]:{message:"Device failed to create passkey.",recoverySuggestion:GM},[Va.PasskeyRetrievalFailed]:{message:"Device failed to retrieve passkey.",recoverySuggestion:"Passkeys may not be available on this device. Try an alternative authentication factor like PASSWORD, EMAIL_OTP, or SMS_OTP."},[Va.PasskeyAlreadyExists]:{message:"Passkey already exists in authenticator.",recoverySuggestion:"Proceed with existing passkey or try again after deleting the credential."},[Va.PasskeyRegistrationCanceled]:{message:"Passkey registration ceremony has been canceled.",recoverySuggestion:lC},[Va.PasskeyAuthenticationCanceled]:{message:"Passkey authentication ceremony has been canceled.",recoverySuggestion:lC},[Va.PasskeyOperationAborted]:{message:"Passkey operation has been aborted.",recoverySuggestion:lC},[Va.RelyingPartyMismatch]:{message:"Relying party does not match current domain.",recoverySuggestion:"Ensure relying party identifier matches current domain."}},e_=HA(wj,fm),nhe=t=>{if(t instanceof Error){if(t.name==="AbortError"){const{message:e,recoverySuggestion:r}=wj[Va.PasskeyOperationAborted];return new fm({name:Va.PasskeyOperationAborted,message:e,recoverySuggestion:r,underlyingError:t})}if(t.name==="SecurityError"){const{message:e,recoverySuggestion:r}=wj[Va.RelyingPartyMismatch];return new fm({name:Va.RelyingPartyMismatch,message:e,recoverySuggestion:r,underlyingError:t})}}return new fm({name:b0.Unknown,message:"An unknown error has occurred.",underlyingError:t})},she=t=>{if(t instanceof fm)return t;if(t instanceof Error&&t.name==="NotAllowedError"){const{message:e,recoverySuggestion:r}=wj[Va.PasskeyAuthenticationCanceled];return new fm({name:Va.PasskeyAuthenticationCanceled,message:e,recoverySuggestion:r,underlyingError:t})}return nhe(t)},ahe=()=>NY()&&window.isSecureContext&&"credentials"in navigator&&typeof window.PublicKeyCredential=="function",Vv=t=>Hb.convert(new Uint8Array(t),{urlSafe:!0,skipPadding:!0}),QM=t=>Uint8Array.from(WA.convert(t,{urlSafe:!0}),e=>e.charCodeAt(0)).buffer,ihe=t=>{const e=QM(t.challenge),r=(t.allowCredentials||[]).map(s=>({...s,id:QM(s.id)}));return{...t,challenge:e,allowCredentials:r}},ohe=t=>{const e={clientDataJSON:Vv(t.response.clientDataJSON),authenticatorData:Vv(t.response.authenticatorData),signature:Vv(t.response.signature)};t.response.userHandle&&(e.userHandle=Vv(t.response.userHandle));const r={id:t.id,rawId:Vv(t.rawId),type:t.type,clientExtensionResults:t.getClientExtensionResults(),response:e};return t.authenticatorAttachment&&(r.authenticatorAttachment=t.authenticatorAttachment),r};function lhe(t){e_(t&&t instanceof PublicKeyCredential&&t.response instanceof AuthenticatorAssertionResponse,Va.PasskeyRetrievalFailed)}const che=async t=>{try{const e=ahe();e_(e,Va.PasskeyNotSupported);const r=ihe(t),s=await navigator.credentials.get({publicKey:r});return lhe(s),ohe(s)}catch(e){throw she(e)}},dhe=t=>Yc(Yu,Wu("ConfirmDevice"),mf(),{...Ku,...t}),QN={convert(t){return new TextEncoder().encode(t)}};function sr(t,e){t!=null&&this.fromString(t,e)}function gl(){return new sr(null,null)}let Lp;const uhe=0xdeadbeefcafe,JM=(uhe&16777215)===15715070;function hhe(t,e,r,s,a,i){for(;--i>=0;){const o=e*this[t++]+r[s]+a;a=Math.floor(o/67108864),r[s++]=o&67108863}return a}function fhe(t,e,r,s,a,i){const o=e&32767,l=e>>15;for(;--i>=0;){let d=this[t]&32767;const h=this[t++]>>15,f=l*d+h*o;d=o*d+((f&32767)<<15)+r[s]+(a&1073741823),a=(d>>>30)+(f>>>15)+l*h+(a>>>30),r[s++]=d&1073741823}return a}function mhe(t,e,r,s,a,i){const o=e&16383,l=e>>14;for(;--i>=0;){let d=this[t]&16383;const h=this[t++]>>14,f=l*d+h*o;d=o*d+((f&16383)<<14)+r[s]+a,a=(d>>28)+(f>>14)+l*h,r[s++]=d&268435455}return a}const ZM=typeof navigator<"u";ZM&&JM&&navigator.appName==="Microsoft Internet Explorer"?(sr.prototype.am=fhe,Lp=30):ZM&&JM&&navigator.appName!=="Netscape"?(sr.prototype.am=hhe,Lp=26):(sr.prototype.am=mhe,Lp=28);sr.prototype.DB=Lp;sr.prototype.DM=(1<<Lp)-1;sr.prototype.DV=1<<Lp;const t_=52;sr.prototype.FV=Math.pow(2,t_);sr.prototype.F1=t_-Lp;sr.prototype.F2=2*Lp-t_;const phe="0123456789abcdefghijklmnopqrstuvwxyz",jS=[];let hv,$d;hv=48;for($d=0;$d<=9;++$d)jS[hv++]=$d;hv=97;for($d=10;$d<36;++$d)jS[hv++]=$d;hv=65;for($d=10;$d<36;++$d)jS[hv++]=$d;function eO(t){return phe.charAt(t)}function ghe(t,e){const r=jS[t.charCodeAt(e)];return r??-1}function xhe(t){for(let e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function yhe(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0}function r_(t){const e=gl();return e.fromInt(t),e}function vhe(t,e){let r;if(e===16)r=4;else if(e===8)r=3;else if(e===2)r=1;else if(e===32)r=5;else if(e===4)r=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");this.t=0,this.s=0;let s=t.length,a=!1,i=0;for(;--s>=0;){const o=ghe(t,s);if(o<0){t.charAt(s)==="-"&&(a=!0);continue}a=!1,i===0?this[this.t++]=o:i+r>this.DB?(this[this.t-1]|=(o&(1<<this.DB-i)-1)<<i,this[this.t++]=o>>this.DB-i):this[this.t-1]|=o<<i,i+=r,i>=this.DB&&(i-=this.DB)}this.clamp(),a&&sr.ZERO.subTo(this,this)}function bhe(){const t=this.s&this.DM;for(;this.t>0&&this[this.t-1]==t;)--this.t}function whe(t){if(this.s<0)return"-"+this.negate().toString(t);let e;if(t==16)e=4;else if(t===8)e=3;else if(t===2)e=1;else if(t===32)e=5;else if(t===4)e=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");const r=(1<<e)-1;let s,a=!1,i="",o=this.t,l=this.DB-o*this.DB%e;if(o-- >0)for(l<this.DB&&(s=this[o]>>l)>0&&(a=!0,i=eO(s));o>=0;)l<e?(s=(this[o]&(1<<l)-1)<<e-l,s|=this[--o]>>(l+=this.DB-e)):(s=this[o]>>(l-=e)&r,l<=0&&(l+=this.DB,--o)),s>0&&(a=!0),a&&(i+=eO(s));return a?i:"0"}function Nhe(){const t=gl();return sr.ZERO.subTo(this,t),t}function jhe(){return this.s<0?this.negate():this}function She(t){let e=this.s-t.s;if(e!=0)return e;let r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this[r]-t[r])!=0)return e;return 0}function n_(t){let e=1,r;return(r=t>>>16)!==0&&(t=r,e+=16),(r=t>>8)!==0&&(t=r,e+=8),(r=t>>4)!==0&&(t=r,e+=4),(r=t>>2)!==0&&(t=r,e+=2),(r=t>>1)!==0&&(t=r,e+=1),e}function khe(){return this.t<=0?0:this.DB*(this.t-1)+n_(this[this.t-1]^this.s&this.DM)}function Che(t,e){let r;for(r=this.t-1;r>=0;--r)e[r+t]=this[r];for(r=t-1;r>=0;--r)e[r]=0;e.t=this.t+t,e.s=this.s}function Ehe(t,e){for(let r=t;r<this.t;++r)e[r-t]=this[r];e.t=Math.max(this.t-t,0),e.s=this.s}function The(t,e){const r=t%this.DB,s=this.DB-r,a=(1<<s)-1,i=Math.floor(t/this.DB);let o=this.s<<r&this.DM,l;for(l=this.t-1;l>=0;--l)e[l+i+1]=this[l]>>s|o,o=(this[l]&a)<<r;for(l=i-1;l>=0;--l)e[l]=0;e[i]=o,e.t=this.t+i+1,e.s=this.s,e.clamp()}function Phe(t,e){e.s=this.s;const r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}const s=t%this.DB,a=this.DB-s,i=(1<<s)-1;e[0]=this[r]>>s;for(let o=r+1;o<this.t;++o)e[o-r-1]|=(this[o]&i)<<a,e[o-r]=this[o]>>s;s>0&&(e[this.t-r-1]|=(this.s&i)<<a),e.t=this.t-r,e.clamp()}function Ahe(t,e){let r=0,s=0;const a=Math.min(t.t,this.t);for(;r<a;)s+=this[r]-t[r],e[r++]=s&this.DM,s>>=this.DB;if(t.t<this.t){for(s-=t.s;r<this.t;)s+=this[r],e[r++]=s&this.DM,s>>=this.DB;s+=this.s}else{for(s+=this.s;r<t.t;)s-=t[r],e[r++]=s&this.DM,s>>=this.DB;s-=t.s}e.s=s<0?-1:0,s<-1?e[r++]=this.DV+s:s>0&&(e[r++]=s),e.t=r,e.clamp()}function _he(t,e){const r=this.abs(),s=t.abs();let a=r.t;for(e.t=a+s.t;--a>=0;)e[a]=0;for(a=0;a<s.t;++a)e[a+r.t]=r.am(0,s[a],e,a,0,r.t);e.s=0,e.clamp(),this.s!==t.s&&sr.ZERO.subTo(e,e)}function Ihe(t){const e=this.abs();let r=t.t=2*e.t;for(;--r>=0;)t[r]=0;for(r=0;r<e.t-1;++r){const s=e.am(r,e[r],t,2*r,0,1);(t[r+e.t]+=e.am(r+1,2*e[r],t,2*r+1,s,e.t-r-1))>=e.DV&&(t[r+e.t]-=e.DV,t[r+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(r,e[r],t,2*r,0,1)),t.s=0,t.clamp()}function Mhe(t,e,r){const s=t.abs();if(s.t<=0)return;const a=this.abs();if(a.t<s.t){e!=null&&e.fromInt(0),r!=null&&this.copyTo(r);return}r===null&&(r=gl());const i=gl(),o=this.s,l=t.s,d=this.DB-n_(s[s.t-1]);d>0?(s.lShiftTo(d,i),a.lShiftTo(d,r)):(s.copyTo(i),a.copyTo(r));const h=i.t,f=i[h-1];if(f===0)return;const m=f*(1<<this.F1)+(h>1?i[h-2]>>this.F2:0),x=this.FV/m,b=(1<<this.F1)/m,j=1<<this.F2;let N=r.t,w=N-h;const C=e===null?gl():e;for(i.dlShiftTo(w,C),r.compareTo(C)>=0&&(r[r.t++]=1,r.subTo(C,r)),sr.ONE.dlShiftTo(h,C),C.subTo(i,i);i.t<h;)i[i.t++]=0;for(;--w>=0;){let T=r[--N]===f?this.DM:Math.floor(r[N]*x+(r[N-1]+j)*b);if((r[N]+=i.am(0,T,r,w,0,h))<T)for(i.dlShiftTo(w,C),r.subTo(C,r);r[N]<--T;)r.subTo(C,r)}e!==null&&(r.drShiftTo(h,e),o!==l&&sr.ZERO.subTo(e,e)),r.t=h,r.clamp(),d>0&&r.rShiftTo(d,r),o<0&&sr.ZERO.subTo(r,r)}function Ohe(t){const e=gl();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(sr.ZERO)>0&&t.subTo(e,e),e}function Rhe(){if(this.t<1)return 0;const t=this[0];if((t&1)===0)return 0;let e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function Dhe(t){return this.compareTo(t)===0}function $he(t,e){let r=0,s=0;const a=Math.min(t.t,this.t);for(;r<a;)s+=this[r]+t[r],e[r++]=s&this.DM,s>>=this.DB;if(t.t<this.t){for(s+=t.s;r<this.t;)s+=this[r],e[r++]=s&this.DM,s>>=this.DB;s+=this.s}else{for(s+=this.s;r<t.t;)s+=t[r],e[r++]=s&this.DM,s>>=this.DB;s+=t.s}e.s=s<0?-1:0,s>0?e[r++]=s:s<-1&&(e[r++]=this.DV+s),e.t=r,e.clamp()}function Lhe(t){const e=gl();return this.addTo(t,e),e}function Fhe(t){const e=gl();return this.subTo(t,e),e}function Bhe(t){const e=gl();return this.multiplyTo(t,e),e}function Uhe(t){const e=gl();return this.divRemTo(t,e,null),e}function fv(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function zhe(t){const e=gl();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(sr.ZERO)>0&&this.m.subTo(e,e),e}function Vhe(t){const e=gl();return t.copyTo(e),this.reduce(e),e}function qhe(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(let e=0;e<this.m.t;++e){let r=t[e]&32767;const s=r*this.mpl+((r*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t[r]+=this.m.am(0,s,t,e,0,this.m.t);t[r]>=t.DV;)t[r]-=t.DV,t[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function Hhe(t,e){t.squareTo(e),this.reduce(e)}function Whe(t,e,r){t.multiplyTo(e,r),this.reduce(r)}fv.prototype.convert=zhe;fv.prototype.revert=Vhe;fv.prototype.reduce=qhe;fv.prototype.mulTo=Whe;fv.prototype.sqrTo=Hhe;function Yhe(t,e,r){let s=t.bitLength(),a,i=r_(1);const o=new fv(e);if(s<=0)return i;s<18?a=1:s<48?a=3:s<144?a=4:s<768?a=5:a=6;const l=[];let d=3;const h=a-1,f=(1<<a)-1;if(l[1]=o.convert(this),a>1){const C=gl();for(o.sqrTo(l[1],C);d<=f;)l[d]=gl(),o.mulTo(C,l[d-2],l[d]),d+=2}let m=t.t-1,x,b=!0,j=gl(),N;for(s=n_(t[m])-1;m>=0;){for(s>=h?x=t[m]>>s-h&f:(x=(t[m]&(1<<s+1)-1)<<h-s,m>0&&(x|=t[m-1]>>this.DB+s-h)),d=a;(x&1)===0;)x>>=1,--d;if((s-=d)<0&&(s+=this.DB,--m),b)l[x].copyTo(i),b=!1;else{for(;d>1;)o.sqrTo(i,j),o.sqrTo(j,i),d-=2;d>0?o.sqrTo(i,j):(N=i,i=j,j=N),o.mulTo(j,l[x],i)}for(;m>=0&&(t[m]&1<<s)===0;)o.sqrTo(i,j),N=i,i=j,j=N,--s<0&&(s=this.DB-1,--m)}const w=o.revert(i);return r(null,w),w}sr.prototype.copyTo=xhe;sr.prototype.fromInt=yhe;sr.prototype.fromString=vhe;sr.prototype.clamp=bhe;sr.prototype.dlShiftTo=Che;sr.prototype.drShiftTo=Ehe;sr.prototype.lShiftTo=The;sr.prototype.rShiftTo=Phe;sr.prototype.subTo=Ahe;sr.prototype.multiplyTo=_he;sr.prototype.squareTo=Ihe;sr.prototype.divRemTo=Mhe;sr.prototype.invDigit=Rhe;sr.prototype.addTo=$he;sr.prototype.toString=whe;sr.prototype.negate=Nhe;sr.prototype.abs=jhe;sr.prototype.compareTo=She;sr.prototype.bitLength=khe;sr.prototype.mod=Ohe;sr.prototype.equals=Dhe;sr.prototype.add=Lhe;sr.prototype.subtract=Fhe;sr.prototype.multiply=Bhe;sr.prototype.divide=Uhe;sr.prototype.modPow=Yhe;sr.ZERO=r_(0);sr.ONE=r_(1);const Khe=async({a:t,g:e,k:r,x:s,B:a,N:i,U:o})=>new Promise((l,d)=>{e.modPow(s,i,(h,f)=>{if(h){d(h);return}a.subtract(r.multiply(f)).modPow(t.add(o.multiply(s)),i,(m,x)=>{if(m){d(m);return}l(x.mod(i))})})}),Ghe="FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",YY={},NP={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),YY[t]=e,NP[e]=t}const vy=t=>{if(t.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const e=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2){const s=t.slice(r,r+2).toLowerCase();if(s in NP)e[r/2]=NP[s];else throw new Error(`Cannot decode unrecognized sequence ${s} as hexadecimal`)}return e},s_=t=>{let e="";for(let r=0;r<t.byteLength;r++)e+=YY[t[r]];return e},jP=t=>{const e=new yj;e.update(t);const r=e.digestSync(),s=s_(r);return new Array(64-s.length).join("0")+s},JN=t=>jP(vy(t)),Xhe=/^[89a-f]/i,Qf=t=>{if(!(t instanceof sr))throw new Error("Not a BigInteger");const e=t.compareTo(sr.ZERO)<0;let r=t.abs().toString(16);if(r=r.length%2!==0?`0${r}`:r,r=Xhe.test(r)?`00${r}`:r,e){const s=r.split("").map(i=>{const o=~parseInt(i,16)&15;return"0123456789ABCDEF".charAt(o)}).join("");r=new sr(s,16).add(sr.ONE).toString(16),r.toUpperCase().startsWith("FF8")&&(r=r.substring(2))}return r},Qhe=({A:t,B:e})=>{const r=new sr(JN(Qf(t)+Qf(e)),16);if(r.equals(sr.ZERO))throw new Error("U cannot be zero.");return r},Jhe=(t,e,r)=>{const s=new yj(e);s.update(t);const a=s.digestSync(),i=new yj(a);return i.update(r),i.digestSync().slice(0,16)},a_=t=>{const e=new XA().random(t).toString();return vy(e)},Zhe=()=>Hb.convert(a_(40));class efe{constructor({userPoolName:e,a:r,g:s,A:a,N:i}){this.encoder=QN,this.userPoolName=e,this.a=r,this.g=s,this.A=a,this.N=i,this.k=new sr(JN(`${Qf(i)}${Qf(s)}`),16)}getRandomPassword(){if(!this.randomPassword)throw new Zr({name:"EmptyBigIntegerRandomPassword",message:"random password is empty"});return this.randomPassword}getSaltToHashDevices(){if(!this.saltToHashDevices)throw new Zr({name:"EmptyBigIntegersaltToHashDevices",message:"saltToHashDevices is empty"});return this.saltToHashDevices}getVerifierDevices(){if(!this.verifierDevices)throw new Zr({name:"EmptyBigIntegerVerifierDevices",message:"verifyDevices is empty"});return this.verifierDevices}async generateHashDevice(e,r){this.randomPassword=Zhe();const s=`${e}${r}:${this.randomPassword}`,a=jP(s),i=s_(a_(16));return this.saltToHashDevices=Qf(new sr(i,16)),new Promise((o,l)=>{this.g.modPow(new sr(JN(this.saltToHashDevices+a),16),this.N,(d,h)=>{if(d){l(d);return}this.verifierDevices=Qf(h),o()})})}async getPasswordAuthenticationKey({username:e,password:r,serverBValue:s,salt:a}){if(s.mod(this.N).equals(sr.ZERO))throw new Error("B cannot be zero.");const i=Qhe({A:this.A,B:s}),o=`${this.userPoolName}${e}:${r}`,l=jP(o),d=new sr(JN(Qf(a)+l),16),h=await Khe({a:this.a,g:this.g,k:this.k,x:d,B:s,N:this.N,U:i}),f=this.encoder.convert("Caldera Derived Key"),m=this.encoder.convert(""),x=new Uint8Array(f.byteLength+m.byteLength);return x.set(f,0),x.set(m,f.byteLength),Jhe(vy(Qf(h)),vy(Qf(i)),x)}}const tfe=async({a:t,g:e,N:r})=>new Promise((s,a)=>{e.modPow(t,r,(i,o)=>{if(i){a(i);return}if(o.mod(r).equals(sr.ZERO)){a(new Error("Illegal parameter. A mod N cannot be 0."));return}s(o)})}),SS=async t=>{const e=new sr(Ghe,16),r=new sr("2",16),s=rfe(),a=await tfe({a:s,g:r,N:e});return new efe({userPoolName:t,a:s,g:r,A:a,N:e})},rfe=()=>{const t=s_(a_(128));return new sr(t,16)};async function mv({userPoolId:t,userPoolEndpoint:e,newDeviceMetadata:r,accessToken:s}){if(!r)return;const a=t.split("_")[1]||"",i=await SS(a),o=r==null?void 0:r.DeviceKey,l=r==null?void 0:r.DeviceGroupKey;try{await i.generateHashDevice(l??"",o??"")}catch{return}const d={Salt:Hb.convert(vy(i.getSaltToHashDevices())),PasswordVerifier:Hb.convert(vy(i.getVerifierDevices()))},h=i.getRandomPassword();try{return await dhe({endpointResolver:Hi({endpointOverride:e})})({region:qi(t)},{AccessToken:s,DeviceName:await due(),DeviceKey:r==null?void 0:r.DeviceKey,DeviceSecretVerifierConfig:d}),{deviceKey:o,deviceGroupKey:l,randomPassword:h}}catch{return}}async function nfe(t){var b;const e=(b=pa.getConfig().Auth)==null?void 0:b.Cognito;Ss(e);const{username:r,signInSession:s,signInDetails:a,challengeName:i}=Hp.getState();if(i!=="WEB_AUTHN"||!r)throw new Zr({name:yy.SignInException,message:"Unable to proceed due to invalid sign in state."});const{CREDENTIAL_REQUEST_OPTIONS:o}=t;e_(!!o,Va.InvalidPasskeyAuthenticationOptions);const l=await che(JSON.parse(o)),d=NS({endpointResolver:Hi({endpointOverride:e.userPoolEndpoint})}),{ChallengeName:h,ChallengeParameters:f,AuthenticationResult:m,Session:x}=await d({region:qi(e.userPoolId),userAgentValue:qd(ac.ConfirmSignIn)},{ChallengeName:"WEB_AUTHN",ChallengeResponses:{USERNAME:r,CREDENTIAL:JSON.stringify(l)},ClientId:e.userPoolClientId,Session:s});if(uv({signInSession:x,username:r,challengeName:h,signInDetails:a}),m)return await cv({...m,username:r,NewDeviceMetadata:await mv({userPoolId:e.userPoolId,userPoolEndpoint:e.userPoolEndpoint,newDeviceMetadata:m.NewDeviceMetadata,accessToken:m.AccessToken}),signInDetails:a}),Hp.dispatch({type:"RESET_STATE"}),await dv(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}};if(h==="WEB_AUTHN")throw new Zr({name:yy.SignInException,message:"Sequential WEB_AUTHN challenges returned from underlying service cannot be handled."});return{challengeName:h,challengeParameters:f}}function Tm({username:t,userPoolId:e,userPoolClientId:r}){if(typeof window>"u")return;const s=window.AmazonCognitoAdvancedSecurityData;if(typeof s>"u")return;const a=s.getData(t,e,r);return a?{EncodedData:a}:{}}const sfe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],afe=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],KY=()=>{const t=new Date,e=afe[t.getUTCDay()],r=sfe[t.getUTCMonth()],s=t.getUTCDate();let a=t.getUTCHours();a<10&&(a=`0${a}`);let i=t.getUTCMinutes();i<10&&(i=`0${i}`);let o=t.getUTCSeconds();o<10&&(o=`0${o}`);const l=t.getUTCFullYear();return`${e} ${r} ${s} ${a}:${i}:${o} UTC ${l}`},GY=({userPoolName:t,username:e,challengeParameters:r,dateNow:s,hkdf:a})=>{const i=QN.convert(t),o=QN.convert(e),l=ife(r.SECRET_BLOCK),d=QN.convert(s),h=new Uint8Array(i.byteLength+o.byteLength+l.byteLength+d.byteLength);h.set(i,0),h.set(o,i.byteLength),h.set(l,i.byteLength+o.byteLength),h.set(d,i.byteLength+o.byteLength+l.byteLength);const f=new yj(a);f.update(h);const m=f.digestSync();return Hb.convert(m)},ife=t=>{const e="=".repeat((4-t.length%4)%4),r=(t+e).replace(/-/g,"+").replace(/_/g,"/"),s=WA.convert(r),a=new Uint8Array(s.length);for(let i=0;i<s.length;++i)a[i]=s.charCodeAt(i);return a};async function i_({username:t,config:e,clientMetadata:r,session:s,tokenOrchestrator:a}){const{userPoolId:i,userPoolEndpoint:o}=e,l=e.userPoolClientId,d=await(a==null?void 0:a.getDeviceMetadata(t));UY(d);const h=await SS(d.deviceGroupKey),f={USERNAME:t,SRP_A:h.A.toString(16),DEVICE_KEY:d.deviceKey},m={ChallengeName:"DEVICE_SRP_AUTH",ClientId:l,ChallengeResponses:f,ClientMetadata:r,Session:s},x=NS({endpointResolver:Hi({endpointOverride:o})}),{ChallengeParameters:b,Session:j}=await x({region:qi(i)},m);return ofe(t,b,r,j,h,e,a)}async function ofe(t,e,r,s,a,{userPoolId:i,userPoolClientId:o,userPoolEndpoint:l},d){const h=await(d==null?void 0:d.getDeviceMetadata(t));UY(h);const f=new sr(e==null?void 0:e.SRP_B,16),m=new sr(e==null?void 0:e.SALT,16),{deviceKey:x}=h,{deviceGroupKey:b}=h,j=await a.getPasswordAuthenticationKey({username:h.deviceKey,password:h.randomPassword,serverBValue:f,salt:m}),N=KY(),w={USERNAME:(e==null?void 0:e.USERNAME)??t,PASSWORD_CLAIM_SECRET_BLOCK:e==null?void 0:e.SECRET_BLOCK,TIMESTAMP:N,PASSWORD_CLAIM_SIGNATURE:GY({username:x,userPoolName:b,challengeParameters:e,dateNow:N,hkdf:j}),DEVICE_KEY:x},C=Tm({username:t,userPoolId:i,userPoolClientId:o}),T={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:o,ChallengeResponses:w,Session:s,ClientMetadata:r,UserContextData:C};return NS({endpointResolver:Hi({endpointOverride:l})})({region:qi(i)},T)}async function XY(t,e,r,s,a,i,o){const{userPoolId:l,userPoolClientId:d,userPoolEndpoint:h}=i,f=(l==null?void 0:l.split("_")[1])||"",m=new sr(e==null?void 0:e.SRP_B,16),x=new sr(e==null?void 0:e.SALT,16),b=e==null?void 0:e.USER_ID_FOR_SRP;if(!b)throw new Zr({name:"EmptyUserIdForSRPException",message:"USER_ID_FOR_SRP was not found in challengeParameters"});const j=await a.getPasswordAuthenticationKey({username:b,password:t,serverBValue:m,salt:x}),N=KY(),w={USERNAME:b,PASSWORD_CLAIM_SECRET_BLOCK:e==null?void 0:e.SECRET_BLOCK,TIMESTAMP:N,PASSWORD_CLAIM_SIGNATURE:GY({username:b,userPoolName:f,challengeParameters:e,dateNow:N,hkdf:j})},C=await o.getDeviceMetadata(b);C&&C.deviceKey&&(w.DEVICE_KEY=C.deviceKey);const T=Tm({username:b,userPoolId:l,userPoolClientId:d}),O={ChallengeName:"PASSWORD_VERIFIER",ChallengeResponses:w,ClientMetadata:r,Session:s,ClientId:d,UserContextData:T},P=await NS({endpointResolver:Hi({endpointOverride:h})})({region:qi(l)},O);return P.ChallengeName==="DEVICE_SRP_AUTH"?i_({username:b,config:i,clientMetadata:r,session:P.Session,tokenOrchestrator:o}):P}async function kS(t,e,r,s){try{return await t(...e)}catch(a){if(a instanceof Zr&&a.name==="ResourceNotFoundException"&&a.message.includes("Device does not exist."))return await s.clearDeviceMetadata(r),t(...e);throw a}}function c1(t){const{dispatch:e}=Hp;e({type:"SET_USERNAME",value:t})}async function QY({username:t,password:e,clientMetadata:r,config:s,tokenOrchestrator:a,authFlow:i,preferredChallenge:o}){const{userPoolId:l,userPoolClientId:d,userPoolEndpoint:h}=s,f=(l==null?void 0:l.split("_")[1])||"",m=await SS(f),x={USERNAME:t,SRP_A:m.A.toString(16)};i==="USER_AUTH"&&o&&(x.PREFERRED_CHALLENGE=o);const b=Tm({username:t,userPoolId:l,userPoolClientId:d}),j={AuthFlow:i,AuthParameters:x,ClientMetadata:r,ClientId:d,UserContextData:b},w=await l1({endpointResolver:Hi({endpointOverride:h})})({region:qi(l),userAgentValue:qd(ac.SignIn)},j),{ChallengeParameters:C,Session:T}=w,O=(C==null?void 0:C.USERNAME)??t;return c1(O),w.ChallengeName==="PASSWORD_VERIFIER"?kS(XY,[e,C,r,T,m,s,a],O,a):w}const tO="userAttributes.";function lfe(t){return"isSignedIn"in t&&"nextStep"in t}async function cfe(t,e,r,s,a){var N,w;const{userPoolClientId:i,userPoolId:o,userPoolEndpoint:l}=s,d={USERNAME:t,PASSWORD:e},h=await a.getDeviceMetadata(t);h&&h.deviceKey&&(d.DEVICE_KEY=h.deviceKey);const f=Tm({username:t,userPoolId:o,userPoolClientId:i}),m={AuthFlow:"USER_PASSWORD_AUTH",AuthParameters:d,ClientMetadata:r,ClientId:i,UserContextData:f},b=await l1({endpointResolver:Hi({endpointOverride:l})})({region:qi(o),userAgentValue:qd(ac.SignIn)},m),j=((N=b.ChallengeParameters)==null?void 0:N.USERNAME)??((w=b.ChallengeParameters)==null?void 0:w.USER_ID_FOR_SRP)??t;return c1(j),b.ChallengeName==="DEVICE_SRP_AUTH"?i_({username:j,config:s,clientMetadata:r,session:b.Session,tokenOrchestrator:a}):b}async function dfe(t,e,r,s,a){return QY({username:t,password:e,clientMetadata:r,config:s,tokenOrchestrator:a,authFlow:"USER_SRP_AUTH"})}async function ufe(t,e,r,s){var j;const{userPoolClientId:a,userPoolId:i,userPoolEndpoint:o}=r,l={USERNAME:t},d=await s.getDeviceMetadata(t);d&&d.deviceKey&&(l.DEVICE_KEY=d.deviceKey);const h=Tm({username:t,userPoolId:i,userPoolClientId:a}),f={AuthFlow:"CUSTOM_AUTH",AuthParameters:l,ClientMetadata:e,ClientId:a,UserContextData:h},x=await l1({endpointResolver:Hi({endpointOverride:o})})({region:qi(i),userAgentValue:qd(ac.SignIn)},f),b=((j=x.ChallengeParameters)==null?void 0:j.USERNAME)??t;return c1(b),x.ChallengeName==="DEVICE_SRP_AUTH"?i_({username:b,config:r,clientMetadata:e,session:x.Session,tokenOrchestrator:s}):x}async function hfe(t,e,r,s,a){Ss(s);const{userPoolId:i,userPoolClientId:o,userPoolEndpoint:l}=s,d=(i==null?void 0:i.split("_")[1])||"",h=await SS(d),f={USERNAME:t,SRP_A:h.A.toString(16),CHALLENGE_NAME:"SRP_A"},m=Tm({username:t,userPoolId:i,userPoolClientId:o}),x={AuthFlow:"CUSTOM_AUTH",AuthParameters:f,ClientMetadata:r,ClientId:o,UserContextData:m},b=l1({endpointResolver:Hi({endpointOverride:l})}),{ChallengeParameters:j,Session:N}=await b({region:qi(i),userAgentValue:qd(ac.SignIn)},x),w=(j==null?void 0:j.USERNAME)??t;return c1(w),kS(XY,[e,j,r,N,h,s,a],w,a)}async function pv(t){var i;const{challengeName:e,challengeParameters:r,availableChallenges:s}=t,a=(i=pa.getConfig().Auth)==null?void 0:i.Cognito;switch(Ss(a),e){case"CUSTOM_CHALLENGE":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_CUSTOM_CHALLENGE",additionalInfo:r}};case"MFA_SETUP":{const{signInSession:o,username:l}=Hp.getState(),d=rO(nO(r.MFAS_CAN_SETUP))||[],h=gfe(d),f=h.includes("TOTP"),m=h.includes("EMAIL");if(f&&m)return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_MFA_SETUP_SELECTION",allowedMFATypes:h}};if(m)return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_EMAIL_SETUP"}};if(f){const x=$ue({endpointResolver:Hi({endpointOverride:a.userPoolEndpoint})}),{Session:b,SecretCode:j}=await x({region:qi(a.userPoolId)},{Session:o});return Hp.dispatch({type:"SET_SIGN_IN_SESSION",value:b}),{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_TOTP_SETUP",totpSetupDetails:ffe(j,l)}}}throw new Zr({name:yy.SignInException,message:`Cannot initiate MFA setup from available types: ${d}`})}case"NEW_PASSWORD_REQUIRED":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_NEW_PASSWORD_REQUIRED",missingAttributes:mfe(r.requiredAttributes)}};case"SELECT_MFA_TYPE":return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_MFA_SELECTION",allowedMFATypes:rO(nO(r.MFAS_CAN_CHOOSE))}};case"SMS_OTP":case"SMS_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_SMS_CODE",codeDeliveryDetails:{deliveryMedium:r.CODE_DELIVERY_DELIVERY_MEDIUM,destination:r.CODE_DELIVERY_DESTINATION}}};case"SOFTWARE_TOKEN_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_TOTP_CODE"}};case"EMAIL_OTP":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_EMAIL_CODE",codeDeliveryDetails:{deliveryMedium:r.CODE_DELIVERY_DELIVERY_MEDIUM,destination:r.CODE_DELIVERY_DESTINATION}}};case"WEB_AUTHN":{const o=await nfe(r);return lfe(o)?o:pv(o)}case"PASSWORD":case"PASSWORD_SRP":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_PASSWORD"}};case"SELECT_CHALLENGE":return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_FIRST_FACTOR_SELECTION",availableChallenges:s}}}throw new Zr({name:yy.SignInException,message:`An error occurred during the sign in process. ${e} challengeName returned by the underlying service was not addressed.`})}function ffe(t,e){return{sharedSecret:t,getSetupUri:(r,s)=>{const a=`otpauth://totp/${r}:${s??e}?secret=${t}&issuer=${r}`;return new i1(a)}}}function d1(t){if(t===vj.PasswordResetRequiredException)return{isSignedIn:!1,nextStep:{signInStep:"RESET_PASSWORD"}};if(t===vj.UserNotConfirmedException)return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_UP"}}}function mfe(t){return t?JSON.parse(t).map(r=>r.includes(tO)?r.replace(tO,""):r):[]}function pfe(t){if(t==="SMS_MFA")return"SMS";if(t==="SOFTWARE_TOKEN_MFA")return"TOTP";if(t==="EMAIL_OTP")return"EMAIL"}function rO(t){if(t)return t.map(pfe).filter(Boolean)}function nO(t){return t?JSON.parse(t):[]}function gfe(t){return t.filter(e=>e==="EMAIL"||e==="TOTP")}async function xfe(){let t;try{t=await QA()}catch{}if(t&&t.userId&&t.username)throw new Zr({name:pue,message:"There is already a signed in user.",recoverySuggestion:"Call signOut before calling signIn again."})}function u1(t){return Hp.getState().username??t}async function yfe(t){var l;const e=(l=pa.getConfig().Auth)==null?void 0:l.Cognito;Ss(e);const{username:r,password:s,options:a}=t,i={loginId:r,authFlowType:"CUSTOM_WITHOUT_SRP"},o=a==null?void 0:a.clientMetadata;qo(!!r,Pn.EmptySignInUsername),qo(!s,Pn.CustomAuthSignInPassword);try{const{ChallengeName:d,ChallengeParameters:h,AuthenticationResult:f,Session:m}=await kS(ufe,[r,o,e,zd],r,zd),x=u1(r);return uv({signInSession:m,username:x,challengeName:d,signInDetails:i}),f?(await cv({username:x,...f,NewDeviceMetadata:await mv({userPoolId:e.userPoolId,userPoolEndpoint:e.userPoolEndpoint,newDeviceMetadata:f.NewDeviceMetadata,accessToken:f.AccessToken}),signInDetails:i}),lf(),await dv(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):pv({challengeName:d,challengeParameters:h})}catch(d){lf(),zu(d);const h=d1(d.name);if(h)return h;throw d}}async function vfe(t){var l;const{username:e,password:r,options:s}=t,a={loginId:e,authFlowType:"CUSTOM_WITH_SRP"},i=(l=pa.getConfig().Auth)==null?void 0:l.Cognito;Ss(i);const o=s==null?void 0:s.clientMetadata;qo(!!e,Pn.EmptySignInUsername),qo(!!r,Pn.EmptySignInPassword);try{const{ChallengeName:d,ChallengeParameters:h,AuthenticationResult:f,Session:m}=await hfe(e,r,o,i,zd),x=u1(e);return uv({signInSession:m,username:x,challengeName:d,signInDetails:a}),f?(await cv({username:x,...f,NewDeviceMetadata:await mv({userPoolId:i.userPoolId,userPoolEndpoint:i.userPoolEndpoint,newDeviceMetadata:f.NewDeviceMetadata,accessToken:f.AccessToken}),signInDetails:a}),lf(),await dv(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):pv({challengeName:d,challengeParameters:h})}catch(d){lf(),zu(d);const h=d1(d.name);if(h)return h;throw d}}function Wp(t=!0){Dx.dispatch({type:"RESET"})}async function sO(t){var o,l;const{username:e,password:r}=t,s=(o=pa.getConfig().Auth)==null?void 0:o.Cognito,a={loginId:e,authFlowType:"USER_SRP_AUTH"};Ss(s);const i=(l=t.options)==null?void 0:l.clientMetadata;qo(!!e,Pn.EmptySignInUsername),qo(!!r,Pn.EmptySignInPassword);try{const{ChallengeName:d,ChallengeParameters:h,AuthenticationResult:f,Session:m}=await dfe(e,r,i,s,zd),x=u1(e);return uv({signInSession:m,username:x,challengeName:d,signInDetails:a}),f?(await cv({username:x,...f,NewDeviceMetadata:await mv({userPoolId:s.userPoolId,userPoolEndpoint:s.userPoolEndpoint,newDeviceMetadata:f.NewDeviceMetadata,accessToken:f.AccessToken}),signInDetails:a}),lf(),await dv(),Wp(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):pv({challengeName:d,challengeParameters:h})}catch(d){lf(),Wp(),zu(d);const h=d1(d.name);if(h)return h;throw d}}async function bfe(t){var l;const{username:e,password:r,options:s}=t,a=(l=pa.getConfig().Auth)==null?void 0:l.Cognito,i={loginId:e,authFlowType:"USER_PASSWORD_AUTH"};Ss(a);const o=s==null?void 0:s.clientMetadata;qo(!!e,Pn.EmptySignInUsername),qo(!!r,Pn.EmptySignInPassword);try{const{ChallengeName:d,ChallengeParameters:h,AuthenticationResult:f,Session:m}=await kS(cfe,[e,r,o,a,zd],e,zd),x=u1(e);return uv({signInSession:m,username:x,challengeName:d,signInDetails:i}),f?(await cv({...f,username:x,NewDeviceMetadata:await mv({userPoolId:a.userPoolId,userPoolEndpoint:a.userPoolEndpoint,newDeviceMetadata:f.NewDeviceMetadata,accessToken:f.AccessToken}),signInDetails:i}),lf(),await dv(),Wp(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):pv({challengeName:d,challengeParameters:h})}catch(d){lf(),Wp(),zu(d);const h=d1(d.name);if(h)return h;throw d}}async function wfe({username:t,clientMetadata:e,config:r,tokenOrchestrator:s,preferredChallenge:a,password:i,session:o}){const{userPoolId:l,userPoolClientId:d,userPoolEndpoint:h}=r,f=Tm({username:t,userPoolId:l,userPoolClientId:d}),m={USERNAME:t};if(a){if(a==="PASSWORD_SRP")return qo(!!i,Pn.EmptySignInPassword),QY({username:t,password:i,clientMetadata:e,config:r,tokenOrchestrator:s,authFlow:"USER_AUTH",preferredChallenge:a});a==="PASSWORD"&&(qo(!!i,Pn.EmptySignInPassword),m.PASSWORD=i),m.PREFERRED_CHALLENGE=a}const x={AuthFlow:"USER_AUTH",AuthParameters:m,ClientMetadata:e,ClientId:d,UserContextData:f};o&&(x.Session=o);const j=await l1({endpointResolver:Hi({endpointOverride:h})})({region:qi(l),userAgentValue:qd(ac.SignIn)},x);return c1(t),j}async function Nfe(t){var d;const{username:e,password:r,options:s}=t,a=(d=pa.getConfig().Auth)==null?void 0:d.Cognito,i={loginId:e,authFlowType:"USER_AUTH"};Ss(a);const o=s==null?void 0:s.clientMetadata,l=s==null?void 0:s.preferredChallenge;qo(!!e,Pn.EmptySignInUsername);try{const h={username:e,config:a,tokenOrchestrator:zd,clientMetadata:o,preferredChallenge:l,password:r},f=Dx.getState();f.active&&f.username===e&&(h.session=f.session);const m=await wfe(h),x=u1(e);return uv({signInSession:m.Session,username:x,challengeName:m.ChallengeName,signInDetails:i}),m.AuthenticationResult?(await cv({username:x,...m.AuthenticationResult,NewDeviceMetadata:await mv({userPoolId:a.userPoolId,userPoolEndpoint:a.userPoolEndpoint,newDeviceMetadata:m.AuthenticationResult.NewDeviceMetadata,accessToken:m.AuthenticationResult.AccessToken}),signInDetails:i}),lf(),await dv(),Wp(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):pv({challengeName:m.ChallengeName,challengeParameters:m.ChallengeParameters,availableChallenges:"AvailableChallenges"in m?m.AvailableChallenges:void 0})}catch(h){lf(),Wp(),zu(h);const f=d1(h.name);if(f)return f;throw h}}async function jfe(t){var r;Wp(!1);const e=(r=t.options)==null?void 0:r.authFlowType;switch(await xfe(),e){case"USER_SRP_AUTH":return sO(t);case"USER_PASSWORD_AUTH":return bfe(t);case"CUSTOM_WITHOUT_SRP":return yfe(t);case"CUSTOM_WITH_SRP":return vfe(t);case"USER_AUTH":return Nfe(t);default:return sO(t)}}const Sfe=180*1e3;function kfe(t){const e=X6.listen("auth-internal",async({payload:s})=>{switch(s.event){case"confirmSignUp":{const a=s.data;a!=null&&a.isSignUpComplete&&(X6.dispatch("auth-internal",{event:"autoSignIn"}),e())}}}),r=setTimeout(()=>{e(),clearTimeout(r),Wp()},Sfe)}const Cfe=()=>async t=>{if(t.statusCode>=300){const e=await lv(t);if(zu(e),e.name===wP.InvalidParameterException&&/'password'/.test(e.message)&&/Member must not be null/.test(e.message)){const r=Pn.EmptySignUpPassword,{message:s,recoverySuggestion:a}=FY[r];throw new Zr({name:r,message:s,recoverySuggestion:a})}throw new Zr({name:e.name,message:e.message})}return a1(t)},Efe=t=>Yc(Yu,Wu("SignUp"),Cfe(),{...Ku,...t});async function Tfe(t){var A;const{username:e,password:r,options:s}=t,a=(A=pa.getConfig().Auth)==null?void 0:A.Cognito,i=(a==null?void 0:a.signUpVerificationMethod)??"code",{clientMetadata:o,validationData:l,autoSignIn:d}=t.options??{};Ss(a),qo(!!e,Pn.EmptySignUpUsername);const h=typeof d!="boolean"?d:void 0;h==null||h.authFlowType;const{userPoolId:f,userPoolClientId:m,userPoolEndpoint:x}=a,b=Efe({endpointResolver:Hi({endpointOverride:x})}),j={Username:e,Password:void 0,UserAttributes:(s==null?void 0:s.userAttributes)&&jM(s==null?void 0:s.userAttributes),ClientMetadata:o,ValidationData:l&&jM(l),ClientId:m,UserContextData:Tm({username:e,userPoolId:f,userPoolClientId:m})};r&&(j.Password=r);const{UserSub:N,CodeDeliveryDetails:w,UserConfirmed:C,Session:T}=await b({region:qi(f),userAgentValue:qd(ac.SignUp)},j);(h||d===!0)&&(Dx.dispatch({type:"START"}),Dx.dispatch({type:"SET_USERNAME",value:e}),Dx.dispatch({type:"SET_SESSION",value:T}));const O={destination:w==null?void 0:w.Destination,deliveryMedium:w==null?void 0:w.DeliveryMedium,attributeName:w==null?void 0:w.AttributeName},I=!!C,P=Dx.getState().active;if(I)return P?{isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"},userId:N}:{isSignUpComplete:!0,nextStep:{signUpStep:"DONE"},userId:N};if(P){if(i==="link")return{isSignUpComplete:!1,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN",codeDeliveryDetails:O},userId:N};kfe()}return{isSignUpComplete:!1,nextStep:{signUpStep:"CONFIRM_SIGN_UP",codeDeliveryDetails:O},userId:N}}const Pfe=t=>Yc(Yu,Wu("ConfirmForgotPassword"),mf(),{...Ku,...t});async function Afe(t){var m,x;const e=(m=pa.getConfig().Auth)==null?void 0:m.Cognito;Ss(e);const{userPoolClientId:r,userPoolId:s,userPoolEndpoint:a}=e,{username:i,newPassword:o}=t;qo(!!i,Pn.EmptyConfirmResetPasswordUsername),qo(!!o,Pn.EmptyConfirmResetPasswordNewPassword);const l=t.confirmationCode;qo(!!l,Pn.EmptyConfirmResetPasswordConfirmationCode);const d=(x=t.options)==null?void 0:x.clientMetadata,h=Tm({username:i,userPoolId:s,userPoolClientId:r});await Pfe({endpointResolver:Hi({endpointOverride:a})})({region:qi(e.userPoolId),userAgentValue:qd(ac.ConfirmResetPassword)},{Username:i,ConfirmationCode:l,Password:o,ClientMetadata:d,ClientId:e.userPoolClientId,UserContextData:h})}const _fe=t=>Yc(Yu,Wu("GetUser"),mf(),{...Ku,...t}),Ife=t=>Yc(Yu,Wu("VerifyUserAttribute"),mf(),{...Ku,...t});async function Mfe(t){var d;const e=(d=pa.getConfig().Auth)==null?void 0:d.Cognito;Ss(e);const{userPoolEndpoint:r,userPoolId:s}=e,{confirmationCode:a,userAttributeKey:i}=t;qo(!!a,Pn.EmptyConfirmUserAttributeCode);const{tokens:o}=await F0({forceRefresh:!1});wS(o),await Ife({endpointResolver:Hi({endpointOverride:r})})({region:qi(s),userAgentValue:qd(ac.ConfirmUserAttribute)},{AccessToken:o.accessToken.toString(),AttributeName:i,Code:a})}function Ofe(t,e){{const r=(t==null?void 0:t.find(Rfe))??(t==null?void 0:t.find(Dfe)),s=(t==null?void 0:t.find(Lfe))??(t==null?void 0:t.find($fe));if(r)return r;throw s?Nue:bue}}const Rfe=t=>t.startsWith(String(window.location.origin+(window.location.pathname||"/"))),Dfe=t=>t.includes(String(window.location.hostname)),$fe=t=>t.startsWith("http://"),Lfe=t=>t.startsWith("https://"),Ffe=async t=>{window!=null&&window.location&&(window.location.href=t.replace("http://","https://"))},Bfe=async t=>{var l;const e=(l=t.getConfig().Auth)==null?void 0:l.Cognito;Ss(e);const{userPoolEndpoint:r,userPoolId:s}=e,{tokens:a}=await jY(t,{forceRefresh:!1});wS(a);const i=_fe({endpointResolver:Hi({endpointOverride:r})}),{UserAttributes:o}=await i({region:qi(s),userAgentValue:qd(ac.FetchUserAttributes)},{AccessToken:a.accessToken.toString()});return mue(o)},CS=()=>Bfe(pa),Ufe=async t=>{await t.clearOAuthData(),zd.clearTokens(),await SY(),xy.dispatch("auth",{event:"signedOut"},"Auth",w0)},zfe=async(t,e=!1,r)=>{pY(t);const{loginWith:s,userPoolClientId:a}=t,{domain:i,redirectSignOut:o}=s.oauth,l=Ofe(o),d=`https://${i}/logout?${Object.entries({client_id:a,logout_uri:encodeURIComponent(l)}).map(([h,f])=>`${h}=${f}`).join("&")}`;return Ffe(d)},Vfe=async(t,e,r,s)=>{const{isOAuthSignIn:a}=await e.loadOAuthSignIn(),i=await r.getOAuthMetadata();if(await Ufe(e),a||i!=null&&i.oauthSignIn)return zfe(t,!1)},qfe=t=>Yc(Yu,Wu("RevokeToken"),mf(),{...Ku,...t}),Hfe=new zc("Auth");async function JY(t){var s;const e=(s=pa.getConfig().Auth)==null?void 0:s.Cognito;Ss(e),await Wfe(e);let r;try{pY(e),r=!0}catch{r=!1}if(r){const a=new qY(o1);a.setAuthConfig(e);const{type:i}=await Vfe(e,a,zd)??{};if(i==="error")throw new Zr({name:jue,message:"An error occurred when attempting to log out from OAuth provider."})}else zd.clearTokens(),await SY(),xy.dispatch("auth",{event:"signedOut"},"Auth",w0)}async function Wfe(t){try{const{userPoolEndpoint:e,userPoolId:r,userPoolClientId:s}=t,a=await zd.getTokenStore().loadTokens();BY(a),Yfe(a.accessToken)&&await qfe({endpointResolver:Hi({endpointOverride:e})})({region:qi(r),userAgentValue:qd(ac.SignOut)},{ClientId:s,Token:a.refreshToken})}catch{Hfe.debug("Client signOut error caught but will proceed with token removal")}}const Yfe=t=>{var e;return!!((e=t==null?void 0:t.payload)!=null&&e.origin_jti)},Kfe=t=>Yc(Yu,Wu("GetUserAttributeVerificationCode"),mf(),{...Ku,...t}),Gfe=async t=>{var b;const{userAttributeKey:e,options:r}=t,s=(b=pa.getConfig().Auth)==null?void 0:b.Cognito,a=r==null?void 0:r.clientMetadata;Ss(s);const{userPoolEndpoint:i,userPoolId:o}=s,{tokens:l}=await F0({forceRefresh:!1});wS(l);const d=Kfe({endpointResolver:Hi({endpointOverride:i})}),{CodeDeliveryDetails:h}=await d({region:qi(o),userAgentValue:qd(ac.SendUserAttributeVerificationCode)},{AccessToken:l.accessToken.toString(),ClientMetadata:a,AttributeName:e}),{DeliveryMedium:f,AttributeName:m,Destination:x}={...h};return{destination:x,deliveryMedium:f,attributeName:m}},Xfe={identityId:"identityId"},Qfe=new zc("DefaultIdentityIdStore");class ZY{setAuthConfig(e){GN(e.Cognito),this.authConfig=e,this._authKeys=Jfe("Cognito",e.Cognito.identityPoolId)}constructor(e){this._authKeys={},this._hasGuestIdentityId=!1,this.keyValueStorage=e}async loadIdentityId(){var e;GN((e=this.authConfig)==null?void 0:e.Cognito);try{if(this._primaryIdentityId)return{id:this._primaryIdentityId,type:"primary"};{const r=await this.keyValueStorage.getItem(this._authKeys.identityId);return r?(this._hasGuestIdentityId=!0,{id:r,type:"guest"}):null}}catch(r){return Qfe.log("Error getting stored IdentityId.",r),null}}async storeIdentityId(e){var r;GN((r=this.authConfig)==null?void 0:r.Cognito),e.type==="guest"?(this.keyValueStorage.setItem(this._authKeys.identityId,e.id),this._primaryIdentityId=void 0,this._hasGuestIdentityId=!0):(this._primaryIdentityId=e.id,this._hasGuestIdentityId&&(this.keyValueStorage.removeItem(this._authKeys.identityId),this._hasGuestIdentityId=!1))}async clearIdentityId(){this._primaryIdentityId=void 0,await this.keyValueStorage.removeItem(this._authKeys.identityId)}}const Jfe=(t,e)=>JA(Xfe)(`com.amplify.${t}`,e),SP=({endpointOverride:t})=>e=>t?{url:new i1(t)}:tue(e);function eK(t){const e=N0(t).payload.iss,r={};if(!e)throw new Zr({name:"InvalidIdTokenException",message:"Invalid Idtoken."});const s=e.replace(/(^\w+:|^)\/\//,"");return r[s]=t,r}async function Zfe({tokens:t,authConfig:e,identityIdStore:r}){r.setAuthConfig({Cognito:e});const s=await r.loadIdentityId();if(s)return s.id;const a=t!=null&&t.idToken?eK(t.idToken.toString()):{},i=await eme(a,e);return r.storeIdentityId({id:i,type:t?"primary":"guest"}),i}async function eme(t,e){const r=e==null?void 0:e.identityPoolId,s=bP(r),a=Jde({endpointResolver:SP({endpointOverride:e.identityPoolEndpoint})});let i;try{i=(await a({region:s},{IdentityPoolId:r,Logins:t})).IdentityId}catch(o){throw zu(o),new Zr(o)}if(!i)throw new Zr({name:"GetIdResponseException",message:"Received undefined response from getId operation",recoverySuggestion:"Make sure to pass a valid identityPoolId in the configuration."});return i}const gN=new zc("CognitoCredentialsProvider"),aO=3e3*1e3;class tK{constructor(e){this._nextCredentialsRefresh=0,this._identityIdStore=e}async clearCredentialsAndIdentityId(){gN.debug("Clearing out credentials and identityId"),this._credentialsAndIdentityId=void 0,await this._identityIdStore.clearIdentityId()}async clearCredentials(){gN.debug("Clearing out in-memory credentials"),this._credentialsAndIdentityId=void 0}async getCredentialsAndIdentityId(e){const r=e.authenticated,{tokens:s}=e,{authConfig:a}=e;try{GN(a==null?void 0:a.Cognito)}catch{return}if(!r&&!a.Cognito.allowGuestAccess)return;const{forceRefresh:i}=e,o=this.hasTokenChanged(s),l=await Zfe({tokens:s,authConfig:a.Cognito,identityIdStore:this._identityIdStore});return(i||o)&&this.clearCredentials(),r?(Cue(s),this.credsForOIDCTokens(a.Cognito,s,l)):this.getGuestCredentials(l,a.Cognito)}async getGuestCredentials(e,r){var o,l;if(this._credentialsAndIdentityId&&!this.isPastTTL()&&this._credentialsAndIdentityId.isAuthenticatedCreds===!1)return gN.info("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();const s=bP(r.identityPoolId),a=bM({endpointResolver:SP({endpointOverride:r.identityPoolEndpoint})});let i;try{i=await a({region:s},{IdentityId:e})}catch(d){throw zu(d),new Zr(d)}if((o=i==null?void 0:i.Credentials)!=null&&o.AccessKeyId&&((l=i==null?void 0:i.Credentials)!=null&&l.SecretKey)){this._nextCredentialsRefresh=new Date().getTime()+aO;const d={credentials:{accessKeyId:i.Credentials.AccessKeyId,secretAccessKey:i.Credentials.SecretKey,sessionToken:i.Credentials.SessionToken,expiration:i.Credentials.Expiration},identityId:e};return i.IdentityId&&(d.identityId=i.IdentityId,this._identityIdStore.storeIdentityId({id:i.IdentityId,type:"guest"})),this._credentialsAndIdentityId={...d,isAuthenticatedCreds:!1},d}else throw new Zr({name:"CredentialsNotFoundException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}async credsForOIDCTokens(e,r,s){var d,h,f;if(this._credentialsAndIdentityId&&!this.isPastTTL()&&this._credentialsAndIdentityId.isAuthenticatedCreds===!0)return gN.debug("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();const a=r.idToken?eK(r.idToken.toString()):{},i=bP(e.identityPoolId),o=bM({endpointResolver:SP({endpointOverride:e.identityPoolEndpoint})});let l;try{l=await o({region:i},{IdentityId:s,Logins:a})}catch(m){throw zu(m),new Zr(m)}if((d=l==null?void 0:l.Credentials)!=null&&d.AccessKeyId&&((h=l==null?void 0:l.Credentials)!=null&&h.SecretKey)){this._nextCredentialsRefresh=new Date().getTime()+aO;const m={credentials:{accessKeyId:l.Credentials.AccessKeyId,secretAccessKey:l.Credentials.SecretKey,sessionToken:l.Credentials.SessionToken,expiration:l.Credentials.Expiration},identityId:s};return l.IdentityId&&(m.identityId=l.IdentityId,this._identityIdStore.storeIdentityId({id:l.IdentityId,type:"primary"})),this._credentialsAndIdentityId={...m,isAuthenticatedCreds:!0,associatedIdToken:(f=r.idToken)==null?void 0:f.toString()},m}else throw new Zr({name:"CredentialsException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}isPastTTL(){return this._nextCredentialsRefresh===void 0?!0:this._nextCredentialsRefresh<=Date.now()}hasTokenChanged(e){var r,s;return!!e&&!!((r=this._credentialsAndIdentityId)!=null&&r.associatedIdToken)&&((s=e.idToken)==null?void 0:s.toString())!==this._credentialsAndIdentityId.associatedIdToken}}const tme=new tK(new ZY(o1)),rme={configure(t,e){const r=yY(t),s=new lue({sameSite:"lax"}),a=e!=null&&e.ssr?s:o1,i=e!=null&&e.ssr?new tK(new ZY(s)):tme;if(!r.Auth){pa.configure(r,e);return}if(e!=null&&e.Auth){pa.configure(r,e);return}if(!pa.libraryOptions.Auth){hb.setAuthConfig(r.Auth),hb.setKeyValueStorage(a),pa.configure(r,{...e,Auth:{tokenProvider:hb,credentialsProvider:i}});return}if(e){const o=pa.libraryOptions.Auth;e.ssr!==void 0&&(hb.setKeyValueStorage(a),o.credentialsProvider=i),pa.configure(r,{Auth:o,...e});return}pa.configure(r)},getConfig(){return pa.getConfig()}};async function nme(){var t;try{return!!((t=(await F0({forceRefresh:!0})).tokens)!=null&&t.idToken)}catch(e){return console.error("Failed to exchange code for session:",e),!1}}const iO=()=>{const t=window.location.origin,e="https://perala.in";return t.includes("perala.in")?`${e}/landing`:`${t}/landing`},sme={Auth:{Cognito:{userPoolId:"eu-north-1_rXrrnI6cZ",userPoolClientId:"65plb5ei051fh8qr52mispdqq",loginWith:{oauth:{domain:"tradingplatform-531503.auth.eu-north-1.amazoncognito.com",scopes:["openid","email","profile"],redirectSignIn:[iO()],redirectSignOut:[iO()],responseType:"code"}}}}};let oO=!1;function oc(){if(!oO)try{rme.configure(sme),oO=!0,console.log(" AWS Cognito initialized successfully")}catch(t){console.error(" Failed to initialize AWS Cognito:",t)}}async function rK(t,e,r){oc();const s=await Tfe({username:t,password:e,options:{userAttributes:{email:t,name:r}}});if(!s.userId)throw new Error("Sign up failed - no user ID returned");return{userId:s.userId,email:t,name:r}}async function kP(t,e){var l,d,h;if(oc(),!(await jfe({username:t,password:e})).isSignedIn)throw new Error("Sign in failed");const s=await F0(),a=await CS(),i=((h=(d=(l=s.tokens)==null?void 0:l.idToken)==null?void 0:d.payload)==null?void 0:h.sub)||"",o=a.name||a.email||t;return{userId:i,email:a.email||t,name:o}}async function ES(){oc(),await JY()}async function nK(){oc();try{const t=await QA(),e=await F0(),r=await CS(),s=r.name||r.email||"";return{userId:t.userId,email:r.email||"",name:s,displayName:s}}catch{return null}}async function ks(){var t,e;oc();try{return((e=(t=(await F0()).tokens)==null?void 0:t.idToken)==null?void 0:e.toString())||null}catch{return null}}async function sK(){var t;oc();try{console.log(" [OAuth] Processing Google OAuth callback..."),await nme()||console.log(" [OAuth] Code exchange did not yield tokens, trying direct session fetch...");const r=await F0({forceRefresh:!0});if((t=r.tokens)!=null&&t.idToken){console.log(" [OAuth] Session tokens obtained successfully");const s=await CS(),a=r.tokens.idToken.payload.sub;return console.log(" [OAuth] User authenticated:",{userId:a,email:s.email}),{userId:a,email:s.email||"",name:s.name||s.email||""}}return console.log(" [OAuth] No tokens in session after code exchange"),null}catch(e){return console.error(" [OAuth] Error handling Cognito callback:",e),null}}async function aK(t,e,r){oc();try{console.log(" Step 2: Confirming password reset..."),console.log("   Email:",t),console.log("   Code: [6-digit OTP]"),console.log("   Password: [hidden]"),await Afe({username:t,confirmationCode:e,newPassword:r}),console.log(" Password reset successful for:",t),console.log("   User can now login with new password")}catch(s){throw console.error(" Password reset confirmation failed:",s),s}}async function iK(){oc();try{console.log(" Sending email verification code..."),await Gfe({userAttributeKey:"email"}),console.log(" Email verification code sent successfully")}catch(t){throw console.error(" Failed to send email verification code:",t),t}}async function oK(t){oc();try{console.log(" Confirming email verification with code..."),await Mfe({userAttributeKey:"email",confirmationCode:t}),console.log(" Email verified successfully")}catch(e){throw console.error(" Email verification failed:",e),e}}async function lK(){oc();try{return(await CS()).email_verified==="true"}catch{return!1}}const ame=Object.freeze(Object.defineProperty({__proto__:null,checkEmailVerified:lK,cognitoConfirmResetPassword:aK,cognitoSignIn:kP,cognitoSignOut:ES,cognitoSignUp:rK,confirmEmailVerification:oK,getCognitoToken:ks,getCognitoUser:nK,handleCognitoCallback:sK,initializeCognito:oc,sendEmailVerificationCode:iK,signOut:JY},Symbol.toStringTag,{value:"Module"}));function h1(){const[t,e]=g.useState({userId:null,email:null,username:null,displayName:null}),[r,s]=g.useState(!0),[a,i]=g.useState(!1);g.useEffect(()=>{oc(),(async()=>{const j=localStorage.getItem("currentUserId"),N=localStorage.getItem("currentUserEmail"),w=localStorage.getItem("currentUsername"),C=localStorage.getItem("currentDisplayName")||localStorage.getItem("currentUserName");if(e({userId:j,email:N,username:w,displayName:C}),j&&N)try{const T=await ks();if(T){const O=await fetch("/api/user/profile",{headers:{Authorization:`Bearer ${T}`}});if(O.ok){const I=await O.json();if(I.success&&I.profile){const P=I.profile;o(j,N,P.username,P.displayName)}else o(j,N,null,C)}}}catch(T){console.error("Error fetching user profile:",T)}i(!0),s(!1)})()},[]);const o=(b,j,N,w)=>{localStorage.setItem("currentUserId",b),localStorage.setItem("currentUserEmail",j),N?localStorage.setItem("currentUsername",N):localStorage.removeItem("currentUsername"),w?(localStorage.setItem("currentDisplayName",w),localStorage.setItem("currentUserName",w)):(localStorage.removeItem("currentDisplayName"),localStorage.removeItem("currentUserName")),e({userId:b,email:j,username:N||null,displayName:w||null})};return{currentUser:t,loading:r,profileChecked:a,updateUser:o,updateProfile:(b,j)=>{localStorage.setItem("currentUsername",b),localStorage.setItem("currentDisplayName",j),localStorage.setItem("currentUserName",j),e(N=>({...N,username:b,displayName:j}))},clearUser:async()=>{try{await ES()}catch(b){console.error("Error signing out from Cognito:",b)}localStorage.removeItem("currentUserId"),localStorage.removeItem("currentUserEmail"),localStorage.removeItem("currentUsername"),localStorage.removeItem("currentDisplayName"),localStorage.removeItem("currentUserName"),e({userId:null,email:null,username:null,displayName:null})},getUserDisplayName:()=>t.displayName||t.username||t.email||"Anonymous User",getUsername:()=>t.username||null,hasUsername:()=>!!t.username,isLoggedIn:()=>!!t.userId&&!!t.email}}const cK=g.createContext(void 0);function ime({children:t}){const[e,r]=g.useState(!1),[s,a]=g.useState([]),i=d=>{if(s.length>=5)return;const h={...d,id:`${d.postId}-${Date.now()}-${Math.random()}`,timestamp:Date.now()};a(f=>[...f,h])},o=d=>{a(h=>h.filter(f=>f.id!==d))},l=()=>{a([])};return n.jsx(cK.Provider,{value:{isAudioMode:e,setIsAudioMode:r,selectedTextSnippets:s,addTextSnippet:i,removeTextSnippet:o,clearSelection:l},children:t})}function o_(){const t=g.useContext(cK);if(!t)throw new Error("useAudioMode must be used within AudioModeProvider");return t}const ome=["RELIANCE","TCS","HDFCBANK","INFY","HINDUNILVR","ICICIBANK","KOTAKBANK","BHARTIARTL","ITC","SBIN","ASIANPAINT","MARUTI","LT","AXISBANK","HCLTECH"],lme=[{value:"bullish",label:"Bullish",icon:Gn,color:"text-green-600"},{value:"bearish",label:"Bearish",icon:$c,color:"text-red-600"},{value:"neutral",label:"Neutral",icon:cse,color:"text-gray-600"}];function xN({hideAudioMode:t=!1,initialViewMode:e="post",onMinimize:r}={}){const[s,a]=g.useState(""),[i,o]=g.useState(""),[l,d]=g.useState([]),[h,f]=g.useState("neutral"),[m,x]=g.useState([]),b=g.useRef(null),[j,N]=g.useState(""),[w,C]=g.useState([]),[T,O]=g.useState(!1),[I,P]=g.useState(!1),A=g.useRef(null),[R,B]=g.useState(e),[V,X]=g.useState("message"),{isAudioMode:ee,setIsAudioMode:Y,selectedTextSnippets:re,addTextSnippet:le,removeTextSnippet:te,clearSelection:de}=o_();g.useEffect(()=>{Y(R==="audio")},[R,Y]),g.useEffect(()=>{const Ee=setTimeout(async()=>{if(j.trim().length<2){C([]),P(!1);return}O(!0);try{const Ie=await(await fetch(`/api/angelone/search-instruments?query=${encodeURIComponent(j)}&exchange=NSE,BSE,MCX&limit=50`)).json();if(Ie.success&&Ie.instruments){const Ae=Ie.instruments.filter(We=>{const ot=(We.instrumentType||"").toUpperCase(),It=(We.symbol||"").toUpperCase();return!(ot.includes("FUT")||ot.includes("OPT")||ot.includes("CE")||ot.includes("PE")||It.endsWith("CE")||It.endsWith("PE")||It.includes("FUT"))}).filter(We=>!l.includes(We.symbol));C(Ae.slice(0,20)),P(Ae.length>0)}}catch(Le){console.error("Error searching instruments:",Le)}finally{O(!1)}},300);return()=>clearTimeout(Ee)},[j,l]),g.useEffect(()=>{const ce=Ee=>{A.current&&!A.current.contains(Ee.target)&&P(!1)};return document.addEventListener("mousedown",ce),()=>document.removeEventListener("mousedown",ce)},[]);const ie=ce=>{l.includes(ce.symbol)||d(Ee=>[...Ee,ce.symbol]),N(""),P(!1),C([])},{toast:Z}=Ia(),ne=qu(),{currentUser:oe}=h1(),U=yo({mutationFn:async ce=>{const{getCognitoUser:Ee}=await Ale(async()=>{const{getCognitoUser:Ue}=await Promise.resolve().then(()=>ame);return{getCognitoUser:Ue}},void 0),Le=await Ee();if(!(Le!=null&&Le.userId))throw new Error("Please log in first");const Ie=await fetch("/api/social-posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...ce,userId:Le.userId}),credentials:"include"});if(!Ie.ok){const Ue=await Ie.json();throw new Error(Ue.error||Ue.message||"Failed to create post")}return Ie.json()},onMutate:async ce=>{await ne.cancelQueries({queryKey:["/api/social-posts"]});const Ee=ne.getQueryData(["/api/social-posts"]);return ne.setQueryData(["/api/social-posts"],Le=>{const Ie={id:Date.now(),...ce,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),likes:0,comments:0,reposts:0,imageUrl:ce.imageUrl};return Array.isArray(Le)?[Ie,...Le]:[Ie]}),{previousPosts:Ee}},onError:(ce,Ee,Le)=>{ne.setQueryData(["/api/social-posts"],Le==null?void 0:Le.previousPosts),Z({description:ce.message||"Failed to create post",variant:"destructive"})},onSuccess:()=>{ne.invalidateQueries({queryKey:["/api/social-posts"]}),W(),Z({description:"Post created successfully!"})}}),W=()=>{a(""),o(""),d([]),f("neutral"),x([]),de()},be=()=>{var ce;if(s.trim()&&re.length<5){const Ee=oe.username||((ce=oe.email)==null?void 0:ce.split("@")[0])||"anonymous",Le=oe.displayName||Ee;le({postId:Date.now(),text:s.trim(),authorUsername:Ee,authorDisplayName:Le}),a(""),Z({description:`Card ${re.length+1}/5 added!`})}},pe=g.useCallback(ce=>ce.toUpperCase().split(/\s+/).filter(Ie=>{const Ue=Ie.replace(/[^\w]/g,"");return ome.includes(Ue)&&!l.includes(Ue)}),[l]),ge=ce=>{const Ee=ce.target.value;a(Ee);const Le=pe(Ee);Le.length>0&&d(Ie=>[...Ie,...Le])},Ce=ce=>{d(l.filter(Ee=>Ee!==ce))},he=async ce=>{var Ue,Ae;if(ce.preventDefault(),R==="audio"){if(!s.trim()&&re.length===0){Z({description:"Please add text or select posts for your audio minicast.",variant:"destructive"});return}}else if(!s.trim()){Z({description:"Please enter some content for your post.",variant:"destructive"});return}const Ee=oe.username||((Ue=oe.email)==null?void 0:Ue.split("@")[0])||"anonymous",Le=oe.displayName||oe.username||((Ae=oe.email)==null?void 0:Ae.split("@")[0])||"Anonymous User",Ie={content:s.trim()||(R==="audio"&&re.length>0?`Audio MiniCast with ${re.length} selected post${re.length>1?"s":""}`:""),authorUsername:Ee,authorDisplayName:Le,stockMentions:R==="audio"?[]:l,sentiment:R==="audio"?void 0:h,tags:[],hasImage:m.length>0,imageUrl:m.length>1?JSON.stringify(m.map(We=>We.url)):m.length===1?m[0].url:void 0,isAudioPost:R==="audio",selectedPostIds:R==="audio"?re.map(We=>String(We.postId)).filter(We=>We&&We!=="undefined"&&We!=="null"&&We.length>0):void 0,selectedPosts:R==="audio"?re.filter(We=>We.postId&&We.text).map(We=>({id:String(We.postId),content:We.text})):void 0};U.mutate(Ie)},ue=[{id:1,name:"Your Profile",handle:"Active Trader",avatar:"YP",isOwn:!0,status:"online",bgColor:"bg-purple-500"},{id:2,name:"Henry Mercer",handle:"Active trader",avatar:"HM",following:!1,status:"online",bgColor:"bg-teal-500"},{id:3,name:"Amelia Rowann",handle:"Day trader",avatar:"AR",following:!1,status:"offline",bgColor:"bg-orange-500"}];return n.jsxs(St,{className:"w-full max-w-md mx-auto bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm transition-none",children:[n.jsx(um,{className:"border-b border-gray-200 dark:border-gray-700 transition-none",children:n.jsxs(hm,{className:"flex items-center justify-between text-gray-900 dark:text-white",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 transition-none",children:R==="post"?n.jsx(Oc,{className:"h-4 w-4 text-gray-700 dark:text-gray-300"}):R==="audio"?n.jsx(Vg,{className:"h-4 w-4 text-purple-500 dark:text-purple-400"}):n.jsx(l0,{className:"h-4 w-4 text-gray-700 dark:text-gray-300"})}),n.jsx("span",{className:"text-lg font-bold",children:R==="post"?"Create Post":R==="audio"?"Audio MiniCast":"Messages"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[!t&&n.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[n.jsx(Vg,{className:`h-4 w-4 ${R==="audio"?"text-purple-600 dark:text-purple-400":"text-gray-400 dark:text-gray-500"}`}),n.jsx(qA,{checked:R==="audio",onCheckedChange:ce=>{!ce&&R==="audio"&&r?(Y(!1),r()):B(ce?"audio":"post")},className:"data-[state=checked]:bg-purple-600 data-[state=unchecked]:bg-gray-300 dark:data-[state=unchecked]:bg-gray-600","data-testid":"switch-toggle-audio"})]}),!t&&n.jsx(H,{variant:"ghost",size:"sm",onClick:()=>{R==="audio"&&r?(Y(!1),r()):B(R==="audio"?"post":"audio")},className:`md:hidden p-2 h-8 w-8 rounded-full ${R==="audio"?"bg-purple-100 dark:bg-purple-900/30":"hover:bg-gray-200 dark:hover:bg-gray-600"}`,"data-testid":"button-toggle-audio",children:n.jsx(Vg,{className:`h-4 w-4 ${R==="audio"?"text-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-400"}`})})]})]})}),n.jsx(Kt,{className:"space-y-4 xl:space-y-6 p-4 xl:p-6 max-h-[calc(100vh-280px)] overflow-y-auto",children:R==="audio"?n.jsxs("form",{onSubmit:he,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Un,{htmlFor:"audio-content",className:"text-gray-800 dark:text-gray-200 font-medium text-base",children:"What's on your mind?"}),n.jsxs("div",{className:"relative",children:[n.jsx(qp,{id:"audio-content",value:s,onChange:ce=>a(ce.target.value),onKeyDown:ce=>{ce.key==="Enter"&&!ce.shiftKey&&(ce.preventDefault(),s.trim()&&re.length<5&&be())},placeholder:"Your thoughts will be converted to audio... (Press Enter to add card, Shift+Enter for new line)",maxLength:500,className:"min-h-[120px] resize-none bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:border-purple-500 focus:ring-purple-500 pr-12","data-testid":"textarea-audio-content"}),s.trim()&&re.length<5&&n.jsx(H,{type:"button",size:"icon",onClick:be,className:"absolute bottom-2 right-2 h-8 w-8 bg-purple-600 hover:bg-purple-700 text-white rounded-full shadow-md","data-testid":"button-add-text-card",children:n.jsx(vi,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 text-right",children:[s.length,"/500 characters"]})]}),re.length>0?n.jsxs("div",{className:"space-y-3",children:[n.jsxs(Un,{className:"text-center text-gray-800 dark:text-gray-200 font-medium text-base",children:["Selected Posts (",re.length,"/5)"]}),n.jsx(mce,{snippets:re,onRemove:ce=>te(ce)})]}):n.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4 border border-purple-200 dark:border-purple-800 cursor-pointer hover:bg-purple-100 dark:hover:bg-purple-900/30 transition-colors relative",onClick:r,children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Vg,{className:"h-4 w-4 text-purple-600 dark:text-purple-400"}),n.jsx("h3",{className:"font-medium text-purple-900 dark:text-purple-100 text-sm",children:"Select Posts for Audio MiniCast"})]}),n.jsx("p",{className:"text-sm text-purple-700 dark:text-purple-300",children:"Click on any post below to add it to your audio minicast (up to 5 posts). Your selected posts will be combined with your thoughts into an audio experience."}),n.jsx("div",{className:"absolute bottom-2 right-2 opacity-60 hover:opacity-100 transition-opacity",children:n.jsxs("div",{className:"relative w-6 h-6",children:[n.jsx(Mq,{className:"w-6 h-6 text-purple-500 dark:text-purple-400"}),n.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-purple-600 dark:bg-purple-300 rounded-full flex items-center justify-center",children:n.jsx("svg",{className:"w-1.5 h-1.5 text-white dark:text-purple-900",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{d:"M5 6a2 2 0 11-4 0 2 2 0 014 0zM2 9a1 1 0 100-2 1 1 0 000 2z"})})})]})})]}),n.jsxs("div",{className:"flex justify-between pt-4",children:[n.jsx(H,{type:"button",variant:"outline",onClick:W,className:"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 border-gray-300 dark:border-gray-600","data-testid":"button-clear-audio",children:"Clear"}),n.jsx(H,{type:"submit",disabled:!s.trim()&&re.length===0||U.isPending,className:"min-w-[100px] bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white","data-testid":"button-publish-audio",children:U.isPending?n.jsxs(n.Fragment,{children:[n.jsx(Jl,{className:"h-4 w-4 mr-2 animate-spin"}),"Publishing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Vg,{className:"h-4 w-4 mr-2"}),"Publish Audio"]})})]})]}):R==="post"?n.jsxs("form",{onSubmit:he,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Un,{htmlFor:"content",className:"text-gray-800 dark:text-gray-200 font-medium text-base",children:"What's on your mind?"}),n.jsx(qp,{id:"content",ref:b,value:s,onChange:ge,placeholder:"Share your trading insights...",maxLength:500,className:"min-h-[120px] resize-none bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:border-blue-500 focus:ring-blue-500","data-testid":"textarea-post-content"}),n.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 text-right",children:[s.length,"/500 characters"]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Un,{className:"text-gray-800 dark:text-gray-200 font-medium text-base",children:"Stock Mentions"}),n.jsxs("div",{className:"relative",ref:A,children:[n.jsxs("div",{className:"relative",children:[n.jsx(Zl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx(Nr,{type:"text",value:j,onChange:ce=>N(ce.target.value),onFocus:()=>j.length>=2&&P(!0),placeholder:"Search NSE, BSE, MCX instruments...",className:"pl-10 pr-10 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white focus:border-blue-500","data-testid":"input-instrument-search"}),T&&n.jsx(Vo,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-blue-500 animate-spin"})]}),I&&w.length>0&&n.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:w.map((ce,Ee)=>n.jsxs("button",{type:"button",onClick:()=>ie(ce),className:"w-full px-4 py-2.5 text-left hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-between gap-2 border-b border-gray-100 dark:border-gray-700 last:border-b-0","data-testid":`instrument-result-${ce.symbol}`,children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium text-gray-900 dark:text-white truncate",children:ce.symbol}),n.jsx(Sr,{variant:"outline",className:"text-xs px-1.5 py-0 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 border-gray-300 dark:border-gray-600",children:ce.exchange})]}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:ce.name})]}),n.jsx(vi,{className:"h-4 w-4 text-blue-500 flex-shrink-0"})]},`${ce.symbol}-${ce.exchange}-${Ee}`))}),I&&j.length>=2&&!T&&w.length===0&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg p-4 text-center",children:[n.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:['No instruments found for "',j,'"']}),n.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:"Try searching NSE, BSE, or MCX symbols"})]})]}),l.length>0&&n.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:l.map(ce=>n.jsxs(Sr,{variant:"secondary",className:"flex items-center gap-1 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 border border-blue-200 dark:border-blue-800","data-testid":`badge-stock-${ce}`,children:["#",ce,n.jsx("button",{type:"button",onClick:()=>Ce(ce),className:"ml-1 hover:bg-red-500/30 rounded-full p-0.5",children:n.jsx(Wr,{className:"h-3 w-3"})})]},ce))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Un,{className:"text-gray-800 dark:text-gray-200 font-medium text-base",children:"Market Sentiment"}),n.jsxs(Ms,{value:h,onValueChange:f,children:[n.jsx(Ns,{className:"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white focus:border-blue-500","data-testid":"select-sentiment",children:n.jsx(Os,{})}),n.jsx(js,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:lme.map(({value:ce,label:Ee,icon:Le,color:Ie})=>n.jsx(gt,{value:ce,className:"text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Le,{className:`h-4 w-4 ${Ie}`}),Ee]})},ce))})]})]}),n.jsxs("div",{className:"space-y-2 flex flex-col",children:[n.jsx(Un,{className:"text-gray-800 dark:text-gray-200 font-medium text-base",children:"Images (Optional)"}),n.jsx("div",{className:"h-80 rounded-lg border border-gray-200 dark:border-gray-700 bg-gradient-to-b from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900",children:n.jsx(wW,{images:m,onImagesChange:x,"data-testid":"image-uploader"})})]}),n.jsxs("div",{className:"flex justify-between pt-4",children:[n.jsx(H,{type:"button",variant:"outline",onClick:W,className:"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 border-gray-300 dark:border-gray-600","data-testid":"button-clear-post",children:"Clear"}),n.jsx(H,{type:"submit",disabled:!s.trim()||U.isPending,className:"min-w-[100px] bg-blue-600 hover:bg-blue-700 text-white","data-testid":"button-publish-post",children:U.isPending?n.jsxs(n.Fragment,{children:[n.jsx(Jl,{className:"h-4 w-4 mr-2 animate-spin"}),"Publishing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(NA,{className:"h-4 w-4 mr-2"}),"Publish"]})})]})]}):n.jsx("div",{className:"space-y-4",children:V==="message"?n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-lg p-4 text-center",children:[n.jsx(l0,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Direct messages coming soon!"})]})}):n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"space-y-3",children:ue.map(ce=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600","data-testid":`profile-card-${ce.id}`,children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-10 h-10 rounded-full ${ce.bgColor} flex items-center justify-center text-white font-medium`,"data-testid":`avatar-${ce.id}`,children:ce.avatar}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h4",{className:"font-medium text-gray-900 dark:text-white text-sm","data-testid":`profile-name-${ce.id}`,children:ce.name}),ce.status==="online"&&n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200","data-testid":`status-${ce.id}`,children:"Online"})]}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400","data-testid":`profile-handle-${ce.id}`,children:ce.handle})]})]}),n.jsx("div",{className:"flex items-center gap-2",children:ce.isOwn?n.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium","data-testid":`profile-you-${ce.id}`,children:"You"}):n.jsxs(n.Fragment,{children:[n.jsxs(H,{size:"sm",variant:"outline",className:"text-xs px-3 py-1 h-7","data-testid":`button-copy-strategy-${ce.id}`,children:[n.jsx(Bi,{className:"w-3 h-3 mr-1"}),"Copy Strategy"]}),n.jsx(H,{size:"sm",variant:"ghost",className:"p-1 h-7 w-7","data-testid":`button-follow-${ce.id}`,children:n.jsx(Uo,{className:"w-3 h-3"})})]})})]},ce.id))}),n.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600","data-testid":"followers-section",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"font-medium text-gray-900 dark:text-white text-sm","data-testid":"followers-title",children:"Followers"}),n.jsxs(H,{size:"sm",variant:"outline",className:"text-xs px-3 py-1 h-7","data-testid":"button-follow-all",children:[n.jsx(Ub,{className:"w-3 h-3 mr-1"}),"Follow All"]})]}),n.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400","data-testid":"followers-count",children:"Connect with 1,247 active traders in your network"})]}),n.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center",children:n.jsx(Uo,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),n.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Join Trading Community"})]}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-3",children:"Connect with experienced traders and share strategies"}),n.jsxs(H,{className:"w-full bg-blue-600 hover:bg-blue-700 text-white text-sm","data-testid":"button-join-community",children:[n.jsx(vb,{className:"w-3 h-3 mr-2"}),"Join Community"]})]})]})})})]})}const cme=t=>[{id:"1",type:"live_stream",title:"CNBC Live Stream",description:"Watch live market analysis and trading strategies",youtubeEmbedUrl:t||"https://www.youtube.com/embed/0AzLJkgUtAo?enablejsapi=1&modestbranding=1&controls=0&showinfo=0&rel=0&pp=ygUJY25iYyBsaXZl",isLive:!0,priority:"high"},{id:"2",type:"content",title:"Market Analysis Update",description:"Latest market trends and analysis",date:"9 Sep 2024"},{id:"3",type:"update",title:"Important Trading Update",description:"New features and market alerts now available",priority:"high"},{id:"4",type:"ad",title:"Premium Trading Tools",description:"Upgrade to access advanced analytics and insights",priority:"medium"}];function dme(){const[t,e]=g.useState(0),[r,s]=g.useState(!0),[a,i]=g.useState(!1),o=g.useRef(null),[l,d]=g.useState("https://www.youtube.com/embed/0AzLJkgUtAo?enablejsapi=1&modestbranding=1&controls=0&showinfo=0&rel=0&pp=ygUJY25iYyBsaXZl");g.useEffect(()=>{const C=localStorage.getItem("youtube_banner_url");if(C){const T=C.includes("?")?`${C}&modestbranding=1&controls=0&showinfo=0&rel=0`:`${C}?modestbranding=1&controls=0&showinfo=0&rel=0`;d(T)}},[]),g.useEffect(()=>{const C=T=>{const O=T.detail.url;if(O){const I=O.includes("?")?`${O}&modestbranding=1&controls=0&showinfo=0&rel=0`:`${O}?modestbranding=1&controls=0&showinfo=0&rel=0`;d(I),e(0)}else d("https://www.youtube.com/embed/0AzLJkgUtAo?enablejsapi=1&modestbranding=1&controls=0&showinfo=0&rel=0&pp=ygUJY25iYyBsaXZl"),e(0)};return window.addEventListener("livestream-url-updated",C),()=>{window.removeEventListener("livestream-url-updated",C)}},[]);const h=g.useMemo(()=>cme(l),[l]),f=h[t];g.useEffect(()=>{if(!r)return;if(f.youtubeEmbedUrl&&a){console.log(" Carousel PAUSED - YouTube video is playing");return}const C=setInterval(()=>{e(T=>(T+1)%h.length)},5e3);return()=>clearInterval(C)},[r,a,f.youtubeEmbedUrl,h.length]),g.useEffect(()=>{if(!f.youtubeEmbedUrl)return;const C=()=>{var T;a&&o.current&&((T=o.current.contentWindow)==null||T.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*"),i(!1),console.log(" Video paused due to scroll"))};return window.addEventListener("scroll",C,{passive:!0}),()=>{window.removeEventListener("scroll",C)}},[f.youtubeEmbedUrl,a]);const m=()=>{var C;o.current&&f.youtubeEmbedUrl&&((C=o.current.contentWindow)==null||C.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*"))};window.pauseBannerYouTube=m;const x=()=>{e(C=>C>0?C-1:h.length-1)},b=()=>{e(C=>(C+1)%h.length)},j=(C,T)=>{switch(C){case"live_stream":return"bg-red-600 hover:bg-red-700";case"update":return T==="high"?"bg-orange-600 hover:bg-orange-700":"bg-blue-600 hover:bg-blue-700";case"ad":return"bg-purple-600 hover:bg-purple-700";default:return"bg-indigo-600 hover:bg-indigo-700"}},N=C=>{switch(C){case"live_stream":return n.jsx(NA,{className:"w-3 h-3"});case"update":return n.jsx(Pq,{className:"w-3 h-3"});case"ad":return n.jsx(Gn,{className:"w-3 h-3"});default:return n.jsx(wm,{className:"w-3 h-3"})}},w=()=>{var C,T;!o.current||!f.youtubeEmbedUrl||(a?((C=o.current.contentWindow)==null||C.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*"),i(!1),console.log(" Video PAUSED - Carousel will RESUME")):((T=o.current.contentWindow)==null||T.postMessage('{"event":"command","func":"playVideo","args":""}',"*"),i(!0),console.log(" Video PLAYING - Carousel will STOP")))};return n.jsxs(St,{className:"w-full h-32 md:h-48 relative overflow-hidden bg-gradient-to-r from-slate-900 via-indigo-900 to-slate-900 border-2 border-indigo-400/30",children:[n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:f.youtubeEmbedUrl?n.jsxs("div",{className:"relative w-full h-full",children:[n.jsx("iframe",{ref:o,className:"absolute inset-0 w-full h-full",src:f.youtubeEmbedUrl,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,"data-testid":"youtube-iframe"}),n.jsxs("div",{className:"absolute top-2 left-2 flex items-center gap-2 z-10",children:[n.jsx(H,{size:"icon",variant:"ghost",onClick:w,className:"h-8 w-8 bg-black/50 backdrop-blur-sm hover:bg-black/70 text-white","data-testid":"button-youtube-toggle",children:a?n.jsx(G2,{className:"w-4 h-4"}):n.jsx(Ui,{className:"w-4 h-4"})}),f.isLive&&n.jsxs(Sr,{className:"bg-red-600 hover:bg-red-700 text-white text-xs px-2 py-0.5 flex items-center gap-1",children:[n.jsx("span",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),"LIVE"]})]})]}):n.jsxs("div",{className:"text-center px-4 md:px-8",children:[n.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[n.jsxs(Sr,{className:`${j(f.type,f.priority)} text-white flex items-center gap-1`,"data-testid":`badge-${f.type}`,children:[N(f.type),n.jsx("span",{children:f.type.replace("_"," ").toUpperCase()})]}),f.date&&n.jsx("span",{className:"text-xs text-indigo-300",children:f.date})]}),n.jsx("h2",{className:"text-lg md:text-2xl font-bold text-white mb-1 md:mb-2",children:f.title}),n.jsx("p",{className:"text-sm md:text-base text-indigo-200 line-clamp-2",children:f.description})]})}),n.jsxs("div",{className:"absolute inset-y-0 left-0 right-0 flex items-center justify-between px-2 pointer-events-none",children:[n.jsx(H,{size:"icon",variant:"ghost",onClick:x,className:"pointer-events-auto h-8 w-8 md:h-10 md:w-10 bg-black/30 backdrop-blur-sm hover:bg-black/50 text-white","data-testid":"button-banner-left",children:n.jsx(Du,{className:"w-4 h-4 md:w-5 md:h-5"})}),n.jsx(H,{size:"icon",variant:"ghost",onClick:b,className:"pointer-events-auto h-8 w-8 md:h-10 md:w-10 bg-black/30 backdrop-blur-sm hover:bg-black/50 text-white","data-testid":"button-banner-right",children:n.jsx(Zh,{className:"w-4 h-4 md:w-5 md:h-5"})})]}),n.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-1.5 z-10",children:h.map((C,T)=>n.jsx("button",{onClick:()=>e(T),className:`h-1.5 rounded-full transition-all ${T===t?"w-6 bg-white":"w-1.5 bg-white/40 hover:bg-white/60"}`,"data-testid":`button-indicator-${T}`},T))})]})}var cC,lO;function lc(){if(lO)return cC;lO=1;var t=Array.isArray;return cC=t,cC}var dC,cO;function dK(){if(cO)return dC;cO=1;var t=typeof tN=="object"&&tN&&tN.Object===Object&&tN;return dC=t,dC}var uC,dO;function pf(){if(dO)return uC;dO=1;var t=dK(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return uC=r,uC}var hC,uO;function f1(){if(uO)return hC;uO=1;var t=pf(),e=t.Symbol;return hC=e,hC}var fC,hO;function ume(){if(hO)return fC;hO=1;var t=f1(),e=Object.prototype,r=e.hasOwnProperty,s=e.toString,a=t?t.toStringTag:void 0;function i(o){var l=r.call(o,a),d=o[a];try{o[a]=void 0;var h=!0}catch{}var f=s.call(o);return h&&(l?o[a]=d:delete o[a]),f}return fC=i,fC}var mC,fO;function hme(){if(fO)return mC;fO=1;var t=Object.prototype,e=t.toString;function r(s){return e.call(s)}return mC=r,mC}var pC,mO;function Pm(){if(mO)return pC;mO=1;var t=f1(),e=ume(),r=hme(),s="[object Null]",a="[object Undefined]",i=t?t.toStringTag:void 0;function o(l){return l==null?l===void 0?a:s:i&&i in Object(l)?e(l):r(l)}return pC=o,pC}var gC,pO;function Am(){if(pO)return gC;pO=1;function t(e){return e!=null&&typeof e=="object"}return gC=t,gC}var xC,gO;function gv(){if(gO)return xC;gO=1;var t=Pm(),e=Am(),r="[object Symbol]";function s(a){return typeof a=="symbol"||e(a)&&t(a)==r}return xC=s,xC}var yC,xO;function l_(){if(xO)return yC;xO=1;var t=lc(),e=gv(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;function a(i,o){if(t(i))return!1;var l=typeof i;return l=="number"||l=="symbol"||l=="boolean"||i==null||e(i)?!0:s.test(i)||!r.test(i)||o!=null&&i in Object(o)}return yC=a,yC}var vC,yO;function tg(){if(yO)return vC;yO=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return vC=t,vC}var bC,vO;function c_(){if(vO)return bC;vO=1;var t=Pm(),e=tg(),r="[object AsyncFunction]",s="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function o(l){if(!e(l))return!1;var d=t(l);return d==s||d==a||d==r||d==i}return bC=o,bC}var wC,bO;function fme(){if(bO)return wC;bO=1;var t=pf(),e=t["__core-js_shared__"];return wC=e,wC}var NC,wO;function mme(){if(wO)return NC;wO=1;var t=fme(),e=(function(){var s=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""})();function r(s){return!!e&&e in s}return NC=r,NC}var jC,NO;function uK(){if(NO)return jC;NO=1;var t=Function.prototype,e=t.toString;function r(s){if(s!=null){try{return e.call(s)}catch{}try{return s+""}catch{}}return""}return jC=r,jC}var SC,jO;function pme(){if(jO)return SC;jO=1;var t=c_(),e=mme(),r=tg(),s=uK(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,d=o.toString,h=l.hasOwnProperty,f=RegExp("^"+d.call(h).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(x){if(!r(x)||e(x))return!1;var b=t(x)?f:i;return b.test(s(x))}return SC=m,SC}var kC,SO;function gme(){if(SO)return kC;SO=1;function t(e,r){return e==null?void 0:e[r]}return kC=t,kC}var CC,kO;function B0(){if(kO)return CC;kO=1;var t=pme(),e=gme();function r(s,a){var i=e(s,a);return t(i)?i:void 0}return CC=r,CC}var EC,CO;function TS(){if(CO)return EC;CO=1;var t=B0(),e=t(Object,"create");return EC=e,EC}var TC,EO;function xme(){if(EO)return TC;EO=1;var t=TS();function e(){this.__data__=t?t(null):{},this.size=0}return TC=e,TC}var PC,TO;function yme(){if(TO)return PC;TO=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return PC=t,PC}var AC,PO;function vme(){if(PO)return AC;PO=1;var t=TS(),e="__lodash_hash_undefined__",r=Object.prototype,s=r.hasOwnProperty;function a(i){var o=this.__data__;if(t){var l=o[i];return l===e?void 0:l}return s.call(o,i)?o[i]:void 0}return AC=a,AC}var _C,AO;function bme(){if(AO)return _C;AO=1;var t=TS(),e=Object.prototype,r=e.hasOwnProperty;function s(a){var i=this.__data__;return t?i[a]!==void 0:r.call(i,a)}return _C=s,_C}var IC,_O;function wme(){if(_O)return IC;_O=1;var t=TS(),e="__lodash_hash_undefined__";function r(s,a){var i=this.__data__;return this.size+=this.has(s)?0:1,i[s]=t&&a===void 0?e:a,this}return IC=r,IC}var MC,IO;function Nme(){if(IO)return MC;IO=1;var t=xme(),e=yme(),r=vme(),s=bme(),a=wme();function i(o){var l=-1,d=o==null?0:o.length;for(this.clear();++l<d;){var h=o[l];this.set(h[0],h[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=s,i.prototype.set=a,MC=i,MC}var OC,MO;function jme(){if(MO)return OC;MO=1;function t(){this.__data__=[],this.size=0}return OC=t,OC}var RC,OO;function d_(){if(OO)return RC;OO=1;function t(e,r){return e===r||e!==e&&r!==r}return RC=t,RC}var DC,RO;function PS(){if(RO)return DC;RO=1;var t=d_();function e(r,s){for(var a=r.length;a--;)if(t(r[a][0],s))return a;return-1}return DC=e,DC}var $C,DO;function Sme(){if(DO)return $C;DO=1;var t=PS(),e=Array.prototype,r=e.splice;function s(a){var i=this.__data__,o=t(i,a);if(o<0)return!1;var l=i.length-1;return o==l?i.pop():r.call(i,o,1),--this.size,!0}return $C=s,$C}var LC,$O;function kme(){if($O)return LC;$O=1;var t=PS();function e(r){var s=this.__data__,a=t(s,r);return a<0?void 0:s[a][1]}return LC=e,LC}var FC,LO;function Cme(){if(LO)return FC;LO=1;var t=PS();function e(r){return t(this.__data__,r)>-1}return FC=e,FC}var BC,FO;function Eme(){if(FO)return BC;FO=1;var t=PS();function e(r,s){var a=this.__data__,i=t(a,r);return i<0?(++this.size,a.push([r,s])):a[i][1]=s,this}return BC=e,BC}var UC,BO;function AS(){if(BO)return UC;BO=1;var t=jme(),e=Sme(),r=kme(),s=Cme(),a=Eme();function i(o){var l=-1,d=o==null?0:o.length;for(this.clear();++l<d;){var h=o[l];this.set(h[0],h[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=s,i.prototype.set=a,UC=i,UC}var zC,UO;function u_(){if(UO)return zC;UO=1;var t=B0(),e=pf(),r=t(e,"Map");return zC=r,zC}var VC,zO;function Tme(){if(zO)return VC;zO=1;var t=Nme(),e=AS(),r=u_();function s(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return VC=s,VC}var qC,VO;function Pme(){if(VO)return qC;VO=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return qC=t,qC}var HC,qO;function _S(){if(qO)return HC;qO=1;var t=Pme();function e(r,s){var a=r.__data__;return t(s)?a[typeof s=="string"?"string":"hash"]:a.map}return HC=e,HC}var WC,HO;function Ame(){if(HO)return WC;HO=1;var t=_S();function e(r){var s=t(this,r).delete(r);return this.size-=s?1:0,s}return WC=e,WC}var YC,WO;function _me(){if(WO)return YC;WO=1;var t=_S();function e(r){return t(this,r).get(r)}return YC=e,YC}var KC,YO;function Ime(){if(YO)return KC;YO=1;var t=_S();function e(r){return t(this,r).has(r)}return KC=e,KC}var GC,KO;function Mme(){if(KO)return GC;KO=1;var t=_S();function e(r,s){var a=t(this,r),i=a.size;return a.set(r,s),this.size+=a.size==i?0:1,this}return GC=e,GC}var XC,GO;function h_(){if(GO)return XC;GO=1;var t=Tme(),e=Ame(),r=_me(),s=Ime(),a=Mme();function i(o){var l=-1,d=o==null?0:o.length;for(this.clear();++l<d;){var h=o[l];this.set(h[0],h[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=s,i.prototype.set=a,XC=i,XC}var QC,XO;function hK(){if(XO)return QC;XO=1;var t=h_(),e="Expected a function";function r(s,a){if(typeof s!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var i=function(){var o=arguments,l=a?a.apply(this,o):o[0],d=i.cache;if(d.has(l))return d.get(l);var h=s.apply(this,o);return i.cache=d.set(l,h)||d,h};return i.cache=new(r.Cache||t),i}return r.Cache=t,QC=r,QC}var JC,QO;function Ome(){if(QO)return JC;QO=1;var t=hK(),e=500;function r(s){var a=t(s,function(o){return i.size===e&&i.clear(),o}),i=a.cache;return a}return JC=r,JC}var ZC,JO;function Rme(){if(JO)return ZC;JO=1;var t=Ome(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,s=t(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(e,function(o,l,d,h){i.push(d?h.replace(r,"$1"):l||o)}),i});return ZC=s,ZC}var eE,ZO;function f_(){if(ZO)return eE;ZO=1;function t(e,r){for(var s=-1,a=e==null?0:e.length,i=Array(a);++s<a;)i[s]=r(e[s],s,e);return i}return eE=t,eE}var tE,eR;function Dme(){if(eR)return tE;eR=1;var t=f1(),e=f_(),r=lc(),s=gv(),a=t?t.prototype:void 0,i=a?a.toString:void 0;function o(l){if(typeof l=="string")return l;if(r(l))return e(l,o)+"";if(s(l))return i?i.call(l):"";var d=l+"";return d=="0"&&1/l==-1/0?"-0":d}return tE=o,tE}var rE,tR;function fK(){if(tR)return rE;tR=1;var t=Dme();function e(r){return r==null?"":t(r)}return rE=e,rE}var nE,rR;function mK(){if(rR)return nE;rR=1;var t=lc(),e=l_(),r=Rme(),s=fK();function a(i,o){return t(i)?i:e(i,o)?[i]:r(s(i))}return nE=a,nE}var sE,nR;function IS(){if(nR)return sE;nR=1;var t=gv();function e(r){if(typeof r=="string"||t(r))return r;var s=r+"";return s=="0"&&1/r==-1/0?"-0":s}return sE=e,sE}var aE,sR;function m_(){if(sR)return aE;sR=1;var t=mK(),e=IS();function r(s,a){a=t(a,s);for(var i=0,o=a.length;s!=null&&i<o;)s=s[e(a[i++])];return i&&i==o?s:void 0}return aE=r,aE}var iE,aR;function pK(){if(aR)return iE;aR=1;var t=m_();function e(r,s,a){var i=r==null?void 0:t(r,s);return i===void 0?a:i}return iE=e,iE}var $me=pK();const Fd=Hs($me);var oE,iR;function Lme(){if(iR)return oE;iR=1;function t(e){return e==null}return oE=t,oE}var Fme=Lme();const yn=Hs(Fme);var lE,oR;function Bme(){if(oR)return lE;oR=1;var t=Pm(),e=lc(),r=Am(),s="[object String]";function a(i){return typeof i=="string"||!e(i)&&r(i)&&t(i)==s}return lE=a,lE}var Ume=Bme();const j0=Hs(Ume);var zme=c_();const gn=Hs(zme);var Vme=tg();const xv=Hs(Vme);var cE={exports:{}},ds={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lR;function qme(){if(lR)return ds;lR=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen"),j;j=Symbol.for("react.module.reference");function N(w){if(typeof w=="object"&&w!==null){var C=w.$$typeof;switch(C){case t:switch(w=w.type,w){case r:case a:case s:case h:case f:return w;default:switch(w=w&&w.$$typeof,w){case l:case o:case d:case x:case m:case i:return w;default:return C}}case e:return C}}}return ds.ContextConsumer=o,ds.ContextProvider=i,ds.Element=t,ds.ForwardRef=d,ds.Fragment=r,ds.Lazy=x,ds.Memo=m,ds.Portal=e,ds.Profiler=a,ds.StrictMode=s,ds.Suspense=h,ds.SuspenseList=f,ds.isAsyncMode=function(){return!1},ds.isConcurrentMode=function(){return!1},ds.isContextConsumer=function(w){return N(w)===o},ds.isContextProvider=function(w){return N(w)===i},ds.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===t},ds.isForwardRef=function(w){return N(w)===d},ds.isFragment=function(w){return N(w)===r},ds.isLazy=function(w){return N(w)===x},ds.isMemo=function(w){return N(w)===m},ds.isPortal=function(w){return N(w)===e},ds.isProfiler=function(w){return N(w)===a},ds.isStrictMode=function(w){return N(w)===s},ds.isSuspense=function(w){return N(w)===h},ds.isSuspenseList=function(w){return N(w)===f},ds.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===r||w===a||w===s||w===h||w===f||w===b||typeof w=="object"&&w!==null&&(w.$$typeof===x||w.$$typeof===m||w.$$typeof===i||w.$$typeof===o||w.$$typeof===d||w.$$typeof===j||w.getModuleId!==void 0)},ds.typeOf=N,ds}var cR;function Hme(){return cR||(cR=1,cE.exports=qme()),cE.exports}var Wme=Hme(),dE,dR;function gK(){if(dR)return dE;dR=1;var t=Pm(),e=Am(),r="[object Number]";function s(a){return typeof a=="number"||e(a)&&t(a)==r}return dE=s,dE}var uE,uR;function Yme(){if(uR)return uE;uR=1;var t=gK();function e(r){return t(r)&&r!=+r}return uE=e,uE}var Kme=Yme();const yv=Hs(Kme);var Gme=gK();const Xme=Hs(Gme);var $u=function(e){return e===0?0:e>0?1:-1},Wg=function(e){return j0(e)&&e.indexOf("%")===e.length-1},Rt=function(e){return Xme(e)&&!yv(e)},Qme=function(e){return yn(e)},Ni=function(e){return Rt(e)||j0(e)},Jme=0,vv=function(e){var r=++Jme;return"".concat(e||"").concat(r)},S0=function(e,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Rt(e)&&!j0(e))return s;var i;if(Wg(e)){var o=e.indexOf("%");i=r*parseFloat(e.slice(0,o))/100}else i=+e;return yv(i)&&(i=s),a&&i>r&&(i=r),i},_x=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},Zme=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,s={},a=0;a<r;a++)if(!s[e[a]])s[e[a]]=!0;else return!0;return!1},vo=function(e,r){return Rt(e)&&Rt(r)?function(s){return e+s*(r-e)}:function(){return r}};function Nj(t,e,r){return!t||!t.length?null:t.find(function(s){return s&&(typeof e=="function"?e(s):Fd(s,e))===r})}var epe=function(e,r){return Rt(e)&&Rt(r)?e-r:j0(e)&&j0(r)?e.localeCompare(r):e instanceof Date&&r instanceof Date?e.getTime()-r.getTime():String(e).localeCompare(String(r))};function Wx(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var s in e)if({}.hasOwnProperty.call(e,s)&&!{}.hasOwnProperty.call(t,s))return!1;return!0}function CP(t){"@babel/helpers - typeof";return CP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},CP(t)}var tpe=["viewBox","children"],rpe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],hR=["points","pathLength"],hE={svg:tpe,polygon:hR,polyline:hR},p_=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],jj=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var s=e;if(g.isValidElement(e)&&(s=e.props),!xv(s))return null;var a={};return Object.keys(s).forEach(function(i){p_.includes(i)&&(a[i]=r||function(o){return s[i](s,o)})}),a},npe=function(e,r,s){return function(a){return e(r,s,a),null}},Sj=function(e,r,s){if(!xv(e)||CP(e)!=="object")return null;var a=null;return Object.keys(e).forEach(function(i){var o=e[i];p_.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=npe(o,r,s))}),a},spe=["children"],ape=["children"];function fR(t,e){if(t==null)return{};var r=ipe(t,e),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function ipe(t,e){if(t==null)return{};var r={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;r[s]=t[s]}return r}function EP(t){"@babel/helpers - typeof";return EP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},EP(t)}var mR={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},mm=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},pR=null,fE=null,g_=function t(e){if(e===pR&&Array.isArray(fE))return fE;var r=[];return g.Children.forEach(e,function(s){yn(s)||(Wme.isFragment(s)?r=r.concat(t(s.props.children)):r.push(s))}),fE=r,pR=e,r};function Bd(t,e){var r=[],s=[];return Array.isArray(e)?s=e.map(function(a){return mm(a)}):s=[mm(e)],g_(t).forEach(function(a){var i=Fd(a,"type.displayName")||Fd(a,"type.name");s.indexOf(i)!==-1&&r.push(a)}),r}function Rc(t,e){var r=Bd(t,e);return r&&r[0]}var gR=function(e){if(!e||!e.props)return!1;var r=e.props,s=r.width,a=r.height;return!(!Rt(s)||s<=0||!Rt(a)||a<=0)},ope=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],lpe=function(e){return e&&e.type&&j0(e.type)&&ope.indexOf(e.type)>=0},xK=function(e){return e&&EP(e)==="object"&&"clipDot"in e},cpe=function(e,r,s,a){var i,o=(i=hE==null?void 0:hE[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!gn(e)&&(a&&o.includes(r)||rpe.includes(r))||s&&p_.includes(r)},hn=function(e,r,s){if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(g.isValidElement(e)&&(a=e.props),!xv(a))return null;var i={};return Object.keys(a).forEach(function(o){var l;cpe((l=a)===null||l===void 0?void 0:l[o],o,r,s)&&(i[o]=a[o])}),i},TP=function t(e,r){if(e===r)return!0;var s=g.Children.count(e);if(s!==g.Children.count(r))return!1;if(s===0)return!0;if(s===1)return xR(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var a=0;a<s;a++){var i=e[a],o=r[a];if(Array.isArray(i)||Array.isArray(o)){if(!t(i,o))return!1}else if(!xR(i,o))return!1}return!0},xR=function(e,r){if(yn(e)&&yn(r))return!0;if(!yn(e)&&!yn(r)){var s=e.props||{},a=s.children,i=fR(s,spe),o=r.props||{},l=o.children,d=fR(o,ape);return a&&l?Wx(i,d)&&TP(a,l):!a&&!l?Wx(i,d):!1}return!1},yR=function(e,r){var s=[],a={};return g_(e).forEach(function(i,o){if(lpe(i))s.push(i);else if(i){var l=mm(i.type),d=r[l]||{},h=d.handler,f=d.once;if(h&&(!f||!a[l])){var m=h(i,l,o);s.push(m),a[l]=!0}}}),s},dpe=function(e){var r=e&&e.type;return r&&mR[r]?mR[r]:null},upe=function(e,r){return g_(r).indexOf(e)},hpe=["children","width","height","viewBox","className","style","title","desc"];function PP(){return PP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},PP.apply(this,arguments)}function fpe(t,e){if(t==null)return{};var r=mpe(t,e),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function mpe(t,e){if(t==null)return{};var r={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;r[s]=t[s]}return r}function AP(t){var e=t.children,r=t.width,s=t.height,a=t.viewBox,i=t.className,o=t.style,l=t.title,d=t.desc,h=fpe(t,hpe),f=a||{width:r,height:s,x:0,y:0},m=jn("recharts-surface",i);return $e.createElement("svg",PP({},hn(h,!0,"svg"),{className:m,width:r,height:s,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),$e.createElement("title",null,l),$e.createElement("desc",null,d),e)}var ppe=["children","className"];function _P(){return _P=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},_P.apply(this,arguments)}function gpe(t,e){if(t==null)return{};var r=xpe(t,e),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function xpe(t,e){if(t==null)return{};var r={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;r[s]=t[s]}return r}var Zs=$e.forwardRef(function(t,e){var r=t.children,s=t.className,a=gpe(t,ppe),i=jn("recharts-layer",s);return $e.createElement("g",_P({className:i},hn(a,!0),{ref:e}),r)}),c0=function(e,r){for(var s=arguments.length,a=new Array(s>2?s-2:0),i=2;i<s;i++)a[i-2]=arguments[i]},mE,vR;function ype(){if(vR)return mE;vR=1;function t(e,r,s){var a=-1,i=e.length;r<0&&(r=-r>i?0:i+r),s=s>i?i:s,s<0&&(s+=i),i=r>s?0:s-r>>>0,r>>>=0;for(var o=Array(i);++a<i;)o[a]=e[a+r];return o}return mE=t,mE}var pE,bR;function vpe(){if(bR)return pE;bR=1;var t=ype();function e(r,s,a){var i=r.length;return a=a===void 0?i:a,!s&&a>=i?r:t(r,s,a)}return pE=e,pE}var gE,wR;function yK(){if(wR)return gE;wR=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",s="\\u20d0-\\u20ff",a=e+r+s,i="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+t+a+i+"]");function d(h){return l.test(h)}return gE=d,gE}var xE,NR;function bpe(){if(NR)return xE;NR=1;function t(e){return e.split("")}return xE=t,xE}var yE,jR;function wpe(){if(jR)return yE;jR=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",s="\\u20d0-\\u20ff",a=e+r+s,i="\\ufe0e\\ufe0f",o="["+t+"]",l="["+a+"]",d="\\ud83c[\\udffb-\\udfff]",h="(?:"+l+"|"+d+")",f="[^"+t+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",x="[\\ud800-\\udbff][\\udc00-\\udfff]",b="\\u200d",j=h+"?",N="["+i+"]?",w="(?:"+b+"(?:"+[f,m,x].join("|")+")"+N+j+")*",C=N+j+w,T="(?:"+[f+l+"?",l,m,x,o].join("|")+")",O=RegExp(d+"(?="+d+")|"+T+C,"g");function I(P){return P.match(O)||[]}return yE=I,yE}var vE,SR;function Npe(){if(SR)return vE;SR=1;var t=bpe(),e=yK(),r=wpe();function s(a){return e(a)?r(a):t(a)}return vE=s,vE}var bE,kR;function jpe(){if(kR)return bE;kR=1;var t=vpe(),e=yK(),r=Npe(),s=fK();function a(i){return function(o){o=s(o);var l=e(o)?r(o):void 0,d=l?l[0]:o.charAt(0),h=l?t(l,1).join(""):o.slice(1);return d[i]()+h}}return bE=a,bE}var wE,CR;function Spe(){if(CR)return wE;CR=1;var t=jpe(),e=t("toUpperCase");return wE=e,wE}var kpe=Spe();const MS=Hs(kpe);function Qs(t){return function(){return t}}const vK=Math.cos,kj=Math.sin,Gu=Math.sqrt,Cj=Math.PI,OS=2*Cj,IP=Math.PI,MP=2*IP,Lg=1e-6,Cpe=MP-Lg;function bK(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function Epe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return bK;const r=10**e;return function(s){this._+=s[0];for(let a=1,i=s.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+s[a]}}class Tpe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?bK:Epe(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,s,a){this._append`Q${+e},${+r},${this._x1=+s},${this._y1=+a}`}bezierCurveTo(e,r,s,a,i,o){this._append`C${+e},${+r},${+s},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(e,r,s,a,i){if(e=+e,r=+r,s=+s,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,d=s-e,h=a-r,f=o-e,m=l-r,x=f*f+m*m;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(x>Lg)if(!(Math.abs(m*d-h*f)>Lg)||!i)this._append`L${this._x1=e},${this._y1=r}`;else{let b=s-o,j=a-l,N=d*d+h*h,w=b*b+j*j,C=Math.sqrt(N),T=Math.sqrt(x),O=i*Math.tan((IP-Math.acos((N+x-w)/(2*C*T)))/2),I=O/T,P=O/C;Math.abs(I-1)>Lg&&this._append`L${e+I*f},${r+I*m}`,this._append`A${i},${i},0,0,${+(m*b>f*j)},${this._x1=e+P*d},${this._y1=r+P*h}`}}arc(e,r,s,a,i,o){if(e=+e,r=+r,s=+s,o=!!o,s<0)throw new Error(`negative radius: ${s}`);let l=s*Math.cos(a),d=s*Math.sin(a),h=e+l,f=r+d,m=1^o,x=o?a-i:i-a;this._x1===null?this._append`M${h},${f}`:(Math.abs(this._x1-h)>Lg||Math.abs(this._y1-f)>Lg)&&this._append`L${h},${f}`,s&&(x<0&&(x=x%MP+MP),x>Cpe?this._append`A${s},${s},0,1,${m},${e-l},${r-d}A${s},${s},0,1,${m},${this._x1=h},${this._y1=f}`:x>Lg&&this._append`A${s},${s},0,${+(x>=IP)},${m},${this._x1=e+s*Math.cos(i)},${this._y1=r+s*Math.sin(i)}`)}rect(e,r,s,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${s=+s}v${+a}h${-s}Z`}toString(){return this._}}function x_(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const s=Math.floor(r);if(!(s>=0))throw new RangeError(`invalid digits: ${r}`);e=s}return t},()=>new Tpe(e)}function y_(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function wK(t){this._context=t}wK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function RS(t){return new wK(t)}function NK(t){return t[0]}function jK(t){return t[1]}function SK(t,e){var r=Qs(!0),s=null,a=RS,i=null,o=x_(l);t=typeof t=="function"?t:t===void 0?NK:Qs(t),e=typeof e=="function"?e:e===void 0?jK:Qs(e);function l(d){var h,f=(d=y_(d)).length,m,x=!1,b;for(s==null&&(i=a(b=o())),h=0;h<=f;++h)!(h<f&&r(m=d[h],h,d))===x&&((x=!x)?i.lineStart():i.lineEnd()),x&&i.point(+t(m,h,d),+e(m,h,d));if(b)return i=null,b+""||null}return l.x=function(d){return arguments.length?(t=typeof d=="function"?d:Qs(+d),l):t},l.y=function(d){return arguments.length?(e=typeof d=="function"?d:Qs(+d),l):e},l.defined=function(d){return arguments.length?(r=typeof d=="function"?d:Qs(!!d),l):r},l.curve=function(d){return arguments.length?(a=d,s!=null&&(i=a(s)),l):a},l.context=function(d){return arguments.length?(d==null?s=i=null:i=a(s=d),l):s},l}function yN(t,e,r){var s=null,a=Qs(!0),i=null,o=RS,l=null,d=x_(h);t=typeof t=="function"?t:t===void 0?NK:Qs(+t),e=typeof e=="function"?e:Qs(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?jK:Qs(+r);function h(m){var x,b,j,N=(m=y_(m)).length,w,C=!1,T,O=new Array(N),I=new Array(N);for(i==null&&(l=o(T=d())),x=0;x<=N;++x){if(!(x<N&&a(w=m[x],x,m))===C)if(C=!C)b=x,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),j=x-1;j>=b;--j)l.point(O[j],I[j]);l.lineEnd(),l.areaEnd()}C&&(O[x]=+t(w,x,m),I[x]=+e(w,x,m),l.point(s?+s(w,x,m):O[x],r?+r(w,x,m):I[x]))}if(T)return l=null,T+""||null}function f(){return SK().defined(a).curve(o).context(i)}return h.x=function(m){return arguments.length?(t=typeof m=="function"?m:Qs(+m),s=null,h):t},h.x0=function(m){return arguments.length?(t=typeof m=="function"?m:Qs(+m),h):t},h.x1=function(m){return arguments.length?(s=m==null?null:typeof m=="function"?m:Qs(+m),h):s},h.y=function(m){return arguments.length?(e=typeof m=="function"?m:Qs(+m),r=null,h):e},h.y0=function(m){return arguments.length?(e=typeof m=="function"?m:Qs(+m),h):e},h.y1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:Qs(+m),h):r},h.lineX0=h.lineY0=function(){return f().x(t).y(e)},h.lineY1=function(){return f().x(t).y(r)},h.lineX1=function(){return f().x(s).y(e)},h.defined=function(m){return arguments.length?(a=typeof m=="function"?m:Qs(!!m),h):a},h.curve=function(m){return arguments.length?(o=m,i!=null&&(l=o(i)),h):o},h.context=function(m){return arguments.length?(m==null?i=l=null:l=o(i=m),h):i},h}class kK{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function Ppe(t){return new kK(t,!0)}function Ape(t){return new kK(t,!1)}const v_={draw(t,e){const r=Gu(e/Cj);t.moveTo(r,0),t.arc(0,0,r,0,OS)}},_pe={draw(t,e){const r=Gu(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},CK=Gu(1/3),Ipe=CK*2,Mpe={draw(t,e){const r=Gu(e/Ipe),s=r*CK;t.moveTo(0,-r),t.lineTo(s,0),t.lineTo(0,r),t.lineTo(-s,0),t.closePath()}},Ope={draw(t,e){const r=Gu(e),s=-r/2;t.rect(s,s,r,r)}},Rpe=.8908130915292852,EK=kj(Cj/10)/kj(7*Cj/10),Dpe=kj(OS/10)*EK,$pe=-vK(OS/10)*EK,Lpe={draw(t,e){const r=Gu(e*Rpe),s=Dpe*r,a=$pe*r;t.moveTo(0,-r),t.lineTo(s,a);for(let i=1;i<5;++i){const o=OS*i/5,l=vK(o),d=kj(o);t.lineTo(d*r,-l*r),t.lineTo(l*s-d*a,d*s+l*a)}t.closePath()}},NE=Gu(3),Fpe={draw(t,e){const r=-Gu(e/(NE*3));t.moveTo(0,r*2),t.lineTo(-NE*r,-r),t.lineTo(NE*r,-r),t.closePath()}},Td=-.5,Pd=Gu(3)/2,OP=1/Gu(12),Bpe=(OP/2+1)*3,Upe={draw(t,e){const r=Gu(e/Bpe),s=r/2,a=r*OP,i=s,o=r*OP+r,l=-i,d=o;t.moveTo(s,a),t.lineTo(i,o),t.lineTo(l,d),t.lineTo(Td*s-Pd*a,Pd*s+Td*a),t.lineTo(Td*i-Pd*o,Pd*i+Td*o),t.lineTo(Td*l-Pd*d,Pd*l+Td*d),t.lineTo(Td*s+Pd*a,Td*a-Pd*s),t.lineTo(Td*i+Pd*o,Td*o-Pd*i),t.lineTo(Td*l+Pd*d,Td*d-Pd*l),t.closePath()}};function zpe(t,e){let r=null,s=x_(a);t=typeof t=="function"?t:Qs(t||v_),e=typeof e=="function"?e:Qs(e===void 0?64:+e);function a(){let i;if(r||(r=i=s()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(t=typeof i=="function"?i:Qs(i),a):t},a.size=function(i){return arguments.length?(e=typeof i=="function"?i:Qs(+i),a):e},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function Ej(){}function Tj(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function TK(t){this._context=t}TK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Tj(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Tj(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Vpe(t){return new TK(t)}function PK(t){this._context=t}PK.prototype={areaStart:Ej,areaEnd:Ej,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Tj(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function qpe(t){return new PK(t)}function AK(t){this._context=t}AK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,s=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,s):this._context.moveTo(r,s);break;case 3:this._point=4;default:Tj(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Hpe(t){return new AK(t)}function _K(t){this._context=t}_K.prototype={areaStart:Ej,areaEnd:Ej,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Wpe(t){return new _K(t)}function ER(t){return t<0?-1:1}function TR(t,e,r){var s=t._x1-t._x0,a=e-t._x1,i=(t._y1-t._y0)/(s||a<0&&-0),o=(r-t._y1)/(a||s<0&&-0),l=(i*a+o*s)/(s+a);return(ER(i)+ER(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function PR(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function jE(t,e,r){var s=t._x0,a=t._y0,i=t._x1,o=t._y1,l=(i-s)/3;t._context.bezierCurveTo(s+l,a+l*e,i-l,o-l*r,i,o)}function Pj(t){this._context=t}Pj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:jE(this,this._t0,PR(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,jE(this,PR(this,r=TR(this,t,e)),r);break;default:jE(this,this._t0,r=TR(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function IK(t){this._context=new MK(t)}(IK.prototype=Object.create(Pj.prototype)).point=function(t,e){Pj.prototype.point.call(this,e,t)};function MK(t){this._context=t}MK.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,s,a,i){this._context.bezierCurveTo(e,t,s,r,i,a)}};function Ype(t){return new Pj(t)}function Kpe(t){return new IK(t)}function OK(t){this._context=t}OK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var s=AR(t),a=AR(e),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(s[0][i],a[0][i],s[1][i],a[1][i],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function AR(t){var e,r=t.length-1,s,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)a[e]=1,i[e]=4,o[e]=4*t[e]+2*t[e+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)s=a[e]/i[e-1],i[e]-=s,o[e]-=s*o[e-1];for(a[r-1]=o[r-1]/i[r-1],e=r-2;e>=0;--e)a[e]=(o[e]-a[e+1])/i[e];for(i[r-1]=(t[r]+a[r-1])/2,e=0;e<r-1;++e)i[e]=2*t[e+1]-a[e+1];return[a,i]}function Gpe(t){return new OK(t)}function DS(t,e){this._context=t,this._t=e}DS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function Xpe(t){return new DS(t,.5)}function Qpe(t){return new DS(t,0)}function Jpe(t){return new DS(t,1)}function by(t,e){if((o=t.length)>1)for(var r=1,s,a,i=t[e[0]],o,l=i.length;r<o;++r)for(a=i,i=t[e[r]],s=0;s<l;++s)i[s][1]+=i[s][0]=isNaN(a[s][1])?a[s][0]:a[s][1]}function RP(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function Zpe(t,e){return t[e]}function ege(t){const e=[];return e.key=t,e}function tge(){var t=Qs([]),e=RP,r=by,s=Zpe;function a(i){var o=Array.from(t.apply(this,arguments),ege),l,d=o.length,h=-1,f;for(const m of i)for(l=0,++h;l<d;++l)(o[l][h]=[0,+s(m,o[l].key,h,i)]).data=m;for(l=0,f=y_(e(o));l<d;++l)o[f[l]].index=l;return r(o,f),o}return a.keys=function(i){return arguments.length?(t=typeof i=="function"?i:Qs(Array.from(i)),a):t},a.value=function(i){return arguments.length?(s=typeof i=="function"?i:Qs(+i),a):s},a.order=function(i){return arguments.length?(e=i==null?RP:typeof i=="function"?i:Qs(Array.from(i)),a):e},a.offset=function(i){return arguments.length?(r=i??by,a):r},a}function rge(t,e){if((s=t.length)>0){for(var r,s,a=0,i=t[0].length,o;a<i;++a){for(o=r=0;r<s;++r)o+=t[r][a][1]||0;if(o)for(r=0;r<s;++r)t[r][a][1]/=o}by(t,e)}}function nge(t,e){if((a=t.length)>0){for(var r=0,s=t[e[0]],a,i=s.length;r<i;++r){for(var o=0,l=0;o<a;++o)l+=t[o][r][1]||0;s[r][1]+=s[r][0]=-l/2}by(t,e)}}function sge(t,e){if(!(!((o=t.length)>0)||!((i=(a=t[e[0]]).length)>0))){for(var r=0,s=1,a,i,o;s<i;++s){for(var l=0,d=0,h=0;l<o;++l){for(var f=t[e[l]],m=f[s][1]||0,x=f[s-1][1]||0,b=(m-x)/2,j=0;j<l;++j){var N=t[e[j]],w=N[s][1]||0,C=N[s-1][1]||0;b+=w-C}d+=m,h+=b*m}a[s-1][1]+=a[s-1][0]=r,d&&(r-=h/d)}a[s-1][1]+=a[s-1][0]=r,by(t,e)}}function Wb(t){"@babel/helpers - typeof";return Wb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wb(t)}var age=["type","size","sizeType"];function DP(){return DP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},DP.apply(this,arguments)}function _R(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function IR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_R(Object(r),!0).forEach(function(s){ige(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_R(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function ige(t,e,r){return e=oge(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oge(t){var e=lge(t,"string");return Wb(e)=="symbol"?e:e+""}function lge(t,e){if(Wb(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Wb(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cge(t,e){if(t==null)return{};var r=dge(t,e),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function dge(t,e){if(t==null)return{};var r={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;r[s]=t[s]}return r}var RK={symbolCircle:v_,symbolCross:_pe,symbolDiamond:Mpe,symbolSquare:Ope,symbolStar:Lpe,symbolTriangle:Fpe,symbolWye:Upe},uge=Math.PI/180,hge=function(e){var r="symbol".concat(MS(e));return RK[r]||v_},fge=function(e,r,s){if(r==="area")return e;switch(s){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*uge;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},mge=function(e,r){RK["symbol".concat(MS(e))]=r},b_=function(e){var r=e.type,s=r===void 0?"circle":r,a=e.size,i=a===void 0?64:a,o=e.sizeType,l=o===void 0?"area":o,d=cge(e,age),h=IR(IR({},d),{},{type:s,size:i,sizeType:l}),f=function(){var w=hge(s),C=zpe().type(w).size(fge(i,l,s));return C()},m=h.className,x=h.cx,b=h.cy,j=hn(h,!0);return x===+x&&b===+b&&i===+i?$e.createElement("path",DP({},j,{className:jn("recharts-symbols",m),transform:"translate(".concat(x,", ").concat(b,")"),d:f()})):null};b_.registerSymbol=mge;function wy(t){"@babel/helpers - typeof";return wy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wy(t)}function $P(){return $P=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},$P.apply(this,arguments)}function MR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function pge(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?MR(Object(r),!0).forEach(function(s){Yb(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):MR(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function gge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xge(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,$K(s.key),s)}}function yge(t,e,r){return e&&xge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function vge(t,e,r){return e=Aj(e),bge(t,DK()?Reflect.construct(e,r||[],Aj(t).constructor):e.apply(t,r))}function bge(t,e){if(e&&(wy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wge(t)}function wge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function DK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DK=function(){return!!t})()}function Aj(t){return Aj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Aj(t)}function Nge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LP(t,e)}function LP(t,e){return LP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},LP(t,e)}function Yb(t,e,r){return e=$K(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $K(t){var e=jge(t,"string");return wy(e)=="symbol"?e:e+""}function jge(t,e){if(wy(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(wy(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ad=32,w_=(function(t){function e(){return gge(this,e),vge(this,e,arguments)}return Nge(e,t),yge(e,[{key:"renderIcon",value:function(s){var a=this.props.inactiveColor,i=Ad/2,o=Ad/6,l=Ad/3,d=s.inactive?a:s.color;if(s.type==="plainline")return $e.createElement("line",{strokeWidth:4,fill:"none",stroke:d,strokeDasharray:s.payload.strokeDasharray,x1:0,y1:i,x2:Ad,y2:i,className:"recharts-legend-icon"});if(s.type==="line")return $e.createElement("path",{strokeWidth:4,fill:"none",stroke:d,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Ad,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(s.type==="rect")return $e.createElement("path",{stroke:"none",fill:d,d:"M0,".concat(Ad/8,"h").concat(Ad,"v").concat(Ad*3/4,"h").concat(-Ad,"z"),className:"recharts-legend-icon"});if($e.isValidElement(s.legendIcon)){var h=pge({},s);return delete h.legendIcon,$e.cloneElement(s.legendIcon,h)}return $e.createElement(b_,{fill:d,cx:i,cy:i,size:Ad,sizeType:"diameter",type:s.type})}},{key:"renderItems",value:function(){var s=this,a=this.props,i=a.payload,o=a.iconSize,l=a.layout,d=a.formatter,h=a.inactiveColor,f={x:0,y:0,width:Ad,height:Ad},m={display:l==="horizontal"?"inline-block":"block",marginRight:10},x={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(b,j){var N=b.formatter||d,w=jn(Yb(Yb({"recharts-legend-item":!0},"legend-item-".concat(j),!0),"inactive",b.inactive));if(b.type==="none")return null;var C=gn(b.value)?null:b.value;c0(!gn(b.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var T=b.inactive?h:b.color;return $e.createElement("li",$P({className:w,style:m,key:"legend-item-".concat(j)},Sj(s.props,b,j)),$e.createElement(AP,{width:o,height:o,viewBox:f,style:x},s.renderIcon(b)),$e.createElement("span",{className:"recharts-legend-item-text",style:{color:T}},N?N(C,b,j):C))})}},{key:"render",value:function(){var s=this.props,a=s.payload,i=s.layout,o=s.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return $e.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])})(g.PureComponent);Yb(w_,"displayName","Legend");Yb(w_,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var SE,OR;function Sge(){if(OR)return SE;OR=1;var t=AS();function e(){this.__data__=new t,this.size=0}return SE=e,SE}var kE,RR;function kge(){if(RR)return kE;RR=1;function t(e){var r=this.__data__,s=r.delete(e);return this.size=r.size,s}return kE=t,kE}var CE,DR;function Cge(){if(DR)return CE;DR=1;function t(e){return this.__data__.get(e)}return CE=t,CE}var EE,$R;function Ege(){if($R)return EE;$R=1;function t(e){return this.__data__.has(e)}return EE=t,EE}var TE,LR;function Tge(){if(LR)return TE;LR=1;var t=AS(),e=u_(),r=h_(),s=200;function a(i,o){var l=this.__data__;if(l instanceof t){var d=l.__data__;if(!e||d.length<s-1)return d.push([i,o]),this.size=++l.size,this;l=this.__data__=new r(d)}return l.set(i,o),this.size=l.size,this}return TE=a,TE}var PE,FR;function LK(){if(FR)return PE;FR=1;var t=AS(),e=Sge(),r=kge(),s=Cge(),a=Ege(),i=Tge();function o(l){var d=this.__data__=new t(l);this.size=d.size}return o.prototype.clear=e,o.prototype.delete=r,o.prototype.get=s,o.prototype.has=a,o.prototype.set=i,PE=o,PE}var AE,BR;function Pge(){if(BR)return AE;BR=1;var t="__lodash_hash_undefined__";function e(r){return this.__data__.set(r,t),this}return AE=e,AE}var _E,UR;function Age(){if(UR)return _E;UR=1;function t(e){return this.__data__.has(e)}return _E=t,_E}var IE,zR;function FK(){if(zR)return IE;zR=1;var t=h_(),e=Pge(),r=Age();function s(a){var i=-1,o=a==null?0:a.length;for(this.__data__=new t;++i<o;)this.add(a[i])}return s.prototype.add=s.prototype.push=e,s.prototype.has=r,IE=s,IE}var ME,VR;function BK(){if(VR)return ME;VR=1;function t(e,r){for(var s=-1,a=e==null?0:e.length;++s<a;)if(r(e[s],s,e))return!0;return!1}return ME=t,ME}var OE,qR;function UK(){if(qR)return OE;qR=1;function t(e,r){return e.has(r)}return OE=t,OE}var RE,HR;function zK(){if(HR)return RE;HR=1;var t=FK(),e=BK(),r=UK(),s=1,a=2;function i(o,l,d,h,f,m){var x=d&s,b=o.length,j=l.length;if(b!=j&&!(x&&j>b))return!1;var N=m.get(o),w=m.get(l);if(N&&w)return N==l&&w==o;var C=-1,T=!0,O=d&a?new t:void 0;for(m.set(o,l),m.set(l,o);++C<b;){var I=o[C],P=l[C];if(h)var A=x?h(P,I,C,l,o,m):h(I,P,C,o,l,m);if(A!==void 0){if(A)continue;T=!1;break}if(O){if(!e(l,function(R,B){if(!r(O,B)&&(I===R||f(I,R,d,h,m)))return O.push(B)})){T=!1;break}}else if(!(I===P||f(I,P,d,h,m))){T=!1;break}}return m.delete(o),m.delete(l),T}return RE=i,RE}var DE,WR;function _ge(){if(WR)return DE;WR=1;var t=pf(),e=t.Uint8Array;return DE=e,DE}var $E,YR;function Ige(){if(YR)return $E;YR=1;function t(e){var r=-1,s=Array(e.size);return e.forEach(function(a,i){s[++r]=[i,a]}),s}return $E=t,$E}var LE,KR;function N_(){if(KR)return LE;KR=1;function t(e){var r=-1,s=Array(e.size);return e.forEach(function(a){s[++r]=a}),s}return LE=t,LE}var FE,GR;function Mge(){if(GR)return FE;GR=1;var t=f1(),e=_ge(),r=d_(),s=zK(),a=Ige(),i=N_(),o=1,l=2,d="[object Boolean]",h="[object Date]",f="[object Error]",m="[object Map]",x="[object Number]",b="[object RegExp]",j="[object Set]",N="[object String]",w="[object Symbol]",C="[object ArrayBuffer]",T="[object DataView]",O=t?t.prototype:void 0,I=O?O.valueOf:void 0;function P(A,R,B,V,X,ee,Y){switch(B){case T:if(A.byteLength!=R.byteLength||A.byteOffset!=R.byteOffset)return!1;A=A.buffer,R=R.buffer;case C:return!(A.byteLength!=R.byteLength||!ee(new e(A),new e(R)));case d:case h:case x:return r(+A,+R);case f:return A.name==R.name&&A.message==R.message;case b:case N:return A==R+"";case m:var re=a;case j:var le=V&o;if(re||(re=i),A.size!=R.size&&!le)return!1;var te=Y.get(A);if(te)return te==R;V|=l,Y.set(A,R);var de=s(re(A),re(R),V,X,ee,Y);return Y.delete(A),de;case w:if(I)return I.call(A)==I.call(R)}return!1}return FE=P,FE}var BE,XR;function VK(){if(XR)return BE;XR=1;function t(e,r){for(var s=-1,a=r.length,i=e.length;++s<a;)e[i+s]=r[s];return e}return BE=t,BE}var UE,QR;function Oge(){if(QR)return UE;QR=1;var t=VK(),e=lc();function r(s,a,i){var o=a(s);return e(s)?o:t(o,i(s))}return UE=r,UE}var zE,JR;function Rge(){if(JR)return zE;JR=1;function t(e,r){for(var s=-1,a=e==null?0:e.length,i=0,o=[];++s<a;){var l=e[s];r(l,s,e)&&(o[i++]=l)}return o}return zE=t,zE}var VE,ZR;function Dge(){if(ZR)return VE;ZR=1;function t(){return[]}return VE=t,VE}var qE,eD;function $ge(){if(eD)return qE;eD=1;var t=Rge(),e=Dge(),r=Object.prototype,s=r.propertyIsEnumerable,a=Object.getOwnPropertySymbols,i=a?function(o){return o==null?[]:(o=Object(o),t(a(o),function(l){return s.call(o,l)}))}:e;return qE=i,qE}var HE,tD;function Lge(){if(tD)return HE;tD=1;function t(e,r){for(var s=-1,a=Array(e);++s<e;)a[s]=r(s);return a}return HE=t,HE}var WE,rD;function Fge(){if(rD)return WE;rD=1;var t=Pm(),e=Am(),r="[object Arguments]";function s(a){return e(a)&&t(a)==r}return WE=s,WE}var YE,nD;function j_(){if(nD)return YE;nD=1;var t=Fge(),e=Am(),r=Object.prototype,s=r.hasOwnProperty,a=r.propertyIsEnumerable,i=t((function(){return arguments})())?t:function(o){return e(o)&&s.call(o,"callee")&&!a.call(o,"callee")};return YE=i,YE}var fb={exports:{}},KE,sD;function Bge(){if(sD)return KE;sD=1;function t(){return!1}return KE=t,KE}fb.exports;var aD;function qK(){return aD||(aD=1,(function(t,e){var r=pf(),s=Bge(),a=e&&!e.nodeType&&e,i=a&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===a,l=o?r.Buffer:void 0,d=l?l.isBuffer:void 0,h=d||s;t.exports=h})(fb,fb.exports)),fb.exports}var GE,iD;function S_(){if(iD)return GE;iD=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(s,a){var i=typeof s;return a=a??t,!!a&&(i=="number"||i!="symbol"&&e.test(s))&&s>-1&&s%1==0&&s<a}return GE=r,GE}var XE,oD;function k_(){if(oD)return XE;oD=1;var t=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=t}return XE=e,XE}var QE,lD;function Uge(){if(lD)return QE;lD=1;var t=Pm(),e=k_(),r=Am(),s="[object Arguments]",a="[object Array]",i="[object Boolean]",o="[object Date]",l="[object Error]",d="[object Function]",h="[object Map]",f="[object Number]",m="[object Object]",x="[object RegExp]",b="[object Set]",j="[object String]",N="[object WeakMap]",w="[object ArrayBuffer]",C="[object DataView]",T="[object Float32Array]",O="[object Float64Array]",I="[object Int8Array]",P="[object Int16Array]",A="[object Int32Array]",R="[object Uint8Array]",B="[object Uint8ClampedArray]",V="[object Uint16Array]",X="[object Uint32Array]",ee={};ee[T]=ee[O]=ee[I]=ee[P]=ee[A]=ee[R]=ee[B]=ee[V]=ee[X]=!0,ee[s]=ee[a]=ee[w]=ee[i]=ee[C]=ee[o]=ee[l]=ee[d]=ee[h]=ee[f]=ee[m]=ee[x]=ee[b]=ee[j]=ee[N]=!1;function Y(re){return r(re)&&e(re.length)&&!!ee[t(re)]}return QE=Y,QE}var JE,cD;function HK(){if(cD)return JE;cD=1;function t(e){return function(r){return e(r)}}return JE=t,JE}var mb={exports:{}};mb.exports;var dD;function zge(){return dD||(dD=1,(function(t,e){var r=dK(),s=e&&!e.nodeType&&e,a=s&&!0&&t&&!t.nodeType&&t,i=a&&a.exports===s,o=i&&r.process,l=(function(){try{var d=a&&a.require&&a.require("util").types;return d||o&&o.binding&&o.binding("util")}catch{}})();t.exports=l})(mb,mb.exports)),mb.exports}var ZE,uD;function WK(){if(uD)return ZE;uD=1;var t=Uge(),e=HK(),r=zge(),s=r&&r.isTypedArray,a=s?e(s):t;return ZE=a,ZE}var e4,hD;function Vge(){if(hD)return e4;hD=1;var t=Lge(),e=j_(),r=lc(),s=qK(),a=S_(),i=WK(),o=Object.prototype,l=o.hasOwnProperty;function d(h,f){var m=r(h),x=!m&&e(h),b=!m&&!x&&s(h),j=!m&&!x&&!b&&i(h),N=m||x||b||j,w=N?t(h.length,String):[],C=w.length;for(var T in h)(f||l.call(h,T))&&!(N&&(T=="length"||b&&(T=="offset"||T=="parent")||j&&(T=="buffer"||T=="byteLength"||T=="byteOffset")||a(T,C)))&&w.push(T);return w}return e4=d,e4}var t4,fD;function qge(){if(fD)return t4;fD=1;var t=Object.prototype;function e(r){var s=r&&r.constructor,a=typeof s=="function"&&s.prototype||t;return r===a}return t4=e,t4}var r4,mD;function YK(){if(mD)return r4;mD=1;function t(e,r){return function(s){return e(r(s))}}return r4=t,r4}var n4,pD;function Hge(){if(pD)return n4;pD=1;var t=YK(),e=t(Object.keys,Object);return n4=e,n4}var s4,gD;function Wge(){if(gD)return s4;gD=1;var t=qge(),e=Hge(),r=Object.prototype,s=r.hasOwnProperty;function a(i){if(!t(i))return e(i);var o=[];for(var l in Object(i))s.call(i,l)&&l!="constructor"&&o.push(l);return o}return s4=a,s4}var a4,xD;function m1(){if(xD)return a4;xD=1;var t=c_(),e=k_();function r(s){return s!=null&&e(s.length)&&!t(s)}return a4=r,a4}var i4,yD;function $S(){if(yD)return i4;yD=1;var t=Vge(),e=Wge(),r=m1();function s(a){return r(a)?t(a):e(a)}return i4=s,i4}var o4,vD;function Yge(){if(vD)return o4;vD=1;var t=Oge(),e=$ge(),r=$S();function s(a){return t(a,r,e)}return o4=s,o4}var l4,bD;function Kge(){if(bD)return l4;bD=1;var t=Yge(),e=1,r=Object.prototype,s=r.hasOwnProperty;function a(i,o,l,d,h,f){var m=l&e,x=t(i),b=x.length,j=t(o),N=j.length;if(b!=N&&!m)return!1;for(var w=b;w--;){var C=x[w];if(!(m?C in o:s.call(o,C)))return!1}var T=f.get(i),O=f.get(o);if(T&&O)return T==o&&O==i;var I=!0;f.set(i,o),f.set(o,i);for(var P=m;++w<b;){C=x[w];var A=i[C],R=o[C];if(d)var B=m?d(R,A,C,o,i,f):d(A,R,C,i,o,f);if(!(B===void 0?A===R||h(A,R,l,d,f):B)){I=!1;break}P||(P=C=="constructor")}if(I&&!P){var V=i.constructor,X=o.constructor;V!=X&&"constructor"in i&&"constructor"in o&&!(typeof V=="function"&&V instanceof V&&typeof X=="function"&&X instanceof X)&&(I=!1)}return f.delete(i),f.delete(o),I}return l4=a,l4}var c4,wD;function Gge(){if(wD)return c4;wD=1;var t=B0(),e=pf(),r=t(e,"DataView");return c4=r,c4}var d4,ND;function Xge(){if(ND)return d4;ND=1;var t=B0(),e=pf(),r=t(e,"Promise");return d4=r,d4}var u4,jD;function KK(){if(jD)return u4;jD=1;var t=B0(),e=pf(),r=t(e,"Set");return u4=r,u4}var h4,SD;function Qge(){if(SD)return h4;SD=1;var t=B0(),e=pf(),r=t(e,"WeakMap");return h4=r,h4}var f4,kD;function Jge(){if(kD)return f4;kD=1;var t=Gge(),e=u_(),r=Xge(),s=KK(),a=Qge(),i=Pm(),o=uK(),l="[object Map]",d="[object Object]",h="[object Promise]",f="[object Set]",m="[object WeakMap]",x="[object DataView]",b=o(t),j=o(e),N=o(r),w=o(s),C=o(a),T=i;return(t&&T(new t(new ArrayBuffer(1)))!=x||e&&T(new e)!=l||r&&T(r.resolve())!=h||s&&T(new s)!=f||a&&T(new a)!=m)&&(T=function(O){var I=i(O),P=I==d?O.constructor:void 0,A=P?o(P):"";if(A)switch(A){case b:return x;case j:return l;case N:return h;case w:return f;case C:return m}return I}),f4=T,f4}var m4,CD;function Zge(){if(CD)return m4;CD=1;var t=LK(),e=zK(),r=Mge(),s=Kge(),a=Jge(),i=lc(),o=qK(),l=WK(),d=1,h="[object Arguments]",f="[object Array]",m="[object Object]",x=Object.prototype,b=x.hasOwnProperty;function j(N,w,C,T,O,I){var P=i(N),A=i(w),R=P?f:a(N),B=A?f:a(w);R=R==h?m:R,B=B==h?m:B;var V=R==m,X=B==m,ee=R==B;if(ee&&o(N)){if(!o(w))return!1;P=!0,V=!1}if(ee&&!V)return I||(I=new t),P||l(N)?e(N,w,C,T,O,I):r(N,w,R,C,T,O,I);if(!(C&d)){var Y=V&&b.call(N,"__wrapped__"),re=X&&b.call(w,"__wrapped__");if(Y||re){var le=Y?N.value():N,te=re?w.value():w;return I||(I=new t),O(le,te,C,T,I)}}return ee?(I||(I=new t),s(N,w,C,T,O,I)):!1}return m4=j,m4}var p4,ED;function C_(){if(ED)return p4;ED=1;var t=Zge(),e=Am();function r(s,a,i,o,l){return s===a?!0:s==null||a==null||!e(s)&&!e(a)?s!==s&&a!==a:t(s,a,i,o,r,l)}return p4=r,p4}var g4,TD;function e0e(){if(TD)return g4;TD=1;var t=LK(),e=C_(),r=1,s=2;function a(i,o,l,d){var h=l.length,f=h,m=!d;if(i==null)return!f;for(i=Object(i);h--;){var x=l[h];if(m&&x[2]?x[1]!==i[x[0]]:!(x[0]in i))return!1}for(;++h<f;){x=l[h];var b=x[0],j=i[b],N=x[1];if(m&&x[2]){if(j===void 0&&!(b in i))return!1}else{var w=new t;if(d)var C=d(j,N,b,i,o,w);if(!(C===void 0?e(N,j,r|s,d,w):C))return!1}}return!0}return g4=a,g4}var x4,PD;function GK(){if(PD)return x4;PD=1;var t=tg();function e(r){return r===r&&!t(r)}return x4=e,x4}var y4,AD;function t0e(){if(AD)return y4;AD=1;var t=GK(),e=$S();function r(s){for(var a=e(s),i=a.length;i--;){var o=a[i],l=s[o];a[i]=[o,l,t(l)]}return a}return y4=r,y4}var v4,_D;function XK(){if(_D)return v4;_D=1;function t(e,r){return function(s){return s==null?!1:s[e]===r&&(r!==void 0||e in Object(s))}}return v4=t,v4}var b4,ID;function r0e(){if(ID)return b4;ID=1;var t=e0e(),e=t0e(),r=XK();function s(a){var i=e(a);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(o){return o===a||t(o,a,i)}}return b4=s,b4}var w4,MD;function n0e(){if(MD)return w4;MD=1;function t(e,r){return e!=null&&r in Object(e)}return w4=t,w4}var N4,OD;function s0e(){if(OD)return N4;OD=1;var t=mK(),e=j_(),r=lc(),s=S_(),a=k_(),i=IS();function o(l,d,h){d=t(d,l);for(var f=-1,m=d.length,x=!1;++f<m;){var b=i(d[f]);if(!(x=l!=null&&h(l,b)))break;l=l[b]}return x||++f!=m?x:(m=l==null?0:l.length,!!m&&a(m)&&s(b,m)&&(r(l)||e(l)))}return N4=o,N4}var j4,RD;function a0e(){if(RD)return j4;RD=1;var t=n0e(),e=s0e();function r(s,a){return s!=null&&e(s,a,t)}return j4=r,j4}var S4,DD;function i0e(){if(DD)return S4;DD=1;var t=C_(),e=pK(),r=a0e(),s=l_(),a=GK(),i=XK(),o=IS(),l=1,d=2;function h(f,m){return s(f)&&a(m)?i(o(f),m):function(x){var b=e(x,f);return b===void 0&&b===m?r(x,f):t(m,b,l|d)}}return S4=h,S4}var k4,$D;function bv(){if($D)return k4;$D=1;function t(e){return e}return k4=t,k4}var C4,LD;function o0e(){if(LD)return C4;LD=1;function t(e){return function(r){return r==null?void 0:r[e]}}return C4=t,C4}var E4,FD;function l0e(){if(FD)return E4;FD=1;var t=m_();function e(r){return function(s){return t(s,r)}}return E4=e,E4}var T4,BD;function c0e(){if(BD)return T4;BD=1;var t=o0e(),e=l0e(),r=l_(),s=IS();function a(i){return r(i)?t(s(i)):e(i)}return T4=a,T4}var P4,UD;function rg(){if(UD)return P4;UD=1;var t=r0e(),e=i0e(),r=bv(),s=lc(),a=c0e();function i(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?s(o)?e(o[0],o[1]):t(o):a(o)}return P4=i,P4}var A4,zD;function QK(){if(zD)return A4;zD=1;function t(e,r,s,a){for(var i=e.length,o=s+(a?1:-1);a?o--:++o<i;)if(r(e[o],o,e))return o;return-1}return A4=t,A4}var _4,VD;function d0e(){if(VD)return _4;VD=1;function t(e){return e!==e}return _4=t,_4}var I4,qD;function u0e(){if(qD)return I4;qD=1;function t(e,r,s){for(var a=s-1,i=e.length;++a<i;)if(e[a]===r)return a;return-1}return I4=t,I4}var M4,HD;function h0e(){if(HD)return M4;HD=1;var t=QK(),e=d0e(),r=u0e();function s(a,i,o){return i===i?r(a,i,o):t(a,e,o)}return M4=s,M4}var O4,WD;function f0e(){if(WD)return O4;WD=1;var t=h0e();function e(r,s){var a=r==null?0:r.length;return!!a&&t(r,s,0)>-1}return O4=e,O4}var R4,YD;function m0e(){if(YD)return R4;YD=1;function t(e,r,s){for(var a=-1,i=e==null?0:e.length;++a<i;)if(s(r,e[a]))return!0;return!1}return R4=t,R4}var D4,KD;function p0e(){if(KD)return D4;KD=1;function t(){}return D4=t,D4}var $4,GD;function g0e(){if(GD)return $4;GD=1;var t=KK(),e=p0e(),r=N_(),s=1/0,a=t&&1/r(new t([,-0]))[1]==s?function(i){return new t(i)}:e;return $4=a,$4}var L4,XD;function x0e(){if(XD)return L4;XD=1;var t=FK(),e=f0e(),r=m0e(),s=UK(),a=g0e(),i=N_(),o=200;function l(d,h,f){var m=-1,x=e,b=d.length,j=!0,N=[],w=N;if(f)j=!1,x=r;else if(b>=o){var C=h?null:a(d);if(C)return i(C);j=!1,x=s,w=new t}else w=h?[]:N;e:for(;++m<b;){var T=d[m],O=h?h(T):T;if(T=f||T!==0?T:0,j&&O===O){for(var I=w.length;I--;)if(w[I]===O)continue e;h&&w.push(O),N.push(T)}else x(w,O,f)||(w!==N&&w.push(O),N.push(T))}return N}return L4=l,L4}var F4,QD;function y0e(){if(QD)return F4;QD=1;var t=rg(),e=x0e();function r(s,a){return s&&s.length?e(s,t(a,2)):[]}return F4=r,F4}var v0e=y0e();const JD=Hs(v0e);function JK(t,e,r){return e===!0?JD(t,r):gn(e)?JD(t,e):t}function Ny(t){"@babel/helpers - typeof";return Ny=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ny(t)}var b0e=["ref"];function ZD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function Yf(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ZD(Object(r),!0).forEach(function(s){LS(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ZD(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function w0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e7(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,eG(s.key),s)}}function N0e(t,e,r){return e&&e7(t.prototype,e),r&&e7(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function j0e(t,e,r){return e=_j(e),S0e(t,ZK()?Reflect.construct(e,r||[],_j(t).constructor):e.apply(t,r))}function S0e(t,e){if(e&&(Ny(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return k0e(t)}function k0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZK=function(){return!!t})()}function _j(t){return _j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_j(t)}function C0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FP(t,e)}function FP(t,e){return FP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},FP(t,e)}function LS(t,e,r){return e=eG(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eG(t){var e=E0e(t,"string");return Ny(e)=="symbol"?e:e+""}function E0e(t,e){if(Ny(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Ny(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function T0e(t,e){if(t==null)return{};var r=P0e(t,e),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function P0e(t,e){if(t==null)return{};var r={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;r[s]=t[s]}return r}function A0e(t){return t.value}function _0e(t,e){if($e.isValidElement(t))return $e.cloneElement(t,e);if(typeof t=="function")return $e.createElement(t,e);e.ref;var r=T0e(e,b0e);return $e.createElement(w_,r)}var t7=1,Yx=(function(t){function e(){var r;w0e(this,e);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=j0e(this,e,[].concat(a)),LS(r,"lastBoundingBox",{width:-1,height:-1}),r}return C0e(e,t),N0e(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();return s.height=this.wrapperNode.offsetHeight,s.width=this.wrapperNode.offsetWidth,s}return null}},{key:"updateBBox",value:function(){var s=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>t7||Math.abs(a.height-this.lastBoundingBox.height)>t7)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,s&&s(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,s&&s(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Yf({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(s){var a=this.props,i=a.layout,o=a.align,l=a.verticalAlign,d=a.margin,h=a.chartWidth,f=a.chartHeight,m,x;if(!s||(s.left===void 0||s.left===null)&&(s.right===void 0||s.right===null))if(o==="center"&&i==="vertical"){var b=this.getBBoxSnapshot();m={left:((h||0)-b.width)/2}}else m=o==="right"?{right:d&&d.right||0}:{left:d&&d.left||0};if(!s||(s.top===void 0||s.top===null)&&(s.bottom===void 0||s.bottom===null))if(l==="middle"){var j=this.getBBoxSnapshot();x={top:((f||0)-j.height)/2}}else x=l==="bottom"?{bottom:d&&d.bottom||0}:{top:d&&d.top||0};return Yf(Yf({},m),x)}},{key:"render",value:function(){var s=this,a=this.props,i=a.content,o=a.width,l=a.height,d=a.wrapperStyle,h=a.payloadUniqBy,f=a.payload,m=Yf(Yf({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(d)),d);return $e.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:function(b){s.wrapperNode=b}},_0e(i,Yf(Yf({},this.props),{},{payload:JK(f,h,A0e)})))}}],[{key:"getWithHeight",value:function(s,a){var i=Yf(Yf({},this.defaultProps),s.props),o=i.layout;return o==="vertical"&&Rt(s.props.height)?{height:s.props.height}:o==="horizontal"?{width:s.props.width||a}:null}}])})(g.PureComponent);LS(Yx,"displayName","Legend");LS(Yx,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var B4,r7;function I0e(){if(r7)return B4;r7=1;var t=f1(),e=j_(),r=lc(),s=t?t.isConcatSpreadable:void 0;function a(i){return r(i)||e(i)||!!(s&&i&&i[s])}return B4=a,B4}var U4,n7;function tG(){if(n7)return U4;n7=1;var t=VK(),e=I0e();function r(s,a,i,o,l){var d=-1,h=s.length;for(i||(i=e),l||(l=[]);++d<h;){var f=s[d];a>0&&i(f)?a>1?r(f,a-1,i,o,l):t(l,f):o||(l[l.length]=f)}return l}return U4=r,U4}var z4,s7;function M0e(){if(s7)return z4;s7=1;function t(e){return function(r,s,a){for(var i=-1,o=Object(r),l=a(r),d=l.length;d--;){var h=l[e?d:++i];if(s(o[h],h,o)===!1)break}return r}}return z4=t,z4}var V4,a7;function O0e(){if(a7)return V4;a7=1;var t=M0e(),e=t();return V4=e,V4}var q4,i7;function rG(){if(i7)return q4;i7=1;var t=O0e(),e=$S();function r(s,a){return s&&t(s,a,e)}return q4=r,q4}var H4,o7;function R0e(){if(o7)return H4;o7=1;var t=m1();function e(r,s){return function(a,i){if(a==null)return a;if(!t(a))return r(a,i);for(var o=a.length,l=s?o:-1,d=Object(a);(s?l--:++l<o)&&i(d[l],l,d)!==!1;);return a}}return H4=e,H4}var W4,l7;function E_(){if(l7)return W4;l7=1;var t=rG(),e=R0e(),r=e(t);return W4=r,W4}var Y4,c7;function nG(){if(c7)return Y4;c7=1;var t=E_(),e=m1();function r(s,a){var i=-1,o=e(s)?Array(s.length):[];return t(s,function(l,d,h){o[++i]=a(l,d,h)}),o}return Y4=r,Y4}var K4,d7;function D0e(){if(d7)return K4;d7=1;function t(e,r){var s=e.length;for(e.sort(r);s--;)e[s]=e[s].value;return e}return K4=t,K4}var G4,u7;function $0e(){if(u7)return G4;u7=1;var t=gv();function e(r,s){if(r!==s){var a=r!==void 0,i=r===null,o=r===r,l=t(r),d=s!==void 0,h=s===null,f=s===s,m=t(s);if(!h&&!m&&!l&&r>s||l&&d&&f&&!h&&!m||i&&d&&f||!a&&f||!o)return 1;if(!i&&!l&&!m&&r<s||m&&a&&o&&!i&&!l||h&&a&&o||!d&&o||!f)return-1}return 0}return G4=e,G4}var X4,h7;function L0e(){if(h7)return X4;h7=1;var t=$0e();function e(r,s,a){for(var i=-1,o=r.criteria,l=s.criteria,d=o.length,h=a.length;++i<d;){var f=t(o[i],l[i]);if(f){if(i>=h)return f;var m=a[i];return f*(m=="desc"?-1:1)}}return r.index-s.index}return X4=e,X4}var Q4,f7;function F0e(){if(f7)return Q4;f7=1;var t=f_(),e=m_(),r=rg(),s=nG(),a=D0e(),i=HK(),o=L0e(),l=bv(),d=lc();function h(f,m,x){m.length?m=t(m,function(N){return d(N)?function(w){return e(w,N.length===1?N[0]:N)}:N}):m=[l];var b=-1;m=t(m,i(r));var j=s(f,function(N,w,C){var T=t(m,function(O){return O(N)});return{criteria:T,index:++b,value:N}});return a(j,function(N,w){return o(N,w,x)})}return Q4=h,Q4}var J4,m7;function B0e(){if(m7)return J4;m7=1;function t(e,r,s){switch(s.length){case 0:return e.call(r);case 1:return e.call(r,s[0]);case 2:return e.call(r,s[0],s[1]);case 3:return e.call(r,s[0],s[1],s[2])}return e.apply(r,s)}return J4=t,J4}var Z4,p7;function U0e(){if(p7)return Z4;p7=1;var t=B0e(),e=Math.max;function r(s,a,i){return a=e(a===void 0?s.length-1:a,0),function(){for(var o=arguments,l=-1,d=e(o.length-a,0),h=Array(d);++l<d;)h[l]=o[a+l];l=-1;for(var f=Array(a+1);++l<a;)f[l]=o[l];return f[a]=i(h),t(s,this,f)}}return Z4=r,Z4}var eT,g7;function z0e(){if(g7)return eT;g7=1;function t(e){return function(){return e}}return eT=t,eT}var tT,x7;function sG(){if(x7)return tT;x7=1;var t=B0(),e=(function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}})();return tT=e,tT}var rT,y7;function V0e(){if(y7)return rT;y7=1;var t=z0e(),e=sG(),r=bv(),s=e?function(a,i){return e(a,"toString",{configurable:!0,enumerable:!1,value:t(i),writable:!0})}:r;return rT=s,rT}var nT,v7;function q0e(){if(v7)return nT;v7=1;var t=800,e=16,r=Date.now;function s(a){var i=0,o=0;return function(){var l=r(),d=e-(l-o);if(o=l,d>0){if(++i>=t)return arguments[0]}else i=0;return a.apply(void 0,arguments)}}return nT=s,nT}var sT,b7;function H0e(){if(b7)return sT;b7=1;var t=V0e(),e=q0e(),r=e(t);return sT=r,sT}var aT,w7;function W0e(){if(w7)return aT;w7=1;var t=bv(),e=U0e(),r=H0e();function s(a,i){return r(e(a,i,t),a+"")}return aT=s,aT}var iT,N7;function FS(){if(N7)return iT;N7=1;var t=d_(),e=m1(),r=S_(),s=tg();function a(i,o,l){if(!s(l))return!1;var d=typeof o;return(d=="number"?e(l)&&r(o,l.length):d=="string"&&o in l)?t(l[o],i):!1}return iT=a,iT}var oT,j7;function Y0e(){if(j7)return oT;j7=1;var t=tG(),e=F0e(),r=W0e(),s=FS(),a=r(function(i,o){if(i==null)return[];var l=o.length;return l>1&&s(i,o[0],o[1])?o=[]:l>2&&s(o[0],o[1],o[2])&&(o=[o[0]]),e(i,t(o,1),[])});return oT=a,oT}var K0e=Y0e();const T_=Hs(K0e);function Kb(t){"@babel/helpers - typeof";return Kb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kb(t)}function BP(){return BP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},BP.apply(this,arguments)}function G0e(t,e){return Z0e(t)||J0e(t,e)||Q0e(t,e)||X0e()}function X0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q0e(t,e){if(t){if(typeof t=="string")return S7(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S7(t,e)}}function S7(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function J0e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s,a,i,o,l=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(s=i.call(r)).done)&&(l.push(s.value),l.length!==e);d=!0);}catch(f){h=!0,a=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return l}}function Z0e(t){if(Array.isArray(t))return t}function k7(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function lT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?k7(Object(r),!0).forEach(function(s){exe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):k7(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function exe(t,e,r){return e=txe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function txe(t){var e=rxe(t,"string");return Kb(e)=="symbol"?e:e+""}function rxe(t,e){if(Kb(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Kb(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nxe(t){return Array.isArray(t)&&Ni(t[0])&&Ni(t[1])?t.join(" ~ "):t}var sxe=function(e){var r=e.separator,s=r===void 0?" : ":r,a=e.contentStyle,i=a===void 0?{}:a,o=e.itemStyle,l=o===void 0?{}:o,d=e.labelStyle,h=d===void 0?{}:d,f=e.payload,m=e.formatter,x=e.itemSorter,b=e.wrapperClassName,j=e.labelClassName,N=e.label,w=e.labelFormatter,C=e.accessibilityLayer,T=C===void 0?!1:C,O=function(){if(f&&f.length){var Y={padding:0,margin:0},re=(x?T_(f,x):f).map(function(le,te){if(le.type==="none")return null;var de=lT({display:"block",paddingTop:4,paddingBottom:4,color:le.color||"#000"},l),ie=le.formatter||m||nxe,Z=le.value,ne=le.name,oe=Z,U=ne;if(ie&&oe!=null&&U!=null){var W=ie(Z,ne,le,te,f);if(Array.isArray(W)){var be=G0e(W,2);oe=be[0],U=be[1]}else oe=W}return $e.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(te),style:de},Ni(U)?$e.createElement("span",{className:"recharts-tooltip-item-name"},U):null,Ni(U)?$e.createElement("span",{className:"recharts-tooltip-item-separator"},s):null,$e.createElement("span",{className:"recharts-tooltip-item-value"},oe),$e.createElement("span",{className:"recharts-tooltip-item-unit"},le.unit||""))});return $e.createElement("ul",{className:"recharts-tooltip-item-list",style:Y},re)}return null},I=lT({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),P=lT({margin:0},h),A=!yn(N),R=A?N:"",B=jn("recharts-default-tooltip",b),V=jn("recharts-tooltip-label",j);A&&w&&f!==void 0&&f!==null&&(R=w(N,f));var X=T?{role:"status","aria-live":"assertive"}:{};return $e.createElement("div",BP({className:B,style:I},X),$e.createElement("p",{className:V,style:P},$e.isValidElement(R)?R:"".concat(R)),O())};function Gb(t){"@babel/helpers - typeof";return Gb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gb(t)}function vN(t,e,r){return e=axe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function axe(t){var e=ixe(t,"string");return Gb(e)=="symbol"?e:e+""}function ixe(t,e){if(Gb(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Gb(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qv="recharts-tooltip-wrapper",oxe={visibility:"hidden"};function lxe(t){var e=t.coordinate,r=t.translateX,s=t.translateY;return jn(qv,vN(vN(vN(vN({},"".concat(qv,"-right"),Rt(r)&&e&&Rt(e.x)&&r>=e.x),"".concat(qv,"-left"),Rt(r)&&e&&Rt(e.x)&&r<e.x),"".concat(qv,"-bottom"),Rt(s)&&e&&Rt(e.y)&&s>=e.y),"".concat(qv,"-top"),Rt(s)&&e&&Rt(e.y)&&s<e.y))}function C7(t){var e=t.allowEscapeViewBox,r=t.coordinate,s=t.key,a=t.offsetTopLeft,i=t.position,o=t.reverseDirection,l=t.tooltipDimension,d=t.viewBox,h=t.viewBoxDimension;if(i&&Rt(i[s]))return i[s];var f=r[s]-l-a,m=r[s]+a;if(e[s])return o[s]?f:m;if(o[s]){var x=f,b=d[s];return x<b?Math.max(m,d[s]):Math.max(f,d[s])}var j=m+l,N=d[s]+h;return j>N?Math.max(f,d[s]):Math.max(m,d[s])}function cxe(t){var e=t.translateX,r=t.translateY,s=t.useTranslate3d;return{transform:s?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function dxe(t){var e=t.allowEscapeViewBox,r=t.coordinate,s=t.offsetTopLeft,a=t.position,i=t.reverseDirection,o=t.tooltipBox,l=t.useTranslate3d,d=t.viewBox,h,f,m;return o.height>0&&o.width>0&&r?(f=C7({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:s,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:d,viewBoxDimension:d.width}),m=C7({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:s,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:d,viewBoxDimension:d.height}),h=cxe({translateX:f,translateY:m,useTranslate3d:l})):h=oxe,{cssProperties:h,cssClasses:lxe({translateX:f,translateY:m,coordinate:r})}}function jy(t){"@babel/helpers - typeof";return jy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jy(t)}function E7(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function T7(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?E7(Object(r),!0).forEach(function(s){zP(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):E7(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function uxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hxe(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,iG(s.key),s)}}function fxe(t,e,r){return e&&hxe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function mxe(t,e,r){return e=Ij(e),pxe(t,aG()?Reflect.construct(e,r||[],Ij(t).constructor):e.apply(t,r))}function pxe(t,e){if(e&&(jy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gxe(t)}function gxe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aG=function(){return!!t})()}function Ij(t){return Ij=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ij(t)}function xxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UP(t,e)}function UP(t,e){return UP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},UP(t,e)}function zP(t,e,r){return e=iG(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function iG(t){var e=yxe(t,"string");return jy(e)=="symbol"?e:e+""}function yxe(t,e){if(jy(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(jy(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var P7=1,vxe=(function(t){function e(){var r;uxe(this,e);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=mxe(this,e,[].concat(a)),zP(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),zP(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,d,h,f;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(d=r.props.coordinate)===null||d===void 0?void 0:d.x)!==null&&l!==void 0?l:0,y:(h=(f=r.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&h!==void 0?h:0}})}}),r}return xxe(e,t),fxe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();(Math.abs(s.width-this.state.lastBoundingBox.width)>P7||Math.abs(s.height-this.state.lastBoundingBox.height)>P7)&&this.setState({lastBoundingBox:{width:s.width,height:s.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var s,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var s=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,d=a.animationEasing,h=a.children,f=a.coordinate,m=a.hasPayload,x=a.isAnimationActive,b=a.offset,j=a.position,N=a.reverseDirection,w=a.useTranslate3d,C=a.viewBox,T=a.wrapperStyle,O=dxe({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:b,position:j,reverseDirection:N,tooltipBox:this.state.lastBoundingBox,useTranslate3d:w,viewBox:C}),I=O.cssClasses,P=O.cssProperties,A=T7(T7({transition:x&&i?"transform ".concat(l,"ms ").concat(d):void 0},P),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&m?"visible":"hidden",position:"absolute",top:0,left:0},T);return $e.createElement("div",{tabIndex:-1,className:I,style:A,ref:function(B){s.wrapperNode=B}},h)}}])})(g.PureComponent),bxe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},U0={isSsr:bxe()};function Sy(t){"@babel/helpers - typeof";return Sy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sy(t)}function A7(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function _7(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?A7(Object(r),!0).forEach(function(s){P_(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):A7(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function wxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nxe(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,lG(s.key),s)}}function jxe(t,e,r){return e&&Nxe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Sxe(t,e,r){return e=Mj(e),kxe(t,oG()?Reflect.construct(e,r||[],Mj(t).constructor):e.apply(t,r))}function kxe(t,e){if(e&&(Sy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cxe(t)}function Cxe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oG=function(){return!!t})()}function Mj(t){return Mj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Mj(t)}function Exe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VP(t,e)}function VP(t,e){return VP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},VP(t,e)}function P_(t,e,r){return e=lG(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lG(t){var e=Txe(t,"string");return Sy(e)=="symbol"?e:e+""}function Txe(t,e){if(Sy(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Sy(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Pxe(t){return t.dataKey}function Axe(t,e){return $e.isValidElement(t)?$e.cloneElement(t,e):typeof t=="function"?$e.createElement(t,e):$e.createElement(sxe,e)}var zs=(function(t){function e(){return wxe(this,e),Sxe(this,e,arguments)}return Exe(e,t),jxe(e,[{key:"render",value:function(){var s=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,d=a.animationEasing,h=a.content,f=a.coordinate,m=a.filterNull,x=a.isAnimationActive,b=a.offset,j=a.payload,N=a.payloadUniqBy,w=a.position,C=a.reverseDirection,T=a.useTranslate3d,O=a.viewBox,I=a.wrapperStyle,P=j??[];m&&P.length&&(P=JK(j.filter(function(R){return R.value!=null&&(R.hide!==!0||s.props.includeHidden)}),N,Pxe));var A=P.length>0;return $e.createElement(vxe,{allowEscapeViewBox:o,animationDuration:l,animationEasing:d,isAnimationActive:x,active:i,coordinate:f,hasPayload:A,offset:b,position:w,reverseDirection:C,useTranslate3d:T,viewBox:O,wrapperStyle:I},Axe(h,_7(_7({},this.props),{},{payload:P})))}}])})(g.PureComponent);P_(zs,"displayName","Tooltip");P_(zs,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!U0.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var cT,I7;function _xe(){if(I7)return cT;I7=1;var t=pf(),e=function(){return t.Date.now()};return cT=e,cT}var dT,M7;function Ixe(){if(M7)return dT;M7=1;var t=/\s/;function e(r){for(var s=r.length;s--&&t.test(r.charAt(s)););return s}return dT=e,dT}var uT,O7;function Mxe(){if(O7)return uT;O7=1;var t=Ixe(),e=/^\s+/;function r(s){return s&&s.slice(0,t(s)+1).replace(e,"")}return uT=r,uT}var hT,R7;function cG(){if(R7)return hT;R7=1;var t=Mxe(),e=tg(),r=gv(),s=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function d(h){if(typeof h=="number")return h;if(r(h))return s;if(e(h)){var f=typeof h.valueOf=="function"?h.valueOf():h;h=e(f)?f+"":f}if(typeof h!="string")return h===0?h:+h;h=t(h);var m=i.test(h);return m||o.test(h)?l(h.slice(2),m?2:8):a.test(h)?s:+h}return hT=d,hT}var fT,D7;function Oxe(){if(D7)return fT;D7=1;var t=tg(),e=_xe(),r=cG(),s="Expected a function",a=Math.max,i=Math.min;function o(l,d,h){var f,m,x,b,j,N,w=0,C=!1,T=!1,O=!0;if(typeof l!="function")throw new TypeError(s);d=r(d)||0,t(h)&&(C=!!h.leading,T="maxWait"in h,x=T?a(r(h.maxWait)||0,d):x,O="trailing"in h?!!h.trailing:O);function I(re){var le=f,te=m;return f=m=void 0,w=re,b=l.apply(te,le),b}function P(re){return w=re,j=setTimeout(B,d),C?I(re):b}function A(re){var le=re-N,te=re-w,de=d-le;return T?i(de,x-te):de}function R(re){var le=re-N,te=re-w;return N===void 0||le>=d||le<0||T&&te>=x}function B(){var re=e();if(R(re))return V(re);j=setTimeout(B,A(re))}function V(re){return j=void 0,O&&f?I(re):(f=m=void 0,b)}function X(){j!==void 0&&clearTimeout(j),w=0,f=N=m=j=void 0}function ee(){return j===void 0?b:V(e())}function Y(){var re=e(),le=R(re);if(f=arguments,m=this,N=re,le){if(j===void 0)return P(N);if(T)return clearTimeout(j),j=setTimeout(B,d),I(N)}return j===void 0&&(j=setTimeout(B,d)),b}return Y.cancel=X,Y.flush=ee,Y}return fT=o,fT}var mT,$7;function Rxe(){if($7)return mT;$7=1;var t=Oxe(),e=tg(),r="Expected a function";function s(a,i,o){var l=!0,d=!0;if(typeof a!="function")throw new TypeError(r);return e(o)&&(l="leading"in o?!!o.leading:l,d="trailing"in o?!!o.trailing:d),t(a,i,{leading:l,maxWait:i,trailing:d})}return mT=s,mT}var Dxe=Rxe();const dG=Hs(Dxe);function Xb(t){"@babel/helpers - typeof";return Xb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xb(t)}function L7(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function bN(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?L7(Object(r),!0).forEach(function(s){$xe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):L7(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function $xe(t,e,r){return e=Lxe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Lxe(t){var e=Fxe(t,"string");return Xb(e)=="symbol"?e:e+""}function Fxe(t,e){if(Xb(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Xb(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Bxe(t,e){return qxe(t)||Vxe(t,e)||zxe(t,e)||Uxe()}function Uxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zxe(t,e){if(t){if(typeof t=="string")return F7(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F7(t,e)}}function F7(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function Vxe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s,a,i,o,l=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(s=i.call(r)).done)&&(l.push(s.value),l.length!==e);d=!0);}catch(f){h=!0,a=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return l}}function qxe(t){if(Array.isArray(t))return t}var yi=g.forwardRef(function(t,e){var r=t.aspect,s=t.initialDimension,a=s===void 0?{width:-1,height:-1}:s,i=t.width,o=i===void 0?"100%":i,l=t.height,d=l===void 0?"100%":l,h=t.minWidth,f=h===void 0?0:h,m=t.minHeight,x=t.maxHeight,b=t.children,j=t.debounce,N=j===void 0?0:j,w=t.id,C=t.className,T=t.onResize,O=t.style,I=O===void 0?{}:O,P=g.useRef(null),A=g.useRef();A.current=T,g.useImperativeHandle(e,function(){return Object.defineProperty(P.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),P.current},configurable:!0})});var R=g.useState({containerWidth:a.width,containerHeight:a.height}),B=Bxe(R,2),V=B[0],X=B[1],ee=g.useCallback(function(re,le){X(function(te){var de=Math.round(re),ie=Math.round(le);return te.containerWidth===de&&te.containerHeight===ie?te:{containerWidth:de,containerHeight:ie}})},[]);g.useEffect(function(){var re=function(ne){var oe,U=ne[0].contentRect,W=U.width,be=U.height;ee(W,be),(oe=A.current)===null||oe===void 0||oe.call(A,W,be)};N>0&&(re=dG(re,N,{trailing:!0,leading:!1}));var le=new ResizeObserver(re),te=P.current.getBoundingClientRect(),de=te.width,ie=te.height;return ee(de,ie),le.observe(P.current),function(){le.disconnect()}},[ee,N]);var Y=g.useMemo(function(){var re=V.containerWidth,le=V.containerHeight;if(re<0||le<0)return null;c0(Wg(o)||Wg(d),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,d),c0(!r||r>0,"The aspect(%s) must be greater than zero.",r);var te=Wg(o)?re:o,de=Wg(d)?le:d;r&&r>0&&(te?de=te/r:de&&(te=de*r),x&&de>x&&(de=x)),c0(te>0||de>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,te,de,o,d,f,m,r);var ie=!Array.isArray(b)&&mm(b.type).endsWith("Chart");return $e.Children.map(b,function(Z){return $e.isValidElement(Z)?g.cloneElement(Z,bN({width:te,height:de},ie?{style:bN({height:"100%",width:"100%",maxHeight:de,maxWidth:te},Z.props.style)}:{})):Z})},[r,b,d,x,m,f,V,o]);return $e.createElement("div",{id:w?"".concat(w):void 0,className:jn("recharts-responsive-container",C),style:bN(bN({},I),{},{width:o,height:d,minWidth:f,minHeight:m,maxHeight:x}),ref:P},Y)}),uG=function(e){return null};uG.displayName="Cell";function Qb(t){"@babel/helpers - typeof";return Qb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qb(t)}function B7(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function qP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?B7(Object(r),!0).forEach(function(s){Hxe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):B7(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Hxe(t,e,r){return e=Wxe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Wxe(t){var e=Yxe(t,"string");return Qb(e)=="symbol"?e:e+""}function Yxe(t,e){if(Qb(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Qb(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Nx={widthCache:{},cacheCount:0},Kxe=2e3,Gxe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},U7="recharts_measurement_span";function Xxe(t){var e=qP({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var Sb=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||U0.isSsr)return{width:0,height:0};var s=Xxe(r),a=JSON.stringify({text:e,copyStyle:s});if(Nx.widthCache[a])return Nx.widthCache[a];try{var i=document.getElementById(U7);i||(i=document.createElement("span"),i.setAttribute("id",U7),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=qP(qP({},Gxe),s);Object.assign(i.style,o),i.textContent="".concat(e);var l=i.getBoundingClientRect(),d={width:l.width,height:l.height};return Nx.widthCache[a]=d,++Nx.cacheCount>Kxe&&(Nx.cacheCount=0,Nx.widthCache={}),d}catch{return{width:0,height:0}}},Qxe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Jb(t){"@babel/helpers - typeof";return Jb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jb(t)}function Oj(t,e){return tye(t)||eye(t,e)||Zxe(t,e)||Jxe()}function Jxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zxe(t,e){if(t){if(typeof t=="string")return z7(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z7(t,e)}}function z7(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function eye(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s,a,i,o,l=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(s=i.call(r)).done)&&(l.push(s.value),l.length!==e);d=!0);}catch(f){h=!0,a=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return l}}function tye(t){if(Array.isArray(t))return t}function rye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function V7(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,sye(s.key),s)}}function nye(t,e,r){return e&&V7(t.prototype,e),r&&V7(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function sye(t){var e=aye(t,"string");return Jb(e)=="symbol"?e:e+""}function aye(t,e){if(Jb(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Jb(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var q7=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,H7=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,iye=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,oye=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,hG={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},lye=Object.keys(hG),$x="NaN";function cye(t,e){return t*hG[e]}var wN=(function(){function t(e,r){rye(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!iye.test(r)&&(this.num=NaN,this.unit=""),lye.includes(r)&&(this.num=cye(e,r),this.unit="px")}return nye(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var s,a=(s=oye.exec(r))!==null&&s!==void 0?s:[],i=Oj(a,3),o=i[1],l=i[2];return new t(parseFloat(o),l??"")}}])})();function fG(t){if(t.includes($x))return $x;for(var e=t;e.includes("*")||e.includes("/");){var r,s=(r=q7.exec(e))!==null&&r!==void 0?r:[],a=Oj(s,4),i=a[1],o=a[2],l=a[3],d=wN.parse(i??""),h=wN.parse(l??""),f=o==="*"?d.multiply(h):d.divide(h);if(f.isNaN())return $x;e=e.replace(q7,f.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var m,x=(m=H7.exec(e))!==null&&m!==void 0?m:[],b=Oj(x,4),j=b[1],N=b[2],w=b[3],C=wN.parse(j??""),T=wN.parse(w??""),O=N==="+"?C.add(T):C.subtract(T);if(O.isNaN())return $x;e=e.replace(H7,O.toString())}return e}var W7=/\(([^()]*)\)/;function dye(t){for(var e=t;e.includes("(");){var r=W7.exec(e),s=Oj(r,2),a=s[1];e=e.replace(W7,fG(a))}return e}function uye(t){var e=t.replace(/\s+/g,"");return e=dye(e),e=fG(e),e}function hye(t){try{return uye(t)}catch{return $x}}function pT(t){var e=hye(t.slice(5,-1));return e===$x?"":e}var fye=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],mye=["dx","dy","angle","className","breakAll"];function HP(){return HP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},HP.apply(this,arguments)}function Y7(t,e){if(t==null)return{};var r=pye(t,e),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function pye(t,e){if(t==null)return{};var r={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;r[s]=t[s]}return r}function K7(t,e){return vye(t)||yye(t,e)||xye(t,e)||gye()}function gye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xye(t,e){if(t){if(typeof t=="string")return G7(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G7(t,e)}}function G7(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function yye(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s,a,i,o,l=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(s=i.call(r)).done)&&(l.push(s.value),l.length!==e);d=!0);}catch(f){h=!0,a=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return l}}function vye(t){if(Array.isArray(t))return t}var mG=/[ \f\n\r\t\v\u2028\u2029]+/,pG=function(e){var r=e.children,s=e.breakAll,a=e.style;try{var i=[];yn(r)||(s?i=r.toString().split(""):i=r.toString().split(mG));var o=i.map(function(d){return{word:d,width:Sb(d,a).width}}),l=s?0:Sb("",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},bye=function(e,r,s,a,i){var o=e.maxLines,l=e.children,d=e.style,h=e.breakAll,f=Rt(o),m=l,x=function(){var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return te.reduce(function(de,ie){var Z=ie.word,ne=ie.width,oe=de[de.length-1];if(oe&&(a==null||i||oe.width+ne+s<Number(a)))oe.words.push(Z),oe.width+=ne+s;else{var U={words:[Z],width:ne};de.push(U)}return de},[])},b=x(r),j=function(te){return te.reduce(function(de,ie){return de.width>ie.width?de:ie})};if(!f)return b;for(var N="",w=function(te){var de=m.slice(0,te),ie=pG({breakAll:h,style:d,children:de+N}).wordsWithComputedWidth,Z=x(ie),ne=Z.length>o||j(Z).width>Number(a);return[ne,Z]},C=0,T=m.length-1,O=0,I;C<=T&&O<=m.length-1;){var P=Math.floor((C+T)/2),A=P-1,R=w(A),B=K7(R,2),V=B[0],X=B[1],ee=w(P),Y=K7(ee,1),re=Y[0];if(!V&&!re&&(C=P+1),V&&re&&(T=P-1),!V&&re){I=X;break}O++}return I||b},X7=function(e){var r=yn(e)?[]:e.toString().split(mG);return[{words:r}]},wye=function(e){var r=e.width,s=e.scaleToFit,a=e.children,i=e.style,o=e.breakAll,l=e.maxLines;if((r||s)&&!U0.isSsr){var d,h,f=pG({breakAll:o,children:a,style:i});if(f){var m=f.wordsWithComputedWidth,x=f.spaceWidth;d=m,h=x}else return X7(a);return bye({breakAll:o,children:a,maxLines:l,style:i},d,h,r,s)}return X7(a)},Q7="#808080",Rj=function(e){var r=e.x,s=r===void 0?0:r,a=e.y,i=a===void 0?0:a,o=e.lineHeight,l=o===void 0?"1em":o,d=e.capHeight,h=d===void 0?"0.71em":d,f=e.scaleToFit,m=f===void 0?!1:f,x=e.textAnchor,b=x===void 0?"start":x,j=e.verticalAnchor,N=j===void 0?"end":j,w=e.fill,C=w===void 0?Q7:w,T=Y7(e,fye),O=g.useMemo(function(){return wye({breakAll:T.breakAll,children:T.children,maxLines:T.maxLines,scaleToFit:m,style:T.style,width:T.width})},[T.breakAll,T.children,T.maxLines,m,T.style,T.width]),I=T.dx,P=T.dy,A=T.angle,R=T.className,B=T.breakAll,V=Y7(T,mye);if(!Ni(s)||!Ni(i))return null;var X=s+(Rt(I)?I:0),ee=i+(Rt(P)?P:0),Y;switch(N){case"start":Y=pT("calc(".concat(h,")"));break;case"middle":Y=pT("calc(".concat((O.length-1)/2," * -").concat(l," + (").concat(h," / 2))"));break;default:Y=pT("calc(".concat(O.length-1," * -").concat(l,")"));break}var re=[];if(m){var le=O[0].width,te=T.width;re.push("scale(".concat((Rt(te)?te/le:1)/le,")"))}return A&&re.push("rotate(".concat(A,", ").concat(X,", ").concat(ee,")")),re.length&&(V.transform=re.join(" ")),$e.createElement("text",HP({},hn(V,!0),{x:X,y:ee,className:jn("recharts-text",R),textAnchor:b,fill:C.includes("url")?Q7:C}),O.map(function(de,ie){var Z=de.words.join(B?"":" ");return $e.createElement("tspan",{x:X,dy:ie===0?Y:l,key:"".concat(Z,"-").concat(ie)},Z)}))};function Fp(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Nye(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function A_(t){let e,r,s;t.length!==2?(e=Fp,r=(l,d)=>Fp(t(l),d),s=(l,d)=>t(l)-d):(e=t===Fp||t===Nye?t:jye,r=t,s=t);function a(l,d,h=0,f=l.length){if(h<f){if(e(d,d)!==0)return f;do{const m=h+f>>>1;r(l[m],d)<0?h=m+1:f=m}while(h<f)}return h}function i(l,d,h=0,f=l.length){if(h<f){if(e(d,d)!==0)return f;do{const m=h+f>>>1;r(l[m],d)<=0?h=m+1:f=m}while(h<f)}return h}function o(l,d,h=0,f=l.length){const m=a(l,d,h,f-1);return m>h&&s(l[m-1],d)>-s(l[m],d)?m-1:m}return{left:a,center:o,right:i}}function jye(){return 0}function gG(t){return t===null?NaN:+t}function*Sye(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const kye=A_(Fp),p1=kye.right;A_(gG).center;class J7 extends Map{constructor(e,r=Tye){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[s,a]of e)this.set(s,a)}get(e){return super.get(Z7(this,e))}has(e){return super.has(Z7(this,e))}set(e,r){return super.set(Cye(this,e),r)}delete(e){return super.delete(Eye(this,e))}}function Z7({_intern:t,_key:e},r){const s=e(r);return t.has(s)?t.get(s):r}function Cye({_intern:t,_key:e},r){const s=e(r);return t.has(s)?t.get(s):(t.set(s,r),r)}function Eye({_intern:t,_key:e},r){const s=e(r);return t.has(s)&&(r=t.get(s),t.delete(s)),r}function Tye(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Pye(t=Fp){if(t===Fp)return xG;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const s=t(e,r);return s||s===0?s:(t(r,r)===0)-(t(e,e)===0)}}function xG(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Aye=Math.sqrt(50),_ye=Math.sqrt(10),Iye=Math.sqrt(2);function Dj(t,e,r){const s=(e-t)/Math.max(0,r),a=Math.floor(Math.log10(s)),i=s/Math.pow(10,a),o=i>=Aye?10:i>=_ye?5:i>=Iye?2:1;let l,d,h;return a<0?(h=Math.pow(10,-a)/o,l=Math.round(t*h),d=Math.round(e*h),l/h<t&&++l,d/h>e&&--d,h=-h):(h=Math.pow(10,a)*o,l=Math.round(t/h),d=Math.round(e/h),l*h<t&&++l,d*h>e&&--d),d<l&&.5<=r&&r<2?Dj(t,e,r*2):[l,d,h]}function WP(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const s=e<t,[a,i,o]=s?Dj(e,t,r):Dj(t,e,r);if(!(i>=a))return[];const l=i-a+1,d=new Array(l);if(s)if(o<0)for(let h=0;h<l;++h)d[h]=(i-h)/-o;else for(let h=0;h<l;++h)d[h]=(i-h)*o;else if(o<0)for(let h=0;h<l;++h)d[h]=(a+h)/-o;else for(let h=0;h<l;++h)d[h]=(a+h)*o;return d}function YP(t,e,r){return e=+e,t=+t,r=+r,Dj(t,e,r)[2]}function KP(t,e,r){e=+e,t=+t,r=+r;const s=e<t,a=s?YP(e,t,r):YP(t,e,r);return(s?-1:1)*(a<0?1/-a:a)}function e8(t,e){let r;for(const s of t)s!=null&&(r<s||r===void 0&&s>=s)&&(r=s);return r}function t8(t,e){let r;for(const s of t)s!=null&&(r>s||r===void 0&&s>=s)&&(r=s);return r}function yG(t,e,r=0,s=1/0,a){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),s=Math.floor(Math.min(t.length-1,s)),!(r<=e&&e<=s))return t;for(a=a===void 0?xG:Pye(a);s>r;){if(s-r>600){const d=s-r+1,h=e-r+1,f=Math.log(d),m=.5*Math.exp(2*f/3),x=.5*Math.sqrt(f*m*(d-m)/d)*(h-d/2<0?-1:1),b=Math.max(r,Math.floor(e-h*m/d+x)),j=Math.min(s,Math.floor(e+(d-h)*m/d+x));yG(t,e,b,j,a)}const i=t[e];let o=r,l=s;for(Hv(t,r,e),a(t[s],i)>0&&Hv(t,r,s);o<l;){for(Hv(t,o,l),++o,--l;a(t[o],i)<0;)++o;for(;a(t[l],i)>0;)--l}a(t[r],i)===0?Hv(t,r,l):(++l,Hv(t,l,s)),l<=e&&(r=l+1),e<=l&&(s=l-1)}return t}function Hv(t,e,r){const s=t[e];t[e]=t[r],t[r]=s}function Mye(t,e,r){if(t=Float64Array.from(Sye(t)),!(!(s=t.length)||isNaN(e=+e))){if(e<=0||s<2)return t8(t);if(e>=1)return e8(t);var s,a=(s-1)*e,i=Math.floor(a),o=e8(yG(t,i).subarray(0,i+1)),l=t8(t.subarray(i+1));return o+(l-o)*(a-i)}}function Oye(t,e,r=gG){if(!(!(s=t.length)||isNaN(e=+e))){if(e<=0||s<2)return+r(t[0],0,t);if(e>=1)return+r(t[s-1],s-1,t);var s,a=(s-1)*e,i=Math.floor(a),o=+r(t[i],i,t),l=+r(t[i+1],i+1,t);return o+(l-o)*(a-i)}}function Rye(t,e,r){t=+t,e=+e,r=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+r;for(var s=-1,a=Math.max(0,Math.ceil((e-t)/r))|0,i=new Array(a);++s<a;)i[s]=t+s*r;return i}function Hd(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function _m(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const GP=Symbol("implicit");function __(){var t=new J7,e=[],r=[],s=GP;function a(i){let o=t.get(i);if(o===void 0){if(s!==GP)return s;t.set(i,o=e.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new J7;for(const o of i)t.has(o)||t.set(o,e.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(s=i,a):s},a.copy=function(){return __(e,r).unknown(s)},Hd.apply(a,arguments),a}function Zb(){var t=__().unknown(void 0),e=t.domain,r=t.range,s=0,a=1,i,o,l=!1,d=0,h=0,f=.5;delete t.unknown;function m(){var x=e().length,b=a<s,j=b?a:s,N=b?s:a;i=(N-j)/Math.max(1,x-d+h*2),l&&(i=Math.floor(i)),j+=(N-j-i*(x-d))*f,o=i*(1-d),l&&(j=Math.round(j),o=Math.round(o));var w=Rye(x).map(function(C){return j+i*C});return r(b?w.reverse():w)}return t.domain=function(x){return arguments.length?(e(x),m()):e()},t.range=function(x){return arguments.length?([s,a]=x,s=+s,a=+a,m()):[s,a]},t.rangeRound=function(x){return[s,a]=x,s=+s,a=+a,l=!0,m()},t.bandwidth=function(){return o},t.step=function(){return i},t.round=function(x){return arguments.length?(l=!!x,m()):l},t.padding=function(x){return arguments.length?(d=Math.min(1,h=+x),m()):d},t.paddingInner=function(x){return arguments.length?(d=Math.min(1,x),m()):d},t.paddingOuter=function(x){return arguments.length?(h=+x,m()):h},t.align=function(x){return arguments.length?(f=Math.max(0,Math.min(1,x)),m()):f},t.copy=function(){return Zb(e(),[s,a]).round(l).paddingInner(d).paddingOuter(h).align(f)},Hd.apply(m(),arguments)}function vG(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return vG(e())},t}function kb(){return vG(Zb.apply(null,arguments).paddingInner(1))}function I_(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function bG(t,e){var r=Object.create(t.prototype);for(var s in e)r[s]=e[s];return r}function g1(){}var ew=.7,$j=1/ew,Kx="\\s*([+-]?\\d+)\\s*",tw="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",tf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Dye=/^#([0-9a-f]{3,8})$/,$ye=new RegExp(`^rgb\\(${Kx},${Kx},${Kx}\\)$`),Lye=new RegExp(`^rgb\\(${tf},${tf},${tf}\\)$`),Fye=new RegExp(`^rgba\\(${Kx},${Kx},${Kx},${tw}\\)$`),Bye=new RegExp(`^rgba\\(${tf},${tf},${tf},${tw}\\)$`),Uye=new RegExp(`^hsl\\(${tw},${tf},${tf}\\)$`),zye=new RegExp(`^hsla\\(${tw},${tf},${tf},${tw}\\)$`),r8={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};I_(g1,rw,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:n8,formatHex:n8,formatHex8:Vye,formatHsl:qye,formatRgb:s8,toString:s8});function n8(){return this.rgb().formatHex()}function Vye(){return this.rgb().formatHex8()}function qye(){return wG(this).formatHsl()}function s8(){return this.rgb().formatRgb()}function rw(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=Dye.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?a8(e):r===3?new tc(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?NN(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?NN(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=$ye.exec(t))?new tc(e[1],e[2],e[3],1):(e=Lye.exec(t))?new tc(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Fye.exec(t))?NN(e[1],e[2],e[3],e[4]):(e=Bye.exec(t))?NN(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Uye.exec(t))?l8(e[1],e[2]/100,e[3]/100,1):(e=zye.exec(t))?l8(e[1],e[2]/100,e[3]/100,e[4]):r8.hasOwnProperty(t)?a8(r8[t]):t==="transparent"?new tc(NaN,NaN,NaN,0):null}function a8(t){return new tc(t>>16&255,t>>8&255,t&255,1)}function NN(t,e,r,s){return s<=0&&(t=e=r=NaN),new tc(t,e,r,s)}function Hye(t){return t instanceof g1||(t=rw(t)),t?(t=t.rgb(),new tc(t.r,t.g,t.b,t.opacity)):new tc}function XP(t,e,r,s){return arguments.length===1?Hye(t):new tc(t,e,r,s??1)}function tc(t,e,r,s){this.r=+t,this.g=+e,this.b=+r,this.opacity=+s}I_(tc,XP,bG(g1,{brighter(t){return t=t==null?$j:Math.pow($j,t),new tc(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ew:Math.pow(ew,t),new tc(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new tc(d0(this.r),d0(this.g),d0(this.b),Lj(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:i8,formatHex:i8,formatHex8:Wye,formatRgb:o8,toString:o8}));function i8(){return`#${Yg(this.r)}${Yg(this.g)}${Yg(this.b)}`}function Wye(){return`#${Yg(this.r)}${Yg(this.g)}${Yg(this.b)}${Yg((isNaN(this.opacity)?1:this.opacity)*255)}`}function o8(){const t=Lj(this.opacity);return`${t===1?"rgb(":"rgba("}${d0(this.r)}, ${d0(this.g)}, ${d0(this.b)}${t===1?")":`, ${t})`}`}function Lj(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function d0(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Yg(t){return t=d0(t),(t<16?"0":"")+t.toString(16)}function l8(t,e,r,s){return s<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Mu(t,e,r,s)}function wG(t){if(t instanceof Mu)return new Mu(t.h,t.s,t.l,t.opacity);if(t instanceof g1||(t=rw(t)),!t)return new Mu;if(t instanceof Mu)return t;t=t.rgb();var e=t.r/255,r=t.g/255,s=t.b/255,a=Math.min(e,r,s),i=Math.max(e,r,s),o=NaN,l=i-a,d=(i+a)/2;return l?(e===i?o=(r-s)/l+(r<s)*6:r===i?o=(s-e)/l+2:o=(e-r)/l+4,l/=d<.5?i+a:2-i-a,o*=60):l=d>0&&d<1?0:o,new Mu(o,l,d,t.opacity)}function Yye(t,e,r,s){return arguments.length===1?wG(t):new Mu(t,e,r,s??1)}function Mu(t,e,r,s){this.h=+t,this.s=+e,this.l=+r,this.opacity=+s}I_(Mu,Yye,bG(g1,{brighter(t){return t=t==null?$j:Math.pow($j,t),new Mu(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ew:Math.pow(ew,t),new Mu(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,s=r+(r<.5?r:1-r)*e,a=2*r-s;return new tc(gT(t>=240?t-240:t+120,a,s),gT(t,a,s),gT(t<120?t+240:t-120,a,s),this.opacity)},clamp(){return new Mu(c8(this.h),jN(this.s),jN(this.l),Lj(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Lj(this.opacity);return`${t===1?"hsl(":"hsla("}${c8(this.h)}, ${jN(this.s)*100}%, ${jN(this.l)*100}%${t===1?")":`, ${t})`}`}}));function c8(t){return t=(t||0)%360,t<0?t+360:t}function jN(t){return Math.max(0,Math.min(1,t||0))}function gT(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const M_=t=>()=>t;function Kye(t,e){return function(r){return t+r*e}}function Gye(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(s){return Math.pow(t+s*e,r)}}function Xye(t){return(t=+t)==1?NG:function(e,r){return r-e?Gye(e,r,t):M_(isNaN(e)?r:e)}}function NG(t,e){var r=e-t;return r?Kye(t,r):M_(isNaN(t)?e:t)}const d8=(function t(e){var r=Xye(e);function s(a,i){var o=r((a=XP(a)).r,(i=XP(i)).r),l=r(a.g,i.g),d=r(a.b,i.b),h=NG(a.opacity,i.opacity);return function(f){return a.r=o(f),a.g=l(f),a.b=d(f),a.opacity=h(f),a+""}}return s.gamma=t,s})(1);function Qye(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,s=e.slice(),a;return function(i){for(a=0;a<r;++a)s[a]=t[a]*(1-i)+e[a]*i;return s}}function Jye(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Zye(t,e){var r=e?e.length:0,s=t?Math.min(r,t.length):0,a=new Array(s),i=new Array(r),o;for(o=0;o<s;++o)a[o]=wv(t[o],e[o]);for(;o<r;++o)i[o]=e[o];return function(l){for(o=0;o<s;++o)i[o]=a[o](l);return i}}function eve(t,e){var r=new Date;return t=+t,e=+e,function(s){return r.setTime(t*(1-s)+e*s),r}}function Fj(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function tve(t,e){var r={},s={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?r[a]=wv(t[a],e[a]):s[a]=e[a];return function(i){for(a in r)s[a]=r[a](i);return s}}var QP=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xT=new RegExp(QP.source,"g");function rve(t){return function(){return t}}function nve(t){return function(e){return t(e)+""}}function sve(t,e){var r=QP.lastIndex=xT.lastIndex=0,s,a,i,o=-1,l=[],d=[];for(t=t+"",e=e+"";(s=QP.exec(t))&&(a=xT.exec(e));)(i=a.index)>r&&(i=e.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(s=s[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,d.push({i:o,x:Fj(s,a)})),r=xT.lastIndex;return r<e.length&&(i=e.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?d[0]?nve(d[0].x):rve(e):(e=d.length,function(h){for(var f=0,m;f<e;++f)l[(m=d[f]).i]=m.x(h);return l.join("")})}function wv(t,e){var r=typeof e,s;return e==null||r==="boolean"?M_(e):(r==="number"?Fj:r==="string"?(s=rw(e))?(e=s,d8):sve:e instanceof rw?d8:e instanceof Date?eve:Jye(e)?Qye:Array.isArray(e)?Zye:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?tve:Fj)(t,e)}function O_(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function ave(t,e){e===void 0&&(e=t,t=wv);for(var r=0,s=e.length-1,a=e[0],i=new Array(s<0?0:s);r<s;)i[r]=t(a,a=e[++r]);return function(o){var l=Math.max(0,Math.min(s-1,Math.floor(o*=s)));return i[l](o-l)}}function ive(t){return function(){return t}}function Bj(t){return+t}var u8=[0,1];function pl(t){return t}function JP(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:ive(isNaN(e)?NaN:.5)}function ove(t,e){var r;return t>e&&(r=t,t=e,e=r),function(s){return Math.max(t,Math.min(e,s))}}function lve(t,e,r){var s=t[0],a=t[1],i=e[0],o=e[1];return a<s?(s=JP(a,s),i=r(o,i)):(s=JP(s,a),i=r(i,o)),function(l){return i(s(l))}}function cve(t,e,r){var s=Math.min(t.length,e.length)-1,a=new Array(s),i=new Array(s),o=-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<s;)a[o]=JP(t[o],t[o+1]),i[o]=r(e[o],e[o+1]);return function(l){var d=p1(t,l,1,s)-1;return i[d](a[d](l))}}function x1(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function BS(){var t=u8,e=u8,r=wv,s,a,i,o=pl,l,d,h;function f(){var x=Math.min(t.length,e.length);return o!==pl&&(o=ove(t[0],t[x-1])),l=x>2?cve:lve,d=h=null,m}function m(x){return x==null||isNaN(x=+x)?i:(d||(d=l(t.map(s),e,r)))(s(o(x)))}return m.invert=function(x){return o(a((h||(h=l(e,t.map(s),Fj)))(x)))},m.domain=function(x){return arguments.length?(t=Array.from(x,Bj),f()):t.slice()},m.range=function(x){return arguments.length?(e=Array.from(x),f()):e.slice()},m.rangeRound=function(x){return e=Array.from(x),r=O_,f()},m.clamp=function(x){return arguments.length?(o=x?!0:pl,f()):o!==pl},m.interpolate=function(x){return arguments.length?(r=x,f()):r},m.unknown=function(x){return arguments.length?(i=x,m):i},function(x,b){return s=x,a=b,f()}}function R_(){return BS()(pl,pl)}function dve(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Uj(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,s=t.slice(0,r);return[s.length>1?s[0]+s.slice(2):s,+t.slice(r+1)]}function ky(t){return t=Uj(Math.abs(t)),t?t[1]:NaN}function uve(t,e){return function(r,s){for(var a=r.length,i=[],o=0,l=t[0],d=0;a>0&&l>0&&(d+l+1>s&&(l=Math.max(1,s-d)),i.push(r.substring(a-=l,a+l)),!((d+=l+1)>s));)l=t[o=(o+1)%t.length];return i.reverse().join(e)}}function hve(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var fve=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function nw(t){if(!(e=fve.exec(t)))throw new Error("invalid format: "+t);var e;return new D_({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}nw.prototype=D_.prototype;function D_(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}D_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function mve(t){e:for(var e=t.length,r=1,s=-1,a;r<e;++r)switch(t[r]){case".":s=a=r;break;case"0":s===0&&(s=r),a=r;break;default:if(!+t[r])break e;s>0&&(s=0);break}return s>0?t.slice(0,s)+t.slice(a+1):t}var jG;function pve(t,e){var r=Uj(t,e);if(!r)return t+"";var s=r[0],a=r[1],i=a-(jG=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=s.length;return i===o?s:i>o?s+new Array(i-o+1).join("0"):i>0?s.slice(0,i)+"."+s.slice(i):"0."+new Array(1-i).join("0")+Uj(t,Math.max(0,e+i-1))[0]}function h8(t,e){var r=Uj(t,e);if(!r)return t+"";var s=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+s:s.length>a+1?s.slice(0,a+1)+"."+s.slice(a+1):s+new Array(a-s.length+2).join("0")}const f8={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:dve,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>h8(t*100,e),r:h8,s:pve,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function m8(t){return t}var p8=Array.prototype.map,g8=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function gve(t){var e=t.grouping===void 0||t.thousands===void 0?m8:uve(p8.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",s=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?m8:hve(p8.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",d=t.nan===void 0?"NaN":t.nan+"";function h(m){m=nw(m);var x=m.fill,b=m.align,j=m.sign,N=m.symbol,w=m.zero,C=m.width,T=m.comma,O=m.precision,I=m.trim,P=m.type;P==="n"?(T=!0,P="g"):f8[P]||(O===void 0&&(O=12),I=!0,P="g"),(w||x==="0"&&b==="=")&&(w=!0,x="0",b="=");var A=N==="$"?r:N==="#"&&/[boxX]/.test(P)?"0"+P.toLowerCase():"",R=N==="$"?s:/[%p]/.test(P)?o:"",B=f8[P],V=/[defgprs%]/.test(P);O=O===void 0?6:/[gprs]/.test(P)?Math.max(1,Math.min(21,O)):Math.max(0,Math.min(20,O));function X(ee){var Y=A,re=R,le,te,de;if(P==="c")re=B(ee)+re,ee="";else{ee=+ee;var ie=ee<0||1/ee<0;if(ee=isNaN(ee)?d:B(Math.abs(ee),O),I&&(ee=mve(ee)),ie&&+ee==0&&j!=="+"&&(ie=!1),Y=(ie?j==="("?j:l:j==="-"||j==="("?"":j)+Y,re=(P==="s"?g8[8+jG/3]:"")+re+(ie&&j==="("?")":""),V){for(le=-1,te=ee.length;++le<te;)if(de=ee.charCodeAt(le),48>de||de>57){re=(de===46?a+ee.slice(le+1):ee.slice(le))+re,ee=ee.slice(0,le);break}}}T&&!w&&(ee=e(ee,1/0));var Z=Y.length+ee.length+re.length,ne=Z<C?new Array(C-Z+1).join(x):"";switch(T&&w&&(ee=e(ne+ee,ne.length?C-re.length:1/0),ne=""),b){case"<":ee=Y+ee+re+ne;break;case"=":ee=Y+ne+ee+re;break;case"^":ee=ne.slice(0,Z=ne.length>>1)+Y+ee+re+ne.slice(Z);break;default:ee=ne+Y+ee+re;break}return i(ee)}return X.toString=function(){return m+""},X}function f(m,x){var b=h((m=nw(m),m.type="f",m)),j=Math.max(-8,Math.min(8,Math.floor(ky(x)/3)))*3,N=Math.pow(10,-j),w=g8[8+j/3];return function(C){return b(N*C)+w}}return{format:h,formatPrefix:f}}var SN,$_,SG;xve({thousands:",",grouping:[3],currency:["$",""]});function xve(t){return SN=gve(t),$_=SN.format,SG=SN.formatPrefix,SN}function yve(t){return Math.max(0,-ky(Math.abs(t)))}function vve(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ky(e)/3)))*3-ky(Math.abs(t)))}function bve(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,ky(e)-ky(t))+1}function kG(t,e,r,s){var a=KP(t,e,r),i;switch(s=nw(s??",f"),s.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return s.precision==null&&!isNaN(i=vve(a,o))&&(s.precision=i),SG(s,o)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(i=bve(a,Math.max(Math.abs(t),Math.abs(e))))&&(s.precision=i-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(i=yve(a))&&(s.precision=i-(s.type==="%")*2);break}}return $_(s)}function ng(t){var e=t.domain;return t.ticks=function(r){var s=e();return WP(s[0],s[s.length-1],r??10)},t.tickFormat=function(r,s){var a=e();return kG(a[0],a[a.length-1],r??10,s)},t.nice=function(r){r==null&&(r=10);var s=e(),a=0,i=s.length-1,o=s[a],l=s[i],d,h,f=10;for(l<o&&(h=o,o=l,l=h,h=a,a=i,i=h);f-- >0;){if(h=YP(o,l,r),h===d)return s[a]=o,s[i]=l,e(s);if(h>0)o=Math.floor(o/h)*h,l=Math.ceil(l/h)*h;else if(h<0)o=Math.ceil(o*h)/h,l=Math.floor(l*h)/h;else break;d=h}return t},t}function zj(){var t=R_();return t.copy=function(){return x1(t,zj())},Hd.apply(t,arguments),ng(t)}function CG(t){var e;function r(s){return s==null||isNaN(s=+s)?e:s}return r.invert=r,r.domain=r.range=function(s){return arguments.length?(t=Array.from(s,Bj),r):t.slice()},r.unknown=function(s){return arguments.length?(e=s,r):e},r.copy=function(){return CG(t).unknown(e)},t=arguments.length?Array.from(t,Bj):[0,1],ng(r)}function EG(t,e){t=t.slice();var r=0,s=t.length-1,a=t[r],i=t[s],o;return i<a&&(o=r,r=s,s=o,o=a,a=i,i=o),t[r]=e.floor(a),t[s]=e.ceil(i),t}function x8(t){return Math.log(t)}function y8(t){return Math.exp(t)}function wve(t){return-Math.log(-t)}function Nve(t){return-Math.exp(-t)}function jve(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Sve(t){return t===10?jve:t===Math.E?Math.exp:e=>Math.pow(t,e)}function kve(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function v8(t){return(e,r)=>-t(-e,r)}function L_(t){const e=t(x8,y8),r=e.domain;let s=10,a,i;function o(){return a=kve(s),i=Sve(s),r()[0]<0?(a=v8(a),i=v8(i),t(wve,Nve)):t(x8,y8),e}return e.base=function(l){return arguments.length?(s=+l,o()):s},e.domain=function(l){return arguments.length?(r(l),o()):r()},e.ticks=l=>{const d=r();let h=d[0],f=d[d.length-1];const m=f<h;m&&([h,f]=[f,h]);let x=a(h),b=a(f),j,N;const w=l==null?10:+l;let C=[];if(!(s%1)&&b-x<w){if(x=Math.floor(x),b=Math.ceil(b),h>0){for(;x<=b;++x)for(j=1;j<s;++j)if(N=x<0?j/i(-x):j*i(x),!(N<h)){if(N>f)break;C.push(N)}}else for(;x<=b;++x)for(j=s-1;j>=1;--j)if(N=x>0?j/i(-x):j*i(x),!(N<h)){if(N>f)break;C.push(N)}C.length*2<w&&(C=WP(h,f,w))}else C=WP(x,b,Math.min(b-x,w)).map(i);return m?C.reverse():C},e.tickFormat=(l,d)=>{if(l==null&&(l=10),d==null&&(d=s===10?"s":","),typeof d!="function"&&(!(s%1)&&(d=nw(d)).precision==null&&(d.trim=!0),d=$_(d)),l===1/0)return d;const h=Math.max(1,s*l/e.ticks().length);return f=>{let m=f/i(Math.round(a(f)));return m*s<s-.5&&(m*=s),m<=h?d(f):""}},e.nice=()=>r(EG(r(),{floor:l=>i(Math.floor(a(l))),ceil:l=>i(Math.ceil(a(l)))})),e}function TG(){const t=L_(BS()).domain([1,10]);return t.copy=()=>x1(t,TG()).base(t.base()),Hd.apply(t,arguments),t}function b8(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function w8(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function F_(t){var e=1,r=t(b8(e),w8(e));return r.constant=function(s){return arguments.length?t(b8(e=+s),w8(e)):e},ng(r)}function PG(){var t=F_(BS());return t.copy=function(){return x1(t,PG()).constant(t.constant())},Hd.apply(t,arguments)}function N8(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Cve(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Eve(t){return t<0?-t*t:t*t}function B_(t){var e=t(pl,pl),r=1;function s(){return r===1?t(pl,pl):r===.5?t(Cve,Eve):t(N8(r),N8(1/r))}return e.exponent=function(a){return arguments.length?(r=+a,s()):r},ng(e)}function U_(){var t=B_(BS());return t.copy=function(){return x1(t,U_()).exponent(t.exponent())},Hd.apply(t,arguments),t}function Tve(){return U_.apply(null,arguments).exponent(.5)}function j8(t){return Math.sign(t)*t*t}function Pve(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function AG(){var t=R_(),e=[0,1],r=!1,s;function a(i){var o=Pve(t(i));return isNaN(o)?s:r?Math.round(o):o}return a.invert=function(i){return t.invert(j8(i))},a.domain=function(i){return arguments.length?(t.domain(i),a):t.domain()},a.range=function(i){return arguments.length?(t.range((e=Array.from(i,Bj)).map(j8)),a):e.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(t.clamp(i),a):t.clamp()},a.unknown=function(i){return arguments.length?(s=i,a):s},a.copy=function(){return AG(t.domain(),e).round(r).clamp(t.clamp()).unknown(s)},Hd.apply(a,arguments),ng(a)}function _G(){var t=[],e=[],r=[],s;function a(){var o=0,l=Math.max(1,e.length);for(r=new Array(l-1);++o<l;)r[o-1]=Oye(t,o/l);return i}function i(o){return o==null||isNaN(o=+o)?s:e[p1(r,o)]}return i.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:t[0],l<r.length?r[l]:t[t.length-1]]},i.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(Fp),a()},i.range=function(o){return arguments.length?(e=Array.from(o),a()):e.slice()},i.unknown=function(o){return arguments.length?(s=o,i):s},i.quantiles=function(){return r.slice()},i.copy=function(){return _G().domain(t).range(e).unknown(s)},Hd.apply(i,arguments)}function IG(){var t=0,e=1,r=1,s=[.5],a=[0,1],i;function o(d){return d!=null&&d<=d?a[p1(s,d,0,r)]:i}function l(){var d=-1;for(s=new Array(r);++d<r;)s[d]=((d+1)*e-(d-r)*t)/(r+1);return o}return o.domain=function(d){return arguments.length?([t,e]=d,t=+t,e=+e,l()):[t,e]},o.range=function(d){return arguments.length?(r=(a=Array.from(d)).length-1,l()):a.slice()},o.invertExtent=function(d){var h=a.indexOf(d);return h<0?[NaN,NaN]:h<1?[t,s[0]]:h>=r?[s[r-1],e]:[s[h-1],s[h]]},o.unknown=function(d){return arguments.length&&(i=d),o},o.thresholds=function(){return s.slice()},o.copy=function(){return IG().domain([t,e]).range(a).unknown(i)},Hd.apply(ng(o),arguments)}function MG(){var t=[.5],e=[0,1],r,s=1;function a(i){return i!=null&&i<=i?e[p1(t,i,0,s)]:r}return a.domain=function(i){return arguments.length?(t=Array.from(i),s=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(i){return arguments.length?(e=Array.from(i),s=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(i){var o=e.indexOf(i);return[t[o-1],t[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return MG().domain(t).range(e).unknown(r)},Hd.apply(a,arguments)}const yT=new Date,vT=new Date;function ki(t,e,r,s){function a(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(t(i=new Date(+i)),i),a.ceil=i=>(t(i=new Date(i-1)),e(i,1),t(i),i),a.round=i=>{const o=a(i),l=a.ceil(i);return i-o<l-i?o:l},a.offset=(i,o)=>(e(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,l)=>{const d=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return d;let h;do d.push(h=new Date(+i)),e(i,l),t(i);while(h<i&&i<o);return d},a.filter=i=>ki(o=>{if(o>=o)for(;t(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!i(o););else for(;--l>=0;)for(;e(o,1),!i(o););}),r&&(a.count=(i,o)=>(yT.setTime(+i),vT.setTime(+o),t(yT),t(vT),Math.floor(r(yT,vT))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(s?o=>s(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const Vj=ki(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Vj.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?ki(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):Vj);Vj.range;const om=1e3,Ld=om*60,lm=Ld*60,Sm=lm*24,z_=Sm*7,S8=Sm*30,bT=Sm*365,Kg=ki(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*om)},(t,e)=>(e-t)/om,t=>t.getUTCSeconds());Kg.range;const V_=ki(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*om)},(t,e)=>{t.setTime(+t+e*Ld)},(t,e)=>(e-t)/Ld,t=>t.getMinutes());V_.range;const q_=ki(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Ld)},(t,e)=>(e-t)/Ld,t=>t.getUTCMinutes());q_.range;const H_=ki(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*om-t.getMinutes()*Ld)},(t,e)=>{t.setTime(+t+e*lm)},(t,e)=>(e-t)/lm,t=>t.getHours());H_.range;const W_=ki(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*lm)},(t,e)=>(e-t)/lm,t=>t.getUTCHours());W_.range;const y1=ki(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ld)/Sm,t=>t.getDate()-1);y1.range;const US=ki(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Sm,t=>t.getUTCDate()-1);US.range;const OG=ki(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Sm,t=>Math.floor(t/Sm));OG.range;function z0(t){return ki(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*Ld)/z_)}const zS=z0(0),qj=z0(1),Ave=z0(2),_ve=z0(3),Cy=z0(4),Ive=z0(5),Mve=z0(6);zS.range;qj.range;Ave.range;_ve.range;Cy.range;Ive.range;Mve.range;function V0(t){return ki(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/z_)}const VS=V0(0),Hj=V0(1),Ove=V0(2),Rve=V0(3),Ey=V0(4),Dve=V0(5),$ve=V0(6);VS.range;Hj.range;Ove.range;Rve.range;Ey.range;Dve.range;$ve.range;const Y_=ki(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Y_.range;const K_=ki(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());K_.range;const km=ki(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());km.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ki(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});km.range;const Cm=ki(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Cm.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ki(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});Cm.range;function RG(t,e,r,s,a,i){const o=[[Kg,1,om],[Kg,5,5*om],[Kg,15,15*om],[Kg,30,30*om],[i,1,Ld],[i,5,5*Ld],[i,15,15*Ld],[i,30,30*Ld],[a,1,lm],[a,3,3*lm],[a,6,6*lm],[a,12,12*lm],[s,1,Sm],[s,2,2*Sm],[r,1,z_],[e,1,S8],[e,3,3*S8],[t,1,bT]];function l(h,f,m){const x=f<h;x&&([h,f]=[f,h]);const b=m&&typeof m.range=="function"?m:d(h,f,m),j=b?b.range(h,+f+1):[];return x?j.reverse():j}function d(h,f,m){const x=Math.abs(f-h)/m,b=A_(([,,w])=>w).right(o,x);if(b===o.length)return t.every(KP(h/bT,f/bT,m));if(b===0)return Vj.every(Math.max(KP(h,f,m),1));const[j,N]=o[x/o[b-1][2]<o[b][2]/x?b-1:b];return j.every(N)}return[l,d]}const[Lve,Fve]=RG(Cm,K_,VS,OG,W_,q_),[Bve,Uve]=RG(km,Y_,zS,y1,H_,V_);function wT(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function NT(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Wv(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function zve(t){var e=t.dateTime,r=t.date,s=t.time,a=t.periods,i=t.days,o=t.shortDays,l=t.months,d=t.shortMonths,h=Yv(a),f=Kv(a),m=Yv(i),x=Kv(i),b=Yv(o),j=Kv(o),N=Yv(l),w=Kv(l),C=Yv(d),T=Kv(d),O={a:ie,A:Z,b:ne,B:oe,c:null,d:A8,e:A8,f:ube,g:wbe,G:jbe,H:lbe,I:cbe,j:dbe,L:DG,m:hbe,M:fbe,p:U,q:W,Q:M8,s:O8,S:mbe,u:pbe,U:gbe,V:xbe,w:ybe,W:vbe,x:null,X:null,y:bbe,Y:Nbe,Z:Sbe,"%":I8},I={a:be,A:pe,b:ge,B:Ce,c:null,d:_8,e:_8,f:Tbe,g:Lbe,G:Bbe,H:kbe,I:Cbe,j:Ebe,L:LG,m:Pbe,M:Abe,p:he,q:ue,Q:M8,s:O8,S:_be,u:Ibe,U:Mbe,V:Obe,w:Rbe,W:Dbe,x:null,X:null,y:$be,Y:Fbe,Z:Ube,"%":I8},P={a:X,A:ee,b:Y,B:re,c:le,d:T8,e:T8,f:sbe,g:E8,G:C8,H:P8,I:P8,j:ebe,L:nbe,m:Zve,M:tbe,p:V,q:Jve,Q:ibe,s:obe,S:rbe,u:Yve,U:Kve,V:Gve,w:Wve,W:Xve,x:te,X:de,y:E8,Y:C8,Z:Qve,"%":abe};O.x=A(r,O),O.X=A(s,O),O.c=A(e,O),I.x=A(r,I),I.X=A(s,I),I.c=A(e,I);function A(ce,Ee){return function(Le){var Ie=[],Ue=-1,Ae=0,We=ce.length,ot,It,tr;for(Le instanceof Date||(Le=new Date(+Le));++Ue<We;)ce.charCodeAt(Ue)===37&&(Ie.push(ce.slice(Ae,Ue)),(It=k8[ot=ce.charAt(++Ue)])!=null?ot=ce.charAt(++Ue):It=ot==="e"?" ":"0",(tr=Ee[ot])&&(ot=tr(Le,It)),Ie.push(ot),Ae=Ue+1);return Ie.push(ce.slice(Ae,Ue)),Ie.join("")}}function R(ce,Ee){return function(Le){var Ie=Wv(1900,void 0,1),Ue=B(Ie,ce,Le+="",0),Ae,We;if(Ue!=Le.length)return null;if("Q"in Ie)return new Date(Ie.Q);if("s"in Ie)return new Date(Ie.s*1e3+("L"in Ie?Ie.L:0));if(Ee&&!("Z"in Ie)&&(Ie.Z=0),"p"in Ie&&(Ie.H=Ie.H%12+Ie.p*12),Ie.m===void 0&&(Ie.m="q"in Ie?Ie.q:0),"V"in Ie){if(Ie.V<1||Ie.V>53)return null;"w"in Ie||(Ie.w=1),"Z"in Ie?(Ae=NT(Wv(Ie.y,0,1)),We=Ae.getUTCDay(),Ae=We>4||We===0?Hj.ceil(Ae):Hj(Ae),Ae=US.offset(Ae,(Ie.V-1)*7),Ie.y=Ae.getUTCFullYear(),Ie.m=Ae.getUTCMonth(),Ie.d=Ae.getUTCDate()+(Ie.w+6)%7):(Ae=wT(Wv(Ie.y,0,1)),We=Ae.getDay(),Ae=We>4||We===0?qj.ceil(Ae):qj(Ae),Ae=y1.offset(Ae,(Ie.V-1)*7),Ie.y=Ae.getFullYear(),Ie.m=Ae.getMonth(),Ie.d=Ae.getDate()+(Ie.w+6)%7)}else("W"in Ie||"U"in Ie)&&("w"in Ie||(Ie.w="u"in Ie?Ie.u%7:"W"in Ie?1:0),We="Z"in Ie?NT(Wv(Ie.y,0,1)).getUTCDay():wT(Wv(Ie.y,0,1)).getDay(),Ie.m=0,Ie.d="W"in Ie?(Ie.w+6)%7+Ie.W*7-(We+5)%7:Ie.w+Ie.U*7-(We+6)%7);return"Z"in Ie?(Ie.H+=Ie.Z/100|0,Ie.M+=Ie.Z%100,NT(Ie)):wT(Ie)}}function B(ce,Ee,Le,Ie){for(var Ue=0,Ae=Ee.length,We=Le.length,ot,It;Ue<Ae;){if(Ie>=We)return-1;if(ot=Ee.charCodeAt(Ue++),ot===37){if(ot=Ee.charAt(Ue++),It=P[ot in k8?Ee.charAt(Ue++):ot],!It||(Ie=It(ce,Le,Ie))<0)return-1}else if(ot!=Le.charCodeAt(Ie++))return-1}return Ie}function V(ce,Ee,Le){var Ie=h.exec(Ee.slice(Le));return Ie?(ce.p=f.get(Ie[0].toLowerCase()),Le+Ie[0].length):-1}function X(ce,Ee,Le){var Ie=b.exec(Ee.slice(Le));return Ie?(ce.w=j.get(Ie[0].toLowerCase()),Le+Ie[0].length):-1}function ee(ce,Ee,Le){var Ie=m.exec(Ee.slice(Le));return Ie?(ce.w=x.get(Ie[0].toLowerCase()),Le+Ie[0].length):-1}function Y(ce,Ee,Le){var Ie=C.exec(Ee.slice(Le));return Ie?(ce.m=T.get(Ie[0].toLowerCase()),Le+Ie[0].length):-1}function re(ce,Ee,Le){var Ie=N.exec(Ee.slice(Le));return Ie?(ce.m=w.get(Ie[0].toLowerCase()),Le+Ie[0].length):-1}function le(ce,Ee,Le){return B(ce,e,Ee,Le)}function te(ce,Ee,Le){return B(ce,r,Ee,Le)}function de(ce,Ee,Le){return B(ce,s,Ee,Le)}function ie(ce){return o[ce.getDay()]}function Z(ce){return i[ce.getDay()]}function ne(ce){return d[ce.getMonth()]}function oe(ce){return l[ce.getMonth()]}function U(ce){return a[+(ce.getHours()>=12)]}function W(ce){return 1+~~(ce.getMonth()/3)}function be(ce){return o[ce.getUTCDay()]}function pe(ce){return i[ce.getUTCDay()]}function ge(ce){return d[ce.getUTCMonth()]}function Ce(ce){return l[ce.getUTCMonth()]}function he(ce){return a[+(ce.getUTCHours()>=12)]}function ue(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var Ee=A(ce+="",O);return Ee.toString=function(){return ce},Ee},parse:function(ce){var Ee=R(ce+="",!1);return Ee.toString=function(){return ce},Ee},utcFormat:function(ce){var Ee=A(ce+="",I);return Ee.toString=function(){return ce},Ee},utcParse:function(ce){var Ee=R(ce+="",!0);return Ee.toString=function(){return ce},Ee}}}var k8={"-":"",_:" ",0:"0"},Wi=/^\s*\d+/,Vve=/^%/,qve=/[\\^$*+?|[\]().{}]/g;function es(t,e,r){var s=t<0?"-":"",a=(s?-t:t)+"",i=a.length;return s+(i<r?new Array(r-i+1).join(e)+a:a)}function Hve(t){return t.replace(qve,"\\$&")}function Yv(t){return new RegExp("^(?:"+t.map(Hve).join("|")+")","i")}function Kv(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function Wve(t,e,r){var s=Wi.exec(e.slice(r,r+1));return s?(t.w=+s[0],r+s[0].length):-1}function Yve(t,e,r){var s=Wi.exec(e.slice(r,r+1));return s?(t.u=+s[0],r+s[0].length):-1}function Kve(t,e,r){var s=Wi.exec(e.slice(r,r+2));return s?(t.U=+s[0],r+s[0].length):-1}function Gve(t,e,r){var s=Wi.exec(e.slice(r,r+2));return s?(t.V=+s[0],r+s[0].length):-1}function Xve(t,e,r){var s=Wi.exec(e.slice(r,r+2));return s?(t.W=+s[0],r+s[0].length):-1}function C8(t,e,r){var s=Wi.exec(e.slice(r,r+4));return s?(t.y=+s[0],r+s[0].length):-1}function E8(t,e,r){var s=Wi.exec(e.slice(r,r+2));return s?(t.y=+s[0]+(+s[0]>68?1900:2e3),r+s[0].length):-1}function Qve(t,e,r){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return s?(t.Z=s[1]?0:-(s[2]+(s[3]||"00")),r+s[0].length):-1}function Jve(t,e,r){var s=Wi.exec(e.slice(r,r+1));return s?(t.q=s[0]*3-3,r+s[0].length):-1}function Zve(t,e,r){var s=Wi.exec(e.slice(r,r+2));return s?(t.m=s[0]-1,r+s[0].length):-1}function T8(t,e,r){var s=Wi.exec(e.slice(r,r+2));return s?(t.d=+s[0],r+s[0].length):-1}function ebe(t,e,r){var s=Wi.exec(e.slice(r,r+3));return s?(t.m=0,t.d=+s[0],r+s[0].length):-1}function P8(t,e,r){var s=Wi.exec(e.slice(r,r+2));return s?(t.H=+s[0],r+s[0].length):-1}function tbe(t,e,r){var s=Wi.exec(e.slice(r,r+2));return s?(t.M=+s[0],r+s[0].length):-1}function rbe(t,e,r){var s=Wi.exec(e.slice(r,r+2));return s?(t.S=+s[0],r+s[0].length):-1}function nbe(t,e,r){var s=Wi.exec(e.slice(r,r+3));return s?(t.L=+s[0],r+s[0].length):-1}function sbe(t,e,r){var s=Wi.exec(e.slice(r,r+6));return s?(t.L=Math.floor(s[0]/1e3),r+s[0].length):-1}function abe(t,e,r){var s=Vve.exec(e.slice(r,r+1));return s?r+s[0].length:-1}function ibe(t,e,r){var s=Wi.exec(e.slice(r));return s?(t.Q=+s[0],r+s[0].length):-1}function obe(t,e,r){var s=Wi.exec(e.slice(r));return s?(t.s=+s[0],r+s[0].length):-1}function A8(t,e){return es(t.getDate(),e,2)}function lbe(t,e){return es(t.getHours(),e,2)}function cbe(t,e){return es(t.getHours()%12||12,e,2)}function dbe(t,e){return es(1+y1.count(km(t),t),e,3)}function DG(t,e){return es(t.getMilliseconds(),e,3)}function ube(t,e){return DG(t,e)+"000"}function hbe(t,e){return es(t.getMonth()+1,e,2)}function fbe(t,e){return es(t.getMinutes(),e,2)}function mbe(t,e){return es(t.getSeconds(),e,2)}function pbe(t){var e=t.getDay();return e===0?7:e}function gbe(t,e){return es(zS.count(km(t)-1,t),e,2)}function $G(t){var e=t.getDay();return e>=4||e===0?Cy(t):Cy.ceil(t)}function xbe(t,e){return t=$G(t),es(Cy.count(km(t),t)+(km(t).getDay()===4),e,2)}function ybe(t){return t.getDay()}function vbe(t,e){return es(qj.count(km(t)-1,t),e,2)}function bbe(t,e){return es(t.getFullYear()%100,e,2)}function wbe(t,e){return t=$G(t),es(t.getFullYear()%100,e,2)}function Nbe(t,e){return es(t.getFullYear()%1e4,e,4)}function jbe(t,e){var r=t.getDay();return t=r>=4||r===0?Cy(t):Cy.ceil(t),es(t.getFullYear()%1e4,e,4)}function Sbe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+es(e/60|0,"0",2)+es(e%60,"0",2)}function _8(t,e){return es(t.getUTCDate(),e,2)}function kbe(t,e){return es(t.getUTCHours(),e,2)}function Cbe(t,e){return es(t.getUTCHours()%12||12,e,2)}function Ebe(t,e){return es(1+US.count(Cm(t),t),e,3)}function LG(t,e){return es(t.getUTCMilliseconds(),e,3)}function Tbe(t,e){return LG(t,e)+"000"}function Pbe(t,e){return es(t.getUTCMonth()+1,e,2)}function Abe(t,e){return es(t.getUTCMinutes(),e,2)}function _be(t,e){return es(t.getUTCSeconds(),e,2)}function Ibe(t){var e=t.getUTCDay();return e===0?7:e}function Mbe(t,e){return es(VS.count(Cm(t)-1,t),e,2)}function FG(t){var e=t.getUTCDay();return e>=4||e===0?Ey(t):Ey.ceil(t)}function Obe(t,e){return t=FG(t),es(Ey.count(Cm(t),t)+(Cm(t).getUTCDay()===4),e,2)}function Rbe(t){return t.getUTCDay()}function Dbe(t,e){return es(Hj.count(Cm(t)-1,t),e,2)}function $be(t,e){return es(t.getUTCFullYear()%100,e,2)}function Lbe(t,e){return t=FG(t),es(t.getUTCFullYear()%100,e,2)}function Fbe(t,e){return es(t.getUTCFullYear()%1e4,e,4)}function Bbe(t,e){var r=t.getUTCDay();return t=r>=4||r===0?Ey(t):Ey.ceil(t),es(t.getUTCFullYear()%1e4,e,4)}function Ube(){return"+0000"}function I8(){return"%"}function M8(t){return+t}function O8(t){return Math.floor(+t/1e3)}var jx,BG,UG;zbe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function zbe(t){return jx=zve(t),BG=jx.format,jx.parse,UG=jx.utcFormat,jx.utcParse,jx}function Vbe(t){return new Date(t)}function qbe(t){return t instanceof Date?+t:+new Date(+t)}function G_(t,e,r,s,a,i,o,l,d,h){var f=R_(),m=f.invert,x=f.domain,b=h(".%L"),j=h(":%S"),N=h("%I:%M"),w=h("%I %p"),C=h("%a %d"),T=h("%b %d"),O=h("%B"),I=h("%Y");function P(A){return(d(A)<A?b:l(A)<A?j:o(A)<A?N:i(A)<A?w:s(A)<A?a(A)<A?C:T:r(A)<A?O:I)(A)}return f.invert=function(A){return new Date(m(A))},f.domain=function(A){return arguments.length?x(Array.from(A,qbe)):x().map(Vbe)},f.ticks=function(A){var R=x();return t(R[0],R[R.length-1],A??10)},f.tickFormat=function(A,R){return R==null?P:h(R)},f.nice=function(A){var R=x();return(!A||typeof A.range!="function")&&(A=e(R[0],R[R.length-1],A??10)),A?x(EG(R,A)):f},f.copy=function(){return x1(f,G_(t,e,r,s,a,i,o,l,d,h))},f}function Hbe(){return Hd.apply(G_(Bve,Uve,km,Y_,zS,y1,H_,V_,Kg,BG).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Wbe(){return Hd.apply(G_(Lve,Fve,Cm,K_,VS,US,W_,q_,Kg,UG).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function qS(){var t=0,e=1,r,s,a,i,o=pl,l=!1,d;function h(m){return m==null||isNaN(m=+m)?d:o(a===0?.5:(m=(i(m)-r)*a,l?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([t,e]=m,r=i(t=+t),s=i(e=+e),a=r===s?0:1/(s-r),h):[t,e]},h.clamp=function(m){return arguments.length?(l=!!m,h):l},h.interpolator=function(m){return arguments.length?(o=m,h):o};function f(m){return function(x){var b,j;return arguments.length?([b,j]=x,o=m(b,j),h):[o(0),o(1)]}}return h.range=f(wv),h.rangeRound=f(O_),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return i=m,r=m(t),s=m(e),a=r===s?0:1/(s-r),h}}function sg(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function zG(){var t=ng(qS()(pl));return t.copy=function(){return sg(t,zG())},_m.apply(t,arguments)}function VG(){var t=L_(qS()).domain([1,10]);return t.copy=function(){return sg(t,VG()).base(t.base())},_m.apply(t,arguments)}function qG(){var t=F_(qS());return t.copy=function(){return sg(t,qG()).constant(t.constant())},_m.apply(t,arguments)}function X_(){var t=B_(qS());return t.copy=function(){return sg(t,X_()).exponent(t.exponent())},_m.apply(t,arguments)}function Ybe(){return X_.apply(null,arguments).exponent(.5)}function HG(){var t=[],e=pl;function r(s){if(s!=null&&!isNaN(s=+s))return e((p1(t,s,1)-1)/(t.length-1))}return r.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let a of s)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Fp),r},r.interpolator=function(s){return arguments.length?(e=s,r):e},r.range=function(){return t.map((s,a)=>e(a/(t.length-1)))},r.quantiles=function(s){return Array.from({length:s+1},(a,i)=>Mye(t,i/s))},r.copy=function(){return HG(e).domain(t)},_m.apply(r,arguments)}function HS(){var t=0,e=.5,r=1,s=1,a,i,o,l,d,h=pl,f,m=!1,x;function b(N){return isNaN(N=+N)?x:(N=.5+((N=+f(N))-i)*(s*N<s*i?l:d),h(m?Math.max(0,Math.min(1,N)):N))}b.domain=function(N){return arguments.length?([t,e,r]=N,a=f(t=+t),i=f(e=+e),o=f(r=+r),l=a===i?0:.5/(i-a),d=i===o?0:.5/(o-i),s=i<a?-1:1,b):[t,e,r]},b.clamp=function(N){return arguments.length?(m=!!N,b):m},b.interpolator=function(N){return arguments.length?(h=N,b):h};function j(N){return function(w){var C,T,O;return arguments.length?([C,T,O]=w,h=ave(N,[C,T,O]),b):[h(0),h(.5),h(1)]}}return b.range=j(wv),b.rangeRound=j(O_),b.unknown=function(N){return arguments.length?(x=N,b):x},function(N){return f=N,a=N(t),i=N(e),o=N(r),l=a===i?0:.5/(i-a),d=i===o?0:.5/(o-i),s=i<a?-1:1,b}}function WG(){var t=ng(HS()(pl));return t.copy=function(){return sg(t,WG())},_m.apply(t,arguments)}function YG(){var t=L_(HS()).domain([.1,1,10]);return t.copy=function(){return sg(t,YG()).base(t.base())},_m.apply(t,arguments)}function KG(){var t=F_(HS());return t.copy=function(){return sg(t,KG()).constant(t.constant())},_m.apply(t,arguments)}function Q_(){var t=B_(HS());return t.copy=function(){return sg(t,Q_()).exponent(t.exponent())},_m.apply(t,arguments)}function Kbe(){return Q_.apply(null,arguments).exponent(.5)}const R8=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Zb,scaleDiverging:WG,scaleDivergingLog:YG,scaleDivergingPow:Q_,scaleDivergingSqrt:Kbe,scaleDivergingSymlog:KG,scaleIdentity:CG,scaleImplicit:GP,scaleLinear:zj,scaleLog:TG,scaleOrdinal:__,scalePoint:kb,scalePow:U_,scaleQuantile:_G,scaleQuantize:IG,scaleRadial:AG,scaleSequential:zG,scaleSequentialLog:VG,scaleSequentialPow:X_,scaleSequentialQuantile:HG,scaleSequentialSqrt:Ybe,scaleSequentialSymlog:qG,scaleSqrt:Tve,scaleSymlog:PG,scaleThreshold:MG,scaleTime:Hbe,scaleUtc:Wbe,tickFormat:kG},Symbol.toStringTag,{value:"Module"}));var jT,D8;function GG(){if(D8)return jT;D8=1;var t=gv();function e(r,s,a){for(var i=-1,o=r.length;++i<o;){var l=r[i],d=s(l);if(d!=null&&(h===void 0?d===d&&!t(d):a(d,h)))var h=d,f=l}return f}return jT=e,jT}var ST,$8;function Gbe(){if($8)return ST;$8=1;function t(e,r){return e>r}return ST=t,ST}var kT,L8;function Xbe(){if(L8)return kT;L8=1;var t=GG(),e=Gbe(),r=bv();function s(a){return a&&a.length?t(a,r,e):void 0}return kT=s,kT}var Qbe=Xbe();const Op=Hs(Qbe);var CT,F8;function Jbe(){if(F8)return CT;F8=1;function t(e,r){return e<r}return CT=t,CT}var ET,B8;function Zbe(){if(B8)return ET;B8=1;var t=GG(),e=Jbe(),r=bv();function s(a){return a&&a.length?t(a,r,e):void 0}return ET=s,ET}var ewe=Zbe();const WS=Hs(ewe);var TT,U8;function twe(){if(U8)return TT;U8=1;var t=f_(),e=rg(),r=nG(),s=lc();function a(i,o){var l=s(i)?t:r;return l(i,e(o,3))}return TT=a,TT}var PT,z8;function rwe(){if(z8)return PT;z8=1;var t=tG(),e=twe();function r(s,a){return t(e(s,a),1)}return PT=r,PT}var nwe=rwe();const swe=Hs(nwe);var AT,V8;function awe(){if(V8)return AT;V8=1;var t=C_();function e(r,s){return t(r,s)}return AT=e,AT}var iwe=awe();const Ty=Hs(iwe);var Nv=1e9,owe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Z_,ga=!0,Vd="[DecimalError] ",u0=Vd+"Invalid argument: ",J_=Vd+"Exponent out of range: ",jv=Math.floor,Fg=Math.pow,lwe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Lc,zi=1e7,oa=7,XG=9007199254740991,Wj=jv(XG/oa),nr={};nr.absoluteValue=nr.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};nr.comparedTo=nr.cmp=function(t){var e,r,s,a,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(s=i.d.length,a=t.d.length,e=0,r=s<a?s:a;e<r;++e)if(i.d[e]!==t.d[e])return i.d[e]>t.d[e]^i.s<0?1:-1;return s===a?0:s>a^i.s<0?1:-1};nr.decimalPlaces=nr.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*oa;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};nr.dividedBy=nr.div=function(t){return pm(this,new this.constructor(t))};nr.dividedToIntegerBy=nr.idiv=function(t){var e=this,r=e.constructor;return qs(pm(e,new r(t),0,1),r.precision)};nr.equals=nr.eq=function(t){return!this.cmp(t)};nr.exponent=function(){return si(this)};nr.greaterThan=nr.gt=function(t){return this.cmp(t)>0};nr.greaterThanOrEqualTo=nr.gte=function(t){return this.cmp(t)>=0};nr.isInteger=nr.isint=function(){return this.e>this.d.length-2};nr.isNegative=nr.isneg=function(){return this.s<0};nr.isPositive=nr.ispos=function(){return this.s>0};nr.isZero=function(){return this.s===0};nr.lessThan=nr.lt=function(t){return this.cmp(t)<0};nr.lessThanOrEqualTo=nr.lte=function(t){return this.cmp(t)<1};nr.logarithm=nr.log=function(t){var e,r=this,s=r.constructor,a=s.precision,i=a+5;if(t===void 0)t=new s(10);else if(t=new s(t),t.s<1||t.eq(Lc))throw Error(Vd+"NaN");if(r.s<1)throw Error(Vd+(r.s?"NaN":"-Infinity"));return r.eq(Lc)?new s(0):(ga=!1,e=pm(sw(r,i),sw(t,i),i),ga=!0,qs(e,a))};nr.minus=nr.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?ZG(e,t):QG(e,(t.s=-t.s,t))};nr.modulo=nr.mod=function(t){var e,r=this,s=r.constructor,a=s.precision;if(t=new s(t),!t.s)throw Error(Vd+"NaN");return r.s?(ga=!1,e=pm(r,t,0,1).times(t),ga=!0,r.minus(e)):qs(new s(r),a)};nr.naturalExponential=nr.exp=function(){return JG(this)};nr.naturalLogarithm=nr.ln=function(){return sw(this)};nr.negated=nr.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};nr.plus=nr.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?QG(e,t):ZG(e,(t.s=-t.s,t))};nr.precision=nr.sd=function(t){var e,r,s,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(u0+t);if(e=si(a)+1,s=a.d.length-1,r=s*oa+1,s=a.d[s],s){for(;s%10==0;s/=10)r--;for(s=a.d[0];s>=10;s/=10)r++}return t&&e>r?e:r};nr.squareRoot=nr.sqrt=function(){var t,e,r,s,a,i,o,l=this,d=l.constructor;if(l.s<1){if(!l.s)return new d(0);throw Error(Vd+"NaN")}for(t=si(l),ga=!1,a=Math.sqrt(+l),a==0||a==1/0?(e=Qh(l.d),(e.length+t)%2==0&&(e+="0"),a=Math.sqrt(e),t=jv((t+1)/2)-(t<0||t%2),a==1/0?e="5e"+t:(e=a.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),s=new d(e)):s=new d(a.toString()),r=d.precision,a=o=r+3;;)if(i=s,s=i.plus(pm(l,i,o+2)).times(.5),Qh(i.d).slice(0,o)===(e=Qh(s.d)).slice(0,o)){if(e=e.slice(o-3,o+1),a==o&&e=="4999"){if(qs(i,r+1,0),i.times(i).eq(l)){s=i;break}}else if(e!="9999")break;o+=4}return ga=!0,qs(s,r)};nr.times=nr.mul=function(t){var e,r,s,a,i,o,l,d,h,f=this,m=f.constructor,x=f.d,b=(t=new m(t)).d;if(!f.s||!t.s)return new m(0);for(t.s*=f.s,r=f.e+t.e,d=x.length,h=b.length,d<h&&(i=x,x=b,b=i,o=d,d=h,h=o),i=[],o=d+h,s=o;s--;)i.push(0);for(s=h;--s>=0;){for(e=0,a=d+s;a>s;)l=i[a]+b[s]*x[a-s-1]+e,i[a--]=l%zi|0,e=l/zi|0;i[a]=(i[a]+e)%zi|0}for(;!i[--o];)i.pop();return e?++r:i.shift(),t.d=i,t.e=r,ga?qs(t,m.precision):t};nr.toDecimalPlaces=nr.todp=function(t,e){var r=this,s=r.constructor;return r=new s(r),t===void 0?r:(cf(t,0,Nv),e===void 0?e=s.rounding:cf(e,0,8),qs(r,t+si(r)+1,e))};nr.toExponential=function(t,e){var r,s=this,a=s.constructor;return t===void 0?r=k0(s,!0):(cf(t,0,Nv),e===void 0?e=a.rounding:cf(e,0,8),s=qs(new a(s),t+1,e),r=k0(s,!0,t+1)),r};nr.toFixed=function(t,e){var r,s,a=this,i=a.constructor;return t===void 0?k0(a):(cf(t,0,Nv),e===void 0?e=i.rounding:cf(e,0,8),s=qs(new i(a),t+si(a)+1,e),r=k0(s.abs(),!1,t+si(s)+1),a.isneg()&&!a.isZero()?"-"+r:r)};nr.toInteger=nr.toint=function(){var t=this,e=t.constructor;return qs(new e(t),si(t)+1,e.rounding)};nr.toNumber=function(){return+this};nr.toPower=nr.pow=function(t){var e,r,s,a,i,o,l=this,d=l.constructor,h=12,f=+(t=new d(t));if(!t.s)return new d(Lc);if(l=new d(l),!l.s){if(t.s<1)throw Error(Vd+"Infinity");return l}if(l.eq(Lc))return l;if(s=d.precision,t.eq(Lc))return qs(l,s);if(e=t.e,r=t.d.length-1,o=e>=r,i=l.s,o){if((r=f<0?-f:f)<=XG){for(a=new d(Lc),e=Math.ceil(s/oa+4),ga=!1;r%2&&(a=a.times(l),H8(a.d,e)),r=jv(r/2),r!==0;)l=l.times(l),H8(l.d,e);return ga=!0,t.s<0?new d(Lc).div(a):qs(a,s)}}else if(i<0)throw Error(Vd+"NaN");return i=i<0&&t.d[Math.max(e,r)]&1?-1:1,l.s=1,ga=!1,a=t.times(sw(l,s+h)),ga=!0,a=JG(a),a.s=i,a};nr.toPrecision=function(t,e){var r,s,a=this,i=a.constructor;return t===void 0?(r=si(a),s=k0(a,r<=i.toExpNeg||r>=i.toExpPos)):(cf(t,1,Nv),e===void 0?e=i.rounding:cf(e,0,8),a=qs(new i(a),t,e),r=si(a),s=k0(a,t<=r||r<=i.toExpNeg,t)),s};nr.toSignificantDigits=nr.tosd=function(t,e){var r=this,s=r.constructor;return t===void 0?(t=s.precision,e=s.rounding):(cf(t,1,Nv),e===void 0?e=s.rounding:cf(e,0,8)),qs(new s(r),t,e)};nr.toString=nr.valueOf=nr.val=nr.toJSON=nr[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=si(t),r=t.constructor;return k0(t,e<=r.toExpNeg||e>=r.toExpPos)};function QG(t,e){var r,s,a,i,o,l,d,h,f=t.constructor,m=f.precision;if(!t.s||!e.s)return e.s||(e=new f(t)),ga?qs(e,m):e;if(d=t.d,h=e.d,o=t.e,a=e.e,d=d.slice(),i=o-a,i){for(i<0?(s=d,i=-i,l=h.length):(s=h,a=o,l=d.length),o=Math.ceil(m/oa),l=o>l?o+1:l+1,i>l&&(i=l,s.length=1),s.reverse();i--;)s.push(0);s.reverse()}for(l=d.length,i=h.length,l-i<0&&(i=l,s=h,h=d,d=s),r=0;i;)r=(d[--i]=d[i]+h[i]+r)/zi|0,d[i]%=zi;for(r&&(d.unshift(r),++a),l=d.length;d[--l]==0;)d.pop();return e.d=d,e.e=a,ga?qs(e,m):e}function cf(t,e,r){if(t!==~~t||t<e||t>r)throw Error(u0+t)}function Qh(t){var e,r,s,a=t.length-1,i="",o=t[0];if(a>0){for(i+=o,e=1;e<a;e++)s=t[e]+"",r=oa-s.length,r&&(i+=wp(r)),i+=s;o=t[e],s=o+"",r=oa-s.length,r&&(i+=wp(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var pm=(function(){function t(s,a){var i,o=0,l=s.length;for(s=s.slice();l--;)i=s[l]*a+o,s[l]=i%zi|0,o=i/zi|0;return o&&s.unshift(o),s}function e(s,a,i,o){var l,d;if(i!=o)d=i>o?1:-1;else for(l=d=0;l<i;l++)if(s[l]!=a[l]){d=s[l]>a[l]?1:-1;break}return d}function r(s,a,i){for(var o=0;i--;)s[i]-=o,o=s[i]<a[i]?1:0,s[i]=o*zi+s[i]-a[i];for(;!s[0]&&s.length>1;)s.shift()}return function(s,a,i,o){var l,d,h,f,m,x,b,j,N,w,C,T,O,I,P,A,R,B,V=s.constructor,X=s.s==a.s?1:-1,ee=s.d,Y=a.d;if(!s.s)return new V(s);if(!a.s)throw Error(Vd+"Division by zero");for(d=s.e-a.e,R=Y.length,P=ee.length,b=new V(X),j=b.d=[],h=0;Y[h]==(ee[h]||0);)++h;if(Y[h]>(ee[h]||0)&&--d,i==null?T=i=V.precision:o?T=i+(si(s)-si(a))+1:T=i,T<0)return new V(0);if(T=T/oa+2|0,h=0,R==1)for(f=0,Y=Y[0],T++;(h<P||f)&&T--;h++)O=f*zi+(ee[h]||0),j[h]=O/Y|0,f=O%Y|0;else{for(f=zi/(Y[0]+1)|0,f>1&&(Y=t(Y,f),ee=t(ee,f),R=Y.length,P=ee.length),I=R,N=ee.slice(0,R),w=N.length;w<R;)N[w++]=0;B=Y.slice(),B.unshift(0),A=Y[0],Y[1]>=zi/2&&++A;do f=0,l=e(Y,N,R,w),l<0?(C=N[0],R!=w&&(C=C*zi+(N[1]||0)),f=C/A|0,f>1?(f>=zi&&(f=zi-1),m=t(Y,f),x=m.length,w=N.length,l=e(m,N,x,w),l==1&&(f--,r(m,R<x?B:Y,x))):(f==0&&(l=f=1),m=Y.slice()),x=m.length,x<w&&m.unshift(0),r(N,m,w),l==-1&&(w=N.length,l=e(Y,N,R,w),l<1&&(f++,r(N,R<w?B:Y,w))),w=N.length):l===0&&(f++,N=[0]),j[h++]=f,l&&N[0]?N[w++]=ee[I]||0:(N=[ee[I]],w=1);while((I++<P||N[0]!==void 0)&&T--)}return j[0]||j.shift(),b.e=d,qs(b,o?i+si(b)+1:i)}})();function JG(t,e){var r,s,a,i,o,l,d=0,h=0,f=t.constructor,m=f.precision;if(si(t)>16)throw Error(J_+si(t));if(!t.s)return new f(Lc);for(ga=!1,l=m,o=new f(.03125);t.abs().gte(.1);)t=t.times(o),h+=5;for(s=Math.log(Fg(2,h))/Math.LN10*2+5|0,l+=s,r=a=i=new f(Lc),f.precision=l;;){if(a=qs(a.times(t),l),r=r.times(++d),o=i.plus(pm(a,r,l)),Qh(o.d).slice(0,l)===Qh(i.d).slice(0,l)){for(;h--;)i=qs(i.times(i),l);return f.precision=m,e==null?(ga=!0,qs(i,m)):i}i=o}}function si(t){for(var e=t.e*oa,r=t.d[0];r>=10;r/=10)e++;return e}function _T(t,e,r){if(e>t.LN10.sd())throw ga=!0,r&&(t.precision=r),Error(Vd+"LN10 precision limit exceeded");return qs(new t(t.LN10),e)}function wp(t){for(var e="";t--;)e+="0";return e}function sw(t,e){var r,s,a,i,o,l,d,h,f,m=1,x=10,b=t,j=b.d,N=b.constructor,w=N.precision;if(b.s<1)throw Error(Vd+(b.s?"NaN":"-Infinity"));if(b.eq(Lc))return new N(0);if(e==null?(ga=!1,h=w):h=e,b.eq(10))return e==null&&(ga=!0),_T(N,h);if(h+=x,N.precision=h,r=Qh(j),s=r.charAt(0),i=si(b),Math.abs(i)<15e14){for(;s<7&&s!=1||s==1&&r.charAt(1)>3;)b=b.times(t),r=Qh(b.d),s=r.charAt(0),m++;i=si(b),s>1?(b=new N("0."+r),i++):b=new N(s+"."+r.slice(1))}else return d=_T(N,h+2,w).times(i+""),b=sw(new N(s+"."+r.slice(1)),h-x).plus(d),N.precision=w,e==null?(ga=!0,qs(b,w)):b;for(l=o=b=pm(b.minus(Lc),b.plus(Lc),h),f=qs(b.times(b),h),a=3;;){if(o=qs(o.times(f),h),d=l.plus(pm(o,new N(a),h)),Qh(d.d).slice(0,h)===Qh(l.d).slice(0,h))return l=l.times(2),i!==0&&(l=l.plus(_T(N,h+2,w).times(i+""))),l=pm(l,new N(m),h),N.precision=w,e==null?(ga=!0,qs(l,w)):l;l=d,a+=2}}function q8(t,e){var r,s,a;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(s=e.search(/e/i))>0?(r<0&&(r=s),r+=+e.slice(s+1),e=e.substring(0,s)):r<0&&(r=e.length),s=0;e.charCodeAt(s)===48;)++s;for(a=e.length;e.charCodeAt(a-1)===48;)--a;if(e=e.slice(s,a),e){if(a-=s,r=r-s-1,t.e=jv(r/oa),t.d=[],s=(r+1)%oa,r<0&&(s+=oa),s<a){for(s&&t.d.push(+e.slice(0,s)),a-=oa;s<a;)t.d.push(+e.slice(s,s+=oa));e=e.slice(s),s=oa-e.length}else s-=a;for(;s--;)e+="0";if(t.d.push(+e),ga&&(t.e>Wj||t.e<-Wj))throw Error(J_+r)}else t.s=0,t.e=0,t.d=[0];return t}function qs(t,e,r){var s,a,i,o,l,d,h,f,m=t.d;for(o=1,i=m[0];i>=10;i/=10)o++;if(s=e-o,s<0)s+=oa,a=e,h=m[f=0];else{if(f=Math.ceil((s+1)/oa),i=m.length,f>=i)return t;for(h=i=m[f],o=1;i>=10;i/=10)o++;s%=oa,a=s-oa+o}if(r!==void 0&&(i=Fg(10,o-a-1),l=h/i%10|0,d=e<0||m[f+1]!==void 0||h%i,d=r<4?(l||d)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||d||r==6&&(s>0?a>0?h/Fg(10,o-a):0:m[f-1])%10&1||r==(t.s<0?8:7))),e<1||!m[0])return d?(i=si(t),m.length=1,e=e-i-1,m[0]=Fg(10,(oa-e%oa)%oa),t.e=jv(-e/oa)||0):(m.length=1,m[0]=t.e=t.s=0),t;if(s==0?(m.length=f,i=1,f--):(m.length=f+1,i=Fg(10,oa-s),m[f]=a>0?(h/Fg(10,o-a)%Fg(10,a)|0)*i:0),d)for(;;)if(f==0){(m[0]+=i)==zi&&(m[0]=1,++t.e);break}else{if(m[f]+=i,m[f]!=zi)break;m[f--]=0,i=1}for(s=m.length;m[--s]===0;)m.pop();if(ga&&(t.e>Wj||t.e<-Wj))throw Error(J_+si(t));return t}function ZG(t,e){var r,s,a,i,o,l,d,h,f,m,x=t.constructor,b=x.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new x(t),ga?qs(e,b):e;if(d=t.d,m=e.d,s=e.e,h=t.e,d=d.slice(),o=h-s,o){for(f=o<0,f?(r=d,o=-o,l=m.length):(r=m,s=h,l=d.length),a=Math.max(Math.ceil(b/oa),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=d.length,l=m.length,f=a<l,f&&(l=a),a=0;a<l;a++)if(d[a]!=m[a]){f=d[a]<m[a];break}o=0}for(f&&(r=d,d=m,m=r,e.s=-e.s),l=d.length,a=m.length-l;a>0;--a)d[l++]=0;for(a=m.length;a>o;){if(d[--a]<m[a]){for(i=a;i&&d[--i]===0;)d[i]=zi-1;--d[i],d[a]+=zi}d[a]-=m[a]}for(;d[--l]===0;)d.pop();for(;d[0]===0;d.shift())--s;return d[0]?(e.d=d,e.e=s,ga?qs(e,b):e):new x(0)}function k0(t,e,r){var s,a=si(t),i=Qh(t.d),o=i.length;return e?(r&&(s=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+wp(s):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+wp(-a-1)+i,r&&(s=r-o)>0&&(i+=wp(s))):a>=o?(i+=wp(a+1-o),r&&(s=r-a-1)>0&&(i=i+"."+wp(s))):((s=a+1)<o&&(i=i.slice(0,s)+"."+i.slice(s)),r&&(s=r-o)>0&&(a+1===o&&(i+="."),i+=wp(s))),t.s<0?"-"+i:i}function H8(t,e){if(t.length>e)return t.length=e,!0}function eX(t){var e,r,s;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(u0+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return q8(o,i.toString())}else if(typeof i!="string")throw Error(u0+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,lwe.test(i))q8(o,i);else throw Error(u0+i)}if(a.prototype=nr,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=eX,a.config=a.set=cwe,t===void 0&&(t={}),t)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<s.length;)t.hasOwnProperty(r=s[e++])||(t[r]=this[r]);return a.config(t),a}function cwe(t){if(!t||typeof t!="object")throw Error(Vd+"Object expected");var e,r,s,a=["precision",1,Nv,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<a.length;e+=3)if((s=t[r=a[e]])!==void 0)if(jv(s)===s&&s>=a[e+1]&&s<=a[e+2])this[r]=s;else throw Error(u0+r+": "+s);if((s=t[r="LN10"])!==void 0)if(s==Math.LN10)this[r]=new this(s);else throw Error(u0+r+": "+s);return this}var Z_=eX(owe);Lc=new Z_(1);const Rs=Z_;function dwe(t){return mwe(t)||fwe(t)||hwe(t)||uwe()}function uwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hwe(t,e){if(t){if(typeof t=="string")return ZP(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ZP(t,e)}}function fwe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function mwe(t){if(Array.isArray(t))return ZP(t)}function ZP(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}var pwe=function(e){return e},tX={},rX=function(e){return e===tX},W8=function(e){return function r(){return arguments.length===0||arguments.length===1&&rX(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},gwe=function t(e,r){return e===1?r:W8(function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];var o=a.filter(function(l){return l!==tX}).length;return o>=e?r.apply(void 0,a):t(e-o,W8(function(){for(var l=arguments.length,d=new Array(l),h=0;h<l;h++)d[h]=arguments[h];var f=a.map(function(m){return rX(m)?d.shift():m});return r.apply(void 0,dwe(f).concat(d))}))})},YS=function(e){return gwe(e.length,e)},e5=function(e,r){for(var s=[],a=e;a<r;++a)s[a-e]=a;return s},xwe=YS(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),ywe=function(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];if(!r.length)return pwe;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(l,d){return d(l)},i.apply(void 0,arguments))}},t5=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},nX=function(e){var r=null,s=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r&&i.every(function(l,d){return l===r[d]})||(r=i,s=e.apply(void 0,i)),s}};function vwe(t){var e;return t===0?e=1:e=Math.floor(new Rs(t).abs().log(10).toNumber())+1,e}function bwe(t,e,r){for(var s=new Rs(t),a=0,i=[];s.lt(e)&&a<1e5;)i.push(s.toNumber()),s=s.add(r),a++;return i}var wwe=YS(function(t,e,r){var s=+t,a=+e;return s+r*(a-s)}),Nwe=YS(function(t,e,r){var s=e-+t;return s=s||1/0,(r-t)/s}),jwe=YS(function(t,e,r){var s=e-+t;return s=s||1/0,Math.max(0,Math.min(1,(r-t)/s))});const KS={rangeStep:bwe,getDigitCount:vwe,interpolateNumber:wwe,uninterpolateNumber:Nwe,uninterpolateTruncation:jwe};function r5(t){return Cwe(t)||kwe(t)||sX(t)||Swe()}function Swe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kwe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Cwe(t){if(Array.isArray(t))return n5(t)}function aw(t,e){return Pwe(t)||Twe(t,e)||sX(t,e)||Ewe()}function Ewe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sX(t,e){if(t){if(typeof t=="string")return n5(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n5(t,e)}}function n5(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function Twe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],s=!0,a=!1,i=void 0;try{for(var o=t[Symbol.iterator](),l;!(s=(l=o.next()).done)&&(r.push(l.value),!(e&&r.length===e));s=!0);}catch(d){a=!0,i=d}finally{try{!s&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}}function Pwe(t){if(Array.isArray(t))return t}function aX(t){var e=aw(t,2),r=e[0],s=e[1],a=r,i=s;return r>s&&(a=s,i=r),[a,i]}function iX(t,e,r){if(t.lte(0))return new Rs(0);var s=KS.getDigitCount(t.toNumber()),a=new Rs(10).pow(s),i=t.div(a),o=s!==1?.05:.1,l=new Rs(Math.ceil(i.div(o).toNumber())).add(r).mul(o),d=l.mul(a);return e?d:new Rs(Math.ceil(d))}function Awe(t,e,r){var s=1,a=new Rs(t);if(!a.isint()&&r){var i=Math.abs(t);i<1?(s=new Rs(10).pow(KS.getDigitCount(t)-1),a=new Rs(Math.floor(a.div(s).toNumber())).mul(s)):i>1&&(a=new Rs(Math.floor(t)))}else t===0?a=new Rs(Math.floor((e-1)/2)):r||(a=new Rs(Math.floor(t)));var o=Math.floor((e-1)/2),l=ywe(xwe(function(d){return a.add(new Rs(d-o).mul(s)).toNumber()}),e5);return l(0,e)}function oX(t,e,r,s){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new Rs(0),tickMin:new Rs(0),tickMax:new Rs(0)};var i=iX(new Rs(e).sub(t).div(r-1),s,a),o;t<=0&&e>=0?o=new Rs(0):(o=new Rs(t).add(e).div(2),o=o.sub(new Rs(o).mod(i)));var l=Math.ceil(o.sub(t).div(i).toNumber()),d=Math.ceil(new Rs(e).sub(o).div(i).toNumber()),h=l+d+1;return h>r?oX(t,e,r,s,a+1):(h<r&&(d=e>0?d+(r-h):d,l=e>0?l:l+(r-h)),{step:i,tickMin:o.sub(new Rs(l).mul(i)),tickMax:o.add(new Rs(d).mul(i))})}function _we(t){var e=aw(t,2),r=e[0],s=e[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=aX([r,s]),d=aw(l,2),h=d[0],f=d[1];if(h===-1/0||f===1/0){var m=f===1/0?[h].concat(r5(e5(0,a-1).map(function(){return 1/0}))):[].concat(r5(e5(0,a-1).map(function(){return-1/0})),[f]);return r>s?t5(m):m}if(h===f)return Awe(h,a,i);var x=oX(h,f,o,i),b=x.step,j=x.tickMin,N=x.tickMax,w=KS.rangeStep(j,N.add(new Rs(.1).mul(b)),b);return r>s?t5(w):w}function Iwe(t,e){var r=aw(t,2),s=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=aX([s,a]),l=aw(o,2),d=l[0],h=l[1];if(d===-1/0||h===1/0)return[s,a];if(d===h)return[d];var f=Math.max(e,2),m=iX(new Rs(h).sub(d).div(f-1),i,0),x=[].concat(r5(KS.rangeStep(new Rs(d),new Rs(h).sub(new Rs(.99).mul(m)),m)),[h]);return s>a?t5(x):x}var Mwe=nX(_we),Owe=nX(Iwe),Rwe="Invariant failed";function C0(t,e){throw new Error(Rwe)}var Dwe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Py(t){"@babel/helpers - typeof";return Py=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Py(t)}function Yj(){return Yj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Yj.apply(this,arguments)}function $we(t,e){return Uwe(t)||Bwe(t,e)||Fwe(t,e)||Lwe()}function Lwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fwe(t,e){if(t){if(typeof t=="string")return Y8(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Y8(t,e)}}function Y8(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function Bwe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s,a,i,o,l=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(s=i.call(r)).done)&&(l.push(s.value),l.length!==e);d=!0);}catch(f){h=!0,a=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return l}}function Uwe(t){if(Array.isArray(t))return t}function zwe(t,e){if(t==null)return{};var r=Vwe(t,e),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function Vwe(t,e){if(t==null)return{};var r={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;r[s]=t[s]}return r}function qwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hwe(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,dX(s.key),s)}}function Wwe(t,e,r){return e&&Hwe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ywe(t,e,r){return e=Kj(e),Kwe(t,lX()?Reflect.construct(e,r||[],Kj(t).constructor):e.apply(t,r))}function Kwe(t,e){if(e&&(Py(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gwe(t)}function Gwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lX=function(){return!!t})()}function Kj(t){return Kj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Kj(t)}function Xwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s5(t,e)}function s5(t,e){return s5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},s5(t,e)}function cX(t,e,r){return e=dX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dX(t){var e=Qwe(t,"string");return Py(e)=="symbol"?e:e+""}function Qwe(t,e){if(Py(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Py(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var v1=(function(t){function e(){return qwe(this,e),Ywe(this,e,arguments)}return Xwe(e,t),Wwe(e,[{key:"render",value:function(){var s=this.props,a=s.offset,i=s.layout,o=s.width,l=s.dataKey,d=s.data,h=s.dataPointFormatter,f=s.xAxis,m=s.yAxis,x=zwe(s,Dwe),b=hn(x,!1);this.props.direction==="x"&&f.type!=="number"&&C0();var j=d.map(function(N){var w=h(N,l),C=w.x,T=w.y,O=w.value,I=w.errorVal;if(!I)return null;var P=[],A,R;if(Array.isArray(I)){var B=$we(I,2);A=B[0],R=B[1]}else A=R=I;if(i==="vertical"){var V=f.scale,X=T+a,ee=X+o,Y=X-o,re=V(O-A),le=V(O+R);P.push({x1:le,y1:ee,x2:le,y2:Y}),P.push({x1:re,y1:X,x2:le,y2:X}),P.push({x1:re,y1:ee,x2:re,y2:Y})}else if(i==="horizontal"){var te=m.scale,de=C+a,ie=de-o,Z=de+o,ne=te(O-A),oe=te(O+R);P.push({x1:ie,y1:oe,x2:Z,y2:oe}),P.push({x1:de,y1:ne,x2:de,y2:oe}),P.push({x1:ie,y1:ne,x2:Z,y2:ne})}return $e.createElement(Zs,Yj({className:"recharts-errorBar",key:"bar-".concat(P.map(function(U){return"".concat(U.x1,"-").concat(U.x2,"-").concat(U.y1,"-").concat(U.y2)}))},b),P.map(function(U){return $e.createElement("line",Yj({},U,{key:"line-".concat(U.x1,"-").concat(U.x2,"-").concat(U.y1,"-").concat(U.y2)}))}))});return $e.createElement(Zs,{className:"recharts-errorBars"},j)}}])})($e.Component);cX(v1,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});cX(v1,"displayName","ErrorBar");function iw(t){"@babel/helpers - typeof";return iw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iw(t)}function K8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function Rg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?K8(Object(r),!0).forEach(function(s){Jwe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):K8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Jwe(t,e,r){return e=Zwe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Zwe(t){var e=e1e(t,"string");return iw(e)=="symbol"?e:e+""}function e1e(t,e){if(iw(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(iw(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uX=function(e){var r=e.children,s=e.formattedGraphicalItems,a=e.legendWidth,i=e.legendContent,o=Rc(r,Yx);if(!o)return null;var l=Yx.defaultProps,d=l!==void 0?Rg(Rg({},l),o.props):{},h;return o.props&&o.props.payload?h=o.props&&o.props.payload:i==="children"?h=(s||[]).reduce(function(f,m){var x=m.item,b=m.props,j=b.sectors||b.data||[];return f.concat(j.map(function(N){return{type:o.props.iconType||x.props.legendType,value:N.name,color:N.fill,payload:N}}))},[]):h=(s||[]).map(function(f){var m=f.item,x=m.type.defaultProps,b=x!==void 0?Rg(Rg({},x),m.props):{},j=b.dataKey,N=b.name,w=b.legendType,C=b.hide;return{inactive:C,dataKey:j,type:d.iconType||w||"square",color:eI(m),value:N||j,payload:b}}),Rg(Rg(Rg({},d),Yx.getWithHeight(o,a)),{},{payload:h,item:o})};function ow(t){"@babel/helpers - typeof";return ow=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ow(t)}function G8(t){return s1e(t)||n1e(t)||r1e(t)||t1e()}function t1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r1e(t,e){if(t){if(typeof t=="string")return a5(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a5(t,e)}}function n1e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function s1e(t){if(Array.isArray(t))return a5(t)}function a5(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function X8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function _a(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?X8(Object(r),!0).forEach(function(s){Gx(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):X8(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Gx(t,e,r){return e=a1e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a1e(t){var e=i1e(t,"string");return ow(e)=="symbol"?e:e+""}function i1e(t,e){if(ow(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(ow(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vl(t,e,r){return yn(t)||yn(e)?r:Ni(e)?Fd(t,e,r):gn(e)?e(t):r}function Cb(t,e,r,s){var a=swe(t,function(l){return vl(l,e)});if(r==="number"){var i=a.filter(function(l){return Rt(l)||parseFloat(l)});return i.length?[WS(i),Op(i)]:[1/0,-1/0]}var o=s?a.filter(function(l){return!yn(l)}):a;return o.map(function(l){return Ni(l)||l instanceof Date?l:""})}var o1e=function(e){var r,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=s==null?void 0:s.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var d=i.range,h=0;h<l;h++){var f=h>0?a[h-1].coordinate:a[l-1].coordinate,m=a[h].coordinate,x=h>=l-1?a[0].coordinate:a[h+1].coordinate,b=void 0;if($u(m-f)!==$u(x-m)){var j=[];if($u(x-m)===$u(d[1]-d[0])){b=x;var N=m+d[1]-d[0];j[0]=Math.min(N,(N+f)/2),j[1]=Math.max(N,(N+f)/2)}else{b=f;var w=x+d[1]-d[0];j[0]=Math.min(m,(w+m)/2),j[1]=Math.max(m,(w+m)/2)}var C=[Math.min(m,(b+m)/2),Math.max(m,(b+m)/2)];if(e>C[0]&&e<=C[1]||e>=j[0]&&e<=j[1]){o=a[h].index;break}}else{var T=Math.min(f,x),O=Math.max(f,x);if(e>(T+m)/2&&e<=(O+m)/2){o=a[h].index;break}}}else for(var I=0;I<l;I++)if(I===0&&e<=(s[I].coordinate+s[I+1].coordinate)/2||I>0&&I<l-1&&e>(s[I].coordinate+s[I-1].coordinate)/2&&e<=(s[I].coordinate+s[I+1].coordinate)/2||I===l-1&&e>(s[I].coordinate+s[I-1].coordinate)/2){o=s[I].index;break}return o},eI=function(e){var r,s=e,a=s.type.displayName,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?_a(_a({},e.type.defaultProps),e.props):e.props,o=i.stroke,l=i.fill,d;switch(a){case"Line":d=o;break;case"Area":case"Radar":d=o&&o!=="none"?o:l;break;default:d=l;break}return d},l1e=function(e){var r=e.barSize,s=e.totalSize,a=e.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},l=Object.keys(i),d=0,h=l.length;d<h;d++)for(var f=i[l[d]].stackGroups,m=Object.keys(f),x=0,b=m.length;x<b;x++){var j=f[m[x]],N=j.items,w=j.cateAxisId,C=N.filter(function(R){return mm(R.type).indexOf("Bar")>=0});if(C&&C.length){var T=C[0].type.defaultProps,O=T!==void 0?_a(_a({},T),C[0].props):C[0].props,I=O.barSize,P=O[w];o[P]||(o[P]=[]);var A=yn(I)?r:I;o[P].push({item:C[0],stackList:C.slice(1),barSize:yn(A)?void 0:S0(A,s,0)})}}return o},c1e=function(e){var r=e.barGap,s=e.barCategoryGap,a=e.bandSize,i=e.sizeList,o=i===void 0?[]:i,l=e.maxBarSize,d=o.length;if(d<1)return null;var h=S0(r,a,0,!0),f,m=[];if(o[0].barSize===+o[0].barSize){var x=!1,b=a/d,j=o.reduce(function(I,P){return I+P.barSize||0},0);j+=(d-1)*h,j>=a&&(j-=(d-1)*h,h=0),j>=a&&b>0&&(x=!0,b*=.9,j=d*b);var N=(a-j)/2>>0,w={offset:N-h,size:0};f=o.reduce(function(I,P){var A={item:P.item,position:{offset:w.offset+w.size+h,size:x?b:P.barSize}},R=[].concat(G8(I),[A]);return w=R[R.length-1].position,P.stackList&&P.stackList.length&&P.stackList.forEach(function(B){R.push({item:B,position:w})}),R},m)}else{var C=S0(s,a,0,!0);a-2*C-(d-1)*h<=0&&(h=0);var T=(a-2*C-(d-1)*h)/d;T>1&&(T>>=0);var O=l===+l?Math.min(T,l):T;f=o.reduce(function(I,P,A){var R=[].concat(G8(I),[{item:P.item,position:{offset:C+(T+h)*A+(T-O)/2,size:O}}]);return P.stackList&&P.stackList.length&&P.stackList.forEach(function(B){R.push({item:B,position:R[R.length-1].position})}),R},m)}return f},d1e=function(e,r,s,a){var i=s.children,o=s.width,l=s.margin,d=o-(l.left||0)-(l.right||0),h=uX({children:i,legendWidth:d});if(h){var f=a||{},m=f.width,x=f.height,b=h.align,j=h.verticalAlign,N=h.layout;if((N==="vertical"||N==="horizontal"&&j==="middle")&&b!=="center"&&Rt(e[b]))return _a(_a({},e),{},Gx({},b,e[b]+(m||0)));if((N==="horizontal"||N==="vertical"&&b==="center")&&j!=="middle"&&Rt(e[j]))return _a(_a({},e),{},Gx({},j,e[j]+(x||0)))}return e},u1e=function(e,r,s){return yn(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||s==="x"?r==="xAxis":s==="y"?r==="yAxis":!0},hX=function(e,r,s,a,i){var o=r.props.children,l=Bd(o,v1).filter(function(h){return u1e(a,i,h.props.direction)});if(l&&l.length){var d=l.map(function(h){return h.props.dataKey});return e.reduce(function(h,f){var m=vl(f,s);if(yn(m))return h;var x=Array.isArray(m)?[WS(m),Op(m)]:[m,m],b=d.reduce(function(j,N){var w=vl(f,N,0),C=x[0]-Math.abs(Array.isArray(w)?w[0]:w),T=x[1]+Math.abs(Array.isArray(w)?w[1]:w);return[Math.min(C,j[0]),Math.max(T,j[1])]},[1/0,-1/0]);return[Math.min(b[0],h[0]),Math.max(b[1],h[1])]},[1/0,-1/0])}return null},h1e=function(e,r,s,a,i){var o=r.map(function(l){return hX(e,l,s,i,a)}).filter(function(l){return!yn(l)});return o&&o.length?o.reduce(function(l,d){return[Math.min(l[0],d[0]),Math.max(l[1],d[1])]},[1/0,-1/0]):null},fX=function(e,r,s,a,i){var o=r.map(function(d){var h=d.props.dataKey;return s==="number"&&h&&hX(e,d,h,a)||Cb(e,h,s,i)});if(s==="number")return o.reduce(function(d,h){return[Math.min(d[0],h[0]),Math.max(d[1],h[1])]},[1/0,-1/0]);var l={};return o.reduce(function(d,h){for(var f=0,m=h.length;f<m;f++)l[h[f]]||(l[h[f]]=!0,d.push(h[f]));return d},[])},mX=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},Gg=function(e,r,s){if(!e)return null;var a=e.scale,i=e.duplicateDomain,o=e.type,l=e.range,d=e.realScaleType==="scaleBand"?a.bandwidth()/2:2,h=(r||s)&&o==="category"&&a.bandwidth?a.bandwidth()/d:0;if(h=e.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?$u(l[0]-l[1])*2*h:h,r&&(e.ticks||e.niceTicks)){var f=(e.ticks||e.niceTicks).map(function(m){var x=i?i.indexOf(m):m;return{coordinate:a(x)+h,value:m,offset:h}});return f.filter(function(m){return!yv(m.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(m,x){return{coordinate:a(m)+h,value:m,index:x,offset:h}}):a.ticks&&!s?a.ticks(e.tickCount).map(function(m){return{coordinate:a(m)+h,value:m,offset:h}}):a.domain().map(function(m,x){return{coordinate:a(m)+h,value:i?i[m]:m,index:x,offset:h}})},IT=new WeakMap,kN=function(e,r){if(typeof r!="function")return e;IT.has(e)||IT.set(e,new WeakMap);var s=IT.get(e);if(s.has(r))return s.get(r);var a=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return s.set(r,a),a},f1e=function(e,r,s){var a=e.scale,i=e.type,o=e.layout,l=e.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Zb(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:zj(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!s)?{scale:kb(),realScaleType:"point"}:i==="category"?{scale:Zb(),realScaleType:"band"}:{scale:zj(),realScaleType:"linear"};if(j0(a)){var d="scale".concat(MS(a));return{scale:(R8[d]||kb)(),realScaleType:R8[d]?d:"point"}}return gn(a)?{scale:a}:{scale:kb(),realScaleType:"point"}},Q8=1e-4,m1e=function(e){var r=e.domain();if(!(!r||r.length<=2)){var s=r.length,a=e.range(),i=Math.min(a[0],a[1])-Q8,o=Math.max(a[0],a[1])+Q8,l=e(r[0]),d=e(r[s-1]);(l<i||l>o||d<i||d>o)&&e.domain([r[0],r[s-1]])}},p1e=function(e,r){if(!e)return null;for(var s=0,a=e.length;s<a;s++)if(e[s].item===r)return e[s].position;return null},g1e=function(e,r){if(!r||r.length!==2||!Rt(r[0])||!Rt(r[1]))return e;var s=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[e[0],e[1]];return(!Rt(e[0])||e[0]<s)&&(i[0]=s),(!Rt(e[1])||e[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<s&&(i[1]=s),i},x1e=function(e){var r=e.length;if(!(r<=0))for(var s=0,a=e[0].length;s<a;++s)for(var i=0,o=0,l=0;l<r;++l){var d=yv(e[l][s][1])?e[l][s][0]:e[l][s][1];d>=0?(e[l][s][0]=i,e[l][s][1]=i+d,i=e[l][s][1]):(e[l][s][0]=o,e[l][s][1]=o+d,o=e[l][s][1])}},y1e=function(e){var r=e.length;if(!(r<=0))for(var s=0,a=e[0].length;s<a;++s)for(var i=0,o=0;o<r;++o){var l=yv(e[o][s][1])?e[o][s][0]:e[o][s][1];l>=0?(e[o][s][0]=i,e[o][s][1]=i+l,i=e[o][s][1]):(e[o][s][0]=0,e[o][s][1]=0)}},v1e={sign:x1e,expand:rge,none:by,silhouette:nge,wiggle:sge,positive:y1e},b1e=function(e,r,s){var a=r.map(function(l){return l.props.dataKey}),i=v1e[s],o=tge().keys(a).value(function(l,d){return+vl(l,d,0)}).order(RP).offset(i);return o(e)},w1e=function(e,r,s,a,i,o){if(!e)return null;var l=o?r.reverse():r,d={},h=l.reduce(function(m,x){var b,j=(b=x.type)!==null&&b!==void 0&&b.defaultProps?_a(_a({},x.type.defaultProps),x.props):x.props,N=j.stackId,w=j.hide;if(w)return m;var C=j[s],T=m[C]||{hasStack:!1,stackGroups:{}};if(Ni(N)){var O=T.stackGroups[N]||{numericAxisId:s,cateAxisId:a,items:[]};O.items.push(x),T.hasStack=!0,T.stackGroups[N]=O}else T.stackGroups[vv("_stackId_")]={numericAxisId:s,cateAxisId:a,items:[x]};return _a(_a({},m),{},Gx({},C,T))},d),f={};return Object.keys(h).reduce(function(m,x){var b=h[x];if(b.hasStack){var j={};b.stackGroups=Object.keys(b.stackGroups).reduce(function(N,w){var C=b.stackGroups[w];return _a(_a({},N),{},Gx({},w,{numericAxisId:s,cateAxisId:a,items:C.items,stackedData:b1e(e,C.items,i)}))},j)}return _a(_a({},m),{},Gx({},x,b))},f)},N1e=function(e,r){var s=r.realScaleType,a=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,d=s||r.scale;if(d!=="auto"&&d!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var h=e.domain();if(!h.length)return null;var f=Mwe(h,i,l);return e.domain([WS(f),Op(f)]),{niceTicks:f}}if(i&&a==="number"){var m=e.domain(),x=Owe(m,i,l);return{niceTicks:x}}return null};function Gj(t){var e=t.axis,r=t.ticks,s=t.bandSize,a=t.entry,i=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!yn(a[e.dataKey])){var l=Nj(r,"value",a[e.dataKey]);if(l)return l.coordinate+s/2}return r[i]?r[i].coordinate+s/2:null}var d=vl(a,yn(o)?e.dataKey:o);return yn(d)?null:e.scale(d)}var J8=function(e){var r=e.axis,s=e.ticks,a=e.offset,i=e.bandSize,o=e.entry,l=e.index;if(r.type==="category")return s[l]?s[l].coordinate+a:null;var d=vl(o,r.dataKey,r.domain[l]);return yn(d)?null:r.scale(d)-i/2+a},j1e=function(e){var r=e.numericAxis,s=r.scale.domain();if(r.type==="number"){var a=Math.min(s[0],s[1]),i=Math.max(s[0],s[1]);return a<=0&&i>=0?0:i<0?i:a}return s[0]},S1e=function(e,r){var s,a=(s=e.type)!==null&&s!==void 0&&s.defaultProps?_a(_a({},e.type.defaultProps),e.props):e.props,i=a.stackId;if(Ni(i)){var o=r[i];if(o){var l=o.items.indexOf(e);return l>=0?o.stackedData[l]:null}}return null},k1e=function(e){return e.reduce(function(r,s){return[WS(s.concat([r[0]]).filter(Rt)),Op(s.concat([r[1]]).filter(Rt))]},[1/0,-1/0])},pX=function(e,r,s){return Object.keys(e).reduce(function(a,i){var o=e[i],l=o.stackedData,d=l.reduce(function(h,f){var m=k1e(f.slice(r,s+1));return[Math.min(h[0],m[0]),Math.max(h[1],m[1])]},[1/0,-1/0]);return[Math.min(d[0],a[0]),Math.max(d[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},Z8=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,e$=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,i5=function(e,r,s){if(gn(e))return e(r,s);if(!Array.isArray(e))return r;var a=[];if(Rt(e[0]))a[0]=s?e[0]:Math.min(e[0],r[0]);else if(Z8.test(e[0])){var i=+Z8.exec(e[0])[1];a[0]=r[0]-i}else gn(e[0])?a[0]=e[0](r[0]):a[0]=r[0];if(Rt(e[1]))a[1]=s?e[1]:Math.max(e[1],r[1]);else if(e$.test(e[1])){var o=+e$.exec(e[1])[1];a[1]=r[1]+o}else gn(e[1])?a[1]=e[1](r[1]):a[1]=r[1];return a},Xj=function(e,r,s){if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!s||a>0)return a}if(e&&r&&r.length>=2){for(var i=T_(r,function(m){return m.coordinate}),o=1/0,l=1,d=i.length;l<d;l++){var h=i[l],f=i[l-1];o=Math.min((h.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return s?void 0:0},t$=function(e,r,s){return!e||!e.length||Ty(e,Fd(s,"type.defaultProps.domain"))?r:e},gX=function(e,r){var s=e.type.defaultProps?_a(_a({},e.type.defaultProps),e.props):e.props,a=s.dataKey,i=s.name,o=s.unit,l=s.formatter,d=s.tooltipType,h=s.chartType,f=s.hide;return _a(_a({},hn(e,!1)),{},{dataKey:a,unit:o,formatter:l,name:i||a,color:eI(e),value:vl(r,a),type:d,payload:r,chartType:h,hide:f})};function lw(t){"@babel/helpers - typeof";return lw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lw(t)}function r$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function n$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?r$(Object(r),!0).forEach(function(s){C1e(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):r$(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function C1e(t,e,r){return e=E1e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function E1e(t){var e=T1e(t,"string");return lw(e)=="symbol"?e:e+""}function T1e(t,e){if(lw(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(lw(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Qj=Math.PI/180,P1e=function(e){return e*180/Math.PI},bo=function(e,r,s,a){return{x:e+Math.cos(-Qj*a)*s,y:r+Math.sin(-Qj*a)*s}},A1e=function(e,r){var s=e.x,a=e.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(s-i,2)+Math.pow(a-o,2))},_1e=function(e,r){var s=e.x,a=e.y,i=r.cx,o=r.cy,l=A1e({x:s,y:a},{x:i,y:o});if(l<=0)return{radius:l};var d=(s-i)/l,h=Math.acos(d);return a>o&&(h=2*Math.PI-h),{radius:l,angle:P1e(h),angleInRadian:h}},I1e=function(e){var r=e.startAngle,s=e.endAngle,a=Math.floor(r/360),i=Math.floor(s/360),o=Math.min(a,i);return{startAngle:r-o*360,endAngle:s-o*360}},M1e=function(e,r){var s=r.startAngle,a=r.endAngle,i=Math.floor(s/360),o=Math.floor(a/360),l=Math.min(i,o);return e+l*360},s$=function(e,r){var s=e.x,a=e.y,i=_1e({x:s,y:a},r),o=i.radius,l=i.angle,d=r.innerRadius,h=r.outerRadius;if(o<d||o>h)return!1;if(o===0)return!0;var f=I1e(r),m=f.startAngle,x=f.endAngle,b=l,j;if(m<=x){for(;b>x;)b-=360;for(;b<m;)b+=360;j=b>=m&&b<=x}else{for(;b>m;)b-=360;for(;b<x;)b+=360;j=b>=x&&b<=m}return j?n$(n$({},r),{},{radius:o,angle:M1e(b,r)}):null};function cw(t){"@babel/helpers - typeof";return cw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cw(t)}var O1e=["offset"];function R1e(t){return F1e(t)||L1e(t)||$1e(t)||D1e()}function D1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $1e(t,e){if(t){if(typeof t=="string")return o5(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o5(t,e)}}function L1e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function F1e(t){if(Array.isArray(t))return o5(t)}function o5(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function B1e(t,e){if(t==null)return{};var r=U1e(t,e),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function U1e(t,e){if(t==null)return{};var r={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;r[s]=t[s]}return r}function a$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function xi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?a$(Object(r),!0).forEach(function(s){z1e(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a$(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function z1e(t,e,r){return e=V1e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function V1e(t){var e=q1e(t,"string");return cw(e)=="symbol"?e:e+""}function q1e(t,e){if(cw(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(cw(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dw(){return dw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},dw.apply(this,arguments)}var H1e=function(e){var r=e.value,s=e.formatter,a=yn(e.children)?r:e.children;return gn(s)?s(a):a},W1e=function(e,r){var s=$u(r-e),a=Math.min(Math.abs(r-e),360);return s*a},Y1e=function(e,r,s){var a=e.position,i=e.viewBox,o=e.offset,l=e.className,d=i,h=d.cx,f=d.cy,m=d.innerRadius,x=d.outerRadius,b=d.startAngle,j=d.endAngle,N=d.clockWise,w=(m+x)/2,C=W1e(b,j),T=C>=0?1:-1,O,I;a==="insideStart"?(O=b+T*o,I=N):a==="insideEnd"?(O=j-T*o,I=!N):a==="end"&&(O=j+T*o,I=N),I=C<=0?I:!I;var P=bo(h,f,w,O),A=bo(h,f,w,O+(I?1:-1)*359),R="M".concat(P.x,",").concat(P.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(I?0:1,`,
    `).concat(A.x,",").concat(A.y),B=yn(e.id)?vv("recharts-radial-line-"):e.id;return $e.createElement("text",dw({},s,{dominantBaseline:"central",className:jn("recharts-radial-bar-label",l)}),$e.createElement("defs",null,$e.createElement("path",{id:B,d:R})),$e.createElement("textPath",{xlinkHref:"#".concat(B)},r))},K1e=function(e){var r=e.viewBox,s=e.offset,a=e.position,i=r,o=i.cx,l=i.cy,d=i.innerRadius,h=i.outerRadius,f=i.startAngle,m=i.endAngle,x=(f+m)/2;if(a==="outside"){var b=bo(o,l,h+s,x),j=b.x,N=b.y;return{x:j,y:N,textAnchor:j>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var w=(d+h)/2,C=bo(o,l,w,x),T=C.x,O=C.y;return{x:T,y:O,textAnchor:"middle",verticalAnchor:"middle"}},G1e=function(e){var r=e.viewBox,s=e.parentViewBox,a=e.offset,i=e.position,o=r,l=o.x,d=o.y,h=o.width,f=o.height,m=f>=0?1:-1,x=m*a,b=m>0?"end":"start",j=m>0?"start":"end",N=h>=0?1:-1,w=N*a,C=N>0?"end":"start",T=N>0?"start":"end";if(i==="top"){var O={x:l+h/2,y:d-m*a,textAnchor:"middle",verticalAnchor:b};return xi(xi({},O),s?{height:Math.max(d-s.y,0),width:h}:{})}if(i==="bottom"){var I={x:l+h/2,y:d+f+x,textAnchor:"middle",verticalAnchor:j};return xi(xi({},I),s?{height:Math.max(s.y+s.height-(d+f),0),width:h}:{})}if(i==="left"){var P={x:l-w,y:d+f/2,textAnchor:C,verticalAnchor:"middle"};return xi(xi({},P),s?{width:Math.max(P.x-s.x,0),height:f}:{})}if(i==="right"){var A={x:l+h+w,y:d+f/2,textAnchor:T,verticalAnchor:"middle"};return xi(xi({},A),s?{width:Math.max(s.x+s.width-A.x,0),height:f}:{})}var R=s?{width:h,height:f}:{};return i==="insideLeft"?xi({x:l+w,y:d+f/2,textAnchor:T,verticalAnchor:"middle"},R):i==="insideRight"?xi({x:l+h-w,y:d+f/2,textAnchor:C,verticalAnchor:"middle"},R):i==="insideTop"?xi({x:l+h/2,y:d+x,textAnchor:"middle",verticalAnchor:j},R):i==="insideBottom"?xi({x:l+h/2,y:d+f-x,textAnchor:"middle",verticalAnchor:b},R):i==="insideTopLeft"?xi({x:l+w,y:d+x,textAnchor:T,verticalAnchor:j},R):i==="insideTopRight"?xi({x:l+h-w,y:d+x,textAnchor:C,verticalAnchor:j},R):i==="insideBottomLeft"?xi({x:l+w,y:d+f-x,textAnchor:T,verticalAnchor:b},R):i==="insideBottomRight"?xi({x:l+h-w,y:d+f-x,textAnchor:C,verticalAnchor:b},R):xv(i)&&(Rt(i.x)||Wg(i.x))&&(Rt(i.y)||Wg(i.y))?xi({x:l+S0(i.x,h),y:d+S0(i.y,f),textAnchor:"end",verticalAnchor:"end"},R):xi({x:l+h/2,y:d+f/2,textAnchor:"middle",verticalAnchor:"middle"},R)},X1e=function(e){return"cx"in e&&Rt(e.cx)};function zo(t){var e=t.offset,r=e===void 0?5:e,s=B1e(t,O1e),a=xi({offset:r},s),i=a.viewBox,o=a.position,l=a.value,d=a.children,h=a.content,f=a.className,m=f===void 0?"":f,x=a.textBreakAll;if(!i||yn(l)&&yn(d)&&!g.isValidElement(h)&&!gn(h))return null;if(g.isValidElement(h))return g.cloneElement(h,a);var b;if(gn(h)){if(b=g.createElement(h,a),g.isValidElement(b))return b}else b=H1e(a);var j=X1e(i),N=hn(a,!0);if(j&&(o==="insideStart"||o==="insideEnd"||o==="end"))return Y1e(a,b,N);var w=j?K1e(a):G1e(a);return $e.createElement(Rj,dw({className:jn("recharts-label",m)},N,w,{breakAll:x}),b)}zo.displayName="Label";var xX=function(e){var r=e.cx,s=e.cy,a=e.angle,i=e.startAngle,o=e.endAngle,l=e.r,d=e.radius,h=e.innerRadius,f=e.outerRadius,m=e.x,x=e.y,b=e.top,j=e.left,N=e.width,w=e.height,C=e.clockWise,T=e.labelViewBox;if(T)return T;if(Rt(N)&&Rt(w)){if(Rt(m)&&Rt(x))return{x:m,y:x,width:N,height:w};if(Rt(b)&&Rt(j))return{x:b,y:j,width:N,height:w}}return Rt(m)&&Rt(x)?{x:m,y:x,width:0,height:0}:Rt(r)&&Rt(s)?{cx:r,cy:s,startAngle:i||a||0,endAngle:o||a||0,innerRadius:h||0,outerRadius:f||d||l||0,clockWise:C}:e.viewBox?e.viewBox:{}},Q1e=function(e,r){return e?e===!0?$e.createElement(zo,{key:"label-implicit",viewBox:r}):Ni(e)?$e.createElement(zo,{key:"label-implicit",viewBox:r,value:e}):g.isValidElement(e)?e.type===zo?g.cloneElement(e,{key:"label-implicit",viewBox:r}):$e.createElement(zo,{key:"label-implicit",content:e,viewBox:r}):gn(e)?$e.createElement(zo,{key:"label-implicit",content:e,viewBox:r}):xv(e)?$e.createElement(zo,dw({viewBox:r},e,{key:"label-implicit"})):null:null},J1e=function(e,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&s&&!e.label)return null;var a=e.children,i=xX(e),o=Bd(a,zo).map(function(d,h){return g.cloneElement(d,{viewBox:r||i,key:"label-".concat(h)})});if(!s)return o;var l=Q1e(e.label,r||i);return[l].concat(R1e(o))};zo.parseViewBox=xX;zo.renderCallByParent=J1e;var MT,i$;function Z1e(){if(i$)return MT;i$=1;function t(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}return MT=t,MT}var eNe=Z1e();const tNe=Hs(eNe);function uw(t){"@babel/helpers - typeof";return uw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uw(t)}var rNe=["valueAccessor"],nNe=["data","dataKey","clockWise","id","textBreakAll"];function sNe(t){return lNe(t)||oNe(t)||iNe(t)||aNe()}function aNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iNe(t,e){if(t){if(typeof t=="string")return l5(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l5(t,e)}}function oNe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function lNe(t){if(Array.isArray(t))return l5(t)}function l5(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function Jj(){return Jj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Jj.apply(this,arguments)}function o$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function l$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?o$(Object(r),!0).forEach(function(s){cNe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o$(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function cNe(t,e,r){return e=dNe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dNe(t){var e=uNe(t,"string");return uw(e)=="symbol"?e:e+""}function uNe(t,e){if(uw(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(uw(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function c$(t,e){if(t==null)return{};var r=hNe(t,e),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function hNe(t,e){if(t==null)return{};var r={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;r[s]=t[s]}return r}var fNe=function(e){return Array.isArray(e.value)?tNe(e.value):e.value};function gm(t){var e=t.valueAccessor,r=e===void 0?fNe:e,s=c$(t,rNe),a=s.data,i=s.dataKey,o=s.clockWise,l=s.id,d=s.textBreakAll,h=c$(s,nNe);return!a||!a.length?null:$e.createElement(Zs,{className:"recharts-label-list"},a.map(function(f,m){var x=yn(i)?r(f,m):vl(f&&f.payload,i),b=yn(l)?{}:{id:"".concat(l,"-").concat(m)};return $e.createElement(zo,Jj({},hn(f,!0),h,b,{parentViewBox:f.parentViewBox,value:x,textBreakAll:d,viewBox:zo.parseViewBox(yn(o)?f:l$(l$({},f),{},{clockWise:o})),key:"label-".concat(m),index:m}))}))}gm.displayName="LabelList";function mNe(t,e){return t?t===!0?$e.createElement(gm,{key:"labelList-implicit",data:e}):$e.isValidElement(t)||gn(t)?$e.createElement(gm,{key:"labelList-implicit",data:e,content:t}):xv(t)?$e.createElement(gm,Jj({data:e},t,{key:"labelList-implicit"})):null:null}function pNe(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var s=t.children,a=Bd(s,gm).map(function(o,l){return g.cloneElement(o,{data:e,key:"labelList-".concat(l)})});if(!r)return a;var i=mNe(t.label,e);return[i].concat(sNe(a))}gm.renderCallByParent=pNe;function hw(t){"@babel/helpers - typeof";return hw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hw(t)}function c5(){return c5=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},c5.apply(this,arguments)}function d$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function u$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?d$(Object(r),!0).forEach(function(s){gNe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d$(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function gNe(t,e,r){return e=xNe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xNe(t){var e=yNe(t,"string");return hw(e)=="symbol"?e:e+""}function yNe(t,e){if(hw(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(hw(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vNe=function(e,r){var s=$u(r-e),a=Math.min(Math.abs(r-e),359.999);return s*a},CN=function(e){var r=e.cx,s=e.cy,a=e.radius,i=e.angle,o=e.sign,l=e.isExternal,d=e.cornerRadius,h=e.cornerIsExternal,f=d*(l?1:-1)+a,m=Math.asin(d/f)/Qj,x=h?i:i+o*m,b=bo(r,s,f,x),j=bo(r,s,a,x),N=h?i-o*m:i,w=bo(r,s,f*Math.cos(m*Qj),N);return{center:b,circleTangency:j,lineTangency:w,theta:m}},yX=function(e){var r=e.cx,s=e.cy,a=e.innerRadius,i=e.outerRadius,o=e.startAngle,l=e.endAngle,d=vNe(o,l),h=o+d,f=bo(r,s,i,o),m=bo(r,s,i,h),x="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(d)>180),",").concat(+(o>h),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(a>0){var b=bo(r,s,a,o),j=bo(r,s,a,h);x+="L ".concat(j.x,",").concat(j.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(d)>180),",").concat(+(o<=h),`,
            `).concat(b.x,",").concat(b.y," Z")}else x+="L ".concat(r,",").concat(s," Z");return x},bNe=function(e){var r=e.cx,s=e.cy,a=e.innerRadius,i=e.outerRadius,o=e.cornerRadius,l=e.forceCornerRadius,d=e.cornerIsExternal,h=e.startAngle,f=e.endAngle,m=$u(f-h),x=CN({cx:r,cy:s,radius:i,angle:h,sign:m,cornerRadius:o,cornerIsExternal:d}),b=x.circleTangency,j=x.lineTangency,N=x.theta,w=CN({cx:r,cy:s,radius:i,angle:f,sign:-m,cornerRadius:o,cornerIsExternal:d}),C=w.circleTangency,T=w.lineTangency,O=w.theta,I=d?Math.abs(h-f):Math.abs(h-f)-N-O;if(I<0)return l?"M ".concat(j.x,",").concat(j.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):yX({cx:r,cy:s,innerRadius:a,outerRadius:i,startAngle:h,endAngle:f});var P="M ".concat(j.x,",").concat(j.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(I>180),",").concat(+(m<0),",").concat(C.x,",").concat(C.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(T.x,",").concat(T.y,`
  `);if(a>0){var A=CN({cx:r,cy:s,radius:a,angle:h,sign:m,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),R=A.circleTangency,B=A.lineTangency,V=A.theta,X=CN({cx:r,cy:s,radius:a,angle:f,sign:-m,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),ee=X.circleTangency,Y=X.lineTangency,re=X.theta,le=d?Math.abs(h-f):Math.abs(h-f)-V-re;if(le<0&&o===0)return"".concat(P,"L").concat(r,",").concat(s,"Z");P+="L".concat(Y.x,",").concat(Y.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(ee.x,",").concat(ee.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(le>180),",").concat(+(m>0),",").concat(R.x,",").concat(R.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(B.x,",").concat(B.y,"Z")}else P+="L".concat(r,",").concat(s,"Z");return P},wNe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},vX=function(e){var r=u$(u$({},wNe),e),s=r.cx,a=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,d=r.forceCornerRadius,h=r.cornerIsExternal,f=r.startAngle,m=r.endAngle,x=r.className;if(o<i||f===m)return null;var b=jn("recharts-sector",x),j=o-i,N=S0(l,j,0,!0),w;return N>0&&Math.abs(f-m)<360?w=bNe({cx:s,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(N,j/2),forceCornerRadius:d,cornerIsExternal:h,startAngle:f,endAngle:m}):w=yX({cx:s,cy:a,innerRadius:i,outerRadius:o,startAngle:f,endAngle:m}),$e.createElement("path",c5({},hn(r,!0),{className:b,d:w,role:"img"}))};function fw(t){"@babel/helpers - typeof";return fw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fw(t)}function d5(){return d5=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},d5.apply(this,arguments)}function h$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function f$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?h$(Object(r),!0).forEach(function(s){NNe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h$(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function NNe(t,e,r){return e=jNe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jNe(t){var e=SNe(t,"string");return fw(e)=="symbol"?e:e+""}function SNe(t,e){if(fw(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(fw(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var m$={curveBasisClosed:qpe,curveBasisOpen:Hpe,curveBasis:Vpe,curveBumpX:Ppe,curveBumpY:Ape,curveLinearClosed:Wpe,curveLinear:RS,curveMonotoneX:Ype,curveMonotoneY:Kpe,curveNatural:Gpe,curveStep:Xpe,curveStepAfter:Jpe,curveStepBefore:Qpe},EN=function(e){return e.x===+e.x&&e.y===+e.y},Gv=function(e){return e.x},Xv=function(e){return e.y},kNe=function(e,r){if(gn(e))return e;var s="curve".concat(MS(e));return(s==="curveMonotone"||s==="curveBump")&&r?m$["".concat(s).concat(r==="vertical"?"Y":"X")]:m$[s]||RS},CNe=function(e){var r=e.type,s=r===void 0?"linear":r,a=e.points,i=a===void 0?[]:a,o=e.baseLine,l=e.layout,d=e.connectNulls,h=d===void 0?!1:d,f=kNe(s,l),m=h?i.filter(function(N){return EN(N)}):i,x;if(Array.isArray(o)){var b=h?o.filter(function(N){return EN(N)}):o,j=m.map(function(N,w){return f$(f$({},N),{},{base:b[w]})});return l==="vertical"?x=yN().y(Xv).x1(Gv).x0(function(N){return N.base.x}):x=yN().x(Gv).y1(Xv).y0(function(N){return N.base.y}),x.defined(EN).curve(f),x(j)}return l==="vertical"&&Rt(o)?x=yN().y(Xv).x1(Gv).x0(o):Rt(o)?x=yN().x(Gv).y1(Xv).y0(o):x=SK().x(Gv).y(Xv),x.defined(EN).curve(f),x(m)},Xx=function(e){var r=e.className,s=e.points,a=e.path,i=e.pathRef;if((!s||!s.length)&&!a)return null;var o=s&&s.length?CNe(e):a;return g.createElement("path",d5({},hn(e,!1),jj(e),{className:jn("recharts-curve",r),d:o,ref:i}))},OT={exports:{}},RT,p$;function ENe(){if(p$)return RT;p$=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return RT=t,RT}var DT,g$;function TNe(){if(g$)return DT;g$=1;var t=ENe();function e(){}function r(){}return r.resetWarningCache=e,DT=function(){function s(o,l,d,h,f,m){if(m!==t){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}s.isRequired=s;function a(){return s}var i={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:a,element:s,elementType:s,instanceOf:a,node:s,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:r,resetWarningCache:e};return i.PropTypes=i,i},DT}var x$;function PNe(){return x$||(x$=1,OT.exports=TNe()()),OT.exports}var ANe=PNe();const us=Hs(ANe);var _Ne=Object.getOwnPropertyNames,INe=Object.getOwnPropertySymbols,MNe=Object.prototype.hasOwnProperty;function y$(t,e){return function(s,a,i){return t(s,a,i)&&e(s,a,i)}}function TN(t){return function(r,s,a){if(!r||!s||typeof r!="object"||typeof s!="object")return t(r,s,a);var i=a.cache,o=i.get(r),l=i.get(s);if(o&&l)return o===s&&l===r;i.set(r,s),i.set(s,r);var d=t(r,s,a);return i.delete(r),i.delete(s),d}}function ONe(t){return t!=null?t[Symbol.toStringTag]:void 0}function v$(t){return _Ne(t).concat(INe(t))}var RNe=Object.hasOwn||(function(t,e){return MNe.call(t,e)});function q0(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var DNe="__v",$Ne="__o",LNe="_owner",b$=Object.getOwnPropertyDescriptor,w$=Object.keys;function FNe(t,e,r){var s=t.length;if(e.length!==s)return!1;for(;s-- >0;)if(!r.equals(t[s],e[s],s,s,t,e,r))return!1;return!0}function BNe(t,e){return q0(t.getTime(),e.getTime())}function UNe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function zNe(t,e){return t===e}function N$(t,e,r){var s=t.size;if(s!==e.size)return!1;if(!s)return!0;for(var a=new Array(s),i=t.entries(),o,l,d=0;(o=i.next())&&!o.done;){for(var h=e.entries(),f=!1,m=0;(l=h.next())&&!l.done;){if(a[m]){m++;continue}var x=o.value,b=l.value;if(r.equals(x[0],b[0],d,m,t,e,r)&&r.equals(x[1],b[1],x[0],b[0],t,e,r)){f=a[m]=!0;break}m++}if(!f)return!1;d++}return!0}var VNe=q0;function qNe(t,e,r){var s=w$(t),a=s.length;if(w$(e).length!==a)return!1;for(;a-- >0;)if(!bX(t,e,r,s[a]))return!1;return!0}function Qv(t,e,r){var s=v$(t),a=s.length;if(v$(e).length!==a)return!1;for(var i,o,l;a-- >0;)if(i=s[a],!bX(t,e,r,i)||(o=b$(t,i),l=b$(e,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function HNe(t,e){return q0(t.valueOf(),e.valueOf())}function WNe(t,e){return t.source===e.source&&t.flags===e.flags}function j$(t,e,r){var s=t.size;if(s!==e.size)return!1;if(!s)return!0;for(var a=new Array(s),i=t.values(),o,l;(o=i.next())&&!o.done;){for(var d=e.values(),h=!1,f=0;(l=d.next())&&!l.done;){if(!a[f]&&r.equals(o.value,l.value,o.value,l.value,t,e,r)){h=a[f]=!0;break}f++}if(!h)return!1}return!0}function YNe(t,e){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function KNe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function bX(t,e,r,s){return(s===LNe||s===$Ne||s===DNe)&&(t.$$typeof||e.$$typeof)?!0:RNe(e,s)&&r.equals(t[s],e[s],s,s,t,e,r)}var GNe="[object Arguments]",XNe="[object Boolean]",QNe="[object Date]",JNe="[object Error]",ZNe="[object Map]",eje="[object Number]",tje="[object Object]",rje="[object RegExp]",nje="[object Set]",sje="[object String]",aje="[object URL]",ije=Array.isArray,S$=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,k$=Object.assign,oje=Object.prototype.toString.call.bind(Object.prototype.toString);function lje(t){var e=t.areArraysEqual,r=t.areDatesEqual,s=t.areErrorsEqual,a=t.areFunctionsEqual,i=t.areMapsEqual,o=t.areNumbersEqual,l=t.areObjectsEqual,d=t.arePrimitiveWrappersEqual,h=t.areRegExpsEqual,f=t.areSetsEqual,m=t.areTypedArraysEqual,x=t.areUrlsEqual,b=t.unknownTagComparators;return function(N,w,C){if(N===w)return!0;if(N==null||w==null)return!1;var T=typeof N;if(T!==typeof w)return!1;if(T!=="object")return T==="number"?o(N,w,C):T==="function"?a(N,w,C):!1;var O=N.constructor;if(O!==w.constructor)return!1;if(O===Object)return l(N,w,C);if(ije(N))return e(N,w,C);if(S$!=null&&S$(N))return m(N,w,C);if(O===Date)return r(N,w,C);if(O===RegExp)return h(N,w,C);if(O===Map)return i(N,w,C);if(O===Set)return f(N,w,C);var I=oje(N);if(I===QNe)return r(N,w,C);if(I===rje)return h(N,w,C);if(I===ZNe)return i(N,w,C);if(I===nje)return f(N,w,C);if(I===tje)return typeof N.then!="function"&&typeof w.then!="function"&&l(N,w,C);if(I===aje)return x(N,w,C);if(I===JNe)return s(N,w,C);if(I===GNe)return l(N,w,C);if(I===XNe||I===eje||I===sje)return d(N,w,C);if(b){var P=b[I];if(!P){var A=ONe(N);A&&(P=b[A])}if(P)return P(N,w,C)}return!1}}function cje(t){var e=t.circular,r=t.createCustomConfig,s=t.strict,a={areArraysEqual:s?Qv:FNe,areDatesEqual:BNe,areErrorsEqual:UNe,areFunctionsEqual:zNe,areMapsEqual:s?y$(N$,Qv):N$,areNumbersEqual:VNe,areObjectsEqual:s?Qv:qNe,arePrimitiveWrappersEqual:HNe,areRegExpsEqual:WNe,areSetsEqual:s?y$(j$,Qv):j$,areTypedArraysEqual:s?Qv:YNe,areUrlsEqual:KNe,unknownTagComparators:void 0};if(r&&(a=k$({},a,r(a))),e){var i=TN(a.areArraysEqual),o=TN(a.areMapsEqual),l=TN(a.areObjectsEqual),d=TN(a.areSetsEqual);a=k$({},a,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:d})}return a}function dje(t){return function(e,r,s,a,i,o,l){return t(e,r,l)}}function uje(t){var e=t.circular,r=t.comparator,s=t.createState,a=t.equals,i=t.strict;if(s)return function(d,h){var f=s(),m=f.cache,x=m===void 0?e?new WeakMap:void 0:m,b=f.meta;return r(d,h,{cache:x,equals:a,meta:b,strict:i})};if(e)return function(d,h){return r(d,h,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var o={cache:void 0,equals:a,meta:void 0,strict:i};return function(d,h){return r(d,h,o)}}var hje=ag();ag({strict:!0});ag({circular:!0});ag({circular:!0,strict:!0});ag({createInternalComparator:function(){return q0}});ag({strict:!0,createInternalComparator:function(){return q0}});ag({circular:!0,createInternalComparator:function(){return q0}});ag({circular:!0,createInternalComparator:function(){return q0},strict:!0});function ag(t){t===void 0&&(t={});var e=t.circular,r=e===void 0?!1:e,s=t.createInternalComparator,a=t.createState,i=t.strict,o=i===void 0?!1:i,l=cje(t),d=lje(l),h=s?s(d):dje(d);return uje({circular:r,comparator:d,createState:a,equals:h,strict:o})}function fje(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function C$(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,s=function a(i){r<0&&(r=i),i-r>e?(t(i),r=-1):fje(a)};requestAnimationFrame(s)}function u5(t){"@babel/helpers - typeof";return u5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u5(t)}function mje(t){return yje(t)||xje(t)||gje(t)||pje()}function pje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gje(t,e){if(t){if(typeof t=="string")return E$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E$(t,e)}}function E$(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function xje(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function yje(t){if(Array.isArray(t))return t}function vje(){var t={},e=function(){return null},r=!1,s=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=mje(o),d=l[0],h=l.slice(1);if(typeof d=="number"){C$(a.bind(null,h),d);return}a(d),C$(a.bind(null,h));return}u5(i)==="object"&&(t=i,e(t)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,s(i)},subscribe:function(i){return e=i,function(){e=function(){return null}}}}}function mw(t){"@babel/helpers - typeof";return mw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mw(t)}function T$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function P$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?T$(Object(r),!0).forEach(function(s){wX(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):T$(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function wX(t,e,r){return e=bje(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bje(t){var e=wje(t,"string");return mw(e)==="symbol"?e:String(e)}function wje(t,e){if(mw(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(mw(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Nje=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(s,a){return s.filter(function(i){return a.includes(i)})})},jje=function(e){return e},Sje=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Eb=function(e,r){return Object.keys(r).reduce(function(s,a){return P$(P$({},s),{},wX({},a,e(a,r[a])))},{})},A$=function(e,r,s){return e.map(function(a){return"".concat(Sje(a)," ").concat(r,"ms ").concat(s)}).join(",")};function kje(t,e){return Tje(t)||Eje(t,e)||NX(t,e)||Cje()}function Cje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Eje(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s,a,i,o,l=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(s=i.call(r)).done)&&(l.push(s.value),l.length!==e);d=!0);}catch(f){h=!0,a=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return l}}function Tje(t){if(Array.isArray(t))return t}function Pje(t){return Ije(t)||_je(t)||NX(t)||Aje()}function Aje(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NX(t,e){if(t){if(typeof t=="string")return h5(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h5(t,e)}}function _je(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ije(t){if(Array.isArray(t))return h5(t)}function h5(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}var Zj=1e-4,jX=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},SX=function(e,r){return e.map(function(s,a){return s*Math.pow(r,a)}).reduce(function(s,a){return s+a})},_$=function(e,r){return function(s){var a=jX(e,r);return SX(a,s)}},Mje=function(e,r){return function(s){var a=jX(e,r),i=[].concat(Pje(a.map(function(o,l){return o*l}).slice(1)),[0]);return SX(i,s)}},I$=function(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];var a=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,o=1,l=1;break;case"ease":a=.25,i=.1,o=.25,l=1;break;case"ease-in":a=.42,i=0,o=1,l=1;break;case"ease-out":a=.42,i=0,o=.58,l=1;break;case"ease-in-out":a=0,i=0,o=.58,l=1;break;default:{var d=r[0].split("(");if(d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4){var h=d[1].split(")")[0].split(",").map(function(w){return parseFloat(w)}),f=kje(h,4);a=f[0],i=f[1],o=f[2],l=f[3]}}}var m=_$(a,o),x=_$(i,l),b=Mje(a,o),j=function(C){return C>1?1:C<0?0:C},N=function(C){for(var T=C>1?1:C,O=T,I=0;I<8;++I){var P=m(O)-T,A=b(O);if(Math.abs(P-T)<Zj||A<Zj)return x(O);O=j(O-P/A)}return x(O)};return N.isStepper=!1,N},Oje=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,s=r===void 0?100:r,a=e.damping,i=a===void 0?8:a,o=e.dt,l=o===void 0?17:o,d=function(f,m,x){var b=-(f-m)*s,j=x*i,N=x+(b-j)*l/1e3,w=x*l/1e3+f;return Math.abs(w-m)<Zj&&Math.abs(N)<Zj?[m,0]:[w,N]};return d.isStepper=!0,d.dt=l,d},Rje=function(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return I$(a);case"spring":return Oje();default:if(a.split("(")[0]==="cubic-bezier")return I$(a)}return typeof a=="function"?a:null};function pw(t){"@babel/helpers - typeof";return pw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pw(t)}function M$(t){return Lje(t)||$je(t)||kX(t)||Dje()}function Dje(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $je(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Lje(t){if(Array.isArray(t))return m5(t)}function O$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function fo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?O$(Object(r),!0).forEach(function(s){f5(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):O$(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function f5(t,e,r){return e=Fje(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Fje(t){var e=Bje(t,"string");return pw(e)==="symbol"?e:String(e)}function Bje(t,e){if(pw(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(pw(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Uje(t,e){return qje(t)||Vje(t,e)||kX(t,e)||zje()}function zje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kX(t,e){if(t){if(typeof t=="string")return m5(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m5(t,e)}}function m5(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function Vje(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s,a,i,o,l=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(s=i.call(r)).done)&&(l.push(s.value),l.length!==e);d=!0);}catch(f){h=!0,a=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return l}}function qje(t){if(Array.isArray(t))return t}var e2=function(e,r,s){return e+(r-e)*s},p5=function(e){var r=e.from,s=e.to;return r!==s},Hje=function t(e,r,s){var a=Eb(function(i,o){if(p5(o)){var l=e(o.from,o.to,o.velocity),d=Uje(l,2),h=d[0],f=d[1];return fo(fo({},o),{},{from:h,velocity:f})}return o},r);return s<1?Eb(function(i,o){return p5(o)?fo(fo({},o),{},{velocity:e2(o.velocity,a[i].velocity,s),from:e2(o.from,a[i].from,s)}):o},r):t(e,a,s-1)};const Wje=(function(t,e,r,s,a){var i=Nje(t,e),o=i.reduce(function(w,C){return fo(fo({},w),{},f5({},C,[t[C],e[C]]))},{}),l=i.reduce(function(w,C){return fo(fo({},w),{},f5({},C,{from:t[C],velocity:0,to:e[C]}))},{}),d=-1,h,f,m=function(){return null},x=function(){return Eb(function(C,T){return T.from},l)},b=function(){return!Object.values(l).filter(p5).length},j=function(C){h||(h=C);var T=C-h,O=T/r.dt;l=Hje(r,l,O),a(fo(fo(fo({},t),e),x())),h=C,b()||(d=requestAnimationFrame(m))},N=function(C){f||(f=C);var T=(C-f)/s,O=Eb(function(P,A){return e2.apply(void 0,M$(A).concat([r(T)]))},o);if(a(fo(fo(fo({},t),e),O)),T<1)d=requestAnimationFrame(m);else{var I=Eb(function(P,A){return e2.apply(void 0,M$(A).concat([r(1)]))},o);a(fo(fo(fo({},t),e),I))}};return m=r.isStepper?j:N,function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(d)}}});function Ay(t){"@babel/helpers - typeof";return Ay=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ay(t)}var Yje=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Kje(t,e){if(t==null)return{};var r=Gje(t,e),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function Gje(t,e){if(t==null)return{};var r={},s=Object.keys(t),a,i;for(i=0;i<s.length;i++)a=s[i],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}function $T(t){return Zje(t)||Jje(t)||Qje(t)||Xje()}function Xje(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qje(t,e){if(t){if(typeof t=="string")return g5(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g5(t,e)}}function Jje(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Zje(t){if(Array.isArray(t))return g5(t)}function g5(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function R$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function ku(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?R$(Object(r),!0).forEach(function(s){pb(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):R$(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function pb(t,e,r){return e=CX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function e2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function t2e(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,CX(s.key),s)}}function r2e(t,e,r){return e&&t2e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function CX(t){var e=n2e(t,"string");return Ay(e)==="symbol"?e:String(e)}function n2e(t,e){if(Ay(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Ay(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function s2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x5(t,e)}function x5(t,e){return x5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},x5(t,e)}function a2e(t){var e=i2e();return function(){var s=t2(t),a;if(e){var i=t2(this).constructor;a=Reflect.construct(s,arguments,i)}else a=s.apply(this,arguments);return y5(this,a)}}function y5(t,e){if(e&&(Ay(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return v5(t)}function v5(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i2e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function t2(t){return t2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},t2(t)}var df=(function(t){s2e(r,t);var e=a2e(r);function r(s,a){var i;e2e(this,r),i=e.call(this,s,a);var o=i.props,l=o.isActive,d=o.attributeName,h=o.from,f=o.to,m=o.steps,x=o.children,b=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(v5(i)),i.changeStyle=i.changeStyle.bind(v5(i)),!l||b<=0)return i.state={style:{}},typeof x=="function"&&(i.state={style:f}),y5(i);if(m&&m.length)i.state={style:m[0].style};else if(h){if(typeof x=="function")return i.state={style:h},y5(i);i.state={style:d?pb({},d,h):h}}else i.state={style:{}};return i}return r2e(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,l=i.canBegin,d=i.attributeName,h=i.shouldReAnimate,f=i.to,m=i.from,x=this.state.style;if(l){if(!o){var b={style:d?pb({},d,f):f};this.state&&x&&(d&&x[d]!==f||!d&&x!==f)&&this.setState(b);return}if(!(hje(a.to,f)&&a.canBegin&&a.isActive)){var j=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var N=j||h?m:a.to;if(this.state&&x){var w={style:d?pb({},d,N):N};(d&&x[d]!==N||!d&&x!==N)&&this.setState(w)}this.runAnimation(ku(ku({},this.props),{},{from:N,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,l=a.to,d=a.duration,h=a.easing,f=a.begin,m=a.onAnimationEnd,x=a.onAnimationStart,b=Wje(o,l,Rje(h),d,this.changeStyle),j=function(){i.stopJSAnimation=b()};this.manager.start([x,f,j,d,m])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,l=a.begin,d=a.onAnimationStart,h=o[0],f=h.style,m=h.duration,x=m===void 0?0:m,b=function(N,w,C){if(C===0)return N;var T=w.duration,O=w.easing,I=O===void 0?"ease":O,P=w.style,A=w.properties,R=w.onAnimationEnd,B=C>0?o[C-1]:w,V=A||Object.keys(P);if(typeof I=="function"||I==="spring")return[].concat($T(N),[i.runJSAnimation.bind(i,{from:B.style,to:P,duration:T,easing:I}),T]);var X=A$(V,T,I),ee=ku(ku(ku({},B.style),P),{},{transition:X});return[].concat($T(N),[ee,T,R]).filter(jje)};return this.manager.start([d].concat($T(o.reduce(b,[f,Math.max(x,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=vje());var i=a.begin,o=a.duration,l=a.attributeName,d=a.to,h=a.easing,f=a.onAnimationStart,m=a.onAnimationEnd,x=a.steps,b=a.children,j=this.manager;if(this.unSubscribe=j.subscribe(this.handleStyleChange),typeof h=="function"||typeof b=="function"||h==="spring"){this.runJSAnimation(a);return}if(x.length>1){this.runStepAnimation(a);return}var N=l?pb({},l,d):d,w=A$(Object.keys(N),o,h);j.start([f,i,ku(ku({},N),{},{transition:w}),o,m])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var d=Kje(a,Yje),h=g.Children.count(i),f=this.state.style;if(typeof i=="function")return i(f);if(!l||h===0||o<=0)return i;var m=function(b){var j=b.props,N=j.style,w=N===void 0?{}:N,C=j.className,T=g.cloneElement(b,ku(ku({},d),{},{style:ku(ku({},w),f),className:C}));return T};return h===1?m(g.Children.only(i)):$e.createElement("div",null,g.Children.map(i,function(x){return m(x)}))}}]),r})(g.PureComponent);df.displayName="Animate";df.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};df.propTypes={from:us.oneOfType([us.object,us.string]),to:us.oneOfType([us.object,us.string]),attributeName:us.string,duration:us.number,begin:us.number,easing:us.oneOfType([us.string,us.func]),steps:us.arrayOf(us.shape({duration:us.number.isRequired,style:us.object.isRequired,easing:us.oneOfType([us.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),us.func]),properties:us.arrayOf("string"),onAnimationEnd:us.func})),children:us.oneOfType([us.node,us.func]),isActive:us.bool,canBegin:us.bool,onAnimationEnd:us.func,shouldReAnimate:us.bool,onAnimationStart:us.func,onAnimationReStart:us.func};function gw(t){"@babel/helpers - typeof";return gw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gw(t)}function r2(){return r2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},r2.apply(this,arguments)}function o2e(t,e){return u2e(t)||d2e(t,e)||c2e(t,e)||l2e()}function l2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c2e(t,e){if(t){if(typeof t=="string")return D$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D$(t,e)}}function D$(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function d2e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s,a,i,o,l=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(s=i.call(r)).done)&&(l.push(s.value),l.length!==e);d=!0);}catch(f){h=!0,a=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return l}}function u2e(t){if(Array.isArray(t))return t}function $$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function L$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$$(Object(r),!0).forEach(function(s){h2e(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$$(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function h2e(t,e,r){return e=f2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f2e(t){var e=m2e(t,"string");return gw(e)=="symbol"?e:e+""}function m2e(t,e){if(gw(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(gw(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var F$=function(e,r,s,a,i){var o=Math.min(Math.abs(s)/2,Math.abs(a)/2),l=a>=0?1:-1,d=s>=0?1:-1,h=a>=0&&s>=0||a<0&&s<0?1:0,f;if(o>0&&i instanceof Array){for(var m=[0,0,0,0],x=0,b=4;x<b;x++)m[x]=i[x]>o?o:i[x];f="M".concat(e,",").concat(r+l*m[0]),m[0]>0&&(f+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(h,",").concat(e+d*m[0],",").concat(r)),f+="L ".concat(e+s-d*m[1],",").concat(r),m[1]>0&&(f+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(h,`,
        `).concat(e+s,",").concat(r+l*m[1])),f+="L ".concat(e+s,",").concat(r+a-l*m[2]),m[2]>0&&(f+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(h,`,
        `).concat(e+s-d*m[2],",").concat(r+a)),f+="L ".concat(e+d*m[3],",").concat(r+a),m[3]>0&&(f+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(h,`,
        `).concat(e,",").concat(r+a-l*m[3])),f+="Z"}else if(o>0&&i===+i&&i>0){var j=Math.min(o,i);f="M ".concat(e,",").concat(r+l*j,`
            A `).concat(j,",").concat(j,",0,0,").concat(h,",").concat(e+d*j,",").concat(r,`
            L `).concat(e+s-d*j,",").concat(r,`
            A `).concat(j,",").concat(j,",0,0,").concat(h,",").concat(e+s,",").concat(r+l*j,`
            L `).concat(e+s,",").concat(r+a-l*j,`
            A `).concat(j,",").concat(j,",0,0,").concat(h,",").concat(e+s-d*j,",").concat(r+a,`
            L `).concat(e+d*j,",").concat(r+a,`
            A `).concat(j,",").concat(j,",0,0,").concat(h,",").concat(e,",").concat(r+a-l*j," Z")}else f="M ".concat(e,",").concat(r," h ").concat(s," v ").concat(a," h ").concat(-s," Z");return f},p2e=function(e,r){if(!e||!r)return!1;var s=e.x,a=e.y,i=r.x,o=r.y,l=r.width,d=r.height;if(Math.abs(l)>0&&Math.abs(d)>0){var h=Math.min(i,i+l),f=Math.max(i,i+l),m=Math.min(o,o+d),x=Math.max(o,o+d);return s>=h&&s<=f&&a>=m&&a<=x}return!1},g2e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},tI=function(e){var r=L$(L$({},g2e),e),s=g.useRef(),a=g.useState(-1),i=o2e(a,2),o=i[0],l=i[1];g.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var I=s.current.getTotalLength();I&&l(I)}catch{}},[]);var d=r.x,h=r.y,f=r.width,m=r.height,x=r.radius,b=r.className,j=r.animationEasing,N=r.animationDuration,w=r.animationBegin,C=r.isAnimationActive,T=r.isUpdateAnimationActive;if(d!==+d||h!==+h||f!==+f||m!==+m||f===0||m===0)return null;var O=jn("recharts-rectangle",b);return T?$e.createElement(df,{canBegin:o>0,from:{width:f,height:m,x:d,y:h},to:{width:f,height:m,x:d,y:h},duration:N,animationEasing:j,isActive:T},function(I){var P=I.width,A=I.height,R=I.x,B=I.y;return $e.createElement(df,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:N,isActive:C,easing:j},$e.createElement("path",r2({},hn(r,!0),{className:O,d:F$(R,B,P,A,x),ref:s})))}):$e.createElement("path",r2({},hn(r,!0),{className:O,d:F$(d,h,f,m,x)}))};function b5(){return b5=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},b5.apply(this,arguments)}var GS=function(e){var r=e.cx,s=e.cy,a=e.r,i=e.className,o=jn("recharts-dot",i);return r===+r&&s===+s&&a===+a?g.createElement("circle",b5({},hn(e,!1),jj(e),{className:o,cx:r,cy:s,r:a})):null};function xw(t){"@babel/helpers - typeof";return xw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xw(t)}var x2e=["x","y","top","left","width","height","className"];function w5(){return w5=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},w5.apply(this,arguments)}function B$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function y2e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?B$(Object(r),!0).forEach(function(s){v2e(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):B$(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function v2e(t,e,r){return e=b2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function b2e(t){var e=w2e(t,"string");return xw(e)=="symbol"?e:e+""}function w2e(t,e){if(xw(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(xw(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function N2e(t,e){if(t==null)return{};var r=j2e(t,e),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function j2e(t,e){if(t==null)return{};var r={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;r[s]=t[s]}return r}var S2e=function(e,r,s,a,i,o){return"M".concat(e,",").concat(i,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(s)},k2e=function(e){var r=e.x,s=r===void 0?0:r,a=e.y,i=a===void 0?0:a,o=e.top,l=o===void 0?0:o,d=e.left,h=d===void 0?0:d,f=e.width,m=f===void 0?0:f,x=e.height,b=x===void 0?0:x,j=e.className,N=N2e(e,x2e),w=y2e({x:s,y:i,top:l,left:h,width:m,height:b},N);return!Rt(s)||!Rt(i)||!Rt(m)||!Rt(b)||!Rt(l)||!Rt(h)?null:$e.createElement("path",w5({},hn(w,!0),{className:jn("recharts-cross",j),d:S2e(s,i,m,b,l,h)}))},LT,U$;function C2e(){if(U$)return LT;U$=1;var t=YK(),e=t(Object.getPrototypeOf,Object);return LT=e,LT}var FT,z$;function E2e(){if(z$)return FT;z$=1;var t=Pm(),e=C2e(),r=Am(),s="[object Object]",a=Function.prototype,i=Object.prototype,o=a.toString,l=i.hasOwnProperty,d=o.call(Object);function h(f){if(!r(f)||t(f)!=s)return!1;var m=e(f);if(m===null)return!0;var x=l.call(m,"constructor")&&m.constructor;return typeof x=="function"&&x instanceof x&&o.call(x)==d}return FT=h,FT}var T2e=E2e();const P2e=Hs(T2e);var BT,V$;function A2e(){if(V$)return BT;V$=1;var t=Pm(),e=Am(),r="[object Boolean]";function s(a){return a===!0||a===!1||e(a)&&t(a)==r}return BT=s,BT}var _2e=A2e();const I2e=Hs(_2e);function yw(t){"@babel/helpers - typeof";return yw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yw(t)}function n2(){return n2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},n2.apply(this,arguments)}function M2e(t,e){return $2e(t)||D2e(t,e)||R2e(t,e)||O2e()}function O2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R2e(t,e){if(t){if(typeof t=="string")return q$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q$(t,e)}}function q$(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function D2e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s,a,i,o,l=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(s=i.call(r)).done)&&(l.push(s.value),l.length!==e);d=!0);}catch(f){h=!0,a=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return l}}function $2e(t){if(Array.isArray(t))return t}function H$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function W$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?H$(Object(r),!0).forEach(function(s){L2e(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):H$(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function L2e(t,e,r){return e=F2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function F2e(t){var e=B2e(t,"string");return yw(e)=="symbol"?e:e+""}function B2e(t,e){if(yw(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(yw(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Y$=function(e,r,s,a,i){var o=s-a,l;return l="M ".concat(e,",").concat(r),l+="L ".concat(e+s,",").concat(r),l+="L ".concat(e+s-o/2,",").concat(r+i),l+="L ".concat(e+s-o/2-a,",").concat(r+i),l+="L ".concat(e,",").concat(r," Z"),l},U2e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},z2e=function(e){var r=W$(W$({},U2e),e),s=g.useRef(),a=g.useState(-1),i=M2e(a,2),o=i[0],l=i[1];g.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var O=s.current.getTotalLength();O&&l(O)}catch{}},[]);var d=r.x,h=r.y,f=r.upperWidth,m=r.lowerWidth,x=r.height,b=r.className,j=r.animationEasing,N=r.animationDuration,w=r.animationBegin,C=r.isUpdateAnimationActive;if(d!==+d||h!==+h||f!==+f||m!==+m||x!==+x||f===0&&m===0||x===0)return null;var T=jn("recharts-trapezoid",b);return C?$e.createElement(df,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:x,x:d,y:h},to:{upperWidth:f,lowerWidth:m,height:x,x:d,y:h},duration:N,animationEasing:j,isActive:C},function(O){var I=O.upperWidth,P=O.lowerWidth,A=O.height,R=O.x,B=O.y;return $e.createElement(df,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:N,easing:j},$e.createElement("path",n2({},hn(r,!0),{className:T,d:Y$(R,B,I,P,A),ref:s})))}):$e.createElement("g",null,$e.createElement("path",n2({},hn(r,!0),{className:T,d:Y$(d,h,f,m,x)})))},V2e=["option","shapeType","propTransformer","activeClassName","isActive"];function vw(t){"@babel/helpers - typeof";return vw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vw(t)}function q2e(t,e){if(t==null)return{};var r=H2e(t,e),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function H2e(t,e){if(t==null)return{};var r={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;r[s]=t[s]}return r}function K$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function s2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?K$(Object(r),!0).forEach(function(s){W2e(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):K$(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function W2e(t,e,r){return e=Y2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Y2e(t){var e=K2e(t,"string");return vw(e)=="symbol"?e:e+""}function K2e(t,e){if(vw(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(vw(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function G2e(t,e){return s2(s2({},e),t)}function X2e(t,e){return t==="symbols"}function G$(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return $e.createElement(tI,r);case"trapezoid":return $e.createElement(z2e,r);case"sector":return $e.createElement(vX,r);case"symbols":if(X2e(e))return $e.createElement(b_,r);break;default:return null}}function Q2e(t){return g.isValidElement(t)?t.props:t}function J2e(t){var e=t.option,r=t.shapeType,s=t.propTransformer,a=s===void 0?G2e:s,i=t.activeClassName,o=i===void 0?"recharts-active-shape":i,l=t.isActive,d=q2e(t,V2e),h;if(g.isValidElement(e))h=g.cloneElement(e,s2(s2({},d),Q2e(e)));else if(gn(e))h=e(d);else if(P2e(e)&&!I2e(e)){var f=a(e,d);h=$e.createElement(G$,{shapeType:r,elementProps:f})}else{var m=d;h=$e.createElement(G$,{shapeType:r,elementProps:m})}return l?$e.createElement(Zs,{className:o},h):h}function XS(t,e){return e!=null&&"trapezoids"in t.props}function QS(t,e){return e!=null&&"sectors"in t.props}function bw(t,e){return e!=null&&"points"in t.props}function Z2e(t,e){var r,s,a=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,i=t.y===(e==null||(s=e.labelViewBox)===null||s===void 0?void 0:s.y)||t.y===e.y;return a&&i}function eSe(t,e){var r=t.endAngle===e.endAngle,s=t.startAngle===e.startAngle;return r&&s}function tSe(t,e){var r=t.x===e.x,s=t.y===e.y,a=t.z===e.z;return r&&s&&a}function rSe(t,e){var r;return XS(t,e)?r=Z2e:QS(t,e)?r=eSe:bw(t,e)&&(r=tSe),r}function nSe(t,e){var r;return XS(t,e)?r="trapezoids":QS(t,e)?r="sectors":bw(t,e)&&(r="points"),r}function sSe(t,e){if(XS(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(QS(t,e)){var s;return(s=e.tooltipPayload)===null||s===void 0||(s=s[0])===null||s===void 0||(s=s.payload)===null||s===void 0?void 0:s.payload}return bw(t,e)?e.payload:{}}function aSe(t){var e=t.activeTooltipItem,r=t.graphicalItem,s=t.itemData,a=nSe(r,e),i=sSe(r,e),o=s.filter(function(d,h){var f=Ty(i,d),m=r.props[a].filter(function(j){var N=rSe(r,e);return N(j,e)}),x=r.props[a].indexOf(m[m.length-1]),b=h===x;return f&&b}),l=s.indexOf(o[o.length-1]);return l}var UT,X$;function iSe(){if(X$)return UT;X$=1;var t=Math.ceil,e=Math.max;function r(s,a,i,o){for(var l=-1,d=e(t((a-s)/(i||1)),0),h=Array(d);d--;)h[o?d:++l]=s,s+=i;return h}return UT=r,UT}var zT,Q$;function EX(){if(Q$)return zT;Q$=1;var t=cG(),e=1/0,r=17976931348623157e292;function s(a){if(!a)return a===0?a:0;if(a=t(a),a===e||a===-e){var i=a<0?-1:1;return i*r}return a===a?a:0}return zT=s,zT}var VT,J$;function oSe(){if(J$)return VT;J$=1;var t=iSe(),e=FS(),r=EX();function s(a){return function(i,o,l){return l&&typeof l!="number"&&e(i,o,l)&&(o=l=void 0),i=r(i),o===void 0?(o=i,i=0):o=r(o),l=l===void 0?i<o?1:-1:r(l),t(i,o,l,a)}}return VT=s,VT}var qT,Z$;function lSe(){if(Z$)return qT;Z$=1;var t=oSe(),e=t();return qT=e,qT}var cSe=lSe();const a2=Hs(cSe);function ww(t){"@babel/helpers - typeof";return ww=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ww(t)}function eL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function tL(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?eL(Object(r),!0).forEach(function(s){TX(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eL(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function TX(t,e,r){return e=dSe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dSe(t){var e=uSe(t,"string");return ww(e)=="symbol"?e:e+""}function uSe(t,e){if(ww(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(ww(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hSe=["Webkit","Moz","O","ms"],fSe=function(e,r){var s=e.replace(/(\w)/,function(i){return i.toUpperCase()}),a=hSe.reduce(function(i,o){return tL(tL({},i),{},TX({},o+s,r))},{});return a[e]=r,a};function _y(t){"@babel/helpers - typeof";return _y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_y(t)}function i2(){return i2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},i2.apply(this,arguments)}function rL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function HT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rL(Object(r),!0).forEach(function(s){Mc(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rL(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function mSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nL(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,AX(s.key),s)}}function pSe(t,e,r){return e&&nL(t.prototype,e),r&&nL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function gSe(t,e,r){return e=o2(e),xSe(t,PX()?Reflect.construct(e,r||[],o2(t).constructor):e.apply(t,r))}function xSe(t,e){if(e&&(_y(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ySe(t)}function ySe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function PX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PX=function(){return!!t})()}function o2(t){return o2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},o2(t)}function vSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&N5(t,e)}function N5(t,e){return N5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},N5(t,e)}function Mc(t,e,r){return e=AX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function AX(t){var e=bSe(t,"string");return _y(e)=="symbol"?e:e+""}function bSe(t,e){if(_y(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(_y(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var wSe=function(e){var r=e.data,s=e.startIndex,a=e.endIndex,i=e.x,o=e.width,l=e.travellerWidth;if(!r||!r.length)return{};var d=r.length,h=kb().domain(a2(0,d)).range([i,i+o-l]),f=h.domain().map(function(m){return h(m)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:h(s),endX:h(a),scale:h,scaleValues:f}},sL=function(e){return e.changedTouches&&!!e.changedTouches.length},Iy=(function(t){function e(r){var s;return mSe(this,e),s=gSe(this,e,[r]),Mc(s,"handleDrag",function(a){s.leaveTimer&&(clearTimeout(s.leaveTimer),s.leaveTimer=null),s.state.isTravellerMoving?s.handleTravellerMove(a):s.state.isSlideMoving&&s.handleSlideDrag(a)}),Mc(s,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&s.handleDrag(a.changedTouches[0])}),Mc(s,"handleDragEnd",function(){s.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=s.props,i=a.endIndex,o=a.onDragEnd,l=a.startIndex;o==null||o({endIndex:i,startIndex:l})}),s.detachDragEndListener()}),Mc(s,"handleLeaveWrapper",function(){(s.state.isTravellerMoving||s.state.isSlideMoving)&&(s.leaveTimer=window.setTimeout(s.handleDragEnd,s.props.leaveTimeOut))}),Mc(s,"handleEnterSlideOrTraveller",function(){s.setState({isTextActive:!0})}),Mc(s,"handleLeaveSlideOrTraveller",function(){s.setState({isTextActive:!1})}),Mc(s,"handleSlideDragStart",function(a){var i=sL(a)?a.changedTouches[0]:a;s.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),s.attachDragEndListener()}),s.travellerDragStartHandlers={startX:s.handleTravellerDragStart.bind(s,"startX"),endX:s.handleTravellerDragStart.bind(s,"endX")},s.state={},s}return vSe(e,t),pSe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(s){var a=s.startX,i=s.endX,o=this.state.scaleValues,l=this.props,d=l.gap,h=l.data,f=h.length-1,m=Math.min(a,i),x=Math.max(a,i),b=e.getIndexInRange(o,m),j=e.getIndexInRange(o,x);return{startIndex:b-b%d,endIndex:j===f?f:j-j%d}}},{key:"getTextOfTick",value:function(s){var a=this.props,i=a.data,o=a.tickFormatter,l=a.dataKey,d=vl(i[s],l,s);return gn(o)?o(d,s):d}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(s){var a=this.state,i=a.slideMoveStartX,o=a.startX,l=a.endX,d=this.props,h=d.x,f=d.width,m=d.travellerWidth,x=d.startIndex,b=d.endIndex,j=d.onChange,N=s.pageX-i;N>0?N=Math.min(N,h+f-m-l,h+f-m-o):N<0&&(N=Math.max(N,h-o,h-l));var w=this.getIndex({startX:o+N,endX:l+N});(w.startIndex!==x||w.endIndex!==b)&&j&&j(w),this.setState({startX:o+N,endX:l+N,slideMoveStartX:s.pageX})}},{key:"handleTravellerDragStart",value:function(s,a){var i=sL(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:s,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(s){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,d=a.startX,h=this.state[o],f=this.props,m=f.x,x=f.width,b=f.travellerWidth,j=f.onChange,N=f.gap,w=f.data,C={startX:this.state.startX,endX:this.state.endX},T=s.pageX-i;T>0?T=Math.min(T,m+x-b-h):T<0&&(T=Math.max(T,m-h)),C[o]=h+T;var O=this.getIndex(C),I=O.startIndex,P=O.endIndex,A=function(){var B=w.length-1;return o==="startX"&&(l>d?I%N===0:P%N===0)||l<d&&P===B||o==="endX"&&(l>d?P%N===0:I%N===0)||l>d&&P===B};this.setState(Mc(Mc({},o,h+T),"brushMoveStartX",s.pageX),function(){j&&A()&&j(O)})}},{key:"handleTravellerMoveKeyboard",value:function(s,a){var i=this,o=this.state,l=o.scaleValues,d=o.startX,h=o.endX,f=this.state[a],m=l.indexOf(f);if(m!==-1){var x=m+s;if(!(x===-1||x>=l.length)){var b=l[x];a==="startX"&&b>=h||a==="endX"&&b<=d||this.setState(Mc({},a,b),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var s=this.props,a=s.x,i=s.y,o=s.width,l=s.height,d=s.fill,h=s.stroke;return $e.createElement("rect",{stroke:h,fill:d,x:a,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var s=this.props,a=s.x,i=s.y,o=s.width,l=s.height,d=s.data,h=s.children,f=s.padding,m=g.Children.only(h);return m?$e.cloneElement(m,{x:a,y:i,width:o,height:l,margin:f,compact:!0,data:d}):null}},{key:"renderTravellerLayer",value:function(s,a){var i,o,l=this,d=this.props,h=d.y,f=d.travellerWidth,m=d.height,x=d.traveller,b=d.ariaLabel,j=d.data,N=d.startIndex,w=d.endIndex,C=Math.max(s,this.props.x),T=HT(HT({},hn(this.props,!1)),{},{x:C,y:h,width:f,height:m}),O=b||"Min value: ".concat((i=j[N])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=j[w])===null||o===void 0?void 0:o.name);return $e.createElement(Zs,{tabIndex:0,role:"slider","aria-label":O,"aria-valuenow":s,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(P){["ArrowLeft","ArrowRight"].includes(P.key)&&(P.preventDefault(),P.stopPropagation(),l.handleTravellerMoveKeyboard(P.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(x,T))}},{key:"renderSlide",value:function(s,a){var i=this.props,o=i.y,l=i.height,d=i.stroke,h=i.travellerWidth,f=Math.min(s,a)+h,m=Math.max(Math.abs(a-s)-h,0);return $e.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:d,fillOpacity:.2,x:f,y:o,width:m,height:l})}},{key:"renderText",value:function(){var s=this.props,a=s.startIndex,i=s.endIndex,o=s.y,l=s.height,d=s.travellerWidth,h=s.stroke,f=this.state,m=f.startX,x=f.endX,b=5,j={pointerEvents:"none",fill:h};return $e.createElement(Zs,{className:"recharts-brush-texts"},$e.createElement(Rj,i2({textAnchor:"end",verticalAnchor:"middle",x:Math.min(m,x)-b,y:o+l/2},j),this.getTextOfTick(a)),$e.createElement(Rj,i2({textAnchor:"start",verticalAnchor:"middle",x:Math.max(m,x)+d+b,y:o+l/2},j),this.getTextOfTick(i)))}},{key:"render",value:function(){var s=this.props,a=s.data,i=s.className,o=s.children,l=s.x,d=s.y,h=s.width,f=s.height,m=s.alwaysShowText,x=this.state,b=x.startX,j=x.endX,N=x.isTextActive,w=x.isSlideMoving,C=x.isTravellerMoving,T=x.isTravellerFocused;if(!a||!a.length||!Rt(l)||!Rt(d)||!Rt(h)||!Rt(f)||h<=0||f<=0)return null;var O=jn("recharts-brush",i),I=$e.Children.count(o)===1,P=fSe("userSelect","none");return $e.createElement(Zs,{className:O,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:P},this.renderBackground(),I&&this.renderPanorama(),this.renderSlide(b,j),this.renderTravellerLayer(b,"startX"),this.renderTravellerLayer(j,"endX"),(N||w||C||T||m)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(s){var a=s.x,i=s.y,o=s.width,l=s.height,d=s.stroke,h=Math.floor(i+l/2)-1;return $e.createElement($e.Fragment,null,$e.createElement("rect",{x:a,y:i,width:o,height:l,fill:d,stroke:"none"}),$e.createElement("line",{x1:a+1,y1:h,x2:a+o-1,y2:h,fill:"none",stroke:"#fff"}),$e.createElement("line",{x1:a+1,y1:h+2,x2:a+o-1,y2:h+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(s,a){var i;return $e.isValidElement(s)?i=$e.cloneElement(s,a):gn(s)?i=s(a):i=e.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(s,a){var i=s.data,o=s.width,l=s.x,d=s.travellerWidth,h=s.updateId,f=s.startIndex,m=s.endIndex;if(i!==a.prevData||h!==a.prevUpdateId)return HT({prevData:i,prevTravellerWidth:d,prevUpdateId:h,prevX:l,prevWidth:o},i&&i.length?wSe({data:i,width:o,x:l,travellerWidth:d,startIndex:f,endIndex:m}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||d!==a.prevTravellerWidth)){a.scale.range([l,l+o-d]);var x=a.scale.domain().map(function(b){return a.scale(b)});return{prevData:i,prevTravellerWidth:d,prevUpdateId:h,prevX:l,prevWidth:o,startX:a.scale(s.startIndex),endX:a.scale(s.endIndex),scaleValues:x}}return null}},{key:"getIndexInRange",value:function(s,a){for(var i=s.length,o=0,l=i-1;l-o>1;){var d=Math.floor((o+l)/2);s[d]>a?l=d:o=d}return a>=s[l]?l:o}}])})(g.PureComponent);Mc(Iy,"displayName","Brush");Mc(Iy,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var WT,aL;function NSe(){if(aL)return WT;aL=1;var t=E_();function e(r,s){var a;return t(r,function(i,o,l){return a=s(i,o,l),!a}),!!a}return WT=e,WT}var YT,iL;function jSe(){if(iL)return YT;iL=1;var t=BK(),e=rg(),r=NSe(),s=lc(),a=FS();function i(o,l,d){var h=s(o)?t:r;return d&&a(o,l,d)&&(l=void 0),h(o,e(l,3))}return YT=i,YT}var SSe=jSe();const kSe=Hs(SSe);var rf=function(e,r){var s=e.alwaysShow,a=e.ifOverflow;return s&&(a="extendDomain"),a===r},KT,oL;function CSe(){if(oL)return KT;oL=1;var t=sG();function e(r,s,a){s=="__proto__"&&t?t(r,s,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[s]=a}return KT=e,KT}var GT,lL;function ESe(){if(lL)return GT;lL=1;var t=CSe(),e=rG(),r=rg();function s(a,i){var o={};return i=r(i,3),e(a,function(l,d,h){t(o,d,i(l,d,h))}),o}return GT=s,GT}var TSe=ESe();const PSe=Hs(TSe);var XT,cL;function ASe(){if(cL)return XT;cL=1;function t(e,r){for(var s=-1,a=e==null?0:e.length;++s<a;)if(!r(e[s],s,e))return!1;return!0}return XT=t,XT}var QT,dL;function _Se(){if(dL)return QT;dL=1;var t=E_();function e(r,s){var a=!0;return t(r,function(i,o,l){return a=!!s(i,o,l),a}),a}return QT=e,QT}var JT,uL;function ISe(){if(uL)return JT;uL=1;var t=ASe(),e=_Se(),r=rg(),s=lc(),a=FS();function i(o,l,d){var h=s(o)?t:e;return d&&a(o,l,d)&&(l=void 0),h(o,r(l,3))}return JT=i,JT}var MSe=ISe();const OSe=Hs(MSe);var RSe=["x","y"];function Nw(t){"@babel/helpers - typeof";return Nw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nw(t)}function j5(){return j5=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},j5.apply(this,arguments)}function hL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function Jv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hL(Object(r),!0).forEach(function(s){DSe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hL(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function DSe(t,e,r){return e=$Se(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $Se(t){var e=LSe(t,"string");return Nw(e)=="symbol"?e:e+""}function LSe(t,e){if(Nw(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Nw(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function FSe(t,e){if(t==null)return{};var r=BSe(t,e),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function BSe(t,e){if(t==null)return{};var r={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;r[s]=t[s]}return r}function USe(t,e){var r=t.x,s=t.y,a=FSe(t,RSe),i="".concat(r),o=parseInt(i,10),l="".concat(s),d=parseInt(l,10),h="".concat(e.height||a.height),f=parseInt(h,10),m="".concat(e.width||a.width),x=parseInt(m,10);return Jv(Jv(Jv(Jv(Jv({},e),a),o?{x:o}:{}),d?{y:d}:{}),{},{height:f,width:x,name:e.name,radius:e.radius})}function fL(t){return $e.createElement(J2e,j5({shapeType:"rectangle",propTransformer:USe,activeClassName:"recharts-active-bar"},t))}var zSe=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(s,a){if(typeof e=="number")return e;var i=Rt(s)||Qme(s);return i?e(s,a):(i||C0(),r)}},VSe=["value","background"],_X;function My(t){"@babel/helpers - typeof";return My=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},My(t)}function qSe(t,e){if(t==null)return{};var r=HSe(t,e),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function HSe(t,e){if(t==null)return{};var r={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;r[s]=t[s]}return r}function l2(){return l2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},l2.apply(this,arguments)}function mL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function ni(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mL(Object(r),!0).forEach(function(s){Rp(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mL(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function WSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pL(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,MX(s.key),s)}}function YSe(t,e,r){return e&&pL(t.prototype,e),r&&pL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function KSe(t,e,r){return e=c2(e),GSe(t,IX()?Reflect.construct(e,r||[],c2(t).constructor):e.apply(t,r))}function GSe(t,e){if(e&&(My(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XSe(t)}function XSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function IX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IX=function(){return!!t})()}function c2(t){return c2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},c2(t)}function QSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S5(t,e)}function S5(t,e){return S5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},S5(t,e)}function Rp(t,e,r){return e=MX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function MX(t){var e=JSe(t,"string");return My(e)=="symbol"?e:e+""}function JSe(t,e){if(My(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(My(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var b1=(function(t){function e(){var r;WSe(this,e);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=KSe(this,e,[].concat(a)),Rp(r,"state",{isAnimationFinished:!1}),Rp(r,"id",vv("recharts-bar-")),Rp(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),Rp(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return QSe(e,t),YSe(e,[{key:"renderRectanglesStatically",value:function(s){var a=this,i=this.props,o=i.shape,l=i.dataKey,d=i.activeIndex,h=i.activeBar,f=hn(this.props,!1);return s&&s.map(function(m,x){var b=x===d,j=b?h:o,N=ni(ni(ni({},f),m),{},{isActive:b,option:j,index:x,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return $e.createElement(Zs,l2({className:"recharts-bar-rectangle"},Sj(a.props,m,x),{key:"rectangle-".concat(m==null?void 0:m.x,"-").concat(m==null?void 0:m.y,"-").concat(m==null?void 0:m.value,"-").concat(x)}),$e.createElement(fL,N))})}},{key:"renderRectanglesWithAnimation",value:function(){var s=this,a=this.props,i=a.data,o=a.layout,l=a.isAnimationActive,d=a.animationBegin,h=a.animationDuration,f=a.animationEasing,m=a.animationId,x=this.state.prevData;return $e.createElement(df,{begin:d,duration:h,isActive:l,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(b){var j=b.t,N=i.map(function(w,C){var T=x&&x[C];if(T){var O=vo(T.x,w.x),I=vo(T.y,w.y),P=vo(T.width,w.width),A=vo(T.height,w.height);return ni(ni({},w),{},{x:O(j),y:I(j),width:P(j),height:A(j)})}if(o==="horizontal"){var R=vo(0,w.height),B=R(j);return ni(ni({},w),{},{y:w.y+w.height-B,height:B})}var V=vo(0,w.width),X=V(j);return ni(ni({},w),{},{width:X})});return $e.createElement(Zs,null,s.renderRectanglesStatically(N))})}},{key:"renderRectangles",value:function(){var s=this.props,a=s.data,i=s.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!Ty(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var s=this,a=this.props,i=a.data,o=a.dataKey,l=a.activeIndex,d=hn(this.props.background,!1);return i.map(function(h,f){h.value;var m=h.background,x=qSe(h,VSe);if(!m)return null;var b=ni(ni(ni(ni(ni({},x),{},{fill:"#eee"},m),d),Sj(s.props,h,f)),{},{onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return $e.createElement(fL,l2({key:"background-bar-".concat(f),option:s.props.background,isActive:f===l},b))})}},{key:"renderErrorBar",value:function(s,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,d=i.yAxis,h=i.layout,f=i.children,m=Bd(f,v1);if(!m)return null;var x=h==="vertical"?o[0].height/2:o[0].width/2,b=function(w,C){var T=Array.isArray(w.value)?w.value[1]:w.value;return{x:w.x,y:w.y,value:T,errorVal:vl(w,C)}},j={clipPath:s?"url(#clipPath-".concat(a,")"):null};return $e.createElement(Zs,j,m.map(function(N){return $e.cloneElement(N,{key:"error-bar-".concat(a,"-").concat(N.props.dataKey),data:o,xAxis:l,yAxis:d,layout:h,offset:x,dataPointFormatter:b})}))}},{key:"render",value:function(){var s=this.props,a=s.hide,i=s.data,o=s.className,l=s.xAxis,d=s.yAxis,h=s.left,f=s.top,m=s.width,x=s.height,b=s.isAnimationActive,j=s.background,N=s.id;if(a||!i||!i.length)return null;var w=this.state.isAnimationFinished,C=jn("recharts-bar",o),T=l&&l.allowDataOverflow,O=d&&d.allowDataOverflow,I=T||O,P=yn(N)?this.id:N;return $e.createElement(Zs,{className:C},T||O?$e.createElement("defs",null,$e.createElement("clipPath",{id:"clipPath-".concat(P)},$e.createElement("rect",{x:T?h:h-m/2,y:O?f:f-x/2,width:T?m:m*2,height:O?x:x*2}))):null,$e.createElement(Zs,{className:"recharts-bar-rectangles",clipPath:I?"url(#clipPath-".concat(P,")"):null},j?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(I,P),(!b||w)&&gm.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curData:s.data,prevData:a.curData}:s.data!==a.curData?{curData:s.data}:null}}])})(g.PureComponent);_X=b1;Rp(b1,"displayName","Bar");Rp(b1,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!U0.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Rp(b1,"getComposedData",function(t){var e=t.props,r=t.item,s=t.barPosition,a=t.bandSize,i=t.xAxis,o=t.yAxis,l=t.xAxisTicks,d=t.yAxisTicks,h=t.stackedData,f=t.dataStartIndex,m=t.displayedData,x=t.offset,b=p1e(s,r);if(!b)return null;var j=e.layout,N=r.type.defaultProps,w=N!==void 0?ni(ni({},N),r.props):r.props,C=w.dataKey,T=w.children,O=w.minPointSize,I=j==="horizontal"?o:i,P=h?I.scale.domain():null,A=j1e({numericAxis:I}),R=Bd(T,uG),B=m.map(function(V,X){var ee,Y,re,le,te,de;h?ee=g1e(h[f+X],P):(ee=vl(V,C),Array.isArray(ee)||(ee=[A,ee]));var ie=zSe(O,_X.defaultProps.minPointSize)(ee[1],X);if(j==="horizontal"){var Z,ne=[o.scale(ee[0]),o.scale(ee[1])],oe=ne[0],U=ne[1];Y=J8({axis:i,ticks:l,bandSize:a,offset:b.offset,entry:V,index:X}),re=(Z=U??oe)!==null&&Z!==void 0?Z:void 0,le=b.size;var W=oe-U;if(te=Number.isNaN(W)?0:W,de={x:Y,y:o.y,width:le,height:o.height},Math.abs(ie)>0&&Math.abs(te)<Math.abs(ie)){var be=$u(te||ie)*(Math.abs(ie)-Math.abs(te));re-=be,te+=be}}else{var pe=[i.scale(ee[0]),i.scale(ee[1])],ge=pe[0],Ce=pe[1];if(Y=ge,re=J8({axis:o,ticks:d,bandSize:a,offset:b.offset,entry:V,index:X}),le=Ce-ge,te=b.size,de={x:i.x,y:re,width:i.width,height:te},Math.abs(ie)>0&&Math.abs(le)<Math.abs(ie)){var he=$u(le||ie)*(Math.abs(ie)-Math.abs(le));le+=he}}return ni(ni(ni({},V),{},{x:Y,y:re,width:le,height:te,value:h?ee:ee[1],payload:V,background:de},R&&R[X]&&R[X].props),{},{tooltipPayload:[gX(r,V)],tooltipPosition:{x:Y+le/2,y:re+te/2}})});return ni({data:B,layout:j},x)});function jw(t){"@babel/helpers - typeof";return jw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jw(t)}function ZSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gL(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,OX(s.key),s)}}function eke(t,e,r){return e&&gL(t.prototype,e),r&&gL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function xL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function _u(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xL(Object(r),!0).forEach(function(s){JS(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xL(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function JS(t,e,r){return e=OX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function OX(t){var e=tke(t,"string");return jw(e)=="symbol"?e:e+""}function tke(t,e){if(jw(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(jw(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var RX=function(e,r,s,a,i){var o=e.width,l=e.height,d=e.layout,h=e.children,f=Object.keys(r),m={left:s.left,leftMirror:s.left,right:o-s.right,rightMirror:o-s.right,top:s.top,topMirror:s.top,bottom:l-s.bottom,bottomMirror:l-s.bottom},x=!!Rc(h,b1);return f.reduce(function(b,j){var N=r[j],w=N.orientation,C=N.domain,T=N.padding,O=T===void 0?{}:T,I=N.mirror,P=N.reversed,A="".concat(w).concat(I?"Mirror":""),R,B,V,X,ee;if(N.type==="number"&&(N.padding==="gap"||N.padding==="no-gap")){var Y=C[1]-C[0],re=1/0,le=N.categoricalDomain.sort(epe);if(le.forEach(function(pe,ge){ge>0&&(re=Math.min((pe||0)-(le[ge-1]||0),re))}),Number.isFinite(re)){var te=re/Y,de=N.layout==="vertical"?s.height:s.width;if(N.padding==="gap"&&(R=te*de/2),N.padding==="no-gap"){var ie=S0(e.barCategoryGap,te*de),Z=te*de/2;R=Z-ie-(Z-ie)/de*ie}}}a==="xAxis"?B=[s.left+(O.left||0)+(R||0),s.left+s.width-(O.right||0)-(R||0)]:a==="yAxis"?B=d==="horizontal"?[s.top+s.height-(O.bottom||0),s.top+(O.top||0)]:[s.top+(O.top||0)+(R||0),s.top+s.height-(O.bottom||0)-(R||0)]:B=N.range,P&&(B=[B[1],B[0]]);var ne=f1e(N,i,x),oe=ne.scale,U=ne.realScaleType;oe.domain(C).range(B),m1e(oe);var W=N1e(oe,_u(_u({},N),{},{realScaleType:U}));a==="xAxis"?(ee=w==="top"&&!I||w==="bottom"&&I,V=s.left,X=m[A]-ee*N.height):a==="yAxis"&&(ee=w==="left"&&!I||w==="right"&&I,V=m[A]-ee*N.width,X=s.top);var be=_u(_u(_u({},N),W),{},{realScaleType:U,x:V,y:X,scale:oe,width:a==="xAxis"?s.width:N.width,height:a==="yAxis"?s.height:N.height});return be.bandSize=Xj(be,W),!N.hide&&a==="xAxis"?m[A]+=(ee?-1:1)*be.height:N.hide||(m[A]+=(ee?-1:1)*be.width),_u(_u({},b),{},JS({},j,be))},{})},DX=function(e,r){var s=e.x,a=e.y,i=r.x,o=r.y;return{x:Math.min(s,i),y:Math.min(a,o),width:Math.abs(i-s),height:Math.abs(o-a)}},rke=function(e){var r=e.x1,s=e.y1,a=e.x2,i=e.y2;return DX({x:r,y:s},{x:a,y:i})},$X=(function(){function t(e){ZSe(this,t),this.scale=e}return eke(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.bandAware,i=s.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(a){var d=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+d}return this.scale(r)}}},{key:"isInRange",value:function(r){var s=this.range(),a=s[0],i=s[s.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new t(r)}}])})();JS($X,"EPS",1e-4);var rI=function(e){var r=Object.keys(e).reduce(function(s,a){return _u(_u({},s),{},JS({},a,$X.create(e[a])))},{});return _u(_u({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return PSe(a,function(d,h){return r[h].apply(d,{bandAware:o,position:l})})},isInRange:function(a){return OSe(a,function(i,o){return r[o].isInRange(i)})}})};function nke(t){return(t%180+180)%180}var ske=function(e){var r=e.width,s=e.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=nke(a),o=i*Math.PI/180,l=Math.atan(s/r),d=o>l&&o<Math.PI-l?s/Math.sin(o):r/Math.cos(o);return Math.abs(d)},ZT,yL;function ake(){if(yL)return ZT;yL=1;var t=rg(),e=m1(),r=$S();function s(a){return function(i,o,l){var d=Object(i);if(!e(i)){var h=t(o,3);i=r(i),o=function(m){return h(d[m],m,d)}}var f=a(i,o,l);return f>-1?d[h?i[f]:f]:void 0}}return ZT=s,ZT}var e3,vL;function ike(){if(vL)return e3;vL=1;var t=EX();function e(r){var s=t(r),a=s%1;return s===s?a?s-a:s:0}return e3=e,e3}var t3,bL;function oke(){if(bL)return t3;bL=1;var t=QK(),e=rg(),r=ike(),s=Math.max;function a(i,o,l){var d=i==null?0:i.length;if(!d)return-1;var h=l==null?0:r(l);return h<0&&(h=s(d+h,0)),t(i,e(o,3),h)}return t3=a,t3}var r3,wL;function lke(){if(wL)return r3;wL=1;var t=ake(),e=oke(),r=t(e);return r3=r,r3}lke();var cke=hK();const dke=Hs(cke);var uke=dke(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),LX=g.createContext(void 0),FX=g.createContext(void 0),BX=g.createContext(void 0),hke=g.createContext({}),UX=g.createContext(void 0),zX=g.createContext(0),VX=g.createContext(0),NL=function(e){var r=e.state,s=r.xAxisMap,a=r.yAxisMap,i=r.offset,o=e.clipPathId,l=e.children,d=e.width,h=e.height,f=uke(i);return $e.createElement(LX.Provider,{value:s},$e.createElement(FX.Provider,{value:a},$e.createElement(hke.Provider,{value:i},$e.createElement(BX.Provider,{value:f},$e.createElement(UX.Provider,{value:o},$e.createElement(zX.Provider,{value:h},$e.createElement(VX.Provider,{value:d},l)))))))},fke=function(){return g.useContext(UX)},qX=function(e){var r=g.useContext(LX);r==null&&C0();var s=r[e];return s==null&&C0(),s},HX=function(e){var r=g.useContext(FX);r==null&&C0();var s=r[e];return s==null&&C0(),s},mke=function(){var e=g.useContext(BX);return e},WX=function(){return g.useContext(VX)},YX=function(){return g.useContext(zX)};function Oy(t){"@babel/helpers - typeof";return Oy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oy(t)}function pke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gke(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,GX(s.key),s)}}function xke(t,e,r){return e&&gke(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function yke(t,e,r){return e=d2(e),vke(t,KX()?Reflect.construct(e,r||[],d2(t).constructor):e.apply(t,r))}function vke(t,e){if(e&&(Oy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bke(t)}function bke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function KX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KX=function(){return!!t})()}function d2(t){return d2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},d2(t)}function wke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k5(t,e)}function k5(t,e){return k5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},k5(t,e)}function jL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function SL(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jL(Object(r),!0).forEach(function(s){nI(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jL(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function nI(t,e,r){return e=GX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function GX(t){var e=Nke(t,"string");return Oy(e)=="symbol"?e:e+""}function Nke(t,e){if(Oy(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Oy(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function jke(t,e){return Eke(t)||Cke(t,e)||kke(t,e)||Ske()}function Ske(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kke(t,e){if(t){if(typeof t=="string")return kL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kL(t,e)}}function kL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function Cke(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s,a,i,o,l=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(s=i.call(r)).done)&&(l.push(s.value),l.length!==e);d=!0);}catch(f){h=!0,a=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return l}}function Eke(t){if(Array.isArray(t))return t}function C5(){return C5=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},C5.apply(this,arguments)}var Tke=function(e,r){var s;return $e.isValidElement(e)?s=$e.cloneElement(e,r):gn(e)?s=e(r):s=$e.createElement("line",C5({},r,{className:"recharts-reference-line-line"})),s},Pke=function(e,r,s,a,i,o,l,d,h){var f=i.x,m=i.y,x=i.width,b=i.height;if(s){var j=h.y,N=e.y.apply(j,{position:o});if(rf(h,"discard")&&!e.y.isInRange(N))return null;var w=[{x:f+x,y:N},{x:f,y:N}];return d==="left"?w.reverse():w}if(r){var C=h.x,T=e.x.apply(C,{position:o});if(rf(h,"discard")&&!e.x.isInRange(T))return null;var O=[{x:T,y:m+b},{x:T,y:m}];return l==="top"?O.reverse():O}if(a){var I=h.segment,P=I.map(function(A){return e.apply(A,{position:o})});return rf(h,"discard")&&kSe(P,function(A){return!e.isInRange(A)})?null:P}return null};function Ake(t){var e=t.x,r=t.y,s=t.segment,a=t.xAxisId,i=t.yAxisId,o=t.shape,l=t.className,d=t.alwaysShow,h=fke(),f=qX(a),m=HX(i),x=mke();if(!h||!x)return null;c0(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var b=rI({x:f.scale,y:m.scale}),j=Ni(e),N=Ni(r),w=s&&s.length===2,C=Pke(b,j,N,w,x,t.position,f.orientation,m.orientation,t);if(!C)return null;var T=jke(C,2),O=T[0],I=O.x,P=O.y,A=T[1],R=A.x,B=A.y,V=rf(t,"hidden")?"url(#".concat(h,")"):void 0,X=SL(SL({clipPath:V},hn(t,!0)),{},{x1:I,y1:P,x2:R,y2:B});return $e.createElement(Zs,{className:jn("recharts-reference-line",l)},Tke(o,X),zo.renderCallByParent(t,rke({x1:I,y1:P,x2:R,y2:B})))}var nf=(function(t){function e(){return pke(this,e),yke(this,e,arguments)}return wke(e,t),xke(e,[{key:"render",value:function(){return $e.createElement(Ake,this.props)}}])})($e.Component);nI(nf,"displayName","ReferenceLine");nI(nf,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function E5(){return E5=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},E5.apply(this,arguments)}function Ry(t){"@babel/helpers - typeof";return Ry=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ry(t)}function CL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function EL(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?CL(Object(r),!0).forEach(function(s){ZS(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):CL(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function _ke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ike(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,QX(s.key),s)}}function Mke(t,e,r){return e&&Ike(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Oke(t,e,r){return e=u2(e),Rke(t,XX()?Reflect.construct(e,r||[],u2(t).constructor):e.apply(t,r))}function Rke(t,e){if(e&&(Ry(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dke(t)}function Dke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function XX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XX=function(){return!!t})()}function u2(t){return u2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},u2(t)}function $ke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T5(t,e)}function T5(t,e){return T5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},T5(t,e)}function ZS(t,e,r){return e=QX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function QX(t){var e=Lke(t,"string");return Ry(e)=="symbol"?e:e+""}function Lke(t,e){if(Ry(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Ry(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Fke=function(e){var r=e.x,s=e.y,a=e.xAxis,i=e.yAxis,o=rI({x:a.scale,y:i.scale}),l=o.apply({x:r,y:s},{bandAware:!0});return rf(e,"discard")&&!o.isInRange(l)?null:l},ek=(function(t){function e(){return _ke(this,e),Oke(this,e,arguments)}return $ke(e,t),Mke(e,[{key:"render",value:function(){var s=this.props,a=s.x,i=s.y,o=s.r,l=s.alwaysShow,d=s.clipPathId,h=Ni(a),f=Ni(i);if(c0(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!h||!f)return null;var m=Fke(this.props);if(!m)return null;var x=m.x,b=m.y,j=this.props,N=j.shape,w=j.className,C=rf(this.props,"hidden")?"url(#".concat(d,")"):void 0,T=EL(EL({clipPath:C},hn(this.props,!0)),{},{cx:x,cy:b});return $e.createElement(Zs,{className:jn("recharts-reference-dot",w)},e.renderDot(N,T),zo.renderCallByParent(this.props,{x:x-o,y:b-o,width:2*o,height:2*o}))}}])})($e.Component);ZS(ek,"displayName","ReferenceDot");ZS(ek,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});ZS(ek,"renderDot",function(t,e){var r;return $e.isValidElement(t)?r=$e.cloneElement(t,e):gn(t)?r=t(e):r=$e.createElement(GS,E5({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r});function P5(){return P5=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},P5.apply(this,arguments)}function Dy(t){"@babel/helpers - typeof";return Dy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dy(t)}function TL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function PL(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?TL(Object(r),!0).forEach(function(s){tk(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):TL(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Bke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Uke(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,ZX(s.key),s)}}function zke(t,e,r){return e&&Uke(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Vke(t,e,r){return e=h2(e),qke(t,JX()?Reflect.construct(e,r||[],h2(t).constructor):e.apply(t,r))}function qke(t,e){if(e&&(Dy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hke(t)}function Hke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function JX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JX=function(){return!!t})()}function h2(t){return h2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},h2(t)}function Wke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A5(t,e)}function A5(t,e){return A5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},A5(t,e)}function tk(t,e,r){return e=ZX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ZX(t){var e=Yke(t,"string");return Dy(e)=="symbol"?e:e+""}function Yke(t,e){if(Dy(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Dy(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Kke=function(e,r,s,a,i){var o=i.x1,l=i.x2,d=i.y1,h=i.y2,f=i.xAxis,m=i.yAxis;if(!f||!m)return null;var x=rI({x:f.scale,y:m.scale}),b={x:e?x.x.apply(o,{position:"start"}):x.x.rangeMin,y:s?x.y.apply(d,{position:"start"}):x.y.rangeMin},j={x:r?x.x.apply(l,{position:"end"}):x.x.rangeMax,y:a?x.y.apply(h,{position:"end"}):x.y.rangeMax};return rf(i,"discard")&&(!x.isInRange(b)||!x.isInRange(j))?null:DX(b,j)},rk=(function(t){function e(){return Bke(this,e),Vke(this,e,arguments)}return Wke(e,t),zke(e,[{key:"render",value:function(){var s=this.props,a=s.x1,i=s.x2,o=s.y1,l=s.y2,d=s.className,h=s.alwaysShow,f=s.clipPathId;c0(h===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=Ni(a),x=Ni(i),b=Ni(o),j=Ni(l),N=this.props.shape;if(!m&&!x&&!b&&!j&&!N)return null;var w=Kke(m,x,b,j,this.props);if(!w&&!N)return null;var C=rf(this.props,"hidden")?"url(#".concat(f,")"):void 0;return $e.createElement(Zs,{className:jn("recharts-reference-area",d)},e.renderRect(N,PL(PL({clipPath:C},hn(this.props,!0)),w)),zo.renderCallByParent(this.props,w))}}])})($e.Component);tk(rk,"displayName","ReferenceArea");tk(rk,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});tk(rk,"renderRect",function(t,e){var r;return $e.isValidElement(t)?r=$e.cloneElement(t,e):gn(t)?r=t(e):r=$e.createElement(tI,P5({},e,{className:"recharts-reference-area-rect"})),r});function eQ(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var s=[],a=0;a<t.length;a+=e)s.push(t[a]);return s}function Gke(t,e,r){var s={width:t.width+e.width,height:t.height+e.height};return ske(s,r)}function Xke(t,e,r){var s=r==="width",a=t.x,i=t.y,o=t.width,l=t.height;return e===1?{start:s?a:i,end:s?a+o:i+l}:{start:s?a+o:i+l,end:s?a:i}}function f2(t,e,r,s,a){if(t*e<t*s||t*e>t*a)return!1;var i=r();return t*(e-t*i/2-s)>=0&&t*(e+t*i/2-a)<=0}function Qke(t,e){return eQ(t,e+1)}function Jke(t,e,r,s,a){for(var i=(s||[]).slice(),o=e.start,l=e.end,d=0,h=1,f=o,m=function(){var j=s==null?void 0:s[d];if(j===void 0)return{v:eQ(s,h)};var N=d,w,C=function(){return w===void 0&&(w=r(j,N)),w},T=j.coordinate,O=d===0||f2(t,T,C,f,l);O||(d=0,f=o,h+=1),O&&(f=T+t*(C()/2+a),d+=h)},x;h<=i.length;)if(x=m(),x)return x.v;return[]}function Sw(t){"@babel/helpers - typeof";return Sw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sw(t)}function AL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function Bo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?AL(Object(r),!0).forEach(function(s){Zke(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):AL(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Zke(t,e,r){return e=eCe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eCe(t){var e=tCe(t,"string");return Sw(e)=="symbol"?e:e+""}function tCe(t,e){if(Sw(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Sw(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rCe(t,e,r,s,a){for(var i=(s||[]).slice(),o=i.length,l=e.start,d=e.end,h=function(x){var b=i[x],j,N=function(){return j===void 0&&(j=r(b,x)),j};if(x===o-1){var w=t*(b.coordinate+t*N()/2-d);i[x]=b=Bo(Bo({},b),{},{tickCoord:w>0?b.coordinate-w*t:b.coordinate})}else i[x]=b=Bo(Bo({},b),{},{tickCoord:b.coordinate});var C=f2(t,b.tickCoord,N,l,d);C&&(d=b.tickCoord-t*(N()/2+a),i[x]=Bo(Bo({},b),{},{isShow:!0}))},f=o-1;f>=0;f--)h(f);return i}function nCe(t,e,r,s,a,i){var o=(s||[]).slice(),l=o.length,d=e.start,h=e.end;if(i){var f=s[l-1],m=r(f,l-1),x=t*(f.coordinate+t*m/2-h);o[l-1]=f=Bo(Bo({},f),{},{tickCoord:x>0?f.coordinate-x*t:f.coordinate});var b=f2(t,f.tickCoord,function(){return m},d,h);b&&(h=f.tickCoord-t*(m/2+a),o[l-1]=Bo(Bo({},f),{},{isShow:!0}))}for(var j=i?l-1:l,N=function(T){var O=o[T],I,P=function(){return I===void 0&&(I=r(O,T)),I};if(T===0){var A=t*(O.coordinate-t*P()/2-d);o[T]=O=Bo(Bo({},O),{},{tickCoord:A<0?O.coordinate-A*t:O.coordinate})}else o[T]=O=Bo(Bo({},O),{},{tickCoord:O.coordinate});var R=f2(t,O.tickCoord,P,d,h);R&&(d=O.tickCoord+t*(P()/2+a),o[T]=Bo(Bo({},O),{},{isShow:!0}))},w=0;w<j;w++)N(w);return o}function sCe(t,e,r){var s=t.tick,a=t.ticks,i=t.viewBox,o=t.minTickGap,l=t.orientation,d=t.interval,h=t.tickFormatter,f=t.unit,m=t.angle;if(!a||!a.length||!s)return[];if(Rt(d)||U0.isSsr)return Qke(a,typeof d=="number"&&Rt(d)?d:0);var x=[],b=l==="top"||l==="bottom"?"width":"height",j=f&&b==="width"?Sb(f,{fontSize:e,letterSpacing:r}):{width:0,height:0},N=function(O,I){var P=gn(h)?h(O.value,I):O.value;return b==="width"?Gke(Sb(P,{fontSize:e,letterSpacing:r}),j,m):Sb(P,{fontSize:e,letterSpacing:r})[b]},w=a.length>=2?$u(a[1].coordinate-a[0].coordinate):1,C=Xke(i,w,b);return d==="equidistantPreserveStart"?Jke(w,C,N,a,o):(d==="preserveStart"||d==="preserveStartEnd"?x=nCe(w,C,N,a,o,d==="preserveStartEnd"):x=rCe(w,C,N,a,o),x.filter(function(T){return T.isShow}))}var aCe=["viewBox"],iCe=["viewBox"],oCe=["ticks"];function $y(t){"@babel/helpers - typeof";return $y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$y(t)}function Lx(){return Lx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Lx.apply(this,arguments)}function _L(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function gi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_L(Object(r),!0).forEach(function(s){sI(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_L(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function n3(t,e){if(t==null)return{};var r=lCe(t,e),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function lCe(t,e){if(t==null)return{};var r={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;r[s]=t[s]}return r}function cCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function IL(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,rQ(s.key),s)}}function dCe(t,e,r){return e&&IL(t.prototype,e),r&&IL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function uCe(t,e,r){return e=m2(e),hCe(t,tQ()?Reflect.construct(e,r||[],m2(t).constructor):e.apply(t,r))}function hCe(t,e){if(e&&($y(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fCe(t)}function fCe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tQ=function(){return!!t})()}function m2(t){return m2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},m2(t)}function mCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_5(t,e)}function _5(t,e){return _5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},_5(t,e)}function sI(t,e,r){return e=rQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rQ(t){var e=pCe(t,"string");return $y(e)=="symbol"?e:e+""}function pCe(t,e){if($y(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if($y(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var nk=(function(t){function e(r){var s;return cCe(this,e),s=uCe(this,e,[r]),s.state={fontSize:"",letterSpacing:""},s}return mCe(e,t),dCe(e,[{key:"shouldComponentUpdate",value:function(s,a){var i=s.viewBox,o=n3(s,aCe),l=this.props,d=l.viewBox,h=n3(l,iCe);return!Wx(i,d)||!Wx(o,h)||!Wx(a,this.state)}},{key:"componentDidMount",value:function(){var s=this.layerReference;if(s){var a=s.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(s){var a=this.props,i=a.x,o=a.y,l=a.width,d=a.height,h=a.orientation,f=a.tickSize,m=a.mirror,x=a.tickMargin,b,j,N,w,C,T,O=m?-1:1,I=s.tickSize||f,P=Rt(s.tickCoord)?s.tickCoord:s.coordinate;switch(h){case"top":b=j=s.coordinate,w=o+ +!m*d,N=w-O*I,T=N-O*x,C=P;break;case"left":N=w=s.coordinate,j=i+ +!m*l,b=j-O*I,C=b-O*x,T=P;break;case"right":N=w=s.coordinate,j=i+ +m*l,b=j+O*I,C=b+O*x,T=P;break;default:b=j=s.coordinate,w=o+ +m*d,N=w+O*I,T=N+O*x,C=P;break}return{line:{x1:b,y1:N,x2:j,y2:w},tick:{x:C,y:T}}}},{key:"getTickTextAnchor",value:function(){var s=this.props,a=s.orientation,i=s.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var s=this.props,a=s.orientation,i=s.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var s=this.props,a=s.x,i=s.y,o=s.width,l=s.height,d=s.orientation,h=s.mirror,f=s.axisLine,m=gi(gi(gi({},hn(this.props,!1)),hn(f,!1)),{},{fill:"none"});if(d==="top"||d==="bottom"){var x=+(d==="top"&&!h||d==="bottom"&&h);m=gi(gi({},m),{},{x1:a,y1:i+x*l,x2:a+o,y2:i+x*l})}else{var b=+(d==="left"&&!h||d==="right"&&h);m=gi(gi({},m),{},{x1:a+b*o,y1:i,x2:a+b*o,y2:i+l})}return $e.createElement("line",Lx({},m,{className:jn("recharts-cartesian-axis-line",Fd(f,"className"))}))}},{key:"renderTicks",value:function(s,a,i){var o=this,l=this.props,d=l.tickLine,h=l.stroke,f=l.tick,m=l.tickFormatter,x=l.unit,b=sCe(gi(gi({},this.props),{},{ticks:s}),a,i),j=this.getTickTextAnchor(),N=this.getTickVerticalAnchor(),w=hn(this.props,!1),C=hn(f,!1),T=gi(gi({},w),{},{fill:"none"},hn(d,!1)),O=b.map(function(I,P){var A=o.getTickLineCoord(I),R=A.line,B=A.tick,V=gi(gi(gi(gi({textAnchor:j,verticalAnchor:N},w),{},{stroke:"none",fill:h},C),B),{},{index:P,payload:I,visibleTicksCount:b.length,tickFormatter:m});return $e.createElement(Zs,Lx({className:"recharts-cartesian-axis-tick",key:"tick-".concat(I.value,"-").concat(I.coordinate,"-").concat(I.tickCoord)},Sj(o.props,I,P)),d&&$e.createElement("line",Lx({},T,R,{className:jn("recharts-cartesian-axis-tick-line",Fd(d,"className"))})),f&&e.renderTickItem(f,V,"".concat(gn(m)?m(I.value,P):I.value).concat(x||"")))});return $e.createElement("g",{className:"recharts-cartesian-axis-ticks"},O)}},{key:"render",value:function(){var s=this,a=this.props,i=a.axisLine,o=a.width,l=a.height,d=a.ticksGenerator,h=a.className,f=a.hide;if(f)return null;var m=this.props,x=m.ticks,b=n3(m,oCe),j=x;return gn(d)&&(j=x&&x.length>0?d(this.props):d(b)),o<=0||l<=0||!j||!j.length?null:$e.createElement(Zs,{className:jn("recharts-cartesian-axis",h),ref:function(w){s.layerReference=w}},i&&this.renderAxisLine(),this.renderTicks(j,this.state.fontSize,this.state.letterSpacing),zo.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(s,a,i){var o,l=jn(a.className,"recharts-cartesian-axis-tick-value");return $e.isValidElement(s)?o=$e.cloneElement(s,gi(gi({},a),{},{className:l})):gn(s)?o=s(gi(gi({},a),{},{className:l})):o=$e.createElement(Rj,Lx({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])})(g.Component);sI(nk,"displayName","CartesianAxis");sI(nk,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var gCe=["type","layout","connectNulls","ref"],xCe=["key"];function Ly(t){"@babel/helpers - typeof";return Ly=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ly(t)}function ML(t,e){if(t==null)return{};var r=yCe(t,e),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function yCe(t,e){if(t==null)return{};var r={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;r[s]=t[s]}return r}function Tb(){return Tb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Tb.apply(this,arguments)}function OL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function _c(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?OL(Object(r),!0).forEach(function(s){Iu(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):OL(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Sx(t){return NCe(t)||wCe(t)||bCe(t)||vCe()}function vCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bCe(t,e){if(t){if(typeof t=="string")return I5(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I5(t,e)}}function wCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function NCe(t){if(Array.isArray(t))return I5(t)}function I5(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function jCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function RL(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,sQ(s.key),s)}}function SCe(t,e,r){return e&&RL(t.prototype,e),r&&RL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function kCe(t,e,r){return e=p2(e),CCe(t,nQ()?Reflect.construct(e,r||[],p2(t).constructor):e.apply(t,r))}function CCe(t,e){if(e&&(Ly(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ECe(t)}function ECe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nQ=function(){return!!t})()}function p2(t){return p2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},p2(t)}function TCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&M5(t,e)}function M5(t,e){return M5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},M5(t,e)}function Iu(t,e,r){return e=sQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sQ(t){var e=PCe(t,"string");return Ly(e)=="symbol"?e:e+""}function PCe(t,e){if(Ly(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Ly(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Is=(function(t){function e(){var r;jCe(this,e);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=kCe(this,e,[].concat(a)),Iu(r,"state",{isAnimationFinished:!0,totalLength:0}),Iu(r,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),Iu(r,"getStrokeDasharray",function(o,l,d){var h=d.reduce(function(C,T){return C+T});if(!h)return r.generateSimpleStrokeDasharray(l,o);for(var f=Math.floor(o/h),m=o%h,x=l-o,b=[],j=0,N=0;j<d.length;N+=d[j],++j)if(N+d[j]>m){b=[].concat(Sx(d.slice(0,j)),[m-N]);break}var w=b.length%2===0?[0,x]:[x];return[].concat(Sx(e.repeat(d,f)),Sx(b),w).map(function(C){return"".concat(C,"px")}).join(", ")}),Iu(r,"id",vv("recharts-line-")),Iu(r,"pathRef",function(o){r.mainCurve=o}),Iu(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),Iu(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return TCe(e,t),SCe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();this.setState({totalLength:s})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();s!==this.state.totalLength&&this.setState({totalLength:s})}}},{key:"getTotalLength",value:function(){var s=this.mainCurve;try{return s&&s.getTotalLength&&s.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(s,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,l=i.xAxis,d=i.yAxis,h=i.layout,f=i.children,m=Bd(f,v1);if(!m)return null;var x=function(N,w){return{x:N.x,y:N.y,value:N.value,errorVal:vl(N.payload,w)}},b={clipPath:s?"url(#clipPath-".concat(a,")"):null};return $e.createElement(Zs,b,m.map(function(j){return $e.cloneElement(j,{key:"bar-".concat(j.props.dataKey),data:o,xAxis:l,yAxis:d,layout:h,dataPointFormatter:x})}))}},{key:"renderDots",value:function(s,a,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,d=l.dot,h=l.points,f=l.dataKey,m=hn(this.props,!1),x=hn(d,!0),b=h.map(function(N,w){var C=_c(_c(_c({key:"dot-".concat(w),r:3},m),x),{},{index:w,cx:N.x,cy:N.y,value:N.value,dataKey:f,payload:N.payload,points:h});return e.renderDotItem(d,C)}),j={clipPath:s?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return $e.createElement(Zs,Tb({className:"recharts-line-dots",key:"dots"},j),b)}},{key:"renderCurveStatically",value:function(s,a,i,o){var l=this.props,d=l.type,h=l.layout,f=l.connectNulls;l.ref;var m=ML(l,gCe),x=_c(_c(_c({},hn(m,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:s},o),{},{type:d,layout:h,connectNulls:f});return $e.createElement(Xx,Tb({},x,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(s,a){var i=this,o=this.props,l=o.points,d=o.strokeDasharray,h=o.isAnimationActive,f=o.animationBegin,m=o.animationDuration,x=o.animationEasing,b=o.animationId,j=o.animateNewValues,N=o.width,w=o.height,C=this.state,T=C.prevPoints,O=C.totalLength;return $e.createElement(df,{begin:f,duration:m,isActive:h,easing:x,from:{t:0},to:{t:1},key:"line-".concat(b),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(I){var P=I.t;if(T){var A=T.length/l.length,R=l.map(function(Y,re){var le=Math.floor(re*A);if(T[le]){var te=T[le],de=vo(te.x,Y.x),ie=vo(te.y,Y.y);return _c(_c({},Y),{},{x:de(P),y:ie(P)})}if(j){var Z=vo(N*2,Y.x),ne=vo(w/2,Y.y);return _c(_c({},Y),{},{x:Z(P),y:ne(P)})}return _c(_c({},Y),{},{x:Y.x,y:Y.y})});return i.renderCurveStatically(R,s,a)}var B=vo(0,O),V=B(P),X;if(d){var ee="".concat(d).split(/[,\s]+/gim).map(function(Y){return parseFloat(Y)});X=i.getStrokeDasharray(V,O,ee)}else X=i.generateSimpleStrokeDasharray(O,V);return i.renderCurveStatically(l,s,a,{strokeDasharray:X})})}},{key:"renderCurve",value:function(s,a){var i=this.props,o=i.points,l=i.isAnimationActive,d=this.state,h=d.prevPoints,f=d.totalLength;return l&&o&&o.length&&(!h&&f>0||!Ty(h,o))?this.renderCurveWithAnimation(s,a):this.renderCurveStatically(o,s,a)}},{key:"render",value:function(){var s,a=this.props,i=a.hide,o=a.dot,l=a.points,d=a.className,h=a.xAxis,f=a.yAxis,m=a.top,x=a.left,b=a.width,j=a.height,N=a.isAnimationActive,w=a.id;if(i||!l||!l.length)return null;var C=this.state.isAnimationFinished,T=l.length===1,O=jn("recharts-line",d),I=h&&h.allowDataOverflow,P=f&&f.allowDataOverflow,A=I||P,R=yn(w)?this.id:w,B=(s=hn(o,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},V=B.r,X=V===void 0?3:V,ee=B.strokeWidth,Y=ee===void 0?2:ee,re=xK(o)?o:{},le=re.clipDot,te=le===void 0?!0:le,de=X*2+Y;return $e.createElement(Zs,{className:O},I||P?$e.createElement("defs",null,$e.createElement("clipPath",{id:"clipPath-".concat(R)},$e.createElement("rect",{x:I?x:x-b/2,y:P?m:m-j/2,width:I?b:b*2,height:P?j:j*2})),!te&&$e.createElement("clipPath",{id:"clipPath-dots-".concat(R)},$e.createElement("rect",{x:x-de/2,y:m-de/2,width:b+de,height:j+de}))):null,!T&&this.renderCurve(A,R),this.renderErrorBar(A,R),(T||o)&&this.renderDots(A,te,R),(!N||C)&&gm.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,prevPoints:a.curPoints}:s.points!==a.curPoints?{curPoints:s.points}:null}},{key:"repeat",value:function(s,a){for(var i=s.length%2!==0?[].concat(Sx(s),[0]):s,o=[],l=0;l<a;++l)o=[].concat(Sx(o),Sx(i));return o}},{key:"renderDotItem",value:function(s,a){var i;if($e.isValidElement(s))i=$e.cloneElement(s,a);else if(gn(s))i=s(a);else{var o=a.key,l=ML(a,xCe),d=jn("recharts-line-dot",typeof s!="boolean"?s.className:"");i=$e.createElement(GS,Tb({key:o},l,{className:d}))}return i}}])})(g.PureComponent);Iu(Is,"displayName","Line");Iu(Is,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!U0.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Iu(Is,"getComposedData",function(t){var e=t.props,r=t.xAxis,s=t.yAxis,a=t.xAxisTicks,i=t.yAxisTicks,o=t.dataKey,l=t.bandSize,d=t.displayedData,h=t.offset,f=e.layout,m=d.map(function(x,b){var j=vl(x,o);return f==="horizontal"?{x:Gj({axis:r,ticks:a,bandSize:l,entry:x,index:b}),y:yn(j)?null:s.scale(j),value:j,payload:x}:{x:yn(j)?null:r.scale(j),y:Gj({axis:s,ticks:i,bandSize:l,entry:x,index:b}),value:j,payload:x}});return _c({points:m,layout:f},h)});var ACe=["layout","type","stroke","connectNulls","isRange","ref"],_Ce=["key"],aQ;function Fy(t){"@babel/helpers - typeof";return Fy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fy(t)}function iQ(t,e){if(t==null)return{};var r=ICe(t,e),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function ICe(t,e){if(t==null)return{};var r={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;r[s]=t[s]}return r}function Xg(){return Xg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Xg.apply(this,arguments)}function DL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function bp(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?DL(Object(r),!0).forEach(function(s){Jh(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):DL(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function MCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $L(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,lQ(s.key),s)}}function OCe(t,e,r){return e&&$L(t.prototype,e),r&&$L(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function RCe(t,e,r){return e=g2(e),DCe(t,oQ()?Reflect.construct(e,r||[],g2(t).constructor):e.apply(t,r))}function DCe(t,e){if(e&&(Fy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $Ce(t)}function $Ce(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oQ=function(){return!!t})()}function g2(t){return g2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},g2(t)}function LCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O5(t,e)}function O5(t,e){return O5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},O5(t,e)}function Jh(t,e,r){return e=lQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lQ(t){var e=FCe(t,"string");return Fy(e)=="symbol"?e:e+""}function FCe(t,e){if(Fy(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Fy(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ec=(function(t){function e(){var r;MCe(this,e);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=RCe(this,e,[].concat(a)),Jh(r,"state",{isAnimationFinished:!0}),Jh(r,"id",vv("recharts-area-")),Jh(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),gn(o)&&o()}),Jh(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),gn(o)&&o()}),r}return LCe(e,t),OCe(e,[{key:"renderDots",value:function(s,a,i){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var d=this.props,h=d.dot,f=d.points,m=d.dataKey,x=hn(this.props,!1),b=hn(h,!0),j=f.map(function(w,C){var T=bp(bp(bp({key:"dot-".concat(C),r:3},x),b),{},{index:C,cx:w.x,cy:w.y,dataKey:m,value:w.value,payload:w.payload,points:f});return e.renderDotItem(h,T)}),N={clipPath:s?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return $e.createElement(Zs,Xg({className:"recharts-area-dots"},N),j)}},{key:"renderHorizontalRect",value:function(s){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,d=o[0].x,h=o[o.length-1].x,f=s*Math.abs(d-h),m=Op(o.map(function(x){return x.y||0}));return Rt(i)&&typeof i=="number"?m=Math.max(i,m):i&&Array.isArray(i)&&i.length&&(m=Math.max(Op(i.map(function(x){return x.y||0})),m)),Rt(m)?$e.createElement("rect",{x:d<h?d:d-f,y:0,width:f,height:Math.floor(m+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(s){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,d=o[0].y,h=o[o.length-1].y,f=s*Math.abs(d-h),m=Op(o.map(function(x){return x.x||0}));return Rt(i)&&typeof i=="number"?m=Math.max(i,m):i&&Array.isArray(i)&&i.length&&(m=Math.max(Op(i.map(function(x){return x.x||0})),m)),Rt(m)?$e.createElement("rect",{x:0,y:d<h?d:d-f,width:m+(l?parseInt("".concat(l),10):1),height:Math.floor(f)}):null}},{key:"renderClipRect",value:function(s){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(s):this.renderHorizontalRect(s)}},{key:"renderAreaStatically",value:function(s,a,i,o){var l=this.props,d=l.layout,h=l.type,f=l.stroke,m=l.connectNulls,x=l.isRange;l.ref;var b=iQ(l,ACe);return $e.createElement(Zs,{clipPath:i?"url(#clipPath-".concat(o,")"):null},$e.createElement(Xx,Xg({},hn(b,!0),{points:s,connectNulls:m,type:h,baseLine:a,layout:d,stroke:"none",className:"recharts-area-area"})),f!=="none"&&$e.createElement(Xx,Xg({},hn(this.props,!1),{className:"recharts-area-curve",layout:d,type:h,connectNulls:m,fill:"none",points:s})),f!=="none"&&x&&$e.createElement(Xx,Xg({},hn(this.props,!1),{className:"recharts-area-curve",layout:d,type:h,connectNulls:m,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(s,a){var i=this,o=this.props,l=o.points,d=o.baseLine,h=o.isAnimationActive,f=o.animationBegin,m=o.animationDuration,x=o.animationEasing,b=o.animationId,j=this.state,N=j.prevPoints,w=j.prevBaseLine;return $e.createElement(df,{begin:f,duration:m,isActive:h,easing:x,from:{t:0},to:{t:1},key:"area-".concat(b),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(C){var T=C.t;if(N){var O=N.length/l.length,I=l.map(function(B,V){var X=Math.floor(V*O);if(N[X]){var ee=N[X],Y=vo(ee.x,B.x),re=vo(ee.y,B.y);return bp(bp({},B),{},{x:Y(T),y:re(T)})}return B}),P;if(Rt(d)&&typeof d=="number"){var A=vo(w,d);P=A(T)}else if(yn(d)||yv(d)){var R=vo(w,0);P=R(T)}else P=d.map(function(B,V){var X=Math.floor(V*O);if(w[X]){var ee=w[X],Y=vo(ee.x,B.x),re=vo(ee.y,B.y);return bp(bp({},B),{},{x:Y(T),y:re(T)})}return B});return i.renderAreaStatically(I,P,s,a)}return $e.createElement(Zs,null,$e.createElement("defs",null,$e.createElement("clipPath",{id:"animationClipPath-".concat(a)},i.renderClipRect(T))),$e.createElement(Zs,{clipPath:"url(#animationClipPath-".concat(a,")")},i.renderAreaStatically(l,d,s,a)))})}},{key:"renderArea",value:function(s,a){var i=this.props,o=i.points,l=i.baseLine,d=i.isAnimationActive,h=this.state,f=h.prevPoints,m=h.prevBaseLine,x=h.totalLength;return d&&o&&o.length&&(!f&&x>0||!Ty(f,o)||!Ty(m,l))?this.renderAreaWithAnimation(s,a):this.renderAreaStatically(o,l,s,a)}},{key:"render",value:function(){var s,a=this.props,i=a.hide,o=a.dot,l=a.points,d=a.className,h=a.top,f=a.left,m=a.xAxis,x=a.yAxis,b=a.width,j=a.height,N=a.isAnimationActive,w=a.id;if(i||!l||!l.length)return null;var C=this.state.isAnimationFinished,T=l.length===1,O=jn("recharts-area",d),I=m&&m.allowDataOverflow,P=x&&x.allowDataOverflow,A=I||P,R=yn(w)?this.id:w,B=(s=hn(o,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},V=B.r,X=V===void 0?3:V,ee=B.strokeWidth,Y=ee===void 0?2:ee,re=xK(o)?o:{},le=re.clipDot,te=le===void 0?!0:le,de=X*2+Y;return $e.createElement(Zs,{className:O},I||P?$e.createElement("defs",null,$e.createElement("clipPath",{id:"clipPath-".concat(R)},$e.createElement("rect",{x:I?f:f-b/2,y:P?h:h-j/2,width:I?b:b*2,height:P?j:j*2})),!te&&$e.createElement("clipPath",{id:"clipPath-dots-".concat(R)},$e.createElement("rect",{x:f-de/2,y:h-de/2,width:b+de,height:j+de}))):null,T?null:this.renderArea(A,R),(o||T)&&this.renderDots(A,te,R),(!N||C)&&gm.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,curBaseLine:s.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:s.points!==a.curPoints||s.baseLine!==a.curBaseLine?{curPoints:s.points,curBaseLine:s.baseLine}:null}}])})(g.PureComponent);aQ=ec;Jh(ec,"displayName","Area");Jh(ec,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!U0.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Jh(ec,"getBaseValue",function(t,e,r,s){var a=t.layout,i=t.baseValue,o=e.props.baseValue,l=o??i;if(Rt(l)&&typeof l=="number")return l;var d=a==="horizontal"?s:r,h=d.scale.domain();if(d.type==="number"){var f=Math.max(h[0],h[1]),m=Math.min(h[0],h[1]);return l==="dataMin"?m:l==="dataMax"||f<0?f:Math.max(Math.min(h[0],h[1]),0)}return l==="dataMin"?h[0]:l==="dataMax"?h[1]:h[0]});Jh(ec,"getComposedData",function(t){var e=t.props,r=t.item,s=t.xAxis,a=t.yAxis,i=t.xAxisTicks,o=t.yAxisTicks,l=t.bandSize,d=t.dataKey,h=t.stackedData,f=t.dataStartIndex,m=t.displayedData,x=t.offset,b=e.layout,j=h&&h.length,N=aQ.getBaseValue(e,r,s,a),w=b==="horizontal",C=!1,T=m.map(function(I,P){var A;j?A=h[f+P]:(A=vl(I,d),Array.isArray(A)?C=!0:A=[N,A]);var R=A[1]==null||j&&vl(I,d)==null;return w?{x:Gj({axis:s,ticks:i,bandSize:l,entry:I,index:P}),y:R?null:a.scale(A[1]),value:A,payload:I}:{x:R?null:s.scale(A[1]),y:Gj({axis:a,ticks:o,bandSize:l,entry:I,index:P}),value:A,payload:I}}),O;return j||C?O=T.map(function(I){var P=Array.isArray(I.value)?I.value[0]:null;return w?{x:I.x,y:P!=null&&I.y!=null?a.scale(P):null}:{x:P!=null?s.scale(P):null,y:I.y}}):O=w?a.scale(N):s.scale(N),bp({points:T,baseLine:O,layout:b,isRange:C},x)});Jh(ec,"renderDotItem",function(t,e){var r;if($e.isValidElement(t))r=$e.cloneElement(t,e);else if(gn(t))r=t(e);else{var s=jn("recharts-area-dot",typeof t!="boolean"?t.className:""),a=e.key,i=iQ(e,_Ce);r=$e.createElement(GS,Xg({},i,{key:a,className:s}))}return r});function By(t){"@babel/helpers - typeof";return By=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},By(t)}function BCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function UCe(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,uQ(s.key),s)}}function zCe(t,e,r){return e&&UCe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function VCe(t,e,r){return e=x2(e),qCe(t,cQ()?Reflect.construct(e,r||[],x2(t).constructor):e.apply(t,r))}function qCe(t,e){if(e&&(By(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HCe(t)}function HCe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cQ=function(){return!!t})()}function x2(t){return x2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},x2(t)}function WCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&R5(t,e)}function R5(t,e){return R5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},R5(t,e)}function dQ(t,e,r){return e=uQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uQ(t){var e=YCe(t,"string");return By(e)=="symbol"?e:e+""}function YCe(t,e){if(By(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(By(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function D5(){return D5=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},D5.apply(this,arguments)}function KCe(t){var e=t.xAxisId,r=WX(),s=YX(),a=qX(e);return a==null?null:g.createElement(nk,D5({},a,{className:jn("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:s},ticksGenerator:function(o){return Gg(o,!0)}}))}var Sa=(function(t){function e(){return BCe(this,e),VCe(this,e,arguments)}return WCe(e,t),zCe(e,[{key:"render",value:function(){return g.createElement(KCe,this.props)}}])})(g.Component);dQ(Sa,"displayName","XAxis");dQ(Sa,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Uy(t){"@babel/helpers - typeof";return Uy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uy(t)}function GCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function XCe(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,mQ(s.key),s)}}function QCe(t,e,r){return e&&XCe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function JCe(t,e,r){return e=y2(e),ZCe(t,hQ()?Reflect.construct(e,r||[],y2(t).constructor):e.apply(t,r))}function ZCe(t,e){if(e&&(Uy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eEe(t)}function eEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hQ=function(){return!!t})()}function y2(t){return y2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},y2(t)}function tEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$5(t,e)}function $5(t,e){return $5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},$5(t,e)}function fQ(t,e,r){return e=mQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mQ(t){var e=rEe(t,"string");return Uy(e)=="symbol"?e:e+""}function rEe(t,e){if(Uy(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Uy(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function L5(){return L5=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},L5.apply(this,arguments)}var nEe=function(e){var r=e.yAxisId,s=WX(),a=YX(),i=HX(r);return i==null?null:g.createElement(nk,L5({},i,{className:jn("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:s,height:a},ticksGenerator:function(l){return Gg(l,!0)}}))},ma=(function(t){function e(){return GCe(this,e),JCe(this,e,arguments)}return tEe(e,t),QCe(e,[{key:"render",value:function(){return g.createElement(nEe,this.props)}}])})(g.Component);fQ(ma,"displayName","YAxis");fQ(ma,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function LL(t){return oEe(t)||iEe(t)||aEe(t)||sEe()}function sEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aEe(t,e){if(t){if(typeof t=="string")return F5(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F5(t,e)}}function iEe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function oEe(t){if(Array.isArray(t))return F5(t)}function F5(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}var B5=function(e,r,s,a,i){var o=Bd(e,nf),l=Bd(e,ek),d=[].concat(LL(o),LL(l)),h=Bd(e,rk),f="".concat(a,"Id"),m=a[0],x=r;if(d.length&&(x=d.reduce(function(N,w){if(w.props[f]===s&&rf(w.props,"extendDomain")&&Rt(w.props[m])){var C=w.props[m];return[Math.min(N[0],C),Math.max(N[1],C)]}return N},x)),h.length){var b="".concat(m,"1"),j="".concat(m,"2");x=h.reduce(function(N,w){if(w.props[f]===s&&rf(w.props,"extendDomain")&&Rt(w.props[b])&&Rt(w.props[j])){var C=w.props[b],T=w.props[j];return[Math.min(N[0],C,T),Math.max(N[1],C,T)]}return N},x)}return i&&i.length&&(x=i.reduce(function(N,w){return Rt(w)?[Math.min(N[0],w),Math.max(N[1],w)]:N},x)),x},s3={exports:{}},FL;function lEe(){return FL||(FL=1,(function(t){var e=Object.prototype.hasOwnProperty,r="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(r=!1));function a(d,h,f){this.fn=d,this.context=h,this.once=f||!1}function i(d,h,f,m,x){if(typeof f!="function")throw new TypeError("The listener must be a function");var b=new a(f,m||d,x),j=r?r+h:h;return d._events[j]?d._events[j].fn?d._events[j]=[d._events[j],b]:d._events[j].push(b):(d._events[j]=b,d._eventsCount++),d}function o(d,h){--d._eventsCount===0?d._events=new s:delete d._events[h]}function l(){this._events=new s,this._eventsCount=0}l.prototype.eventNames=function(){var h=[],f,m;if(this._eventsCount===0)return h;for(m in f=this._events)e.call(f,m)&&h.push(r?m.slice(1):m);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(f)):h},l.prototype.listeners=function(h){var f=r?r+h:h,m=this._events[f];if(!m)return[];if(m.fn)return[m.fn];for(var x=0,b=m.length,j=new Array(b);x<b;x++)j[x]=m[x].fn;return j},l.prototype.listenerCount=function(h){var f=r?r+h:h,m=this._events[f];return m?m.fn?1:m.length:0},l.prototype.emit=function(h,f,m,x,b,j){var N=r?r+h:h;if(!this._events[N])return!1;var w=this._events[N],C=arguments.length,T,O;if(w.fn){switch(w.once&&this.removeListener(h,w.fn,void 0,!0),C){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,f),!0;case 3:return w.fn.call(w.context,f,m),!0;case 4:return w.fn.call(w.context,f,m,x),!0;case 5:return w.fn.call(w.context,f,m,x,b),!0;case 6:return w.fn.call(w.context,f,m,x,b,j),!0}for(O=1,T=new Array(C-1);O<C;O++)T[O-1]=arguments[O];w.fn.apply(w.context,T)}else{var I=w.length,P;for(O=0;O<I;O++)switch(w[O].once&&this.removeListener(h,w[O].fn,void 0,!0),C){case 1:w[O].fn.call(w[O].context);break;case 2:w[O].fn.call(w[O].context,f);break;case 3:w[O].fn.call(w[O].context,f,m);break;case 4:w[O].fn.call(w[O].context,f,m,x);break;default:if(!T)for(P=1,T=new Array(C-1);P<C;P++)T[P-1]=arguments[P];w[O].fn.apply(w[O].context,T)}}return!0},l.prototype.on=function(h,f,m){return i(this,h,f,m,!1)},l.prototype.once=function(h,f,m){return i(this,h,f,m,!0)},l.prototype.removeListener=function(h,f,m,x){var b=r?r+h:h;if(!this._events[b])return this;if(!f)return o(this,b),this;var j=this._events[b];if(j.fn)j.fn===f&&(!x||j.once)&&(!m||j.context===m)&&o(this,b);else{for(var N=0,w=[],C=j.length;N<C;N++)(j[N].fn!==f||x&&!j[N].once||m&&j[N].context!==m)&&w.push(j[N]);w.length?this._events[b]=w.length===1?w[0]:w:o(this,b)}return this},l.prototype.removeAllListeners=function(h){var f;return h?(f=r?r+h:h,this._events[f]&&o(this,f)):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l})(s3)),s3.exports}var cEe=lEe();const dEe=Hs(cEe);var a3=new dEe,i3="recharts.syncMouseEvents";function kw(t){"@babel/helpers - typeof";return kw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kw(t)}function uEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hEe(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,pQ(s.key),s)}}function fEe(t,e,r){return e&&hEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function o3(t,e,r){return e=pQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pQ(t){var e=mEe(t,"string");return kw(e)=="symbol"?e:e+""}function mEe(t,e){if(kw(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(kw(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var pEe=(function(){function t(){uEe(this,t),o3(this,"activeIndex",0),o3(this,"coordinateList",[]),o3(this,"layout","horizontal")}return fEe(t,[{key:"setDetails",value:function(r){var s,a=r.coordinateList,i=a===void 0?null:a,o=r.container,l=o===void 0?null:o,d=r.layout,h=d===void 0?null:d,f=r.offset,m=f===void 0?null:f,x=r.mouseHandlerCallback,b=x===void 0?null:x;this.coordinateList=(s=i??this.coordinateList)!==null&&s!==void 0?s:[],this.container=l??this.container,this.layout=h??this.layout,this.offset=m??this.offset,this.mouseHandlerCallback=b??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,s;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,l=a.height,d=this.coordinateList[this.activeIndex].coordinate,h=((r=window)===null||r===void 0?void 0:r.scrollX)||0,f=((s=window)===null||s===void 0?void 0:s.scrollY)||0,m=i+d+h,x=o+this.offset.top+l/2+f;this.mouseHandlerCallback({pageX:m,pageY:x})}}}])})();function gEe(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var s=t==null?void 0:t[0],a=t==null?void 0:t[1];if(s&&a&&Rt(s)&&Rt(a))return!0}return!1}function xEe(t,e,r,s){var a=s/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-a:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-a,width:t==="horizontal"?s:r.width-1,height:t==="horizontal"?r.height-1:s}}function gQ(t){var e=t.cx,r=t.cy,s=t.radius,a=t.startAngle,i=t.endAngle,o=bo(e,r,s,a),l=bo(e,r,s,i);return{points:[o,l],cx:e,cy:r,radius:s,startAngle:a,endAngle:i}}function yEe(t,e,r){var s,a,i,o;if(t==="horizontal")s=e.x,i=s,a=r.top,o=r.top+r.height;else if(t==="vertical")a=e.y,o=a,s=r.left,i=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var l=e.cx,d=e.cy,h=e.innerRadius,f=e.outerRadius,m=e.angle,x=bo(l,d,h,m),b=bo(l,d,f,m);s=x.x,a=x.y,i=b.x,o=b.y}else return gQ(e);return[{x:s,y:a},{x:i,y:o}]}function Cw(t){"@babel/helpers - typeof";return Cw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cw(t)}function BL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function PN(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?BL(Object(r),!0).forEach(function(s){vEe(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):BL(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function vEe(t,e,r){return e=bEe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bEe(t){var e=wEe(t,"string");return Cw(e)=="symbol"?e:e+""}function wEe(t,e){if(Cw(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(Cw(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function NEe(t){var e,r,s=t.element,a=t.tooltipEventType,i=t.isActive,o=t.activeCoordinate,l=t.activePayload,d=t.offset,h=t.activeTooltipIndex,f=t.tooltipAxisBandSize,m=t.layout,x=t.chartName,b=(e=s.props.cursor)!==null&&e!==void 0?e:(r=s.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!s||!b||!i||!o||x!=="ScatterChart"&&a!=="axis")return null;var j,N=Xx;if(x==="ScatterChart")j=o,N=k2e;else if(x==="BarChart")j=xEe(m,o,d,f),N=tI;else if(m==="radial"){var w=gQ(o),C=w.cx,T=w.cy,O=w.radius,I=w.startAngle,P=w.endAngle;j={cx:C,cy:T,startAngle:I,endAngle:P,innerRadius:O,outerRadius:O},N=vX}else j={points:yEe(m,o,d)},N=Xx;var A=PN(PN(PN(PN({stroke:"#ccc",pointerEvents:"none"},d),j),hn(b,!1)),{},{payload:l,payloadIndex:h,className:jn("recharts-tooltip-cursor",b.className)});return g.isValidElement(b)?g.cloneElement(b,A):g.createElement(N,A)}var jEe=["item"],SEe=["children","className","width","height","style","compact","title","desc"];function zy(t){"@babel/helpers - typeof";return zy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zy(t)}function Fx(){return Fx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Fx.apply(this,arguments)}function UL(t,e){return EEe(t)||CEe(t,e)||yQ(t,e)||kEe()}function kEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CEe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s,a,i,o,l=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(s=i.call(r)).done)&&(l.push(s.value),l.length!==e);d=!0);}catch(f){h=!0,a=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return l}}function EEe(t){if(Array.isArray(t))return t}function zL(t,e){if(t==null)return{};var r=TEe(t,e),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function TEe(t,e){if(t==null)return{};var r={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;r[s]=t[s]}return r}function PEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function AEe(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,vQ(s.key),s)}}function _Ee(t,e,r){return e&&AEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function IEe(t,e,r){return e=v2(e),MEe(t,xQ()?Reflect.construct(e,r||[],v2(t).constructor):e.apply(t,r))}function MEe(t,e){if(e&&(zy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return OEe(t)}function OEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xQ=function(){return!!t})()}function v2(t){return v2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},v2(t)}function REe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&U5(t,e)}function U5(t,e){return U5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},U5(t,e)}function Vy(t){return LEe(t)||$Ee(t)||yQ(t)||DEe()}function DEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yQ(t,e){if(t){if(typeof t=="string")return z5(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z5(t,e)}}function $Ee(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function LEe(t){if(Array.isArray(t))return z5(t)}function z5(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function VL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,s)}return r}function at(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?VL(Object(r),!0).forEach(function(s){Ar(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):VL(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Ar(t,e,r){return e=vQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vQ(t){var e=FEe(t,"string");return zy(e)=="symbol"?e:e+""}function FEe(t,e){if(zy(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(zy(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var BEe={xAxis:["bottom","top"],yAxis:["left","right"]},UEe={width:"100%",height:"100%"},bQ={x:0,y:0};function AN(t){return t}var zEe=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},VEe=function(e,r,s,a){var i=r.find(function(f){return f&&f.index===s});if(i){if(e==="horizontal")return{x:i.coordinate,y:a.y};if(e==="vertical")return{x:a.x,y:i.coordinate};if(e==="centric"){var o=i.coordinate,l=a.radius;return at(at(at({},a),bo(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var d=i.coordinate,h=a.angle;return at(at(at({},a),bo(a.cx,a.cy,d,h)),{},{angle:h,radius:d})}return bQ},sk=function(e,r){var s=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,o=(s??[]).reduce(function(l,d){var h=d.props.data;return h&&h.length?[].concat(Vy(l),Vy(h)):l},[]);return o.length>0?o:e&&e.length&&Rt(a)&&Rt(i)?e.slice(a,i+1):[]};function wQ(t){return t==="number"?[0,"auto"]:void 0}var V5=function(e,r,s,a){var i=e.graphicalItems,o=e.tooltipAxis,l=sk(r,e);return s<0||!i||!i.length||s>=l.length?null:i.reduce(function(d,h){var f,m=(f=h.props.data)!==null&&f!==void 0?f:r;m&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=s&&(m=m.slice(e.dataStartIndex,e.dataEndIndex+1));var x;if(o.dataKey&&!o.allowDuplicatedCategory){var b=m===void 0?l:m;x=Nj(b,o.dataKey,a)}else x=m&&m[s]||l[s];return x?[].concat(Vy(d),[gX(h,x)]):d},[])},qL=function(e,r,s,a){var i=a||{x:e.chartX,y:e.chartY},o=zEe(i,s),l=e.orderedTooltipTicks,d=e.tooltipAxis,h=e.tooltipTicks,f=o1e(o,l,h,d);if(f>=0&&h){var m=h[f]&&h[f].value,x=V5(e,r,f,m),b=VEe(s,l,f,i);return{activeTooltipIndex:f,activeLabel:m,activePayload:x,activeCoordinate:b}}return null},qEe=function(e,r){var s=r.axes,a=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,f=e.layout,m=e.children,x=e.stackOffset,b=mX(f,i);return s.reduce(function(j,N){var w,C=N.type.defaultProps!==void 0?at(at({},N.type.defaultProps),N.props):N.props,T=C.type,O=C.dataKey,I=C.allowDataOverflow,P=C.allowDuplicatedCategory,A=C.scale,R=C.ticks,B=C.includeHidden,V=C[o];if(j[V])return j;var X=sk(e.data,{graphicalItems:a.filter(function(W){var be,pe=o in W.props?W.props[o]:(be=W.type.defaultProps)===null||be===void 0?void 0:be[o];return pe===V}),dataStartIndex:d,dataEndIndex:h}),ee=X.length,Y,re,le;gEe(C.domain,I,T)&&(Y=i5(C.domain,null,I),b&&(T==="number"||A!=="auto")&&(le=Cb(X,O,"category")));var te=wQ(T);if(!Y||Y.length===0){var de,ie=(de=C.domain)!==null&&de!==void 0?de:te;if(O){if(Y=Cb(X,O,T),T==="category"&&b){var Z=Zme(Y);P&&Z?(re=Y,Y=a2(0,ee)):P||(Y=t$(ie,Y,N).reduce(function(W,be){return W.indexOf(be)>=0?W:[].concat(Vy(W),[be])},[]))}else if(T==="category")P?Y=Y.filter(function(W){return W!==""&&!yn(W)}):Y=t$(ie,Y,N).reduce(function(W,be){return W.indexOf(be)>=0||be===""||yn(be)?W:[].concat(Vy(W),[be])},[]);else if(T==="number"){var ne=h1e(X,a.filter(function(W){var be,pe,ge=o in W.props?W.props[o]:(be=W.type.defaultProps)===null||be===void 0?void 0:be[o],Ce="hide"in W.props?W.props.hide:(pe=W.type.defaultProps)===null||pe===void 0?void 0:pe.hide;return ge===V&&(B||!Ce)}),O,i,f);ne&&(Y=ne)}b&&(T==="number"||A!=="auto")&&(le=Cb(X,O,"category"))}else b?Y=a2(0,ee):l&&l[V]&&l[V].hasStack&&T==="number"?Y=x==="expand"?[0,1]:pX(l[V].stackGroups,d,h):Y=fX(X,a.filter(function(W){var be=o in W.props?W.props[o]:W.type.defaultProps[o],pe="hide"in W.props?W.props.hide:W.type.defaultProps.hide;return be===V&&(B||!pe)}),T,f,!0);if(T==="number")Y=B5(m,Y,V,i,R),ie&&(Y=i5(ie,Y,I));else if(T==="category"&&ie){var oe=ie,U=Y.every(function(W){return oe.indexOf(W)>=0});U&&(Y=oe)}}return at(at({},j),{},Ar({},V,at(at({},C),{},{axisType:i,domain:Y,categoricalDomain:le,duplicateDomain:re,originalDomain:(w=C.domain)!==null&&w!==void 0?w:te,isCategorical:b,layout:f})))},{})},HEe=function(e,r){var s=r.graphicalItems,a=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,f=e.layout,m=e.children,x=sk(e.data,{graphicalItems:s,dataStartIndex:d,dataEndIndex:h}),b=x.length,j=mX(f,i),N=-1;return s.reduce(function(w,C){var T=C.type.defaultProps!==void 0?at(at({},C.type.defaultProps),C.props):C.props,O=T[o],I=wQ("number");if(!w[O]){N++;var P;return j?P=a2(0,b):l&&l[O]&&l[O].hasStack?(P=pX(l[O].stackGroups,d,h),P=B5(m,P,O,i)):(P=i5(I,fX(x,s.filter(function(A){var R,B,V=o in A.props?A.props[o]:(R=A.type.defaultProps)===null||R===void 0?void 0:R[o],X="hide"in A.props?A.props.hide:(B=A.type.defaultProps)===null||B===void 0?void 0:B.hide;return V===O&&!X}),"number",f),a.defaultProps.allowDataOverflow),P=B5(m,P,O,i)),at(at({},w),{},Ar({},O,at(at({axisType:i},a.defaultProps),{},{hide:!0,orientation:Fd(BEe,"".concat(i,".").concat(N%2),null),domain:P,originalDomain:I,isCategorical:j,layout:f})))}return w},{})},WEe=function(e,r){var s=r.axisType,a=s===void 0?"xAxis":s,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,f=e.children,m="".concat(a,"Id"),x=Bd(f,i),b={};return x&&x.length?b=qEe(e,{axes:x,graphicalItems:o,axisType:a,axisIdKey:m,stackGroups:l,dataStartIndex:d,dataEndIndex:h}):o&&o.length&&(b=HEe(e,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:m,stackGroups:l,dataStartIndex:d,dataEndIndex:h})),b},YEe=function(e){var r=_x(e),s=Gg(r,!1,!0);return{tooltipTicks:s,orderedTooltipTicks:T_(s,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Xj(r,s)}},HL=function(e){var r=e.children,s=e.defaultShowTooltip,a=Rc(r,Iy),i=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!s}},KEe=function(e){return!e||!e.length?!1:e.some(function(r){var s=mm(r&&r.type);return s&&s.indexOf("Bar")>=0})},WL=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},GEe=function(e,r){var s=e.props,a=e.graphicalItems,i=e.xAxisMap,o=i===void 0?{}:i,l=e.yAxisMap,d=l===void 0?{}:l,h=s.width,f=s.height,m=s.children,x=s.margin||{},b=Rc(m,Iy),j=Rc(m,Yx),N=Object.keys(d).reduce(function(P,A){var R=d[A],B=R.orientation;return!R.mirror&&!R.hide?at(at({},P),{},Ar({},B,P[B]+R.width)):P},{left:x.left||0,right:x.right||0}),w=Object.keys(o).reduce(function(P,A){var R=o[A],B=R.orientation;return!R.mirror&&!R.hide?at(at({},P),{},Ar({},B,Fd(P,"".concat(B))+R.height)):P},{top:x.top||0,bottom:x.bottom||0}),C=at(at({},w),N),T=C.bottom;b&&(C.bottom+=b.props.height||Iy.defaultProps.height),j&&r&&(C=d1e(C,a,s,r));var O=h-C.left-C.right,I=f-C.top-C.bottom;return at(at({brushBottom:T},C),{},{width:Math.max(O,0),height:Math.max(I,0)})},XEe=function(e,r){if(r==="xAxis")return e[r].width;if(r==="yAxis")return e[r].height},NQ=function(e){var r=e.chartName,s=e.GraphicalChild,a=e.defaultTooltipEventType,i=a===void 0?"axis":a,o=e.validateTooltipEventTypes,l=o===void 0?["axis"]:o,d=e.axisComponents,h=e.legendContent,f=e.formatAxisMap,m=e.defaultProps,x=function(C,T){var O=T.graphicalItems,I=T.stackGroups,P=T.offset,A=T.updateId,R=T.dataStartIndex,B=T.dataEndIndex,V=C.barSize,X=C.layout,ee=C.barGap,Y=C.barCategoryGap,re=C.maxBarSize,le=WL(X),te=le.numericAxisName,de=le.cateAxisName,ie=KEe(O),Z=[];return O.forEach(function(ne,oe){var U=sk(C.data,{graphicalItems:[ne],dataStartIndex:R,dataEndIndex:B}),W=ne.type.defaultProps!==void 0?at(at({},ne.type.defaultProps),ne.props):ne.props,be=W.dataKey,pe=W.maxBarSize,ge=W["".concat(te,"Id")],Ce=W["".concat(de,"Id")],he={},ue=d.reduce(function(Fe,Ye){var lt=T["".concat(Ye.axisType,"Map")],pt=W["".concat(Ye.axisType,"Id")];lt&&lt[pt]||Ye.axisType==="zAxis"||C0();var nt=lt[pt];return at(at({},Fe),{},Ar(Ar({},Ye.axisType,nt),"".concat(Ye.axisType,"Ticks"),Gg(nt)))},he),ce=ue[de],Ee=ue["".concat(de,"Ticks")],Le=I&&I[ge]&&I[ge].hasStack&&S1e(ne,I[ge].stackGroups),Ie=mm(ne.type).indexOf("Bar")>=0,Ue=Xj(ce,Ee),Ae=[],We=ie&&l1e({barSize:V,stackGroups:I,totalSize:XEe(ue,de)});if(Ie){var ot,It,tr=yn(pe)?re:pe,Ct=(ot=(It=Xj(ce,Ee,!0))!==null&&It!==void 0?It:tr)!==null&&ot!==void 0?ot:0;Ae=c1e({barGap:ee,barCategoryGap:Y,bandSize:Ct!==Ue?Ct:Ue,sizeList:We[Ce],maxBarSize:tr}),Ct!==Ue&&(Ae=Ae.map(function(Fe){return at(at({},Fe),{},{position:at(at({},Fe.position),{},{offset:Fe.position.offset-Ct/2})})}))}var we=ne&&ne.type&&ne.type.getComposedData;we&&Z.push({props:at(at({},we(at(at({},ue),{},{displayedData:U,props:C,dataKey:be,item:ne,bandSize:Ue,barPosition:Ae,offset:P,stackedData:Le,layout:X,dataStartIndex:R,dataEndIndex:B}))),{},Ar(Ar(Ar({key:ne.key||"item-".concat(oe)},te,ue[te]),de,ue[de]),"animationId",A)),childIndex:upe(ne,C.children),item:ne})}),Z},b=function(C,T){var O=C.props,I=C.dataStartIndex,P=C.dataEndIndex,A=C.updateId;if(!gR({props:O}))return null;var R=O.children,B=O.layout,V=O.stackOffset,X=O.data,ee=O.reverseStackOrder,Y=WL(B),re=Y.numericAxisName,le=Y.cateAxisName,te=Bd(R,s),de=w1e(X,te,"".concat(re,"Id"),"".concat(le,"Id"),V,ee),ie=d.reduce(function(W,be){var pe="".concat(be.axisType,"Map");return at(at({},W),{},Ar({},pe,WEe(O,at(at({},be),{},{graphicalItems:te,stackGroups:be.axisType===re&&de,dataStartIndex:I,dataEndIndex:P}))))},{}),Z=GEe(at(at({},ie),{},{props:O,graphicalItems:te}),T==null?void 0:T.legendBBox);Object.keys(ie).forEach(function(W){ie[W]=f(O,ie[W],Z,W.replace("Map",""),r)});var ne=ie["".concat(le,"Map")],oe=YEe(ne),U=x(O,at(at({},ie),{},{dataStartIndex:I,dataEndIndex:P,updateId:A,graphicalItems:te,stackGroups:de,offset:Z}));return at(at({formattedGraphicalItems:U,graphicalItems:te,offset:Z,stackGroups:de},oe),ie)},j=(function(w){function C(T){var O,I,P;return PEe(this,C),P=IEe(this,C,[T]),Ar(P,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Ar(P,"accessibilityManager",new pEe),Ar(P,"handleLegendBBoxUpdate",function(A){if(A){var R=P.state,B=R.dataStartIndex,V=R.dataEndIndex,X=R.updateId;P.setState(at({legendBBox:A},b({props:P.props,dataStartIndex:B,dataEndIndex:V,updateId:X},at(at({},P.state),{},{legendBBox:A}))))}}),Ar(P,"handleReceiveSyncEvent",function(A,R,B){if(P.props.syncId===A){if(B===P.eventEmitterSymbol&&typeof P.props.syncMethod!="function")return;P.applySyncEvent(R)}}),Ar(P,"handleBrushChange",function(A){var R=A.startIndex,B=A.endIndex;if(R!==P.state.dataStartIndex||B!==P.state.dataEndIndex){var V=P.state.updateId;P.setState(function(){return at({dataStartIndex:R,dataEndIndex:B},b({props:P.props,dataStartIndex:R,dataEndIndex:B,updateId:V},P.state))}),P.triggerSyncEvent({dataStartIndex:R,dataEndIndex:B})}}),Ar(P,"handleMouseEnter",function(A){var R=P.getMouseInfo(A);if(R){var B=at(at({},R),{},{isTooltipActive:!0});P.setState(B),P.triggerSyncEvent(B);var V=P.props.onMouseEnter;gn(V)&&V(B,A)}}),Ar(P,"triggeredAfterMouseMove",function(A){var R=P.getMouseInfo(A),B=R?at(at({},R),{},{isTooltipActive:!0}):{isTooltipActive:!1};P.setState(B),P.triggerSyncEvent(B);var V=P.props.onMouseMove;gn(V)&&V(B,A)}),Ar(P,"handleItemMouseEnter",function(A){P.setState(function(){return{isTooltipActive:!0,activeItem:A,activePayload:A.tooltipPayload,activeCoordinate:A.tooltipPosition||{x:A.cx,y:A.cy}}})}),Ar(P,"handleItemMouseLeave",function(){P.setState(function(){return{isTooltipActive:!1}})}),Ar(P,"handleMouseMove",function(A){A.persist(),P.throttleTriggeredAfterMouseMove(A)}),Ar(P,"handleMouseLeave",function(A){P.throttleTriggeredAfterMouseMove.cancel();var R={isTooltipActive:!1};P.setState(R),P.triggerSyncEvent(R);var B=P.props.onMouseLeave;gn(B)&&B(R,A)}),Ar(P,"handleOuterEvent",function(A){var R=dpe(A),B=Fd(P.props,"".concat(R));if(R&&gn(B)){var V,X;/.*touch.*/i.test(R)?X=P.getMouseInfo(A.changedTouches[0]):X=P.getMouseInfo(A),B((V=X)!==null&&V!==void 0?V:{},A)}}),Ar(P,"handleClick",function(A){var R=P.getMouseInfo(A);if(R){var B=at(at({},R),{},{isTooltipActive:!0});P.setState(B),P.triggerSyncEvent(B);var V=P.props.onClick;gn(V)&&V(B,A)}}),Ar(P,"handleMouseDown",function(A){var R=P.props.onMouseDown;if(gn(R)){var B=P.getMouseInfo(A);R(B,A)}}),Ar(P,"handleMouseUp",function(A){var R=P.props.onMouseUp;if(gn(R)){var B=P.getMouseInfo(A);R(B,A)}}),Ar(P,"handleTouchMove",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&P.throttleTriggeredAfterMouseMove(A.changedTouches[0])}),Ar(P,"handleTouchStart",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&P.handleMouseDown(A.changedTouches[0])}),Ar(P,"handleTouchEnd",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&P.handleMouseUp(A.changedTouches[0])}),Ar(P,"handleDoubleClick",function(A){var R=P.props.onDoubleClick;if(gn(R)){var B=P.getMouseInfo(A);R(B,A)}}),Ar(P,"handleContextMenu",function(A){var R=P.props.onContextMenu;if(gn(R)){var B=P.getMouseInfo(A);R(B,A)}}),Ar(P,"triggerSyncEvent",function(A){P.props.syncId!==void 0&&a3.emit(i3,P.props.syncId,A,P.eventEmitterSymbol)}),Ar(P,"applySyncEvent",function(A){var R=P.props,B=R.layout,V=R.syncMethod,X=P.state.updateId,ee=A.dataStartIndex,Y=A.dataEndIndex;if(A.dataStartIndex!==void 0||A.dataEndIndex!==void 0)P.setState(at({dataStartIndex:ee,dataEndIndex:Y},b({props:P.props,dataStartIndex:ee,dataEndIndex:Y,updateId:X},P.state)));else if(A.activeTooltipIndex!==void 0){var re=A.chartX,le=A.chartY,te=A.activeTooltipIndex,de=P.state,ie=de.offset,Z=de.tooltipTicks;if(!ie)return;if(typeof V=="function")te=V(Z,A);else if(V==="value"){te=-1;for(var ne=0;ne<Z.length;ne++)if(Z[ne].value===A.activeLabel){te=ne;break}}var oe=at(at({},ie),{},{x:ie.left,y:ie.top}),U=Math.min(re,oe.x+oe.width),W=Math.min(le,oe.y+oe.height),be=Z[te]&&Z[te].value,pe=V5(P.state,P.props.data,te),ge=Z[te]?{x:B==="horizontal"?Z[te].coordinate:U,y:B==="horizontal"?W:Z[te].coordinate}:bQ;P.setState(at(at({},A),{},{activeLabel:be,activeCoordinate:ge,activePayload:pe,activeTooltipIndex:te}))}else P.setState(A)}),Ar(P,"renderCursor",function(A){var R,B=P.state,V=B.isTooltipActive,X=B.activeCoordinate,ee=B.activePayload,Y=B.offset,re=B.activeTooltipIndex,le=B.tooltipAxisBandSize,te=P.getTooltipEventType(),de=(R=A.props.active)!==null&&R!==void 0?R:V,ie=P.props.layout,Z=A.key||"_recharts-cursor";return $e.createElement(NEe,{key:Z,activeCoordinate:X,activePayload:ee,activeTooltipIndex:re,chartName:r,element:A,isActive:de,layout:ie,offset:Y,tooltipAxisBandSize:le,tooltipEventType:te})}),Ar(P,"renderPolarAxis",function(A,R,B){var V=Fd(A,"type.axisType"),X=Fd(P.state,"".concat(V,"Map")),ee=A.type.defaultProps,Y=ee!==void 0?at(at({},ee),A.props):A.props,re=X&&X[Y["".concat(V,"Id")]];return g.cloneElement(A,at(at({},re),{},{className:jn(V,re.className),key:A.key||"".concat(R,"-").concat(B),ticks:Gg(re,!0)}))}),Ar(P,"renderPolarGrid",function(A){var R=A.props,B=R.radialLines,V=R.polarAngles,X=R.polarRadius,ee=P.state,Y=ee.radiusAxisMap,re=ee.angleAxisMap,le=_x(Y),te=_x(re),de=te.cx,ie=te.cy,Z=te.innerRadius,ne=te.outerRadius;return g.cloneElement(A,{polarAngles:Array.isArray(V)?V:Gg(te,!0).map(function(oe){return oe.coordinate}),polarRadius:Array.isArray(X)?X:Gg(le,!0).map(function(oe){return oe.coordinate}),cx:de,cy:ie,innerRadius:Z,outerRadius:ne,key:A.key||"polar-grid",radialLines:B})}),Ar(P,"renderLegend",function(){var A=P.state.formattedGraphicalItems,R=P.props,B=R.children,V=R.width,X=R.height,ee=P.props.margin||{},Y=V-(ee.left||0)-(ee.right||0),re=uX({children:B,formattedGraphicalItems:A,legendWidth:Y,legendContent:h});if(!re)return null;var le=re.item,te=zL(re,jEe);return g.cloneElement(le,at(at({},te),{},{chartWidth:V,chartHeight:X,margin:ee,onBBoxUpdate:P.handleLegendBBoxUpdate}))}),Ar(P,"renderTooltip",function(){var A,R=P.props,B=R.children,V=R.accessibilityLayer,X=Rc(B,zs);if(!X)return null;var ee=P.state,Y=ee.isTooltipActive,re=ee.activeCoordinate,le=ee.activePayload,te=ee.activeLabel,de=ee.offset,ie=(A=X.props.active)!==null&&A!==void 0?A:Y;return g.cloneElement(X,{viewBox:at(at({},de),{},{x:de.left,y:de.top}),active:ie,label:te,payload:ie?le:[],coordinate:re,accessibilityLayer:V})}),Ar(P,"renderBrush",function(A){var R=P.props,B=R.margin,V=R.data,X=P.state,ee=X.offset,Y=X.dataStartIndex,re=X.dataEndIndex,le=X.updateId;return g.cloneElement(A,{key:A.key||"_recharts-brush",onChange:kN(P.handleBrushChange,A.props.onChange),data:V,x:Rt(A.props.x)?A.props.x:ee.left,y:Rt(A.props.y)?A.props.y:ee.top+ee.height+ee.brushBottom-(B.bottom||0),width:Rt(A.props.width)?A.props.width:ee.width,startIndex:Y,endIndex:re,updateId:"brush-".concat(le)})}),Ar(P,"renderReferenceElement",function(A,R,B){if(!A)return null;var V=P,X=V.clipPathId,ee=P.state,Y=ee.xAxisMap,re=ee.yAxisMap,le=ee.offset,te=A.type.defaultProps||{},de=A.props,ie=de.xAxisId,Z=ie===void 0?te.xAxisId:ie,ne=de.yAxisId,oe=ne===void 0?te.yAxisId:ne;return g.cloneElement(A,{key:A.key||"".concat(R,"-").concat(B),xAxis:Y[Z],yAxis:re[oe],viewBox:{x:le.left,y:le.top,width:le.width,height:le.height},clipPathId:X})}),Ar(P,"renderActivePoints",function(A){var R=A.item,B=A.activePoint,V=A.basePoint,X=A.childIndex,ee=A.isRange,Y=[],re=R.props.key,le=R.item.type.defaultProps!==void 0?at(at({},R.item.type.defaultProps),R.item.props):R.item.props,te=le.activeDot,de=le.dataKey,ie=at(at({index:X,dataKey:de,cx:B.x,cy:B.y,r:4,fill:eI(R.item),strokeWidth:2,stroke:"#fff",payload:B.payload,value:B.value},hn(te,!1)),jj(te));return Y.push(C.renderActiveDot(te,ie,"".concat(re,"-activePoint-").concat(X))),V?Y.push(C.renderActiveDot(te,at(at({},ie),{},{cx:V.x,cy:V.y}),"".concat(re,"-basePoint-").concat(X))):ee&&Y.push(null),Y}),Ar(P,"renderGraphicChild",function(A,R,B){var V=P.filterFormatItem(A,R,B);if(!V)return null;var X=P.getTooltipEventType(),ee=P.state,Y=ee.isTooltipActive,re=ee.tooltipAxis,le=ee.activeTooltipIndex,te=ee.activeLabel,de=P.props.children,ie=Rc(de,zs),Z=V.props,ne=Z.points,oe=Z.isRange,U=Z.baseLine,W=V.item.type.defaultProps!==void 0?at(at({},V.item.type.defaultProps),V.item.props):V.item.props,be=W.activeDot,pe=W.hide,ge=W.activeBar,Ce=W.activeShape,he=!!(!pe&&Y&&ie&&(be||ge||Ce)),ue={};X!=="axis"&&ie&&ie.props.trigger==="click"?ue={onClick:kN(P.handleItemMouseEnter,A.props.onClick)}:X!=="axis"&&(ue={onMouseLeave:kN(P.handleItemMouseLeave,A.props.onMouseLeave),onMouseEnter:kN(P.handleItemMouseEnter,A.props.onMouseEnter)});var ce=g.cloneElement(A,at(at({},V.props),ue));function Ee(Ye){return typeof re.dataKey=="function"?re.dataKey(Ye.payload):null}if(he)if(le>=0){var Le,Ie;if(re.dataKey&&!re.allowDuplicatedCategory){var Ue=typeof re.dataKey=="function"?Ee:"payload.".concat(re.dataKey.toString());Le=Nj(ne,Ue,te),Ie=oe&&U&&Nj(U,Ue,te)}else Le=ne==null?void 0:ne[le],Ie=oe&&U&&U[le];if(Ce||ge){var Ae=A.props.activeIndex!==void 0?A.props.activeIndex:le;return[g.cloneElement(A,at(at(at({},V.props),ue),{},{activeIndex:Ae})),null,null]}if(!yn(Le))return[ce].concat(Vy(P.renderActivePoints({item:V,activePoint:Le,basePoint:Ie,childIndex:le,isRange:oe})))}else{var We,ot=(We=P.getItemByXY(P.state.activeCoordinate))!==null&&We!==void 0?We:{graphicalItem:ce},It=ot.graphicalItem,tr=It.item,Ct=tr===void 0?A:tr,we=It.childIndex,Fe=at(at(at({},V.props),ue),{},{activeIndex:we});return[g.cloneElement(Ct,Fe),null,null]}return oe?[ce,null,null]:[ce,null]}),Ar(P,"renderCustomized",function(A,R,B){return g.cloneElement(A,at(at({key:"recharts-customized-".concat(B)},P.props),P.state))}),Ar(P,"renderMap",{CartesianGrid:{handler:AN,once:!0},ReferenceArea:{handler:P.renderReferenceElement},ReferenceLine:{handler:AN},ReferenceDot:{handler:P.renderReferenceElement},XAxis:{handler:AN},YAxis:{handler:AN},Brush:{handler:P.renderBrush,once:!0},Bar:{handler:P.renderGraphicChild},Line:{handler:P.renderGraphicChild},Area:{handler:P.renderGraphicChild},Radar:{handler:P.renderGraphicChild},RadialBar:{handler:P.renderGraphicChild},Scatter:{handler:P.renderGraphicChild},Pie:{handler:P.renderGraphicChild},Funnel:{handler:P.renderGraphicChild},Tooltip:{handler:P.renderCursor,once:!0},PolarGrid:{handler:P.renderPolarGrid,once:!0},PolarAngleAxis:{handler:P.renderPolarAxis},PolarRadiusAxis:{handler:P.renderPolarAxis},Customized:{handler:P.renderCustomized}}),P.clipPathId="".concat((O=T.id)!==null&&O!==void 0?O:vv("recharts"),"-clip"),P.throttleTriggeredAfterMouseMove=dG(P.triggeredAfterMouseMove,(I=T.throttleDelay)!==null&&I!==void 0?I:1e3/60),P.state={},P}return REe(C,w),_Ee(C,[{key:"componentDidMount",value:function(){var O,I;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(O=this.props.margin.left)!==null&&O!==void 0?O:0,top:(I=this.props.margin.top)!==null&&I!==void 0?I:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var O=this.props,I=O.children,P=O.data,A=O.height,R=O.layout,B=Rc(I,zs);if(B){var V=B.props.defaultIndex;if(!(typeof V!="number"||V<0||V>this.state.tooltipTicks.length-1)){var X=this.state.tooltipTicks[V]&&this.state.tooltipTicks[V].value,ee=V5(this.state,P,V,X),Y=this.state.tooltipTicks[V].coordinate,re=(this.state.offset.top+A)/2,le=R==="horizontal",te=le?{x:Y,y:re}:{y:Y,x:re},de=this.state.formattedGraphicalItems.find(function(Z){var ne=Z.item;return ne.type.name==="Scatter"});de&&(te=at(at({},te),de.props.points[V].tooltipPosition),ee=de.props.points[V].tooltipPayload);var ie={activeTooltipIndex:V,isTooltipActive:!0,activeLabel:X,activePayload:ee,activeCoordinate:te};this.setState(ie),this.renderCursor(B),this.accessibilityManager.setIndex(V)}}}},{key:"getSnapshotBeforeUpdate",value:function(O,I){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==I.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==O.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==O.margin){var P,A;this.accessibilityManager.setDetails({offset:{left:(P=this.props.margin.left)!==null&&P!==void 0?P:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0}})}return null}},{key:"componentDidUpdate",value:function(O){TP([Rc(O.children,zs)],[Rc(this.props.children,zs)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var O=Rc(this.props.children,zs);if(O&&typeof O.props.shared=="boolean"){var I=O.props.shared?"axis":"item";return l.indexOf(I)>=0?I:i}return i}},{key:"getMouseInfo",value:function(O){if(!this.container)return null;var I=this.container,P=I.getBoundingClientRect(),A=Qxe(P),R={chartX:Math.round(O.pageX-A.left),chartY:Math.round(O.pageY-A.top)},B=P.width/I.offsetWidth||1,V=this.inRange(R.chartX,R.chartY,B);if(!V)return null;var X=this.state,ee=X.xAxisMap,Y=X.yAxisMap,re=this.getTooltipEventType(),le=qL(this.state,this.props.data,this.props.layout,V);if(re!=="axis"&&ee&&Y){var te=_x(ee).scale,de=_x(Y).scale,ie=te&&te.invert?te.invert(R.chartX):null,Z=de&&de.invert?de.invert(R.chartY):null;return at(at({},R),{},{xValue:ie,yValue:Z},le)}return le?at(at({},R),le):null}},{key:"inRange",value:function(O,I){var P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,A=this.props.layout,R=O/P,B=I/P;if(A==="horizontal"||A==="vertical"){var V=this.state.offset,X=R>=V.left&&R<=V.left+V.width&&B>=V.top&&B<=V.top+V.height;return X?{x:R,y:B}:null}var ee=this.state,Y=ee.angleAxisMap,re=ee.radiusAxisMap;if(Y&&re){var le=_x(Y);return s$({x:R,y:B},le)}return null}},{key:"parseEventsOfWrapper",value:function(){var O=this.props.children,I=this.getTooltipEventType(),P=Rc(O,zs),A={};P&&I==="axis"&&(P.props.trigger==="click"?A={onClick:this.handleClick}:A={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var R=jj(this.props,this.handleOuterEvent);return at(at({},R),A)}},{key:"addListener",value:function(){a3.on(i3,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){a3.removeListener(i3,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(O,I,P){for(var A=this.state.formattedGraphicalItems,R=0,B=A.length;R<B;R++){var V=A[R];if(V.item===O||V.props.key===O.key||I===mm(V.item.type)&&P===V.childIndex)return V}return null}},{key:"renderClipPath",value:function(){var O=this.clipPathId,I=this.state.offset,P=I.left,A=I.top,R=I.height,B=I.width;return $e.createElement("defs",null,$e.createElement("clipPath",{id:O},$e.createElement("rect",{x:P,y:A,height:R,width:B})))}},{key:"getXScales",value:function(){var O=this.state.xAxisMap;return O?Object.entries(O).reduce(function(I,P){var A=UL(P,2),R=A[0],B=A[1];return at(at({},I),{},Ar({},R,B.scale))},{}):null}},{key:"getYScales",value:function(){var O=this.state.yAxisMap;return O?Object.entries(O).reduce(function(I,P){var A=UL(P,2),R=A[0],B=A[1];return at(at({},I),{},Ar({},R,B.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(O){var I;return(I=this.state.xAxisMap)===null||I===void 0||(I=I[O])===null||I===void 0?void 0:I.scale}},{key:"getYScaleByAxisId",value:function(O){var I;return(I=this.state.yAxisMap)===null||I===void 0||(I=I[O])===null||I===void 0?void 0:I.scale}},{key:"getItemByXY",value:function(O){var I=this.state,P=I.formattedGraphicalItems,A=I.activeItem;if(P&&P.length)for(var R=0,B=P.length;R<B;R++){var V=P[R],X=V.props,ee=V.item,Y=ee.type.defaultProps!==void 0?at(at({},ee.type.defaultProps),ee.props):ee.props,re=mm(ee.type);if(re==="Bar"){var le=(X.data||[]).find(function(Z){return p2e(O,Z)});if(le)return{graphicalItem:V,payload:le}}else if(re==="RadialBar"){var te=(X.data||[]).find(function(Z){return s$(O,Z)});if(te)return{graphicalItem:V,payload:te}}else if(XS(V,A)||QS(V,A)||bw(V,A)){var de=aSe({graphicalItem:V,activeTooltipItem:A,itemData:Y.data}),ie=Y.activeIndex===void 0?de:Y.activeIndex;return{graphicalItem:at(at({},V),{},{childIndex:ie}),payload:bw(V,A)?Y.data[de]:V.props.data[de]}}}return null}},{key:"render",value:function(){var O=this;if(!gR(this))return null;var I=this.props,P=I.children,A=I.className,R=I.width,B=I.height,V=I.style,X=I.compact,ee=I.title,Y=I.desc,re=zL(I,SEe),le=hn(re,!1);if(X)return $e.createElement(NL,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},$e.createElement(AP,Fx({},le,{width:R,height:B,title:ee,desc:Y}),this.renderClipPath(),yR(P,this.renderMap)));if(this.props.accessibilityLayer){var te,de;le.tabIndex=(te=this.props.tabIndex)!==null&&te!==void 0?te:0,le.role=(de=this.props.role)!==null&&de!==void 0?de:"application",le.onKeyDown=function(Z){O.accessibilityManager.keyboardEvent(Z)},le.onFocus=function(){O.accessibilityManager.focus()}}var ie=this.parseEventsOfWrapper();return $e.createElement(NL,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},$e.createElement("div",Fx({className:jn("recharts-wrapper",A),style:at({position:"relative",cursor:"default",width:R,height:B},V)},ie,{ref:function(ne){O.container=ne}}),$e.createElement(AP,Fx({},le,{width:R,height:B,title:ee,desc:Y,style:UEe}),this.renderClipPath(),yR(P,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(g.Component);Ar(j,"displayName",r),Ar(j,"defaultProps",at({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},m)),Ar(j,"getDerivedStateFromProps",function(w,C){var T=w.dataKey,O=w.data,I=w.children,P=w.width,A=w.height,R=w.layout,B=w.stackOffset,V=w.margin,X=C.dataStartIndex,ee=C.dataEndIndex;if(C.updateId===void 0){var Y=HL(w);return at(at(at({},Y),{},{updateId:0},b(at(at({props:w},Y),{},{updateId:0}),C)),{},{prevDataKey:T,prevData:O,prevWidth:P,prevHeight:A,prevLayout:R,prevStackOffset:B,prevMargin:V,prevChildren:I})}if(T!==C.prevDataKey||O!==C.prevData||P!==C.prevWidth||A!==C.prevHeight||R!==C.prevLayout||B!==C.prevStackOffset||!Wx(V,C.prevMargin)){var re=HL(w),le={chartX:C.chartX,chartY:C.chartY,isTooltipActive:C.isTooltipActive},te=at(at({},qL(C,O,R)),{},{updateId:C.updateId+1}),de=at(at(at({},re),le),te);return at(at(at({},de),b(at({props:w},de),C)),{},{prevDataKey:T,prevData:O,prevWidth:P,prevHeight:A,prevLayout:R,prevStackOffset:B,prevMargin:V,prevChildren:I})}if(!TP(I,C.prevChildren)){var ie,Z,ne,oe,U=Rc(I,Iy),W=U&&(ie=(Z=U.props)===null||Z===void 0?void 0:Z.startIndex)!==null&&ie!==void 0?ie:X,be=U&&(ne=(oe=U.props)===null||oe===void 0?void 0:oe.endIndex)!==null&&ne!==void 0?ne:ee,pe=W!==X||be!==ee,ge=!yn(O),Ce=ge&&!pe?C.updateId:C.updateId+1;return at(at({updateId:Ce},b(at(at({props:w},C),{},{updateId:Ce,dataStartIndex:W,dataEndIndex:be}),C)),{},{prevChildren:I,dataStartIndex:W,dataEndIndex:be})}return null}),Ar(j,"renderActiveDot",function(w,C,T){var O;return g.isValidElement(w)?O=g.cloneElement(w,C):gn(w)?O=w(C):O=$e.createElement(GS,C),$e.createElement(Zs,{className:"recharts-active-dot",key:T},O)});var N=g.forwardRef(function(C,T){return $e.createElement(j,Fx({},C,{ref:T}))});return N.displayName=j.displayName,N},Dd=NQ({chartName:"LineChart",GraphicalChild:Is,axisComponents:[{axisType:"xAxis",AxisComp:Sa},{axisType:"yAxis",AxisComp:ma}],formatAxisMap:RX}),Bg=NQ({chartName:"AreaChart",GraphicalChild:ec,axisComponents:[{axisType:"xAxis",AxisComp:Sa},{axisType:"yAxis",AxisComp:ma}],formatAxisMap:RX});function QEe(){return MV.useSyncExternalStore(JEe,()=>!0,()=>!1)}function JEe(){return()=>{}}var aI="Avatar",[ZEe]=Hc(aI),[e4e,jQ]=ZEe(aI),SQ=g.forwardRef((t,e)=>{const{__scopeAvatar:r,...s}=t,[a,i]=g.useState("idle");return n.jsx(e4e,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:n.jsx(lr.span,{...s,ref:e})})});SQ.displayName=aI;var kQ="AvatarImage",CQ=g.forwardRef((t,e)=>{const{__scopeAvatar:r,src:s,onLoadingStatusChange:a=()=>{},...i}=t,o=jQ(kQ,r),l=t4e(s,i),d=yl(h=>{a(h),o.onImageLoadingStatusChange(h)});return ii(()=>{l!=="idle"&&d(l)},[l,d]),l==="loaded"?n.jsx(lr.img,{...i,ref:e,src:s}):null});CQ.displayName=kQ;var EQ="AvatarFallback",TQ=g.forwardRef((t,e)=>{const{__scopeAvatar:r,delayMs:s,...a}=t,i=jQ(EQ,r),[o,l]=g.useState(s===void 0);return g.useEffect(()=>{if(s!==void 0){const d=window.setTimeout(()=>l(!0),s);return()=>window.clearTimeout(d)}},[s]),o&&i.imageLoadingStatus!=="loaded"?n.jsx(lr.span,{...a,ref:e}):null});TQ.displayName=EQ;function YL(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function t4e(t,{referrerPolicy:e,crossOrigin:r}){const s=QEe(),a=g.useRef(null),i=s?(a.current||(a.current=new window.Image),a.current):null,[o,l]=g.useState(()=>YL(i,t));return ii(()=>{l(YL(i,t))},[i,t]),ii(()=>{const d=m=>()=>{l(m)};if(!i)return;const h=d("loaded"),f=d("error");return i.addEventListener("load",h),i.addEventListener("error",f),e&&(i.referrerPolicy=e),typeof r=="string"&&(i.crossOrigin=r),()=>{i.removeEventListener("load",h),i.removeEventListener("error",f)}},[i,r,e]),o}var PQ=SQ,AQ=CQ,_Q=TQ;const rc=g.forwardRef(({className:t,...e},r)=>n.jsx(PQ,{ref:r,className:Ht("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));rc.displayName=PQ.displayName;const sf=g.forwardRef(({className:t,...e},r)=>n.jsx(AQ,{ref:r,className:Ht("aspect-square h-full w-full",t),...e}));sf.displayName=AQ.displayName;const nc=g.forwardRef(({className:t,...e},r)=>n.jsx(_Q,{ref:r,className:Ht("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));nc.displayName=_Q.displayName;function r4e({images:t}){const[e,r]=g.useState(0),[s,a]=g.useState(!1),i=g.useRef(null),o=g.useRef(0),l=g.useRef(0),d=g.useRef(!1),h=()=>{s||(a(!0),r(C=>(C+1)%t.length),setTimeout(()=>a(!1),300))},f=()=>{s||(a(!0),r(C=>(C-1+t.length)%t.length),setTimeout(()=>a(!1),300))},m=C=>{o.current=C.touches[0].clientX,d.current=!0},x=C=>{if(!d.current)return;l.current=C.touches[0].clientX;const T=o.current-l.current;i.current&&(i.current.style.transform=`translateX(${-e*100-T/i.current.offsetWidth*100}%)`)},b=()=>{if(!d.current)return;d.current=!1;const C=o.current-l.current,T=50;i.current&&(i.current.style.transform=`translateX(-${e*100}%)`),Math.abs(C)>T&&(C>0?h():f())},j=C=>{C.preventDefault(),o.current=C.clientX,d.current=!0},N=C=>{if(!d.current)return;l.current=C.clientX;const T=o.current-l.current;i.current&&(i.current.style.transform=`translateX(${-e*100-T/i.current.offsetWidth*100}%)`)},w=()=>{if(!d.current)return;d.current=!1;const C=o.current-l.current,T=50;i.current&&(i.current.style.transform=`translateX(-${e*100}%)`),Math.abs(C)>T&&(C>0?h():f())};return g.useEffect(()=>{const C=()=>{d.current&&w()},T=O=>{if(d.current){l.current=O.clientX;const I=o.current-l.current;i.current&&(i.current.style.transform=`translateX(${-e*100-I/i.current.offsetWidth*100}%)`)}};return document.addEventListener("mouseup",C),document.addEventListener("mousemove",T),()=>{document.removeEventListener("mouseup",C),document.removeEventListener("mousemove",T)}},[e]),g.useEffect(()=>{i.current&&(i.current.style.transform=`translateX(-${e*100}%)`)},[e]),t.length===0?null:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"relative w-full overflow-hidden group",children:[n.jsx("div",{ref:i,className:"flex transition-transform duration-300 ease-out",style:{transform:`translateX(-${e*100}%)`},onTouchStart:m,onTouchMove:x,onTouchEnd:b,onMouseDown:j,onMouseMove:N,onMouseUp:w,children:t.map((C,T)=>n.jsx("div",{className:"w-full flex-shrink-0",children:n.jsx("img",{src:C,alt:`Image ${T+1} of ${t.length}`,className:"w-full h-48 object-cover rounded-lg border border-gray-200 dark:border-gray-600 shadow-lg select-none",draggable:!1})},T))}),t.length>1&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:f,className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-1.5 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-200","aria-label":"Previous image",children:n.jsx(Du,{className:"w-4 h-4"})}),n.jsx("button",{onClick:h,className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-1.5 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-200","aria-label":"Next image",children:n.jsx(Zh,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/60 text-white text-xs px-2 py-1 rounded-full",children:[e+1,"/",t.length]})]}),t.length>1&&n.jsx("div",{className:"flex justify-center space-x-1.5",children:t.map((C,T)=>n.jsx("button",{onClick:()=>{s||(a(!0),r(T),setTimeout(()=>a(!1),300))},className:`w-2 h-2 rounded-full transition-all duration-200 ${T===e?"bg-gray-700 dark:bg-gray-300 scale-110":"bg-gray-400 dark:bg-gray-600 hover:bg-gray-600 dark:hover:bg-gray-400"}`,"aria-label":`Go to image ${T+1}`},T))})]})}function n4e({isOpen:t,onClose:e,initialQuery:r}){const[s,a]=g.useState([]),[i,o]=g.useState(""),[l,d]=g.useState(!1),[h,f]=g.useState(!1),[m,x]=g.useState(null),b=g.useRef(null),j=()=>{var I;(I=b.current)==null||I.scrollIntoView({behavior:"smooth"})};g.useEffect(()=>{j()},[s]),g.useEffect(()=>{t&&r&&r.trim()&&s.length===0&&T(r)},[t,r]);const N=I=>I.split(/(```[\s\S]*?```)/g).map((A,R)=>A.startsWith("```")&&A.endsWith("```")?{type:"code",content:A.replace(/^```(?:javascript)?\n?/,"").replace(/\n?```$/,""),index:R}:{type:"text",content:A,index:R}).filter(A=>A.content.trim()),w=(I,P)=>{navigator.clipboard.writeText(I).then(()=>{x(P),setTimeout(()=>x(null),2e3)}).catch(A=>{console.error("Failed to copy text: ",A)})},{data:C}=xn({queryKey:["/api/ai-context"],enabled:t}),T=async I=>{const P=I||i.trim();if(!P)return;const A={id:Date.now().toString(),role:"user",content:P,timestamp:new Date};a(R=>[...R,A]),o(""),d(!0);try{const R=await Bp("/api/gemini/chat","POST",{message:P,context:"trading"}),B={id:(Date.now()+1).toString(),role:"assistant",content:R.response||"I can help you with trading analysis and strategy generation.",timestamp:new Date};a(V=>[...V,B])}catch(R){console.error("AI Chat error:",R);const B={id:(Date.now()+1).toString(),role:"assistant",content:"I apologize, but I encountered an error processing your request. Please try again.",timestamp:new Date};a(V=>[...V,B])}finally{d(!1)}},O=I=>{I.key==="Enter"&&!I.shiftKey&&(I.preventDefault(),T())};return t?n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs(St,{className:`w-full max-w-4xl bg-white dark:bg-gray-900 shadow-2xl transition-all duration-300 ${h?"h-16":"h-[80vh]"}`,children:[n.jsx(um,{className:"border-b border-gray-200 dark:border-gray-700 p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(hm,{className:"flex items-center gap-2 text-lg",children:[n.jsx(Pu,{className:"w-6 h-6 text-indigo-500"}),n.jsx("span",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent font-bold",children:"#1 BATTU AI"}),n.jsx("span",{className:"text-xs bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-2 py-1 rounded-full font-semibold animate-pulse",children:"ULTRA-SMART"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(H,{variant:"ghost",size:"sm",onClick:()=>f(!h),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:h?n.jsx(ise,{className:"w-4 h-4"}):n.jsx(lse,{className:"w-4 h-4"})}),n.jsx(H,{variant:"ghost",size:"sm",onClick:e,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:n.jsx(Wr,{className:"w-4 h-4"})})]})]})}),!h&&n.jsxs(Kt,{className:"flex flex-col h-full p-0",children:[n.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:n.jsxs("div",{className:"space-y-4",children:[s.length===0&&n.jsxs("div",{className:"text-center py-8",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Pu,{className:"w-16 h-16 text-indigo-500 mx-auto mb-4"}),n.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full flex items-center justify-center text-white text-xs font-bold animate-pulse",children:"#1"})]}),n.jsx("h3",{className:"text-xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent mb-2",children:"Welcome to #1 BATTU AI!"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 text-sm",children:"The world's smartest trading assistant with 50% text match intelligence"}),n.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 rounded-lg p-4 mb-6",children:[n.jsx("h4",{className:"text-sm font-semibold text-indigo-600 dark:text-indigo-400 mb-3",children:" Ultra-Smart Commands:"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-xs mb-3",children:[n.jsx("span",{className:"bg-white dark:bg-gray-800 px-2 py-1 rounded border border-indigo-200 dark:border-indigo-700",children:'"code"'}),n.jsx("span",{className:"bg-white dark:bg-gray-800 px-2 py-1 rounded border border-indigo-200 dark:border-indigo-700",children:'"rsi code"'}),n.jsx("span",{className:"bg-white dark:bg-gray-800 px-2 py-1 rounded border border-indigo-200 dark:border-indigo-700",children:'"reliance"'}),n.jsx("span",{className:"bg-white dark:bg-gray-800 px-2 py-1 rounded border border-indigo-200 dark:border-indigo-700",children:'"macd"'})]}),n.jsxs("div",{className:"border-t border-indigo-200 dark:border-indigo-700 pt-3",children:[n.jsx("h5",{className:"text-xs font-semibold text-green-600 dark:text-green-400 mb-2",children:" NEW: Advanced Multi-Indicator Combinations:"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[n.jsx("span",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 px-2 py-1 rounded border border-green-200 dark:border-green-700 text-green-700 dark:text-green-300",children:'"rsi,macd code"'}),n.jsx("span",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 px-2 py-1 rounded border border-green-200 dark:border-green-700 text-green-700 dark:text-green-300",children:'"ema,rsi code"'})]}),n.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 mt-2 italic",children:" Trades only when ALL indicators agree!"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-w-2xl mx-auto",children:[n.jsxs("div",{className:"flex flex-col items-center gap-2 text-sm text-indigo-600 dark:text-indigo-400 bg-white dark:bg-gray-800 p-3 rounded-lg border border-indigo-200 dark:border-indigo-700",children:[n.jsx(Gn,{className:"w-5 h-5"}),n.jsx("span",{className:"font-medium",children:"Smart Stock Analysis"}),n.jsx("span",{className:"text-xs text-gray-500",children:"Live prices + fundamentals"})]}),n.jsxs("div",{className:"flex flex-col items-center gap-2 text-sm text-green-600 dark:text-green-400 bg-white dark:bg-gray-800 p-3 rounded-lg border border-green-200 dark:border-green-700",children:[n.jsx(Aq,{className:"w-5 h-5"}),n.jsx("span",{className:"font-medium",children:"Code Generation"}),n.jsx("span",{className:"text-xs text-gray-500",children:"Trading strategies + bots"})]}),n.jsxs("div",{className:"flex flex-col items-center gap-2 text-sm text-purple-600 dark:text-purple-400 bg-white dark:bg-gray-800 p-3 rounded-lg border border-purple-200 dark:border-purple-700",children:[n.jsx(ia,{className:"w-5 h-5"}),n.jsx("span",{className:"font-medium",children:"50% Text Matching"}),n.jsx("span",{className:"text-xs text-gray-500",children:"Understands short phrases"})]})]})]}),s.map(I=>n.jsxs("div",{className:`flex gap-3 ${I.role==="user"?"justify-end":"justify-start"}`,children:[I.role==="assistant"&&n.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center flex-shrink-0 mt-1",children:n.jsx(Pu,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),n.jsxs("div",{className:`max-w-[70%] rounded-lg px-4 py-3 ${I.role==="user"?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white":"bg-gradient-to-r from-gray-50 to-indigo-50 dark:from-gray-800 dark:to-indigo-900/20 text-gray-800 dark:text-gray-200 border border-indigo-200 dark:border-indigo-800"}`,children:[n.jsx("div",{className:"whitespace-pre-wrap leading-relaxed",children:I.role==="assistant"?n.jsx("div",{className:"space-y-2",children:N(I.content).map((P,A)=>n.jsx("div",{children:P.type==="text"?n.jsx("div",{className:"bg-slate-700 text-gray-200 px-3 py-2 rounded-lg text-sm whitespace-pre-wrap",children:P.content}):n.jsxs("div",{className:"bg-slate-900 border border-slate-600 rounded-lg overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between bg-slate-800 px-3 py-2 border-b border-slate-600",children:[n.jsx("span",{className:"text-xs text-gray-400 font-mono",children:"Strategy Code"}),n.jsx(H,{size:"sm",variant:"ghost",onClick:()=>w(P.content,parseInt(I.id)*100+A),className:"h-6 px-2 text-xs text-gray-400 hover:text-white hover:bg-slate-700",children:m===parseInt(I.id)*100+A?n.jsxs(n.Fragment,{children:[n.jsx(hl,{className:"w-3 h-3 mr-1"}),"Copied!"]}):n.jsxs(n.Fragment,{children:[n.jsx(Bi,{className:"w-3 h-3 mr-1"}),"Copy"]})})]}),n.jsx("div",{className:"p-3",children:n.jsx("pre",{className:"text-xs text-gray-300 font-mono overflow-x-auto whitespace-pre-wrap",children:P.content})})]})},A))}):n.jsx("div",{className:"text-white",children:I.content})}),n.jsx("span",{className:"text-xs opacity-70 mt-2 block",children:I.timestamp.toLocaleTimeString()})]}),I.role==="user"&&n.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center flex-shrink-0 mt-1",children:n.jsx(wb,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})})]},I.id)),l&&n.jsxs("div",{className:"flex gap-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center flex-shrink-0",children:n.jsx(Pu,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),n.jsxs("div",{className:"flex items-center gap-3 py-3 px-4 bg-gradient-to-r from-slate-800 to-slate-700 border border-purple-500/30 rounded-lg animate-pulse",children:[n.jsxs("div",{className:"flex gap-1",children:[n.jsx("div",{className:"w-2.5 h-2.5 bg-gradient-to-r from-purple-400 to-blue-400 rounded-full animate-pulse"}),n.jsx("div",{className:"w-2.5 h-2.5 bg-gradient-to-r from-blue-400 to-indigo-400 rounded-full animate-pulse",style:{animationDelay:"200ms"}}),n.jsx("div",{className:"w-2.5 h-2.5 bg-gradient-to-r from-indigo-400 to-purple-400 rounded-full animate-pulse",style:{animationDelay:"400ms"}})]}),n.jsx("span",{className:"text-xs text-slate-300 font-medium animate-pulse",children:"BATTU AI is thinking..."})]})]}),n.jsx("div",{ref:b})]})}),n.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx(Nr,{value:i,onChange:I=>o(I.target.value),onKeyPress:O,placeholder:"Ask me about stocks, market news, your trades, or any finance question...",className:"flex-1",disabled:l}),n.jsx(H,{onClick:()=>T(),disabled:!i.trim()||l,className:"bg-blue-600 hover:bg-blue-700 text-white px-6",children:n.jsx(X2,{className:"w-4 h-4"})})]})})]})]})}):null}function s4e({isOpen:t,onClose:e,onSuccess:r}){const[s,a]=g.useState(""),[i,o]=g.useState(""),[l,d]=g.useState(""),[h,f]=g.useState(""),[m,x]=g.useState(!1),[b,j]=g.useState(null),[N,w]=g.useState(""),[C,T]=g.useState(!1),{toast:O}=Ia(),I=Array.from({length:31},(X,ee)=>String(ee+1).padStart(2,"0")),P=[{value:"01",label:"January"},{value:"02",label:"February"},{value:"03",label:"March"},{value:"04",label:"April"},{value:"05",label:"May"},{value:"06",label:"June"},{value:"07",label:"July"},{value:"08",label:"August"},{value:"09",label:"September"},{value:"10",label:"October"},{value:"11",label:"November"},{value:"12",label:"December"}],A=new Date().getFullYear(),R=Array.from({length:100},(X,ee)=>String(A-ee)),B=i&&l&&h?`${h}-${l}-${i}`:"";g.useEffect(()=>{const ee=setTimeout(async()=>{if(s.length<3){j(null),w("");return}if(!/^[a-zA-Z0-9_]{3,20}$/.test(s)){j(!1),w("Username must be 3-20 characters (letters, numbers, underscore only)");return}x(!0);try{const re=await(await fetch(`/api/user/check-username/${s}`)).json();j(re.available),w(re.message)}catch(Y){console.error("Error checking username:",Y),j(null),w("")}finally{x(!1)}},500);return()=>clearTimeout(ee)},[s]);const V=async()=>{if(!b){O({description:"Please provide a valid username",variant:"destructive"});return}if(!B){O({description:"Please provide your date of birth",variant:"destructive"});return}T(!0);try{console.log(" Getting Cognito ID token...");const X=await ks();if(!X)throw new Error("Not authenticated");console.log(" ID token obtained"),console.log(" Sending profile save request:",{username:s.toLowerCase(),dob:B});const ee=new AbortController,Y=setTimeout(()=>ee.abort(),3e4);try{const re=await fetch("/api/user/profile",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${X}`},body:JSON.stringify({username:s.toLowerCase(),dob:B}),signal:ee.signal});clearTimeout(Y),console.log(" Response status:",re.status,re.statusText);const le=await re.text();console.log(" Response text:",le.substring(0,200));let te;try{te=JSON.parse(le)}catch{throw console.error(" Failed to parse response as JSON"),new Error("Server returned an invalid response. Please try again.")}if(!re.ok)throw new Error(te.message||"Failed to save profile");console.log(" Profile saved successfully:",te),O({description:"Profile created successfully!"}),r(s.toLowerCase()),e()}catch(re){throw clearTimeout(Y),re.name==="AbortError"?(console.error(" Request timed out after 30 seconds"),new Error("Request timed out. Please check your connection and try again.")):re}}catch(X){console.error(" Error saving profile:",X),O({description:X.message||"Failed to save profile. Please try again.",variant:"destructive"})}finally{T(!1)}};return n.jsx(bn,{open:t,onOpenChange:e,children:n.jsxs(pn,{className:"sm:max-w-lg bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700","data-testid":"dialog-userid-setup",children:[n.jsxs(tle,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",onClick:e,"data-testid":"button-close-dialog",children:[n.jsx(Wr,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]}),n.jsxs(Zn,{className:"space-y-2",children:[n.jsx(Xn,{className:"text-xl font-semibold text-gray-900 dark:text-white","data-testid":"text-dialog-title",children:"Complete Your Profile"}),n.jsx(BA,{className:"text-sm text-gray-600 dark:text-gray-400","data-testid":"text-dialog-description",children:"Choose a unique username and provide your date of birth"})]}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Un,{htmlFor:"username",className:"text-sm font-medium text-gray-700 dark:text-gray-300","data-testid":"label-username",children:"Username"}),n.jsxs("div",{className:"relative",children:[n.jsx(Nr,{id:"username","data-testid":"input-username",placeholder:"e.g., crypto_trader",value:s,onChange:X=>a(X.target.value.toLowerCase()),className:"pr-10 bg-white dark:bg-gray-700 border-gray-200 dark:border-gray-600 text-gray-900 dark:text-white placeholder:text-gray-400"}),n.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:[m&&n.jsx(Vo,{className:"h-4 w-4 animate-spin text-gray-400","data-testid":"icon-checking"}),!m&&b===!0&&n.jsx(Bc,{className:"h-4 w-4 text-green-500","data-testid":"icon-available"}),!m&&b===!1&&n.jsx(Wr,{className:"h-4 w-4 text-red-500","data-testid":"icon-unavailable"})]})]}),N&&n.jsx("p",{className:`text-xs ${b?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,"data-testid":"text-username-message",children:N})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Un,{className:"text-sm font-medium text-gray-700 dark:text-gray-300","data-testid":"label-dob",children:"Date of Birth"}),n.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[n.jsx("div",{children:n.jsxs(Ms,{value:l,onValueChange:d,children:[n.jsx(Ns,{className:"bg-white dark:bg-gray-700 border-gray-200 dark:border-gray-600 text-gray-900 dark:text-white","data-testid":"select-month",children:n.jsx(Os,{placeholder:"Month"})}),n.jsx(js,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 max-h-[200px]",children:P.map(X=>n.jsx(gt,{value:X.value,className:"text-gray-900 dark:text-white",children:X.label},X.value))})]})}),n.jsx("div",{children:n.jsxs(Ms,{value:i,onValueChange:o,children:[n.jsx(Ns,{className:"bg-white dark:bg-gray-700 border-gray-200 dark:border-gray-600 text-gray-900 dark:text-white","data-testid":"select-day",children:n.jsx(Os,{placeholder:"Day"})}),n.jsx(js,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 max-h-[200px]",children:I.map(X=>n.jsx(gt,{value:X,className:"text-gray-900 dark:text-white",children:X},X))})]})}),n.jsx("div",{children:n.jsxs(Ms,{value:h,onValueChange:f,children:[n.jsx(Ns,{className:"bg-white dark:bg-gray-700 border-gray-200 dark:border-gray-600 text-gray-900 dark:text-white","data-testid":"select-year",children:n.jsx(Os,{placeholder:"Year"})}),n.jsx(js,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 max-h-[200px]",children:R.map(X=>n.jsx(gt,{value:X,className:"text-gray-900 dark:text-white",children:X},X))})]})})]})]})]}),n.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[n.jsx(H,{variant:"outline",onClick:e,className:"bg-white dark:bg-gray-700 border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600",children:"Cancel"}),n.jsx(H,{onClick:V,disabled:!b||!B||C,"data-testid":"button-save",className:"bg-blue-600 hover:bg-blue-700 text-white disabled:opacity-50 disabled:cursor-not-allowed",children:C?n.jsxs(n.Fragment,{children:[n.jsx(Vo,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Profile"})]})]})})}var q5=["Enter"," "],a4e=["ArrowDown","PageUp","Home"],IQ=["ArrowUp","PageDown","End"],i4e=[...a4e,...IQ],o4e={ltr:[...q5,"ArrowRight"],rtl:[...q5,"ArrowLeft"]},l4e={ltr:["ArrowLeft"],rtl:["ArrowRight"]},w1="Menu",[Ew,c4e,d4e]=H2(w1),[H0,MQ]=Hc(w1,[d4e,Jp,dS]),ak=Jp(),OQ=dS(),[u4e,W0]=H0(w1),[h4e,N1]=H0(w1),RQ=t=>{const{__scopeMenu:e,open:r=!1,children:s,dir:a,onOpenChange:i,modal:o=!0}=t,l=ak(e),[d,h]=g.useState(null),f=g.useRef(!1),m=yl(i),x=cS(a);return g.useEffect(()=>{const b=()=>{f.current=!0,document.addEventListener("pointerdown",j,{capture:!0,once:!0}),document.addEventListener("pointermove",j,{capture:!0,once:!0})},j=()=>f.current=!1;return document.addEventListener("keydown",b,{capture:!0}),()=>{document.removeEventListener("keydown",b,{capture:!0}),document.removeEventListener("pointerdown",j,{capture:!0}),document.removeEventListener("pointermove",j,{capture:!0})}},[]),n.jsx(IA,{...l,children:n.jsx(u4e,{scope:e,open:r,onOpenChange:m,content:d,onContentChange:h,children:n.jsx(h4e,{scope:e,onClose:g.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:f,dir:x,modal:o,children:s})})})};RQ.displayName=w1;var f4e="MenuAnchor",iI=g.forwardRef((t,e)=>{const{__scopeMenu:r,...s}=t,a=ak(r);return n.jsx(t1,{...a,...s,ref:e})});iI.displayName=f4e;var oI="MenuPortal",[m4e,DQ]=H0(oI,{forceMount:void 0}),$Q=t=>{const{__scopeMenu:e,forceMount:r,children:s,container:a}=t,i=W0(oI,e);return n.jsx(m4e,{scope:e,forceMount:r,children:n.jsx(Wc,{present:r||i.open,children:n.jsx(tv,{asChild:!0,container:a,children:s})})})};$Q.displayName=oI;var Ud="MenuContent",[p4e,lI]=H0(Ud),LQ=g.forwardRef((t,e)=>{const r=DQ(Ud,t.__scopeMenu),{forceMount:s=r.forceMount,...a}=t,i=W0(Ud,t.__scopeMenu),o=N1(Ud,t.__scopeMenu);return n.jsx(Ew.Provider,{scope:t.__scopeMenu,children:n.jsx(Wc,{present:s||i.open,children:n.jsx(Ew.Slot,{scope:t.__scopeMenu,children:o.modal?n.jsx(g4e,{...a,ref:e}):n.jsx(x4e,{...a,ref:e})})})})}),g4e=g.forwardRef((t,e)=>{const r=W0(Ud,t.__scopeMenu),s=g.useRef(null),a=$n(e,s);return g.useEffect(()=>{const i=s.current;if(i)return oS(i)},[]),n.jsx(cI,{...t,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:At(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),x4e=g.forwardRef((t,e)=>{const r=W0(Ud,t.__scopeMenu);return n.jsx(cI,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),y4e=Up("MenuContent.ScrollLock"),cI=g.forwardRef((t,e)=>{const{__scopeMenu:r,loop:s=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:d,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:m,onInteractOutside:x,onDismiss:b,disableOutsideScroll:j,...N}=t,w=W0(Ud,r),C=N1(Ud,r),T=ak(r),O=OQ(r),I=c4e(r),[P,A]=g.useState(null),R=g.useRef(null),B=$n(e,R,w.onContentChange),V=g.useRef(0),X=g.useRef(""),ee=g.useRef(0),Y=g.useRef(null),re=g.useRef("right"),le=g.useRef(0),te=j?n1:g.Fragment,de=j?{as:y4e,allowPinchZoom:!0}:void 0,ie=ne=>{var he,ue;const oe=X.current+ne,U=I().filter(ce=>!ce.disabled),W=document.activeElement,be=(he=U.find(ce=>ce.ref.current===W))==null?void 0:he.textValue,pe=U.map(ce=>ce.textValue),ge=A4e(pe,oe,be),Ce=(ue=U.find(ce=>ce.textValue===ge))==null?void 0:ue.ref.current;(function ce(Ee){X.current=Ee,window.clearTimeout(V.current),Ee!==""&&(V.current=window.setTimeout(()=>ce(""),1e3))})(oe),Ce&&setTimeout(()=>Ce.focus())};g.useEffect(()=>()=>window.clearTimeout(V.current),[]),aS();const Z=g.useCallback(ne=>{var U,W;return re.current===((U=Y.current)==null?void 0:U.side)&&I4e(ne,(W=Y.current)==null?void 0:W.area)},[]);return n.jsx(p4e,{scope:r,searchRef:X,onItemEnter:g.useCallback(ne=>{Z(ne)&&ne.preventDefault()},[Z]),onItemLeave:g.useCallback(ne=>{var oe;Z(ne)||((oe=R.current)==null||oe.focus(),A(null))},[Z]),onTriggerLeave:g.useCallback(ne=>{Z(ne)&&ne.preventDefault()},[Z]),pointerGraceTimerRef:ee,onPointerGraceIntentChange:g.useCallback(ne=>{Y.current=ne},[]),children:n.jsx(te,{...de,children:n.jsx(r1,{asChild:!0,trapped:a,onMountAutoFocus:At(i,ne=>{var oe;ne.preventDefault(),(oe=R.current)==null||oe.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:n.jsx(L0,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:m,onInteractOutside:x,onDismiss:b,children:n.jsx(iW,{asChild:!0,...O,dir:C.dir,orientation:"vertical",loop:s,currentTabStopId:P,onCurrentTabStopIdChange:A,onEntryFocus:At(d,ne=>{C.isUsingKeyboardRef.current||ne.preventDefault()}),preventScrollOnEntryFocus:!0,children:n.jsx(tS,{role:"menu","aria-orientation":"vertical","data-state":eJ(w.open),"data-radix-menu-content":"",dir:C.dir,...T,...N,ref:B,style:{outline:"none",...N.style},onKeyDown:At(N.onKeyDown,ne=>{const U=ne.target.closest("[data-radix-menu-content]")===ne.currentTarget,W=ne.ctrlKey||ne.altKey||ne.metaKey,be=ne.key.length===1;U&&(ne.key==="Tab"&&ne.preventDefault(),!W&&be&&ie(ne.key));const pe=R.current;if(ne.target!==pe||!i4e.includes(ne.key))return;ne.preventDefault();const Ce=I().filter(he=>!he.disabled).map(he=>he.ref.current);IQ.includes(ne.key)&&Ce.reverse(),T4e(Ce)}),onBlur:At(t.onBlur,ne=>{ne.currentTarget.contains(ne.target)||(window.clearTimeout(V.current),X.current="")}),onPointerMove:At(t.onPointerMove,Tw(ne=>{const oe=ne.target,U=le.current!==ne.clientX;if(ne.currentTarget.contains(oe)&&U){const W=ne.clientX>le.current?"right":"left";re.current=W,le.current=ne.clientX}}))})})})})})})});LQ.displayName=Ud;var v4e="MenuGroup",dI=g.forwardRef((t,e)=>{const{__scopeMenu:r,...s}=t;return n.jsx(lr.div,{role:"group",...s,ref:e})});dI.displayName=v4e;var b4e="MenuLabel",FQ=g.forwardRef((t,e)=>{const{__scopeMenu:r,...s}=t;return n.jsx(lr.div,{...s,ref:e})});FQ.displayName=b4e;var b2="MenuItem",KL="menu.itemSelect",ik=g.forwardRef((t,e)=>{const{disabled:r=!1,onSelect:s,...a}=t,i=g.useRef(null),o=N1(b2,t.__scopeMenu),l=lI(b2,t.__scopeMenu),d=$n(e,i),h=g.useRef(!1),f=()=>{const m=i.current;if(!r&&m){const x=new CustomEvent(KL,{bubbles:!0,cancelable:!0});m.addEventListener(KL,b=>s==null?void 0:s(b),{once:!0}),gA(m,x),x.defaultPrevented?h.current=!1:o.onClose()}};return n.jsx(BQ,{...a,ref:d,disabled:r,onClick:At(t.onClick,f),onPointerDown:m=>{var x;(x=t.onPointerDown)==null||x.call(t,m),h.current=!0},onPointerUp:At(t.onPointerUp,m=>{var x;h.current||(x=m.currentTarget)==null||x.click()}),onKeyDown:At(t.onKeyDown,m=>{const x=l.searchRef.current!=="";r||x&&m.key===" "||q5.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});ik.displayName=b2;var BQ=g.forwardRef((t,e)=>{const{__scopeMenu:r,disabled:s=!1,textValue:a,...i}=t,o=lI(b2,r),l=OQ(r),d=g.useRef(null),h=$n(e,d),[f,m]=g.useState(!1),[x,b]=g.useState("");return g.useEffect(()=>{const j=d.current;j&&b((j.textContent??"").trim())},[i.children]),n.jsx(Ew.ItemSlot,{scope:r,disabled:s,textValue:a??x,children:n.jsx(oW,{asChild:!0,...l,focusable:!s,children:n.jsx(lr.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...i,ref:h,onPointerMove:At(t.onPointerMove,Tw(j=>{s?o.onItemLeave(j):(o.onItemEnter(j),j.defaultPrevented||j.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:At(t.onPointerLeave,Tw(j=>o.onItemLeave(j))),onFocus:At(t.onFocus,()=>m(!0)),onBlur:At(t.onBlur,()=>m(!1))})})})}),w4e="MenuCheckboxItem",UQ=g.forwardRef((t,e)=>{const{checked:r=!1,onCheckedChange:s,...a}=t;return n.jsx(WQ,{scope:t.__scopeMenu,checked:r,children:n.jsx(ik,{role:"menuitemcheckbox","aria-checked":w2(r)?"mixed":r,...a,ref:e,"data-state":hI(r),onSelect:At(a.onSelect,()=>s==null?void 0:s(w2(r)?!0:!r),{checkForDefaultPrevented:!1})})})});UQ.displayName=w4e;var zQ="MenuRadioGroup",[N4e,j4e]=H0(zQ,{value:void 0,onValueChange:()=>{}}),VQ=g.forwardRef((t,e)=>{const{value:r,onValueChange:s,...a}=t,i=yl(s);return n.jsx(N4e,{scope:t.__scopeMenu,value:r,onValueChange:i,children:n.jsx(dI,{...a,ref:e})})});VQ.displayName=zQ;var qQ="MenuRadioItem",HQ=g.forwardRef((t,e)=>{const{value:r,...s}=t,a=j4e(qQ,t.__scopeMenu),i=r===a.value;return n.jsx(WQ,{scope:t.__scopeMenu,checked:i,children:n.jsx(ik,{role:"menuitemradio","aria-checked":i,...s,ref:e,"data-state":hI(i),onSelect:At(s.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,r)},{checkForDefaultPrevented:!1})})})});HQ.displayName=qQ;var uI="MenuItemIndicator",[WQ,S4e]=H0(uI,{checked:!1}),YQ=g.forwardRef((t,e)=>{const{__scopeMenu:r,forceMount:s,...a}=t,i=S4e(uI,r);return n.jsx(Wc,{present:s||w2(i.checked)||i.checked===!0,children:n.jsx(lr.span,{...a,ref:e,"data-state":hI(i.checked)})})});YQ.displayName=uI;var k4e="MenuSeparator",KQ=g.forwardRef((t,e)=>{const{__scopeMenu:r,...s}=t;return n.jsx(lr.div,{role:"separator","aria-orientation":"horizontal",...s,ref:e})});KQ.displayName=k4e;var C4e="MenuArrow",GQ=g.forwardRef((t,e)=>{const{__scopeMenu:r,...s}=t,a=ak(r);return n.jsx(rS,{...a,...s,ref:e})});GQ.displayName=C4e;var E4e="MenuSub",[MMe,XQ]=H0(E4e),gb="MenuSubTrigger",QQ=g.forwardRef((t,e)=>{const r=W0(gb,t.__scopeMenu),s=N1(gb,t.__scopeMenu),a=XQ(gb,t.__scopeMenu),i=lI(gb,t.__scopeMenu),o=g.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:d}=i,h={__scopeMenu:t.__scopeMenu},f=g.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return g.useEffect(()=>f,[f]),g.useEffect(()=>{const m=l.current;return()=>{window.clearTimeout(m),d(null)}},[l,d]),n.jsx(iI,{asChild:!0,...h,children:n.jsx(BQ,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":eJ(r.open),...t,ref:vm(e,a.onTriggerChange),onClick:m=>{var x;(x=t.onClick)==null||x.call(t,m),!(t.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:At(t.onPointerMove,Tw(m=>{i.onItemEnter(m),!m.defaultPrevented&&!t.disabled&&!r.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),f()},100))})),onPointerLeave:At(t.onPointerLeave,Tw(m=>{var b,j;f();const x=(b=r.content)==null?void 0:b.getBoundingClientRect();if(x){const N=(j=r.content)==null?void 0:j.dataset.side,w=N==="right",C=w?-5:5,T=x[w?"left":"right"],O=x[w?"right":"left"];i.onPointerGraceIntentChange({area:[{x:m.clientX+C,y:m.clientY},{x:T,y:x.top},{x:O,y:x.top},{x:O,y:x.bottom},{x:T,y:x.bottom}],side:N}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(m),m.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:At(t.onKeyDown,m=>{var b;const x=i.searchRef.current!=="";t.disabled||x&&m.key===" "||o4e[s.dir].includes(m.key)&&(r.onOpenChange(!0),(b=r.content)==null||b.focus(),m.preventDefault())})})})});QQ.displayName=gb;var JQ="MenuSubContent",ZQ=g.forwardRef((t,e)=>{const r=DQ(Ud,t.__scopeMenu),{forceMount:s=r.forceMount,...a}=t,i=W0(Ud,t.__scopeMenu),o=N1(Ud,t.__scopeMenu),l=XQ(JQ,t.__scopeMenu),d=g.useRef(null),h=$n(e,d);return n.jsx(Ew.Provider,{scope:t.__scopeMenu,children:n.jsx(Wc,{present:s||i.open,children:n.jsx(Ew.Slot,{scope:t.__scopeMenu,children:n.jsx(cI,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:h,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var m;o.isUsingKeyboardRef.current&&((m=d.current)==null||m.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:At(t.onFocusOutside,f=>{f.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:At(t.onEscapeKeyDown,f=>{o.onClose(),f.preventDefault()}),onKeyDown:At(t.onKeyDown,f=>{var b;const m=f.currentTarget.contains(f.target),x=l4e[o.dir].includes(f.key);m&&x&&(i.onOpenChange(!1),(b=l.trigger)==null||b.focus(),f.preventDefault())})})})})})});ZQ.displayName=JQ;function eJ(t){return t?"open":"closed"}function w2(t){return t==="indeterminate"}function hI(t){return w2(t)?"indeterminate":t?"checked":"unchecked"}function T4e(t){const e=document.activeElement;for(const r of t)if(r===e||(r.focus(),document.activeElement!==e))return}function P4e(t,e){return t.map((r,s)=>t[(e+s)%t.length])}function A4e(t,e,r){const a=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,i=r?t.indexOf(r):-1;let o=P4e(t,Math.max(i,0));a.length===1&&(o=o.filter(h=>h!==r));const d=o.find(h=>h.toLowerCase().startsWith(a.toLowerCase()));return d!==r?d:void 0}function _4e(t,e){const{x:r,y:s}=t;let a=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const l=e[i],d=e[o],h=l.x,f=l.y,m=d.x,x=d.y;f>s!=x>s&&r<(m-h)*(s-f)/(x-f)+h&&(a=!a)}return a}function I4e(t,e){if(!e)return!1;const r={x:t.clientX,y:t.clientY};return _4e(r,e)}function Tw(t){return e=>e.pointerType==="mouse"?t(e):void 0}var M4e=RQ,O4e=iI,R4e=$Q,D4e=LQ,$4e=dI,L4e=FQ,F4e=ik,B4e=UQ,U4e=VQ,z4e=HQ,V4e=YQ,q4e=KQ,H4e=GQ,W4e=QQ,Y4e=ZQ,ok="DropdownMenu",[K4e]=Hc(ok,[MQ]),wl=MQ(),[G4e,tJ]=K4e(ok),rJ=t=>{const{__scopeDropdownMenu:e,children:r,dir:s,open:a,defaultOpen:i,onOpenChange:o,modal:l=!0}=t,d=wl(e),h=g.useRef(null),[f,m]=bm({prop:a,defaultProp:i??!1,onChange:o,caller:ok});return n.jsx(G4e,{scope:e,triggerId:wo(),triggerRef:h,contentId:wo(),open:f,onOpenChange:m,onOpenToggle:g.useCallback(()=>m(x=>!x),[m]),modal:l,children:n.jsx(M4e,{...d,open:f,onOpenChange:m,dir:s,modal:l,children:r})})};rJ.displayName=ok;var nJ="DropdownMenuTrigger",sJ=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,disabled:s=!1,...a}=t,i=tJ(nJ,r),o=wl(r);return n.jsx(O4e,{asChild:!0,...o,children:n.jsx(lr.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...a,ref:vm(e,i.triggerRef),onPointerDown:At(t.onPointerDown,l=>{!s&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:At(t.onKeyDown,l=>{s||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});sJ.displayName=nJ;var X4e="DropdownMenuPortal",aJ=t=>{const{__scopeDropdownMenu:e,...r}=t,s=wl(e);return n.jsx(R4e,{...s,...r})};aJ.displayName=X4e;var iJ="DropdownMenuContent",oJ=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...s}=t,a=tJ(iJ,r),i=wl(r),o=g.useRef(!1);return n.jsx(D4e,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...s,ref:e,onCloseAutoFocus:At(t.onCloseAutoFocus,l=>{var d;o.current||(d=a.triggerRef.current)==null||d.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:At(t.onInteractOutside,l=>{const d=l.detail.originalEvent,h=d.button===0&&d.ctrlKey===!0,f=d.button===2||h;(!a.modal||f)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});oJ.displayName=iJ;var Q4e="DropdownMenuGroup",J4e=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...s}=t,a=wl(r);return n.jsx($4e,{...a,...s,ref:e})});J4e.displayName=Q4e;var Z4e="DropdownMenuLabel",lJ=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...s}=t,a=wl(r);return n.jsx(L4e,{...a,...s,ref:e})});lJ.displayName=Z4e;var eTe="DropdownMenuItem",cJ=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...s}=t,a=wl(r);return n.jsx(F4e,{...a,...s,ref:e})});cJ.displayName=eTe;var tTe="DropdownMenuCheckboxItem",dJ=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...s}=t,a=wl(r);return n.jsx(B4e,{...a,...s,ref:e})});dJ.displayName=tTe;var rTe="DropdownMenuRadioGroup",nTe=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...s}=t,a=wl(r);return n.jsx(U4e,{...a,...s,ref:e})});nTe.displayName=rTe;var sTe="DropdownMenuRadioItem",uJ=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...s}=t,a=wl(r);return n.jsx(z4e,{...a,...s,ref:e})});uJ.displayName=sTe;var aTe="DropdownMenuItemIndicator",hJ=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...s}=t,a=wl(r);return n.jsx(V4e,{...a,...s,ref:e})});hJ.displayName=aTe;var iTe="DropdownMenuSeparator",fJ=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...s}=t,a=wl(r);return n.jsx(q4e,{...a,...s,ref:e})});fJ.displayName=iTe;var oTe="DropdownMenuArrow",lTe=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...s}=t,a=wl(r);return n.jsx(H4e,{...a,...s,ref:e})});lTe.displayName=oTe;var cTe="DropdownMenuSubTrigger",mJ=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...s}=t,a=wl(r);return n.jsx(W4e,{...a,...s,ref:e})});mJ.displayName=cTe;var dTe="DropdownMenuSubContent",pJ=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...s}=t,a=wl(r);return n.jsx(Y4e,{...a,...s,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});pJ.displayName=dTe;var uTe=rJ,hTe=sJ,fTe=aJ,gJ=oJ,xJ=lJ,yJ=cJ,vJ=dJ,bJ=uJ,wJ=hJ,NJ=fJ,jJ=mJ,SJ=pJ;const lk=uTe,ck=hTe,mTe=g.forwardRef(({className:t,inset:e,children:r,...s},a)=>n.jsxs(jJ,{ref:a,className:Ht("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...s,children:[r,n.jsx(Zh,{className:"ml-auto"})]}));mTe.displayName=jJ.displayName;const pTe=g.forwardRef(({className:t,...e},r)=>n.jsx(SJ,{ref:r,className:Ht("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...e}));pTe.displayName=SJ.displayName;const j1=g.forwardRef(({className:t,sideOffset:e=4,...r},s)=>n.jsx(fTe,{children:n.jsx(gJ,{ref:s,sideOffset:e,className:Ht("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...r})}));j1.displayName=gJ.displayName;const xm=g.forwardRef(({className:t,inset:e,...r},s)=>n.jsx(yJ,{ref:s,className:Ht("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...r}));xm.displayName=yJ.displayName;const gTe=g.forwardRef(({className:t,children:e,checked:r,...s},a)=>n.jsxs(vJ,{ref:a,className:Ht("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r,...s,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(wJ,{children:n.jsx(hl,{className:"h-4 w-4"})})}),e]}));gTe.displayName=vJ.displayName;const xTe=g.forwardRef(({className:t,children:e,...r},s)=>n.jsxs(bJ,{ref:s,className:Ht("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(wJ,{children:n.jsx(Zne,{className:"h-2 w-2 fill-current"})})}),e]}));xTe.displayName=bJ.displayName;const kJ=g.forwardRef(({className:t,inset:e,...r},s)=>n.jsx(xJ,{ref:s,className:Ht("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...r}));kJ.displayName=xJ.displayName;const H5=g.forwardRef(({className:t,...e},r)=>n.jsx(NJ,{ref:r,className:Ht("-mx-1 my-1 h-px bg-muted",t),...e}));H5.displayName=NJ.displayName;function yTe(){var O,I;const{currentUser:t}=h1(),{toast:e}=Ia(),r=qu(),[s,a]=g.useState(!1),[i,o]=g.useState(!1),[l,d]=g.useState(!1),[h,f]=g.useState(""),[m,x]=g.useState(""),{data:b}=xn({queryKey:["user-profile-dropdown",t.email],queryFn:async()=>{var R,B;if(!t.email)return null;const P=await ks();if(!P)return null;const A=await fetch("/api/user/profile",{headers:{Authorization:`Bearer ${P}`}});if(A.ok){const V=await A.json();if(V.profile)return{username:V.profile.username||((R=t.email)==null?void 0:R.split("@")[0])||"user",displayName:V.profile.displayName||((B=t.email)==null?void 0:B.split("@")[0])||"User",email:V.profile.email||t.email||"",bio:V.profile.bio||"",followers:V.profile.followers||0,following:V.profile.following||0,dob:V.profile.dob}}return null},enabled:!!t.email,staleTime:300*1e3,gcTime:600*1e3,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1});g.useEffect(()=>{b&&(f(b.bio||""),x(b.displayName||""))},[b]);const j=async()=>{if(!m.trim()){e({description:"Display name cannot be empty",variant:"destructive"});return}d(!0);try{const P=await ks();if(!P)throw new Error("Not authenticated");const A=await fetch("/api/user/profile",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${P}`},body:JSON.stringify({displayName:m.trim(),bio:h.trim()})});if(!A.ok)throw new Error("Failed to update profile");const R=await A.json();r.setQueryData(["user-profile-dropdown",t.email],B=>B?{...B,displayName:m.trim(),bio:h.trim()}:null),o(!1),e({description:"Profile updated successfully!"})}catch(P){console.error("Error updating profile:",P),e({description:P.message||"Failed to update profile",variant:"destructive"})}finally{d(!1)}},N=async()=>{try{localStorage.removeItem("currentUserId"),localStorage.removeItem("currentUserEmail"),localStorage.removeItem("currentUsername"),localStorage.removeItem("currentDisplayName"),localStorage.removeItem("currentUserName"),await ES(),window.location.href="/"}catch(P){console.error("Error logging out:",P),e({description:"Failed to logout",variant:"destructive"})}},w=P=>P.split(" ").map(A=>A[0]).join("").toUpperCase().slice(0,2),C=(b==null?void 0:b.displayName)||t.displayName||((O=t.email)==null?void 0:O.split("@")[0])||"User",T=(b==null?void 0:b.username)||t.username||((I=t.email)==null?void 0:I.split("@")[0])||"user";return n.jsxs(n.Fragment,{children:[n.jsxs(lk,{children:[n.jsx(ck,{asChild:!0,children:n.jsx(H,{variant:"ghost",className:"relative h-10 w-10 rounded-full p-0 hover:bg-gray-100 dark:hover:bg-gray-700","data-testid":"button-profile-avatar",children:n.jsx(rc,{className:"h-10 w-10 border-2 border-gray-200 dark:border-gray-600",children:n.jsx(nc,{className:"bg-gradient-to-br from-blue-500 to-purple-500 text-white font-semibold text-sm",children:w(C)})})})}),n.jsxs(j1,{className:"w-80 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",align:"end",children:[n.jsxs(kJ,{className:"font-normal",children:[n.jsxs("div",{className:"flex items-start gap-3 py-2",children:[n.jsx(rc,{className:"h-12 w-12 border-2 border-gray-200 dark:border-gray-600",children:n.jsx(nc,{className:"bg-gradient-to-br from-blue-500 to-purple-500 text-white font-semibold",children:w(C)})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",children:C}),n.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:["@",T]})]})]}),(b==null?void 0:b.bio)&&n.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2 line-clamp-2",children:b.bio}),n.jsxs("div",{className:"flex gap-4 mt-3 text-xs",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:(b==null?void 0:b.following)||0}),n.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Following"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:(b==null?void 0:b.followers)||0}),n.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Followers"})]})]})]}),n.jsx(H5,{className:"bg-gray-200 dark:bg-gray-700"}),n.jsxs(xm,{onClick:()=>a(!0),className:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700","data-testid":"menu-item-view-profile",children:[n.jsx(wb,{className:"mr-2 h-4 w-4"}),n.jsx("span",{children:"View Profile"})]}),n.jsxs(xm,{onClick:()=>{a(!0),o(!0)},className:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700","data-testid":"menu-item-edit-profile",children:[n.jsx(Bh,{className:"mr-2 h-4 w-4"}),n.jsx("span",{children:"Edit Profile"})]}),n.jsx(H5,{className:"bg-gray-200 dark:bg-gray-700"}),n.jsxs(xm,{onClick:N,className:"cursor-pointer text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20","data-testid":"menu-item-logout",children:[n.jsx(bA,{className:"mr-2 h-4 w-4"}),n.jsx("span",{children:"Log out"})]})]})]}),n.jsx(bn,{open:s,onOpenChange:P=>{a(P),P||(o(!1),f((b==null?void 0:b.bio)||""),x((b==null?void 0:b.displayName)||""))},children:n.jsxs(pn,{className:"sm:max-w-lg bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:[n.jsxs(Zn,{children:[n.jsx(Xn,{className:"text-xl font-semibold text-gray-900 dark:text-white",children:i?"Edit Profile":"Profile"}),n.jsx(BA,{className:"text-sm text-gray-600 dark:text-gray-400",children:i?"Update your profile information":"Your profile details"})]}),n.jsxs("div",{className:"space-y-6 py-4",children:[n.jsx("div",{className:"flex justify-center",children:n.jsx(rc,{className:"h-24 w-24 border-4 border-gray-200 dark:border-gray-600",children:n.jsx(nc,{className:"bg-gradient-to-br from-blue-500 to-purple-500 text-white font-bold text-2xl",children:w(C)})})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Un,{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Display Name"}),i?n.jsx(Nr,{value:m,onChange:P=>x(P.target.value),className:"bg-white dark:bg-gray-700 border-gray-200 dark:border-gray-600",placeholder:"Your display name","data-testid":"input-display-name"}):n.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:(b==null?void 0:b.displayName)||"Not set"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Un,{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Username"}),n.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["@",T]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Un,{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Bio"}),i?n.jsx(qp,{value:h,onChange:P=>f(P.target.value),className:"bg-white dark:bg-gray-700 border-gray-200 dark:border-gray-600 min-h-[100px]",placeholder:"Tell us about yourself...",maxLength:200,"data-testid":"textarea-bio"}):n.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:(b==null?void 0:b.bio)||"No bio added yet"}),i&&n.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-right",children:[h.length,"/200"]})]}),n.jsxs("div",{className:"flex gap-6 py-4 border-t border-b border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(b==null?void 0:b.following)||0}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Following"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(b==null?void 0:b.followers)||0}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Followers"})]})]})]}),n.jsx("div",{className:"flex justify-end gap-2",children:i?n.jsxs(n.Fragment,{children:[n.jsx(H,{variant:"outline",onClick:()=>{o(!1),f((b==null?void 0:b.bio)||""),x((b==null?void 0:b.displayName)||"")},className:"bg-white dark:bg-gray-700 border-gray-200 dark:border-gray-600",children:"Cancel"}),n.jsx(H,{onClick:j,disabled:l,className:"bg-blue-600 hover:bg-blue-700 text-white","data-testid":"button-save-profile",children:l?n.jsxs(n.Fragment,{children:[n.jsx(Vo,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Bc,{className:"mr-2 h-4 w-4"}),"Save Changes"]})})]}):n.jsxs(H,{onClick:()=>o(!0),className:"bg-blue-600 hover:bg-blue-700 text-white",children:[n.jsx(Bh,{className:"mr-2 h-4 w-4"}),"Edit Profile"]})})]})})]})}function vTe({content:t,author:e,selectedPostIds:r=[],selectedPosts:s=[],timestamp:a,likes:i=0,comments:o=0,isLiked:l=!1,postId:d,isOwner:h=!1}){const[f,m]=g.useState(!1),[x,b]=g.useState(l),[j,N]=g.useState(i),[w,C]=g.useState(!1),[T,O]=g.useState(!1),[I,P]=g.useState(!1),A=g.useRef(null),{toast:R}=Ia(),B=qu(),[V,X]=g.useState(()=>{console.log(" AudioMinicastCard Initializing:",{selectedPostsCount:s.length,selectedPostIdsCount:r.length,hasPosts:s.length>0});const oe=[];return s.length>0&&(console.log(" Using selectedPosts with actual content"),s.forEach((U,W)=>{var pe,ge;U.content&&U.content.trim().length>0&&!U.content.startsWith("Selected Post")?(console.log(`  Card ${W+1}:`,{id:U.id,contentLength:((pe=U.content)==null?void 0:pe.length)||0,contentPreview:((ge=U.content)==null?void 0:ge.substring(0,50))+"..."}),oe.push({id:`post-${U.id}`,type:"post",content:U.content,postId:U.id,colorIndex:W%5})):console.log(`  Skipping card ${W+1}: No real content`)})),console.log(" Total content cards created:",oe.length),oe});g.useEffect(()=>{const oe=V[0],U=V.findIndex(W=>W.id===(oe==null?void 0:oe.id));if(oe&&oe.id!==A.current&&(A.current=oe.id,oe.type==="post"&&U>0)){window.speechSynthesis.cancel();const W=de(oe.content);console.log(" Auto-playing card (skipping first):",{cardId:oe.id,cardIndex:U,textLength:W.length,textPreview:W.substring(0,100)+"..."});const be=new SpeechSynthesisUtterance(W);be.rate=1,be.pitch=1,be.volume=1,be.onend=()=>{m(!1)},be.onerror=()=>{m(!1)},window.speechSynthesis.speak(be),m(!0)}},[V]),g.useEffect(()=>{if(I&&V.length>0&&V[0].id!==A.current){A.current=V[0].id;const oe=setTimeout(()=>{const U=V[0];if(U&&U.type==="post"){const W=de(U.content),be=new SpeechSynthesisUtterance(W);be.rate=1,be.pitch=1,be.volume=1,be.onend=()=>{m(!1)},be.onerror=()=>{m(!1)},window.speechSynthesis.speak(be),m(!0)}},100);return()=>clearTimeout(oe)}else V.length>0&&(A.current=V[0].id)},[V,I]);const ee=oe=>{const W=Math.floor((new Date().getTime()-oe.getTime())/(1e3*60*60));return W<1?"now":W<24?`${W}h`:`${Math.floor(W/24)}d`},Y=oe=>{window.speechSynthesis.cancel(),m(!1),P(!0),X(U=>{const W=[...U];if(oe==="right"){const be=W.shift();be&&W.push(be)}else{const be=W.pop();be&&W.unshift(be)}return W})},[re,le]=g.useState(0),te=oe=>{const U=[{from:"from-blue-500",to:"to-blue-600",label:"AUDIO MINICAST",icon:""},{from:"from-purple-500",to:"to-purple-600",label:"MINICAST 1",icon:""},{from:"from-pink-500",to:"to-pink-600",label:"MINICAST 2",icon:""},{from:"from-indigo-500",to:"to-indigo-600",label:"MINICAST 3",icon:""},{from:"from-cyan-500",to:"to-cyan-600",label:"MINICAST 4",icon:""}];return U[oe%U.length]},de=oe=>{let U=oe.replace(/https?:\/\/[^\s]+/gi,"").replace(/www\.[^\s]+/gi,"");return U=U.replace(/[^\x20-\x7E\s]/g,""),U.replace(/\s+/g," ").trim()},ie=()=>{if(P(!1),f)window.speechSynthesis.cancel(),m(!1);else{const oe=V[0];if(oe&&oe.type==="post"){const U=de(oe.content);console.log(" Playing audio:",{currentCardId:oe.id,currentCardType:oe.type,textLength:U.length,textPreview:U.substring(0,100)+"..."});const W=new SpeechSynthesisUtterance(U);W.rate=1,W.pitch=1,W.volume=1,W.onend=()=>{m(!1)},W.onerror=()=>{m(!1)},window.speechSynthesis.speak(W),m(!0)}}},Z=()=>{b(!x),N(oe=>x?oe-1:oe+1)},ne=async()=>{if(!d){R({description:"Unable to delete post",variant:"destructive"});return}O(!0);try{const oe=await ks();if(!oe)throw new Error("Not authenticated");if(!(await fetch(`/api/social-posts/${d}`,{method:"DELETE",headers:{Authorization:`Bearer ${oe}`}})).ok)throw new Error("Failed to delete post");R({description:"Audio post deleted successfully!"}),B.invalidateQueries({queryKey:["/api/social-posts"]}),C(!1)}catch(oe){console.error(" Error deleting audio post:",oe),R({description:oe.message||"Failed to delete post",variant:"destructive"})}finally{O(!1)}};return n.jsx(St,{className:"border-0 border-b border-gray-200 dark:border-gray-700 rounded-none overflow-hidden",children:n.jsxs(Kt,{className:"p-0",children:[n.jsxs("div",{className:"p-4 flex items-center gap-3 bg-gray-50 dark:bg-gray-800/50",children:[(()=>{const oe=e.avatar,U=oe&&oe.includes("s3.")&&!oe.includes("ui-avatars.com");return console.log(" AudioMinicastCard avatar debug:",{avatarUrl:oe,isValidAvatar:U}),n.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-400 to-blue-500 flex items-center justify-center text-white font-semibold overflow-hidden",children:U?n.jsx("img",{src:oe,alt:e.displayName,className:"w-full h-full object-cover"}):e.displayName.charAt(0)})})(),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:e.displayName}),n.jsx(Vg,{className:"h-3 w-3 text-purple-500"})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[n.jsxs("span",{children:["@",e.username]}),n.jsx("span",{children:""}),n.jsx("span",{children:ee(a)})]})]}),h&&d&&n.jsxs(lk,{children:[n.jsx(ck,{asChild:!0,children:n.jsx(H,{variant:"ghost",size:"icon",className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300","data-testid":"button-audio-post-menu",children:n.jsx(Gl,{className:"h-4 w-4"})})}),n.jsx(j1,{align:"end",children:n.jsxs(xm,{onClick:()=>C(!0),className:"text-red-600 dark:text-red-400 cursor-pointer","data-testid":"menu-item-delete-audio",children:[n.jsx(za,{className:"h-4 w-4 mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"bg-gray-50 dark:bg-gray-800/30 pb-6 flex items-center justify-center",children:n.jsx("div",{className:"relative w-28 h-40",style:{perspective:"1000px"},children:V.slice(0,5).map((oe,U)=>{const W=U===0,be=U===1,pe=U===2,ge=U===3,Ce=U===4,he=te(oe.colorIndex);let ue="",ce=1,Ee=40;if(!W){const Le=U*3,Ie=U*8,Ue=1-U*.03,Ae=U*-2;ue=`translateY(${Ie}px) translateX(${Ae}px) rotate(${Le}deg) scale(${Ue})`,ce=be?.95:pe?.85:ge?.75:Ce?.65:.5,Ee=be?30:pe?20:ge?15:Ce?10:5}return n.jsx("div",{"data-card-index":U,style:{transform:ue,transition:"transform 0.3s ease-out, opacity 0.3s ease-out",opacity:ce,zIndex:Ee},className:`absolute inset-0 ${W?"cursor-grab active:cursor-grabbing":""}`,onMouseDown:Le=>{if(!W)return;const Ie=Le.clientX,Ue=Le.clientY,Ae=Le.currentTarget;let We=!1;const ot=tr=>{const Ct=tr.clientX-Ie,we=tr.clientY-Ue;if(!We&&(Math.abs(Ct)>5||Math.abs(we)>5)&&(We=!0),We){const Fe=Ct*.1;Ae.style.transform=`translate(${Ct}px, ${we}px) rotate(${Fe}deg)`,Ae.style.opacity=String(Math.max(.3,1-Math.abs(Ct)/300)),le(Ct)}},It=tr=>{if(We){const Ct=tr.clientX-Ie;if(le(0),Math.abs(Ct)>40){const we=Ct>0?"right":"left";if(we==="right"){const Fe="150%",Ye="30deg";Ae.style.transform=`translate(${Fe}, ${Ct*.5}px) rotate(${Ye})`,Ae.style.opacity="0",setTimeout(()=>{Ae.style.transform="",Ae.style.opacity="",Y(we)},300)}else Ae.style.transform="",Ae.style.opacity="",Y(we),setTimeout(()=>{var Ye;const Fe=(Ye=Ae.parentElement)==null?void 0:Ye.querySelector('[data-card-index="0"]');Fe&&(Fe.style.transform="translate(150%, 0) rotate(30deg)",Fe.style.opacity="0",setTimeout(()=>{Fe.style.transform="",Fe.style.opacity="",Fe.style.transition="transform 300ms ease-out, opacity 300ms ease-out",setTimeout(()=>{Fe.style.transition=""},300)},10))},10)}else Ae.style.transform="",Ae.style.opacity=""}document.removeEventListener("mousemove",ot),document.removeEventListener("mouseup",It)};document.addEventListener("mousemove",ot),document.addEventListener("mouseup",It)},onTouchStart:Le=>{if(!W)return;const Ie=Le.touches[0].clientX,Ue=Le.touches[0].clientY,Ae=Le.currentTarget;let We=!1;const ot=tr=>{const Ct=tr.touches[0].clientX-Ie,we=tr.touches[0].clientY-Ue;if(!We&&(Math.abs(Ct)>5||Math.abs(we)>5)&&(We=!0),We){tr.preventDefault();const Fe=Ct*.1;Ae.style.transform=`translate(${Ct}px, ${we}px) rotate(${Fe}deg)`,Ae.style.opacity=String(Math.max(.3,1-Math.abs(Ct)/300)),le(Ct)}},It=tr=>{if(We){const Ct=tr.changedTouches[0].clientX-Ie;if(le(0),Math.abs(Ct)>40){const we=Ct>0?"right":"left";if(we==="right"){const Fe="150%",Ye="30deg";Ae.style.transform=`translate(${Fe}, ${Ct*.5}px) rotate(${Ye})`,Ae.style.opacity="0",setTimeout(()=>{Ae.style.transform="",Ae.style.opacity="",Y(we)},300)}else Ae.style.transform="",Ae.style.opacity="",Y(we),setTimeout(()=>{var Ye;const Fe=(Ye=Ae.parentElement)==null?void 0:Ye.querySelector('[data-card-index="0"]');Fe&&(Fe.style.transform="translate(150%, 0) rotate(30deg)",Fe.style.opacity="0",setTimeout(()=>{Fe.style.transform="",Fe.style.opacity="",Fe.style.transition="transform 300ms ease-out, opacity 300ms ease-out",setTimeout(()=>{Fe.style.transition=""},300)},10))},10)}else Ae.style.transform="",Ae.style.opacity=""}document.removeEventListener("touchmove",ot),document.removeEventListener("touchend",It)};document.addEventListener("touchmove",ot,{passive:!1}),document.addEventListener("touchend",It)},children:n.jsxs("div",{className:`bg-gradient-to-br ${he.from} ${he.to} rounded-xl p-3 h-full relative overflow-hidden border-2 border-white/10`,style:{boxShadow:W?"0 20px 40px rgba(0,0,0,0.4), 0 10px 20px rgba(0,0,0,0.3)":`0 ${8+U*4}px ${16+U*8}px rgba(0,0,0,${.3+U*.1})`},children:[n.jsx("div",{className:"absolute bottom-0 right-0 w-16 h-16 opacity-30",children:n.jsx("div",{className:"w-full h-full bg-gradient-to-br from-white/20 to-white/10 rounded-full"})}),n.jsxs("div",{className:"relative z-10 h-full flex flex-col justify-between",children:[n.jsx("div",{className:"flex flex-col items-center gap-1",children:n.jsx("div",{className:"text-[8px] text-white/80 uppercase tracking-wide font-medium",children:he.label})}),n.jsx("div",{className:"flex items-center justify-center",children:n.jsx("div",{className:"text-center",children:n.jsx("div",{className:"text-white font-bold text-sm leading-tight",children:e.displayName})})}),n.jsx("div",{className:"flex justify-center",children:n.jsx("button",{className:"bg-white text-gray-800 hover:bg-gray-100 px-3 py-1.5 rounded-full text-[10px] font-medium shadow-lg",onClick:Le=>{Le.stopPropagation(),W&&ie()},"data-testid":"button-play-audio-card",children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Ui,{className:"w-2.5 h-2.5"}),n.jsx("span",{children:f?"Playing":"Play Now"})]})})})]}),n.jsx("div",{className:"absolute top-2 right-2 text-sm filter drop-shadow-lg",children:he.icon}),!W&&n.jsx("div",{className:"absolute inset-0 bg-black/10 rounded-2xl"})]})},oe.id)})})}),n.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-gray-200 dark:border-gray-700",children:[n.jsxs(H,{variant:"ghost",size:"sm",className:"text-gray-500 hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20","data-testid":"button-comment-audio",children:[n.jsx(l0,{className:"h-5 w-5 mr-1"}),n.jsx("span",{className:"text-sm",children:o})]}),n.jsxs(H,{variant:"ghost",size:"sm",onClick:Z,className:`${x?"text-red-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20":"text-gray-500 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20"}`,"data-testid":"button-like-audio",children:[n.jsx(lb,{className:`h-5 w-5 mr-1 ${x?"fill-current":""}`}),n.jsx("span",{className:"text-sm",children:j})]}),n.jsx(H,{variant:"ghost",size:"sm",className:"text-gray-500 hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20","data-testid":"button-share-audio",children:n.jsx(Dq,{className:"h-5 w-5"})})]}),n.jsx(bn,{open:w,onOpenChange:C,children:n.jsxs(pn,{children:[n.jsx(Zn,{children:n.jsx(Xn,{children:"Delete Audio Post"})}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Are you sure you want to delete this audio minicast? This action cannot be undone."}),n.jsxs("div",{className:"flex gap-2 justify-end",children:[n.jsx(H,{variant:"outline",onClick:()=>C(!1),"data-testid":"button-cancel-delete-audio",children:"Cancel"}),n.jsx(H,{variant:"destructive",onClick:ne,disabled:T,"data-testid":"button-confirm-delete-audio",children:T?"Deleting...":"Delete"})]})]})})]})})}function bTe({snippets:t,onTap:e}){const[r,s]=g.useState([]),[a,i]=g.useState(0),[o,l]=g.useState(!1);g.useEffect(()=>{const h=r.map(x=>x.id),f=t.map(x=>x.id),m=t.filter(x=>!h.includes(x.id));if(m.length>0){l(!0);const x=m.map((b,j)=>({...b,colorIndex:(a+j)%5}));s(b=>[...x,...b.filter(j=>f.includes(j.id))]),i((a+m.length)%5),setTimeout(()=>l(!1),600)}else h.length!==f.length&&s(x=>x.filter(b=>f.includes(b.id)))},[t]);const d=h=>{const f=[{from:"from-blue-500",to:"to-blue-600"},{from:"from-purple-500",to:"to-purple-600"},{from:"from-pink-500",to:"to-pink-600"},{from:"from-indigo-500",to:"to-indigo-600"},{from:"from-cyan-500",to:"to-cyan-600"}];return f[h%f.length]};return r.length===0?null:n.jsxs("div",{className:"fixed bottom-24 right-4 z-40 cursor-pointer transition-all duration-300 md:bottom-4",onClick:e,"data-testid":"audio-selected-preview",children:[n.jsx("div",{className:"relative w-16 h-20",style:{perspective:"1000px"},children:r.slice(0,5).map((h,f)=>{const m=f===0,x=d(h.colorIndex);let b="",j=1,N=40;if(!m){const C=f*4,T=f*4,O=1-f*.05,I=f*-2;b=`translateY(${T}px) translateX(${I}px) rotate(${C}deg) scale(${O})`,j=1-f*.15,N=40-f*10}const w=o&&m?"translateY(-50px) scale(0.5) rotate(-15deg)":b;return n.jsxs("div",{className:`absolute inset-0 bg-gradient-to-br ${x.from} ${x.to} rounded-lg shadow-lg border-2 border-white dark:border-gray-800 transition-all hover:scale-105`,style:{transform:w,opacity:j,zIndex:N,transition:o&&m?"transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.5s ease-out":"transform 0.3s ease-out, opacity 0.3s ease-out"},children:[m&&r.length>1&&n.jsx("div",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center shadow-md",children:r.length}),n.jsx("div",{className:"p-2 h-full flex flex-col justify-center items-center",children:n.jsx("div",{className:"text-white text-xs font-bold text-center leading-tight",children:m?"":""})})]},h.id)})}),n.jsx("div",{className:"absolute inset-0 rounded-lg animate-pulse opacity-30 pointer-events-none",children:n.jsx("div",{className:"absolute inset-0 bg-purple-500 rounded-lg"})})]})}function wTe(t){const e=new Date(t),s=new Date().getTime()-e.getTime(),a=Math.floor(s/6e4),i=Math.floor(s/36e5),o=Math.floor(s/864e5);return a<1?"now":a<60?`${a}m`:i<24?`${i}h`:o<7?`${o}d`:e.toLocaleDateString()}function NTe({content:t}){const e=/@(\w+)/g,r=[];let s=0,a;for(;(a=e.exec(t))!==null;)a.index>s&&r.push(t.slice(s,a.index)),r.push(n.jsxs("span",{className:"text-blue-500 dark:text-blue-400 hover:underline cursor-pointer font-medium",onClick:()=>console.log(`Navigate to @${a[1]}`),children:["@",a[1]]},a.index)),s=a.index+a[0].length;return s<t.length&&r.push(t.slice(s)),n.jsx(n.Fragment,{children:r})}function jTe({post:t,isVisible:e,onClose:r,onCommentAdded:s}){var ne,oe;const[a,i]=g.useState(""),[o,l]=g.useState(null),[d,h]=g.useState(""),[f,m]=g.useState(!1),[x,b]=g.useState([]),[j,N]=g.useState(0),[w,C]=g.useState(0),T=g.useRef(null),O=g.useRef(null),{toast:I}=Ia(),P=qu(),{getUserDisplayName:A,getUsername:R}=h1(),{data:B=[],isLoading:V,refetch:X}=xn({queryKey:[`/api/social-posts/${t.id}/comments`],queryFn:async()=>{const U=await fetch(`/api/social-posts/${t.id}/comments`);if(!U.ok)throw new Error("Failed to fetch comments");return U.json()},enabled:e,staleTime:3e4}),ee=async U=>{if(!U||U.length<1){b([]);return}try{const W=await fetch(`/api/users/search?q=${encodeURIComponent(U)}&limit=5`);if(W.ok){const be=await W.json();b(be),C(0)}}catch(W){console.error("Error searching users:",W)}},Y=U=>{const W=U.target.value,be=U.target.selectionStart||0;i(W),N(be);const ge=W.slice(0,be).match(/@(\w*)$/);if(ge){const Ce=ge[1];h(Ce),m(!0),ee(Ce)}else m(!1),h("")},re=U=>{!f||x.length===0||(U.key==="ArrowDown"?(U.preventDefault(),C(W=>W<x.length-1?W+1:0)):U.key==="ArrowUp"?(U.preventDefault(),C(W=>W>0?W-1:x.length-1)):U.key==="Enter"&&!U.shiftKey?(U.preventDefault(),le(x[w])):U.key==="Escape"&&m(!1))},le=U=>{const W=a.slice(0,j),be=a.slice(j),pe=W.match(/@(\w*)$/);if(pe){const ge=W.slice(0,pe.index),Ce=`${ge}@${U.username} ${be}`;i(Ce),m(!1),setTimeout(()=>{if(T.current){const he=ge.length+U.username.length+2;T.current.focus(),T.current.setSelectionRange(he,he)}},0)}},te=yo({mutationFn:async U=>{const W=R()||localStorage.getItem("currentUsername")||"anonymous",be=A()||W,ge=await fetch(`/api/social-posts/${t.id}/comments/aws`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:U,authorUsername:W,authorDisplayName:be,authorAvatar:null})});if(!ge.ok){const Ce=await ge.json();throw new Error(Ce.error||"Failed to add comment")}return ge.json()},onSuccess:()=>{s&&s(),P.invalidateQueries({queryKey:[`/api/social-posts/${t.id}/comments`]}),P.invalidateQueries({queryKey:["/api/social-posts"]}),i(""),I({description:"Comment added!"}),X()},onError:U=>{I({description:U.message||"Failed to add comment",variant:"destructive"})}}),de=yo({mutationFn:async U=>{const W=R()||localStorage.getItem("currentUsername"),be=await fetch(`/api/comments/${U}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({authorUsername:W})});if(!be.ok)throw new Error("Failed to delete comment");return be.json()},onSuccess:()=>{P.invalidateQueries({queryKey:[`/api/social-posts/${t.id}/comments`]}),l(null),I({description:"Comment deleted"})},onError:()=>{I({description:"Failed to delete comment",variant:"destructive"})}}),ie=U=>{U.preventDefault(),a.trim()&&!f&&te.mutate(a.trim())};if(g.useEffect(()=>{const U=W=>{O.current&&!O.current.contains(W.target)&&m(!1)};return document.addEventListener("mousedown",U),()=>document.removeEventListener("mousedown",U)},[]),!e)return null;const Z=R()||localStorage.getItem("currentUsername");return n.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4 overflow-x-hidden","data-testid":`comment-section-${t.id}`,children:[V&&n.jsx("div",{className:"flex justify-center py-4",children:n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"})}),B.length>0&&n.jsx("div",{className:"mb-4",children:n.jsx("div",{className:"max-h-80 overflow-y-auto overflow-x-hidden space-y-3",children:B.map(U=>{var be,pe,ge,Ce,he;const W=((be=U.authorUsername)==null?void 0:be.toLowerCase())===(Z==null?void 0:Z.toLowerCase());return n.jsx("div",{className:"relative group","data-testid":`comment-${U.id}`,children:n.jsxs("div",{className:"flex items-start gap-3 px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-800/50 rounded-lg transition-colors",children:[n.jsxs(rc,{className:"w-8 h-8 flex-shrink-0",children:[U.authorAvatar?n.jsx(sf,{src:U.authorAvatar,alt:U.authorDisplayName}):null,n.jsx(nc,{className:"text-xs bg-gradient-to-br from-blue-500 to-purple-500 text-white",children:((ge=(pe=U.authorDisplayName)==null?void 0:pe[0])==null?void 0:ge.toUpperCase())||((he=(Ce=U.authorUsername)==null?void 0:Ce[0])==null?void 0:he.toUpperCase())||"U"})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[n.jsx("span",{className:"font-semibold text-sm text-gray-900 dark:text-white",children:U.authorDisplayName||U.authorUsername||"Anonymous"}),n.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["@",U.authorUsername]}),n.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:wTe(U.createdAt)})]}),n.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 break-words leading-relaxed",children:n.jsx(NTe,{content:U.content})})]}),W&&n.jsxs("div",{className:"relative opacity-0 group-hover:opacity-100 transition-opacity",children:[n.jsx("button",{onClick:()=>l(o===U.id?null:U.id),className:"p-1.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-full transition-colors","data-testid":`button-comment-menu-${U.id}`,children:n.jsx(_q,{className:"h-4 w-4 text-gray-400"})}),o===U.id&&n.jsx("div",{className:"absolute right-0 top-8 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-xl py-1 z-50 min-w-[100px]",children:n.jsxs("button",{onClick:()=>de.mutate(U.id),disabled:de.isPending,className:"flex items-center gap-2 px-3 py-2 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 w-full text-left","data-testid":`button-delete-comment-${U.id}`,children:[n.jsx(za,{className:"h-4 w-4"}),de.isPending?"Deleting...":"Delete"]})})]})]})},U.id)})})}),!V&&B.length===0&&n.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400 text-sm",children:"No comments yet. Be the first to comment!"}),n.jsx("form",{onSubmit:ie,className:"relative",children:n.jsxs("div",{className:"flex items-start gap-3 px-3",children:[n.jsx(rc,{className:"w-8 h-8 flex-shrink-0",children:n.jsx(nc,{className:"text-xs bg-gradient-to-br from-green-500 to-blue-500 text-white",children:((oe=(ne=A())==null?void 0:ne[0])==null?void 0:oe.toUpperCase())||"U"})}),n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(qp,{ref:T,placeholder:"Write a comment... Use @ to mention someone",value:a,onChange:Y,onKeyDown:re,className:"min-h-[50px] text-sm bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-600 resize-none rounded-xl pr-16",disabled:te.isPending,"data-testid":`input-comment-${t.id}`}),f&&x.length>0&&n.jsx("div",{ref:O,className:"absolute bottom-full left-0 mb-1 w-full max-w-xs bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-xl z-50 overflow-hidden",children:n.jsx("div",{className:"py-1",children:x.map((U,W)=>{var be,pe,ge,Ce;return n.jsxs("button",{type:"button",onClick:()=>le(U),className:`w-full flex items-center gap-3 px-3 py-2 text-left transition-colors ${W===w?"bg-blue-50 dark:bg-blue-900/30":"hover:bg-gray-50 dark:hover:bg-gray-700"}`,"data-testid":`mention-suggestion-${U.username}`,children:[n.jsxs(rc,{className:"w-8 h-8",children:[U.avatar?n.jsx(sf,{src:U.avatar,alt:U.displayName}):null,n.jsx(nc,{className:"text-xs bg-gradient-to-br from-purple-500 to-pink-500 text-white",children:((pe=(be=U.displayName)==null?void 0:be[0])==null?void 0:pe.toUpperCase())||((Ce=(ge=U.username)==null?void 0:ge[0])==null?void 0:Ce.toUpperCase())})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-medium text-sm text-gray-900 dark:text-white truncate",children:U.displayName}),n.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:["@",U.username]})]})]},`${U.username}-${W}`)})})}),n.jsx(H,{type:"submit",size:"icon",disabled:!a.trim()||te.isPending,className:"absolute right-2 bottom-2 h-8 w-8 rounded-full bg-blue-500 hover:bg-blue-600 text-white disabled:opacity-50","data-testid":`button-submit-comment-${t.id}`,children:te.isPending?n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):n.jsx(X2,{className:"h-4 w-4"})})]})]})})]})}function STe({isOpen:t,onClose:e,post:r}){const{toast:s}=Ia(),a=`${window.location.origin}/post/${r.id}`,o=[{name:"Copy Link",icon:Bi,action:async()=>{try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(a),s({description:"Link copied to clipboard!"});else{const l=document.createElement("textarea");l.value=a,document.body.appendChild(l),l.focus(),l.select(),document.execCommand("copy"),document.body.removeChild(l),s({description:"Link copied to clipboard!"})}e()}catch(l){console.error("Copy failed:",l),s({description:"Failed to copy link",variant:"destructive"})}},description:"Copy post link to clipboard"},{name:"Open in New Tab",icon:vb,action:()=>{window.open(a,"_blank"),e()},description:"Open post in new tab"}];return n.jsx(bn,{open:t,onOpenChange:e,children:n.jsxs(pn,{className:"max-w-md transition-none",children:[n.jsx(Zn,{children:n.jsx(Xn,{children:"Share Post"})}),n.jsx("div",{className:"space-y-2",children:o.map(l=>n.jsxs(H,{variant:"ghost",className:"w-full justify-start gap-3 p-4 h-auto",onClick:l.action,children:[n.jsx(l.icon,{className:"h-5 w-5"}),n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:"font-medium",children:l.name}),n.jsx("div",{className:"text-sm text-muted-foreground",children:l.description})]})]},l.name))})]})})}function kTe({ticker:t,analysisData:e}){const[r,s]=g.useState("1D"),{data:a=[],isLoading:i}=xn({queryKey:["stock-chart",t,r],queryFn:()=>fetch(`/api/stock-chart-data/${t}?timeframe=${r}`).then(w=>w.json()),refetchInterval:r==="1D"?6e4:3e5,staleTime:r==="1D"?3e4:18e4,gcTime:6e5,refetchOnMount:!1,refetchOnWindowFocus:!1}),l=(()=>{var w;return a&&a.length>0?((w=a[a.length-1])==null?void 0:w.price)||e.priceData.close||0:e.priceData.close||0})(),h=(()=>{var w,C,T,O,I,P;if(!a||a.length===0)return e.priceData.open||l;switch(r){case"1D":return((w=a[0])==null?void 0:w.price)||e.priceData.open||l;case"5D":return((C=a[0])==null?void 0:C.price)||l;case"1M":return((T=a[0])==null?void 0:T.price)||l;case"6M":return((O=a[0])==null?void 0:O.price)||l;case"1Y":return((I=a[0])==null?void 0:I.price)||l;default:return((P=a[0])==null?void 0:P.price)||l}})(),f=l-h,m=h!==0?(f/h*100).toFixed(2):"0.00",x=f>=0,j=(()=>{var A;if(!a||a.length===0)return{open:e.priceData.open||0,high:e.priceData.high||0,low:e.priceData.low||0,volume:e.priceData.volume||"N/A"};const w=a.map(R=>Number(R.price)||0),C=a.map(R=>Number(R.volume)||0),T=((A=a[0])==null?void 0:A.price)||w[0]||0,O=Math.max(...w),I=Math.min(...w),P=C.reduce((R,B)=>R+B,0);return{open:T,high:O,low:I,volume:P>0?(P/1e5).toFixed(2)+"L":"N/A"}})(),N=["1D","5D","1M","6M","1Y"];return n.jsxs("div",{children:[n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("div",{className:"text-green-400 text-sm",children:""}),n.jsx("span",{className:"text-green-400 font-medium",children:"Price Chart"})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("div",{className:"flex items-baseline gap-2",children:[n.jsxs("span",{className:"text-gray-900 dark:text-white text-xl font-bold",children:["",l.toFixed(2)]}),n.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"INR"})]}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsxs("span",{className:`text-sm font-medium ${x?"text-green-400":"text-red-400"}`,children:[x?"":""," ",Math.abs(f).toFixed(2)," (",x?"+":"",m,"%)"]}),n.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:r==="1D"?"vs prev close":r==="5D"?"vs 5 days ago":r==="1M"?"vs 1 month ago":r==="6M"?"vs 6 months ago":r==="1Y"?"vs 1 year ago":"today"})]})]}),n.jsx("div",{className:"flex gap-1 mb-3",children:N.map(w=>n.jsx(H,{variant:r===w?"default":"ghost",size:"sm",onClick:()=>s(w),className:`px-3 py-1 text-xs ${r===w?"bg-blue-600 hover:bg-blue-700 text-white":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:w},w))}),n.jsx("div",{className:"w-full h-56 mb-4 bg-gray-100 dark:bg-gray-900/40 rounded-lg",children:i?n.jsx("div",{className:"flex items-center justify-center h-full w-full",children:n.jsxs("div",{className:"text-gray-500 dark:text-gray-400 text-sm flex items-center gap-2",children:[n.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-gray-300 dark:border-gray-600 border-t-blue-500 rounded-full"}),"Loading real ",r," chart data..."]})}):a&&a.length>0?n.jsx("div",{className:"w-full h-full flex items-center justify-center",children:n.jsx(yi,{width:"100%",height:"100%",children:n.jsxs(Dd,{data:a,margin:{top:5,right:20,left:0,bottom:5},children:[n.jsx(Sa,{dataKey:"time",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"#64748b"},tickCount:8}),n.jsx(ma,{domain:[w=>{const C=a.map(O=>Number(O.price)||0),T=Math.min(...C);return Math.floor(T-T*.01)},w=>{const C=a.map(O=>Number(O.price)||0),T=Math.max(...C);return Math.ceil(T+T*.01)}],axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"#64748b"},width:35}),n.jsx(zs,{content:({active:w,payload:C,label:T})=>{if(!w||!C||!C.length)return null;const O=C[0].value;return n.jsxs("div",{style:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"6px",color:"#e2e8f0",padding:"8px 16px",fontSize:"13px",minWidth:"140px",boxShadow:"0 4px 12px rgba(0,0,0,0.4)",display:"flex",alignItems:"center",gap:"12px"},children:[n.jsxs("span",{style:{fontSize:"13px",fontWeight:"500"},children:["",Number(O).toFixed(2)]}),n.jsx("div",{style:{width:"1px",height:"20px",backgroundColor:"#475569"}}),n.jsx("span",{style:{fontSize:"12px",color:"#94a3b8"},children:T})]})}}),n.jsx(Is,{type:"linear",dataKey:"price",stroke:x?"#10b981":"#ef4444",strokeWidth:2,dot:!1,activeDot:{r:4,fill:x?"#10b981":"#ef4444"}}),n.jsx(nf,{y:h,stroke:"#64748b",strokeDasharray:"2 2",strokeWidth:1})]})})}):n.jsx("div",{className:"flex items-center justify-center h-full w-full",children:n.jsxs("div",{className:"text-gray-500 dark:text-gray-400 text-sm text-center",children:[n.jsx("div",{className:"mb-1",children:"No chart data available"}),n.jsx("p",{className:"text-xs",children:"Try selecting a different timeframe"})]})})})]}),n.jsx("div",{children:n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Open"}),n.jsxs("span",{className:"text-gray-900 dark:text-white",children:["",Number(j.open).toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"High"}),n.jsxs("span",{className:"text-gray-900 dark:text-white",children:["",Number(j.high).toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Low"}),n.jsxs("span",{className:"text-gray-900 dark:text-white",children:["",Number(j.low).toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Vol"}),n.jsx("span",{className:"text-gray-900 dark:text-white",children:j.volume})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"52W High"}),n.jsxs("span",{className:"text-gray-900 dark:text-white",children:["",Number(e.priceData.high52W).toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"52W Low"}),n.jsxs("span",{className:"text-gray-900 dark:text-white",children:["",Number(e.priceData.low52W).toFixed(2)]})]})]})})]})}function l3({onAllClick:t,isRefreshing:e,selectedFilter:r,onFilterChange:s,searchQuery:a,setSearchQuery:i,onSearch:o,showAppBar:l,onBackClick:d}){const[h,f]=g.useState(!1),[m,x]=g.useState(""),b=N=>{const w=N.target.value;i(w)},j=()=>{a.trim(),o()};return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-50 shadow-sm",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4",children:[n.jsxs("div",{className:`flex items-center justify-between mb-4 transition-all duration-300 ${l?"md:flex":"md:flex hidden"}`,children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center border border-gray-200 dark:border-gray-600",children:n.jsx("div",{className:"text-gray-700 dark:text-gray-300 font-bold text-sm",children:""})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-gray-900 dark:text-white font-bold text-xl",children:"NeoFeed"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm font-medium",children:"AI-Powered Trading Network"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(H,{variant:"ghost",size:"sm",className:"text-gray-700 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:n.jsx(Pq,{className:"h-5 w-5"})}),n.jsx(yTe,{})]})]}),n.jsxs("div",{className:"relative mb-4",children:[n.jsx(Zl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-400 h-4 w-4"}),n.jsx(Nr,{placeholder:"Ask me about stocks, market news, IPOs, trading strategies...",value:a,onChange:b,onKeyPress:N=>N.key==="Enter"&&j(),className:"pl-10 pr-20 py-2 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:border-blue-500 focus:ring-blue-500","data-testid":"input-neo-feed-search"}),n.jsx("div",{className:"absolute right-1 top-1/2 transform -translate-y-1/2 flex items-center gap-1",children:a.trim()&&n.jsx(H,{onClick:j,size:"sm",className:"h-7 w-7 p-0 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-md flex items-center justify-center",children:n.jsx(Zl,{className:"h-3.5 w-3.5"})})})]}),n.jsxs("div",{className:"flex items-center justify-between gap-2 pb-2",children:[n.jsx("div",{className:"flex gap-2 overflow-x-auto",children:["All","Bullish","Bearish","Profile"].map((N,w)=>n.jsx(H,{onClick:N==="All"?t:()=>s(N),variant:r===N?"default":"ghost",disabled:N==="All"&&e,className:`px-4 py-2 rounded-full whitespace-nowrap ${r===N?`bg-blue-600 hover:bg-blue-700 text-white ${N==="All"&&e?"opacity-80":""}`:"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[w===0&&e&&n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),N]})},N))}),d&&n.jsx(H,{onClick:d,variant:"ghost",size:"icon",className:"lg:hidden flex-shrink-0 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full","data-testid":"button-back-to-home",children:n.jsx(my,{className:"h-5 w-5"})})]})]})}),n.jsx(n4e,{isOpen:h,onClose:()=>f(!1),initialQuery:m})]})}function CTe(){const[t,e]=g.useState("Posts"),[r,s]=g.useState(!1),[a,i]=g.useState(!1),[o,l]=g.useState(!1),[d,h]=g.useState(!1),[f,m]=g.useState("profile"),[x,b]=g.useState(null),[j,N]=g.useState(!1),w=g.useRef(null),C=g.useRef(null),{toast:T}=Ia(),O=qu(),{data:I,isLoading:P}=xn({queryKey:["my-profile"],queryFn:async()=>{const pe=await ks();if(!pe)return null;const ge=await fetch("/api/user/profile",{headers:{Authorization:`Bearer ${pe}`}});return ge.ok&&(await ge.json()).profile||null},staleTime:300*1e3,gcTime:600*1e3,refetchOnMount:!1,refetchOnWindowFocus:!1}),A=(I==null?void 0:I.username)||"",{data:R={followers:0,following:0}}=xn({queryKey:["profile-stats",A],queryFn:async()=>{if(!A)return{followers:0,following:0};console.log(` Fetching stats for: ${A}`);const pe=await fetch(`/api/profile/${A}/stats`);if(!pe.ok)return{followers:0,following:0};const ge=await pe.json();return console.log(" Stats received:",ge),ge},enabled:!!A,staleTime:120*1e3,gcTime:300*1e3,refetchOnMount:!1,refetchOnWindowFocus:!1}),{data:B={followers:[]}}=xn({queryKey:["followers-list",A],queryFn:async()=>{if(!A)return{followers:[]};const pe=await fetch(`/api/users/${A}/followers-list`);return pe.ok?pe.json():{followers:[]}},enabled:!!A&&a}),{data:V={following:[]}}=xn({queryKey:["following-list",A],queryFn:async()=>{if(!A)return{following:[]};const pe=await fetch(`/api/users/${A}/following-list`);return pe.ok?pe.json():{following:[]}},enabled:!!A&&o}),{data:X=[],isLoading:ee}=xn({queryKey:["user-posts",A],queryFn:async()=>{if(!A)return[];console.log(` Fetching posts for user: ${A}`);const pe=await fetch(`/api/social-posts/by-user/${A}`);if(!pe.ok)throw new Error("Failed to fetch user posts");const ge=await pe.json();return console.log(` Received ${ge.length} posts for ${A}`),ge},enabled:!!A,staleTime:3e4}),{data:Y={}}=xn({queryKey:["my-votes"],queryFn:async()=>{const pe=await ks();if(!pe)return{};const ge=await fetch("/api/user/votes",{headers:{Authorization:`Bearer ${pe}`}});if(!ge.ok)return{};const Ce=await ge.json(),he={};return Ce.votes&&Array.isArray(Ce.votes)&&Ce.votes.forEach(ue=>{he[ue.postId]={uptrend:ue.voteType==="uptrend",downtrend:ue.voteType==="downtrend"}}),he},enabled:!!A,staleTime:1e4}),re=X.filter(pe=>Y[pe.id]),le=X.length,te=(I==null?void 0:I.displayName)||"",de=(I==null?void 0:I.bio)||"",ie=(R==null?void 0:R.followers)||0,Z=(R==null?void 0:R.following)||0,ne=I==null?void 0:I.profilePicUrl,oe=I==null?void 0:I.coverPicUrl,U=te?te.charAt(0).toUpperCase():A.charAt(0).toUpperCase(),W=(pe,ge)=>{var ue;const Ce=(ue=pe.target.files)==null?void 0:ue[0];if(!Ce)return;const he=new FileReader;he.onloadend=()=>{b(he.result),m(ge),h(!0)},he.readAsDataURL(Ce)},be=async pe=>{N(!0);try{const ge=new FormData;ge.append("file",pe,`${f}-image.jpg`),ge.append("type",f);const Ce=await ks(),he=await fetch("/api/upload-profile-image",{method:"POST",headers:{Authorization:`Bearer ${Ce}`},body:ge}),ue=await he.json();if(!he.ok||ue.error)throw console.error("Image upload failed:",ue),new Error(ue.details||ue.message||"Upload failed");const{url:ce}=ue;if(!ce||ce.includes("ui-avatars.com"))throw new Error("Image storage failed. Please try again.");if(!(await fetch("/api/user/profile",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ce}`},body:JSON.stringify({[f==="profile"?"profilePicUrl":"coverPicUrl"]:ce})})).ok)throw new Error("Failed to update profile");T({description:`${f==="profile"?"Profile":"Cover"} photo updated successfully!`}),O.invalidateQueries({queryKey:["my-profile"]}),h(!1),b(null)}catch(ge){console.error("Image upload error:",ge),T({description:(ge==null?void 0:ge.message)||"Failed to upload image. Please try again.",variant:"destructive"})}finally{N(!1)}};return P?n.jsxs("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 mb-6 animate-pulse",children:[n.jsx("div",{className:"h-48 bg-gray-300 dark:bg-gray-700"}),n.jsxs("div",{className:"pt-20 px-4 pb-4",children:[n.jsx("div",{className:"h-8 bg-gray-300 dark:bg-gray-700 rounded w-48 mb-2"}),n.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-700 rounded w-32"})]})]}):n.jsxs(n.Fragment,{children:[n.jsx("input",{ref:C,type:"file",accept:"image/*",className:"hidden",onChange:pe=>W(pe,"cover"),"data-testid":"input-cover-image-hidden"}),n.jsx("input",{ref:w,type:"file",accept:"image/*",className:"hidden",onChange:pe=>W(pe,"profile"),"data-testid":"input-profile-image-hidden"}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 mb-6",children:[n.jsxs("div",{className:`h-48 relative overflow-visible ${oe?"bg-black":"bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500"}`,children:[oe&&n.jsx("img",{src:oe,alt:"Cover",className:"w-full h-full object-contain"}),n.jsx("button",{onClick:()=>{var pe;return(pe=C.current)==null?void 0:pe.click()},className:"absolute top-4 right-4 bg-black/50 hover:bg-black/70 text-white rounded-full p-2 transition-colors",disabled:j,"data-testid":"button-edit-cover",children:n.jsx(cj,{className:"w-5 h-5"})}),n.jsx("div",{className:"absolute -bottom-16 left-4 z-20",children:n.jsxs("div",{className:"relative group",children:[n.jsx(rc,{className:"w-32 h-32 border-4 border-white dark:border-gray-800 overflow-hidden",children:ne?n.jsx(sf,{src:ne}):n.jsx(nc,{className:"bg-gradient-to-br from-blue-600 to-purple-600 text-white text-4xl font-bold",children:U})}),n.jsx("button",{onClick:()=>{var pe;return(pe=w.current)==null?void 0:pe.click()},className:"absolute inset-0 flex items-center justify-center bg-black/40 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",disabled:j,"data-testid":"button-edit-profile-pic",children:n.jsx(cj,{className:"w-8 h-8 text-white"})})]})})]}),n.jsxs("div",{className:"pt-24 px-4 pb-4",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-gray-900 dark:text-white font-bold text-2xl flex items-center gap-2",children:[te||A,(I==null?void 0:I.verified)&&n.jsx(Bc,{className:"w-6 h-6 text-blue-600 dark:text-blue-400 fill-current"})]}),n.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["@",A]})]}),n.jsx(H,{variant:"outline",className:"rounded-full px-6 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>s(!0),"data-testid":"button-edit-profile",children:"Edit profile"})]}),de&&n.jsx("p",{className:"text-gray-900 dark:text-white mb-4 text-base",children:de}),n.jsxs("div",{className:"flex flex-wrap gap-4 text-gray-600 dark:text-gray-400 text-sm mb-4",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Oq,{className:"w-4 h-4"}),n.jsx("span",{children:"India"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(wm,{className:"w-4 h-4"}),n.jsxs("span",{children:["Joined ",new Date().getFullYear()]})]})]}),n.jsxs("div",{className:"flex gap-4 text-sm mb-4",children:[n.jsxs("button",{className:"hover:underline",onClick:()=>l(!0),"data-testid":"button-show-following",children:[n.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:Z}),n.jsx("span",{className:"text-gray-600 dark:text-gray-400 ml-1",children:"Following"})]}),n.jsxs("button",{className:"hover:underline",onClick:()=>i(!0),"data-testid":"button-show-followers",children:[n.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:ie}),n.jsx("span",{className:"text-gray-600 dark:text-gray-400 ml-1",children:"Followers"})]})]}),n.jsx("div",{className:"flex gap-8 border-b border-gray-200 dark:border-gray-700",children:[`Posts ${le>0?`(${le})`:""}`,"Media","Likes"].map(pe=>n.jsxs("button",{onClick:()=>e(pe.split(" ")[0]),className:`pb-3 px-2 font-medium transition-colors relative ${t===pe.split(" ")[0]?"text-gray-900 dark:text-white":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,"data-testid":`button-tab-${pe.split(" ")[0].toLowerCase()}`,children:[pe,t===pe.split(" ")[0]&&n.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-blue-600 rounded-t-full"})]},pe))})]})]}),t==="Posts"&&n.jsx("div",{className:"space-y-4 mb-6",children:ee?n.jsx("div",{className:"space-y-4",children:[1,2,3].map(pe=>n.jsx(St,{className:"p-4 animate-pulse",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-gray-300 dark:bg-gray-700 rounded-full"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-700 rounded w-24 mb-2"}),n.jsx("div",{className:"h-3 bg-gray-300 dark:bg-gray-700 rounded w-full mb-1"}),n.jsx("div",{className:"h-3 bg-gray-300 dark:bg-gray-700 rounded w-3/4"})]})]})},pe))}):X.length===0?n.jsx(St,{className:"p-8 text-center",children:n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No posts yet. Share your first trading insight!"})}):X.map(pe=>n.jsx(N2,{post:pe,currentUserUsername:A},pe.id))}),t==="Likes"&&n.jsx("div",{className:"space-y-4 mb-6",children:ee?n.jsx("div",{className:"space-y-4",children:[1,2,3].map(pe=>n.jsx(St,{className:"p-4 animate-pulse",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-gray-300 dark:bg-gray-700 rounded-full"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-700 rounded w-24 mb-2"}),n.jsx("div",{className:"h-3 bg-gray-300 dark:bg-gray-700 rounded w-full mb-1"}),n.jsx("div",{className:"h-3 bg-gray-300 dark:bg-gray-700 rounded w-3/4"})]})]})},pe))}):re.length===0?n.jsx(St,{className:"p-8 text-center",children:n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No liked posts yet. Like posts by tapping the voting button!"})}):re.map(pe=>n.jsx(N2,{post:pe,currentUserUsername:A},pe.id))}),n.jsx(TTe,{isOpen:r,onClose:()=>s(!1),profileData:I,onSuccess:()=>{s(!1),window.location.reload()}}),n.jsx(bn,{open:a,onOpenChange:i,children:n.jsxs(pn,{className:"max-w-md max-h-[80vh] overflow-y-auto",children:[n.jsx(Zn,{children:n.jsxs(Xn,{className:"flex items-center gap-2",children:[n.jsx(Uo,{className:"w-5 h-5"}),"Followers"]})}),n.jsx("div",{className:"space-y-3 mt-4",children:B.followers.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[n.jsx(Uo,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),n.jsx("p",{children:"No followers yet"})]}):B.followers.map(pe=>n.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors cursor-pointer","data-testid":`follower-${pe.id}`,children:[n.jsx(rc,{className:"w-10 h-10",children:pe.avatar?n.jsx(sf,{src:pe.avatar}):n.jsx(nc,{className:"bg-gradient-to-br from-blue-600 to-purple-600 text-white font-bold",children:(pe.displayName||pe.username||"U").charAt(0).toUpperCase()})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:pe.displayName||pe.username}),n.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["@",pe.username]})]})]},pe.id))})]})}),n.jsx(bn,{open:o,onOpenChange:l,children:n.jsxs(pn,{className:"max-w-md max-h-[80vh] overflow-y-auto",children:[n.jsx(Zn,{children:n.jsxs(Xn,{className:"flex items-center gap-2",children:[n.jsx(Ub,{className:"w-5 h-5"}),"Following"]})}),n.jsx("div",{className:"space-y-3 mt-4",children:V.following.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[n.jsx(Ub,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),n.jsx("p",{children:"Not following anyone yet"})]}):V.following.map(pe=>n.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors cursor-pointer","data-testid":`following-${pe.id}`,children:[n.jsx(rc,{className:"w-10 h-10",children:pe.avatar?n.jsx(sf,{src:pe.avatar}):n.jsx(nc,{className:"bg-gradient-to-br from-blue-600 to-purple-600 text-white font-bold",children:(pe.displayName||pe.username||"U").charAt(0).toUpperCase()})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:pe.displayName||pe.username}),n.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["@",pe.username]})]})]},pe.id))})]})}),n.jsx(ETe,{isOpen:d,onClose:()=>{h(!1),b(null)},imageSrc:x,imageType:f,onSave:be,uploading:j})]})}function ETe({isOpen:t,onClose:e,imageSrc:r,imageType:s,onSave:a,uploading:i}){const[o,l]=g.useState(1),[d,h]=g.useState({x:0,y:0}),[f,m]=g.useState(!1),[x,b]=g.useState({x:0,y:0}),j=g.useRef(null),N=g.useRef(null),w=g.useRef(null);g.useEffect(()=>{t&&(l(1),h({x:0,y:0}))},[t,r]),g.useEffect(()=>{if(r){const V=new Image;V.onload=()=>{N.current=V},V.src=r}},[r]);const C=V=>{m(!0),b({x:V.clientX-d.x,y:V.clientY-d.y})},T=V=>{f&&h({x:V.clientX-x.x,y:V.clientY-x.y})},O=()=>{m(!1)},I=V=>{V.touches.length===1&&(m(!0),b({x:V.touches[0].clientX-d.x,y:V.touches[0].clientY-d.y}))},P=V=>{!f||V.touches.length!==1||h({x:V.touches[0].clientX-x.x,y:V.touches[0].clientY-x.y})},A=()=>{m(!1)},R=()=>{if(!N.current||!j.current||!w.current)return;const V=j.current,X=V.getContext("2d");if(!X)return;const ee=N.current,Y=w.current;s==="profile"?(V.width=400,V.height=400):(V.width=1500,V.height=500),X.fillStyle="#000",X.fillRect(0,0,V.width,V.height);const re=Y.getBoundingClientRect(),le=re.width,te=re.height,de=ee.width/ee.height,ie=le/te;let Z,ne;de>ie?(ne=te,Z=ne*de):(Z=le,ne=Z/de);const oe=Z*o,U=ne*o,W=(le-oe)/2+d.x,be=(te-U)/2+d.y,pe=V.width/le,ge=V.height/te,Ce=W*pe,he=be*ge,ue=oe*pe,ce=U*ge;X.drawImage(ee,Ce,he,ue,ce),V.toBlob(Ee=>{Ee&&a(Ee)},"image/jpeg",.9)};if(!t||!r)return null;const B=s==="profile"?"w-[300px] h-[300px] rounded-full":"w-full max-w-[600px] h-[200px] rounded-lg";return n.jsx(bn,{open:t,onOpenChange:e,children:n.jsxs(pn,{className:"max-w-3xl",children:[n.jsx(Zn,{children:n.jsxs(Xn,{className:"flex items-center gap-2",children:[n.jsx(cj,{className:"w-5 h-5"}),"Adjust ",s==="profile"?"Profile":"Cover"," Photo"]})}),n.jsxs("div",{className:"flex flex-col items-center gap-6 py-4",children:[n.jsx("div",{ref:w,className:`relative overflow-hidden bg-gray-900 ${B} cursor-move flex items-center justify-center`,onMouseDown:C,onMouseMove:T,onMouseUp:O,onMouseLeave:O,onTouchStart:I,onTouchMove:P,onTouchEnd:A,children:n.jsx("img",{src:r,alt:"Preview",className:"select-none pointer-events-none",style:{transform:`translate(${d.x}px, ${d.y}px) scale(${o})`,maxWidth:"none",maxHeight:"none",width:"auto",height:"auto",minWidth:"100%",minHeight:"100%",objectFit:"cover"},draggable:!1})}),n.jsxs("div",{className:"flex items-center gap-4 w-full max-w-md",children:[n.jsx(kse,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),n.jsx("input",{type:"range",min:"0.5",max:"3",step:"0.1",value:o,onChange:V=>l(parseFloat(V.target.value)),className:"flex-1 h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-500","data-testid":"slider-zoom"}),n.jsx(Sse,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})]}),n.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center gap-2",children:[n.jsx(dse,{className:"w-4 h-4"}),"Drag to reposition"]})]}),n.jsx("canvas",{ref:j,className:"hidden"}),n.jsxs("div",{className:"flex gap-2 justify-end",children:[n.jsx(H,{variant:"outline",onClick:e,disabled:i,"data-testid":"button-cancel-crop",children:"Cancel"}),n.jsx(H,{onClick:R,disabled:i,"data-testid":"button-apply-crop",children:i?n.jsxs(n.Fragment,{children:[n.jsx(Vo,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):"Apply"})]})]})})}function TTe({isOpen:t,onClose:e,profileData:r,onSuccess:s}){const[a,i]=g.useState((r==null?void 0:r.username)||""),[o,l]=g.useState((r==null?void 0:r.displayName)||""),[d,h]=g.useState((r==null?void 0:r.bio)||""),[f,m]=g.useState((r==null?void 0:r.username)||""),[x,b]=g.useState(!1),[j,N]=g.useState(null),[w,C]=g.useState(""),[T,O]=g.useState(!1),{toast:I}=Ia();g.useEffect(()=>{r&&(i(r.username||""),l(r.displayName||""),h(r.bio||""),m(r.username||""),N(null),C(""))},[r]),g.useEffect(()=>{const V=setTimeout(async()=>{if(a.toLowerCase()===f.toLowerCase()){N(null),C("");return}if(a.length<3){N(null),C("");return}if(!/^[a-zA-Z0-9_]{3,20}$/.test(a)){N(!1),C("Username must be 3-20 characters (letters, numbers, underscore only)");return}b(!0);try{const ee=await(await fetch(`/api/user/check-username/${a}`)).json();N(ee.available),C(ee.message)}catch(X){console.error("Error checking username:",X),N(null),C("")}finally{b(!1)}},500);return()=>clearTimeout(V)},[a,f]);const P=a.toLowerCase()!==f.toLowerCase(),A=!T&&(!P||j===!0),R=async()=>{if(P&&j!==!0){I({description:w||"Please choose a valid, available username",variant:"destructive"});return}O(!0);try{const B=await ks();if(!B){I({description:"Please log in to update your profile",variant:"destructive"}),O(!1);return}const V=await fetch("/api/user/profile",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${B}`},body:JSON.stringify({username:a||void 0,displayName:o||void 0,bio:d||void 0})}),X=await V.json();if(!V.ok)throw new Error(X.message||"Failed to update profile");I({description:"Profile updated successfully!"}),s()}catch(B){console.error("Profile update error:",B),I({description:B.message||"Failed to update profile",variant:"destructive"})}finally{O(!1)}};return n.jsx(bn,{open:t,onOpenChange:e,children:n.jsxs(pn,{className:"max-w-2xl",children:[n.jsx(Zn,{children:n.jsx(Xn,{children:"Edit Profile"})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Username"}),n.jsxs("div",{className:"relative",children:[n.jsx(Nr,{value:a,onChange:B=>i(B.target.value.toLowerCase()),placeholder:"Enter username",className:"pr-10","data-testid":"input-username"}),n.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:[x&&n.jsx(Vo,{className:"h-4 w-4 animate-spin text-gray-400","data-testid":"icon-checking-username"}),!x&&P&&j===!0&&n.jsx(Bc,{className:"h-4 w-4 text-green-500","data-testid":"icon-username-available"}),!x&&P&&j===!1&&n.jsx(Wr,{className:"h-4 w-4 text-red-500","data-testid":"icon-username-unavailable"})]})]}),w&&P&&n.jsx("p",{className:`text-xs mt-1 ${j?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,"data-testid":"text-username-message",children:w})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Display Name"}),n.jsx(Nr,{value:o,onChange:B=>l(B.target.value),placeholder:"Enter display name","data-testid":"input-displayname"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Bio"}),n.jsx(qp,{value:d,onChange:B=>h(B.target.value),placeholder:"Tell us about yourself",rows:3,"data-testid":"textarea-bio"})]}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 italic",children:"To change your profile or cover photo, use the camera buttons on your profile header above."}),n.jsxs("div",{className:"flex gap-2 justify-end",children:[n.jsx(H,{variant:"outline",onClick:e,disabled:T,"data-testid":"button-cancel-profile",children:"Cancel"}),n.jsx(H,{onClick:R,disabled:!A||x,"data-testid":"button-save-profile",children:T?"Saving...":x?"Checking...":"Save"})]})]})]})})}function PTe({ticker:t,isOpen:e,onClose:r}){var m,x,b,j,N,w,C,T,O,I,P,A,R,B,V,X,ee,Y,re,le,te,de,ie;if(!e)return null;const[s,a]=g.useState(!1),i=t.replace("$",""),{data:o,isLoading:l}=xn({queryKey:[`/api/stock-analysis/${i}`],queryFn:async()=>{const Z=await fetch(`/api/stock-analysis/${i}`);if(!Z.ok)throw new Error("Failed to fetch stock analysis");return await Z.json()},enabled:e}),{data:d,isLoading:h}=xn({queryKey:[`/api/stock-news/${i}`],queryFn:async()=>{const Z=await fetch(`/api/stock-news/${i}?refresh=${Date.now()}`);if(!Z.ok)throw new Error("Failed to fetch stock news");return await Z.json()},enabled:e,staleTime:6e4,gcTime:3e5,refetchOnMount:!0,refetchOnWindowFocus:!0,refetchInterval:3e5}),f={priceData:(o==null?void 0:o.priceData)||{open:0,high:0,low:0,close:0,volume:"N/A",high52W:0,low52W:0},valuation:(o==null?void 0:o.valuation)||{marketCap:"N/A",peRatio:0,pbRatio:0,psRatio:0,evEbitda:0,pegRatio:0},financialHealth:(o==null?void 0:o.financialHealth)||{eps:0,bookValue:0,dividendYield:"N/A",roe:"N/A",roa:"N/A",deRatio:0},technicalIndicators:(o==null?void 0:o.technicalIndicators)||{rsi:null},growthMetrics:(o==null?void 0:o.growthMetrics)||{revenueGrowth:"N/A",epsGrowth:"N/A",profitMargin:"N/A",ebitdaMargin:"N/A",freeCashFlowYield:"N/A"},additionalIndicators:(o==null?void 0:o.additionalIndicators)||{beta:0,currentRatio:0,quickRatio:0,priceToSales:0,enterpriseValue:"N/A"},marketSentiment:(o==null?void 0:o.marketSentiment)||{score:.5,trend:"Neutral",volumeSpike:!1,confidence:"Medium"},news:d||[]};return n.jsxs("div",{className:"mt-4 grid grid-cols-1 lg:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-2xl p-4 shadow-xl backdrop-blur-sm ",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(ia,{className:"h-5 w-5 text-gray-600 dark:text-gray-400 "}),n.jsx("h3",{className:"text-gray-900 dark:text-white font-semibold flex-1 ",children:s?"Related News":"Fundamental Analysis"}),!s&&l&&n.jsx("div",{className:"ml-2 w-4 h-4 border-2 border-gray-600 dark:border-gray-400 border-t-transparent rounded-full animate-spin "}),s&&h&&n.jsx("div",{className:"ml-2 w-4 h-4 border-2 border-gray-600 dark:border-gray-400 border-t-transparent rounded-full animate-spin "}),n.jsx(H,{size:"icon",variant:"ghost",className:"lg:hidden",onClick:()=>a(!s),"data-testid":"button-toggle-news-mobile",children:n.jsx(HN,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"})})]}),s?n.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto bg-gray-50 dark:bg-gray-700/60 rounded-xl p-4 scrollbar-thin scrollbar-thumb-gray-400 dark:scrollbar-thumb-gray-600 scrollbar-track-gray-200 dark:scrollbar-track-gray-800 lg:hidden ",children:f.news&&f.news.length>0?f.news.map((Z,ne)=>n.jsxs("div",{className:"p-3 bg-gray-100 dark:bg-gray-600/60 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600/70 transition-colors backdrop-blur-sm shadow-sm cursor-pointer",onClick:()=>window.open(Z.url,"_blank","noopener,noreferrer"),children:[n.jsxs("h4",{className:"text-gray-700 dark:text-gray-300 font-medium text-sm mb-1 hover:text-gray-900 dark:hover:text-gray-100 transition-colors",children:[Z.title," "]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-xs ",children:Z.source}),n.jsx("span",{className:"text-gray-500 dark:text-gray-500 text-xs ",children:Z.time})]})]},ne)):n.jsxs("div",{className:"text-center py-6 text-gray-500 dark:text-gray-400 ",children:[n.jsx(sm,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),n.jsx("p",{className:"text-sm",children:"No recent news available for this stock"}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1 ",children:"Check back later for updates"})]})}):n.jsxs("div",{className:"space-y-4 max-h-80 overflow-y-auto bg-gray-50 dark:bg-gray-700/60 rounded-xl p-4 scrollbar-thin scrollbar-thumb-gray-400 dark:scrollbar-thumb-gray-600 scrollbar-track-gray-200 dark:scrollbar-track-gray-800 ",children:[n.jsx(kTe,{ticker:t,analysisData:f}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(sm,{className:"h-4 w-4 text-gray-700 dark:text-gray-400 "}),n.jsx("span",{className:"text-gray-800 dark:text-gray-400 font-medium ",children:"Valuation"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500 dark:text-gray-400 ",children:"Market Cap"}),n.jsx("span",{className:"text-gray-900 dark:text-white ",children:f.valuation.marketCap})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500 dark:text-gray-400 ",children:"P/E Ratio"}),n.jsx("span",{className:"text-gray-900 dark:text-white ",children:f.valuation.peRatio})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500 dark:text-gray-400 ",children:"P/B Ratio"}),n.jsx("span",{className:"text-gray-900 dark:text-white ",children:f.valuation.pbRatio})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500 dark:text-gray-400 ",children:"EV/EBITDA"}),n.jsx("span",{className:"text-gray-900 dark:text-white ",children:f.valuation.evEbitda})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500 dark:text-gray-400 ",children:"P/S Ratio"}),n.jsx("span",{className:"text-gray-900 dark:text-white ",children:f.valuation.psRatio})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500 dark:text-gray-400 ",children:"PEG Ratio"}),n.jsx("span",{className:"text-gray-900 dark:text-white ",children:f.valuation.pegRatio})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Jl,{className:"h-4 w-4 text-gray-700 dark:text-gray-400 "}),n.jsx("span",{className:"text-gray-800 dark:text-gray-400 font-medium ",children:"Financial Health"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500 dark:text-gray-400 ",children:"EPS"}),n.jsxs("span",{className:"text-gray-900 dark:text-white ",children:["",f.financialHealth.eps]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500 dark:text-gray-400 ",children:"Book Value"}),n.jsxs("span",{className:"text-gray-900 dark:text-white ",children:["",f.financialHealth.bookValue]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500 dark:text-gray-400 ",children:"Dividend Yield"}),n.jsx("span",{className:"text-gray-700 dark:text-gray-300 ",children:f.financialHealth.dividendYield})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500 dark:text-gray-400 ",children:"ROE"}),n.jsx("span",{className:"text-gray-700 dark:text-gray-300 ",children:f.financialHealth.roe})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500 dark:text-gray-400 ",children:"ROA"}),n.jsx("span",{className:"text-gray-700 dark:text-gray-300 ",children:f.financialHealth.roa})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500 dark:text-gray-400 ",children:"D/E Ratio"}),n.jsx("span",{className:"text-gray-900 dark:text-white ",children:f.financialHealth.deRatio})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Jl,{className:"h-4 w-4 text-gray-700 dark:text-gray-400 "}),n.jsx("span",{className:"text-gray-800 dark:text-gray-400 font-medium ",children:"Technical Indicators"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500 dark:text-gray-400 ",children:"RSI (14)"}),n.jsx("span",{className:`font-medium ${(m=f.technicalIndicators)!=null&&m.rsi?f.technicalIndicators.rsi>70?"text-red-400":f.technicalIndicators.rsi<30?"text-green-400":"text-yellow-400":"text-slate-400"}`,children:(x=f.technicalIndicators)!=null&&x.rsi?f.technicalIndicators.rsi.toFixed(1):"N/A"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500 dark:text-gray-400 ",children:"EMA 50"}),n.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium ",children:((b=f.technicalIndicators)==null?void 0:b.ema50)||"N/A"})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Gn,{className:"h-4 w-4 text-gray-700 dark:text-gray-400 "}),n.jsx("span",{className:"text-gray-800 dark:text-gray-400 font-medium ",children:"Market Sentiment"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500 dark:text-gray-400 ",children:"Sentiment Score"}),n.jsx("span",{className:`font-medium ${(j=f.marketSentiment)!=null&&j.score?f.marketSentiment.score>.6?"text-green-400":f.marketSentiment.score<.4?"text-red-400":"text-yellow-400":"text-slate-400"}`,children:(N=f.marketSentiment)!=null&&N.score?`${(f.marketSentiment.score*100).toFixed(0)}%`:"Neutral"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500 dark:text-gray-400 ",children:"Trend"}),n.jsx("span",{className:`font-medium ${((w=f.marketSentiment)==null?void 0:w.trend)==="Bullish"?"text-green-400":((C=f.marketSentiment)==null?void 0:C.trend)==="Bearish"?"text-red-400":"text-yellow-400"}`,children:((T=f.marketSentiment)==null?void 0:T.trend)||"Neutral"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500 dark:text-gray-400 ",children:"Volume Spike"}),n.jsx("span",{className:`font-medium ${(O=f.marketSentiment)!=null&&O.volumeSpike?"text-orange-400":"text-slate-400"}`,children:(I=f.marketSentiment)!=null&&I.volumeSpike?"Yes":"No"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500 dark:text-gray-400 ",children:"Confidence"}),n.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium ",children:((P=f.marketSentiment)==null?void 0:P.confidence)||"Medium"})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Gn,{className:"h-4 w-4 text-gray-700 dark:text-gray-400 "}),n.jsx("span",{className:"text-gray-800 dark:text-gray-400 font-medium ",children:"Growth Metrics"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500 dark:text-gray-400 ",children:"Revenue Growth"}),n.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium ",children:(A=f.growthMetrics)==null?void 0:A.revenueGrowth})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500 dark:text-gray-400 ",children:"EPS Growth"}),n.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium ",children:(R=f.growthMetrics)==null?void 0:R.epsGrowth})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500 dark:text-gray-400 ",children:"Profit Margin"}),n.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium ",children:(B=f.growthMetrics)==null?void 0:B.profitMargin})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500 dark:text-gray-400 ",children:"EBITDA Margin"}),n.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium ",children:(V=f.growthMetrics)==null?void 0:V.ebitdaMargin})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500 dark:text-gray-400 ",children:"FCF Yield"}),n.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium ",children:(X=f.growthMetrics)==null?void 0:X.freeCashFlowYield})]})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Jl,{className:"h-4 w-4 text-gray-700 dark:text-gray-400 "}),n.jsx("span",{className:"text-gray-800 dark:text-gray-400 font-medium ",children:"Additional Indicators"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500 dark:text-gray-400 ",children:"Beta"}),n.jsx("span",{className:`font-medium ${(ee=f.additionalIndicators)!=null&&ee.beta?f.additionalIndicators.beta>1.2?"text-red-400":f.additionalIndicators.beta<.8?"text-green-400":"text-yellow-400":"text-slate-400"}`,children:((Y=f.additionalIndicators)==null?void 0:Y.beta)||"N/A"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500 dark:text-gray-400 ",children:"Current Ratio"}),n.jsx("span",{className:`font-medium ${(re=f.additionalIndicators)!=null&&re.currentRatio?f.additionalIndicators.currentRatio>1.5?"text-green-400":f.additionalIndicators.currentRatio<1?"text-red-400":"text-yellow-400":"text-slate-400"}`,children:((le=f.additionalIndicators)==null?void 0:le.currentRatio)||"N/A"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500 dark:text-gray-400 ",children:"Quick Ratio"}),n.jsx("span",{className:`font-medium ${(te=f.additionalIndicators)!=null&&te.quickRatio?f.additionalIndicators.quickRatio>1?"text-green-400":f.additionalIndicators.quickRatio<.7?"text-red-400":"text-yellow-400":"text-slate-400"}`,children:((de=f.additionalIndicators)==null?void 0:de.quickRatio)||"N/A"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500 dark:text-gray-400 ",children:"Enterprise Value"}),n.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium ",children:(ie=f.additionalIndicators)==null?void 0:ie.enterpriseValue})]})]})]})]})]}),n.jsxs("div",{className:"hidden lg:block bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-2xl p-4 shadow-xl backdrop-blur-sm ",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(sm,{className:"h-5 w-5 text-gray-600 dark:text-gray-400 "}),n.jsx("h3",{className:"text-gray-900 dark:text-white font-semibold ",children:"Related News"}),h&&n.jsx("div",{className:"ml-2 w-4 h-4 border-2 border-gray-600 dark:border-gray-400 border-t-transparent rounded-full animate-spin "})]}),n.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto bg-gray-50 dark:bg-gray-700/60 rounded-xl p-4 scrollbar-thin scrollbar-thumb-gray-400 dark:scrollbar-thumb-gray-600 scrollbar-track-gray-200 dark:scrollbar-track-gray-800 ",children:f.news&&f.news.length>0?f.news.map((Z,ne)=>n.jsxs("div",{className:"p-3 bg-gray-100 dark:bg-gray-600/60 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600/70 transition-colors backdrop-blur-sm shadow-sm cursor-pointer",onClick:()=>window.open(Z.url,"_blank","noopener,noreferrer"),children:[n.jsxs("h4",{className:"text-gray-700 dark:text-gray-300 font-medium text-sm mb-1 hover:text-gray-900 dark:hover:text-gray-100 transition-colors",children:[Z.title," "]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-xs ",children:Z.source}),n.jsx("span",{className:"text-gray-500 dark:text-gray-500 text-xs ",children:Z.time})]})]},ne)):n.jsxs("div",{className:"text-center py-6 text-gray-500 dark:text-gray-400 ",children:[n.jsx(sm,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),n.jsx("p",{className:"text-sm",children:"No recent news available for this stock"}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1 ",children:"Check back later for updates"})]})})]})]})}const N2=g.memo(function({post:e,currentUserUsername:r,onViewUserProfile:s}){var Ye,lt,pt,nt,wt,Lr,Tr,Mr,ta,st,zt,Ft,pr,kt,Mt,Ke,Ne,Oe;const[a,i]=g.useState(!1),[o,l]=g.useState(!1),[d,h]=g.useState(!1),[f,m]=g.useState(!1),[x,b]=g.useState(!1),[j,N]=g.useState(!1),[w,C]=g.useState(!1),[T,O]=g.useState(!1),[I,P]=g.useState(!1),[A,R]=g.useState(!1),[B,V]=g.useState(e.content),[X,ee]=g.useState(!1),[Y,re]=g.useState(!1),le=g.useRef(null),[te,de]=g.useState(((Ye=e.metrics)==null?void 0:Ye.likes)||e.likes||0),[ie,Z]=g.useState(0),[ne,oe]=g.useState(((lt=e.metrics)==null?void 0:lt.reposts)||e.reposts||0),[U,W]=g.useState(((pt=e.metrics)==null?void 0:pt.comments)||e.comments||0),{toast:be}=Ia(),pe=qu(),ge=!!(r&&(((nt=e.authorUsername)==null?void 0:nt.toLowerCase())===(r==null?void 0:r.toLowerCase())||((Lr=(wt=e.user)==null?void 0:wt.handle)==null?void 0:Lr.toLowerCase())===(r==null?void 0:r.toLowerCase()))),Ce=((Tr=e.user)==null?void 0:Tr.handle)||e.authorUsername||"user",{data:he}=xn({queryKey:["follow-status",Ce],queryFn:async()=>{if(ge||!r)return{following:!1};const me=await ks();if(!me)return{following:!1};const je=await fetch(`/api/users/${Ce}/follow-status`,{headers:{Authorization:`Bearer ${me}`}});return je.ok?je.json():{following:!1}},enabled:!!r&&!ge,staleTime:300*1e3,gcTime:600*1e3,refetchOnMount:!1,refetchOnWindowFocus:!1});g.useEffect(()=>{he&&ee(he.following||he.isFollowing||!1)},[he]);const{data:ue}=xn({queryKey:["vote-status",e.id,r],queryFn:async()=>{if(!r)return{uptrended:!1,downtrended:!1,uptrends:0,downtrends:0};const me=await fetch(`/api/social-posts/${e.id}/vote-status?userId=${r}`);return me.ok?me.json():{uptrended:!1,downtrended:!1,uptrends:te,downtrends:0}},enabled:!!r,staleTime:6e4,refetchOnMount:!1,refetchOnWindowFocus:!1}),{data:ce}=xn({queryKey:["retweet-status",e.id,r],queryFn:async()=>{if(!r)return{retweeted:!1,reposts:0};const me=await fetch(`/api/social-posts/${e.id}/retweet-status?userId=${encodeURIComponent(r)}`);if(!me.ok)return{retweeted:!1,reposts:ne};const je=await me.json();return console.log(` Retweet status for post ${e.id}: retweeted=${je.retweeted}, reposts=${je.reposts}`),je},enabled:!!r,staleTime:6e4,refetchOnMount:!1,refetchOnWindowFocus:!1});g.useEffect(()=>{ue&&(l(ue.uptrended||!1),h(ue.downtrended||!1),ue.uptrends!==void 0&&de(ue.uptrends),ue.downtrends!==void 0&&Z(ue.downtrends))},[ue]),g.useEffect(()=>{ce&&(m(ce.retweeted||!1),ce.reposts!==void 0&&oe(ce.reposts))},[ce]),g.useEffect(()=>{const me=je=>{le.current&&!le.current.contains(je.target)&&re(!1)};return Y&&document.addEventListener("mousedown",me),()=>{document.removeEventListener("mousedown",me)}},[Y]);const{isAudioMode:Ee,selectedTextSnippets:Le,addTextSnippet:Ie}=o_(),Ue=150,Ae=()=>{var ke,Te;if(!Ee)return;if(Le.length>=5){be({description:"Maximum 5 posts allowed",variant:"destructive"});return}const me=e.content;if(!me||me.trim().length===0)return;const je=typeof e.id=="string"?e.id:String(e.id);Ie({postId:je,text:me,authorUsername:((ke=e.user)==null?void 0:ke.handle)||e.authorUsername||"Unknown",authorDisplayName:((Te=e.user)==null?void 0:Te.username)||e.authorDisplayName||"Unknown User"})},We=yo({mutationFn:async({wasLiked:me})=>{const je=me?"DELETE":"POST",ke=r||"anonymous";console.log(` Uptrend mutation: ${je} for post ${e.id}, wasUptrended=${me}, userId=${ke}`);let Te=`/api/social-posts/${e.id}/like-v2`;je==="DELETE"&&(Te+=`?userId=${encodeURIComponent(ke)}`);const Je=await fetch(Te,{method:je,headers:{"Content-Type":"application/json"},body:je==="POST"?JSON.stringify({userId:ke}):void 0});if(!Je.ok)throw new Error("Failed to update uptrend");return Je.json()},onMutate:({wasLiked:me})=>{const je=te,ke=ie,Te=d,Je=!me;return l(Je),de(Q=>me?Math.max(0,Q-1):Q+1),!me&&Te&&(h(!1),Z(Q=>Math.max(0,Q-1))),console.log(` Optimistic: wasUptrended=${me}, newUptrended=${Je}`),{wasLiked:me,prevLikeCount:je,prevDowntrendCount:ke,wasDowntrended:Te}},onSuccess:me=>{(me==null?void 0:me.liked)!==void 0&&l(me.liked),(me==null?void 0:me.likes)!==void 0&&de(me.likes),pe.invalidateQueries({queryKey:["vote-status",e.id,r]})},onError:(me,je,ke)=>{l((ke==null?void 0:ke.wasLiked)||!1),de((ke==null?void 0:ke.prevLikeCount)||0),ke!=null&&ke.wasDowntrended&&(h(!0),Z((ke==null?void 0:ke.prevDowntrendCount)||0)),be({description:"Failed to update uptrend",variant:"destructive"})}}),ot=yo({mutationFn:async({wasDowntrended:me})=>{const je=me?"DELETE":"POST",ke=r||"anonymous";console.log(` Downtrend mutation: ${je} for post ${e.id}, wasDowntrended=${me}, userId=${ke}`);let Te=`/api/social-posts/${e.id}/downtrend`;je==="DELETE"&&(Te+=`?userId=${encodeURIComponent(ke)}`);const Je=await fetch(Te,{method:je,headers:{"Content-Type":"application/json"},body:je==="POST"?JSON.stringify({userId:ke}):void 0});if(!Je.ok)throw new Error("Failed to update downtrend");return Je.json()},onMutate:({wasDowntrended:me})=>{const je=ie,ke=te,Te=o,Je=!me;return h(Je),Z(Q=>me?Math.max(0,Q-1):Q+1),!me&&Te&&(l(!1),de(Q=>Math.max(0,Q-1))),console.log(` Optimistic: wasDowntrended=${me}, newDowntrended=${Je}`),{wasDowntrended:me,prevDowntrendCount:je,prevLikeCount:ke,wasLiked:Te}},onSuccess:me=>{(me==null?void 0:me.downtrended)!==void 0&&h(me.downtrended),(me==null?void 0:me.downtrends)!==void 0&&Z(me.downtrends),pe.invalidateQueries({queryKey:["vote-status",e.id,r]})},onError:(me,je,ke)=>{h((ke==null?void 0:ke.wasDowntrended)||!1),Z((ke==null?void 0:ke.prevDowntrendCount)||0),ke!=null&&ke.wasLiked&&(l(!0),de((ke==null?void 0:ke.prevLikeCount)||0)),be({description:"Failed to update downtrend",variant:"destructive"})}}),It=yo({mutationFn:async({wasReposted:me})=>{const je=me?"DELETE":"POST";console.log(` Repost mutation: ${je} for post ${e.id}, wasReposted=${me}`);const ke=localStorage.getItem("currentDisplayName")||r||"anonymous",Te=r||"anonymous",Je=await fetch(`/api/social-posts/${e.id}/retweet`,{method:je,headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:Te,userDisplayName:ke,userUsername:Te})});if(!Je.ok)throw new Error("Failed to update repost");return Je.json()},onMutate:({wasReposted:me})=>{const je=ne;return m(!me),oe(ke=>me?Math.max(0,ke-1):ke+1),console.log(` Optimistic: wasReposted=${me}, newReposted=${!me}, count=${me?je-1:je+1}`),{wasReposted:me,prevCount:je}},onSuccess:me=>{(me==null?void 0:me.retweeted)!==void 0&&(m(me.retweeted),console.log(` Server confirmed: retweeted=${me.retweeted}`)),(me==null?void 0:me.reposts)!==void 0&&(oe(me.reposts),console.log(` Server confirmed: reposts=${me.reposts}`)),me!=null&&me.repostId&&console.log(` New repost post created with ID: ${me.repostId}`),pe.invalidateQueries({queryKey:["retweet-status",e.id,r]}),pe.invalidateQueries({queryKey:["/api/social-posts"]})},onError:(me,je,ke)=>{m((ke==null?void 0:ke.wasReposted)||!1),oe((ke==null?void 0:ke.prevCount)||0),be({description:"Failed to update repost",variant:"destructive"})}}),tr=yo({mutationFn:async me=>{const je=await ks();if(!je)throw new Error("Not authenticated");const ke=await fetch(`/api/social-posts/${e.id}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${je}`},body:JSON.stringify({content:me})});if(!ke.ok)throw new Error("Failed to update post");return ke.json()},onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/social-posts"]}),P(!1),O(!1),be({description:"Post updated successfully!"})},onError:()=>{be({description:"Failed to update post",variant:"destructive"})}}),Ct=yo({mutationFn:async()=>{const me=await ks();if(!me)throw new Error("Not authenticated");const je=await fetch(`/api/social-posts/${e.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${me}`}});if(!je.ok)throw new Error("Failed to delete post");return je.json()},onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/social-posts"]}),R(!1),O(!1),be({description:"Post deleted successfully!"})},onError:()=>{be({description:"Failed to delete post",variant:"destructive"})}}),we=yo({mutationFn:async({action:me})=>{var Q;const je=await ks();if(!je)throw new Error("Not authenticated");console.log(` Follow mutation starting: action=${me}, target=${Ce}`);const ke=me==="unfollow"?`/api/users/${Ce}/unfollow`:`/api/users/${Ce}/follow`,Te=await fetch(ke,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${je}`},body:JSON.stringify({targetUserData:{displayName:e.authorDisplayName||((Q=e.user)==null?void 0:Q.username)||Ce}})});if(!Te.ok){const tt=await Te.json();throw new Error(tt.error||`Failed to ${me}`)}const Je=await Te.json();return console.log(` Server response for ${me}:`,Je),{...Je,requestedAction:me}},onSuccess:me=>{console.log(" Follow action complete:",{requestedAction:me.requestedAction,serverFollowing:me.following,author:Ce,currentUser:r}),ee(me.following),pe.invalidateQueries({queryKey:["follow-status",Ce]}),pe.invalidateQueries({queryKey:["profile-stats",Ce]}),r&&pe.invalidateQueries({queryKey:["profile-stats",r]}),be({description:me.following?"Now following!":"Unfollowed"})},onError:me=>{console.error(" Follow action failed:",me),pe.invalidateQueries({queryKey:["follow-status",Ce]}),be({description:(me==null?void 0:me.message)||"Failed to update follow status",variant:"destructive"})}}),Fe=()=>{const me=X?"unfollow":"follow";console.log(` Follow button clicked: current isFollowing=${X}, action will be=${me}`),we.mutate({action:me})};if(e.isAudioPost){console.log(" Audio Minicast Post Detected:",{postId:e.id,selectedPostIds:e.selectedPostIds,hasSavedSelectedPosts:!!e.selectedPosts&&e.selectedPosts.length>0});let me=[];if(e.selectedPosts&&e.selectedPosts.length>0)console.log(" Using saved selectedPosts from post data"),me=e.selectedPosts.map(je=>({id:je.id,content:je.content}));else if(e.selectedPostIds&&e.selectedPostIds.length>0){console.log(" Falling back to cache lookup for selectedPosts");const je=pe.getQueryData(["/api/social-posts"])||[];me=(e.selectedPostIds||[]).map(ke=>{const Te=je.find(Je=>{var Q;return Je.id===ke||((Q=Je.id)==null?void 0:Q.toString())===(ke==null?void 0:ke.toString())});return Te?{id:Te.id,content:Te.content||""}:null}).filter(ke=>ke!==null)}return console.log(" Final selectedPosts array:",{count:me.length,posts:me.map(je=>({id:je.id,contentLength:je.content.length}))}),n.jsx(vTe,{content:e.content,author:{displayName:((Mr=e.user)==null?void 0:Mr.username)||e.authorDisplayName||"Unknown User",username:((ta=e.user)==null?void 0:ta.handle)||e.authorUsername||"user",avatar:e.authorAvatar||((st=e.user)==null?void 0:st.avatar)||void 0},selectedPostIds:e.selectedPostIds,selectedPosts:me,timestamp:e.createdAt?new Date(e.createdAt):new Date,likes:e.likes||((zt=e.metrics)==null?void 0:zt.likes)||0,comments:e.comments||((Ft=e.metrics)==null?void 0:Ft.comments)||0,isLiked:o,postId:(pr=e.id)==null?void 0:pr.toString(),isOwner:ge})}return n.jsx(St,{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md mb-4 transition-none",children:n.jsxs(Kt,{className:"p-3 xl:p-4 transition-none",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2 xl:mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2 xl:gap-3",children:[n.jsxs("div",{className:"relative",children:[(()=>{var ke,Te,Je,Q,tt;const me=e.authorAvatar||((ke=e.user)==null?void 0:ke.avatar),je=me&&me.includes("s3.")&&!me.includes("ui-avatars.com");return console.log(" PostCard avatar debug:",{postId:e.id,authorAvatar:e.authorAvatar,userAvatar:(Te=e.user)==null?void 0:Te.avatar,avatarUrl:me,isValidAvatar:je}),n.jsxs(rc,{className:"w-10 h-10 border border-gray-200 dark:border-gray-600 ",children:[je?n.jsx(sf,{src:me,alt:e.authorDisplayName||e.authorUsername,className:"object-cover"}):null,n.jsx(nc,{className:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 font-bold text-sm ",children:((Je=e.user)==null?void 0:Je.initial)||((Q=e.authorDisplayName)==null?void 0:Q.charAt(0))||((tt=e.authorUsername)==null?void 0:tt.charAt(0))||"U"})]})})(),((kt=e.user)==null?void 0:kt.online)&&n.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-emerald-400 rounded-full border-2 border-white shadow-lg animate-pulse ring-1 ring-emerald-400/40"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("button",{onClick:()=>{var je;const me=((je=e.user)==null?void 0:je.handle)||e.authorUsername||"";me&&(s?s(me):window.location.href=`/user/${me}`)},className:"text-gray-900 dark:text-white font-bold text-lg hover:underline cursor-pointer transition-colors","data-testid":`button-profile-${e.authorUsername}`,children:((Mt=e.user)==null?void 0:Mt.username)||e.authorDisplayName||e.authorUsername||"Unknown User"}),(((Ke=e.user)==null?void 0:Ke.verified)||e.authorVerified)&&n.jsx(Bc,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 fill-current"}),e.isRepost&&e.originalAuthorUsername&&n.jsxs("div",{className:"flex items-center gap-1 text-gray-500 dark:text-gray-400",children:[n.jsx(v6,{className:"h-4 w-4 text-green-500"}),n.jsx("button",{onClick:me=>{me.stopPropagation(),e.originalAuthorUsername&&(s?s(e.originalAuthorUsername):window.location.href=`/user/${e.originalAuthorUsername}`)},className:"text-sm hover:underline cursor-pointer text-green-600 dark:text-green-400 font-medium","data-testid":`button-original-author-${e.originalPostId}`,children:e.originalAuthorDisplayName||e.originalAuthorUsername})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 text-sm font-medium ",children:[n.jsxs("span",{children:["@",((Ne=e.user)==null?void 0:Ne.handle)||e.authorUsername||"user"]}),e.authorUsername!=="finance_news"&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:""}),n.jsx("span",{children:e.timestamp||(e.createdAt?new Date(e.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"now")})]})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[!ge&&r&&n.jsx(H,{variant:X?"outline":"default",size:"sm",onClick:Fe,disabled:we.isPending,className:`rounded-full px-4 text-xs font-semibold min-w-[80px] ${X?"border-gray-300 dark:border-gray-600 hover:border-red-500 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20":"bg-blue-600 hover:bg-blue-700 text-white"}`,"data-testid":`button-follow-${e.id}`,children:we.isPending?"...":X?"Following":"Follow"}),Ee&&n.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300 rounded-full text-xs font-medium",children:[n.jsx(qN,{className:"w-3 h-3"}),n.jsx("span",{children:"Select text"})]}),ge&&n.jsxs("div",{className:"relative",children:[n.jsx(H,{variant:"ghost",size:"sm",className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",onClick:()=>O(!T),"data-testid":`button-options-${e.id}`,children:n.jsx(_q,{className:"h-5 w-5"})}),T&&n.jsxs("div",{className:"absolute right-0 top-10 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg py-1 z-50 min-w-[120px]",children:[n.jsxs("button",{onClick:()=>{V(e.content),P(!0),O(!1)},className:"flex items-center gap-2 px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 w-full text-left transition-colors","data-testid":`button-edit-${e.id}`,children:[n.jsx(wA,{className:"h-4 w-4"}),"Edit"]}),n.jsxs("button",{onClick:()=>{R(!0),O(!1)},className:"flex items-center gap-2 px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 w-full text-left transition-colors","data-testid":`button-delete-${e.id}`,children:[n.jsx(za,{className:"h-4 w-4"}),"Delete"]})]})]})]})]}),n.jsxs("div",{className:"mb-2 xl:mb-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx("p",{className:`text-gray-900 dark:text-white leading-relaxed mb-2 xl:mb-3 text-base font-medium ${Ee?"cursor-pointer hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-colors rounded-lg p-2 -m-2":""}`,onClick:Ae,children:w||e.content.length<=Ue?e.content:`${e.content.substring(0,Ue)}...`}),e.content.length>Ue&&n.jsx("button",{onClick:()=>C(!w),className:"flex items-center gap-1 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 text-sm font-medium mt-1 transition-colors","data-testid":`button-expand-${e.id}`,children:w?n.jsxs(n.Fragment,{children:[n.jsx("span",{children:"Show less"}),n.jsx(Bb,{className:"w-4 h-4"})]}):n.jsxs(n.Fragment,{children:[n.jsx("span",{children:"Show more"}),n.jsx(Mp,{className:"w-4 h-4"})]})})]}),e.ticker&&n.jsxs("div",{className:"flex items-center gap-2 mb-2 xl:mb-3",children:[n.jsx(Sr,{className:"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 border border-blue-200 dark:border-blue-800 px-4 py-2 font-bold ",children:e.ticker}),n.jsxs(Sr,{className:`px-4 py-2 border font-bold ${e.sentiment==="bullish"?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300 border-green-200 dark:border-green-800":e.sentiment==="bearish"?"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 border-red-200 dark:border-red-800":"bg-gray-50 dark:bg-gray-900/20 text-gray-700 dark:text-gray-300 border-gray-200 dark:border-gray-800"}`,children:[e.sentiment==="bullish"&&n.jsx(Gn,{className:"w-4 h-4 mr-1"}),e.sentiment==="bearish"&&n.jsx($c,{className:"w-4 h-4 mr-1"}),e.sentiment==="neutral"&&n.jsx(Jl,{className:"w-4 h-4 mr-1"}),(e.sentiment||"neutral").charAt(0).toUpperCase()+(e.sentiment||"neutral").slice(1)]})]}),(e.hasMedia||e.imageUrl)&&n.jsx("div",{className:"my-4 rounded-lg overflow-hidden border border-gray-200 dark:border-gray-600",children:(()=>{let me=[];if(e.imageUrl)try{const je=JSON.parse(e.imageUrl);me=Array.isArray(je)?je:[e.imageUrl]}catch{me=[e.imageUrl]}return me.length>0?n.jsx(r4e,{images:me}):null})()}),n.jsx("div",{className:"flex flex-wrap gap-2",children:(Oe=e.tags)==null?void 0:Oe.map((me,je)=>n.jsx("span",{className:"text-blue-600 dark:text-blue-400 text-sm hover:text-blue-700 dark:hover:text-blue-300 cursor-pointer transition-colors",children:me},`${e.id}-tag-${je}-${me}`))})]}),n.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-300 dark:border-cyan-400/30 bg-gradient-to-r from-gray-100/80 to-gray-200/80 dark:from-black/40 dark:to-indigo-900/40 py-4 rounded-b-lg",children:[n.jsxs("div",{className:"flex items-center gap-8",children:[n.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>b(!x),className:`flex items-center gap-2 backdrop-blur-sm hover:bg-gray-500/20 px-3 py-2 rounded-lg transition-colors ${x?"text-blue-500 dark:text-blue-400":"text-black dark:text-white hover:text-gray-700 dark:hover:text-gray-300"}`,"data-testid":`button-comment-${e.id}`,children:[n.jsx(l0,{className:`h-5 w-5 ${x?"text-blue-500":""}`}),n.jsx("span",{children:U})]}),n.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>It.mutate({wasReposted:f}),disabled:It.isPending,className:`flex items-center gap-2 backdrop-blur-sm hover:bg-gray-500/20 px-3 py-2 rounded-lg transition-colors ${f?"text-green-500 dark:text-green-400":"text-black dark:text-white hover:text-gray-700 dark:hover:text-gray-300"}`,"data-testid":`button-repost-${e.id}`,children:[n.jsx(v6,{className:`h-5 w-5 ${f?"text-green-500":""}`}),n.jsx("span",{children:ne})]}),n.jsxs("div",{ref:le,className:"relative",children:[n.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>re(!Y),disabled:We.isPending||ot.isPending,className:`flex items-center gap-2 backdrop-blur-sm hover:bg-gray-500/20 px-3 py-2 rounded-lg transition-colors ${o||d?o?"text-green-500 dark:text-green-400":"text-red-500 dark:text-red-400":"text-black dark:text-white hover:text-gray-700 dark:hover:text-gray-300"}`,"data-testid":`button-vote-${e.id}`,title:"Click to vote",children:[o?n.jsx(Gn,{className:"h-5 w-5 fill-green-600 dark:fill-green-400 text-green-600 dark:text-green-400"}):d?n.jsx($c,{className:"h-5 w-5 fill-red-600 dark:fill-red-400 text-red-600 dark:text-red-400"}):n.jsx(Gn,{className:"h-5 w-5"}),n.jsx("span",{children:o?te:d?ie:te})]}),Y&&n.jsxs("div",{className:"absolute bottom-full mb-2 left-0 bg-gray-50 dark:bg-gray-800 rounded-full shadow-lg p-2 flex gap-3 backdrop-blur-sm border border-gray-300 dark:border-gray-700 z-50",children:[n.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>{We.mutate({wasLiked:o}),re(!1)},disabled:We.isPending,className:`flex items-center gap-1 px-3 py-1 rounded-full transition-colors ${o?"bg-green-600/20 text-green-600 dark:bg-green-400/20 dark:text-green-400":"hover:bg-gray-100 dark:hover:bg-gray-600 text-black dark:text-white"}`,title:"Uptrend (Bullish)",children:[n.jsx(Gn,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm",children:te})]}),n.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>{ot.mutate({wasDowntrended:d}),re(!1)},disabled:ot.isPending,className:`flex items-center gap-1 px-3 py-1 rounded-full transition-colors ${d?"bg-red-600/20 text-red-600 dark:bg-red-400/20 dark:text-red-400":"hover:bg-gray-100 dark:hover:bg-gray-600 text-black dark:text-white"}`,title:"Downtrend (Bearish)",children:[n.jsx($c,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm",children:ie})]})]})]}),e.ticker&&n.jsx(H,{variant:"ghost",size:"sm",onClick:()=>i(!a),className:`flex items-center gap-2  backdrop-blur-sm hover:bg-gray-500/20 px-3 py-2 rounded-lg ${a?"text-black dark:text-white":"text-black dark:text-white hover:text-gray-700 dark:hover:text-gray-300"}`,children:n.jsx(ia,{className:"h-5 w-5"})})]}),n.jsx(H,{variant:"ghost",size:"sm",onClick:()=>N(!0),className:"text-black dark:text-white hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-500/20  backdrop-blur-sm p-2 rounded-lg","data-testid":`button-share-${e.id}`,children:n.jsx(Dq,{className:"h-5 w-5"})})]}),a&&e.ticker&&n.jsx(PTe,{ticker:e.ticker,isOpen:a,onClose:()=>i(!1)}),n.jsx(jTe,{post:e,isVisible:x,onClose:()=>b(!1),onCommentAdded:()=>W(me=>me+1)}),n.jsx(STe,{isOpen:j,onClose:()=>N(!1),post:e}),n.jsx(bn,{open:I,onOpenChange:P,children:n.jsxs(pn,{children:[n.jsx(Zn,{children:n.jsx(Xn,{children:"Edit Post"})}),n.jsx(qp,{value:B,onChange:me=>V(me.target.value),rows:4,className:"resize-none","data-testid":"textarea-edit-content"}),n.jsxs("div",{className:"flex gap-2 justify-end",children:[n.jsx(H,{variant:"outline",onClick:()=>P(!1),"data-testid":"button-cancel-edit",children:"Cancel"}),n.jsx(H,{onClick:()=>tr.mutate(B),disabled:tr.isPending||!B.trim(),"data-testid":"button-save-edit",children:tr.isPending?"Saving...":"Save"})]})]})}),n.jsx(bn,{open:A,onOpenChange:R,children:n.jsxs(pn,{children:[n.jsx(Zn,{children:n.jsx(Xn,{children:"Delete Post"})}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Are you sure you want to delete this post? This action cannot be undone."}),n.jsxs("div",{className:"flex gap-2 justify-end",children:[n.jsx(H,{variant:"outline",onClick:()=>R(!1),"data-testid":"button-cancel-delete",children:"Cancel"}),n.jsx(H,{variant:"destructive",onClick:()=>Ct.mutate(),disabled:Ct.isPending,"data-testid":"button-confirm-delete",children:Ct.isPending?"Deleting...":"Delete"})]})]})})]})})});function ATe({username:t,onBack:e,currentUserUsername:r}){const[s,a]=g.useState("Posts"),[i,o]=g.useState(!1),[l,d]=g.useState(!1),[h,f]=g.useState(!1),[m,x]=g.useState(!1),{toast:b}=Ia(),j=qu(),[,N]=Jy(),{data:w,isLoading:C}=xn({queryKey:[`/api/users/${t}/profile`],queryFn:async()=>{const te=await fetch(`/api/users/${t}/profile`);if(!te.ok)throw new Error("Failed to fetch profile");return te.json()},staleTime:6e4}),{data:T={followers:0,following:0}}=xn({queryKey:[`/api/users/${t}/followers-count`],queryFn:async()=>{const te=await fetch(`/api/users/${t}/followers-count`);return te.ok?te.json():{followers:0,following:0}},staleTime:6e4}),{data:O=[],isLoading:I}=xn({queryKey:["/api/social-posts"],queryFn:async()=>{const te=await fetch("/api/social-posts");if(!te.ok)throw new Error("Failed to fetch posts");return te.json()},staleTime:12e4}),{data:P={followers:[]}}=xn({queryKey:[`/api/users/${t}/followers-list`],queryFn:async()=>{const te=await fetch(`/api/users/${t}/followers-list`);return te.ok?te.json():{followers:[]}},enabled:h}),{data:A={following:[]}}=xn({queryKey:[`/api/users/${t}/following-list`],queryFn:async()=>{const te=await fetch(`/api/users/${t}/following-list`);return te.ok?te.json():{following:[]}},enabled:m});g.useEffect(()=>{(async()=>{if(!(!r||r===t))try{const de=await ks();if(!de)return;const ie=await fetch(`/api/users/${t}/follow-status`,{headers:{Authorization:`Bearer ${de}`}});if(ie.ok){const Z=await ie.json();o(Z.following||Z.isFollowing||!1)}}catch(de){console.error("Error checking follow status:",de)}})()},[t,r]);const R=O.filter(te=>{var de,ie,Z;return((de=te.authorUsername)==null?void 0:de.toLowerCase())===(t==null?void 0:t.toLowerCase())||((ie=te.authorDisplayName)==null?void 0:ie.toLowerCase())===((Z=w==null?void 0:w.displayName)==null?void 0:Z.toLowerCase())}),B=async()=>{if(!(!r||r===t)){d(!0);try{const te=await ks();if(!te){d(!1);return}const de=i?`/api/users/${t}/unfollow`:`/api/users/${t}/follow`,ie=await fetch(de,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${te}`},body:JSON.stringify({targetUserData:{displayName:(w==null?void 0:w.displayName)||t}})});if(ie.ok){const Z=await ie.json();o(Z.following),j.invalidateQueries({queryKey:[`/api/users/${t}/followers-count`]}),b({description:Z.following?"Following!":"Unfollowed"})}}catch(te){console.error("Error toggling follow:",te)}finally{d(!1)}}},V=(r==null?void 0:r.toLowerCase())===(t==null?void 0:t.toLowerCase()),X=(w==null?void 0:w.displayName)||t,ee=(w==null?void 0:w.bio)||"",Y=w==null?void 0:w.profilePicUrl,re=w==null?void 0:w.coverPicUrl,le=(X||"U").charAt(0).toUpperCase();return C?n.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:n.jsxs("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 animate-pulse",children:[n.jsx("div",{className:"h-48 bg-gray-300 dark:bg-gray-700 relative",children:n.jsx("div",{className:"absolute top-4 left-4 w-10 h-10 bg-gray-400 dark:bg-gray-600 rounded-full"})}),n.jsxs("div",{className:"pt-20 px-4 pb-4",children:[n.jsx("div",{className:"h-8 bg-gray-300 dark:bg-gray-700 rounded w-48 mb-2"}),n.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-700 rounded w-32"})]})]})}):w?n.jsxs("div",{className:"bg-white dark:bg-gray-900 min-h-screen",children:[n.jsx("div",{className:"sticky top-0 z-40 bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm border-b border-gray-200 dark:border-gray-700 px-4 py-2",children:n.jsx(H,{variant:"ghost",size:"icon",onClick:e,className:"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full","data-testid":"button-back-profile",children:n.jsx(my,{className:"h-5 w-5"})})}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 overflow-hidden",children:[n.jsxs("div",{className:"h-44 relative overflow-hidden",children:[re?n.jsx("img",{src:re,alt:"Cover",className:"w-full h-full object-cover"}):n.jsx("div",{className:"w-full h-full bg-gradient-to-r from-slate-400 via-slate-500 to-slate-600"}),V&&n.jsx(H,{variant:"ghost",size:"icon",className:"absolute top-3 right-3 bg-gray-800/60 hover:bg-gray-800/80 text-white rounded-lg","data-testid":"button-edit-cover",children:n.jsx(cj,{className:"h-5 w-5"})}),n.jsx("div",{className:"absolute -bottom-14 left-4",children:n.jsx("div",{className:"relative",children:n.jsx(rc,{className:"w-28 h-28 border-4 border-white dark:border-gray-800 shadow-lg",children:Y?n.jsx(sf,{src:Y,className:"object-cover"}):n.jsx(nc,{className:"bg-gradient-to-br from-slate-500 to-slate-600 text-white text-3xl font-bold",children:le})})})})]}),n.jsxs("div",{className:"pt-16 px-4 pb-4",children:[n.jsxs("div",{className:"flex justify-between items-start mb-3",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-gray-900 dark:text-white font-bold text-xl flex items-center gap-2",children:[X,(w==null?void 0:w.verified)&&n.jsx(Bc,{className:"w-5 h-5 text-blue-500 fill-current"})]}),n.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:["@",t]})]}),V?n.jsx(H,{variant:"outline",className:"rounded-full px-5 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300",onClick:()=>N("/settings"),"data-testid":"button-edit-profile",children:"Edit profile"}):r?n.jsx(H,{variant:i?"outline":"default",className:`rounded-full px-5 min-w-[100px] ${i?"border-gray-300 dark:border-gray-600 hover:border-red-500 hover:text-red-500":"bg-gray-900 dark:bg-white dark:text-gray-900 hover:bg-gray-800 text-white"}`,onClick:B,disabled:l,"data-testid":"button-follow-profile",children:l?n.jsx(Vo,{className:"h-4 w-4 animate-spin"}):i?"Following":"Follow"}):null]}),ee&&n.jsx("p",{className:"text-gray-800 dark:text-gray-200 mb-3 text-sm",children:ee}),n.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-gray-500 dark:text-gray-400 text-sm mb-3",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Oq,{className:"w-4 h-4"}),n.jsx("span",{children:"India"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(wm,{className:"w-4 h-4"}),n.jsxs("span",{children:["Joined ",new Date().getFullYear()]})]})]}),n.jsxs("div",{className:"flex gap-4 text-sm mb-4",children:[n.jsxs("button",{className:"hover:underline",onClick:()=>x(!0),"data-testid":"button-view-following",children:[n.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:(T==null?void 0:T.following)||0}),n.jsx("span",{className:"text-gray-500 dark:text-gray-400 ml-1",children:"Following"})]}),n.jsxs("button",{className:"hover:underline",onClick:()=>f(!0),"data-testid":"button-view-followers",children:[n.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:(T==null?void 0:T.followers)||0}),n.jsx("span",{className:"text-gray-500 dark:text-gray-400 ml-1",children:"Followers"})]})]}),n.jsx("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:["Posts","Media","Likes"].map(te=>n.jsxs("button",{onClick:()=>a(te),className:`pb-3 px-4 font-medium transition-colors relative ${s===te?"text-gray-900 dark:text-white":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,"data-testid":`button-profile-tab-${te.toLowerCase()}`,children:[te,s===te&&n.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-blue-500 rounded-t-full"})]},te))})]})]}),n.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[s==="Posts"&&n.jsx("div",{className:"space-y-4 mb-6",children:I?n.jsx("div",{className:"space-y-4",children:[1,2,3].map(te=>n.jsx(St,{className:"p-4 animate-pulse",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-gray-300 dark:bg-gray-700 rounded-full"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-700 rounded w-24 mb-2"}),n.jsx("div",{className:"h-3 bg-gray-300 dark:bg-gray-700 rounded w-full mb-1"}),n.jsx("div",{className:"h-3 bg-gray-300 dark:bg-gray-700 rounded w-3/4"})]})]})},te))}):R.length===0?n.jsx(St,{className:"p-8 text-center",children:n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No posts yet."})}):R.map(te=>{var de;return n.jsx(N2,{post:{id:te.id.toString(),content:te.content,authorUsername:te.authorUsername,authorDisplayName:te.authorDisplayName,authorAvatar:te.authorAvatar,authorVerified:te.authorVerified,createdAt:te.createdAt,likes:te.likes||0,comments:te.comments||0,reposts:te.reposts||0,imageUrl:te.imageUrl,hasMedia:te.hasImage,ticker:(de=te.stockMentions)!=null&&de[0]?`$${te.stockMentions[0]}`:"",sentiment:te.sentiment,tags:te.tags||[],stockMentions:te.stockMentions||[],user:{initial:(te.authorDisplayName||"U")[0].toUpperCase(),username:te.authorDisplayName||"",handle:te.authorUsername||"",verified:te.authorVerified||!1,online:!0,avatar:te.authorAvatar||void 0},metrics:{comments:te.comments||0,reposts:te.reposts||0,likes:te.likes||0}},currentUserUsername:r},te.id)})}),s==="Media"&&n.jsx(St,{className:"p-8 text-center",children:n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No media posts yet."})}),s==="Likes"&&n.jsx(St,{className:"p-8 text-center",children:n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Liked posts will appear here."})})]}),n.jsx(bn,{open:h,onOpenChange:f,children:n.jsxs(pn,{className:"max-w-md max-h-[80vh] overflow-y-auto",children:[n.jsx(Zn,{children:n.jsxs(Xn,{className:"flex items-center gap-2",children:[n.jsx(Uo,{className:"w-5 h-5"}),"Followers"]})}),n.jsx("div",{className:"space-y-3 mt-4",children:P.followers.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[n.jsx(Uo,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),n.jsx("p",{children:"No followers yet"})]}):P.followers.map(te=>n.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors cursor-pointer",children:[n.jsx(rc,{className:"w-10 h-10",children:te.avatar?n.jsx(sf,{src:te.avatar}):n.jsx(nc,{className:"bg-gradient-to-br from-blue-600 to-purple-600 text-white font-bold",children:(te.displayName||te.username||"U").charAt(0).toUpperCase()})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:te.displayName||te.username}),n.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["@",te.username]})]})]},te.id))})]})}),n.jsx(bn,{open:m,onOpenChange:x,children:n.jsxs(pn,{className:"max-w-md max-h-[80vh] overflow-y-auto",children:[n.jsx(Zn,{children:n.jsxs(Xn,{className:"flex items-center gap-2",children:[n.jsx(Ub,{className:"w-5 h-5"}),"Following"]})}),n.jsx("div",{className:"space-y-3 mt-4",children:A.following.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[n.jsx(Ub,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),n.jsx("p",{children:"Not following anyone yet"})]}):A.following.map(te=>n.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors cursor-pointer",children:[n.jsx(rc,{className:"w-10 h-10",children:te.avatar?n.jsx(sf,{src:te.avatar}):n.jsx(nc,{className:"bg-gradient-to-br from-blue-600 to-purple-600 text-white font-bold",children:(te.displayName||te.username||"U").charAt(0).toUpperCase()})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:te.displayName||te.username}),n.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["@",te.username]})]})]},te.id))})]})})]}):n.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex flex-col items-center justify-center gap-4",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"User not found"}),n.jsx(H,{onClick:e,"data-testid":"button-back-not-found",children:"Go back"})]})}function _Te({onBackClick:t}){const[e,r]=g.useState("All"),[s,a]=g.useState(!0),[i,o]=g.useState(""),[l,d]=g.useState(!1),[h,f]=g.useState(""),[m,x]=g.useState(null),b=g.useRef(null),[j,N]=g.useState(!0),w=g.useRef(0),[C,T]=g.useState(!0),[O,I]=g.useState(!0),[P,A]=g.useState(!1),[R,B]=g.useState(!1),[V,X]=g.useState(!1),[ee,Y]=g.useState(1),re=g.useRef(null),{toast:le}=Ia(),te=qu(),{selectedTextSnippets:de}=o_();g.useEffect(()=>{let Ue;const Ae=()=>{const We=window.scrollY;window.speechSynthesis.cancel(),typeof window.pauseBannerYouTube=="function"&&window.pauseBannerYouTube(),We>w.current&&We>100?(T(!1),I(!1)):(T(!0),I(!0)),clearTimeout(Ue),Ue=setTimeout(()=>{T(!0),I(!0)},150),w.current=We,a(We<50)};return window.addEventListener("scroll",Ae,{passive:!0}),()=>{window.removeEventListener("scroll",Ae),clearTimeout(Ue)}},[]);const{data:ie=[],isLoading:Z,error:ne,isFetching:oe}=xn({queryKey:["/api/social-posts"],queryFn:async()=>{const Ue=await fetch("/api/social-posts");if(!Ue.ok)throw new Error("Failed to fetch posts");return await Ue.json()},staleTime:120*1e3,gcTime:300*1e3,retry:1,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1});g.useEffect(()=>{if(!re.current)return;const Ue=new IntersectionObserver(Ae=>{Ae[0].isIntersecting&&!Z&&!oe&&ie.length>0&&Y(We=>We+1)},{threshold:.1});return Ue.observe(re.current),()=>Ue.disconnect()},[Z,oe,ie.length]),g.useEffect(()=>{(async()=>{var Ae,We,ot;try{const It=await ks();if(!It){console.log("No user logged in");return}console.log(" Checking profile for authenticated user");const tr=await fetch("/api/user/profile",{headers:{Authorization:`Bearer ${It}`}});if(tr.ok){const Ct=await tr.json();console.log(" Profile check response:",{userId:Ct.userId,email:Ct.email,hasProfile:!!Ct.profile,hasUsername:!!((Ae=Ct.profile)!=null&&Ae.username),hasDOB:!!((We=Ct.profile)!=null&&We.dob),profileData:Ct.profile}),Ct.profile&&te.setQueryData(["my-profile"],Ct.profile),(ot=Ct.profile)!=null&&ot.username&&(f(Ct.profile.username),fetch(`/api/profile/${Ct.profile.username}/stats`).then(we=>we.ok?we.json():{followers:0,following:0}).then(we=>{te.setQueryData(["profile-stats",Ct.profile.username],we),console.log(" Prefetched profile stats:",we)}).catch(()=>{})),!Ct.profile||!Ct.profile.username||!Ct.profile.dob?(console.log(" Profile incomplete (missing username or DOB), showing profile dialog"),d(!0)):console.log(" Profile complete, user can use social feed")}else console.error(" Profile check failed with status:",tr.status)}catch(It){console.error("Error checking profile:",It)}})()},[te]);const U=()=>{r("All"),Y(1),window.scrollTo({top:0,behavior:"smooth"})},W=Ue=>{r(Ue),Y(1),window.scrollTo({top:0,behavior:"smooth"})},be=()=>{window.scrollTo({top:0,behavior:"smooth"})},pe=ie.map(Ue=>{var Ae,We,ot;return{id:Ue.id.toString(),user:{initial:((We=(Ae=Ue.authorDisplayName)==null?void 0:Ae[0])==null?void 0:We.toUpperCase())||"U",username:Ue.authorDisplayName,handle:Ue.authorUsername,verified:Ue.authorVerified,online:!0,avatar:Ue.authorAvatar||void 0},content:Ue.content,timestamp:Ie(Ue.createdAt),tags:Ue.tags||[],sentiment:Ue.sentiment||"neutral",ticker:(ot=Ue.stockMentions)!=null&&ot[0]?`$${Ue.stockMentions[0]}`:"",metrics:{comments:Ue.comments,reposts:Ue.reposts,likes:Ue.likes},hasMedia:Ue.hasImage||!1,imageUrl:Ue.imageUrl||void 0,imageUrls:Ue.imageUrl?[Ue.imageUrl]:[],stockMentions:Ue.stockMentions||[],isAudioPost:Ue.isAudioPost||!1,selectedPostIds:Ue.selectedPostIds||[],authorUsername:Ue.authorUsername,authorDisplayName:Ue.authorDisplayName,createdAt:Ue.createdAt,isRepost:Ue.isRepost||!1,originalPostId:Ue.originalPostId,originalAuthorUsername:Ue.originalAuthorUsername,originalAuthorDisplayName:Ue.originalAuthorDisplayName,originalAuthorAvatar:Ue.originalAuthorAvatar,originalAuthorVerified:Ue.originalAuthorVerified,likes:Ue.likes||0,comments:Ue.comments||0,reposts:Ue.reposts||0}}),ge=Ue=>{let Ae=Ue.trim().toLowerCase();return Ae=Ae.replace(/\s*source:\s*[^,.\n]*[,.\n]?/gi,"").replace(/source:\s*[^,.\n]*[,.\n]?/gi,"").replace(/-\s*[^,.\n]*(?:today|times|watch|news|india|business)[^,.\n]*[,.\n]?/gi,"").replace(/\([^)]*(?:today|times|watch|news|india|business)[^)]*\)/gi,"").replace(/\s+/g," ").trim(),Ae=Ae.replace(/^\s*/gi,"").replace(/^news:\s*/gi,"").replace(/^breaking:\s*/gi,"").trim(),Ae},Ce=new Set,he=new Set,ue=pe.filter(Ue=>{const Ae=Ue.id.toString();if(Ce.has(Ae))return!1;if(Ce.add(Ae),Ue.isRepost)return!0;const We=ge(Ue.content);return he.has(We)?(console.log(` Duplicate content filtered: "${Ue.content.substring(0,100)}..."`),!1):(he.add(We),!0)});let ce=ue;if(i.trim()){const Ue=i.toLowerCase().trim();ce=ue.filter(Ae=>{var We,ot,It,tr,Ct;return Ae.content.toLowerCase().includes(Ue)||((ot=(We=Ae.user)==null?void 0:We.username)==null?void 0:ot.toLowerCase().includes(Ue))||((It=Ae.ticker)==null?void 0:It.toLowerCase().includes(Ue))||((tr=Ae.stockMentions)==null?void 0:tr.some(we=>we.toLowerCase().includes(Ue)))||((Ct=Ae.tags)==null?void 0:Ct.some(we=>we.toLowerCase().includes(Ue)))})}let Ee=e==="All"?ce:e==="Symbol"?ce.filter(Ue=>Ue.stockMentions&&Ue.stockMentions.length>0):e==="Bullish"?ce.filter(Ue=>Ue.sentiment==="bullish"):e==="Bearish"?ce.filter(Ue=>Ue.sentiment==="bearish"):e==="Profile"?ce.filter(Ue=>{var Ae,We,ot;return((Ae=Ue.authorUsername)==null?void 0:Ae.toLowerCase())===(h==null?void 0:h.toLowerCase())||((ot=(We=Ue.user)==null?void 0:We.handle)==null?void 0:ot.toLowerCase())===(h==null?void 0:h.toLowerCase())}):ce.filter(Ue=>{var Ae;return(Ae=Ue.tags)==null?void 0:Ae.some(We=>We.toLowerCase().includes(e.toLowerCase()))});const Le=g.useMemo(()=>Ee.sort((Ue,Ae)=>{const We=Ue.stockMentions&&Ue.stockMentions.length>0,ot=Ue.ticker&&Ue.ticker.length>0,It=Ae.stockMentions&&Ae.stockMentions.length>0,tr=Ae.ticker&&Ae.ticker.length>0;if((We||ot)&&!(It||tr))return-1;if(!(We||ot)&&(It||tr))return 1;const Ct=new Date(Ue.timestamp||0).getTime();return new Date(Ae.timestamp||0).getTime()-Ct}),[Ee]);function Ie(Ue){const Ae=new Date(Ue),ot=new Date().getTime()-Ae.getTime(),It=ot/(1e3*60),tr=ot/(1e3*60*60),Ct=ot/(1e3*60*60*24);if(It<1)return"now";if(tr<1)return`${Math.floor(It)}m`;if(tr<24)return`${Math.floor(tr)}h`;if(Ct<7)return`${Math.floor(Ct)}d`;const we=String(Ae.getDate()).padStart(2,"0"),Fe=String(Ae.getMonth()+1).padStart(2,"0"),Ye=Ae.getFullYear();return`${we}-${Fe}-${Ye}`}return Z&&ie.length===0?n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-muted to-background dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 text-foreground",children:[n.jsx(l3,{onAllClick:U,isRefreshing:oe,selectedFilter:e,onFilterChange:W,searchQuery:i,setSearchQuery:o,onSearch:be,showAppBar:C,onBackClick:t}),n.jsx("div",{className:"max-w-3xl mx-auto px-3 py-3",children:n.jsx("div",{className:"space-y-4",children:[...Array(8)].map((Ue,Ae)=>n.jsx(St,{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 animate-pulse shadow-sm",children:n.jsxs(Kt,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-12 h-12 bg-gray-200 dark:bg-gray-700 rounded-full"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"w-32 h-4 bg-gray-200 dark:bg-gray-700 rounded"}),n.jsx("div",{className:"w-24 h-3 bg-gray-200 dark:bg-gray-700 rounded"})]})]}),n.jsxs("div",{className:"space-y-2 mb-4",children:[n.jsx("div",{className:"w-full h-4 bg-gray-200 dark:bg-gray-700 rounded"}),n.jsx("div",{className:"w-3/4 h-4 bg-gray-200 dark:bg-gray-700 rounded"}),n.jsx("div",{className:"w-1/2 h-4 bg-gray-200 dark:bg-gray-700 rounded"})]}),n.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[n.jsx("div",{className:"w-16 h-6 bg-gray-200 dark:bg-gray-700 rounded"}),n.jsx("div",{className:"w-16 h-6 bg-gray-200 dark:bg-gray-700 rounded"}),n.jsx("div",{className:"w-16 h-6 bg-gray-200 dark:bg-gray-700 rounded"})]})]})},Ae))})})]}):ne?n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-muted to-background dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 text-foreground",children:[n.jsx(l3,{onAllClick:U,isRefreshing:oe,selectedFilter:e,onFilterChange:W,searchQuery:i,setSearchQuery:o,onSearch:be,showAppBar:C,onBackClick:t}),n.jsx("div",{className:"max-w-3xl mx-auto px-3 py-3",children:n.jsx(St,{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 shadow-sm",children:n.jsx(Kt,{className:"p-4 text-center",children:n.jsx("p",{className:"text-red-600 dark:text-red-400",children:"Failed to load posts. Please try again later."})})})})]}):m?n.jsx(ATe,{username:m,onBack:()=>x(null),currentUserUsername:h}):n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-muted to-background dark:from-slate-900 dark:via-slate-800 dark:to-slate-900",ref:b,children:[t&&n.jsx(H,{onClick:t,variant:"ghost",size:"icon",className:"lg:hidden absolute top-4 right-4 z-50 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full","data-testid":"button-back-to-home-neofeed",children:n.jsx(my,{className:"h-6 w-6"})}),n.jsx(l3,{onAllClick:U,isRefreshing:oe,selectedFilter:e,onFilterChange:W,searchQuery:i,setSearchQuery:o,onSearch:be,showAppBar:C,onBackClick:t}),e!=="Profile"&&n.jsx("div",{className:"px-4 py-4 max-w-7xl mx-auto",children:n.jsx(dme,{})}),n.jsxs("div",{className:"flex-1 flex gap-2 xl:gap-4 px-2 md:px-3 py-2 md:py-3 max-w-6xl mx-auto",children:[n.jsxs("div",{className:"flex-1 max-w-4xl",children:[e==="Profile"&&n.jsx(CTe,{}),n.jsxs("div",{className:"space-y-3 xl:space-y-6",children:[Le.map(Ue=>n.jsx(N2,{post:Ue,currentUserUsername:h,onViewUserProfile:x},Ue.id)),n.jsx("div",{ref:re,className:"flex justify-center py-8","data-testid":"loader-infinite-scroll",children:(oe||Z&&ie.length>0)&&n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})]})]}),n.jsx("div",{className:"hidden md:block w-80 xl:w-96 flex-shrink-0",children:n.jsx("div",{className:"sticky top-[140px] xl:top-[200px] z-30",children:n.jsx(xN,{})})})]}),n.jsx(s4e,{isOpen:l,onClose:()=>d(!1),onSuccess:Ue=>{localStorage.setItem("currentUsername",Ue),d(!1),le({title:"Profile Created!",description:"You can now post and interact on the social feed."}),setTimeout(()=>window.location.reload(),500)}}),n.jsx(bn,{open:P,onOpenChange:A,children:n.jsx(pn,{className:"max-w-[95vw] max-h-[90vh] overflow-y-auto p-0",children:n.jsx("div",{className:"p-4",children:n.jsx(xN,{hideAudioMode:!0})})})}),n.jsx(bn,{open:R,onOpenChange:B,children:n.jsx(pn,{className:"max-w-[95vw] max-h-[90vh] overflow-y-auto p-0 border-0 bg-transparent shadow-none [&>button]:hidden",children:n.jsx(xN,{initialViewMode:"audio",onMinimize:()=>B(!1)})})}),n.jsx(bn,{open:V,onOpenChange:X,children:n.jsx(pn,{className:"max-w-[95vw] max-h-[90vh] overflow-y-auto p-0",children:n.jsx("div",{className:"p-4",children:n.jsx(xN,{initialViewMode:"message",hideAudioMode:!0})})})}),n.jsx("div",{className:"md:hidden",children:n.jsx(bTe,{snippets:de,onTap:()=>B(!0)})}),n.jsx("div",{className:`md:hidden fixed bottom-0 left-0 right-0 z-50 pb-4 px-6 pointer-events-none transition-all duration-300 ${O?"translate-y-0 opacity-100":"translate-y-24 opacity-0"}`,children:n.jsx("div",{className:"max-w-xs mx-auto backdrop-blur-md rounded-full shadow-lg pointer-events-auto transition-all duration-300 bg-white/90 dark:bg-gray-900/90 border border-gray-200/50 dark:border-gray-700/50",children:n.jsxs("div",{className:"flex items-center justify-around px-1.5 py-1.5",children:[n.jsx("button",{onClick:()=>W("All"),className:"flex items-center justify-center flex-1 rounded-full px-4 py-2 transition-all duration-200 text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white","data-testid":"button-home-mobile",children:n.jsx(dj,{className:"h-5 w-5"})}),n.jsx("button",{onClick:()=>A(!0),className:"flex items-center justify-center flex-1 rounded-full px-4 py-2 shadow-md transition-all duration-200 bg-gray-900 dark:bg-white text-white dark:text-gray-900","data-testid":"button-create-mobile",children:n.jsx(vi,{className:"h-5 w-5"})}),n.jsx("button",{onClick:()=>B(!R),className:`flex items-center justify-center flex-1 rounded-full px-4 py-2 transition-all duration-200 ${R?"text-purple-600 dark:text-purple-400":"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,"data-testid":"button-minicast-mobile",children:n.jsx(Mq,{className:"h-5 w-5"})})]})})}),n.jsx("div",{className:"md:hidden h-20"})]})}function CJ({onBackClick:t}){return n.jsx(ime,{children:n.jsx(_Te,{onBackClick:t})})}var GL=1,ITe=.9,MTe=.8,OTe=.17,c3=.1,d3=.999,RTe=.9999,DTe=.99,$Te=/[\\\/_+.#"@\[\(\{&]/,LTe=/[\\\/_+.#"@\[\(\{&]/g,FTe=/[\s-]/,EJ=/[\s-]/g;function W5(t,e,r,s,a,i,o){if(i===e.length)return a===t.length?GL:DTe;var l=`${a},${i}`;if(o[l]!==void 0)return o[l];for(var d=s.charAt(i),h=r.indexOf(d,a),f=0,m,x,b,j;h>=0;)m=W5(t,e,r,s,h+1,i+1,o),m>f&&(h===a?m*=GL:$Te.test(t.charAt(h-1))?(m*=MTe,b=t.slice(a,h-1).match(LTe),b&&a>0&&(m*=Math.pow(d3,b.length))):FTe.test(t.charAt(h-1))?(m*=ITe,j=t.slice(a,h-1).match(EJ),j&&a>0&&(m*=Math.pow(d3,j.length))):(m*=OTe,a>0&&(m*=Math.pow(d3,h-a))),t.charAt(h)!==e.charAt(i)&&(m*=RTe)),(m<c3&&r.charAt(h-1)===s.charAt(i+1)||s.charAt(i+1)===s.charAt(i)&&r.charAt(h-1)!==s.charAt(i))&&(x=W5(t,e,r,s,h+1,i+2,o),x*c3>m&&(m=x*c3)),m>f&&(f=m),h=r.indexOf(d,h+1);return o[l]=f,f}function XL(t){return t.toLowerCase().replace(EJ," ")}function BTe(t,e,r){return t=r&&r.length>0?`${t+" "+r.join(" ")}`:t,W5(t,e,XL(t),XL(e),0,0,{})}var Zv='[cmdk-group=""]',u3='[cmdk-group-items=""]',UTe='[cmdk-group-heading=""]',TJ='[cmdk-item=""]',QL=`${TJ}:not([aria-disabled="true"])`,Y5="cmdk-item-select",Ix="data-value",zTe=(t,e,r)=>BTe(t,e,r),PJ=g.createContext(void 0),S1=()=>g.useContext(PJ),AJ=g.createContext(void 0),fI=()=>g.useContext(AJ),_J=g.createContext(void 0),IJ=g.forwardRef((t,e)=>{let r=Mx(()=>{var W,be;return{search:"",value:(be=(W=t.value)!=null?W:t.defaultValue)!=null?be:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),s=Mx(()=>new Set),a=Mx(()=>new Map),i=Mx(()=>new Map),o=Mx(()=>new Set),l=MJ(t),{label:d,children:h,value:f,onValueChange:m,filter:x,shouldFilter:b,loop:j,disablePointerSelection:N=!1,vimBindings:w=!0,...C}=t,T=wo(),O=wo(),I=wo(),P=g.useRef(null),A=ZTe();E0(()=>{if(f!==void 0){let W=f.trim();r.current.value=W,R.emit()}},[f]),E0(()=>{A(6,re)},[]);let R=g.useMemo(()=>({subscribe:W=>(o.current.add(W),()=>o.current.delete(W)),snapshot:()=>r.current,setState:(W,be,pe)=>{var ge,Ce,he,ue;if(!Object.is(r.current[W],be)){if(r.current[W]=be,W==="search")Y(),X(),A(1,ee);else if(W==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let ce=document.getElementById(I);ce?ce.focus():(ge=document.getElementById(T))==null||ge.focus()}if(A(7,()=>{var ce;r.current.selectedItemId=(ce=le())==null?void 0:ce.id,R.emit()}),pe||A(5,re),((Ce=l.current)==null?void 0:Ce.value)!==void 0){let ce=be??"";(ue=(he=l.current).onValueChange)==null||ue.call(he,ce);return}}R.emit()}},emit:()=>{o.current.forEach(W=>W())}}),[]),B=g.useMemo(()=>({value:(W,be,pe)=>{var ge;be!==((ge=i.current.get(W))==null?void 0:ge.value)&&(i.current.set(W,{value:be,keywords:pe}),r.current.filtered.items.set(W,V(be,pe)),A(2,()=>{X(),R.emit()}))},item:(W,be)=>(s.current.add(W),be&&(a.current.has(be)?a.current.get(be).add(W):a.current.set(be,new Set([W]))),A(3,()=>{Y(),X(),r.current.value||ee(),R.emit()}),()=>{i.current.delete(W),s.current.delete(W),r.current.filtered.items.delete(W);let pe=le();A(4,()=>{Y(),(pe==null?void 0:pe.getAttribute("id"))===W&&ee(),R.emit()})}),group:W=>(a.current.has(W)||a.current.set(W,new Set),()=>{i.current.delete(W),a.current.delete(W)}),filter:()=>l.current.shouldFilter,label:d||t["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:T,inputId:I,labelId:O,listInnerRef:P}),[]);function V(W,be){var pe,ge;let Ce=(ge=(pe=l.current)==null?void 0:pe.filter)!=null?ge:zTe;return W?Ce(W,r.current.search,be):0}function X(){if(!r.current.search||l.current.shouldFilter===!1)return;let W=r.current.filtered.items,be=[];r.current.filtered.groups.forEach(ge=>{let Ce=a.current.get(ge),he=0;Ce.forEach(ue=>{let ce=W.get(ue);he=Math.max(ce,he)}),be.push([ge,he])});let pe=P.current;te().sort((ge,Ce)=>{var he,ue;let ce=ge.getAttribute("id"),Ee=Ce.getAttribute("id");return((he=W.get(Ee))!=null?he:0)-((ue=W.get(ce))!=null?ue:0)}).forEach(ge=>{let Ce=ge.closest(u3);Ce?Ce.appendChild(ge.parentElement===Ce?ge:ge.closest(`${u3} > *`)):pe.appendChild(ge.parentElement===pe?ge:ge.closest(`${u3} > *`))}),be.sort((ge,Ce)=>Ce[1]-ge[1]).forEach(ge=>{var Ce;let he=(Ce=P.current)==null?void 0:Ce.querySelector(`${Zv}[${Ix}="${encodeURIComponent(ge[0])}"]`);he==null||he.parentElement.appendChild(he)})}function ee(){let W=te().find(pe=>pe.getAttribute("aria-disabled")!=="true"),be=W==null?void 0:W.getAttribute(Ix);R.setState("value",be||void 0)}function Y(){var W,be,pe,ge;if(!r.current.search||l.current.shouldFilter===!1){r.current.filtered.count=s.current.size;return}r.current.filtered.groups=new Set;let Ce=0;for(let he of s.current){let ue=(be=(W=i.current.get(he))==null?void 0:W.value)!=null?be:"",ce=(ge=(pe=i.current.get(he))==null?void 0:pe.keywords)!=null?ge:[],Ee=V(ue,ce);r.current.filtered.items.set(he,Ee),Ee>0&&Ce++}for(let[he,ue]of a.current)for(let ce of ue)if(r.current.filtered.items.get(ce)>0){r.current.filtered.groups.add(he);break}r.current.filtered.count=Ce}function re(){var W,be,pe;let ge=le();ge&&(((W=ge.parentElement)==null?void 0:W.firstChild)===ge&&((pe=(be=ge.closest(Zv))==null?void 0:be.querySelector(UTe))==null||pe.scrollIntoView({block:"nearest"})),ge.scrollIntoView({block:"nearest"}))}function le(){var W;return(W=P.current)==null?void 0:W.querySelector(`${TJ}[aria-selected="true"]`)}function te(){var W;return Array.from(((W=P.current)==null?void 0:W.querySelectorAll(QL))||[])}function de(W){let be=te()[W];be&&R.setState("value",be.getAttribute(Ix))}function ie(W){var be;let pe=le(),ge=te(),Ce=ge.findIndex(ue=>ue===pe),he=ge[Ce+W];(be=l.current)!=null&&be.loop&&(he=Ce+W<0?ge[ge.length-1]:Ce+W===ge.length?ge[0]:ge[Ce+W]),he&&R.setState("value",he.getAttribute(Ix))}function Z(W){let be=le(),pe=be==null?void 0:be.closest(Zv),ge;for(;pe&&!ge;)pe=W>0?QTe(pe,Zv):JTe(pe,Zv),ge=pe==null?void 0:pe.querySelector(QL);ge?R.setState("value",ge.getAttribute(Ix)):ie(W)}let ne=()=>de(te().length-1),oe=W=>{W.preventDefault(),W.metaKey?ne():W.altKey?Z(1):ie(1)},U=W=>{W.preventDefault(),W.metaKey?de(0):W.altKey?Z(-1):ie(-1)};return g.createElement(lr.div,{ref:e,tabIndex:-1,...C,"cmdk-root":"",onKeyDown:W=>{var be;(be=C.onKeyDown)==null||be.call(C,W);let pe=W.nativeEvent.isComposing||W.keyCode===229;if(!(W.defaultPrevented||pe))switch(W.key){case"n":case"j":{w&&W.ctrlKey&&oe(W);break}case"ArrowDown":{oe(W);break}case"p":case"k":{w&&W.ctrlKey&&U(W);break}case"ArrowUp":{U(W);break}case"Home":{W.preventDefault(),de(0);break}case"End":{W.preventDefault(),ne();break}case"Enter":{W.preventDefault();let ge=le();if(ge){let Ce=new Event(Y5);ge.dispatchEvent(Ce)}}}}},g.createElement("label",{"cmdk-label":"",htmlFor:B.inputId,id:B.labelId,style:t3e},d),dk(t,W=>g.createElement(AJ.Provider,{value:R},g.createElement(PJ.Provider,{value:B},W))))}),VTe=g.forwardRef((t,e)=>{var r,s;let a=wo(),i=g.useRef(null),o=g.useContext(_J),l=S1(),d=MJ(t),h=(s=(r=d.current)==null?void 0:r.forceMount)!=null?s:o==null?void 0:o.forceMount;E0(()=>{if(!h)return l.item(a,o==null?void 0:o.id)},[h]);let f=OJ(a,i,[t.value,t.children,i],t.keywords),m=fI(),x=Yp(A=>A.value&&A.value===f.current),b=Yp(A=>h||l.filter()===!1?!0:A.search?A.filtered.items.get(a)>0:!0);g.useEffect(()=>{let A=i.current;if(!(!A||t.disabled))return A.addEventListener(Y5,j),()=>A.removeEventListener(Y5,j)},[b,t.onSelect,t.disabled]);function j(){var A,R;N(),(R=(A=d.current).onSelect)==null||R.call(A,f.current)}function N(){m.setState("value",f.current,!0)}if(!b)return null;let{disabled:w,value:C,onSelect:T,forceMount:O,keywords:I,...P}=t;return g.createElement(lr.div,{ref:vm(i,e),...P,id:a,"cmdk-item":"",role:"option","aria-disabled":!!w,"aria-selected":!!x,"data-disabled":!!w,"data-selected":!!x,onPointerMove:w||l.getDisablePointerSelection()?void 0:N,onClick:w?void 0:j},t.children)}),qTe=g.forwardRef((t,e)=>{let{heading:r,children:s,forceMount:a,...i}=t,o=wo(),l=g.useRef(null),d=g.useRef(null),h=wo(),f=S1(),m=Yp(b=>a||f.filter()===!1?!0:b.search?b.filtered.groups.has(o):!0);E0(()=>f.group(o),[]),OJ(o,l,[t.value,t.heading,d]);let x=g.useMemo(()=>({id:o,forceMount:a}),[a]);return g.createElement(lr.div,{ref:vm(l,e),...i,"cmdk-group":"",role:"presentation",hidden:m?void 0:!0},r&&g.createElement("div",{ref:d,"cmdk-group-heading":"","aria-hidden":!0,id:h},r),dk(t,b=>g.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?h:void 0},g.createElement(_J.Provider,{value:x},b))))}),HTe=g.forwardRef((t,e)=>{let{alwaysRender:r,...s}=t,a=g.useRef(null),i=Yp(o=>!o.search);return!r&&!i?null:g.createElement(lr.div,{ref:vm(a,e),...s,"cmdk-separator":"",role:"separator"})}),WTe=g.forwardRef((t,e)=>{let{onValueChange:r,...s}=t,a=t.value!=null,i=fI(),o=Yp(h=>h.search),l=Yp(h=>h.selectedItemId),d=S1();return g.useEffect(()=>{t.value!=null&&i.setState("search",t.value)},[t.value]),g.createElement(lr.input,{ref:e,...s,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":d.listId,"aria-labelledby":d.labelId,"aria-activedescendant":l,id:d.inputId,type:"text",value:a?t.value:o,onChange:h=>{a||i.setState("search",h.target.value),r==null||r(h.target.value)}})}),YTe=g.forwardRef((t,e)=>{let{children:r,label:s="Suggestions",...a}=t,i=g.useRef(null),o=g.useRef(null),l=Yp(h=>h.selectedItemId),d=S1();return g.useEffect(()=>{if(o.current&&i.current){let h=o.current,f=i.current,m,x=new ResizeObserver(()=>{m=requestAnimationFrame(()=>{let b=h.offsetHeight;f.style.setProperty("--cmdk-list-height",b.toFixed(1)+"px")})});return x.observe(h),()=>{cancelAnimationFrame(m),x.unobserve(h)}}},[]),g.createElement(lr.div,{ref:vm(i,e),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":s,id:d.listId},dk(t,h=>g.createElement("div",{ref:vm(o,d.listInnerRef),"cmdk-list-sizer":""},h)))}),KTe=g.forwardRef((t,e)=>{let{open:r,onOpenChange:s,overlayClassName:a,contentClassName:i,container:o,...l}=t;return g.createElement(GH,{open:r,onOpenChange:s},g.createElement(XH,{container:o},g.createElement(LA,{"cmdk-overlay":"",className:a}),g.createElement(FA,{"aria-label":t.label,"cmdk-dialog":"",className:i},g.createElement(IJ,{ref:e,...l}))))}),GTe=g.forwardRef((t,e)=>Yp(r=>r.filtered.count===0)?g.createElement(lr.div,{ref:e,...t,"cmdk-empty":"",role:"presentation"}):null),XTe=g.forwardRef((t,e)=>{let{progress:r,children:s,label:a="Loading...",...i}=t;return g.createElement(lr.div,{ref:e,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},dk(t,o=>g.createElement("div",{"aria-hidden":!0},o)))}),cc=Object.assign(IJ,{List:YTe,Item:VTe,Input:WTe,Group:qTe,Separator:HTe,Dialog:KTe,Empty:GTe,Loading:XTe});function QTe(t,e){let r=t.nextElementSibling;for(;r;){if(r.matches(e))return r;r=r.nextElementSibling}}function JTe(t,e){let r=t.previousElementSibling;for(;r;){if(r.matches(e))return r;r=r.previousElementSibling}}function MJ(t){let e=g.useRef(t);return E0(()=>{e.current=t}),e}var E0=typeof window>"u"?g.useEffect:g.useLayoutEffect;function Mx(t){let e=g.useRef();return e.current===void 0&&(e.current=t()),e}function Yp(t){let e=fI(),r=()=>t(e.snapshot());return g.useSyncExternalStore(e.subscribe,r,r)}function OJ(t,e,r,s=[]){let a=g.useRef(),i=S1();return E0(()=>{var o;let l=(()=>{var h;for(let f of r){if(typeof f=="string")return f.trim();if(typeof f=="object"&&"current"in f)return f.current?(h=f.current.textContent)==null?void 0:h.trim():a.current}})(),d=s.map(h=>h.trim());i.value(t,l,d),(o=e.current)==null||o.setAttribute(Ix,l),a.current=l}),a}var ZTe=()=>{let[t,e]=g.useState(),r=Mx(()=>new Map);return E0(()=>{r.current.forEach(s=>s()),r.current=new Map},[t]),(s,a)=>{r.current.set(s,a),e({})}};function e3e(t){let e=t.type;return typeof e=="function"?e(t.props):"render"in e?e.render(t.props):t}function dk({asChild:t,children:e},r){return t&&g.isValidElement(e)?g.cloneElement(e3e(e),{ref:e.ref},r(e.props.children)):r(e)}var t3e={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const ZN=g.forwardRef(({className:t,...e},r)=>n.jsx(cc,{ref:r,className:Ht("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...e}));ZN.displayName=cc.displayName;const ej=g.forwardRef(({className:t,...e},r)=>n.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[n.jsx(Zl,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),n.jsx(cc.Input,{ref:r,className:Ht("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...e})]}));ej.displayName=cc.Input.displayName;const tj=g.forwardRef(({className:t,...e},r)=>n.jsx(cc.List,{ref:r,className:Ht("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...e}));tj.displayName=cc.List.displayName;const rj=g.forwardRef((t,e)=>n.jsx(cc.Empty,{ref:e,className:"py-6 text-center text-sm",...t}));rj.displayName=cc.Empty.displayName;const nj=g.forwardRef(({className:t,...e},r)=>n.jsx(cc.Group,{ref:r,className:Ht("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...e}));nj.displayName=cc.Group.displayName;const r3e=g.forwardRef(({className:t,...e},r)=>n.jsx(cc.Separator,{ref:r,className:Ht("-mx-1 h-px bg-border",t),...e}));r3e.displayName=cc.Separator.displayName;const sj=g.forwardRef(({className:t,...e},r)=>n.jsx(cc.Item,{ref:r,className:Ht("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t),...e}));sj.displayName=cc.Item.displayName;var uk="Popover",[RJ]=Hc(uk,[Jp]),k1=Jp(),[n3e,ig]=RJ(uk),DJ=t=>{const{__scopePopover:e,children:r,open:s,defaultOpen:a,onOpenChange:i,modal:o=!1}=t,l=k1(e),d=g.useRef(null),[h,f]=g.useState(!1),[m,x]=bm({prop:s,defaultProp:a??!1,onChange:i,caller:uk});return n.jsx(IA,{...l,children:n.jsx(n3e,{scope:e,contentId:wo(),triggerRef:d,open:m,onOpenChange:x,onOpenToggle:g.useCallback(()=>x(b=>!b),[x]),hasCustomAnchor:h,onCustomAnchorAdd:g.useCallback(()=>f(!0),[]),onCustomAnchorRemove:g.useCallback(()=>f(!1),[]),modal:o,children:r})})};DJ.displayName=uk;var $J="PopoverAnchor",s3e=g.forwardRef((t,e)=>{const{__scopePopover:r,...s}=t,a=ig($J,r),i=k1(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return g.useEffect(()=>(o(),()=>l()),[o,l]),n.jsx(t1,{...i,...s,ref:e})});s3e.displayName=$J;var LJ="PopoverTrigger",FJ=g.forwardRef((t,e)=>{const{__scopePopover:r,...s}=t,a=ig(LJ,r),i=k1(r),o=$n(e,a.triggerRef),l=n.jsx(lr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":qJ(a.open),...s,ref:o,onClick:At(t.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:n.jsx(t1,{asChild:!0,...i,children:l})});FJ.displayName=LJ;var mI="PopoverPortal",[a3e,i3e]=RJ(mI,{forceMount:void 0}),BJ=t=>{const{__scopePopover:e,forceMount:r,children:s,container:a}=t,i=ig(mI,e);return n.jsx(a3e,{scope:e,forceMount:r,children:n.jsx(Wc,{present:r||i.open,children:n.jsx(tv,{asChild:!0,container:a,children:s})})})};BJ.displayName=mI;var qy="PopoverContent",UJ=g.forwardRef((t,e)=>{const r=i3e(qy,t.__scopePopover),{forceMount:s=r.forceMount,...a}=t,i=ig(qy,t.__scopePopover);return n.jsx(Wc,{present:s||i.open,children:i.modal?n.jsx(l3e,{...a,ref:e}):n.jsx(c3e,{...a,ref:e})})});UJ.displayName=qy;var o3e=Up("PopoverContent.RemoveScroll"),l3e=g.forwardRef((t,e)=>{const r=ig(qy,t.__scopePopover),s=g.useRef(null),a=$n(e,s),i=g.useRef(!1);return g.useEffect(()=>{const o=s.current;if(o)return oS(o)},[]),n.jsx(n1,{as:o3e,allowPinchZoom:!0,children:n.jsx(zJ,{...t,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:At(t.onCloseAutoFocus,o=>{var l;o.preventDefault(),i.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:At(t.onPointerDownOutside,o=>{const l=o.detail.originalEvent,d=l.button===0&&l.ctrlKey===!0,h=l.button===2||d;i.current=h},{checkForDefaultPrevented:!1}),onFocusOutside:At(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),c3e=g.forwardRef((t,e)=>{const r=ig(qy,t.__scopePopover),s=g.useRef(!1),a=g.useRef(!1);return n.jsx(zJ,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(s.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:i=>{var d,h;(d=t.onInteractOutside)==null||d.call(t,i),i.defaultPrevented||(s.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((h=r.triggerRef.current)==null?void 0:h.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),zJ=g.forwardRef((t,e)=>{const{__scopePopover:r,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,...m}=t,x=ig(qy,r),b=k1(r);return aS(),n.jsx(r1,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:i,children:n.jsx(L0,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:f,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:h,onDismiss:()=>x.onOpenChange(!1),children:n.jsx(tS,{"data-state":qJ(x.open),role:"dialog",id:x.contentId,...b,...m,ref:e,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),VJ="PopoverClose",d3e=g.forwardRef((t,e)=>{const{__scopePopover:r,...s}=t,a=ig(VJ,r);return n.jsx(lr.button,{type:"button",...s,ref:e,onClick:At(t.onClick,()=>a.onOpenChange(!1))})});d3e.displayName=VJ;var u3e="PopoverArrow",h3e=g.forwardRef((t,e)=>{const{__scopePopover:r,...s}=t,a=k1(r);return n.jsx(rS,{...a,...s,ref:e})});h3e.displayName=u3e;function qJ(t){return t?"open":"closed"}var f3e=DJ,m3e=FJ,p3e=BJ,HJ=UJ;const wa=f3e,Na=m3e,fa=g.forwardRef(({className:t,align:e="center",sideOffset:r=4,...s},a)=>n.jsx(p3e,{children:n.jsx(HJ,{ref:a,align:e,sideOffset:r,className:Ht("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",t),...s})}));fa.displayName=HJ.displayName;const Pb=g.forwardRef(({className:t,...e},r)=>n.jsx("div",{className:"relative w-full overflow-auto",children:n.jsx("table",{ref:r,className:Ht("w-full caption-bottom text-sm",t),...e})}));Pb.displayName="Table";const Ab=g.forwardRef(({className:t,...e},r)=>n.jsx("thead",{ref:r,className:Ht("[&_tr]:border-b",t),...e}));Ab.displayName="TableHeader";const _b=g.forwardRef(({className:t,...e},r)=>n.jsx("tbody",{ref:r,className:Ht("[&_tr:last-child]:border-0",t),...e}));_b.displayName="TableBody";const g3e=g.forwardRef(({className:t,...e},r)=>n.jsx("tfoot",{ref:r,className:Ht("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));g3e.displayName="TableFooter";const Uh=g.forwardRef(({className:t,...e},r)=>n.jsx("tr",{ref:r,className:Ht("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...e}));Uh.displayName="TableRow";const Tn=g.forwardRef(({className:t,...e},r)=>n.jsx("th",{ref:r,className:Ht("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));Tn.displayName="TableHead";const Kn=g.forwardRef(({className:t,...e},r)=>n.jsx("td",{ref:r,className:Ht("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));Kn.displayName="TableCell";const x3e=g.forwardRef(({className:t,...e},r)=>n.jsx("caption",{ref:r,className:Ht("mt-4 text-sm text-muted-foreground",t),...e}));x3e.displayName="TableCaption";function y3e({height:t=320,ohlcData:e=[],symbol:r="NIFTY 50",isInteractiveMode:s=!1,onCandleClick:a,selectionLineIndex:i=null,mockStartIndex:o=null,timeRange:l=null,indicators:d={},chartType:h="line",onSelectedPointsChange:f,onChartReset:m,onChartExpand:x,externalSelectedPoints:b,enablePointSelection:j=!1,parentDrawingMode:N=null,isExpanded:w=!1,resetToken:C=0,onSelectActivated:T,tradeMarkers:O=[],hideControls:I=!1}){const P=g.useRef(null),A=g.useRef(null),[R,B]=g.useState({x:0,y:0,visible:!1}),[V,X]=g.useState(!1),ee=g.useRef(V),[Y,re]=g.useState(b||[]),le=(Ne,Oe)=>Ne.length!==Oe.length?!1:Ne.every((me,je)=>{const ke=Oe[je];return me.candleIndex===ke.candleIndex&&me.pointNumber===ke.pointNumber&&me.label===ke.label}),te=(Ne,Oe)=>{var vr;const me=((vr=Ne==null?void 0:Ne.points)==null?void 0:vr.length)||4,je=Oe||me,ke=je*15;if(!he||he.length<ke||!Ne){console.log(` Insufficient OHLC data window or no pattern selected for ${je}-candle analysis`),console.log(` Need: ${ke} candles, Have: ${(he==null?void 0:he.length)||0} candles`);return}console.log(" Starting DYNAMIC pattern detection using OHLC data window timestamps..."),console.log(` Pattern: "${Ne.name||"Unknown"}" | Points: ${me} | Using: ${je} candles`),console.log(` OHLC Data Window: ${he.length} perfect 1-minute candles available`);const Te=[],Je=()=>{if(he.length===0)return 0;const Dt=he[0],Xt=Dt.timestamp||Dt.time||Date.now()/1e3,qt=new Date(typeof Xt=="string"?Xt:Xt*1e3),ar=555,Cr=new Date(qt);Cr.setHours(0,0,0,0),Cr.setMinutes(ar);const An=Math.floor(Cr.getTime()/1e3);for(let br=0;br<he.length;br++){const yr=he[br].timestamp||he[br].time||0,Qn=typeof yr=="string"?new Date(yr).getTime()/1e3:yr;if(Qn>=An)return console.log(` Market Open detected at index ${br} (${new Date(Qn*1e3).toLocaleTimeString()})`),br}return console.log(" Market open not found, starting from beginning"),0},Q=(Dt,Xt)=>{const qt=[];for(let ar=0;ar<Xt;ar++){const Cr=Dt+ar*15,An=Math.min(Cr+15,he.length);if(An<=Cr)break;const br=he.slice(Cr,An);if(br.length===0)break;const yr=Array.isArray(br[0])?br[0][1]:br[0].open,Qn=Array.isArray(br[br.length-1])?br[br.length-1][4]:br[br.length-1].close;let Ws=-1/0,oi=1/0,qn=Cr,Jn=Cr,Fr=0,ct=0;br.forEach((ut,Bt)=>{const Nt=Array.isArray(ut)?ut[2]:ut.high,ur=Array.isArray(ut)?ut[3]:ut.low,Br=Array.isArray(ut)?ut[0]:ut.timestamp;Nt>Ws&&(Ws=Nt,qn=Cr+Bt,Fr=Br),ur<oi&&(oi=ur,Jn=Cr+Bt,ct=Br)});const yt=Array.isArray(br[0])?br[0][0]:br[0].timestamp;qt.push({originalIndex:Cr,open:yr,high:Ws,low:oi,close:Qn,timestamp:yt,intervalMinutes:ar*15,extremums:{highIndex:qn,lowIndex:Jn,highTimestamp:Fr,lowTimestamp:ct}})}return qt},tt=.01,it=(Dt,Xt)=>Math.abs(Dt-Xt)<=tt?"=":Dt>Xt?">":"<",ft=Ne.relationships||[];console.log(` Pattern "${Ne.name}" has relationships:`,ft);const He=new Map;he.forEach((Dt,Xt)=>{const qt=Array.isArray(Dt)?Dt[0]:Dt.timestamp||Dt.time||0;He.set(qt,Xt)}),console.log(` TIMESTAMP MAP: Created mapping for ${He.size} optimized candles`);const Vt=Je(),Zt=he.length-je*15;for(let Dt=Vt;Dt<=Zt;Dt+=15){const Xt=Q(Dt,je);if(Xt.length<je)continue;const qt=[],ar=[];for(let Bt=0;Bt<je-1;Bt++){const Nt=Bt%2===0,ur=Nt?Xt[Bt].high:Xt[Bt].low,Br=Nt?Xt[Bt+1].low:Xt[Bt+1].high,Xr=it(ur,Br);qt.push(`${Bt+1}${Xr}${Bt+2}`);const Er=Nt?Xt[Bt].low:Xt[Bt].high,Sn=Nt?Xt[Bt+1].high:Xt[Bt+1].low,kr=it(Er,Sn);ar.push(`${Bt+1}${kr}${Bt+2}`)}const Cr=Xt[0].high,An=Xt[0].low,br=Xt[je-1].high,yr=Xt[je-1].low,Qn=it(Cr,yr),Ws=it(An,br);qt.push(`1${Qn}${je}`),ar.push(`1${Ws}${je}`);const oi=je,qn=qt.filter(Bt=>ft.includes(Bt)).length,Jn=ar.filter(Bt=>ft.includes(Bt)).length,Fr=qn/oi,ct=Jn/oi,yt=Math.max(Fr,ct),ut=ct>Fr;if(yt>=.75){Te.push({startTimestamp:Xt[0].timestamp,confidence:yt,candles:Xt,relationships:ut?ar:qt,reverseRelationships:ar,isReverseBest:ut});const Bt=ut?ar:qt;console.log(` 75%+ Match Found! Start: ${Dt} (${new Date(Xt[0].timestamp*1e3).toLocaleTimeString()})`),console.log(`   Confidence: ${(yt*100).toFixed(1)}% | Pattern: ${ut?"REVERSE":"NORMAL"}`),console.log(`   Winning Relationships: ${Bt.join(", ")}`),console.log(`   Expected: ${ft.join(", ")}`)}}if(Te.length>0){const Dt=Te.sort((ar,Cr)=>Cr.confidence-ar.confidence)[0];console.log(` Applying best ${je}-candle match (${(Dt.confidence*100).toFixed(1)}% confidence):`,Dt);const Xt=Dt.candles.map((ar,Cr)=>{let An,br,yr,Qn;Dt.isReverseBest?Cr%2===0?(An=ar.low,br="Low",yr=ar.extremums.lowIndex,Qn=ar.extremums.lowTimestamp):(An=ar.high,br="High",yr=ar.extremums.highIndex,Qn=ar.extremums.highTimestamp):Cr%2===0?(An=ar.high,br="High",yr=ar.extremums.highIndex,Qn=ar.extremums.highTimestamp):(An=ar.low,br="Low",yr=ar.extremums.lowIndex,Qn=ar.extremums.lowTimestamp);const Ws=He.get(Qn)??-1;return Ws===-1&&console.warn(` MAPPING FAIL: Timestamp ${Qn} not found in optimized chart data`),console.log(` EXACT POINT ${Cr+1}: ${br} at original=${yr}, chart=${Ws}, price=${An.toFixed(2)} (${new Date(Qn*1e3).toLocaleTimeString()})`),{candleIndex:Ws>=0?Ws:yr,price:An,timestamp:Qn,pointNumber:Cr+1,label:Cr%2===0?"Target":"SL",x:0,y:0}});re(Xt);let qt;return Dt.isReverseBest?qt=[{id:"low1",price:Dt.candles[0].low,label:"SL",color:"#10b981"},{id:"high2",price:Dt.candles[1].high,label:"Target",color:"#ef4444"},{id:"low3",price:Dt.candles[2].low,label:"SL",color:"#10b981"},{id:"high4",price:Dt.candles[3].high,label:"Target",color:"#ef4444"}]:qt=[{id:"high1",price:Dt.candles[0].high,label:"Target",color:"#ef4444"},{id:"low2",price:Dt.candles[1].low,label:"SL",color:"#10b981"},{id:"high3",price:Dt.candles[2].high,label:"Target",color:"#ef4444"},{id:"low4",price:Dt.candles[3].low,label:"SL",color:"#10b981"}],oe(qt),Dt}else return console.log(` No ${je}-candle patterns found with 75% confidence`),null};g.useEffect(()=>{A.current&&(A.current._detectDynamicPattern=te,console.log(" Dynamic pattern detection exposed to Trading Master dropdown"))},[A.current]),g.useEffect(()=>{X(j||!1)},[j]),g.useEffect(()=>{b&&!le(b,Y)&&re(b)},[b]),g.useEffect(()=>{f&&f(Y)},[Y,f]),g.useEffect(()=>{j||X(!1)},[j]),g.useEffect(()=>{ee.current=V},[V]);const de=g.useRef(C);g.useEffect(()=>{C!==de.current&&(de.current=C,re([]),oe([]),pe(!0))},[C]),g.useEffect(()=>{N!=null&&Le(N)},[N]);const[ie,Z]=g.useState([]),[ne,oe]=g.useState([]),[U,W]=g.useState(null),[be,pe]=g.useState(!0),ge=500,Ce=1e3,he=g.useMemo(()=>{let Ne=e||[];if(l&&l.length===2&&Ne.length>0){const[He,Vt]=l,Zt=(Cr,An=new Date)=>{const br=new Date(An);return br.setHours(0,0,0,0),br.setMinutes(Cr),Math.floor(br.getTime()/1e3)},vr=Ne[0],Dt=vr.timestamp||vr.time||Date.now()/1e3,Xt=new Date(typeof Dt=="string"?Dt:Dt*1e3),qt=Zt(He,Xt),ar=Zt(Vt,Xt);Ne=Ne.filter(Cr=>{const An=Cr.timestamp||Cr.time||0,br=typeof An=="string"?new Date(An).getTime()/1e3:An;return br>=qt&&br<=ar}),console.log(` TIME FILTER SYNC: Start=${He}min (${Math.floor(He/60)}:${String(He%60).padStart(2,"0")}), End=${Vt}min (${Math.floor(Vt/60)}:${String(Vt%60).padStart(2,"0")})`),console.log(` TIME CONSTRAINED: ${e.length}  ${Ne.length} candles within filter range`)}const Oe=new Set;if(Y.forEach(He=>{if(He.candleIndex>=0&&He.candleIndex<Ne.length){Oe.add(He.candleIndex);for(let Vt=Math.max(0,He.candleIndex-2);Vt<=Math.min(Ne.length-1,He.candleIndex+2);Vt++)Oe.add(Vt)}}),Ne.length<=Ce)return Ne;console.log(` PERFORMANCE: Optimizing ${Ne.length} candles  ${ge} visible (preserving ${Oe.size} marker points)`);const me=Math.floor(ge*.6),je=Math.floor(ge*.3),ke=ge-me-je,Te=Ne.slice(-me),Je=Math.max(1,Math.floor(Ne.length/je)),Q=Ne.filter((He,Vt)=>Vt%Je===0).slice(0,je),tt=Array.from(Oe).filter(He=>He>=0&&He<Ne.length).slice(0,ke).map(He=>Ne[He]),it=[...Q,...Te,...tt],ft=Array.from(new Map(it.map(He=>[He.timestamp||He.time||0,He])).values()).sort((He,Vt)=>{const Zt=He.timestamp||He.time||0,vr=Vt.timestamp||Vt.time||0;return Zt-vr});return console.log(` PERFORMANCE: Dataset optimized to ${ft.length} candles (${tt.length} markers preserved)`),ft},[e,l,Y]),[ue,ce]=g.useState({start:null,end:null,isSelecting:!1}),[Ee,Le]=g.useState("none"),[Ie,Ue]=g.useState([]),[Ae,We]=g.useState({scrollOffset:0,zoomLevel:1,priceScaleWidth:45,isExpanded:!1,isDraggingPriceScale:!1,isDragging:!1,dragStartX:0,dragStartOffset:0}),ot=g.useCallback(Ne=>{if(!A.current||Ne.touches.length!==1)return;Ne.preventDefault();const Oe=Ne.touches[0],me=A.current.getBoundingClientRect();Oe.clientX-me.left,Oe.clientY-me.top;const je=new MouseEvent("mousedown",{clientX:Oe.clientX,clientY:Oe.clientY,bubbles:!0,cancelable:!0});we(je)},[]),It=g.useCallback(Ne=>{if(!A.current||Ne.touches.length!==1)return;Ne.preventDefault();const Oe=Ne.touches[0],me=A.current.getBoundingClientRect(),je=Oe.clientX-me.left,ke=Oe.clientY-me.top;if(B({x:je,y:ke,visible:!0}),Ae.isDragging){const Te=je-Ae.dragStartX,Je=2,Q=Math.max(0,he.length-Math.floor(100/Ae.zoomLevel)),tt=Math.max(0,Math.min(Q,Ae.dragStartOffset-Math.floor(Te/Je)));We(it=>({...it,scrollOffset:tt}))}},[Ae.isDragging,Ae.dragStartX,Ae.dragStartOffset,Ae.zoomLevel,he.length]),tr=g.useCallback(Ne=>{Ne.preventDefault(),B(Oe=>({...Oe,visible:!1})),We(Oe=>({...Oe,isDraggingPriceScale:!1,isDragging:!1}))},[]),Ct=g.useCallback(Ne=>{if(!A.current)return;const Oe=A.current.getBoundingClientRect(),me=Ne.clientX-Oe.left,je=Ne.clientY-Oe.top,ke=me>Oe.width-Ae.priceScaleWidth;let Te="crosshair";if(ke?Te="ns-resize":Ae.isDragging?Te="grabbing":Ee!=="none"?Te="crosshair":Te="grab",A.current.style.cursor=Te,B({x:me,y:je,visible:!0}),Ae.isDragging){const Je=me-Ae.dragStartX,Q=2,tt=Math.max(0,he.length-Math.floor(100/Ae.zoomLevel)),it=Math.max(0,Math.min(tt,Ae.dragStartOffset-Math.floor(Je/Q)));We(ft=>({...ft,scrollOffset:it})),console.log(` DRAG CONSTRAINED: Offset ${it}/${tt} (${he.length} filtered candles)`)}if(Ae.isDraggingPriceScale){const Je=je-Oe.height/2,Q=Math.max(.5,Math.min(3,1+Je/100));We(tt=>({...tt,zoomLevel:Q}))}if(ue.isSelecting&&ue.start!==null){const Je={left:50,right:Ae.priceScaleWidth+10},Q=Oe.width-Je.left-Je.right,tt=Math.min(he.length,Math.floor(100/Ae.zoomLevel)),it=Q/tt,ft=Ae.scrollOffset,He=Math.floor((me-Je.left)/it)+ft;He>=0&&He<he.length&&ce(Vt=>({...Vt,end:He}))}},[Ae.isDraggingPriceScale,Ae.priceScaleWidth,Ae.isDragging,Ae.dragStartX,Ae.dragStartOffset,Ae.zoomLevel,Ae.scrollOffset,Ee,ue.isSelecting,ue.start,he.length]),we=g.useCallback(Ne=>{if(!A.current)return;Ne.preventDefault();const Oe=A.current.getBoundingClientRect(),me=Ne.clientX-Oe.left;if(console.log(` MOUSE DOWN: x=${me}, y=${Ne.clientY-Oe.top}, manualMode=${ee.current}`),me>Oe.width-Ae.priceScaleWidth){We(it=>({...it,isDraggingPriceScale:!0}));return}const je={left:50,right:Ae.priceScaleWidth+10},ke=Oe.width-je.left-je.right,Te=Math.min(e.length,Math.floor(100/Ae.zoomLevel)),Je=ke/Te,Q=Ae.scrollOffset,tt=Math.floor((me-je.left)/Je)+Q;if(Ne.shiftKey&&tt>=0&&tt<e.length){ue.isSelecting?ce(it=>({...it,end:tt,isSelecting:!1})):ce({start:tt,end:null,isSelecting:!0});return}if(U&&ee.current){console.log(` Placing ${U} ray`),ta(Ne);return}if(ee.current){console.log(" Entering manual point selection mode"),lt(Ne);return}if(s&&a&&tt>=0&&tt<e.length){a(tt);return}We(it=>({...it,isDragging:!0,dragStartX:me,dragStartOffset:it.scrollOffset}))},[s,a,e.length,Ae.priceScaleWidth,Ae.zoomLevel,Ae.scrollOffset,ue.isSelecting,V]),Fe=g.useCallback(()=>{We(Ne=>({...Ne,isDraggingPriceScale:!1,isDragging:!1}))},[]),Ye=g.useCallback(()=>{B(Ne=>({...Ne,visible:!1})),We(Ne=>({...Ne,isDraggingPriceScale:!1,isDragging:!1}))},[]),lt=g.useCallback(Ne=>{if(console.log(" handleManualPointClick called"),!A.current||!he.length){console.log(" Cannot handle manual point click: canvas or candles missing");return}const Oe=A.current,me=Oe.getBoundingClientRect(),je=Ne.clientX-me.left,ke=Ne.clientY-me.top,Te={top:20,right:80,bottom:30,left:20},Je=Oe.height-Te.top-Te.bottom,Q=Oe.width-Te.left-Te.right;if(je<Te.left||je>Oe.width-Te.right||ke<Te.top||ke>Oe.height-Te.bottom){console.log(` Click outside chart area: x=${je}, y=${ke}, bounds=[${Te.left}, ${Oe.width-Te.right}], [${Te.top}, ${Oe.height-Te.bottom}]`);return}console.log(` Click within chart area: x=${je}, y=${ke}`);const tt=Math.max(1,Math.min(he.length,Math.floor(100/Ae.zoomLevel))),it=Math.max(0,Math.min(he.length-tt,Math.floor(Ae.scrollOffset))),ft=it+tt,He=he.slice(it,ft),Zt=Q/tt,vr=je-Te.left,Dt=Math.max(0,Math.min(tt-1,Math.floor(vr/Zt))),Xt=it+Dt;if(Xt<0||Xt>=he.length)return;const qt=he[Xt];if(!qt)return;let ar,Cr;h==="line"?(ar=He.map(ct=>ct.close||ct.c||0),Cr=.2):(ar=He.flatMap(ct=>[ct.open||ct.o,ct.high||ct.h,ct.low||ct.l,ct.close||ct.c]),Cr=.1);const An=Math.min(...ar),br=Math.max(...ar),yr=br-An,Qn=yr<50?Cr*2:Cr,Ws=An-yr*Qn,oi=br+yr*Qn,qn=(oi-Ws)/Ae.zoomLevel;if(qn===0)return;const Jn=ke-Te.top,Fr=oi-Jn/Je*qn;re(ct=>{const yt=ct.length+1,ut={x:je,y:ke,price:Fr,timestamp:qt.timestamp||qt.time||Date.now()/1e3,candleIndex:Xt,pointNumber:yt,label:null},Bt=[...ct,ut];return console.log(` MANUAL POINT SELECTED: Point ${yt} at price ${Fr.toFixed(2)} (Candle ${Xt})`),console.log(` Total points now: ${Bt.length}`),Bt})},[he,Ae.scrollOffset,Ae.zoomLevel]),pt=g.useCallback(()=>{re([]),console.log(" Manual points cleared (rays preserved)")},[]),nt=g.useCallback(()=>{oe([]),console.log(" Horizontal rays cleared (points preserved)")},[]),wt=g.useCallback(()=>{re([]),oe([]),W(null),console.log(" All points and rays cleared")},[]);g.useCallback(()=>{if(Y.length===0){console.log(" No points to save");return}const Ne={id:`set_${Date.now()}`,name:`Pattern ${ie.length+1} (${Y.length} points)`,points:[...Y],timestamp:Date.now()};Z(Oe=>[...Oe,Ne]),console.log(` Saved point set: ${Ne.name}`)},[Y,ie.length]),g.useCallback(Ne=>{const Oe=ie.find(me=>me.id===Ne);Oe&&(re(Oe.points),console.log(` Loaded point set: ${Oe.name}`))},[ie]),g.useCallback(Ne=>{Z(Oe=>Oe.filter(me=>me.id!==Ne)),console.log(` Deleted saved point set: ${Ne}`)},[]);const Lr=g.useCallback((Ne,Oe)=>{re(me=>{const je=me.map(ke=>ke.pointNumber===Ne?{...ke,label:Oe}:ke);if(Oe&&Oe!=="Entry"){const ke=je.find(Te=>Te.pointNumber===Ne);ke&&oe(Te=>{const Je=Te.filter(it=>it.label!==Oe),Q={SL:"#ef4444",Target:"#22c55e",Breakout:"#f59e0b"},tt={id:`ray_${Oe}_${Date.now()}`,price:ke.price,label:Oe,color:Q[Oe],pointNumber:Ne};return console.log(` Auto-created ${Oe} ray at ${ke.price.toFixed(2)} from Point #${Ne}`),[...Je,tt]})}return je}),console.log(` Point ${Ne} labeled as: ${Oe||"None"}`)},[]),Tr=g.useCallback((Ne,Oe,me)=>{const je={SL:"#ef4444",Target:"#22c55e",Breakout:"#f59e0b"},ke={id:`ray_${Date.now()}`,price:Ne,label:Oe,color:je[Oe],pointNumber:me};oe(Te=>[...Te,ke]),console.log(` Added ${Oe} ray at ${Ne.toFixed(2)} ${me?`(Point ${me})`:""}`)},[]),Mr=g.useCallback(Ne=>{oe(Oe=>Oe.filter(me=>me.id!==Ne)),console.log(` Removed horizontal ray: ${Ne}`)},[]),ta=g.useCallback(Ne=>{if(!A.current||!he.length||!U)return;const Oe=A.current,me=Oe.getBoundingClientRect(),je=Ne.clientX-me.left,ke=Ne.clientY-me.top,Te={top:20,right:80,bottom:30,left:20},Je=Oe.height-Te.top-Te.bottom;if(je<Te.left||je>Oe.width-Te.right||ke<Te.top||ke>Oe.height-Te.bottom)return;const Q=Math.max(0,Math.floor(Ae.scrollOffset)),tt=Oe.width-Te.left-Te.right,it=Math.max(1,tt/Math.min(he.length-Q,Math.floor(100/Ae.zoomLevel))),ft=Math.floor(tt/it),He=Math.min(he.length-1,Q+ft),Zt=he.slice(Q,He+1).flatMap(br=>[br.high||br.h||0,br.low||br.l||0]),vr=Math.min(...Zt),Dt=Math.max(...Zt),Xt=Dt-vr,qt=Xt*1.05,ar=Dt+(qt-Xt)/2,Cr=ke-Te.top,An=ar-Cr/Je*qt;Tr(An,U),W(null),console.log(` ${U} ray placed at ${An.toFixed(2)}`)},[he,Ae.scrollOffset,Ae.zoomLevel,U,Tr]),st=g.useCallback(()=>{X(Ne=>{const Oe=!Ne;return Oe||W(null),console.log(` Manual point mode: ${Oe?"ON":"OFF"}`),Oe})},[]);g.useEffect(()=>{window.selectedPoints=Y,window.horizontalRays=ne,window.labelPoint=Lr,window.addHorizontalRay=Tr,window.removeHorizontalRay=Mr,window.setIsAddingRay=W,window.clearManualPoints=pt,window.clearHorizontalRays=nt,window.clearAll=wt;const Ne=new CustomEvent("visualAIPointsUpdated",{detail:{selectedPoints:Y,horizontalRays:ne}});window.dispatchEvent(Ne)},[Y,ne,Lr,Tr,Mr,W,pt,nt,wt]);const zt=g.useCallback(Ne=>{if(Ne.preventDefault(),Ne.ctrlKey||Ne.metaKey){const Oe=Ne.deltaY>0?.9:1.1;We(me=>({...me,zoomLevel:Math.max(.5,Math.min(3,me.zoomLevel*Oe))}))}else We(Oe=>({...Oe,scrollOffset:Math.max(0,Math.min(he.length-50,Oe.scrollOffset+Math.sign(Ne.deltaY)*5))}))},[he.length]);g.useEffect(()=>{if(!P.current||!e||!e.length)return;let Ne=A.current;Ne||(Ne=document.createElement("canvas"),Ne.setAttribute("data-testid","visual-chart"),A.current=Ne,P.current.appendChild(Ne));const Oe=P.current.getBoundingClientRect();return Ne.width=Oe.width,Ne.height=Ae.isExpanded?t*1.5:t,Ne.addEventListener("mousemove",Ct),Ne.addEventListener("mousedown",we),Ne.addEventListener("mouseup",Fe),Ne.addEventListener("mouseleave",Ye),Ne.addEventListener("wheel",zt),Ne.addEventListener("touchstart",ot,{passive:!1}),Ne.addEventListener("touchmove",It,{passive:!1}),Ne.addEventListener("touchend",tr,{passive:!1}),console.log(` Event listeners added to canvas (${Ne.width}x${Ne.height})`),Ke(Ne,he,i,o||void 0,d,l,h),()=>{Ne==null||Ne.removeEventListener("mousemove",Ct),Ne==null||Ne.removeEventListener("mousedown",we),Ne==null||Ne.removeEventListener("mouseup",Fe),Ne==null||Ne.removeEventListener("mouseleave",Ye),Ne==null||Ne.removeEventListener("wheel",zt),Ne==null||Ne.removeEventListener("touchstart",ot),Ne==null||Ne.removeEventListener("touchmove",It),Ne==null||Ne.removeEventListener("touchend",tr)}},[he,t,Ae,i,o,l,d,h,Ct,we,Fe,Ye,zt,ot,It,tr,Y,ne,V,be]);const Ft=(Ne,Oe)=>{const me=[];if(Ne.length===0||Oe<=0)return me;for(let je=0;je<Oe-1;je++)me.push(null);for(let je=Oe-1;je<Ne.length;je++){const ke=Ne.slice(je-Oe+1,je+1).reduce((Te,Je)=>Te+Je,0);me.push(ke/Oe)}return me},pr=(Ne,Oe)=>{const me=2/(Oe+1),je=[];if(Ne.length===0)return je;for(let ke=0;ke<Oe-1;ke++)je.push(null);if(Ne.length>=Oe){let ke=0;for(let Te=0;Te<Oe;Te++)ke+=Ne[Te];je.push(ke/Oe);for(let Te=Oe;Te<Ne.length;Te++){const Je=je[Te-1];je.push(Ne[Te]*me+Je*(1-me))}}return je},kt=(Ne,Oe=14)=>{const me=[];if(Ne.length===0||Oe<=0)return me;const je=[],ke=[];for(let Te=1;Te<Ne.length;Te++){const Je=Ne[Te]-Ne[Te-1];je.push(Je>0?Je:0),ke.push(Je<0?Math.abs(Je):0)}for(let Te=0;Te<Oe;Te++)me.push(null);if(je.length>=Oe){let Te=je.slice(0,Oe).reduce((tt,it)=>tt+it,0)/Oe,Je=ke.slice(0,Oe).reduce((tt,it)=>tt+it,0)/Oe;const Q=Te/(Je||1e-4);me.push(100-100/(1+Q));for(let tt=Oe;tt<je.length;tt++){Te=(Te*(Oe-1)+je[tt])/Oe,Je=(Je*(Oe-1)+ke[tt])/Oe;const it=Te/(Je||1e-4);me.push(100-100/(1+it))}}return me},Mt=(Ne,Oe=20,me=2)=>{const je=Ft(Ne,Oe),ke=[],Te=[];for(let Je=0;Je<Ne.length;Je++)if(Je<Oe-1)ke.push(null),Te.push(null);else{const Q=Ne.slice(Je-Oe+1,Je+1),tt=Q.reduce((He,Vt)=>He+Vt,0)/Oe,it=Q.reduce((He,Vt)=>He+Math.pow(Vt-tt,2),0)/Oe,ft=Math.sqrt(it);ke.push(tt+ft*me),Te.push(tt-ft*me)}return{sma:je,upperBand:ke,lowerBand:Te}},Ke=(Ne,Oe,me,je,ke,Te,Je="line")=>{const Q=Ne.getContext("2d");if(!Q||!Oe.length)return;const tt=Ne.width,it=Ne.height,ft={background:"#131722",grid:"#2A2E39",text:"#D1D4DC",textSecondary:"#6C7883",green:"#22c55e",red:"#ef4444",greenWick:"#16a34a",redWick:"#dc2626",blue:"#2962FF"};Q.fillStyle=ft.background,Q.fillRect(0,0,tt,it);const He={top:20,right:Ae.priceScaleWidth+10,bottom:30,left:50},Vt=tt-He.left-He.right,Zt=it-He.top-He.bottom,vr=Math.min(Oe.length,Math.floor(100/Ae.zoomLevel)),Dt=Math.max(0,Math.min(Oe.length-vr,Ae.scrollOffset)),Xt=Dt+vr,qt=Oe.slice(Dt,Xt),ar=Dt;if(!qt.length)return;let Cr,An,br;Je==="line"?(Cr=qt.map(ct=>ct.close||ct.c||0),br=.2):(Cr=qt.flatMap(ct=>[ct.open||ct.o,ct.high||ct.h,ct.low||ct.l,ct.close||ct.c]),br=.1);const yr=Math.min(...Cr),Qn=Math.max(...Cr);An=Qn-yr;const Ws=An<50?br*2:br,oi=yr-An*Ws,qn=Qn+An*Ws,Jn=(qn-oi)/Ae.zoomLevel;if(Jn===0)return;Q.fillStyle="#1B1F2B",Q.fillRect(tt-Ae.priceScaleWidth,0,Ae.priceScaleWidth,it),Q.strokeStyle=ft.grid,Q.lineWidth=1,Q.beginPath(),Q.moveTo(tt-Ae.priceScaleWidth,0),Q.lineTo(tt-Ae.priceScaleWidth,it),Q.stroke(),Q.fillStyle=ft.text,Q.font="10px Arial",Q.textAlign="left";for(let ct=0;ct<=5;ct++){const yt=qn-Jn*ct/5,ut=He.top+Zt*ct/5;Q.strokeStyle=ft.grid,Q.lineWidth=.5,Q.setLineDash([2,2]),Q.beginPath(),Q.moveTo(He.left,ut),Q.lineTo(tt-Ae.priceScaleWidth,ut),Q.stroke(),Q.setLineDash([]),Q.fillText(yt.toFixed(2),tt-Ae.priceScaleWidth+5,ut+4)}const Fr=Vt/vr;if(Je==="line"){Q.strokeStyle=ft.blue,Q.lineWidth=2,Q.beginPath();let ct=!0;for(let yt=0;yt<qt.length;yt++){const ut=qt[yt],Bt=He.left+yt*Fr+Fr/2,Nt=ut.close||ut.c||0,ur=He.top+(qn-Nt)/Jn*Zt;ct?(Q.moveTo(Bt,ur),ct=!1):Q.lineTo(Bt,ur)}Q.stroke(),Q.fillStyle=ft.blue;for(let yt=0;yt<qt.length;yt++){const ut=qt[yt],Bt=He.left+yt*Fr+Fr/2,Nt=ut.close||ut.c||0,ur=He.top+(qn-Nt)/Jn*Zt;Q.beginPath(),Q.arc(Bt,ur,2,0,2*Math.PI),Q.fill()}}else for(let ct=0;ct<qt.length;ct++){const yt=Dt+ct,ut=qt[ct],Bt=He.left+ct*Fr,Nt=Bt+Fr/2,ur=ut.open||ut.o||0,Br=ut.high||ut.h||0,Xr=ut.low||ut.l||0,Er=ut.close||ut.c||0,Sn=He.top+(qn-Br)/Jn*Zt,kr=He.top+(qn-Xr)/Jn*Zt,mn=He.top+(qn-ur)/Jn*Zt,Yr=He.top+(qn-Er)/Jn*Zt,li=Er>=ur,Ca=Math.min(mn,Yr),Y0=Math.max(mn,Yr),K0=Math.max(1,Y0-Ca),gf=ut.isMock||je!=null&&yt>=je;let xf=li?ft.greenWick:ft.redWick,Nl=li?ft.green:ft.red;gf&&(xf=li?"#22c55eAA":"#ef4444AA",Nl=li?"#22c55eAA":"#ef4444AA"),Q.strokeStyle=xf,Q.lineWidth=1,gf&&Q.setLineDash([3,2]),Q.beginPath(),Q.moveTo(Nt,Sn),Q.lineTo(Nt,kr),Q.stroke(),gf&&Q.setLineDash([]);const jl=Math.max(2,Fr-2);Q.fillStyle=Nl,gf&&(Q.globalAlpha=.6),Q.fillRect(Bt+1,Ca,jl,K0),gf&&(Q.globalAlpha=1)}if(ke&&Object.keys(ke).length>0){const ct=(e||[]).map(Nt=>Nt.close||Nt.c||0),yt={};ct.length>0&&(ke.sma&&(yt.sma=ke.sma.map(Nt=>Ft(ct,Nt.period))),ke.ema&&(yt.ema=ke.ema.map(Nt=>pr(ct,Nt.period))),ke.ma&&(yt.ma=ke.ma.map(Nt=>Ft(ct,Nt.period))),ke.bollinger&&(yt.bollinger=ke.bollinger.map(Nt=>Mt(ct,Nt.period,Nt.stdDev))),ke.rsi&&(yt.rsi=ke.rsi.map(Nt=>kt(ct,Nt.period))));const ut=e||[];let Bt=0;if(l&&l.length===2&&ut.length>0){const[Nt]=l,ur=qt[0];if(ur){const Br=ur.timestamp||ur.time||0;Bt=ut.findIndex(Xr=>{const Er=Xr.timestamp||Xr.time||0;return Math.abs(Er-Br)<60}),Bt<0&&(Bt=Math.floor(Nt/1440*ut.length))}}if(Bt=Math.max(0,Bt),yt.sma&&Array.isArray(yt.sma)&&yt.sma.length>0&&yt.sma.forEach((Nt,ur)=>{const Br=["#FFD700","#FFA500","#FF6347","#FF4500","#DC143C"];Q.strokeStyle=Br[ur%Br.length],Q.lineWidth=2,Q.setLineDash([]),Q.beginPath();let Xr=!0;for(let Er=0;Er<qt.length;Er++){const Sn=ar+Er,kr=Nt[Sn];if(kr!=null&&Sn<Nt.length){const mn=He.left+Er*Fr+Fr/2,Yr=He.top+(qn-kr)/Jn*Zt;Xr?(Q.moveTo(mn,Yr),Xr=!1):Q.lineTo(mn,Yr)}}Q.stroke()}),yt.ema&&Array.isArray(yt.ema)&&yt.ema.length>0&&yt.ema.forEach((Nt,ur)=>{const Br=["#00BFFF","#1E90FF","#4169E1","#0000FF","#000080"];Q.strokeStyle=Br[ur%Br.length],Q.lineWidth=2,Q.setLineDash([]),Q.beginPath();let Xr=!0;for(let Er=0;Er<qt.length;Er++){const Sn=ar+Er,kr=Nt[Sn];if(kr!=null&&Sn<Nt.length){const mn=He.left+Er*Fr+Fr/2,Yr=He.top+(qn-kr)/Jn*Zt;Xr?(Q.moveTo(mn,Yr),Xr=!1):Q.lineTo(mn,Yr)}}Q.stroke()}),yt.ma&&Array.isArray(yt.ma)&&yt.ma.length>0&&yt.ma.forEach((Nt,ur)=>{const Br=["#32CD32","#228B22","#008000","#006400","#004000"];Q.strokeStyle=Br[ur%Br.length],Q.lineWidth=2,Q.setLineDash([]),Q.beginPath();let Xr=!0;for(let Er=0;Er<qt.length;Er++){const Sn=ar+Er,kr=Nt[Sn];if(kr!=null&&Sn<Nt.length){const mn=He.left+Er*Fr+Fr/2,Yr=He.top+(qn-kr)/Jn*Zt;Xr?(Q.moveTo(mn,Yr),Xr=!1):Q.lineTo(mn,Yr)}}Q.stroke()}),yt.bollinger&&Array.isArray(yt.bollinger)&&yt.bollinger.length>0&&yt.bollinger.forEach((Nt,ur)=>{const Br=["#FF69B4","#FF1493","#DC143C","#B22222","#8B0000"];Q.strokeStyle=Br[ur%Br.length],Q.lineWidth=1,Q.setLineDash([5,5]),Q.beginPath();let Xr=!0;for(let Er=0;Er<qt.length;Er++){const Sn=ar+Er,kr=Nt.upperBand&&Nt.upperBand[Sn];if(kr!=null&&Sn<Nt.upperBand.length){const mn=He.left+Er*Fr+Fr/2,Yr=He.top+(qn-kr)/Jn*Zt;Xr?(Q.moveTo(mn,Yr),Xr=!1):Q.lineTo(mn,Yr)}}Q.stroke(),Q.beginPath(),Xr=!0;for(let Er=0;Er<qt.length;Er++){const Sn=ar+Er,kr=Nt.lowerBand&&Nt.lowerBand[Sn];if(kr!=null&&Sn<Nt.lowerBand.length){const mn=He.left+Er*Fr+Fr/2,Yr=He.top+(qn-kr)/Jn*Zt;Xr?(Q.moveTo(mn,Yr),Xr=!1):Q.lineTo(mn,Yr)}}Q.stroke(),Q.setLineDash([]),Q.beginPath(),Xr=!0;for(let Er=0;Er<qt.length;Er++){const Sn=ar+Er,kr=Nt.sma&&Nt.sma[Sn];if(kr!=null&&Sn<Nt.sma.length){const mn=He.left+Er*Fr+Fr/2,Yr=He.top+(qn-kr)/Jn*Zt;Xr?(Q.moveTo(mn,Yr),Xr=!1):Q.lineTo(mn,Yr)}}Q.stroke()}),yt.rsi&&Array.isArray(yt.rsi)&&yt.rsi.length>0){const ur=it-He.bottom-60;Q.fillStyle="#1A1A1A",Q.fillRect(He.left,ur,Vt,60),yt.rsi.forEach((Br,Xr)=>{if(!Br||!Array.isArray(Br))return;const Er=["#FFFF00","#FF8C00","#FF4500","#FF0000","#DC143C"];Q.strokeStyle="#444444",Q.lineWidth=1,Q.setLineDash([2,2]),[30,50,70].forEach(kr=>{const mn=ur+(100-kr)/100*60;Q.beginPath(),Q.moveTo(He.left,mn),Q.lineTo(He.left+Vt,mn),Q.stroke()}),Q.setLineDash([]),Q.strokeStyle=Er[Xr%Er.length],Q.lineWidth=2,Q.beginPath();let Sn=!0;for(let kr=0;kr<qt.length;kr++){const mn=ar+kr,Yr=Br[mn];if(Yr!=null&&mn<Br.length){const li=He.left+kr*Fr+Fr/2,Ca=ur+(100-Yr)/100*60;Sn?(Q.moveTo(li,Ca),Sn=!1):Q.lineTo(li,Ca)}}Q.stroke()}),Q.fillStyle="#CCCCCC",Q.font="10px Arial",Q.textAlign="right",Q.fillText("RSI",He.left-5,ur+15)}}if(me!=null&&me>=Dt&&me<Dt+vr){const ct=me-Dt,yt=He.left+ct*Fr+Fr/2;Q.strokeStyle="#00FF00",Q.lineWidth=2,Q.setLineDash([]),Q.beginPath(),Q.moveTo(yt,He.top),Q.lineTo(yt,it-He.bottom),Q.stroke(),Q.fillStyle="#00FF00",Q.beginPath(),Q.arc(yt,He.top,4,0,2*Math.PI),Q.fill(),Q.fillStyle="#FFFFFF",Q.font="10px Arial",Q.textAlign="center",Q.fillText(" SELECTED",yt,He.top-8)}if(R.visible){Q.strokeStyle=ft.textSecondary+"80",Q.lineWidth=1,Q.setLineDash([2,2]),Q.beginPath(),Q.moveTo(R.x,He.top),Q.lineTo(R.x,it-He.bottom),Q.stroke(),Q.beginPath(),Q.moveTo(He.left,R.y),Q.lineTo(tt-He.right,R.y),Q.stroke(),Q.setLineDash([]);const ct=qn-(R.y-He.top)/Zt*Jn,yt=Math.floor((R.x-He.left)/Fr),ut=qt[yt];if(ut&&ct>0){Q.fillStyle=ft.blue,Q.fillRect(tt-He.right-2,R.y-10,He.right+2,20),Q.fillStyle="#FFFFFF",Q.font="bold 10px Arial",Q.textAlign="left",Q.fillText(`${ct.toFixed(2)}`,tt-He.right+2,R.y+3);const Bt=ut.timestamp||ut.time||0,ur=new Date(typeof Bt=="string"?Bt:Bt*1e3).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"});Q.fillStyle=ft.blue;const Br=80;if(Q.fillRect(R.x-Br/2,it-He.bottom,Br,20),Q.fillStyle="#FFFFFF",Q.font="bold 9px Arial",Q.textAlign="center",Q.fillText(ur,R.x,it-He.bottom+12),ut){const Xr=ut.open||ut.o||0,Er=ut.high||ut.h||0,Sn=ut.low||ut.l||0,kr=ut.close||ut.c||0;Q.fillStyle=ft.background+"F0",Q.fillRect(He.left+5,He.top+5,150,Je==="line"?25:50),Q.fillStyle=ft.text,Q.font="10px Arial",Q.textAlign="left",Je==="line"?Q.fillText(`Close: ${kr.toFixed(2)}`,He.left+8,He.top+20):(Q.fillText(`O: ${Xr.toFixed(2)} H: ${Er.toFixed(2)}`,He.left+8,He.top+20),Q.fillText(`L: ${Sn.toFixed(2)} C: ${kr.toFixed(2)}`,He.left+8,He.top+35))}}}if(be&&Y.length>0&&(Y.forEach((ct,yt)=>{let ut=ct.x,Bt=ct.y;if(ct.candleIndex!==void 0){const Nt=ct.candleIndex-Ae.scrollOffset;if(Nt>=0&&Nt<vr)ut=He.left+Nt*Fr+Fr/2,Bt=He.top+(qn-ct.price)/Jn*Zt;else return}if(Q.fillStyle="#00FF00",Q.strokeStyle="#FFFFFF",Q.lineWidth=2,Q.beginPath(),Q.arc(ut,Bt,8,0,2*Math.PI),Q.fill(),Q.stroke(),Q.fillStyle="#000000",Q.font="bold 12px Arial",Q.textAlign="center",Q.textBaseline="middle",Q.fillText(ct.pointNumber.toString(),ut,Bt),Q.fillStyle="#00FF00",Q.font="bold 10px Arial",Q.textAlign="left",Q.textBaseline="bottom",Q.fillText(`${ct.price.toFixed(2)}`,ut+12,Bt-5),ct.label){const Nt={SL:"#ef4444",Target:"#22c55e",Breakout:"#f59e0b",Entry:"#3b82f6"};Q.fillStyle=Nt[ct.label]||"#FFFFFF",Q.font="bold 9px Arial",Q.textAlign="center",Q.textBaseline="top",Q.fillText(ct.label,ut,Bt+12)}}),Y.length>=2)){Q.strokeStyle="#00FF00",Q.lineWidth=2,Q.setLineDash([5,5]);const ct=Y.filter(yt=>{if(yt.candleIndex!==void 0){const ut=yt.candleIndex-Ae.scrollOffset;return ut>=0&&ut<vr}return!0}).map(yt=>{if(yt.candleIndex!==void 0){const ut=yt.candleIndex-Ae.scrollOffset,Bt=He.left+ut*Fr+Fr/2,Nt=He.top+(qn-yt.price)/Jn*Zt;return{x:Bt,y:Nt}}return{x:yt.x,y:yt.y}});if(ct.length>=2){Q.beginPath(),Q.moveTo(ct[0].x,ct[0].y);for(let yt=1;yt<ct.length;yt++)Q.lineTo(ct[yt].x,ct[yt].y);Q.stroke(),Q.setLineDash([])}}if(ne.length>0&&ne.forEach(ct=>{const yt=He.top+(qn-ct.price)/Jn*Zt;let ut=He.left,Bt=tt-He.right;if(Y.length>0){const Xr=Y.reduce((Yr,li)=>li.pointNumber<Yr.pointNumber?li:Yr),Er=Y.reduce((Yr,li)=>li.pointNumber>Yr.pointNumber?li:Yr),Sn=Vt/vr,kr=Math.max(0,Xr.candleIndex-Dt);ut=He.left+kr*Sn;const mn=Math.max(0,Er.candleIndex-Dt);Bt=He.left+(mn+1)*Sn,Bt=Math.min(Bt,tt-He.right)}Q.strokeStyle=ct.color,Q.lineWidth=2,Q.setLineDash([5,5]),Q.beginPath(),Q.moveTo(ut,yt),Q.lineTo(Bt,yt),Q.stroke(),Q.setLineDash([]);const Nt=`${ct.label}: ${ct.price.toFixed(2)}`;Q.fillStyle=ct.color,Q.font="11px Arial",Q.textAlign="left";const ur=Q.measureText(Nt).width+6,Br=16;if(Q.fillStyle=ft.background+"E6",Q.fillRect(He.left+5,yt-Br/2,ur,Br),Q.fillStyle=ct.color,Q.fillText(Nt,He.left+8,yt+4),ct.pointNumber){const Xr=`#${ct.pointNumber}`;Q.fillStyle="#FFEB3B",Q.font="9px Arial",Q.textAlign="right",Q.fillText(Xr,tt-He.right-5,yt+3)}}),Te&&Te.length===2){const[ct,yt]=Te,ut=qt.map(ur=>{const Br=ur.timestamp||ur.time||0,Xr=new Date(typeof Br=="string"?Br:Br*1e3);return Xr.getHours()*60+Xr.getMinutes()});let Bt=-1,Nt=-1;for(let ur=0;ur<ut.length;ur++)if(ut[ur]>=ct){Bt=ur;break}for(let ur=ut.length-1;ur>=0;ur--)if(ut[ur]<=yt){Nt=ur;break}console.log(` TIME FILTER SYNC: Start=${ct}min (${Math.floor(ct/60)}:${String(ct%60).padStart(2,"0")}), End=${yt}min (${Math.floor(yt/60)}:${String(yt%60).padStart(2,"0")})`),console.log(` CANDLE MATCH: Start index=${Bt}, End index=${Nt}`)}Q.fillStyle=ft.text,Q.font="10px Arial",Q.textAlign="center";for(let ct=0;ct<qt.length;ct+=Math.ceil(vr/6)){const yt=qt[ct],ut=He.left+ct*Fr+Fr/2,Bt=yt.timestamp||yt.time||Date.now(),ur=new Date(typeof Bt=="string"?Bt:Bt*1e3).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"});Q.fillText(ur,ut,it-5),Q.strokeStyle=ft.grid,Q.lineWidth=1,Q.beginPath(),Q.moveTo(ut,it-He.bottom),Q.lineTo(ut,it-He.bottom+5),Q.stroke()}if(ue.start!==null&&ue.end!==null){const ct=Math.min(ue.start,ue.end)-Dt,yt=Math.max(ue.start,ue.end)-Dt;if(ct>=0&&yt<vr){const ut=He.left+ct*Fr,Bt=He.left+(yt+1)*Fr;Q.fillStyle="#00FF0020",Q.fillRect(ut,He.top,Bt-ut,Zt),Q.strokeStyle="#00FF00",Q.lineWidth=2,Q.beginPath(),Q.moveTo(ut,He.top),Q.lineTo(ut,it-He.bottom),Q.moveTo(Bt,He.top),Q.lineTo(Bt,it-He.bottom),Q.stroke(),Q.fillStyle="#00FF00",Q.font="12px Arial",Q.textAlign="center",Q.fillText(`Range: ${Math.abs(ue.end-ue.start)+1} candles`,(ut+Bt)/2,He.top-5)}}(Ae.zoomLevel!==1||Ae.scrollOffset>0)&&(Q.fillStyle=ft.textSecondary,Q.font="10px Arial",Q.textAlign="left",Q.fillText(`Zoom: ${(Ae.zoomLevel*100).toFixed(0)}% | Scroll: ${Ae.scrollOffset} | Candles: ${vr}/${Oe.length}`,He.left,it-25)),Ae.isDraggingPriceScale&&(Q.fillStyle="#00FF0080",Q.fillRect(tt-Ae.priceScaleWidth,0,Ae.priceScaleWidth,it),Q.fillStyle="#FFFFFF",Q.font="12px Arial",Q.textAlign="center",Q.fillText("DRAG",tt-Ae.priceScaleWidth/2,it/2))};return n.jsxs("div",{className:"w-full h-full bg-[#131722] rounded-lg overflow-hidden relative",children:[!I&&n.jsxs("div",{className:"absolute top-2 left-2 z-10 flex flex-col gap-2",children:[n.jsx("button",{onClick:()=>{We(Ne=>({...Ne,zoomLevel:1,scrollOffset:0})),m&&m()},className:"bg-slate-700 hover:bg-slate-600 text-white px-2 py-1 rounded text-xs w-20","data-testid":"button-reset-chart",children:" Reset"}),n.jsx("button",{onClick:()=>{console.log(" Manual point mode button clicked"),st(),!V&&T&&(console.log(" Auto-displaying Notes AI in Visual AI tab"),T())},className:`px-2 py-1 rounded text-xs font-bold transition-colors w-20 ${V?"bg-green-500 hover:bg-green-400 text-black border-2 border-green-300":"bg-slate-700 hover:bg-slate-600 text-white border-2 border-transparent"}`,"data-testid":"button-manual-point-mode",children:V?" ON":" Select"}),j!==!1&&Y.length>0&&n.jsxs("div",{className:"text-white text-xs px-2 py-1 bg-green-800 rounded w-20 text-center","data-testid":"text-selected-points-count",children:[Y.length," pts"]}),j!==!1&&Y.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>{const Ne=Y.slice(0,-1);f==null||f(Ne),window.selectedPoints=Ne,window.dispatchEvent(new CustomEvent("visualAIPointsUpdated",{detail:{selectedPoints:Ne,horizontalRays:[]}})),console.log(` Deleted last point. Remaining: ${Ne.length} points`)},className:"bg-red-600 hover:bg-red-500 text-white px-2 py-1 rounded text-xs w-20","data-testid":"button-delete-point",children:" Delete"}),n.jsx("button",{onClick:()=>{f==null||f([]),window.selectedPoints=[],window.dispatchEvent(new CustomEvent("visualAIPointsUpdated",{detail:{selectedPoints:[],horizontalRays:[]}})),console.log(" Cleared all selected points")},className:"bg-orange-600 hover:bg-orange-500 text-white px-2 py-1 rounded text-xs w-20","data-testid":"button-clear-points",children:" Clear"}),n.jsx("button",{onClick:()=>{const Ne=Y.slice(0,-1);f==null||f(Ne),window.selectedPoints=Ne,window.dispatchEvent(new CustomEvent("visualAIPointsUpdated",{detail:{selectedPoints:Ne,horizontalRays:[]}})),console.log(` Undo last point. Remaining: ${Ne.length} points`)},className:"bg-yellow-600 hover:bg-yellow-500 text-white px-2 py-1 rounded text-xs w-20","data-testid":"button-undo-point",children:" Undo"})]})]}),n.jsx("div",{ref:P,className:"w-full h-full bg-[#131722]",style:{height:Ae.isExpanded?t*1.5:t}})]})}function JL({height:t,onPointsChange:e,selectedPoints:r,onReset:s,isExpanded:a}){const i=g.useRef(null),o=g.useRef(null),[l,d]=g.useState([]),[h,f]=g.useState(3),[m,x]=g.useState("#00ff00"),[b,j]=g.useState("sketch"),[N,w]=g.useState(!1),[C,T]=g.useState([]);g.useEffect(()=>{const ie=i.current;if(!ie)return;const Z=ie.getBoundingClientRect(),ne=window.devicePixelRatio||1;ie.width=Z.width*ne,ie.height=t*ne;const oe=ie.getContext("2d");oe&&(oe.scale(ne,ne),oe.lineCap="round",oe.lineJoin="round",o.current=oe,O())},[t]);const O=()=>{const ie=o.current,Z=i.current;!ie||!Z||(ie.fillStyle="#000000",ie.fillRect(0,0,Z.clientWidth,Z.clientHeight))},I=ie=>{if(b!=="path")return;const Z=i.current,ne=o.current;if(!Z||!ne)return;const oe=Z.getBoundingClientRect(),U=ie.clientX-oe.left,W=ie.clientY-oe.top,be={x:U,y:W,price:(Z.clientHeight-W)/Z.clientHeight*1e3+24e3,timestamp:Date.now()+l.length*6e4,index:l.length,type:W<Z.clientHeight/2?"high":"low",pointNumber:l.length+1,label:`${l.length+1}`,cornerType:"clicked"},pe=[...l,be];d(pe),e(pe),B()},P=ie=>{if(b!=="sketch")return;w(!0);const Z=i.current;if(!Z)return;const ne=Z.getBoundingClientRect(),oe=ie.clientX-ne.left,U=ie.clientY-ne.top,W=Date.now();T([{x:oe,y:U,t:W}])},A=ie=>{if(!N||b!=="sketch")return;const Z=i.current,ne=o.current;if(!Z||!ne)return;const oe=Z.getBoundingClientRect(),U=ie.clientX-oe.left,W=ie.clientY-oe.top,be=Date.now(),pe=C[C.length-1];if(pe&&Math.abs(U-pe.x)<2&&Math.abs(W-pe.y)<2)return;const ge=[...C,{x:U,y:W,t:be}];T(ge),re(ne,ge)},R=()=>{if(!(!N||b!=="sketch")){if(w(!1),C.length>3){const ie=le(C),Z=[...l,...ie];d(Z),e(Z)}T([]),B()}},B=()=>{const ie=o.current;if(ie&&(O(),l.length!==0)){if(l.length>1){ie.strokeStyle=m,ie.lineWidth=h,ie.beginPath(),ie.moveTo(l[0].x,l[0].y);for(let Z=1;Z<l.length;Z++)ie.lineTo(l[Z].x,l[Z].y);ie.stroke()}l.forEach((Z,ne)=>{V(ie,Z.x,Z.y,ne+1)})}},V=(ie,Z,ne,oe)=>{ie.fillStyle="#10b981",ie.strokeStyle="#ffffff",ie.lineWidth=2,ie.beginPath(),ie.arc(Z,ne,8,0,2*Math.PI),ie.fill(),ie.stroke(),ie.fillStyle="#ffffff",ie.font="bold 12px Arial",ie.textAlign="center",ie.fillText(oe.toString(),Z,ne+4)},X=()=>{if(l.length===0)return;const ie=l.slice(0,-1);d(ie),e(ie),B()},ee=()=>{O(),d([]),e([])},Y=()=>{X()},re=(ie,Z)=>{if(!(Z.length<2)){if(O(),l.length>1){ie.strokeStyle=m,ie.lineWidth=h,ie.beginPath(),ie.moveTo(l[0].x,l[0].y);for(let ne=1;ne<l.length;ne++)ie.lineTo(l[ne].x,l[ne].y);ie.stroke()}l.forEach((ne,oe)=>{V(ie,ne.x,ne.y,oe+1)}),ie.strokeStyle=m,ie.lineWidth=h,ie.lineCap="round",ie.lineJoin="round",ie.beginPath(),ie.moveTo(Z[0].x,Z[0].y);for(let ne=1;ne<Z.length-1;ne++){const oe=Z[ne],U=Z[ne+1],W=(oe.x+U.x)/2,be=(oe.y+U.y)/2;ie.quadraticCurveTo(oe.x,oe.y,W,be)}if(Z.length>1){const ne=Z[Z.length-1];ie.lineTo(ne.x,ne.y)}ie.stroke()}},le=ie=>{if(ie.length<3)return[];const ne=te(ie,8),oe=[],U=i.current;if(!U)return[];const W=ne[0],be=ne[ne.length-1],pe=[W];if(ne.length>2)for(let ge=1;ge<ne.length-1;ge++){const Ce=ne[ge-1],he=ne[ge],ue=ne[ge+1],ce=Math.atan2(he.y-Ce.y,he.x-Ce.x),Ee=Math.atan2(ue.y-he.y,ue.x-he.x);let Le=Math.abs(Ee-ce);Le>Math.PI&&(Le=2*Math.PI-Le),Le>Math.PI/6&&pe.push(he)}return pe.push(be),pe.forEach((ge,Ce)=>{oe.push({x:ge.x,y:ge.y,price:(U.clientHeight-ge.y)/U.clientHeight*1e3+24e3,timestamp:ge.t||Date.now()+Ce*6e4,index:l.length+Ce,type:ge.y<U.clientHeight/2?"high":"low",pointNumber:l.length+Ce+1,label:`${l.length+Ce+1}`,cornerType:"curve"})}),oe},te=(ie,Z)=>{if(ie.length<=2)return ie;let ne=0,oe=0;const U=ie[0],W=ie[ie.length-1];for(let be=1;be<ie.length-1;be++){const pe=de(ie[be],U,W);pe>ne&&(ne=pe,oe=be)}if(ne>Z){const be=te(ie.slice(0,oe+1),Z),pe=te(ie.slice(oe),Z);return[...be.slice(0,-1),...pe]}else return[U,W]},de=(ie,Z,ne)=>{const oe=ne.y-Z.y,U=Z.x-ne.x,W=ne.x*Z.y-Z.x*ne.y;return Math.abs(oe*ie.x+U*ie.y+W)/Math.sqrt(oe*oe+U*U)};return g.useEffect(()=>{B()},[l]),i.current,n.jsxs("div",{className:"w-full h-full flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2 p-1 bg-gray-800/50 rounded border border-gray-600/50",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(wA,{className:"h-3 w-3 text-green-400"}),n.jsx("span",{className:"text-xs text-white font-medium",children:"Drawing"}),n.jsxs("div",{className:"flex bg-gray-700 rounded p-0.5 ml-2",children:[n.jsx("button",{onClick:()=>j("sketch"),className:`px-1 py-0.5 text-[10px] rounded ${b==="sketch"?"bg-green-500 text-white":"text-gray-300 hover:text-white"}`,children:""}),n.jsx("button",{onClick:()=>j("path"),className:`px-1 py-0.5 text-[10px] rounded ${b==="path"?"bg-green-500 text-white":"text-gray-300 hover:text-white"}`,children:""})]})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("input",{type:"range",min:"1",max:"10",value:h,onChange:ie=>f(Number(ie.target.value)),className:"w-8 h-1 bg-gray-600 rounded appearance-none cursor-pointer"}),n.jsx("input",{type:"color",value:m,onChange:ie=>x(ie.target.value),className:"w-4 h-4 rounded border border-gray-600 cursor-pointer"}),n.jsx(H,{variant:"outline",size:"sm",onClick:Y,className:"text-yellow-400 border-yellow-400 hover:bg-yellow-400/10 h-5 w-5 p-0",disabled:l.length===0,"data-testid":"button-undo",children:n.jsx(vse,{className:"h-2 w-2"})}),n.jsx(H,{variant:"outline",size:"sm",onClick:ee,className:"text-red-400 border-red-400 hover:bg-red-400/10 h-5 w-5 p-0","data-testid":"button-clear",children:n.jsx(za,{className:"h-2 w-2"})})]})]}),n.jsxs("div",{className:"flex-1 relative",children:[n.jsx("canvas",{ref:i,className:"w-full border border-gray-600 rounded cursor-crosshair bg-black",style:{height:`${t}px`},onClick:b==="path"?I:void 0,onMouseDown:b==="sketch"?P:void 0,onMouseMove:b==="sketch"?A:void 0,onMouseUp:b==="sketch"?R:void 0,onMouseLeave:b==="sketch"?R:void 0,"data-testid":"blackboard-canvas"}),l.map((ie,Z)=>{var ne;return n.jsx("div",{className:"absolute w-3 h-3 bg-green-400 rounded-full border-2 border-white flex items-center justify-center text-xs font-bold text-black",style:{left:`${ie.x-6}px`,top:`${ie.y-6}px`,zIndex:10},title:`Point ${Z+1}: ${(ne=ie.price)==null?void 0:ne.toFixed(2)}`,children:Z+1},Z)})]}),n.jsx("div",{className:"mt-1 p-1 bg-gray-800/50 rounded border border-gray-600/50 text-[10px] text-gray-300",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("span",{children:["Points: ",l.length]}),n.jsxs("span",{children:[h,"px  ",m]})]})})]})}var v3e="Separator",ZL="horizontal",b3e=["horizontal","vertical"],WJ=g.forwardRef((t,e)=>{const{decorative:r,orientation:s=ZL,...a}=t,i=w3e(s)?s:ZL,l=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return n.jsx(lr.div,{"data-orientation":i,...l,...a,ref:e})});WJ.displayName=v3e;function w3e(t){return b3e.includes(t)}var YJ=WJ;const KJ=g.forwardRef(({className:t,orientation:e="horizontal",decorative:r=!0,...s},a)=>n.jsx(YJ,{ref:a,decorative:r,orientation:e,className:Ht("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...s}));KJ.displayName=YJ.displayName;const h3=[{value:"NSE:NIFTY50-INDEX",label:"NIFTY 50",display:"NIFTY 50"},{value:"NSE:RELIANCE-EQ",label:"RELIANCE",display:"Reliance Industries"},{value:"NSE:INFY-EQ",label:"INFOSYS",display:"Infosys Limited"},{value:"NSE:TCS-EQ",label:"TCS",display:"Tata Consultancy Services"},{value:"NSE:HDFCBANK-EQ",label:"HDFC BANK",display:"HDFC Bank Limited"},{value:"NSE:ICICIBANK-EQ",label:"ICICI BANK",display:"ICICI Bank Limited"},{value:"NSE:SBIN-EQ",label:"SBI",display:"State Bank of India"}],N3e=[{value:"1",label:"1m",color:"#6b7280"},{value:"5",label:"5m",color:"#6b7280"},{value:"15",label:"15m",color:"#6b7280"},{value:"30",label:"30m",color:"#6b7280"},{value:"60",label:"1h",color:"#6b7280"},{value:"240",label:"4h",color:"#6b7280"},{value:"1D",label:"1D",color:"#6b7280"}];function j3e({height:t=500,defaultSymbol:e="NSE:NIFTY50-INDEX",interval:r="15"}){const s=g.useRef(null),[a,i]=g.useState(e),[o,l]=g.useState(r),[d,h]=g.useState(new Date),[f,m]=g.useState({x:0,y:0,visible:!1}),x=h3.find(I=>I.value===a)||h3[0],{data:b,isLoading:j,refetch:N,error:w}=xn({queryKey:["tradingview-chart-data",a,o,d.toISOString().split("T")[0]],queryFn:async()=>{console.log(` TradingView Chart: Fetching data for ${a} (${o})`);const I=[],P=new Date(d);for(let R=0;R<7;R++){const B=new Date(P);B.setDate(P.getDate()-R);const V=B.getDay();if(V!==0&&V!==6&&I.push(B.toISOString().split("T")[0]),I.length>=5)break}let A=null;for(const R of I)try{const V=await fetch("/api/historical-data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbol:a,resolution:o==="1D"?"D":o,range_from:R,range_to:R})});if(V.ok){const X=await V.json();if(X&&X.candles&&X.candles.length>0)return console.log(` Found data for ${R}: ${X.candles.length} candles`),X}A=new Error(`No data available for ${R}`)}catch(B){A=B,console.log(` Failed to fetch data for ${R}:`,B)}throw A||new Error("No historical data available for any recent trading days")},refetchInterval:6e4,retry:1}),{data:C}=xn({queryKey:["/api/market-data"],refetchInterval:5e3,enabled:!0,retry:1});C==null||C.find(I=>{var P;return I.symbol===((P=a.split(":")[1])==null?void 0:P.split("-")[0])||I.code===a}),g.useEffect(()=>{if(!s.current||!(b!=null&&b.candles))return;const I=s.current.querySelector("canvas");if(I)I.width=s.current.clientWidth,I.height=t-140,T(I,b.candles);else{const P=document.createElement("canvas");P.width=s.current.clientWidth,P.height=t-140,P.style.cursor="crosshair",P.addEventListener("mousemove",A=>{const R=P.getBoundingClientRect();m({x:A.clientX-R.left,y:A.clientY-R.top,visible:!0})}),P.addEventListener("mouseleave",()=>{m(A=>({...A,visible:!1}))}),s.current.appendChild(P),T(P,b.candles)}},[b,t,f]);const T=(I,P)=>{const A=I.getContext("2d");if(!A||!P.length)return;const R=I.width,B=I.height,V={background:"#131722",grid:"#2A2E39",text:"#D1D4DC",textSecondary:"#6C7883",green:"#089981",red:"#F23645"};A.fillStyle=V.background,A.fillRect(0,0,R,B);const X={top:20,right:80,bottom:80,left:60},ee=R-X.left-X.right,Y=B-X.top-X.bottom-60,re=60,le=P.flatMap(pe=>[pe.open,pe.high,pe.low,pe.close]),te=P.map(pe=>pe.volume||0),de=Math.min(...le),ie=Math.max(...le),Z=Math.max(...te),ne=ie-de;A.strokeStyle=V.grid,A.lineWidth=1;for(let pe=0;pe<=8;pe++){const ge=X.top+Y*pe/8;A.beginPath(),A.moveTo(X.left,ge),A.lineTo(R-X.right,ge),A.stroke();const Ce=ie-ne*pe/8;A.fillStyle=V.textSecondary,A.font='11px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',A.textAlign="left";const he=Ce.toFixed(2);A.fillText(he,R-X.right+5,ge+4)}const oe=Math.min(P.length,80),U=ee/oe,W=Math.max(0,P.length-oe);for(let pe=0;pe<oe;pe+=Math.ceil(oe/6)){const ge=X.left+pe*U;A.beginPath(),A.moveTo(ge,X.top),A.lineTo(ge,B-X.bottom),A.stroke()}for(let pe=W;pe<P.length;pe++){const ge=P[pe],Ce=X.left+(pe-W)*U,he=Ce+U/2,ue=X.top+(ie-ge.high)/ne*Y,ce=X.top+(ie-ge.low)/ne*Y,Ee=X.top+(ie-ge.open)/ne*Y,Le=X.top+(ie-ge.close)/ne*Y,Ie=ge.close>=ge.open,Ue=Math.min(Ee,Le),Ae=Math.max(Ee,Le),We=Math.max(1,Ae-Ue);A.strokeStyle=Ie?V.green:V.red,A.lineWidth=1,A.beginPath(),A.moveTo(he,ue),A.lineTo(he,ce),A.stroke();const ot=Math.max(1,U-2);Ie?(A.strokeStyle=V.green,A.lineWidth=1,A.strokeRect(Ce+1,Ue,ot,We)):(A.fillStyle=V.red,A.fillRect(Ce+1,Ue,ot,We))}const be=B-X.bottom+10;for(let pe=W;pe<P.length;pe++){const ge=P[pe],Ce=X.left+(pe-W)*U,ue=(ge.volume||0)/Z*re,ce=ge.close>=ge.open;A.fillStyle=ce?V.green+"60":V.red+"60",A.fillRect(Ce+1,be+re-ue,U-2,ue)}if(f.visible&&(A.strokeStyle=V.textSecondary,A.lineWidth=1,A.setLineDash([4,4]),A.beginPath(),A.moveTo(f.x,X.top),A.lineTo(f.x,B-X.bottom),A.stroke(),A.beginPath(),A.moveTo(X.left,f.y),A.lineTo(R-X.right,f.y),A.stroke(),A.setLineDash([])),A.fillStyle=V.text,A.font='bold 16px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',A.textAlign="left",A.fillText(x.display,X.left,15),P.length>0){const pe=P[P.length-1],ge=pe.close>=pe.open;A.fillStyle=ge?V.green:V.red,A.font='bold 14px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',A.fillText(`${pe.close.toFixed(2)}`,X.left+200,15);const Ce=pe.close-pe.open,he=Ce/pe.open*100;A.font='12px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',A.fillText(`${Ce>=0?"+":""}${Ce.toFixed(2)} (${he.toFixed(2)}%)`,X.left+320,15)}A.fillStyle=V.textSecondary,A.font='11px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',A.fillText("Volume",X.left,be-5)},O=()=>{h(new Date),N()};return n.jsxs("div",{className:"w-full h-full bg-[#131722] border border-gray-700 rounded-lg overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-700 bg-[#1E222D]",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"relative",children:n.jsx("input",{type:"text",placeholder:"Search stocks (e.g., RELIANCE, NIFTY, TCS)",className:"w-64 px-3 py-2 bg-[#131722] border border-gray-600 rounded text-white placeholder-gray-400 text-sm focus:outline-none focus:border-blue-400 focus:ring-1 focus:ring-blue-400",onChange:I=>{const P=I.target.value.toUpperCase(),A=h3.find(R=>R.label.includes(P)||R.display.toUpperCase().includes(P));A&&i(A.value)}})}),n.jsx(KJ,{orientation:"vertical",className:"h-6 bg-gray-600"}),n.jsx("div",{className:"flex gap-1",children:N3e.map(I=>n.jsx(H,{variant:o===I.value?"default":"ghost",size:"sm",className:`h-8 px-3 text-xs ${o===I.value?"bg-blue-600 text-white hover:bg-blue-700":"text-gray-300 hover:bg-[#2A2E39] hover:text-white"}`,onClick:()=>l(I.value),children:I.label},I.value))})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(H,{variant:"ghost",size:"sm",onClick:O,className:"text-gray-300 hover:text-white hover:bg-[#2A2E39]",children:n.jsx(go,{className:"h-4 w-4"})}),n.jsx(H,{variant:"ghost",size:"sm",className:"text-gray-300 hover:text-white hover:bg-[#2A2E39]",children:n.jsx(uj,{className:"h-4 w-4"})}),n.jsx(H,{variant:"ghost",size:"sm",className:"text-gray-300 hover:text-white hover:bg-[#2A2E39]",children:n.jsx(ose,{className:"h-4 w-4"})})]})]}),n.jsxs("div",{className:"relative",children:[j&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-[#131722] bg-opacity-75 z-10",children:n.jsxs("div",{className:"flex flex-col items-center gap-2",children:[n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-400"}),n.jsx("div",{className:"text-sm text-gray-400",children:"Loading TradingView chart..."})]})}),w&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-[#131722] bg-opacity-75 z-10",children:n.jsxs("div",{className:"flex flex-col items-center gap-2",children:[n.jsx("div",{className:"text-sm text-red-400",children:"Failed to load chart data"}),n.jsx("div",{className:"text-xs text-gray-500",children:"Please try again"}),n.jsxs(H,{variant:"outline",size:"sm",onClick:O,className:"border-gray-600 text-gray-300 hover:text-white",children:[n.jsx(go,{className:"h-4 w-4 mr-2"}),"Retry"]})]})}),n.jsx("div",{ref:s,className:"w-full bg-[#131722]",style:{height:t-140}})]}),n.jsx("div",{className:"px-3 py-2 border-t border-gray-700 bg-[#1E222D]",children:n.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-400",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(wse,{className:"h-3 w-3"}),n.jsx("span",{children:"Real-time Fyers Data"})]}),(b==null?void 0:b.candles)&&n.jsxs("span",{children:[b.candles.length," candles  ",o," timeframe"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:"NSE  Asia/Kolkata"}),n.jsx("div",{className:"h-2 w-2 bg-green-400 rounded-full animate-pulse"})]})]})})]})}function Xu(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function T0(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const GJ=6048e5,S3e=864e5;let k3e={};function hk(){return k3e}function Pw(t,e){var l,d,h,f;const r=hk(),s=(e==null?void 0:e.weekStartsOn)??((d=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:d.weekStartsOn)??r.weekStartsOn??((f=(h=r.locale)==null?void 0:h.options)==null?void 0:f.weekStartsOn)??0,a=Xu(t),i=a.getDay(),o=(i<s?7:0)+i-s;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function j2(t){return Pw(t,{weekStartsOn:1})}function XJ(t){const e=Xu(t),r=e.getFullYear(),s=T0(t,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const a=j2(s),i=T0(t,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=j2(i);return e.getTime()>=a.getTime()?r+1:e.getTime()>=o.getTime()?r:r-1}function eF(t){const e=Xu(t);return e.setHours(0,0,0,0),e}function tF(t){const e=Xu(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function C3e(t,e){const r=eF(t),s=eF(e),a=+r-tF(r),i=+s-tF(s);return Math.round((a-i)/S3e)}function E3e(t){const e=XJ(t),r=T0(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),j2(r)}function T3e(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function P3e(t){if(!T3e(t)&&typeof t!="number")return!1;const e=Xu(t);return!isNaN(Number(e))}function A3e(t){const e=Xu(t),r=T0(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}const _3e={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},I3e=(t,e,r)=>{let s;const a=_3e[t];return typeof a=="string"?s=a:e===1?s=a.one:s=a.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function f3(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const M3e={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},O3e={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},R3e={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},D3e={date:f3({formats:M3e,defaultWidth:"full"}),time:f3({formats:O3e,defaultWidth:"full"}),dateTime:f3({formats:R3e,defaultWidth:"full"})},$3e={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},L3e=(t,e,r,s)=>$3e[t];function eb(t){return(e,r)=>{const s=r!=null&&r.context?String(r.context):"standalone";let a;if(s==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=r!=null&&r.width?String(r.width):t.defaultWidth;a=t.values[l]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return a[i]}}const F3e={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},B3e={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},U3e={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},z3e={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},V3e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},q3e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},H3e=(t,e)=>{const r=Number(t),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},W3e={ordinalNumber:H3e,era:eb({values:F3e,defaultWidth:"wide"}),quarter:eb({values:B3e,defaultWidth:"wide",argumentCallback:t=>t-1}),month:eb({values:U3e,defaultWidth:"wide"}),day:eb({values:z3e,defaultWidth:"wide"}),dayPeriod:eb({values:V3e,defaultWidth:"wide",formattingValues:q3e,defaultFormattingWidth:"wide"})};function tb(t){return(e,r={})=>{const s=r.width,a=s&&t.matchPatterns[s]||t.matchPatterns[t.defaultMatchWidth],i=e.match(a);if(!i)return null;const o=i[0],l=s&&t.parsePatterns[s]||t.parsePatterns[t.defaultParseWidth],d=Array.isArray(l)?K3e(l,m=>m.test(o)):Y3e(l,m=>m.test(o));let h;h=t.valueCallback?t.valueCallback(d):d,h=r.valueCallback?r.valueCallback(h):h;const f=e.slice(o.length);return{value:h,rest:f}}}function Y3e(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function K3e(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function G3e(t){return(e,r={})=>{const s=e.match(t.matchPattern);if(!s)return null;const a=s[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=e.slice(a.length);return{value:o,rest:l}}}const X3e=/^(\d+)(th|st|nd|rd)?/i,Q3e=/\d+/i,J3e={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Z3e={any:[/^b/i,/^(a|c)/i]},ePe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},tPe={any:[/1/i,/2/i,/3/i,/4/i]},rPe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},nPe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},sPe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},aPe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},iPe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},oPe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},lPe={ordinalNumber:G3e({matchPattern:X3e,parsePattern:Q3e,valueCallback:t=>parseInt(t,10)}),era:tb({matchPatterns:J3e,defaultMatchWidth:"wide",parsePatterns:Z3e,defaultParseWidth:"any"}),quarter:tb({matchPatterns:ePe,defaultMatchWidth:"wide",parsePatterns:tPe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:tb({matchPatterns:rPe,defaultMatchWidth:"wide",parsePatterns:nPe,defaultParseWidth:"any"}),day:tb({matchPatterns:sPe,defaultMatchWidth:"wide",parsePatterns:aPe,defaultParseWidth:"any"}),dayPeriod:tb({matchPatterns:iPe,defaultMatchWidth:"any",parsePatterns:oPe,defaultParseWidth:"any"})},cPe={code:"en-US",formatDistance:I3e,formatLong:D3e,formatRelative:L3e,localize:W3e,match:lPe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function dPe(t){const e=Xu(t);return C3e(e,A3e(e))+1}function uPe(t){const e=Xu(t),r=+j2(e)-+E3e(e);return Math.round(r/GJ)+1}function QJ(t,e){var f,m,x,b;const r=Xu(t),s=r.getFullYear(),a=hk(),i=(e==null?void 0:e.firstWeekContainsDate)??((m=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??a.firstWeekContainsDate??((b=(x=a.locale)==null?void 0:x.options)==null?void 0:b.firstWeekContainsDate)??1,o=T0(t,0);o.setFullYear(s+1,0,i),o.setHours(0,0,0,0);const l=Pw(o,e),d=T0(t,0);d.setFullYear(s,0,i),d.setHours(0,0,0,0);const h=Pw(d,e);return r.getTime()>=l.getTime()?s+1:r.getTime()>=h.getTime()?s:s-1}function hPe(t,e){var l,d,h,f;const r=hk(),s=(e==null?void 0:e.firstWeekContainsDate)??((d=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:d.firstWeekContainsDate)??r.firstWeekContainsDate??((f=(h=r.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??1,a=QJ(t,e),i=T0(t,0);return i.setFullYear(a,0,s),i.setHours(0,0,0,0),Pw(i,e)}function fPe(t,e){const r=Xu(t),s=+Pw(r,e)-+hPe(r,e);return Math.round(s/GJ)+1}function ws(t,e){const r=t<0?"-":"",s=Math.abs(t).toString().padStart(e,"0");return r+s}const gp={y(t,e){const r=t.getFullYear(),s=r>0?r:1-r;return ws(e==="yy"?s%100:s,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):ws(r+1,2)},d(t,e){return ws(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return ws(t.getHours()%12||12,e.length)},H(t,e){return ws(t.getHours(),e.length)},m(t,e){return ws(t.getMinutes(),e.length)},s(t,e){return ws(t.getSeconds(),e.length)},S(t,e){const r=e.length,s=t.getMilliseconds(),a=Math.trunc(s*Math.pow(10,r-3));return ws(a,e.length)}},kx={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},rF={G:function(t,e,r){const s=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const s=t.getFullYear(),a=s>0?s:1-s;return r.ordinalNumber(a,{unit:"year"})}return gp.y(t,e)},Y:function(t,e,r,s){const a=QJ(t,s),i=a>0?a:1-a;if(e==="YY"){const o=i%100;return ws(o,2)}return e==="Yo"?r.ordinalNumber(i,{unit:"year"}):ws(i,e.length)},R:function(t,e){const r=XJ(t);return ws(r,e.length)},u:function(t,e){const r=t.getFullYear();return ws(r,e.length)},Q:function(t,e,r){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return ws(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,e,r){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return ws(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,e,r){const s=t.getMonth();switch(e){case"M":case"MM":return gp.M(t,e);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(t,e,r){const s=t.getMonth();switch(e){case"L":return String(s+1);case"LL":return ws(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(t,e,r,s){const a=fPe(t,s);return e==="wo"?r.ordinalNumber(a,{unit:"week"}):ws(a,e.length)},I:function(t,e,r){const s=uPe(t);return e==="Io"?r.ordinalNumber(s,{unit:"week"}):ws(s,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):gp.d(t,e)},D:function(t,e,r){const s=dPe(t);return e==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):ws(s,e.length)},E:function(t,e,r){const s=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(t,e,r,s){const a=t.getDay(),i=(a-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return ws(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(t,e,r,s){const a=t.getDay(),i=(a-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return ws(i,e.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(t,e,r){const s=t.getDay(),a=s===0?7:s;switch(e){case"i":return String(a);case"ii":return ws(a,e.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(t,e,r){const a=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,e,r){const s=t.getHours();let a;switch(s===12?a=kx.noon:s===0?a=kx.midnight:a=s/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,e,r){const s=t.getHours();let a;switch(s>=17?a=kx.evening:s>=12?a=kx.afternoon:s>=4?a=kx.morning:a=kx.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let s=t.getHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return gp.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):gp.H(t,e)},K:function(t,e,r){const s=t.getHours()%12;return e==="Ko"?r.ordinalNumber(s,{unit:"hour"}):ws(s,e.length)},k:function(t,e,r){let s=t.getHours();return s===0&&(s=24),e==="ko"?r.ordinalNumber(s,{unit:"hour"}):ws(s,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):gp.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):gp.s(t,e)},S:function(t,e){return gp.S(t,e)},X:function(t,e,r){const s=t.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return sF(s);case"XXXX":case"XX":return Ug(s);case"XXXXX":case"XXX":default:return Ug(s,":")}},x:function(t,e,r){const s=t.getTimezoneOffset();switch(e){case"x":return sF(s);case"xxxx":case"xx":return Ug(s);case"xxxxx":case"xxx":default:return Ug(s,":")}},O:function(t,e,r){const s=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+nF(s,":");case"OOOO":default:return"GMT"+Ug(s,":")}},z:function(t,e,r){const s=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+nF(s,":");case"zzzz":default:return"GMT"+Ug(s,":")}},t:function(t,e,r){const s=Math.trunc(t.getTime()/1e3);return ws(s,e.length)},T:function(t,e,r){const s=t.getTime();return ws(s,e.length)}};function nF(t,e=""){const r=t>0?"-":"+",s=Math.abs(t),a=Math.trunc(s/60),i=s%60;return i===0?r+String(a):r+String(a)+e+ws(i,2)}function sF(t,e){return t%60===0?(t>0?"-":"+")+ws(Math.abs(t)/60,2):Ug(t,e)}function Ug(t,e=""){const r=t>0?"-":"+",s=Math.abs(t),a=ws(Math.trunc(s/60),2),i=ws(s%60,2);return r+a+e+i}const aF=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},JJ=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},mPe=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],s=r[1],a=r[2];if(!a)return aF(t,e);let i;switch(s){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",aF(s,e)).replace("{{time}}",JJ(a,e))},pPe={p:JJ,P:mPe},gPe=/^D+$/,xPe=/^Y+$/,yPe=["D","DD","YY","YYYY"];function vPe(t){return gPe.test(t)}function bPe(t){return xPe.test(t)}function wPe(t,e,r){const s=NPe(t,e,r);if(console.warn(s),yPe.includes(t))throw new RangeError(s)}function NPe(t,e,r){const s=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${s} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const jPe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,SPe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,kPe=/^'([^]*?)'?$/,CPe=/''/g,EPe=/[a-zA-Z]/;function ho(t,e,r){var f,m,x,b;const s=hk(),a=s.locale??cPe,i=s.firstWeekContainsDate??((m=(f=s.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,o=s.weekStartsOn??((b=(x=s.locale)==null?void 0:x.options)==null?void 0:b.weekStartsOn)??0,l=Xu(t);if(!P3e(l))throw new RangeError("Invalid time value");let d=e.match(SPe).map(j=>{const N=j[0];if(N==="p"||N==="P"){const w=pPe[N];return w(j,a.formatLong)}return j}).join("").match(jPe).map(j=>{if(j==="''")return{isToken:!1,value:"'"};const N=j[0];if(N==="'")return{isToken:!1,value:TPe(j)};if(rF[N])return{isToken:!0,value:j};if(N.match(EPe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+N+"`");return{isToken:!1,value:j}});a.localize.preprocessor&&(d=a.localize.preprocessor(l,d));const h={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return d.map(j=>{if(!j.isToken)return j.value;const N=j.value;(bPe(N)||vPe(N))&&wPe(N,e,String(t));const w=rF[N[0]];return w(l,N,a.localize,h)}).join("")}function TPe(t){const e=t.match(kPe);return e?e[1].replace(CPe,"'"):t}function Ib(t,e){const r=2/(e+1),s=[];if(t.length===0)return s;for(let a=0;a<e-1;a++)s.push(null);if(t.length>=e){let a=0;for(let i=0;i<e;i++)a+=t[i];s.push(a/e);for(let i=e;i<t.length;i++){const o=s[i-1];s.push(t[i]*r+o*(1-r))}}return s}function C1(t,e){const r=[];if(t.length===0||e<=0)return r;for(let s=0;s<e-1;s++)r.push(null);for(let s=e-1;s<t.length;s++){const a=t.slice(s-e+1,s+1).reduce((i,o)=>i+o,0);r.push(a/e)}return r}function PPe(t,e=14){const r=[];if(t.length===0||e<=0)return r;const s=[],a=[];for(let i=1;i<t.length;i++){const o=t[i]-t[i-1];s.push(o>0?o:0),a.push(o<0?Math.abs(o):0)}for(let i=0;i<e;i++)r.push(null);if(s.length>=e){let i=s.slice(0,e).reduce((d,h)=>d+h,0)/e,o=a.slice(0,e).reduce((d,h)=>d+h,0)/e;const l=i/(o||1e-4);r.push(100-100/(1+l));for(let d=e;d<s.length;d++){i=(i*(e-1)+s[d])/e,o=(o*(e-1)+a[d])/e;const h=i/(o||1e-4);r.push(100-100/(1+h))}}return r}function APe(t,e){const r=[];if(t.length===0||e<=0)return r;for(let s=0;s<e-1;s++)r.push(null);for(let s=e-1;s<t.length;s++){let a=0,i=0;for(let o=0;o<e;o++){const l=o+1;a+=t[s-e+1+o]*l,i+=l}r.push(a/i)}return r}function _Pe(t,e=12,r=26,s=9){if(t.length<r+s)return null;const a=Ib(t,e),i=Ib(t,r),o=[];for(let f=r-1;f<t.length;f++)a[f]!==null&&i[f]!==null&&o.push(a[f]-i[f]);const d=Ib(o,s).filter(f=>f!==null),h=[];for(let f=0;f<d.length;f++){const m=o[f+s-1]-d[f];h.push(Math.round(m*1e4)/1e4)}return{macd:o.map(f=>Math.round(f*1e4)/1e4),signal:d.map(f=>Math.round(f*1e4)/1e4),histogram:h}}function IPe(t,e=20,r=2){const s=C1(t,e),a=[],i=[];for(let o=0;o<t.length;o++)if(o<e-1)a.push(null),i.push(null);else{const l=t.slice(o-e+1,o+1),d=s[o],h=l.reduce((m,x)=>m+Math.pow(x-d,2),0)/e,f=Math.sqrt(h);a.push(d+r*f),i.push(d-r*f)}return{upper:a,middle:s,lower:i}}function MPe(t,e=14){const r=[],s=[];if(t.length===0)return r;for(let i=0;i<t.length;i++)if(i===0)s.push(t[i].high-t[i].low);else{const o=t[i].high-t[i].low,l=Math.abs(t[i].high-t[i-1].close),d=Math.abs(t[i].low-t[i-1].close);s.push(Math.max(o,l,d))}return C1(s,e)}function OPe(t,e=14,r=3){const s=[];for(let l=0;l<t.length;l++)if(l<e-1)s.push(null);else{const d=t.slice(l-e+1,l+1),h=Math.max(...d.map(b=>b.high)),f=Math.min(...d.map(b=>b.low)),x=(t[l].close-f)/(h-f)*100;s.push(x)}const a=s.filter(l=>l!==null),i=C1(a,r),o=[];for(let l=0;l<e-1;l++)o.push(null);return o.push(...i),{k:s,d:o}}function RPe(t,e=20){const r=[],s=[];for(const i of t)s.push((i.high+i.low+i.close)/3);const a=C1(s,e);for(let i=0;i<t.length;i++)if(i<e-1)r.push(null);else{const o=s.slice(i-e+1,i+1),l=a[i],d=o.reduce((f,m)=>f+Math.abs(m-l),0)/e,h=(s[i]-l)/(.015*d);r.push(h)}return r}function DPe(t,e=14){const r=[],s=[];for(let a=0;a<t.length;a++){const o=(t[a].high+t[a].low+t[a].close)/3*t[a].volume;s.push(o)}for(let a=0;a<t.length;a++)if(a<e)r.push(null);else{let i=0,o=0;for(let h=a-e+1;h<=a;h++){const f=(t[h].high+t[h].low+t[h].close)/3,m=(t[h-1].high+t[h-1].low+t[h-1].close)/3;f>m?i+=s[h]:f<m&&(o+=s[h])}const d=100-100/(1+i/(o||1));r.push(d)}return r}function $Pe(t,e=14){const r=[];for(let s=0;s<t.length;s++)if(s<e-1)r.push(null);else{const a=t.slice(s-e+1,s+1),i=Math.max(...a.map(h=>h.high)),o=Math.min(...a.map(h=>h.low)),l=t[s].close,d=(i-l)/(i-o)*-100;r.push(d)}return r}function LPe(t,e=12){const r=[];for(let s=0;s<t.length;s++)if(s<e)r.push(null);else{const a=t[s],i=t[s-e],o=(a-i)/i*100;r.push(o)}return r}function FPe(t,e=14){const r=[],s=[],a=[],i=[];for(let o=0;o<t.length;o++)if(o===0)s.push(t[o].high-t[o].low),a.push(0),i.push(0);else{const l=t[o].high-t[o].low,d=Math.abs(t[o].high-t[o-1].close),h=Math.abs(t[o].low-t[o-1].close);s.push(Math.max(l,d,h));const f=t[o].high-t[o-1].high,m=t[o-1].low-t[o].low;a.push(f>m&&f>0?f:0),i.push(m>f&&m>0?m:0)}for(let o=0;o<t.length;o++)if(o<e*2)r.push(null);else{const l=s.slice(o-e+1,o+1).reduce((b,j)=>b+j,0)/e,d=a.slice(o-e+1,o+1).reduce((b,j)=>b+j,0)/e,h=i.slice(o-e+1,o+1).reduce((b,j)=>b+j,0)/e,f=d/l*100,m=h/l*100,x=Math.abs(f-m)/(f+m)*100;r.push(x)}return r}function BPe(t,e=.02,r=.2){const s=[];if(t.length<2)return s;let a=t[1].close>t[0].close,i=a?t[0].low:t[0].high,o=a?t[1].high:t[1].low,l=e;s.push(null),s.push(i);for(let d=2;d<t.length;d++){const h=i;i=h+l*(o-h),a?(t[d].high>o&&(o=t[d].high,l=Math.min(l+e,r)),t[d].low<=i&&(a=!1,i=o,o=t[d].low,l=e)):(t[d].low<o&&(o=t[d].low,l=Math.min(l+e,r)),t[d].high>=i&&(a=!0,i=o,o=t[d].high,l=e)),s.push(i)}return s}function UPe(t){const e=[];let r=0,s=0;for(const a of t){const i=(a.high+a.low+a.close)/3;r+=i*a.volume,s+=a.volume;const o=r/s;e.push(o)}return e}const zPe=()=>{const t=new Date,e=t.getDate(),r=t.getMonth(),s=t.getFullYear(),a=new Date(s,r+1,0);let i=new Date(a);for(;i.getDay()!==4;)i.setDate(i.getDate()-1);if(i.getDate()<e){const f=new Date(s,r+2,0);for(i=new Date(f);i.getDay()!==4;)i.setDate(i.getDate()-1)}const o=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],l=i.getDate().toString().padStart(2,"0"),d=o[i.getMonth()],h=i.getFullYear().toString().slice(-2);return`${l}${d}${h}`},VPe=()=>{const t=zPe();return[{value:`NSE:NIFTY${t}-FUT`,label:`NIFTY 50 FUT ${t}`},{value:`NSE:BANKNIFTY${t}-FUT`,label:`BANK NIFTY FUT ${t}`}]},Cx=[{value:"NSE:NIFTY50-INDEX",label:"NIFTY 50"},{value:"NSE:NIFTYBANK-INDEX",label:"NIFTY BANK"},...VPe(),{value:"NSE:RELIANCE-EQ",label:"RELIANCE"},{value:"NSE:TCS-EQ",label:"TCS"},{value:"NSE:HDFCBANK-EQ",label:"HDFC BANK"},{value:"NSE:ICICIBANK-EQ",label:"ICICI BANK"},{value:"NSE:INFY-EQ",label:"INFOSYS"},{value:"NSE:ITC-EQ",label:"ITC"},{value:"NSE:HINDUNILVR-EQ",label:"HINDUSTAN UNILEVER"},{value:"NSE:LT-EQ",label:"LARSEN & TOUBRO"},{value:"NSE:SBIN-EQ",label:"STATE BANK OF INDIA"},{value:"NSE:BHARTIARTL-EQ",label:"BHARTI AIRTEL"},{value:"NSE:ASIANPAINT-EQ",label:"ASIAN PAINTS"},{value:"NSE:MARUTI-EQ",label:"MARUTI SUZUKI"},{value:"NSE:AXISBANK-EQ",label:"AXIS BANK"},{value:"NSE:COALINDIA-EQ",label:"COAL INDIA"},{value:"NSE:NTPC-EQ",label:"NTPC"},{value:"NSE:POWERGRID-EQ",label:"POWER GRID CORP"},{value:"NSE:ULTRACEMCO-EQ",label:"ULTRATECH CEMENT"},{value:"NSE:SUNPHARMA-EQ",label:"SUN PHARMA"},{value:"NSE:TITAN-EQ",label:"TITAN COMPANY"},{value:"NSE:ADANIENT-EQ",label:"ADANI ENTERPRISES"},{value:"NSE:ONGC-EQ",label:"ONGC"},{value:"NSE:WIPRO-EQ",label:"WIPRO"},{value:"NSE:DIVISLAB-EQ",label:"DIVIS LAB"},{value:"NSE:TECHM-EQ",label:"TECH MAHINDRA"},{value:"NSE:HCLTECH-EQ",label:"HCL TECHNOLOGIES"},{value:"NSE:KOTAKBANK-EQ",label:"KOTAK MAHINDRA BANK"},{value:"NSE:BAJFINANCE-EQ",label:"BAJAJ FINANCE"},{value:"NSE:INDUSINDBK-EQ",label:"INDUSIND BANK"}];function qPe({optionChainData:t,selectedStrike:e,onStrikeChange:r,selectedExpiry:s}){var j,N,w,C,T,O,I,P,A,R,B,V,X,ee,Y,re,le,te,de,ie,Z,ne,oe,U,W,be,pe,ge,Ce,he,ue;const[a,i]=g.useState("summary"),[o,l]=g.useState("call"),{data:d,isLoading:h,error:f}=xn({queryKey:["/api/options/atm-ohlc",e,s],queryFn:async()=>(await fetch(`/api/options/atm-ohlc?strike=${e}&expiry=${s}`)).json(),refetchInterval:3e4,retry:2});if(h)return n.jsx(St,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:n.jsx(Kt,{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-center py-8",children:[n.jsx(go,{className:"h-6 w-6 text-blue-500 animate-spin mr-2"}),n.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Loading Strike ",e," OHLC data..."]})]})})});if(f||!d||!d.success)return n.jsx(St,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:n.jsx(Kt,{className:"p-6",children:n.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[n.jsx(Np,{className:"h-12 w-12 text-gray-400 mb-2"}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Failed to load Strike OHLC data"}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:"Check your connection and try again"})]})})});const{data:m}=d||{};if(!m||!m.call&&!m.put)return n.jsx(St,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:n.jsx(Kt,{className:"p-6",children:n.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[n.jsx(Np,{className:"h-12 w-12 text-gray-400 mb-2"}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"No Strike OHLC data available"}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:"Try selecting a different strike price"})]})})});const x=o==="call"?m.call:m.put,b=(x==null?void 0:x.ohlcData)||[];return n.jsx(St,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:n.jsxs(Kt,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Strike Selection OHLC Data & Greeks"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Sr,{variant:"secondary",className:"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200",children:"Sep 9th Expiry"}),n.jsxs(Sr,{variant:"outline",children:[b.length," Candles"]})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Strike Price"}),n.jsx("select",{value:e,onChange:ce=>r(Number(ce.target.value)),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:((j=t==null?void 0:t.strikes)==null?void 0:j.map(ce=>n.jsxs("option",{value:ce,children:["",ce.toLocaleString()]},ce)))||n.jsx("option",{value:24750,children:"24,750"})})]}),n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(H,{variant:a==="summary"?"default":"outline",size:"sm",onClick:()=>i("summary"),children:"Summary"}),n.jsx(H,{variant:a==="candles"?"default":"outline",size:"sm",onClick:()=>i("candles"),children:"Detailed Candles"})]}),a==="candles"&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(H,{variant:o==="call"?"default":"outline",size:"sm",className:o==="call"?"bg-green-600 hover:bg-green-700":"",onClick:()=>l("call"),children:[e," CE"]}),n.jsxs(H,{variant:o==="put"?"default":"outline",size:"sm",className:o==="put"?"bg-red-600 hover:bg-red-700":"",onClick:()=>l("put"),children:[e," PE"]})]})]}),a==="summary"?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-700/30 rounded-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-800 dark:text-white",children:"NIFTY 50"}),n.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["",((w=(N=m.underlying)==null?void 0:N.price)==null?void 0:w.toLocaleString())||"24,750"]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:`text-sm font-medium ${(((C=m.underlying)==null?void 0:C.change)||0)>=0?"text-green-600":"text-red-600"}`,children:[(((T=m.underlying)==null?void 0:T.change)||0)>=0?"+":"",(((O=m.underlying)==null?void 0:O.change)||0).toFixed(2)]}),n.jsxs("p",{className:`text-xs ${(((I=m.underlying)==null?void 0:I.changePercent)||0)>=0?"text-green-600":"text-red-600"}`,children:["(",(((P=m.underlying)==null?void 0:P.changePercent)||0)>=0?"+":"",(((A=m.underlying)==null?void 0:A.changePercent)||0).toFixed(2),"%)"]})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h4",{className:"font-semibold text-green-600",children:[e," CE"]}),n.jsx(Sr,{variant:"outline",className:"text-green-600 border-green-600",children:"CALL"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"LTP"}),n.jsxs("span",{className:"font-medium",children:["",((B=(R=m.call)==null?void 0:R.currentPrice)==null?void 0:B.toLocaleString())||"0"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Candles"}),n.jsx("span",{className:"font-medium",children:((V=m.call)==null?void 0:V.totalCandles)||((ee=(X=m.call)==null?void 0:X.ohlcData)==null?void 0:ee.length)||0})]})]}),n.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:[n.jsx("h5",{className:"font-medium text-green-800 dark:text-green-200 mb-2",children:"Current Greeks"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Delta"}),n.jsx("span",{className:"font-medium",children:((le=(re=(Y=m.call)==null?void 0:Y.greeks)==null?void 0:re.delta)==null?void 0:le.toFixed(3))||"0.000"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"IV"}),n.jsxs("span",{className:"font-medium",children:[((ie=(de=(te=m.call)==null?void 0:te.greeks)==null?void 0:de.impliedVolatility)==null?void 0:ie.toFixed(1))||"0.0","%"]})]})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h4",{className:"font-semibold text-red-600",children:[e," PE"]}),n.jsx(Sr,{variant:"outline",className:"text-red-600 border-red-600",children:"PUT"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"LTP"}),n.jsxs("span",{className:"font-medium",children:["",((ne=(Z=m.put)==null?void 0:Z.currentPrice)==null?void 0:ne.toLocaleString())||"0"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Candles"}),n.jsx("span",{className:"font-medium",children:((oe=m.put)==null?void 0:oe.totalCandles)||((W=(U=m.put)==null?void 0:U.ohlcData)==null?void 0:W.length)||0})]})]}),n.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-3 rounded-lg",children:[n.jsx("h5",{className:"font-medium text-red-800 dark:text-red-200 mb-2",children:"Current Greeks"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Delta"}),n.jsx("span",{className:"font-medium",children:((ge=(pe=(be=m.put)==null?void 0:be.greeks)==null?void 0:pe.delta)==null?void 0:ge.toFixed(3))||"0.000"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"IV"}),n.jsxs("span",{className:"font-medium",children:[((ue=(he=(Ce=m.put)==null?void 0:Ce.greeks)==null?void 0:he.impliedVolatility)==null?void 0:ue.toFixed(1))||"0.0","%"]})]})]})]})]})]})]}):n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsx("h4",{className:"font-semibold text-gray-800 dark:text-white",children:"ATM Options Analysis"})}),n.jsxs("div",{className:"overflow-x-auto overflow-y-auto max-h-[460px] border custom-thin-scrollbar",children:[n.jsxs(Pb,{children:[n.jsx(Ab,{className:"sticky top-0 bg-gray-50 dark:bg-gray-700 z-10",children:n.jsxs(Uh,{children:[n.jsx(Tn,{className:"min-w-[80px]",children:"Time"}),n.jsx(Tn,{className:"text-right min-w-[70px]",children:"Open"}),n.jsx(Tn,{className:"text-right min-w-[70px]",children:"High"}),n.jsx(Tn,{className:"text-right min-w-[70px]",children:"Low"}),n.jsx(Tn,{className:"text-right min-w-[70px]",children:"Close"}),n.jsx(Tn,{className:"text-right min-w-[80px]",children:"Volume"}),n.jsx(Tn,{className:"text-right min-w-[70px]",children:"Delta"}),n.jsx(Tn,{className:"text-right min-w-[70px]",children:"Gamma"}),n.jsx(Tn,{className:"text-right min-w-[70px]",children:"Theta"}),n.jsx(Tn,{className:"text-right min-w-[70px]",children:"Vega"}),n.jsx(Tn,{className:"text-right min-w-[70px]",children:"IV %"})]})}),n.jsx(_b,{children:b.map((ce,Ee)=>{var Ue,Ae,We,ot,It;const Ie=new Date(ce.timestamp*1e3).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",timeZone:"Asia/Kolkata"});return n.jsxs(Uh,{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[n.jsx(Kn,{className:"font-medium text-xs",children:Ie}),n.jsxs(Kn,{className:"text-right",children:["",ce.open.toFixed(2)]}),n.jsxs(Kn,{className:"text-right text-green-600",children:["",ce.high.toFixed(2)]}),n.jsxs(Kn,{className:"text-right text-red-600",children:["",ce.low.toFixed(2)]}),n.jsxs(Kn,{className:"text-right font-medium",children:["",ce.close.toFixed(2)]}),n.jsx(Kn,{className:"text-right text-gray-600",children:ce.volume.toLocaleString()}),n.jsx(Kn,{className:"text-right text-blue-600",children:((Ue=ce.greeks)==null?void 0:Ue.delta.toFixed(3))||"-"}),n.jsx(Kn,{className:"text-right text-purple-600",children:((Ae=ce.greeks)==null?void 0:Ae.gamma.toFixed(3))||"-"}),n.jsx(Kn,{className:"text-right text-orange-600",children:((We=ce.greeks)==null?void 0:We.theta.toFixed(3))||"-"}),n.jsx(Kn,{className:"text-right text-indigo-600",children:((ot=ce.greeks)==null?void 0:ot.vega.toFixed(3))||"-"}),n.jsxs(Kn,{className:"text-right text-pink-600",children:[((It=ce.greeks)==null?void 0:It.impliedVolatility.toFixed(1))||"-","%"]})]},Ee)})})]}),b.length===0&&n.jsxs("div",{className:"flex items-center justify-center py-8 text-gray-500 dark:text-gray-400",children:[n.jsx(Np,{className:"h-8 w-8 mr-2"}),n.jsx("span",{children:"No candle data available"})]})]})]}),n.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:n.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[n.jsx("span",{children:"From Market Open  Updated every 30s  Each candle includes Greeks"}),n.jsxs("span",{children:["Strike: ",m.strike,"  Expiry: ",m.expiry]})]})})]})})}function HPe({onConfigChange:t,onBackClick:e}={}){var Tf,ro,du,Pf,Af,Wm,vc,no,Ii,Ba,rx,bc,md,qr,bh,so,Io,Mi,vg,_f,Ym,wh,Mo,pd,If,wc,Mf,ra,Km,ns,Wn,gd,Nh,Of,Nc,bg,jc,ss,Ls,Xs,Oo,uu,Sc,Gm,ca,xd,Rf,hu,rl,Fs,fu,Oi,Xm,Qm,Jm,wg,kc,mu,Zm,ep,nl,Ul,tp,Df,$f,Ng,jh,yd,rp,Lf,jg,Ff,vd,Bf,np,Ro,sp,ao,Sg,Sh,ys,Ja,bd,Uf,kg,ap,mi,Cg,kh,nx,ip,sx,pu,io,Eg,Ch,Ri,gu,da,Cc,Bs,Eh,Tg,va,na,Pg,xu,Th,ua,yu;const[r,s]=g.useState("1d"),[a,i]=g.useState(24750),[o,l]=g.useState("NSE:NIFTY50-INDEX"),d=S=>{switch(S){case"5m":case"15m":case"30m":return[555,930];case"1h":case"4h":return[540,960];case"1d":case"1w":case"1M":return[540,1020];default:return[555,930]}},[h,f]=g.useState(!1),[m,x]=g.useState(""),[b,j]=g.useState(!1),[N,w]=g.useState(!1),[C,T]=g.useState(""),O=async()=>{var Et,Pt,rr,hr,Tt,$t,vs;const S=(rt==null?void 0:rt.candles)||[],L=Object.keys(sn).join(", ")||"None",q=(Pr?Oa(S,Pr):S).map(er=>er.close||er.price||0),fe=(Ln==null?void 0:Ln.reduce((er,On)=>(er[On.label]||(er[On.label]=On),er),{}))||{},Se={sl:((Et=fe.SL)==null?void 0:Et.price)||null,breakout:((Pt=fe.Breakout)==null?void 0:Pt.price)||null,target:((rr=fe.Target)==null?void 0:rr.price)||null,slPoint:((hr=fe.SL)==null?void 0:hr.pointNumber)||null,breakoutPoint:((Tt=fe.Breakout)==null?void 0:Tt.pointNumber)||null,targetPoint:(($t=fe.Target)==null?void 0:$t.pointNumber)||null};if(console.log(" USER PATTERN STRUCTURE:",Se),!Se.sl||!Se.breakout||!Se.target){alert("Please assign SL, Breakout, and Target rays before generating code!");return}const ve=Math.abs(Se.breakout-Se.sl),Ge=Math.abs(Se.target-Se.breakout),Qe=Ge/ve;console.log(` GENERATING CODE: User Pattern - SL:${Se.sl}, Breakout:${Se.breakout}, Target:${Se.target}`),console.log(` Risk/Reward: ${Qe.toFixed(2)}:1`);const ht=`# Advanced Trading Strategy - User-Defined Pattern Analysis
# Generated on ${new Date().toLocaleString()}
# Symbol: NIFTY50 | Timeframe: ${r}
# Active Indicators: ${L}
# User Pattern: SL-${Se.slPoint} | Breakout-${Se.breakoutPoint} | Target-${Se.targetPoint}

import pandas as pd
import numpy as np
from typing import Dict, List, Tuple, Optional

class UserPatternAnalyzer:
    """
    User-Defined Pattern Trading System
    Executes trades based on your exact pattern structure
    """
    
    def __init__(self, data: pd.DataFrame):
        self.data = data
        self.current_price = ${((vs=q[q.length-1])==null?void 0:vs.toFixed(2))||"N/A"}
        
        # USER'S EXACT PATTERN STRUCTURE
        self.stop_loss = ${Se.sl.toFixed(2)}      # Point ${Se.slPoint}
        self.breakout_level = ${Se.breakout.toFixed(2)}  # Point ${Se.breakoutPoint}
        self.target_level = ${Se.target.toFixed(2)}     # Point ${Se.targetPoint}
        
        # CALCULATED METRICS FROM YOUR PATTERN
        self.risk_amount = ${ve.toFixed(2)}
        self.reward_amount = ${Ge.toFixed(2)}
        self.risk_reward_ratio = ${Qe.toFixed(2)}
        
        # PATTERN VALIDATION
        self.pattern_valid = self.validate_pattern()
        
    def validate_pattern(self) -> bool:
        """Validates user's pattern structure for logical consistency"""
        # Check if pattern makes logical sense
        if self.stop_loss == self.breakout_level or self.breakout_level == self.target_level:
            return False
            
        # Check risk/reward ratio is favorable (at least 1:1)
        if self.risk_reward_ratio < 1.0:
            return False
            
        return True
    
    def execute_user_pattern_strategy(self) -> Dict:
        """Executes trading strategy based on your exact pattern"""
        if not self.pattern_valid:
            return {"status": "error", "message": "Invalid pattern structure"}
        
        current_price = float(self.current_price)
        
        # DETERMINE TRADE DIRECTION BASED ON YOUR PATTERN
        if self.target_level > self.breakout_level:
            trade_direction = "LONG"
            entry_condition = current_price >= self.breakout_level
        else:
            trade_direction = "SHORT" 
            entry_condition = current_price <= self.breakout_level
        
        return {
            'pattern_type': self.get_dominant_pattern(),
            'strength': self.calculate_pattern_strength(),
            'reliability': self.calculate_reliability_score(),
            "trade_direction": trade_direction,
            "entry_price": self.breakout_level,
            "stop_loss": self.stop_loss,
            "target": self.target_level,
            "current_price": current_price,
            "entry_signal": "BUY" if entry_condition and trade_direction == "LONG" else "SELL" if entry_condition and trade_direction == "SHORT" else "WAIT",
            "risk_amount": self.risk_amount,
            "reward_amount": self.reward_amount,
            "risk_reward_ratio": f"1:{self.risk_reward_ratio:.2f}",
            "pattern_points": f"SL-{userPattern.slPoint}, Breakout-{userPattern.breakoutPoint}, Target-{userPattern.targetPoint}",
            "pattern_valid": self.pattern_valid
        }
    
    def identify_support_resistance(self) -> Dict[str, List[float]]:
        """Support & Resistance Identification - Automatically finds key levels"""
        highs = self.data['high'].rolling(window=5).max()
        lows = self.data['low'].rolling(window=5).min()
        
        # Dynamic support/resistance with market structure
        support_levels = self.find_significant_levels(lows, 'support')
        resistance_levels = self.find_significant_levels(highs, 'resistance')
        
        return {
            'support_levels': support_levels,
            'resistance_levels': resistance_levels,
            'current_zone': self.determine_current_zone(),
            'next_target': self.calculate_next_target()
        }
    
    def recognize_patterns(self) -> Dict:
        """Pattern Recognition - Detects bullish/bearish signals"""
        patterns = {
            'bullish_breakout': self.detect_bullish_breakout(),
            'bearish_breakdown': self.detect_bearish_breakdown(),
            'hammer_reversal': self.detect_hammer_reversal(),
            'consolidation': self.detect_consolidation(),
            'trending_momentum': self.analyze_momentum()
        }
        
        return {
            'active_patterns': [k for k, v in patterns.items() if v['signal']],
            'pattern_confidence': self.calculate_pattern_confidence(patterns),
            'trade_direction': self.determine_trade_direction(patterns),
            'entry_signals': self.generate_entry_signals(patterns)
        }
    
    def analyze_volatility(self) -> Dict:
        """Volatility Analysis - Dynamic risk management based on market conditions"""
        atr = self.calculate_atr(period=14)
        volatility_regime = self.classify_volatility_regime()
        
        return {
            'current_volatility': atr,
            'atr_value': atr,
            'volatility_regime': volatility_regime,
            'risk_adjustment': self.calculate_risk_adjustment(),
            'position_sizing': self.dynamic_position_sizing(),
            'stop_loss_distance': atr * 2,  # Dynamic SL based on volatility
            'take_profit_ratio': self.calculate_optimal_rr_ratio()
        }
    
    def analyze_price_action(self) -> Dict:
        """Price Action Analysis - Reads candle body strength and directional bias"""
        recent_candles = self.data.tail(10)
        
        return {
            'candle_strength': self.calculate_candle_strength(recent_candles),
            'directional_bias': self.determine_directional_bias(recent_candles),
            'momentum_quality': self.assess_momentum_quality(recent_candles),
            'volume_confirmation': self.analyze_volume_confirmation(recent_candles),
            'rejection_levels': self.identify_rejection_levels(recent_candles)
        }
    
    # Core Analysis Methods
    def detect_bullish_breakout(self) -> Dict:
        """Detects bullish breakout patterns with volume confirmation"""
        price_above_resistance = self.current_price > self.resistance_level
        volume_surge = True  # Add volume analysis if available
        momentum_positive = self.calculate_momentum() > 0
        
        return {
            'signal': price_above_resistance and volume_surge and momentum_positive,
            'confidence': 0.85 if all([price_above_resistance, volume_surge, momentum_positive]) else 0.3,
            'target_price': self.resistance_level * 1.02,
            'stop_loss': self.resistance_level * 0.995
        }
    
    def detect_bearish_breakdown(self) -> Dict:
        """Detects bearish breakdown patterns"""
        price_below_support = self.current_price < self.support_level
        momentum_negative = self.calculate_momentum() < 0
        
        return {
            'signal': price_below_support and momentum_negative,
            'confidence': 0.8 if price_below_support and momentum_negative else 0.25,
            'target_price': self.support_level * 0.98,
            'stop_loss': self.support_level * 1.005
        }
    
    def detect_hammer_reversal(self) -> Dict:
        """Detects hammer reversal patterns at key levels"""
        last_candle = self.data.iloc[-1]
        body_size = abs(last_candle['close'] - last_candle['open'])
        lower_shadow = last_candle['open'] - last_candle['low'] if last_candle['close'] > last_candle['open'] else last_candle['close'] - last_candle['low']
        total_range = last_candle['high'] - last_candle['low']
        
        is_hammer = (lower_shadow > body_size * 2) and (body_size < total_range * 0.3)
        at_support = abs(self.current_price - self.support_level) < self.support_level * 0.01
        
        return {
            'signal': is_hammer and at_support,
            'confidence': 0.75 if is_hammer and at_support else 0.2,
            'reversal_type': 'bullish_hammer' if is_hammer and at_support else 'none'
        }
    
    def detect_consolidation(self) -> Dict:
        """Detects consolidation patterns and ranges"""
        price_range = (self.resistance_level - self.support_level) / self.support_level
        low_volatility = self.volatility < 0.02  # 2% volatility threshold
        
        return {
            'signal': price_range < 0.05 and low_volatility,  # 5% range threshold
            'range_bound': True if price_range < 0.05 else False,
            'breakout_imminent': self.volatility < 0.015,  # Very low volatility suggests breakout coming
            'direction_bias': self.calculate_breakout_direction_bias()
        }
    
    # Risk Management
    def dynamic_position_sizing(self) -> float:
        """Calculate position size based on volatility and risk"""
        base_risk_percent = 0.02  # 2% base risk
        volatility_adjustment = max(0.5, min(2.0, 1 / (self.volatility * 50)))
        return base_risk_percent * volatility_adjustment
    
    def calculate_optimal_rr_ratio(self) -> float:
        """Calculate optimal risk-reward ratio based on market conditions"""
        if self.volatility > 0.03:  # High volatility
            return 1.5
        elif self.volatility < 0.015:  # Low volatility
            return 2.5
        else:
            return 2.0  # Normal conditions
    
    # Utility Methods
    def calculate_momentum(self) -> float:
        """Calculate price momentum"""
        if len(self.data) < 10:
            return 0
        recent_prices = self.data['close'].tail(10)
        return (recent_prices.iloc[-1] - recent_prices.iloc[0]) / recent_prices.iloc[0]
    
    def get_trading_signal(self) -> Dict:
        """Generate final trading signal based on all analysis"""
        fingerprint = self.detect_chart_fingerprint()
        patterns = self.recognize_patterns()
        volatility_analysis = self.analyze_volatility()
        price_action = self.analyze_price_action()
        
        # Combine all signals for final decision
        signal_strength = (
            fingerprint['strength'] * 0.3 +
            patterns['pattern_confidence'] * 0.4 +
            price_action['momentum_quality'] * 0.3
        )
        
        return {
            'action': 'BUY' if signal_strength > 0.6 else 'SELL' if signal_strength < 0.4 else 'HOLD',
            'confidence': signal_strength,
            'position_size': volatility_analysis['position_sizing'],
            'stop_loss': volatility_analysis['stop_loss_distance'],
            'take_profit': volatility_analysis['take_profit_ratio'],
            'analysis_summary': {
                'chart_fingerprint': fingerprint,
                'pattern_analysis': patterns,
                'volatility_regime': volatility_analysis,
                'price_action_score': price_action
            }
        }

# Example Usage
if __name__ == "__main__":
    # Load your OHLCV data
    # data = pd.read_csv('your_data.csv')  # Replace with actual data loading
    
    # Initialize analyzer
    analyzer = AdvancedChartAnalyzer(data)
    
    # Get comprehensive analysis
    trading_signal = analyzer.get_trading_signal()
    support_resistance = analyzer.identify_support_resistance()
    
    print(f"Trading Signal: {trading_signal['action']}")
    print(f"Confidence: {trading_signal['confidence']:.2f}")
    print(f"Current Price: {analyzer.current_price}")
    print(f"Support: {analyzer.support_level:.2f}")
    print(f"Resistance: {analyzer.resistance_level:.2f}")
    print(f"Volatility: {analyzer.volatility:.4f}")
    
    # Display full analysis
    for key, value in trading_signal['analysis_summary'].items():
        print(f"\\n{key.replace('_', ' ').title()}:")
        print(value)

"""
Advanced Features Implemented:
 Real Chart Fingerprint Detection - Analyzes actual price patterns, not just indicators
 Support & Resistance Identification - Automatically finds key levels
 Pattern Recognition - Detects bullish breakouts, bearish breakdowns, hammer reversals, consolidations
 Volatility Analysis - Dynamic risk management based on market conditions
 Price Action Analysis - Reads candle body strength and directional bias

This code provides institutional-grade analysis for professional trading decisions.
Risk Warning: Past performance does not guarantee future results. Trade responsibly.
"""`;T(ht),w(!0)},[I,P]=g.useState(()=>{if(typeof window<"u"){const S=localStorage.getItem("deletedStrategies");return S?JSON.parse(S):[]}return[]}),A=S=>{const L=[...I,S];P(L),localStorage.setItem("deletedStrategies",JSON.stringify(L))},R=S=>{const L={name:S.name,indicator:S.indicator,period:S.period,entryCondition:S.entryCondition,slCondition:S.slCondition,exitRule:S.exitRule,trailSL:S.trailSL,timestamp:Date.now()};return btoa(JSON.stringify(L))},B=S=>{try{const L=S.trim();if(/^[A-Za-z0-9+/=]+$/.test(L)){console.log(" Detected base64 format, decoding...");const D=JSON.parse(atob(L));return console.log(" Successfully decoded base64 strategy:",D.name),{name:D.name||"Imported Strategy",indicator:D.indicator||"EMA",period:D.period||"14",entryCondition:D.entryCondition||"above",slCondition:D.slCondition||"prev_low",exitRule:D.exitRule||"1:1",trailSL:D.trailSL||!1,isImported:!0,dateAdded:new Date().toLocaleDateString(),importedAt:new Date().toISOString()}}else throw new Error("Invalid strategy code format. Please use only base64 encoded strategy codes from BATTU AI or Top Traders.")}catch(L){throw console.error(" Decode error:",L),new Error("Invalid strategy code format. Please copy the base64 code from the Strategy Code section (not JavaScript code).")}},V=S=>{ie(S);const L=S.period||"";ot({name:S.name||"",indicator:S.indicator||"",entryCondition:S.entryCondition||"above",slCondition:S.slCondition||"prev_low",exitRule:S.exitRule||"1:1",trailSL:S.trailSL||!1}),tr(L),te(!0)},X=S=>{const L=R(S);x(L),f(!0)},ee=()=>{navigator.clipboard.writeText(m).then(()=>{console.log("Strategy code copied to clipboard")}).catch(()=>{console.log("Failed to copy, please copy manually")})},Y=async S=>{Lr(L=>{const D=new Set(L);return D.add(S.id),D});try{const L=It||S.period||"14",D=parseInt(L);console.log(` Testing strategy: ${S.name} with ${S.indicator} indicator, Period: ${L}`);const q=Qt||"NSE:ICICIBANK-EQ",fe=is||"1",Se=Ys||"2025-09-08",ve=ps||"2025-09-08";console.log(` Testing with: Symbol=${q}, Timeframe=${fe}, From=${Se}, To=${ve}`);const Ge=eo(q);if(!Ge)throw new Error(`Stock token not found for ${q}. Please select a supported stock.`);const Qe=yg(fe),ht=`${Se} 09:15`,Et=`${ve} 15:30`,Pt=await fetch("/api/angelone/historical",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({exchange:Ge.exchange,symbolToken:Ge.token,interval:Qe,fromDate:ht,toDate:Et})});if(!Pt.ok){const Wt=await Pt.json();throw new Error(Wt.message||`Failed to fetch data: ${Pt.status}`)}const rr=await Pt.json();if(!rr.success||!rr.candles||rr.candles.length===0)throw new Error("No candle data available from Angel One");const Tt={candles:rr.candles.map(Wt=>({timestamp:Math.floor(Wt.timestamp/1e3),open:Wt.open,high:Wt.high,low:Wt.low,close:Wt.close,volume:Wt.volume}))}.candles,$t=Tt.map(Wt=>Wt.close),vs=Tt.map(Wt=>Wt.high),er=Tt.map(Wt=>Wt.low),On=Tt.map(Wt=>Wt.volume);let Hr=[];const dr=[];switch(S.indicator){case"EMA":Hr=Ib($t,D);break;case"SMA":Hr=C1($t,D);break;case"WMA":Hr=APe($t,D);break;case"RSI":Hr=PPe($t,D);break;case"BB":Hr=IPe($t,D).middle;break;case"ATR":Hr=MPe(Tt,D);break;case"Stoch":Hr=OPe(Tt,D).k;break;case"CCI":Hr=RPe(Tt,D);break;case"MFI":Hr=DPe(Tt,D);break;case"Williams %R":Hr=$Pe(Tt,D);break;case"ROC":Hr=LPe($t,D);break;case"ADX":Hr=FPe(Tt,D);break;case"PSAR":Hr=BPe(Tt);break;case"VWAP":Hr=UPe(Tt);break;case"MACD":const _s=_Pe($t);Hr=(_s==null?void 0:_s.macd)||[];break;default:Hr=Ib($t,D)}for(let Wt=1;Wt<Tt.length;Wt++){const Bn=Tt[Wt],_s=Tt[Wt-1];if(Hr[Wt]!==null&&Hr[Wt-1]!==null){const bs=Hr[Wt],Jr=Hr[Wt-1];if(["RSI","MFI","Williams %R","Stoch"].includes(S.indicator)){const oo=S.indicator==="Williams %R"?-20:70,Lt=S.indicator==="Williams %R"?-80:30;Jr<=Lt&&bs>Lt&&dr.push({timestamp:Bn.timestamp,time:ho(new Date(Bn.timestamp*1e3),"HH:mm:ss"),price:Bn.close,type:"EMA_CROSS_ABOVE",indicator:`${S.indicator}-${D}`,indicatorValue:bs}),Jr>=oo&&bs<oo&&dr.push({timestamp:Bn.timestamp,time:ho(new Date(Bn.timestamp*1e3),"HH:mm:ss"),price:Bn.close,type:"EMA_CROSS_BELOW",indicator:`${S.indicator}-${D}`,indicatorValue:bs})}else S.indicator==="CCI"?(Jr<=-100&&bs>-100&&dr.push({timestamp:Bn.timestamp,time:ho(new Date(Bn.timestamp*1e3),"HH:mm:ss"),price:Bn.close,type:"EMA_CROSS_ABOVE",indicator:`${S.indicator}-${D}`,indicatorValue:bs}),Jr>=100&&bs<100&&dr.push({timestamp:Bn.timestamp,time:ho(new Date(Bn.timestamp*1e3),"HH:mm:ss"),price:Bn.close,type:"EMA_CROSS_BELOW",indicator:`${S.indicator}-${D}`,indicatorValue:bs})):(_s.close<=Jr&&Bn.close>bs&&dr.push({timestamp:Bn.timestamp,time:ho(new Date(Bn.timestamp*1e3),"HH:mm:ss"),price:Bn.close,type:"EMA_CROSS_ABOVE",indicator:`${S.indicator}-${D}`,indicatorValue:bs}),_s.close>=Jr&&Bn.close<bs&&dr.push({timestamp:Bn.timestamp,time:ho(new Date(Bn.timestamp*1e3),"HH:mm:ss"),price:Bn.close,type:"EMA_CROSS_BELOW",indicator:`${S.indicator}-${D}`,indicatorValue:bs}))}}const Dr=dr.map((Wt,Bn)=>{const _s=Wt.type==="EMA_CROSS_ABOVE"?"BUY":"SELL",bs=Wt.price;let Jr=bs,oo="market_close";const Lt=Tt.findIndex(Ph=>Ph.timestamp===Wt.timestamp),sl=S.exitRule||"market_close",wd=S.slCondition||"prev_low",Nd=S.trailSL||!1;if(!(wd==="none"||!wd)||!(sl==="none"||sl==="market_close")){const Ph=Tt[Lt],il=Lt>0?Tt[Lt-1]:Ph,Vl=Math.abs(bs-(_s==="BUY"?il.low:il.high));for(let zf=Lt+1;zf<Tt.length;zf++){const ql=Tt[zf],lp=Tt[zf-1];if(wd==="prev_low"&&_s==="BUY"){const Yn=lp.low;if(ql.low<=Yn){Jr=Yn,oo="stop_loss";break}}else if(wd==="prev_high"&&_s==="SELL"){const Yn=lp.high;if(ql.high>=Yn){Jr=Yn,oo="stop_loss";break}}if(sl.includes(":")){const[Yn,Za]=sl.split(":").map(Number),ei=_s==="BUY"?bs+Vl*Za/Yn:bs-Vl*Za/Yn;if(_s==="BUY"&&ql.high>=ei||_s==="SELL"&&ql.low<=ei){Jr=ei,oo="target_reached";break}}if(Nd){const Yn=Vl*.5,Za=_s==="BUY"?Math.max(ql.low-Yn,Jr):Math.min(ql.high+Yn,Jr);if(_s==="BUY"&&ql.low<=Za||_s==="SELL"&&ql.high>=Za){Jr=Za,oo="trailing_stop";break}}}}if(oo==="market_close"&&Tt.length>0&&(Jr=Tt[Tt.length-1].close),bs===Jr)return null;const op=parseFloat((_s==="BUY"?(Jr-bs)*100:(bs-Jr)*100).toFixed(2));return{id:Date.now()+Math.random()+Bn,strategyName:S.name,symbol:Qt,timeframe:is==="1"?"1min":`${is}min`,indicator:`EMA-${D}`,entryPrice:bs,exitPrice:Jr,pnl:op,direction:_s,status:"completed",timestamp:new Date(Wt.timestamp*1e3).toISOString(),exitReason:oo,conditions:{entry:S.entryCondition||"cross_above",stopLoss:S.slCondition||"prev_low",exit:S.exitRule||"market_close"},crossingData:{type:Wt.type,time:Wt.time,indicatorValue:Wt.indicatorValue,usingPeriod:D}}}).filter(Wt=>Wt!==null);if(Dr.length>0)pt(Wt=>[...Dr,...Wt]),console.log(` Strategy test completed with ${Qt} ${is}min EMA-${D}:`,Dr);else{const Wt={id:Date.now()+Math.random(),strategyName:S.name,symbol:Qt,timeframe:is==="1"?"1min":`${is}min`,indicator:`EMA-${D}`,entryPrice:0,exitPrice:0,pnl:0,direction:"NONE",status:"no_trades",timestamp:new Date().toISOString(),exitReason:"no_signals_generated",conditions:{entry:S.entryCondition||"cross_above",stopLoss:S.slCondition||"prev_low",exit:S.exitRule||"market_close"},crossingData:{type:"NO_CROSSINGS_DETECTED",time:"N/A",indicatorValue:0,usingPeriod:D}};pt(Bn=>[Wt,...Bn]),console.log(` Strategy test completed with ${Qt} ${is}min EMA-${D}: 0 trades generated`)}Ye(!0)}catch(L){console.error(" Strategy test failed:",L),console.error(" Error details:",{message:L.message||String(L),stack:L.stack,strategyName:S.name,indicator:S.indicator})}finally{Lr(L=>{const D=new Set(L);return D.delete(S.id),D})}},re=async()=>{if(!Ct.trim()){alert("Please enter a strategy code");return}try{const S=Ct.trim();console.log(" Attempting to import strategy code:",S.substring(0,50)+"...");const L=B(S),D={...L,isImported:!0,dateAdded:new Date().toLocaleDateString(),importedAt:new Date().toISOString()};console.log(" Successfully decoded strategy:",D.name),await ue(D),we(""),te(!1),alert(` Successfully imported "${L.name}" strategy!`)}catch(S){console.error(" Import failed:",S),alert(" Invalid strategy code format. Please check the code and try again.")}},[le,te]=g.useState(!1),[de,ie]=g.useState(null),[Z,ne]=g.useState([]),[oe,U]=g.useState(!1),[W,be]=g.useState("main"),[pe,ge]=g.useState(!1),Ce=async()=>{try{U(!0),console.log(" Fetching strategies from Google Cloud...");const L=await(await fetch("/api/strategies")).json();if(L.success)if(L.data&&L.data.length>0)console.log(` Retrieved ${L.data.length} strategies from Google Cloud`),ne(L.data.map(D=>({...D,dateAdded:D.dateAdded||new Date(D.createdAt).toLocaleDateString()})));else{console.log(" Using localStorage fallback for strategies");const D=localStorage.getItem("customStrategies");if(D){const q=JSON.parse(D);console.log(` Retrieved ${q.length} strategies from localStorage`),ne(q)}else ne([])}else{console.error(" Failed to fetch strategies:",L.error);const D=localStorage.getItem("customStrategies");if(D){const q=JSON.parse(D);console.log(` Using localStorage fallback: ${q.length} strategies`),ne(q)}else ne([])}}catch(S){console.error(" Error fetching strategies, using localStorage fallback:",S);const L=localStorage.getItem("customStrategies");if(L){const D=JSON.parse(L);console.log(` Using localStorage fallback: ${D.length} strategies`),ne(D)}else ne([])}finally{U(!1)}},he=()=>{try{console.log(" COMPLETELY CLEARING ALL LOCAL STRATEGIES..."),localStorage.removeItem("customStrategies"),ne([]),console.log(" COMPLETE DATABASE WIPE - All strategies removed from localStorage"),console.log(" Preventing auto-reload for 5 seconds..."),localStorage.setItem("preventFetch","true"),setTimeout(()=>{localStorage.removeItem("preventFetch"),console.log(" Auto-reload protection removed - database is clean")},5e3),alert(" COMPLETE DATABASE WIPE! All strategies removed. Start fresh now.")}catch(S){console.error(" Error clearing all local strategies:",S),alert(" Failed to clear strategies")}};g.useEffect(()=>{W==="backtest"&&(localStorage.getItem("preventFetch")?console.log(" Fetch prevented - clear operation in progress"):Ce())},[W]);const ue=async S=>{try{console.log(" Saving strategy to Google Cloud...");const D=await(await fetch("/api/strategies",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)})).json();if(D.success){if(D.fallback){console.log(" Using localStorage fallback for strategy save");const q={...S,id:D.id,createdAt:new Date().toISOString()},fe=localStorage.getItem("customStrategies"),Se=fe?JSON.parse(fe):[];Se.push(q),localStorage.setItem("customStrategies",JSON.stringify(Se)),console.log(` Added new strategy: ${q.name}`),ne(Se)}else console.log(` Successfully saved strategy: ${D.id}`),await Ce();return D.id}else{console.error(" Failed to save strategy, using localStorage fallback:",D.error);const q="local_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),fe={...S,id:q,createdAt:new Date().toISOString()},Se=localStorage.getItem("customStrategies"),ve=Se?JSON.parse(Se):[];return ve.push(fe),localStorage.setItem("customStrategies",JSON.stringify(ve)),console.log(` Added new strategy (fallback): ${fe.name}`),ne(ve),q}}catch(L){console.error(" Error saving strategy, using localStorage fallback:",L);const D="local_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),q={...S,id:D,createdAt:new Date().toISOString()},fe=localStorage.getItem("customStrategies"),Se=fe?JSON.parse(fe):[];return Se.push(q),localStorage.setItem("customStrategies",JSON.stringify(Se)),console.log(` Added new strategy (error fallback): ${q.name}`),ne(Se),D}},ce=async(S,L)=>{try{console.log(` Updating strategy ${S} in Google Cloud...`);const q=await(await fetch(`/api/strategies/${S}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)})).json();if(q.success)return console.log(` Successfully updated strategy: ${S}`),await Ce(),!0;throw console.error(" Failed to update strategy in Google Cloud:",q.error),new Error(q.error)}catch(D){throw console.error(" Error updating strategy in Google Cloud:",D),D}},Ee=async S=>{try{console.log(` Deleting strategy ${S} from Google Cloud...`);const D=await(await fetch(`/api/strategies/${S}`,{method:"DELETE"})).json();if(D.success)return console.log(` Successfully deleted strategy: ${S}`),ne(q=>q.filter(fe=>fe.id!==S)),!0;throw console.error(" Failed to delete strategy from Google Cloud:",D.error),new Error(D.error)}catch(L){throw console.error(" Error deleting strategy from Google Cloud:",L),L}},Le=async(S,L)=>{try{const q={jack_linton:{name:"EMA+RSI Multi Strategy",indicators:["EMA","RSI"],period:"14,20",entryCondition:"all_match",slCondition:"prev_low",exitRule:"1:3",trailSL:!0,isMultiStrategy:!0,conditions:"EMA(20) above EMA(14) AND RSI below 30"},samuel_waters:{name:"SMA+MACD Power Combo",indicators:["SMA","MACD"],period:"21,12,26",entryCondition:"all_match",slCondition:"dynamic",exitRule:"1:2",trailSL:!0,isMultiStrategy:!0,conditions:"SMA(21) trending up AND MACD(12,26) bullish crossover"},henry_mercer:{name:"RSI+Bollinger Bands",indicators:["RSI","Bollinger"],period:"14,20",entryCondition:"all_match",slCondition:"bollinger_lower",exitRule:"2:3",trailSL:!1,isMultiStrategy:!0,conditions:"RSI oversold AND price touches lower Bollinger Band"},amelia_rowann:{name:"Triple EMA + Volume",indicators:["EMA","Volume"],period:"9,21,55",entryCondition:"all_match",slCondition:"ema_support",exitRule:"1:4",trailSL:!0,isMultiStrategy:!0,conditions:"Triple EMA alignment AND volume spike > 150%"}}[S];if(q){const fe={...q,dateAdded:ho(new Date,"dd MMM"),isImported:!0,importedFrom:S,importedAt:new Date().toISOString()};await ue(fe);const Se={name:q.name,indicator:q.indicators[0],period:q.period,entryCondition:q.entryCondition,slCondition:q.slCondition,exitRule:q.exitRule,trailSL:q.trailSL,timestamp:Date.now()},ve=btoa(JSON.stringify(Se));navigator.clipboard.writeText(ve).then(()=>{console.log(" Strategy code copied successfully!")}).catch(Ge=>{console.error(" Failed to copy strategy code:",Ge)}),alert(` Successfully copied "${L}" strategy!

 Strategy Code copied to clipboard!
 Paste it in Build Patterns  Import Code`),console.log(` Strategy Code for ${L}:`,ve)}}catch(D){console.error(" Error copying follower strategy:",D),alert(" Failed to copy strategy. Please try again.")}},Ie=S=>{alert(` Now following user: ${S}`)},[Ue,Ae]=g.useState(()=>{if(typeof window<"u"){const S=localStorage.getItem("defaultStrategies");if(S)return JSON.parse(S)}return[{id:1,name:"BATTU Scanner",indicator:"BATTU",period:"pattern",entryCondition:"breakout",slCondition:"prev_low",exitRule:"1:2",trailSL:!0,dateAdded:"15 Mar",isDefault:!0},{id:2,name:"RSI Divergence",indicator:"RSI",period:"14",entryCondition:"below",slCondition:"prev_low",exitRule:"1:2",trailSL:!1,dateAdded:"12 Mar",isDefault:!0}]}),[We,ot]=g.useState({name:"",indicator:"",entryCondition:"above",slCondition:"prev_low",exitRule:"1:1",trailSL:!1}),[It,tr]=g.useState(""),[Ct,we]=g.useState(""),[Fe,Ye]=g.useState(!1),[lt,pt]=g.useState([]),nt=g.useMemo(()=>{const S=parseFloat(lt.filter(ve=>ve.pnl>0).reduce((ve,Ge)=>ve+Ge.pnl,0).toFixed(2)),L=parseFloat(lt.filter(ve=>ve.pnl<0).reduce((ve,Ge)=>ve+Math.abs(Ge.pnl),0).toFixed(2)),D=parseFloat(lt.reduce((ve,Ge)=>ve+Ge.pnl,0).toFixed(2)),q=lt.length,fe=lt.filter(ve=>ve.pnl>0).length,Se=q>0?Math.round(fe/q*100):0;return{totalProfit:S,totalLoss:L,netPnL:D,totalTrades:q,winRate:Se,activeStrategies:Ue.length+Z.length}},[lt,Ue.length,Z.length]),[wt,Lr]=g.useState(new Set),[Tr,Mr]=g.useState(null),[ta,st]=g.useState(!1),zt=g.useRef(null),Ft=g.useRef(null),[pr,kt]=g.useState(!0),Mt=g.useRef(Date.now()),[Ke,Ne]=g.useState("NSE:NIFTY50-INDEX"),[Oe,me]=g.useState(""),[je,ke]=g.useState(""),[Te,Je]=g.useState(null),[Q,tt]=g.useState(null),[it,ft]=g.useState(!1),[He,Vt]=g.useState(!1),[Zt,vr]=g.useState(null),[Dt,Xt]=g.useState(!1),[qt,ar]=g.useState("RELIANCE"),[Cr,An]=g.useState(null),[br,yr]=g.useState(!1),[Qn,Ws]=g.useState(null),[oi,qn]=g.useState("idle"),[Jn,Fr]=g.useState("connection"),[ct,yt]=g.useState("RELIANCE"),[ut,Bt]=g.useState(!1),[Nt,ur]=g.useState(""),[Br,Xr]=g.useState(null),[Er,Sn]=g.useState(!1),[kr,mn]=g.useState(null),[Yr,li]=g.useState("RELIANCE"),[Ca,Y0]=g.useState(!1),[K0,gf]=g.useState(""),[xf,Nl]=g.useState(null),[jl,Kc]=g.useState(!1),[_1,Im]=g.useState(null),[Ds,Ju]=g.useState("idle"),Wo={NIFTY50:{token:"99926000",exchange:"NSE",tradingSymbol:"Nifty 50"},NIFTYBANK:{token:"99926009",exchange:"NSE",tradingSymbol:"Nifty Bank"},RELIANCE:{token:"2885",exchange:"NSE",tradingSymbol:"RELIANCE-EQ"},TCS:{token:"11536",exchange:"NSE",tradingSymbol:"TCS-EQ"},HDFCBANK:{token:"1333",exchange:"NSE",tradingSymbol:"HDFCBANK-EQ"},ICICIBANK:{token:"4963",exchange:"NSE",tradingSymbol:"ICICIBANK-EQ"},INFY:{token:"1594",exchange:"NSE",tradingSymbol:"INFY-EQ"},ITC:{token:"1660",exchange:"NSE",tradingSymbol:"ITC-EQ"},SBIN:{token:"3045",exchange:"NSE",tradingSymbol:"SBIN-EQ"},BHARTIARTL:{token:"10604",exchange:"NSE",tradingSymbol:"BHARTIARTL-EQ"},HINDUNILVR:{token:"1394",exchange:"NSE",tradingSymbol:"HINDUNILVR-EQ"},LT:{token:"11483",exchange:"NSE",tradingSymbol:"LT-EQ"},AXISBANK:{token:"5900",exchange:"NSE",tradingSymbol:"AXISBANK-EQ"},KOTAKBANK:{token:"1922",exchange:"NSE",tradingSymbol:"KOTAKBANK-EQ"},BAJFINANCE:{token:"317",exchange:"NSE",tradingSymbol:"BAJFINANCE-EQ"},MARUTI:{token:"10999",exchange:"NSE",tradingSymbol:"MARUTI-EQ"},TITAN:{token:"3506",exchange:"NSE",tradingSymbol:"TITAN-EQ"},SUNPHARMA:{token:"3351",exchange:"NSE",tradingSymbol:"SUNPHARMA-EQ"},TATAMOTORS:{token:"3456",exchange:"NSE",tradingSymbol:"TATAMOTORS-EQ"},WIPRO:{token:"3787",exchange:"NSE",tradingSymbol:"WIPRO-EQ"},TECHM:{token:"13538",exchange:"NSE",tradingSymbol:"TECHM-EQ"},ADANIENT:{token:"25",exchange:"NSE",tradingSymbol:"ADANIENT-EQ"},ASIANPAINT:{token:"236",exchange:"NSE",tradingSymbol:"ASIANPAINT-EQ"},COALINDIA:{token:"20374",exchange:"NSE",tradingSymbol:"COALINDIA-EQ"},NTPC:{token:"11630",exchange:"NSE",tradingSymbol:"NTPC-EQ"},POWERGRID:{token:"14977",exchange:"NSE",tradingSymbol:"POWERGRID-EQ"},ULTRACEMCO:{token:"11532",exchange:"NSE",tradingSymbol:"ULTRACEMCO-EQ"},ONGC:{token:"2475",exchange:"NSE",tradingSymbol:"ONGC-EQ"},DIVISLAB:{token:"10940",exchange:"NSE",tradingSymbol:"DIVISLAB-EQ"},HCLTECH:{token:"7229",exchange:"NSE",tradingSymbol:"HCLTECH-EQ"},INDUSINDBK:{token:"5258",exchange:"NSE",tradingSymbol:"INDUSINDBK-EQ"},BAJAJFINSV:{token:"16675",exchange:"NSE",tradingSymbol:"BAJAJFINSV-EQ"},DRREDDY:{token:"881",exchange:"NSE",tradingSymbol:"DRREDDY-EQ"},NESTLEIND:{token:"17963",exchange:"NSE",tradingSymbol:"NESTLEIND-EQ"},JSWSTEEL:{token:"11723",exchange:"NSE",tradingSymbol:"JSWSTEEL-EQ"},TATASTEEL:{token:"3499",exchange:"NSE",tradingSymbol:"TATASTEEL-EQ"},"M&M":{token:"2031",exchange:"NSE",tradingSymbol:"M&M-EQ"},HINDALCO:{token:"1363",exchange:"NSE",tradingSymbol:"HINDALCO-EQ"},BPCL:{token:"526",exchange:"NSE",tradingSymbol:"BPCL-EQ"},GRASIM:{token:"1232",exchange:"NSE",tradingSymbol:"GRASIM-EQ"},EICHERMOT:{token:"910",exchange:"NSE",tradingSymbol:"EICHERMOT-EQ"},APOLLOHOSP:{token:"157",exchange:"NSE",tradingSymbol:"APOLLOHOSP-EQ"}},Yo=()=>{console.log(" WebSocket streaming disabled for performance optimization"),st(!1)},Mm=()=>{Ft.current&&(clearInterval(Ft.current),Ft.current=null)};g.useEffect(()=>{const S=()=>{Mt.current=Date.now(),pr||(kt(!0),console.log(" User active - resuming streaming"),Yo())},L=()=>{const Se=Date.now()-Mt.current<3e5;Se!==pr&&(kt(Se),Se||(console.log(" User inactive - stopping streaming to save costs"),Mm(),zt.current&&zt.current.close()))},D=["mousedown","mousemove","keypress","scroll","touchstart","click"];D.forEach(fe=>document.addEventListener(fe,S,!0));const q=setInterval(L,6e4);return Yo(),()=>{D.forEach(fe=>document.removeEventListener(fe,S,!0)),clearInterval(q),Mm(),zt.current&&zt.current.close()}},[pr]),g.useEffect(()=>{Ke&&!Dt&&(console.log(" [OPTION-CHAIN] Initial fetch on mount..."),Fl(),ph(),Xt(!0))},[Ke,Dt]),g.useEffect(()=>{Ke&&Dt&&(console.log(" [OPTION-CHAIN] Underlying changed, refetching..."),Fl(),ph())},[Ke]),g.useEffect(()=>{if(Te!=null&&Te.expiry_dates&&Te.expiry_dates.length>0){const S=[...Te.expiry_dates].sort((q,fe)=>new Date(q).getTime()-new Date(fe).getTime()),L=new Date;L.setHours(0,0,0,0);const D=S.find(q=>new Date(q)>=L)||S[0];(!Oe||!S.includes(Oe))&&(console.log(` [OPTION-CHAIN] Setting expiry to nearest: ${D}`),me(D))}},[Te==null?void 0:Te.expiry_dates]);const Zu=()=>{const S=new Date,L=S.getDay();if(L===0||L===6){const Qe=new Date(S),ht=L===0?2:1;return Qe.setDate(Qe.getDate()-ht),Qe}const D=S.getHours(),q=S.getMinutes();if(D*60+q>=555-60)return S;const ve=new Date(S);ve.setDate(ve.getDate()-1);const Ge=ve.getDay();return Ge===0?ve.setDate(ve.getDate()-2):Ge===6&&ve.setDate(ve.getDate()-1),ve},[Qt,Gc]=g.useState("NSE:ICICIBANK-EQ"),[is,Sl]=g.useState("1"),[eh,yf]=g.useState(!1),lg=Zu(),[Ys,Om]=g.useState(ho(lg,"yyyy-MM-dd")),[ps,Xc]=g.useState(ho(lg,"yyyy-MM-dd")),[Ma,Rm]=g.useState(!1),[Pr,gs]=g.useState(d("1d"));g.useEffect(()=>{const S=d(r);gs(S)},[r]);const vf=S=>{const L=Math.floor(S/60),D=S%60;return`${L.toString().padStart(2,"0")}:${D.toString().padStart(2,"0")}`},Qc=S=>{const L=Math.floor(S/60),D=S%60,q=L>=12?"PM":"AM";return`${L%12||12}:${D.toString().padStart(2,"0")} ${q}`},Oa=(S,L)=>{if(!S||!L||L.length!==2)return[];const[D,q]=L,fe=(Et,Pt=new Date)=>{const rr=new Date(Pt);return rr.setHours(0,0,0,0),rr.setMinutes(Et),Math.floor(rr.getTime()/1e3)},Se=S[0];if(!Se)return[];const ve=Se.timestamp||Se.time||Date.now()/1e3,Ge=new Date(typeof ve=="string"?ve:ve*1e3),Qe=fe(D,Ge),ht=fe(q,Ge);return S.filter(Et=>{const Pt=Et.timestamp||Et.time||0,rr=typeof Pt=="string"?new Date(Pt).getTime()/1e3:Pt;return rr>=Qe&&rr<=ht})};vf(Pr[0]),vf(Pr[1]);const[ln,th]=g.useState(0),[os,rh]=g.useState(null),[Jc,Wd]=g.useState(null),[Zc,ed]=g.useState([]),[sn,kl]=g.useState({sma:[],ema:[],ma:[],rsi:[],bollinger:[],macd:[]}),ci={sma:{period:20},ema:{period:20},ma:{period:20},rsi:{period:14,overbought:70,oversold:30},bollinger:{period:20,stdDev:2},macd:{fast:12,slow:26,signal:9}},[nh,Ra]=g.useState(!1),[di,Ko]=g.useState(null),[_n,Go]=g.useState(null),[Or,Da]=g.useState([]),[Dm,$m]=g.useState(!1),[cg,ui]=g.useState(null),[sh,ah]=g.useState(0);g.useCallback(S=>{Da(S)},[]);const Rr=g.useCallback(()=>{Da([]),ui(null),ah(S=>S+1)},[]),Es=g.useCallback(()=>{$m(S=>!S)},[]),Cl=g.useCallback((S,L)=>{Da(D=>D.map((q,fe)=>fe===S?{...q,label:L}:q))},[]),[ih,bf]=g.useState("candles"),[Ln,wf]=g.useState([]),[ls,$a]=g.useState([]),[Hn,Ci]=g.useState(""),[La,Xo]=g.useState([]),{toast:gr}=Ia(),Lm={head_shoulders:{name:"Head & Shoulders",description:"Classic reversal pattern with head higher than shoulders"},double_top:{name:"Double Top",description:"Two peaks at similar levels - bearish reversal"},double_bottom:{name:"Double Bottom",description:"Two troughs at similar levels - bullish reversal"},ascending_triangle:{name:"Ascending Triangle",description:"Higher lows with equal highs - bullish continuation"},descending_triangle:{name:"Descending Triangle",description:"Lower highs with equal lows - bearish continuation"}},td=S=>{var L;return((L=Lm[S])==null?void 0:L.name)||S};g.useCallback(async S=>{const L=Lm[S];if(!L){gr({title:" Detection Failed",description:"Pattern not found.",variant:"destructive"});return}if(!(rt!=null&&rt.candles)||rt.candles.length===0){gr({title:" No Chart Data",description:"Please load chart data first before detecting patterns.",variant:"destructive"});return}try{console.log(` Starting professional pattern detection for ${L.name}...`),console.log(` Using ${rt.candles.length} candles from live chart`);const D=await fetch("/api/pattern-detection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbol:o||"UNKNOWN",candles:rt.candles,timeframe:"1min",patterns:[S],minConfidence:75})});if(!D.ok)throw new Error(`API Error: ${D.status} ${D.statusText}`);const q=await D.json();if(!q.success)throw new Error(q.error||"Pattern detection failed");console.log(" Pattern Detection API Response:",q);const fe=q.patterns||[],Se=q.swingPoints||[];if(Xo(fe),Se.length>0&&console.log(` Found ${Se.length} swing points for pattern analysis`),fe.length>0){const ve=fe.filter(Ge=>Ge.confidence>=75);gr({title:" Professional Pattern Detection Success!",description:`Found ${ve.length} high-confidence ${L.name} pattern(s) using swing point analysis. Swing points: ${Se.length}`}),console.log(" Professional Pattern Detection Results:",{pattern:L.name,detectedInstances:ve.length,swingPointsUsed:Se.length,totalCandles:q.totalCandles,analysisMethod:"ZigZag + Swing Point Relationships"})}else gr({title:" No High-Confidence Patterns Found",description:`No instances of ${L.name} detected above 75% confidence using professional swing point analysis. Swing points analyzed: ${Se.length}`}),console.log(" Pattern Detection Stats:",{pattern:L.name,swingPointsFound:Se.length,totalCandles:q.totalCandles,patternsFound:fe.length,highConfidencePatterns:0,threshold:"75%+"})}catch(D){console.error(" Professional pattern detection failed:",D),gr({title:" Pattern Detection Error",description:D instanceof Error?D.message:"Unknown error occurred during pattern detection",variant:"destructive"})}},[Lm,o,Xo,gr]);const El=g.useCallback(async S=>{var fe,Se,ve;if(console.log(` 4C PATTERN SELECTED: "${S.name}" with ${((fe=S.metadata)==null?void 0:fe.totalPoints)||0} points`),!S.points||S.points.length<4){gr({title:" Invalid Pattern",description:`Pattern "${S.name}" needs at least 4 points. Current: ${((Se=S.points)==null?void 0:Se.length)||0} points.`,variant:"destructive"});return}const L=((ve=S.metadata)==null?void 0:ve.totalPoints)||S.points.length,D={name:S.name,points:S.points,relationships:dg(S.points),metadata:S.metadata};console.log(` Generated relationships for ${L} points:`,D.relationships);const q=document.querySelector('canvas[data-testid="visual-chart"]');if(q&&q._detectDynamicPattern){console.log(` Calling 4C dynamic pattern detection for ${L} candles...`);const Ge=q._detectDynamicPattern(D,L);gr(Ge?{title:" 4C Pattern Detected!",description:`Found "${S.name}" with ${(Ge.confidence*100).toFixed(1)}% confidence using authentic 4C candle logic. ${L} points = ${L} candles.`}:{title:" No 4C Match Found",description:`Pattern "${S.name}" (${L} candles) did not find matches 75% confidence using 4C logic.`,variant:"destructive"})}else gr({title:" 4C Logic Unavailable",description:"Visual chart canvas not ready. Please try again after chart loads.",variant:"destructive"})},[gr]),dg=S=>{if(!S||S.length<4)return[];const L=[];for(let fe=0;fe<S.length-1;fe++){const Se=S[fe],ve=S[fe+1];Se.price>ve.price?L.push(`${fe+1}>${fe+2}`):Se.price<ve.price?L.push(`${fe+1}<${fe+2}`):L.push(`${fe+1}=${fe+2}`)}const D=S[0],q=S[S.length-1];return D.price>q.price?L.push(`1>${S.length}`):D.price<q.price?L.push(`1<${S.length}`):L.push(`1=${S.length}`),L};g.useCallback(async()=>{var L,D,q,fe,Se,ve,Ge,Qe,ht,Et;if(!Hn||Hn==="clear"){gr({title:" No Pattern Selected",description:"Please select a custom pattern from the dropdown first.",variant:"destructive"});return}const S=ls.find(Pt=>Pt.id===Hn);if(!S){gr({title:" Pattern Not Found",description:"Selected pattern could not be found.",variant:"destructive"});return}try{console.log(` DYNAMIC PATTERN DETECTION: "${S.name}" with ${((L=S.points)==null?void 0:L.length)||0} points`),console.log(` Pattern relationships: ${((D=S.relationships)==null?void 0:D.join(", "))||"None"}`);const Pt=document.querySelector('canvas[data-testid="visual-chart"]');if(Pt&&Pt._detectDynamicPattern){console.log(` Calling Visual Chart dynamic pattern detection for ${((q=S.points)==null?void 0:q.length)||0} points...`);const er=Pt._detectDynamicPattern(S,((fe=S.points)==null?void 0:fe.length)||5);gr(er?{title:" Pattern Detection Complete",description:`Applied "${S.name}" with ${((Se=S.points)==null?void 0:Se.length)||0} points using same 4C logic. Found ${(er.confidence*100).toFixed(1)}% confidence match.`}:{title:" No Match Found",description:`Pattern "${S.name}" with ${((ve=S.points)==null?void 0:ve.length)||0} points did not find any matches 75% confidence.`,variant:"destructive"});return}const rr=(()=>{try{return window.cbConnectChartData||[]}catch{return[]}})();if(console.log(` Chart data available: ${rr.length} candles`),rr.length===0){gr({title:" No Chart Data",description:"Please load chart data first before detecting patterns.",variant:"destructive"});return}const hr=rr.map(er=>Array.isArray(er)?{timestamp:er[0],open:er[1],high:er[2],low:er[3],close:er[4],volume:er[5]||0}:{timestamp:er.timestamp||er.time,open:er.open||er.price,high:er.high||er.price,low:er.low||er.price,close:er.close||er.price,volume:er.volume||0}),$t=await(await fetch("/api/pattern-detection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbol:o,candles:hr,timeframe:"1m",relationships:S.relationships,tolerancePercent:3,minConfidence:75})})).json();if(!$t.success)throw new Error($t.error||"Pattern detection failed");console.log(` Support/Resistance API Result: ${$t.patternsAfterFiltering} patterns found`,$t),console.log(` Found ${((Ge=$t.supportResistanceLevels)==null?void 0:Ge.length)||0} Support/Resistance levels`,$t.supportResistanceLevels);const vs=((Qe=$t.patterns)==null?void 0:Qe.filter(er=>{var On;return er.type==="relationship_sequence"||["head_shoulders","double_top","double_bottom","ascending_triangle","descending_triangle"].includes(er.type)||er.points&&er.points.length>0&&((On=er.points[0])==null?void 0:On.pointNumber)!=null}))||[];if(console.log(` Filtered ${((ht=$t.patterns)==null?void 0:ht.length)||0} total patterns  ${vs.length} swing-based patterns`),vs.length>0){const er=vs.sort((Hr,dr)=>dr.confidence-Hr.confidence)[0];console.log(` Swing Pattern Match: ${er.confidence.toFixed(1)}% confidence`,er);const On=((er==null?void 0:er.points)||[]).slice().sort((Hr,dr)=>(Hr.index??Hr.candleIndex??0)-(dr.index??dr.candleIndex??0));if(On.length>0){const Hr=On.map((dr,Dr)=>({candleIndex:dr.index??dr.candleIndex??Dr,price:dr.price,timestamp:dr.timestamp,pointNumber:Dr+1,label:`${Dr+1}`,type:dr.type,strength:dr.strength,swingPoint:!0}));console.log(` DEFENSIVE MAPPED ${Hr.length} swing points (sorted by candleIndex):`,Hr.map(dr=>{var Dr;return`${dr.pointNumber}:${(Dr=dr.type)==null?void 0:Dr.toUpperCase()}@${dr.price.toFixed(2)}[${dr.candleIndex}]`}).join("  ")),Da(Hr),gr({title:" Trendline Pattern Detected!",description:`Found "${S.name}" with ${er.confidence.toFixed(1)}% confidence using numbered swing points`})}else console.log(" Swing pattern has no valid points:",er)}else if($t.swingPoints&&$t.swingPoints.length>0){const er=($t.swingPoints||[]).slice().sort((dr,Dr)=>(dr.index??dr.candleIndex??0)-(Dr.index??Dr.candleIndex??0)),Hr=er.slice(-Math.min(5,er.length)).map((dr,Dr)=>({candleIndex:dr.index??dr.candleIndex??Dr,price:dr.price,timestamp:dr.timestamp,pointNumber:Dr+1,label:`${Dr+1}`,type:dr.type,strength:dr.strength||1,swingPoint:!0}));console.log(` FALLBACK: Using ${Hr.length} ZigZag points as numbered trendline (sorted):`,Hr.map(dr=>{var Dr;return`${dr.pointNumber}:${(Dr=dr.type)==null?void 0:Dr.toUpperCase()}@${dr.price.toFixed(2)}[${dr.candleIndex}]`}).join("  ")),Da(Hr),gr({title:" Using ZigZag Swing Points",description:`No swing pattern match. Showing last ${Hr.length} ZigZag points as numbered trendline.`})}else Da([]),gr({title:" Insufficient Swing Points",description:`Need at least 3 swing points for trendline analysis. Found ${((Et=$t.swingPoints)==null?void 0:Et.length)||0}.`})}catch(Pt){console.error(" Custom pattern detection failed:",Pt),gr({title:" Detection Error",description:Pt instanceof Error?Pt.message:"Unknown error during pattern detection",variant:"destructive"})}},[Hn,ls,o,gr]),g.useEffect(()=>{const S=D=>{const{selectedPoints:q,horizontalRays:fe}=D.detail;Da(q||[]),wf(fe||[])};return window.addEventListener("visualAIPointsUpdated",S),Da(window.selectedPoints||[]),wf(window.horizontalRays||[]),(()=>{try{const D=localStorage.getItem("tradingPatterns");D&&$a(JSON.parse(D))}catch(D){console.error("Failed to load saved patterns:",D)}})(),()=>{window.removeEventListener("visualAIPointsUpdated",S)}},[]);const oh=g.useCallback(()=>{var D;if(!Ks||!((D=rt==null?void 0:rt.candles)!=null&&D.length)||ls.length===0)return;console.log(" Running auto-detection scan across",ls.length,"saved patterns...");const S=rt.candles,L=[];ls.forEach(q=>{lh(S,q).forEach(Se=>{Se.confidence>=.75&&L.push({...Se,patternId:q.id,patternName:q.name,detectedAt:new Date().toISOString()})})}),L.length>0?(console.log(` Auto-Detection: Found ${L.length} high-confidence matches!`),_l(L),Ga(L.map(q=>({id:`overlay_${q.patternId}_${q.startIndex}`,patternName:q.patternName,confidence:q.confidence,startIndex:q.startIndex,endIndex:q.endIndex,visible:!0})))):(_l([]),Ga([]))},[ls]);g.useEffect(()=>{if(Ks&&tn){const S=setTimeout(oh,1e3);return()=>clearTimeout(S)}},[oh]);const Tl=g.useCallback(S=>{try{console.log(" DELETE PATTERN CALLED with ID:",S),console.log(" Current savedPatterns length:",ls.length);const L=ls.find(q=>q.id===S);if(!L){console.warn(" Pattern not found for deletion:",S),gr({title:" Pattern Not Found",description:"Pattern could not be found for deletion.",variant:"destructive"});return}console.log(" DELETING PATTERN:",L.name,"ID:",S);const D=ls.filter(q=>q.id!==S);console.log(" Updated patterns length:",D.length),$a(D),localStorage.setItem("tradingPatterns",JSON.stringify(D)),console.log(" Pattern removed from localStorage"),Ga(q=>q.filter(fe=>!fe.id.includes(S))),_l(q=>q.filter(fe=>fe.patternId!==S)),Xo(q=>q.filter(fe=>fe.id!==S)),Hn===S&&(Ci(""),console.log(" Cleared selected pattern")),setTimeout(()=>{gr({title:" Pattern Deleted",description:`"${L.name}" completely removed from dropdown and chart.`})},100),console.log(" PATTERN DELETE COMPLETE. Remaining patterns:",D.length)}catch(L){console.error(" DELETE PATTERN ERROR:",L),gr({title:" Delete Failed",description:"Failed to delete pattern. Please try again.",variant:"destructive"})}},[ls,Hn,gr]),Fm=S=>{try{const L=[...Or].sort((ve,Ge)=>ve.pointNumber-Ge.pointNumber),D=[];for(let ve=0;ve<L.length-1;ve++){const Ge=L[ve],Qe=L[ve+1],ht=Ge.price>Qe.price?">":"<";D.push(`${Ge.pointNumber}${ht}${Qe.pointNumber}`)}const q=Ln.reduce((ve,Ge)=>(ve[Ge.label]||(ve[Ge.label]=Ge),ve),{}),fe={id:Date.now().toString(),name:S,points:Or.map(ve=>({pointNumber:ve.pointNumber,price:ve.price,timestamp:ve.timestamp,relativePrice:0,relativeTime:0,x:ve.x,y:ve.y})),rays:{sl:q.SL||null,breakout:q.Breakout||null,target:q.Target||null},relationships:D,createdAt:new Date,metadata:{totalPoints:Or.length,priceRange:Math.max(...Or.map(ve=>ve.price))-Math.min(...Or.map(ve=>ve.price)),timeRange:Or.length>1?Math.max(...Or.map(ve=>ve.timestamp))-Math.min(...Or.map(ve=>ve.timestamp)):0,volatility:.1,avgSlope:0,direction:"neutral",complexity:Or.length<=3?"simple":"complex",symbol:"VISUAL_AI_PATTERN",timeframe:"1m",dateCreated:new Date().toISOString()}},Se=[...ls,fe];$a(Se),localStorage.setItem("tradingPatterns",JSON.stringify(Se)),console.log(` Pattern "${S}" saved successfully!`,fe),gr({title:" Pattern Saved",description:`Pattern "${S}" saved with ${Or.length} points and ${Object.keys(q).length} rays.`})}catch(L){console.error("Failed to save pattern:",L),gr({title:" Save Failed",description:"Failed to save pattern. Please try again.",variant:"destructive"})}},Pl=S=>{try{const L=ls.find(fe=>fe.id===S);if(!L){console.error("Pattern not found:",S);return}console.log(` Applying pattern "${L.name}" to chart...`,L);const D=(rt==null?void 0:rt.candles)||[];if(D.length<L.points.length){gr({title:" Insufficient Data",description:`Chart has insufficient data points. Need at least ${L.points.length} candles.`,variant:"destructive"});return}const q=lh(D,L);if(q.length>0){const fe=q[0];console.log(` Found ${q.length} potential matches. Best match:`,fe),fe.confidence>=.75?(D1(L,fe),gr({title:" Pattern Applied",description:`Pattern "${L.name}" applied! Match confidence: ${(fe.confidence*100).toFixed(1)}%`})):gr({title:" Low Confidence Match",description:`Match confidence: ${(fe.confidence*100).toFixed(1)}%. Pattern not applied (need 75% for simple relationship matching).`,variant:"destructive"})}else gr({title:" No Matches Found",description:`No matches found for pattern "${L.name}" in current chart data.`,variant:"destructive"})}catch(L){console.error("Failed to apply pattern:",L),gr({title:" Pattern Application Failed",description:"Failed to apply pattern. Please try again.",variant:"destructive"})}},lh=(S,L)=>{const D=[],q=L.points.length;for(let fe=0;fe<=S.length-q;fe++){const Se=S.slice(fe,fe+q),ve=G0(Se,L);ve>.75&&D.push({startIndex:fe,endIndex:fe+q-1,confidence:ve,candles:Se})}return D.sort((fe,Se)=>Se.confidence-fe.confidence)},G0=(S,L)=>{var Et;console.log(" Original 15-pattern detection logic for window:",S.length,"candles vs pattern:",(Et=L.points)==null?void 0:Et.length,"points"),ug(S);const D=S.map(Pt=>Array.isArray(Pt)?Pt[4]:Pt.close);if(!D||D.length===0||!L.points||L.points.length===0)return console.log(" Invalid data for confidence calculation"),0;let q=0,fe=0;const Se=I1(D,L);q+=Se*.4,fe+=.4;const ve=M1(D,L);q+=ve*.25,fe+=.25;const Ge=O1(D,L);q+=Ge*.2,fe+=.2;const Qe=R1(S);q+=Qe*.15,fe+=.15;const ht=fe>0?q/fe:0;return console.log(` Original 15-Pattern Analysis: Relationships=${Se.toFixed(2)}, Geometric=${ve.toFixed(2)}, Trend=${Ge.toFixed(2)}, Volume=${Qe.toFixed(2)}, Final=${ht.toFixed(3)}`),ht},ug=S=>{const L=[],D=S.map(q=>Array.isArray(q)?q[4]:q.close);for(let q=1;q<D.length-1;q++){const fe=D[q-1],Se=D[q],ve=D[q+1];Se>fe&&Se>ve?L.push({index:q,price:Se,type:"high"}):Se<fe&&Se<ve&&L.push({index:q,price:Se,type:"low"})}return L},X0=S=>{const L=[];for(let D=0;D<S.length-1;D++){const q=S[D].price,fe=S[D+1].price,Se=q>fe?`${D+1}>${D+2}`:`${D+1}<${D+2}`;L.push(Se)}return L},I1=(S,L)=>{const D=X0(L.points),q=X0(S.map((ve,Ge)=>({pointNumber:Ge+1,price:ve})));let fe=0;const Se=Math.min(D.length,q.length);if(Se===0)return 0;for(let ve=0;ve<Se;ve++){const Ge=D[ve],Qe=q[ve];Ge===Qe&&(fe++,ve>0&&D[ve-1]===q[ve-1]&&(fe+=.2))}return Math.min(1,fe/Se)},M1=(S,L)=>{if(!L.points||L.points.length<3)return 0;const D=hr=>{const Tt=Math.min(...hr),vs=Math.max(...hr)-Tt;return hr.map(er=>vs>0?(er-Tt)/vs:0)},q=D(S),fe=D(L.points.map(hr=>hr.price)),Se=Math.min(q.length,fe.length);if(Se<3)return 0;let ve=0;const Ge=q.slice(0,Se).reduce((hr,Tt)=>hr+Tt)/Se,Qe=fe.slice(0,Se).reduce((hr,Tt)=>hr+Tt)/Se;let ht=0,Et=0,Pt=0;for(let hr=0;hr<Se;hr++){const Tt=q[hr]-Ge,$t=fe[hr]-Qe;ht+=Tt*$t,Et+=Tt*Tt,Pt+=$t*$t}const rr=Math.sqrt(Et*Pt);return ve=rr>0?Math.abs(ht/rr):0,Math.min(1,ve)},O1=(S,L)=>{if(S.length<3||!L.points||L.points.length<3)return 0;const D=Pt=>{const rr=[];for(let hr=1;hr<Pt.length;hr++)rr.push(Pt[hr]>Pt[hr-1]?1:-1);return rr},q=D(S),fe=D(L.points.map(Pt=>Pt.price)),Se=Math.min(q.length,fe.length);if(Se===0)return 0;let ve=0,Ge=0,Qe=0;for(let Pt=0;Pt<Se;Pt++)q[Pt]===fe[Pt]?(ve++,Ge++,Qe=Math.max(Qe,Ge)):Ge=0;const ht=ve/Se,Et=Qe/Se*.3;return Math.min(1,ht+Et)},R1=(S,L)=>{if(!S||S.length===0)return .5;const D=S.map(Ge=>Array.isArray(Ge)&&Ge.length>5?Ge[5]:1),q=S.map(Ge=>Array.isArray(Ge)?Ge[4]:Ge.close);if(D.length<3||q.length<3)return .5;const fe=[],Se=[];for(let Ge=1;Ge<Math.min(D.length,q.length);Ge++){const Qe=(q[Ge]-q[Ge-1])/q[Ge-1],ht=D[Ge]>0?(D[Ge]-D[Ge-1])/D[Ge-1]:0;fe.push(Qe),Se.push(ht)}let ve=.5;for(let Ge=0;Ge<fe.length;Ge++){const Qe=Math.abs(fe[Ge]),ht=Se[Ge];Qe>.005&&(ht>0?ve+=.1:ve-=.05)}return Math.max(0,Math.min(1,ve))},D1=(S,L)=>{try{console.log(` Applying pattern "${S.name}" to visual chart...`,{pattern:S,match:L}),window.clearAll&&window.clearAll();const D=$1(S,L);console.log(` Scaled ${D.length} points for pattern application:`,D);const q=D.map((ve,Ge)=>{var Et;const Qe=L.startIndex+Ge,ht=(rt==null?void 0:rt.candles)||[];return Qe<ht.length?{pointNumber:ve.pointNumber||Ge+1,price:ve.price,timestamp:((Et=ht[Qe])==null?void 0:Et.timestamp)||Date.now(),candleIndex:Qe,x:0,y:0,label:ve.label||void 0}:null}).filter(Boolean),fe=[];S.rays&&Object.entries(S.rays).forEach(([ve,Ge])=>{if(Ge&&Ge.price){const Qe=L1(Ge.price,S,L);fe.push({id:`pattern_ray_${ve}_${Qe.toFixed(2)}_${L.startIndex}`,price:Qe,label:ve.toUpperCase(),color:Ge.color||Yd(ve),pointNumber:Ge.pointNumber||0})}}),console.log(` Applying ${q.length} points and ${fe.length} rays to chart state`),Da(q),wf(fe),window.selectedPoints=q,window.horizontalRays=fe;const Se=new CustomEvent("visualAIPointsUpdated",{detail:{selectedPoints:q,horizontalRays:fe}});window.dispatchEvent(Se),console.log(` Pattern "${S.name}" successfully applied to chart with ${q.length} points and ${fe.length} rays!`)}catch(D){console.error(" Failed to apply pattern to visual chart:",D)}},$1=(S,L)=>{const D=S.points.map(ht=>ht.price),q=L.candles.map(ht=>ht.close),fe=Math.min(...D),Se=Math.max(...D),ve=Math.min(...q),Qe=(Math.max(...q)-ve)/(Se-fe);return S.points.map((ht,Et)=>({...ht,price:ve+(ht.price-fe)*Qe,x:L.startIndex+Et,y:ve+(ht.price-fe)*Qe}))},L1=(S,L,D)=>{const q=L.points.map(Et=>Et.price),fe=D.candles.map(Et=>Et.close),Se=Math.min(...q),ve=Math.max(...q),Ge=Math.min(...fe),ht=(Math.max(...fe)-Ge)/(ve-Se);return Ge+(S-Se)*ht},Yd=S=>{switch(S.toLowerCase()){case"sl":return"#ef4444";case"breakout":return"#f97316";case"target":return"#22c55e";default:return"#6b7280"}},jo=(S,L)=>{if(!S||!S.candles)return S;const D=JSON.parse(JSON.stringify(S)),q=D.candles;switch(L){case 1:const fe=Math.max(...q.map(Qe=>Math.max(Qe.high,Qe.low,Qe.open,Qe.close))),Se=Math.min(...q.map(Qe=>Math.min(Qe.high,Qe.low,Qe.open,Qe.close)));q.forEach(Qe=>{const ht=Tt=>fe+Se-Tt,Et=Qe.open,Pt=Qe.high,rr=Qe.low,hr=Qe.close;Qe.open=ht(Et),Qe.high=ht(rr),Qe.low=ht(Pt),Qe.close=ht(hr)});break;case 2:q.reverse();break;case 3:q.reverse();const ve=Math.max(...q.map(Qe=>Math.max(Qe.high,Qe.low,Qe.open,Qe.close))),Ge=Math.min(...q.map(Qe=>Math.min(Qe.high,Qe.low,Qe.open,Qe.close)));q.forEach(Qe=>{const ht=Tt=>ve+Ge-Tt,Et=Qe.open,Pt=Qe.high,rr=Qe.low,hr=Qe.close;Qe.open=ht(Et),Qe.high=ht(rr),Qe.low=ht(Pt),Qe.close=ht(hr)});break;case 4:q.reverse(),q.forEach(Qe=>{const ht=Qe.open,Et=Qe.close;Qe.open=Et,Qe.close=ht});break;default:return S}return D},Nf=(S,L,D=20)=>{if(!L||S>=L.length)return[];const q=[],fe=L[S];let Se=fe.close;const ve=.015,Ge=.3,Qe=.6,ht=Math.random()>.5?1:-1,Et=Math.random()<Ge;for(let Pt=0;Pt<D;Pt++){let rr;Et?rr=Math.random()*ve*2*ht+(Math.random()-.5)*ve*.5:rr=-((Se-fe.close)/fe.close)*Qe+(Math.random()-.5)*ve;const hr=Se,Tt=hr*(1+rr),$t=Math.random()*ve*.5,vs=Math.max(hr,Tt)*(1+$t),er=Math.min(hr,Tt)*(1-$t),Hr=(fe.volume||1e3)*(.7+Math.random()*.6),dr=new Date(fe.timestamp||Date.now()),Dr=new Date(dr.getTime()+(Pt+1)*6e4);q.push({timestamp:Dr.toISOString(),open:parseFloat(hr.toFixed(2)),high:parseFloat(vs.toFixed(2)),low:parseFloat(er.toFixed(2)),close:parseFloat(Tt.toFixed(2)),volume:Math.round(Hr),isMock:!0}),Se=Tt}return q},Q0=S=>{if(ln!==5)return;console.log(` Selected candle at index: ${S}`),Wd(S);const L=os||ir;if(L&&L.candles){const D=Nf(S,L.candles);ed(D),console.log(` Generated ${D.length} mock candles from index ${S}`)}},dc=()=>{if(!ir||!ir.candles||ir.candles.length===0){console.log(" No OHLC data available to transform");return}ln===0&&!os&&rh(ir);const S=(ln+1)%6;th(S),ln===5&&(Wd(null),ed([])),console.log(` Chart Transformation Mode ${S}: ${["Original","Inverted","Reversed","Inverted + Reversed","Horizontal Flip","Interactive Mock"][S]}`),console.log(` Transforming ${ir.candles.length} candles for strategy validation`)},Bm=g.useRef({symbol:Qt,timeframe:is,fromDate:Ys,toDate:ps});g.useEffect(()=>{const S={symbol:Qt,timeframe:is,fromDate:Ys,toDate:ps},L=Bm.current;(S.symbol!==L.symbol||S.timeframe!==L.timeframe||S.fromDate!==L.fromDate||S.toDate!==L.toDate)&&(Bm.current=S,t==null||t(S))},[Qt,is,Ys,ps]);const J0=qu(),hg=async(S,L)=>{var fe;if(!S||S.length===0){console.log(" No candles data for sentiment analysis");return}console.log(" Starting cumulative sentiment analysis for",L,"with",S.length,"candles"),ru(!0);const D=new AbortController,q=setTimeout(()=>D.abort(),6e4);try{console.log(" Processing ALL candles with cumulative context analysis");const Se=await fetch("/api/sentiment-analysis",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({candles:S,symbol:L.replace("NSE:","").replace("-EQ","")}),signal:D.signal});if(clearTimeout(q),Se.ok){const ve=await Se.json();console.log(" Cumulative sentiment analysis result:",ve),console.log(" Setting sentiment data for",((fe=ve.sentiment)==null?void 0:fe.length)||0,"candles"),ve.sentiment&&ve.sentiment.length>0?tu(ve.sentiment):tu([])}else{const ve=await Se.text();console.error(" Failed to analyze sentiment - HTTP",Se.status,ve),tu([])}}catch(Se){clearTimeout(q),Se instanceof Error&&Se.name==="AbortError"?console.error(" Sentiment analysis timed out - try with fewer candles"):console.error(" Sentiment analysis error:",Se),tu([])}finally{ru(!1)}},[ch,Kd]=g.useState(!1),[fg,Z0]=g.useState("minutes"),[Gd,mg]=g.useState(""),[dh,rd]=g.useState([]),[kv,Xd]=g.useState([]),[wn,nd]=g.useState(!1),[cn,Ya]=g.useState(""),[pg,Um]=g.useState(!1),[jf,So]=g.useState([]),[Ka,dn]=g.useState(""),[xs,Qd]=g.useState(!1),[ko,uc]=g.useState({posts:[],trendingStocks:[],recentNews:[]}),[sd,Sf]=g.useState(!1),[Qo]=g.useState([{symbol:"NIFTY",action:"Buy",qty:10,entry:"18000"},{symbol:"BANKNIFTY",action:"Sell",qty:5,entry:"43000"}]),[Ea,Jd]=g.useState(()=>typeof window<"u"&&localStorage.getItem("tradingNotes")||""),[Zd,kn]=g.useState(!1),[Ta,Ts]=g.useState(Ea),[cs,ad]=g.useState(!1),[Co,gg]=g.useState(!1),[Ei,Ki]=g.useState(""),[zm,hc]=g.useState([]),[cr,hi]=g.useState(!1),[fc,Gi]=g.useState(null),[id,Xi]=g.useState(!1),[Eo,uh]=g.useState(Ea),[ts,od]=g.useState(!1),[en,ld]=g.useState(!1),[Ti,To]=g.useState(!1),[Ks,an]=g.useState(!1),[ex,Al]=g.useState(!1),[tn,Pi]=g.useState(!1),[eu,Ga]=g.useState([]),[kf,cd]=g.useState(!1),[mc,pc]=g.useState(null),[F1,Vm]=g.useState(null),[jr,dd]=g.useState(""),[rs,Qi]=g.useState(!1),[$s,_l]=g.useState([]),[fi,tu]=g.useState([]),[Fa,ru]=g.useState(!1),[nu,xa]=g.useState([]),[zr,gc]=g.useState(()=>{if(typeof window<"u")try{const S=localStorage.getItem("feedStocks");if(S){const L=JSON.parse(S);if(Array.isArray(L)&&L.length>0)return L}}catch(S){console.warn("Failed to parse feedStocks from localStorage:",S)}return["RELIANCE","TCS","INFY","HDFCBANK","ICICIBANK"]}),[Ur,hh]=g.useState({}),[Ps]=g.useState(["RELIANCE","TCS","HDFCBANK","INFY","ITC"]),[fh,tx]=g.useState({}),[xg,Po]=g.useState(!1),[Il,Ml]=g.useState(null),Ji=g.useRef(null),[qm,Jo]=g.useState(null),[Zo,In]=g.useState({}),Fn=()=>{Ts(Ea),kn(!0)},el=()=>{Jd(Ta),localStorage.setItem("tradingNotes",Ta),kn(!1)},As=()=>{Ts(Ea),kn(!1)},ya=()=>{uh(Ea),Xi(!0)},Ol=()=>{Jd(Eo),localStorage.setItem("tradingNotes",Eo),Xi(!1)},xc=()=>{uh(Ea),Xi(!1)},Qr=async(S,L)=>{try{await navigator.clipboard.writeText(S),Gi(L),setTimeout(()=>Gi(null),2e3)}catch(D){console.error("Failed to copy:",D)}},tl=S=>S.split(/(```[\s\S]*?```)/g).map((D,q)=>D.startsWith("```")&&D.endsWith("```")?{type:"code",content:D.replace(/^```(?:javascript)?\n?/,"").replace(/\n?```$/,""),index:q}:{type:"text",content:D,index:q}).filter(D=>D.content.trim()),Hm=async S=>{try{const D=await(await fetch("/api/gemini/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:S,context:"trading"})})).json();if(D.success){const q={role:"assistant",content:D.response||"I can help you with trading analysis and market insights.",newsData:D.newsData,stockCount:D.stockCount};hc(fe=>[...fe,q])}else hc(q=>[...q,{role:"assistant",content:"I can help you with trading analysis. What would you like to know about the markets?"}])}catch(L){console.error("Error in sidebar AI response:",L),hc(D=>[...D,{role:"assistant",content:"I'm here to help with your trading questions. What can I assist you with today?"}])}finally{hi(!1)}},Rl=async S=>{So(L=>[...L,{role:"assistant",content:"",isLoading:!0}]);try{const D=await(await fetch("/api/gemini/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:S,context:"trading"})})).json();if(D.success){const q={role:"assistant",content:D.response||"I can help you with trading analysis and market insights.",newsData:D.newsData,stockCount:D.stockCount};So(fe=>[...fe.slice(0,-1),q])}else So(q=>[...q.slice(0,-1),{role:"assistant",content:"I can help you with trading analysis. What would you like to know about the markets?"}])}catch(L){console.error("Error in Build Patterns AI response:",L),So(D=>[...D.slice(0,-1),{role:"assistant",content:"I'm here to help with your trading questions. What can I assist you with today?"}])}finally{Qd(!1)}},su=S=>{const L=Array.isArray(zr)?zr:[];if(!L.includes(S)){const D=[...L,S];gc(D),localStorage.setItem("feedStocks",JSON.stringify(D)),So(q=>[...q])}},Cf=S=>{const L=Array.isArray(zr)?zr:[],D=S.filter(q=>!L.includes(q));if(D.length>0){const q=[...L,...D];gc(q),localStorage.setItem("feedStocks",JSON.stringify(q)),So(fe=>[...fe]),console.log(`Added ${D.length} new stocks to feed:`,D)}},Gs=S=>{const D=(Array.isArray(zr)?zr:[]).filter(q=>q!==S);gc(D),localStorage.setItem("feedStocks",JSON.stringify(D)),Jo(null)},Ai=async S=>{try{const L=S.map(async ve=>{try{const Ge=Wo[ve];if(!Ge)return console.log(` No Angel One token for ${ve}, skipping`),null;const Qe=await fetch("/api/angelone/ltp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({exchange:Ge.exchange,tradingSymbol:Ge.tradingSymbol,symbolToken:Ge.token})});if(Qe.ok){const ht=await Qe.json();if(ht.success&&ht.data){const Et=ht.data.ltp||ht.data.last||0,Pt=ht.data.close||Et,rr=Et-Pt,hr=Pt?rr/Pt*100:0;return{symbol:ve,price:Et,change:rr,changePercent:hr,isPositive:rr>=0,volume:ht.data.volume||0,timestamp:Date.now(),isLastTraded:!0}}}}catch(Ge){console.error(`Failed to fetch Angel One price for ${ve}:`,Ge)}return null}),D=await Promise.all(L),q={},fe={},Se={};D.forEach(ve=>{ve&&(Se[ve.symbol]=ve,Array.isArray(zr)&&zr.includes(ve.symbol)&&(q[ve.symbol]=ve),Array.isArray(Ps)&&Ps.includes(ve.symbol)&&(fe[ve.symbol]=ve))}),Object.keys(Se).length>0&&(In(ve=>({...ve,...Se})),console.log(" Stored last closed prices for fallback:",Se)),Object.keys(q).length>0&&(hh(ve=>({...ve,...q})),console.log(" Updated feed prices with last traded:",q)),Object.keys(fe).length>0&&(tx(ve=>({...ve,...fe})),console.log(" Updated watchlist prices with last traded:",fe))}catch(L){console.error("Failed to fetch last traded prices:",L)}},[Xa,Dl]=g.useState(null),[B1,Qa]=g.useState("disconnected"),au=S=>{Xa&&Xa.close();try{const L=S.map(q=>`NSE:${q}-EQ`);console.log(` Starting SSE live streaming for ${S.length} symbols:`,L),Qa("connecting");const D=new EventSource(`/api/live-price/stream?symbols=${L.join(",")}`);return D.onopen=()=>{console.log(" SSE connection established for real-time price streaming"),Qa("connected"),Ml(null)},D.onmessage=q=>{try{const fe=JSON.parse(q.data);if(fe.type==="price_update"&&fe.prices){console.log(" SSE received data:",fe),console.log(" Prices structure:",fe.prices);const Se={},ve={};Object.entries(fe.prices).forEach(([Qe,ht])=>{console.log(` Processing ${Qe}:`,ht);const Et=Qe.replace("NSE:","").replace("-EQ",""),Pt=ht.price||ht.ltp||ht.close||0,rr=ht.change||ht.ch||0,hr=ht.changePercent||ht.chp||0,Tt=ht.volume||0,$t=rr>=0;console.log(` Mapped data for ${Et}: price=${Pt}, change=${rr}, changePercent=${hr}`),Array.isArray(zr)&&zr.includes(Et)&&(Se[Et]={symbol:Et,price:Pt,change:rr,changePercent:hr,isPositive:$t,volume:Tt,timestamp:Date.now()}),Array.isArray(Ps)&&Ps.includes(Et)&&(ve[Et]={symbol:Et,price:Pt,change:rr,changePercent:hr,isPositive:$t,volume:Tt,timestamp:Date.now()})});const Ge=Object.entries(fe.prices).filter(([Qe,ht])=>(ht.price||ht.ltp||ht.close||0)===0).map(([Qe])=>Qe.replace("NSE:","").replace("-EQ",""));Object.keys(Se).length>0&&hh(Qe=>({...Qe,...Se})),Object.keys(ve).length>0&&tx(Qe=>({...Qe,...ve})),Ge.length>0&&(console.log(" Detected zero prices, fetching last traded prices for:",Ge),Ai(Ge)),console.log(` Real-time SSE update: ${Object.keys(fe.prices).length} symbols via WebSocket`)}}catch(fe){console.error("Error parsing SSE data:",fe)}},D.onerror=q=>{console.error(" SSE connection error:",q),Qa("error"),Ml("Real-time streaming connection failed")},Dl(D),D}catch(L){return console.error("Error initializing SSE stream:",L),Qa("error"),Ml("Failed to start real-time streaming"),null}},Cn=()=>{Ji.current&&(clearInterval(Ji.current),Ji.current=null),Po(!0);const S=Array.isArray(zr)?zr:[],L=Array.isArray(Ps)?Ps:[],D=Array.from(new Set([...S,...L]));if(D.length===0){console.log(" No symbols to stream, stopping");return}console.log(" Starting SSE real-time streaming for stocks:",D),au(D),console.log(" Real-time SSE streaming enabled")},mh=()=>{Xa&&(Xa.close(),Dl(null)),Ji.current&&(clearInterval(Ji.current),Ji.current=null),Po(!1),Qa("disconnected"),console.log(" Stopped SSE real-time streaming")};g.useEffect(()=>{const S=Array.isArray(zr)?zr.length:0,L=Array.isArray(Ps)?Ps.length:0;return(S>0||L>0)&&Cn(),()=>{mh()}},[zr,Ps]),g.useEffect(()=>()=>{Xa&&Xa.close(),Ji.current&&clearInterval(Ji.current)},[Xa]),g.useEffect(()=>{const S=Array.isArray(zr)?zr:[],L=Array.isArray(Ps)?Ps:[],D=Array.from(new Set([...S,...L]));D.length!==0&&(console.log(" Fetching Angel One live prices...",D),Ai(D))},[zr,Ps]);const[$l,_i]=g.useState(null),Ao=(S,L)=>{_i({x:S,stock:L}),Jo(null)},iu=(S,L)=>{if(!$l||$l.stock!==L)return;const D=S-$l.x;D<-80?Jo(L):D>-20&&Jo(null)},Ll=()=>{_i(null)},Zi=g.useMemo(()=>{const S=lt.length>0?lt:[{profit:2850,loss:0},{profit:0,loss:-1200},{profit:1500,loss:0},{profit:0,loss:-800},{profit:3200,loss:0}];let L,D,q,fe,Se,ve,Ge,Qe,ht,Et,Pt,rr,hr,Tt;if(lt.length>0){L=lt.length;const $t=lt.filter(Dr=>Dr.pnl>0),vs=lt.filter(Dr=>Dr.pnl<0);D=$t.length,q=vs.length,fe=$t.reduce((Dr,Wt)=>Dr+Wt.pnl,0),Se=Math.abs(vs.reduce((Dr,Wt)=>Dr+Wt.pnl,0)),ve=fe-Se,Ge=L>0?D/L*100:0,Qe=D>0?fe/D:0,ht=q>0?Se/q:0,Et=Math.max(...lt.map(Dr=>Dr.pnl)),Pt=Math.min(...lt.map(Dr=>Dr.pnl)),Tt=Se>0?fe/Se:fe>0?999:0;const er=lt.map(Dr=>{var Wt;return(Wt=Dr.crossingData)!=null&&Wt.time,30});rr=er.length>0?er.reduce((Dr,Wt)=>Dr+Wt,0)/er.length:0;let On=0,Hr=0,dr=0;lt.forEach(Dr=>{On+=Dr.pnl,On>Hr&&(Hr=On);const Wt=Hr-On;Wt>dr&&(dr=Wt)}),hr=dr}else L=S.length,D=S.filter($t=>$t.profit>0).length,q=L-D,fe=S.reduce(($t,vs)=>$t+vs.profit,0),Se=S.reduce(($t,vs)=>$t+Math.abs(vs.loss),0),ve=fe-Se,Ge=L>0?D/L*100:0,Qe=D>0?fe/D:0,ht=q>0?Se/q:0,Et=Math.max(...S.map($t=>$t.profit)),Pt=Math.min(...S.map($t=>$t.loss)),Tt=Se>0?fe/Se:fe>0?999:0,rr=45,hr=1500;return{totalTrades:L,winningTrades:D,losingTrades:q,totalProfit:fe,totalLoss:Se,netPnL:ve,winRate:Ge.toFixed(1),avgWin:Qe.toFixed(0),avgLoss:ht.toFixed(0),bestTrade:Et.toFixed(0),worstTrade:Pt.toFixed(0),profitFactor:Tt.toFixed(2),avgTradeDuration:Math.round(rr),maxDrawdown:hr.toFixed(0),sharpeRatio:ve>0&&hr>0?(ve/hr).toFixed(2):"0.00"}},[lt]),{data:Mn=[],isLoading:Cv}=xn({queryKey:["stock-chart","NIFTY50",r],queryFn:()=>fetch(`/api/stock-chart-data/NIFTY50?timeframe=${r}`).then(S=>S.json()),refetchInterval:r==="1D"?6e4:3e5,staleTime:r==="1D"?3e4:18e4,gcTime:6e5,refetchOnMount:!1,refetchOnWindowFocus:!1}),{data:ir}=xn({queryKey:["/api/angelone/historical",Qt,Ys,ps,is,Pr,Ma],enabled:!0,refetchInterval:!1,retry:!1,staleTime:3e5,gcTime:6e5});g.useEffect(()=>{ir!=null&&ir.candles&&ir.candles.length>0&&hg(ir.candles,Qt)},[ir,Qt]),g.useEffect(()=>{console.log(" Trading Master: Auto-fetching ICICI Bank 1-min data on load"),la.mutate()},[]);const yg=S=>({"1D":"1440","1W":"10080","1M":"43200"})[S]||S,eo=S=>{const L=S.replace("NSE:","").replace("-EQ","").replace("-INDEX","");return Wo[L]||null},la=yo({mutationFn:async()=>{const S=eo(Qt);if(!S)throw new Error(`Stock token not found for ${Qt}. Please select a supported stock.`);const L=yg(is),D=`${Ys} 09:15`,q=`${ps} 15:30`;console.log(` Fetching Angel One historical data: ${S.tradingSymbol} ${L} from ${D} to ${q}`);const fe=await fetch("/api/angelone/historical",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({exchange:S.exchange,symbolToken:S.token,interval:L,fromDate:D,toDate:q})});if(!fe.ok){const Ge=await fe.json();throw new Error(Ge.message||"Failed to fetch Angel One historical data")}const Se=await fe.json();if(!Se.success)throw new Error(Se.message||"Angel One API returned an error");const ve=Se.candles.map(Ge=>({timestamp:Math.floor(Ge.timestamp/1e3),open:Ge.open,high:Ge.high,low:Ge.low,close:Ge.close,volume:Ge.volume}));return console.log(` Angel One returned ${ve.length} candles`),{symbol:Qt,candles:ve,source:"angelone"}},onSuccess:S=>{J0.setQueryData(["/api/angelone/historical",Qt,Ys,ps,is,Pr,Ma],S)}}),rt=g.useMemo(()=>{if(!ir)return null;let S=ir;if(Ma&&ir.candles){const L=Pr[0],D=Pr[1],q=ir.candles.filter(fe=>{const Se=new Date(fe.timestamp*1e3),ve=Se.getHours()*60+Se.getMinutes();return ve>=L&&ve<=D});S={...ir,candles:q}}if(ln===5){const L=os||S;if(Jc!==null&&Zc.length>0){const q=[...L.candles.slice(0,Jc+1),...Zc];return{...L,candles:q}}return L}else if(ln>0&&os)return jo(os,ln);return S},[ir,ln,os,Jc,Zc,Ma,Pr]);g.useEffect(()=>{rt!=null&&rt.candles?(window.cbConnectChartData=rt.candles,console.log(` Exposed ${rt.candles.length} candles globally for pattern detection`)):window.cbConnectChartData=[]},[rt]);const to=(S,L)=>{const D=parseInt(L);if(isNaN(D)||D<=0)return"1";switch(S){case"minutes":return D.toString();case"hr":return(D*60).toString();case"d":return`${D}D`;case"m":return`${D}M`;case"w":return`${D}W`;default:return"1"}},ud=(S,L)=>{const D=parseInt(L);switch(S){case"minutes":return`${D}min`;case"hr":return`${D}hr`;case"d":return`${D}d`;case"m":return`${D}m`;case"w":return`${D}w`;default:return`${D}min`}},ou=S=>S>=1e7?`${(S/1e7).toFixed(1)}Cr`:S>=1e5?`${(S/1e5).toFixed(1)}L`:S>=1e3?`${(S/1e3).toFixed(1)}K`:S.toString(),Fl=async()=>{if(Ke){ft(!0),vr(null);try{let L=`/api/options/chain/${Ke.replace("NSE:","").replace("-INDEX","").replace("-EQ","")}`;Oe&&Oe!=="all"&&(L+=`?expiry=${Oe}`);const D=await fetch(L);if(!D.ok){const fe=await D.json();throw new Error(fe.error||"Failed to fetch option chain")}const q=await D.json();if(q.success)Je(q.data),console.log(" Option chain data fetched:",q.data);else throw new Error(q.error||"Invalid response format")}catch(S){console.error(" Failed to fetch option chain:",S),vr(S instanceof Error?S.message:"Failed to fetch option chain")}finally{ft(!1)}}},ph=async()=>{Vt(!0);try{const S=await fetch("/api/options/analytics");if(!S.ok)throw new Error(`Failed to fetch options analytics: ${S.status}`);const L=await S.json();if(L.success)tt(L.data),console.log(" Options analytics data fetched:",L.data);else throw new Error(L.error||"Invalid response format")}catch(S){console.error(" Error fetching options analytics:",S)}finally{Vt(!1)}},hd=S=>{dh.some(D=>D.value===S)?rd(D=>D.filter(q=>q.value!==S)):Xd(D=>[...D,S]),is===S&&Sl("1")},lu=S=>S==="1D"?1440:S.endsWith("D")?parseInt(S)*1440:S.endsWith("W")?parseInt(S)*10080:S.endsWith("M")?parseInt(S)*43200:parseInt(S)||0,yc=()=>[...[{value:"1",label:"1min",deletable:!1},{value:"5",label:"5min",deletable:!1},{value:"10",label:"10min",deletable:!0},{value:"15",label:"15min",deletable:!0},{value:"20",label:"20min",deletable:!0},{value:"30",label:"30min",deletable:!0},{value:"40",label:"40min",deletable:!0},{value:"60",label:"1hr",deletable:!0},{value:"80",label:"80min",deletable:!0},{value:"120",label:"2hr",deletable:!0},{value:"1D",label:"1D",deletable:!0}].filter(q=>!kv.includes(q.value)),...dh].sort((q,fe)=>{const Se=lu(q.value),ve=lu(fe.value);return Se-ve}),Bl=()=>{yf(!1),la.mutate()},gh=()=>{if(!ir||!ir.candles||ir.candles.length===0)return;const L=[["Date","Time","Open","High","Low","Close","Volume"].join(","),...ir.candles.map(ht=>{const Et=new Date(ht.timestamp*1e3),Pt=ho(Et,"d/M/yyyy"),rr=ho(Et,"HH:mm:ss");return[Pt,rr,ht.open.toFixed(2),ht.high.toFixed(2),ht.low.toFixed(2),ht.close.toFixed(2),ht.volume.toString()].join(",")})].join(`
`),D=new Blob([L],{type:"text/csv;charset=utf-8;"}),q=document.createElement("a"),fe=URL.createObjectURL(D);q.setAttribute("href",fe);const Se=Qt.replace("NSE:","").replace("-EQ","").replace("-INDEX",""),ve=is==="1"?"1min":`${is}min`,Ge=Ys===ps?Ys:`${Ys}_to_${ps}`,Qe=`${Se}_${ve}_${Ge}_OHLC.csv`;q.setAttribute("download",Qe),q.style.visibility="hidden",document.body.appendChild(q),q.click(),document.body.removeChild(q)},cu={priceData:{open:24500,close:Mn.length>0&&((Tf=Mn[Mn.length-1])==null?void 0:Tf.price)||24650}},Vr=cu.priceData.close,yh=(()=>{var S,L,D,q,fe,Se;if(!Mn||Mn.length===0)return cu.priceData.open;switch(r){case"1D":return((S=Mn[0])==null?void 0:S.price)||cu.priceData.open;case"5D":return((L=Mn[0])==null?void 0:L.price)||Vr;case"1M":return((D=Mn[0])==null?void 0:D.price)||Vr;case"6M":return((q=Mn[0])==null?void 0:q.price)||Vr;case"1Y":return((fe=Mn[0])==null?void 0:fe.price)||Vr;default:return((Se=Mn[0])==null?void 0:Se.price)||Vr}})(),Ef=Vr-yh,vh=yh!==0?(Ef/yh*100).toFixed(2):"0.00",fd=Ef>=0,_o=["1D","5D","1M","6M","1Y"];return n.jsxs("div",{className:"h-full bg-background flex",children:[n.jsx("div",{className:"flex-1",children:n.jsx("div",{className:"bg-muted/30 border-b border-border px-6 pt-4",children:n.jsxs(zA,{value:W,onValueChange:be,className:"w-full",children:[n.jsxs(hS,{className:"grid w-full grid-cols-5 max-w-4xl",children:[n.jsxs(Yh,{value:"main",className:"flex items-center gap-2","data-testid":"button-tab-main",children:[n.jsx(ia,{className:"h-4 w-4"}),"Main"]}),n.jsxs(Yh,{value:"trade",className:"flex items-center gap-2","data-testid":"button-tab-trade",children:[n.jsx(Gn,{className:"h-4 w-4"}),"Trade"]}),n.jsxs(Yh,{value:"backtest",className:"flex items-center gap-2","data-testid":"button-tab-backtest",children:[n.jsx(nm,{className:"h-4 w-4"}),"Build Patterns"]}),n.jsxs(Yh,{value:"options",className:"flex items-center gap-2","data-testid":"button-tab-options",children:[n.jsx(Np,{className:"h-4 w-4"}),"Options"]}),n.jsxs(Yh,{value:"visualai",className:"flex items-center gap-2","data-testid":"button-tab-visualai",children:[n.jsx(Oc,{className:"h-4 w-4"}),"Test AI"]})]}),n.jsxs(Kh,{value:"main",className:"p-3 md:p-6 space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-xl font-semibold",children:"Trading Overview"}),n.jsx(Sr,{variant:"outline",children:"Today"})]}),n.jsxs("div",{className:"grid grid-cols-2 xl:grid-cols-4 gap-3",children:[n.jsx(St,{className:"bg-slate-100 dark:bg-slate-800 border-0 shadow-sm",children:n.jsx(Kt,{className:"p-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Total Trades"}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"7,265"}),n.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[n.jsx("span",{className:"text-sm font-medium",children:"+11.03%"}),n.jsx(Gn,{className:"h-4 w-4"})]})]})]})})}),n.jsx(St,{className:"bg-slate-100 dark:bg-slate-800 border-0 shadow-sm",children:n.jsx(Kt,{className:"p-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Winning Trades"}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"3,671"}),n.jsxs("div",{className:"flex items-center gap-1 text-red-600",children:[n.jsx("span",{className:"text-sm font-medium",children:"-0.03%"}),n.jsx($c,{className:"h-4 w-4"})]})]})]})})}),n.jsx(St,{className:"bg-slate-100 dark:bg-slate-800 border-0 shadow-sm",children:n.jsx(Kt,{className:"p-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Profit Trades"}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"256"}),n.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[n.jsx("span",{className:"text-sm font-medium",children:"+15.03%"}),n.jsx(Gn,{className:"h-4 w-4"})]})]})]})})}),n.jsx(St,{className:"bg-slate-100 dark:bg-slate-800 border-0 shadow-sm",children:n.jsx(Kt,{className:"p-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Active Positions"}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"2,318"}),n.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[n.jsx("span",{className:"text-sm font-medium",children:"+6.08%"}),n.jsx(Gn,{className:"h-4 w-4"})]})]})]})})})]}),n.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"xl:col-span-2",children:[n.jsx(St,{className:"h-80 bg-slate-900 dark:bg-slate-900 border-slate-700",children:n.jsx(Kt,{className:"p-6",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("h3",{className:"text-lg font-semibold text-white",children:"Nifty 50 Index"}),ta&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),n.jsx("span",{className:"text-xs text-green-400",children:"Live 700ms"})]})]}),n.jsx("div",{className:"flex items-center gap-2",children:_o.map(S=>n.jsx(H,{variant:r===S?"default":"ghost",size:"sm",onClick:()=>s(S),className:`px-3 py-1 text-xs ${r===S?"bg-blue-600 hover:bg-blue-700 text-white":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:S},S))})]}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-400",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500"}),n.jsxs("span",{className:`font-mono transition-colors duration-200 ${Tr?"text-green-400":"text-slate-400"}`,children:["",(Tr||Vr).toFixed(2)]}),Tr&&n.jsx("span",{className:"text-xs text-green-300 animate-pulse",children:""})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:`w-2 h-2 rounded-full ${fd?"bg-green-500":"bg-red-500"}`}),n.jsxs("span",{className:fd?"text-green-400":"text-red-400",children:[fd?"":""," ",Math.abs(Ef).toFixed(2)," (",fd?"+":"",vh,"%)"]})]})]})]}),n.jsx("div",{className:"h-48",children:Cv?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsxs("div",{className:"text-slate-400 text-sm flex items-center gap-2",children:[n.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-slate-600 border-t-purple-500 rounded-full"}),"Loading real ",r," chart data..."]})}):Mn&&Mn.length>0?n.jsx(yi,{width:"100%",height:"100%",children:n.jsxs(Dd,{data:Mn,margin:{top:5,right:20,left:1.5,bottom:5},children:[n.jsx(Sa,{dataKey:"time",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"#64748b"},tickCount:8}),n.jsx(ma,{domain:["dataMin - 10","dataMax + 10"],axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"#64748b"},width:35}),n.jsx(zs,{content:({active:S,payload:L,label:D})=>{if(!S||!L||!L.length)return null;const q=L[0].value;return n.jsxs("div",{style:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"6px",color:"#e2e8f0",padding:"8px 16px",fontSize:"13px",minWidth:"140px",boxShadow:"0 4px 12px rgba(0,0,0,0.4)",display:"flex",alignItems:"center",gap:"12px"},children:[n.jsxs("span",{style:{fontSize:"13px",fontWeight:"500"},children:["",Number(q).toFixed(2)]}),n.jsx("div",{style:{width:"1px",height:"20px",backgroundColor:"#475569"}}),n.jsx("span",{style:{fontSize:"12px",color:"#94a3b8"},children:D})]})}}),n.jsx(Is,{type:"linear",dataKey:"price",stroke:fd?"#10b981":"#ef4444",strokeWidth:2,dot:!1,activeDot:{r:4,fill:fd?"#10b981":"#ef4444"}}),n.jsx(nf,{y:yh,stroke:"#64748b",strokeDasharray:"2 2",strokeWidth:1})]})}):n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx("div",{className:"text-slate-400 text-sm",children:" Real chart"})})})]})})}),n.jsx(St,{className:"bg-slate-900 dark:bg-slate-900 border-slate-700 mt-4",children:n.jsx(Kt,{className:"p-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[n.jsx(ia,{className:"h-4 w-4 text-blue-400"}),"OHLC Data - ",r," Candle"]}),n.jsx("span",{className:"text-xs text-slate-400",children:"Nifty 50 Index"})]}),Mn&&Mn.length>0?n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[n.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-3 border border-slate-700/50",children:[n.jsx("p",{className:"text-xs text-slate-400 mb-1 font-medium uppercase tracking-wide",children:"Open"}),n.jsxs("p",{className:"text-base font-semibold text-white",children:["",((du=(ro=Mn[0])==null?void 0:ro.price)==null?void 0:du.toFixed(2))||"--"]})]}),n.jsxs("div",{className:"bg-green-900/20 rounded-lg p-3 border border-green-800/30",children:[n.jsx("p",{className:"text-xs text-green-400 mb-1 font-medium uppercase tracking-wide",children:"High"}),n.jsxs("p",{className:"text-base font-semibold text-green-400",children:["",Math.max(...Mn.map(S=>S.price||0)).toFixed(2)]})]}),n.jsxs("div",{className:"bg-red-900/20 rounded-lg p-3 border border-red-800/30",children:[n.jsx("p",{className:"text-xs text-red-400 mb-1 font-medium uppercase tracking-wide",children:"Low"}),n.jsxs("p",{className:"text-base font-semibold text-red-400",children:["",Math.min(...Mn.map(S=>S.price||1/0)).toFixed(2)]})]}),n.jsxs("div",{className:"bg-purple-900/20 rounded-lg p-3 border border-purple-800/30",children:[n.jsx("p",{className:"text-xs text-purple-400 mb-1 font-medium uppercase tracking-wide",children:"Close"}),n.jsxs("p",{className:"text-base font-semibold text-purple-400",children:["",((Af=(Pf=Mn[Mn.length-1])==null?void 0:Pf.price)==null?void 0:Af.toFixed(2))||"--"]})]})]}):n.jsx("div",{className:"flex items-center justify-center py-6",children:n.jsx("p",{className:"text-sm text-slate-400",children:"Select timeframe above to view OHLC data"})}),Mn&&Mn.length>0&&n.jsxs("div",{className:"grid grid-cols-3 gap-2 pt-2 border-t border-slate-700",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-xs text-slate-400 mb-1",children:"Candles"}),n.jsx("p",{className:"text-sm font-semibold text-slate-300",children:Mn.length})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-xs text-slate-400 mb-1",children:"Range"}),n.jsxs("p",{className:"text-sm font-semibold text-slate-300",children:["",(Math.max(...Mn.map(S=>S.price||0))-Math.min(...Mn.map(S=>S.price||1/0))).toFixed(2)]})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-xs text-slate-400 mb-1",children:"Change"}),n.jsxs("p",{className:`text-sm font-semibold ${fd?"text-green-400":"text-red-400"}`,children:[fd?"+":"",vh,"%"]})]})]})]})})})]}),n.jsx("div",{children:n.jsx(St,{className:"h-80 bg-slate-900 dark:bg-slate-900 border-slate-700",children:n.jsx(Kt,{className:"p-4",children:n.jsxs("div",{className:"flex flex-col h-full",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-orange-500 to-red-600 rounded-lg flex items-center justify-center",children:n.jsx(Gn,{className:"w-4 h-4 text-white"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h3",{className:"text-sm font-semibold text-white",children:"Feed Stocks"}),xg&&!Il&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),n.jsx("span",{className:"text-xs text-green-400",children:"Live"})]})]}),n.jsx("p",{className:"text-xs text-slate-400",children:"Real-time stock updates"})]})]}),n.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto custom-thin-scrollbar",children:Array.isArray(zr)&&zr.length>0?zr.map((S,L)=>{const D=Ur[S],q=Zo[S],fe=D||q,Se=fe?{price:fe.price,change:fe.change,changePercent:fe.changePercent,isPositive:fe.isPositive,volume:fe.volume,isLastTraded:fe.isLastTraded||!1}:{price:0,change:0,changePercent:0,isPositive:!0,isLastTraded:!1};return n.jsxs("div",{className:"relative bg-slate-800 rounded overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-red-600 flex items-center justify-end pr-4",children:n.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>Gs(S),className:"text-white hover:text-white hover:bg-red-700/50 flex items-center gap-2",children:[n.jsx(za,{className:"w-4 h-4"}),"Delete"]})}),n.jsxs("div",{className:`relative bg-slate-800 flex items-center justify-between p-2 transition-transform duration-200 cursor-pointer select-none ${qm===S?"transform -translate-x-[20%]":"transform translate-x-0"}`,onTouchStart:ve=>{ve.preventDefault(),Ao(ve.touches[0].clientX,S)},onTouchMove:ve=>{ve.preventDefault(),iu(ve.touches[0].clientX,S)},onTouchEnd:ve=>{Ll()},onMouseDown:ve=>{ve.preventDefault(),Ao(ve.clientX,S)},onMouseMove:ve=>{iu(ve.clientX,S)},onMouseUp:ve=>{Ll()},onMouseLeave:ve=>{Ll()},children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-sm font-medium text-slate-200",children:S}),n.jsx("span",{className:"text-xs text-slate-400",children:"NSE"})]}),n.jsx("div",{className:"flex flex-col items-end",children:fe?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsxs("span",{className:"text-sm font-mono text-white",children:["",Se.price.toLocaleString("en-IN",{minimumFractionDigits:2})]}),Se.isLastTraded?n.jsx("div",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full"}):n.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsxs("span",{className:`text-xs ${Se.isPositive?"text-green-400":"text-red-400"}`,children:[Se.isPositive?"+":"",Se.change.toFixed(2)]}),n.jsxs("span",{className:`text-xs ${Se.isPositive?"text-green-400":"text-red-400"}`,children:[Se.isPositive?"+":"",Se.changePercent.toFixed(2),"%"]}),Se.isPositive?n.jsx(Gn,{className:"w-3 h-3 text-green-400"}):n.jsx($c,{className:"w-3 h-3 text-red-400"})]}),Se.isLastTraded&&n.jsx("span",{className:"text-[10px] text-orange-400",children:"Last Close"})]}):n.jsxs("div",{className:"flex flex-col items-end",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"animate-pulse bg-slate-600 h-4 w-16 rounded"}),n.jsx("div",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full animate-pulse"})]}),n.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[n.jsx("div",{className:"animate-pulse bg-slate-600 h-3 w-12 rounded"}),n.jsx("span",{className:"text-xs text-slate-500",children:"Loading..."})]})]})})]})]},L)}):n.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[n.jsx(Gn,{className:"w-8 h-8 text-slate-600 mb-2"}),n.jsx("p",{className:"text-xs text-slate-500",children:"No stocks added yet"}),n.jsx("p",{className:"text-xs text-slate-600 mt-1",children:'Use "News AI" to discover stocks'})]})})]})})})}),n.jsx("div",{children:n.jsx(St,{className:"h-80 bg-slate-900 dark:bg-slate-900 border-slate-700",children:n.jsxs(Kt,{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-white",children:"Watchlist Stocks"}),n.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-600 scrollbar-track-slate-800",children:Array.isArray(Ps)&&Ps.map((S,L)=>{const D=fh[S],q=Zo[S],fe=D||q,Se=fe?{price:fe.price,change:fe.change,changePercent:fe.changePercent,isPositive:fe.isPositive,volume:fe.volume,isLastTraded:fe.isLastTraded||!1}:{price:0,change:0,changePercent:0,isPositive:!0,isLastTraded:!1};return n.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-800/50 rounded",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-sm font-medium text-slate-200",children:S}),n.jsx("span",{className:"text-xs text-slate-400",children:"NSE"})]}),n.jsx("div",{className:"flex flex-col items-end",children:fe?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsxs("span",{className:"text-sm font-mono text-white",children:["",Se.price.toLocaleString("en-IN",{minimumFractionDigits:2})]}),Se.isLastTraded?n.jsx("div",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full"}):n.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsxs("span",{className:`text-xs ${Se.isPositive?"text-green-400":"text-red-400"}`,children:[Se.isPositive?"+":"",Se.change.toFixed(2)]}),n.jsxs("span",{className:`text-xs ${Se.isPositive?"text-green-400":"text-red-400"}`,children:[Se.isPositive?"+":"",Se.changePercent.toFixed(2),"%"]}),Se.isPositive?n.jsx(Gn,{className:"w-3 h-3 text-green-400"}):n.jsx($c,{className:"w-3 h-3 text-red-400"})]}),Se.isLastTraded&&n.jsx("span",{className:"text-[10px] text-orange-400",children:"Last Close"}),(fe==null?void 0:fe.isMarketOpen)===!1&&n.jsx("span",{className:"text-[10px] text-gray-400",children:"Market Closed"})]}):n.jsxs("div",{className:"flex flex-col items-end",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"animate-pulse bg-slate-600 h-4 w-16 rounded"}),n.jsx("div",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full animate-pulse"})]}),n.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[n.jsx("div",{className:"animate-pulse bg-slate-600 h-3 w-12 rounded"}),n.jsx("span",{className:"text-xs text-slate-500",children:"Loading..."})]})]})})]},L)})})]})})})]}),n.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4",children:[n.jsx("div",{children:n.jsx(St,{className:"bg-slate-900 dark:bg-slate-900 border-slate-700",children:n.jsxs(Kt,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h3",{className:"text-lg font-semibold text-white",children:"OHLC Data"}),ln>0&&n.jsxs("div",{className:"flex items-center gap-1 bg-purple-600 text-white px-2 py-1 rounded-md text-xs font-bold animate-pulse",children:[n.jsx(Hk,{className:"w-3 h-3"}),n.jsxs("span",{children:["MODE ",ln,": ",["","INVERTED","REVERSED","INVERTED+REVERSED","HORIZONTAL FLIP","INTERACTIVE MOCK"][ln]]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(wa,{open:wn,onOpenChange:nd,children:[n.jsx(Na,{asChild:!0,children:n.jsxs(H,{variant:"outline",role:"combobox","aria-expanded":wn,className:"w-40 h-8 justify-between bg-white dark:bg-black border-gray-300 dark:border-gray-700 text-gray-900 dark:text-white text-xs px-2",children:[Qt?((Wm=Cx.find(S=>S.value===Qt))==null?void 0:Wm.label)||Qt:"Select symbol...",n.jsx(yx,{className:"ml-1 h-3 w-3 shrink-0 opacity-50"})]})}),n.jsx(fa,{className:"w-72 p-0 bg-white dark:bg-black border-gray-300 dark:border-gray-700",children:n.jsxs(ZN,{children:[n.jsx(ej,{placeholder:"Search stocks...",value:cn,onValueChange:Ya,className:"text-xs bg-white dark:bg-black text-gray-900 dark:text-white border-none"}),n.jsxs(tj,{className:"bg-white dark:bg-black",children:[n.jsx(rj,{className:"text-gray-900 dark:text-white py-3 text-center text-xs",children:"No stock found."}),n.jsx(nj,{className:"bg-white dark:bg-black",children:Cx.filter(S=>S.label.toLowerCase().includes(cn.toLowerCase())||S.value.toLowerCase().includes(cn.toLowerCase())).map(S=>n.jsxs(sj,{value:S.value,onSelect:L=>{Gc(L===Qt?"":L),nd(!1),Ya("")},className:"flex items-center px-2 py-1.5 text-xs text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-900 cursor-pointer",children:[n.jsx(hl,{className:Ht("mr-2 h-3 w-3 flex-shrink-0",Qt===S.value?"opacity-100":"opacity-0")}),n.jsx("span",{className:"truncate",children:S.label})]},S.value))})]})]})})]}),n.jsxs(wa,{children:[n.jsx(Na,{asChild:!0,children:n.jsxs(H,{variant:"outline",className:"w-20 h-8 justify-between bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-slate-300 text-xs px-2",children:[((vc=yc().find(S=>S.value===is))==null?void 0:vc.label)||is,n.jsx(yx,{className:"ml-1 h-3 w-3 shrink-0 opacity-50"})]})}),n.jsx(fa,{className:"w-40 p-1 bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600",children:n.jsxs("div",{className:"grid gap-1",children:[yc().map(S=>n.jsxs("div",{className:"flex items-center justify-between px-2 py-1 rounded hover:bg-gray-100 dark:hover:bg-slate-700 group",children:[n.jsx("button",{className:"flex-1 text-left text-xs text-gray-900 dark:text-slate-300",onClick:()=>{Sl(S.value)},children:S.label}),S.deletable&&n.jsx("button",{className:"ml-1 w-4 h-4 flex items-center justify-center hover:bg-red-100 dark:hover:bg-red-900 rounded text-red-500 text-xs font-bold opacity-0 group-hover:opacity-100 transition-opacity",onClick:L=>{L.stopPropagation(),hd(S.value)},title:"Delete timeframe",children:""})]},S.value)),n.jsx("div",{className:"border-t border-gray-200 dark:border-slate-600 mt-1 pt-1",children:n.jsx("button",{className:"w-full text-left px-2 py-1 rounded hover:bg-gray-100 dark:hover:bg-slate-700 text-xs text-gray-900 dark:text-slate-300",onClick:()=>Kd(!0),children:"+ Add Custom"})})]})})]}),n.jsx(H,{onClick:()=>yf(!eh),variant:"outline",size:"sm",className:`h-8 px-2 border-gray-300 dark:border-slate-600 text-gray-700 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-slate-700 md:hidden ${eh?"bg-gray-100 dark:bg-slate-700":""}`,title:"Select Date Range",children:n.jsx(wm,{className:"h-3 w-3"})}),n.jsx(H,{onClick:dc,disabled:!ir||!ir.candles||ir.candles.length===0,variant:ln>0?"default":"outline",size:"sm",className:`h-8 px-2 transition-all duration-300 ${ln>0?"bg-purple-600 hover:bg-purple-700 text-white shadow-lg border-purple-500":"border-purple-300 dark:border-purple-600 text-purple-700 dark:text-purple-300 hover:bg-purple-50 dark:hover:bg-purple-900"}`,title:ln>0?`Transformation Mode ${ln}: ${["","Inverted","Reversed","Inverted+Reversed","Horizontal Flip","Interactive Mock"][ln]} - Click for next mode`:"6-Stage Chart Transformation - Progressive strategy testing",children:n.jsx(Hk,{className:`h-3 w-3 ${ln>0?"animate-pulse":""}`})}),n.jsx(H,{onClick:Bl,disabled:la.isPending,size:"sm",className:"h-8 px-2 bg-green-600 hover:bg-green-700",title:la.isPending?"Fetching...":"Fetch Data",children:n.jsx(hl,{className:"h-3 w-3"})}),n.jsx(H,{onClick:gh,disabled:!ir||!ir.candles||ir.candles.length===0,variant:"outline",size:"sm",className:"h-8 px-2 border-gray-300 dark:border-slate-600 text-gray-700 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-slate-700",title:"Download OHLC CSV",children:n.jsx(zk,{className:"h-3 w-3"})})]})]}),eh&&n.jsxs("div",{className:"grid grid-cols-1 gap-3 mb-3 p-3 bg-gray-50 dark:bg-slate-800 rounded-lg border border-gray-200 dark:border-slate-600",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Un,{className:"text-gray-700 dark:text-slate-300 text-xs font-medium min-w-[40px]",children:"From:"}),n.jsx(Nr,{type:"date",value:Ys,onChange:S=>Om(S.target.value),className:"flex-1 h-8 bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-slate-300 text-xs"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Un,{className:"text-gray-700 dark:text-slate-300 text-xs font-medium min-w-[40px]",children:"To:"}),n.jsx(Nr,{type:"date",value:ps,onChange:S=>Xc(S.target.value),className:"flex-1 h-8 bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-slate-300 text-xs"})]}),n.jsx("div",{className:"text-xs text-gray-600 dark:text-slate-400 text-center",children:Ys===ps?n.jsxs("div",{children:[n.jsxs("div",{children:[" Single day: ",Ys]}),n.jsx("div",{className:"mt-1 text-green-600 dark:text-green-400 font-medium",children:ho(new Date,"yyyy-MM-dd")===Ys?" Today's market data":" Last trading day"})]}):` Range: ${Ys} to ${ps}`})]}),la.isPending?n.jsx("div",{className:"h-96 border border-slate-700 rounded-lg bg-slate-800/30 flex items-center justify-center",children:n.jsxs("div",{className:"text-slate-400 text-sm flex items-center gap-2",children:[n.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-slate-600 border-t-purple-500 rounded-full"}),"Loading 1-minute OHLC data..."]})}):rt&&rt.candles&&rt.candles.length>0?n.jsxs("div",{className:"h-96 overflow-auto border border-slate-700 relative custom-thin-scrollbar",children:[ln>0&&n.jsxs("div",{className:"absolute top-2 right-2 z-10 bg-purple-600 text-white px-2 py-1 rounded-md text-xs font-bold shadow-lg animate-pulse",children:[" MODE ",ln,": ",["","INVERTED","REVERSED","INV+REV","H-FLIP","INTERACTIVE"][ln]]}),n.jsxs(Pb,{children:[n.jsx(Ab,{className:"sticky top-0 z-10",children:n.jsxs(Uh,{className:"border-slate-700",children:[n.jsx(Tn,{className:"text-slate-300 min-w-[140px]",children:"Date/Time"}),n.jsx(Tn,{className:"text-right text-slate-300 min-w-[80px]",children:"Open"}),n.jsx(Tn,{className:"text-right text-slate-300 min-w-[80px]",children:"High"}),n.jsx(Tn,{className:"text-right text-slate-300 min-w-[80px]",children:"Low"}),n.jsx(Tn,{className:"text-right text-slate-300 min-w-[80px]",children:"Close"}),n.jsx(Tn,{className:"text-right text-slate-300 min-w-[90px]",children:"Volume"}),n.jsx(Tn,{className:"text-center text-slate-300 min-w-[100px]",children:"Sentiment"})]})}),n.jsx(_b,{children:rt.candles.map((S,L)=>n.jsxs(Uh,{className:"border-slate-700 hover:bg-slate-700/50",children:[n.jsx(Kn,{className:"font-medium text-slate-300 text-xs font-mono",children:new Date(S.timestamp*1e3).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})}),n.jsx(Kn,{className:"text-right text-slate-300",children:S.open.toFixed(2)}),n.jsx(Kn,{className:"text-right text-slate-300",children:S.high.toFixed(2)}),n.jsx(Kn,{className:"text-right text-slate-300",children:S.low.toFixed(2)}),n.jsx(Kn,{className:"text-right text-slate-300",children:S.close.toFixed(2)}),n.jsx(Kn,{className:"text-right text-slate-300",children:S.volume.toLocaleString()}),n.jsx(Kn,{className:"text-center",children:Fa?n.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[n.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-purple-500"}),n.jsx("span",{className:"text-xs text-slate-400",children:"Analyzing..."})]}):fi[L]?n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:`text-xs font-semibold px-2 py-1 rounded ${fi[L].signal==="BUY"?"bg-green-100 text-green-800":fi[L].signal==="SELL"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:fi[L].signal}),n.jsxs("div",{className:"text-xs text-slate-400",children:[fi[L].confidence,"%"]}),n.jsx("div",{className:"w-full bg-slate-700 rounded-full h-1",children:n.jsx("div",{className:`h-1 rounded-full ${fi[L].score>0?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.abs(fi[L].score)*100}%`}})})]}):n.jsx("span",{className:"text-xs text-slate-400",children:"-"})})]},L))})]})]}):n.jsx("div",{className:"h-96 border border-slate-700 rounded-lg bg-slate-800/30 flex items-center justify-center",children:n.jsxs("div",{className:"text-slate-400 text-sm text-center",children:[n.jsx("div",{children:"No OHLC data loaded"}),n.jsx("div",{className:"text-xs mt-1",children:'Click "Fetch" to load 1-minute data'})]})})]})})}),n.jsx("div",{children:n.jsx(St,{className:"bg-slate-900 dark:bg-slate-900 border-slate-700 h-full",children:n.jsxs(Kt,{className:"p-4 h-full flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("h3",{className:"text-lg font-semibold text-white",children:"Visual Chart"}),ln===5&&n.jsxs("div",{className:"flex items-center gap-2 bg-green-600 text-white px-3 py-1 rounded-md text-sm font-medium animate-pulse",children:[n.jsx("span",{className:"text-lg",children:""}),n.jsx("span",{children:"Click any candle to generate mock future data"})]}),Object.values(sn).some(S=>S.length>0)&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs text-gray-400",children:"Active:"}),n.jsxs("div",{className:"flex gap-1 flex-wrap",children:[sn.sma.map(S=>n.jsxs(Sr,{variant:"secondary",className:"text-xs bg-yellow-400/20 text-yellow-400 border-yellow-400/30 flex items-center gap-1",children:["SMA(",S.period,")",n.jsx("button",{onClick:L=>{L.stopPropagation(),kl(D=>({...D,sma:D.sma.filter(q=>q.id!==S.id)}))},className:"ml-1 text-yellow-400 hover:text-yellow-200","data-testid":`remove-sma-${S.id}`,children:""})]},S.id)),sn.ema.map(S=>n.jsxs(Sr,{variant:"secondary",className:"text-xs bg-blue-400/20 text-blue-400 border-blue-400/30 flex items-center gap-1",children:["EMA(",S.period,")",n.jsx("button",{onClick:L=>{L.stopPropagation(),kl(D=>({...D,ema:D.ema.filter(q=>q.id!==S.id)}))},className:"ml-1 text-blue-400 hover:text-blue-200","data-testid":`remove-ema-${S.id}`,children:""})]},S.id)),sn.ma.map(S=>n.jsxs(Sr,{variant:"secondary",className:"text-xs bg-green-400/20 text-green-400 border-green-400/30 flex items-center gap-1",children:["MA(",S.period,")",n.jsx("button",{onClick:L=>{L.stopPropagation(),kl(D=>({...D,ma:D.ma.filter(q=>q.id!==S.id)}))},className:"ml-1 text-green-400 hover:text-green-200","data-testid":`remove-ma-${S.id}`,children:""})]},S.id)),sn.rsi.map(S=>n.jsxs(Sr,{variant:"secondary",className:"text-xs bg-orange-400/20 text-orange-400 border-orange-400/30 flex items-center gap-1",children:["RSI(",S.period,")",n.jsx("button",{onClick:L=>{L.stopPropagation(),kl(D=>({...D,rsi:D.rsi.filter(q=>q.id!==S.id)}))},className:"ml-1 text-orange-400 hover:text-orange-200","data-testid":`remove-rsi-${S.id}`,children:""})]},S.id)),sn.bollinger.map(S=>n.jsxs(Sr,{variant:"secondary",className:"text-xs bg-pink-400/20 text-pink-400 border-pink-400/30 flex items-center gap-1",children:["BB(",S.period,")",n.jsx("button",{onClick:L=>{L.stopPropagation(),kl(D=>({...D,bollinger:D.bollinger.filter(q=>q.id!==S.id)}))},className:"ml-1 text-pink-400 hover:text-pink-200","data-testid":`remove-bollinger-${S.id}`,children:""})]},S.id)),sn.macd.map(S=>n.jsxs(Sr,{variant:"secondary",className:"text-xs bg-purple-400/20 text-purple-400 border-purple-400/30 flex items-center gap-1",children:["MACD(",S.fast,",",S.slow,")",n.jsx("button",{onClick:L=>{L.stopPropagation(),kl(D=>({...D,macd:D.macd.filter(q=>q.id!==S.id)}))},className:"ml-1 text-purple-400 hover:text-purple-200","data-testid":`remove-macd-${S.id}`,children:""})]},S.id))]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>j(!b),className:"w-48 h-8 bg-green-600 hover:bg-green-700 text-white border border-green-500 rounded-md px-3 flex items-center justify-between text-sm font-medium","data-testid":"button-pattern-dropdown",children:[n.jsx("span",{children:Hn&&((no=ls.find(S=>S.id===Hn))==null?void 0:no.name)||"Pattern "}),n.jsx(Mp,{className:"w-4 h-4"})]}),b&&n.jsxs("div",{className:"absolute top-full left-0 w-48 mt-1 bg-slate-800 border border-slate-600 rounded-md shadow-lg z-50",children:[n.jsx("button",{onClick:()=>{console.log(" Clear Pattern: Removing all patterns from chart"),Ci(""),j(!1),Al(!0),console.log(" Auto-detection suppressed until next user interaction"),window.clearAll&&window.clearAll(),Ga([]),_l([]),Xo([]),Da([]),wf([]),gr({title:" Chart Cleared",description:"All patterns removed from chart. Chart restored to original state."})},className:"w-full px-3 py-2 text-left text-white hover:bg-slate-700 text-sm border-b border-slate-600","data-testid":"option-clear-pattern",children:"Clear Pattern"}),ls.map(S=>n.jsxs("div",{className:"group flex items-center justify-between px-3 py-2 text-white hover:bg-slate-700",children:[n.jsxs("button",{onClick:()=>{console.log(" Pattern selected for application:",S.id),Ci(S.id),j(!1),El(S),Al(!1),gr({title:" Pattern Applied",description:`Pattern "${S.name}" has been applied to the chart.`})},className:"flex items-center gap-2 text-left text-sm flex-1","data-testid":`option-pattern-${S.id}`,children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"}),S.name]}),n.jsx("button",{onClick:L=>{L.stopPropagation(),console.log(" PERFECT DELETE CLICKED - Pattern:",S.name,"ID:",S.id),Tl(S.id)},className:"w-4 h-4 flex items-center justify-center hover:bg-red-100 dark:hover:bg-red-900 rounded text-red-500 text-xs font-bold opacity-0 group-hover:opacity-100 transition-opacity ml-2",title:"Delete pattern","data-testid":`delete-pattern-${S.id}`,children:""})]},S.id)),ls.length===0&&n.jsx("div",{className:"px-3 py-4 text-slate-400 text-sm text-center",children:"No saved patterns"})]})]}),n.jsxs(Ms,{onValueChange:S=>{Ko(S),Go({...ci[S]}),Ra(!0)},children:[n.jsx(Ns,{className:"w-32 h-6 text-xs bg-slate-800 border-slate-600 text-white",children:n.jsx(Os,{placeholder:"Add Indicator"})}),n.jsxs(js,{className:"bg-slate-800 border-slate-600",children:[n.jsx(gt,{value:"sma",className:"text-white hover:bg-slate-700",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:`w-2 h-2 rounded-full ${sn.sma.length>0?"bg-yellow-400":"bg-gray-400"}`}),"Add SMA (",ci.sma.period,")"]})}),n.jsx(gt,{value:"ema",className:"text-white hover:bg-slate-700",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:`w-2 h-2 rounded-full ${sn.ema.length>0?"bg-blue-400":"bg-gray-400"}`}),"Add EMA (",ci.ema.period,")"]})}),n.jsx(gt,{value:"ma",className:"text-white hover:bg-slate-700",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:`w-2 h-2 rounded-full ${sn.ma.length>0?"bg-green-400":"bg-gray-400"}`}),"Add MA (",ci.ma.period,")"]})}),n.jsx(gt,{value:"rsi",className:"text-white hover:bg-slate-700",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:`w-2 h-2 rounded-full ${sn.rsi.length>0?"bg-orange-400":"bg-gray-400"}`}),"Add RSI (",ci.rsi.period,")"]})}),n.jsx(gt,{value:"bollinger",className:"text-white hover:bg-slate-700",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:`w-2 h-2 rounded-full ${sn.bollinger.length>0?"bg-pink-400":"bg-gray-400"}`}),"Add Bollinger (",ci.bollinger.period,")"]})}),n.jsx(gt,{value:"macd",className:"text-white hover:bg-slate-700",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:`w-2 h-2 rounded-full ${sn.macd.length>0?"bg-purple-400":"bg-gray-400"}`}),"Add MACD (",ci.macd.fast,",",ci.macd.slow,")"]})})]})]}),n.jsxs(H,{size:"sm",variant:"ghost",className:"text-xs text-gray-400 hover:text-white hover:bg-slate-800 h-6 px-2","data-testid":"button-market-settings",children:[n.jsx(Gn,{className:"w-3 h-3 mr-1"}),"Settings"]})]})]}),n.jsxs("div",{className:"flex-1 relative",children:[ln===5&&Jc!==null&&n.jsxs("div",{className:"absolute top-2 left-2 z-20 bg-green-600 text-white px-2 py-1 rounded-md text-xs font-bold shadow-lg",children:[" Selection: Candle ",Jc+1," |  Mock: ",Zc.length," candles"]}),n.jsx(y3e,{height:320,ohlcData:(rt==null?void 0:rt.candles)||[],symbol:Qt,isInteractiveMode:ln===5,onCandleClick:Q0,selectionLineIndex:Jc,mockStartIndex:Jc!==null?Jc+1:null,timeRange:Pr,indicators:sn,chartType:ih,externalSelectedPoints:Or,enablePointSelection:!Hn,onSelectActivated:()=>{console.log(" Auto-switching to Visual AI mode with Notes AI"),ad(!0)}})]}),n.jsxs("div",{className:"mt-3 border-t border-slate-700 pt-3",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsxs(H,{variant:"outline",size:"sm",onClick:()=>Rm(!Ma),className:"text-xs h-6 px-2 bg-blue-600/10 hover:bg-blue-600/20 border-blue-500/30 text-blue-400","data-testid":"toggle-time-filter",children:[n.jsx(qk,{className:"h-3 w-3 mr-1"}),Ma?"Hide":"Show"," Time Filter"]}),Ma&&n.jsx("span",{className:"text-xs text-green-600 dark:text-green-400 font-medium",children:" Real-time filtering"})]}),Ma&&n.jsx("div",{className:"p-3 bg-gradient-to-r from-blue-50/80 to-purple-50/80 dark:from-blue-900/20 dark:to-purple-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("div",{className:"bg-blue-600 text-white px-2 py-1 rounded-full text-xs font-semibold",children:Qc(Pr[0])}),n.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:" Time Range"}),n.jsx("div",{className:"bg-purple-600 text-white px-2 py-1 rounded-full text-xs font-semibold",children:Qc(Pr[1])})]}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"relative h-2 bg-gray-200 dark:bg-gray-700 rounded-lg overflow-hidden",children:n.jsx("div",{className:"absolute h-full bg-gradient-to-r from-blue-500 to-purple-500 rounded-lg transition-all duration-150",style:{left:`${(Pr[0]-540)/420*100}%`,width:`${(Pr[1]-Pr[0])/420*100}%`}})}),n.jsx("input",{type:"range",min:"540",max:"960",step:"15",value:Pr[0],onChange:S=>{const L=parseInt(S.target.value);L<Pr[1]&&(gs([L,Pr[1]]),console.log(` Real-time filter: Start time changed to ${Qc(L)}`))},className:"absolute top-0 left-0 w-full h-2 bg-transparent appearance-none cursor-pointer slider-thumb-blue",style:{background:"transparent"},"data-testid":"start-time-slider"}),n.jsx("input",{type:"range",min:"540",max:"960",step:"15",value:Pr[1],onChange:S=>{const L=parseInt(S.target.value);L>Pr[0]&&(gs([Pr[0],L]),console.log(` Real-time filter: End time changed to ${Qc(L)}`))},className:"absolute top-0 left-0 w-full h-2 bg-transparent appearance-none cursor-pointer slider-thumb-purple",style:{background:"transparent"},"data-testid":"end-time-slider"})]}),n.jsxs("div",{className:"flex gap-1 justify-center",children:[n.jsx(H,{variant:"outline",size:"sm",onClick:()=>gs([555,930]),className:"text-xs h-5 px-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 border-green-300 dark:border-green-700",children:"Full"}),n.jsx(H,{variant:"outline",size:"sm",onClick:()=>gs([555,720]),className:"text-xs h-5 px-1 bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400 border-orange-300 dark:border-orange-700",children:"AM"}),n.jsx(H,{variant:"outline",size:"sm",onClick:()=>gs([720,930]),className:"text-xs h-5 px-1 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 border-purple-300 dark:border-purple-700",children:"PM"})]}),n.jsx("div",{className:"text-xs text-center",children:rt&&Ma&&n.jsxs("div",{className:"text-green-600 dark:text-green-400",children:[" ",((Ii=rt.candles)==null?void 0:Ii.length)||0," candles filtered"]})})]})})]})]})})}),n.jsx("div",{children:n.jsx(St,{className:"bg-slate-900 dark:bg-slate-900 border-slate-700 h-full",children:n.jsxs(Kt,{className:"p-4 h-full flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h3",{className:"text-lg font-semibold text-white",children:ts?" Visual AI":cs?"AI":"Notes AI"}),cs&&!ts&&n.jsx(Sr,{variant:"secondary",className:"text-xs bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",children:"Social Feed AI"}),ts&&n.jsx(Sr,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:"Chart Analysis"})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(H,{size:"sm",variant:"ghost",onClick:()=>od(!ts),className:`text-xs h-8 px-2 py-0 ${ts?"text-blue-400 hover:text-blue-300 hover:bg-blue-950":"text-gray-400 hover:text-white hover:bg-slate-800"}`,"data-testid":"button-toggle-visual-ai",title:ts?"Switch to Notes AI":"Switch to Visual AI",children:ts?n.jsx(Yk,{className:"w-4 h-4"}):n.jsx(Wk,{className:"w-4 h-4"})}),n.jsxs(H,{size:"sm",variant:cs?"default":"ghost",onClick:()=>ad(!cs),className:`text-xs h-8 px-2 py-0 ${cs?"bg-purple-600 hover:bg-purple-700 text-white":"text-gray-400 hover:text-white hover:bg-slate-800"}`,"data-testid":"button-toggle-ai",children:[n.jsx(Oc,{className:"w-6 h-6 mr-1"}),"AI"]}),!cs&&!ts&&(Zd?n.jsxs(n.Fragment,{children:[n.jsxs(H,{size:"sm",variant:"ghost",onClick:As,className:"text-xs text-red-400 hover:text-red-300 hover:bg-red-950 h-6 px-2","data-testid":"button-cancel-notes",children:[n.jsx(Wr,{className:"w-3 h-3 mr-1"}),"Cancel"]}),n.jsxs(H,{size:"sm",onClick:el,className:"text-xs bg-green-600 hover:bg-green-700 text-white h-6 px-2","data-testid":"button-save-notes",children:[n.jsx(hl,{className:"w-3 h-3 mr-1"}),"Save"]})]}):n.jsxs(H,{size:"sm",variant:"ghost",onClick:Fn,className:"text-xs text-gray-400 hover:text-white hover:bg-slate-800 h-6 px-2","data-testid":"button-edit-notes",children:[n.jsx(Bh,{className:"w-3 h-3 mr-1"}),"Edit"]}))]})]}),n.jsx("div",{className:"h-96",children:ts?n.jsx("div",{className:"h-full overflow-y-auto relative",children:n.jsxs("div",{className:"flex flex-col min-h-full",children:[n.jsx("div",{className:"h-80 flex-shrink-0",children:n.jsx(JL,{height:320,selectedPoints:Or||[],onPointsChange:S=>{Da(S),console.log(" Blackboard points updated:",S)},onReset:()=>Da([]),isExpanded:!0})}),n.jsx("div",{className:"w-full h-px bg-gradient-to-r from-transparent via-slate-500 to-transparent my-4"}),n.jsxs("div",{className:"px-4 py-3 bg-slate-800/30 border border-slate-600/20 rounded-lg mb-4",children:[n.jsxs("div",{className:"text-xs font-medium text-orange-400 mb-3 flex items-center gap-2",children:[n.jsx("span",{className:"w-2 h-2 bg-orange-400 rounded-full"}),"Point Management"]}),Or&&Or.length>0?n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"max-h-32 overflow-y-auto space-y-2",children:Or.map((S,L)=>n.jsxs("div",{className:"flex items-center gap-2 text-xs bg-slate-700/50 p-2 rounded",children:[n.jsxs("span",{className:"text-yellow-400 min-w-[20px] font-medium",children:["#",S.pointNumber]}),n.jsxs("span",{className:"text-white min-w-[60px]",children:["",S.price.toFixed(2)]}),n.jsxs("select",{value:S.label||"",onChange:D=>{window.labelPoint&&window.labelPoint(S.pointNumber,D.target.value||null)},className:"bg-slate-600 text-white px-2 py-1 rounded text-xs border-none flex-1","data-testid":`select-point-label-${S.pointNumber}`,children:[n.jsx("option",{value:"none",children:"Select Label"}),n.jsx("option",{value:"Entry",children:" Entry"}),n.jsx("option",{value:"SL",children:" Stop Loss"}),n.jsx("option",{value:"Target",children:" Target"}),n.jsx("option",{value:"Breakout",children:" Breakout"})]}),S.label&&n.jsx("button",{onClick:()=>{window.addHorizontalRay&&window.addHorizontalRay(S.price,S.label,S.pointNumber)},className:"bg-orange-600 hover:bg-orange-500 text-white px-2 py-1 rounded text-xs","data-testid":`button-add-ray-${S.pointNumber}`,children:""})]},L))}),n.jsxs("div",{className:"border-t border-slate-600/50 pt-3",children:[n.jsx("div",{className:"text-white text-xs font-medium mb-2",children:"Quick Ray Add:"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>{window.setIsAddingRay&&window.setIsAddingRay("SL")},className:"px-3 py-1 rounded text-xs bg-red-700 hover:bg-red-600 text-white","data-testid":"button-add-sl-ray",children:" SL"}),n.jsx("button",{onClick:()=>{window.setIsAddingRay&&window.setIsAddingRay("Target")},className:"px-3 py-1 rounded text-xs bg-green-700 hover:bg-green-600 text-white","data-testid":"button-add-target-ray",children:" Target"}),n.jsx("button",{onClick:()=>{window.setIsAddingRay&&window.setIsAddingRay("Breakout")},className:"px-3 py-1 rounded text-xs bg-orange-700 hover:bg-orange-600 text-white","data-testid":"button-add-breakout-ray",children:" Breakout"})]})]}),Ln&&Ln.length>0&&n.jsxs("div",{className:"border-t border-slate-600/50 pt-3",children:[n.jsx("div",{className:"text-white text-xs font-medium mb-2",children:"Active Rays:"}),n.jsx("div",{className:"max-h-20 overflow-y-auto space-y-1",children:Ln.reduce((L,D)=>(L.find(fe=>fe.label===D.label&&Math.abs(fe.price-D.price)<.01)||L.push(D),L),[]).map(L=>n.jsxs("div",{className:"flex items-center gap-2 text-xs bg-slate-700/30 p-2 rounded",children:[n.jsx("span",{style:{color:L.color},className:"min-w-[50px] font-medium",children:L.label}),n.jsxs("span",{className:"text-white",children:["",L.price.toFixed(2)]}),L.pointNumber&&n.jsxs("span",{className:"text-yellow-400",children:["#",L.pointNumber]}),n.jsx("button",{onClick:()=>{window.removeHorizontalRay&&window.removeHorizontalRay(L.id)},className:"bg-red-600 hover:bg-red-500 text-white px-2 py-1 rounded text-xs ml-auto","data-testid":`button-remove-ray-${L.id}`,children:""})]},L.id))})]})]}):n.jsx("div",{className:"text-xs text-slate-400 text-center py-4",children:"Click on the chart below to add manual points for pattern analysis"})]}),Or&&Or.length>=2&&n.jsxs("div",{className:"px-4 py-3 bg-slate-900/40 border border-blue-600/20 rounded-lg mb-4",children:[n.jsxs("div",{className:"text-xs font-medium text-blue-400 mb-3 flex items-center gap-2",children:[n.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full"}),"Smart Pattern Analysis"]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("div",{className:"text-xs text-slate-300 mb-2",children:"Point Relationships:"}),n.jsx("div",{className:"bg-slate-800/50 p-3 rounded text-xs font-mono",children:(()=>{const S=[...Or].sort((D,q)=>D.pointNumber-q.pointNumber),L=[];for(let D=0;D<S.length;D++){const q=S[D],fe=S[D+1];if(fe){const Se=q.price>fe.price?">":"<",ve=Se===">"?"text-red-400":"text-green-400";L.push(n.jsxs("span",{className:ve,children:[q.pointNumber,Se,fe.pointNumber]},`${q.pointNumber}-${fe.pointNumber}`))}}if(S.length>2){const D=S[S.length-1],q=S[0],fe=D.price>q.price?">":"<",Se=fe===">"?"text-red-400":"text-green-400";L.push(n.jsxs("span",{className:Se,children:[D.pointNumber,fe,q.pointNumber]},`${D.pointNumber}-${q.pointNumber}`))}return L.map((D,q)=>n.jsxs("span",{children:[D,q<L.length-1&&n.jsx("span",{className:"text-slate-500",children:", "})]},q))})()})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("div",{className:"text-xs text-slate-300",children:"Active Pattern Structure:"}),n.jsxs("div",{className:"flex gap-2",children:[!Hn&&Or.length>0&&n.jsx("button",{onClick:()=>{const S=Or.slice(0,-1);Da(S),window.selectedPoints=S,window.dispatchEvent(new CustomEvent("visualAIPointsUpdated",{detail:{selectedPoints:S,horizontalRays:Ln}})),console.log(` Deleted last point. Remaining: ${S.length} points`)},className:"bg-red-600 hover:bg-red-500 text-white px-2 py-1 rounded text-xs font-medium","data-testid":"button-delete-point",children:" Delete"}),Ln&&Ln.length>0&&Or.length>=3&&n.jsx("button",{onClick:()=>{const S=prompt("Enter pattern name:");S&&S.trim()&&Fm(S.trim())},className:"bg-green-600 hover:bg-green-500 text-white px-3 py-1 rounded text-xs font-medium","data-testid":"button-save-pattern",children:" Save"})]})]}),n.jsx("div",{className:"bg-slate-800/50 p-3 rounded",children:(()=>{if(!Ln||Ln.length===0)return n.jsx("div",{className:"text-xs text-slate-400 italic",children:"Use Quick Ray buttons or label points to create your pattern structure"});const S=Ln.reduce((fe,Se)=>(fe[Se.label]||(fe[Se.label]=Se),fe),{}),L=S.SL,D=S.Breakout,q=S.Target;return n.jsxs("div",{className:"space-y-2",children:[L&&n.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[n.jsxs("span",{className:"text-red-400 font-medium",children:[" SL-",L.pointNumber||"Ray"]}),n.jsxs("span",{className:"text-slate-400",children:["",L.price.toFixed(2)]})]}),D&&n.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[n.jsxs("span",{className:"text-orange-400 font-medium",children:[" Breakout-",D.pointNumber||"Ray"]}),n.jsxs("span",{className:"text-slate-400",children:["",D.price.toFixed(2)]})]}),q&&n.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[n.jsxs("span",{className:"text-green-400 font-medium",children:[" Target-",q.pointNumber||"Ray"]}),n.jsxs("span",{className:"text-slate-400",children:["",q.price.toFixed(2)]})]}),!L&&!D&&!q&&n.jsx("div",{className:"text-xs text-slate-400 italic",children:"No SL, Breakout, or Target rays assigned yet"})]})})()})]}),Or.length>=3&&n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-slate-300 mb-2",children:"Pattern Metrics:"}),n.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs",children:(()=>{const S=[...Or].sort((ve,Ge)=>ve.pointNumber-Ge.pointNumber),L=S.map(ve=>ve.price),D=Math.max(...L)-Math.min(...L),q=L.reduce((ve,Ge)=>ve+Ge,0)/L.length,fe=(D/q*100).toFixed(1),Se=(D*.6/(D*.3)).toFixed(1);return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-slate-700/30 p-2 rounded",children:[n.jsx("span",{className:"text-slate-400",children:"Range:"}),n.jsxs("span",{className:"text-white ml-1",children:["",D.toFixed(2)]})]}),n.jsxs("div",{className:"bg-slate-700/30 p-2 rounded",children:[n.jsx("span",{className:"text-slate-400",children:"Volatility:"}),n.jsxs("span",{className:`ml-1 ${parseFloat(fe)>2?"text-red-400":"text-green-400"}`,children:[fe,"%"]})]}),n.jsxs("div",{className:"bg-slate-700/30 p-2 rounded",children:[n.jsx("span",{className:"text-slate-400",children:"R:R Ratio:"}),n.jsxs("span",{className:"text-blue-400 ml-1",children:["1:",Se]})]}),n.jsxs("div",{className:"bg-slate-700/30 p-2 rounded",children:[n.jsx("span",{className:"text-slate-400",children:"Points:"}),n.jsx("span",{className:"text-yellow-400 ml-1",children:S.length})]})]})})()})]})]}),n.jsxs("div",{className:"px-4 py-3 bg-slate-800/50 border border-slate-600/30 rounded-lg",children:[n.jsxs("div",{className:"text-xs font-medium text-blue-400 mb-2 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse"}),"AI Chart Analysis"]}),n.jsx("div",{className:"flex items-center gap-1 bg-slate-700 rounded p-1",children:n.jsx("span",{className:"h-5 px-2 text-[10px] bg-blue-600 text-white rounded text-center flex items-center",children:" Candles"})})]}),n.jsxs("div",{className:"text-xs text-slate-300 leading-relaxed space-y-2",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-slate-400",children:"Period:"})," "," ",n.jsx("span",{className:"text-white font-medium",children:`${(()=>{switch(r){case"1":return"1min";case"5":return"5min";case"15":return"15min";case"30":return"30min";case"60":return"1hr";case"240":return"4hr";case"1440":return"1d";default:return r}})()} Timeframe`}),n.jsxs("span",{className:"ml-2 text-slate-400",children:["(",((Ba=rt==null?void 0:rt.candles)==null?void 0:Ba.length)||0," candles)"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-slate-400",children:"Price Movement:"})," "," ",(()=>{var Se,ve,Ge,Qe,ht,Et,Pt,rr,hr;if(!Pr||!((Se=rt==null?void 0:rt.candles)!=null&&Se.length)){const Tt=(rt==null?void 0:rt.candles)||[];if(Tt.length===0)return n.jsx("span",{className:"text-slate-500",children:"No data available"});const $t=((ve=Tt[0])==null?void 0:ve.close)||((Ge=Tt[0])==null?void 0:Ge.price)||0,vs=((Qe=Tt[Tt.length-1])==null?void 0:Qe.close)||((ht=Tt[Tt.length-1])==null?void 0:ht.price)||0,er=vs-$t,On=$t?(er/$t*100).toFixed(2):"0.00";return n.jsxs("span",{className:er>=0?"text-green-400 font-medium":"text-red-400 font-medium",children:["",$t.toFixed(2),"  ",vs.toFixed(2)," (",er>=0?"+":"",On,"%)"]})}const S=Oa(rt.candles,Pr);if(S.length===0)return n.jsx("span",{className:"text-slate-500",children:"No data in range"});const L=((Et=S[0])==null?void 0:Et.close)||((Pt=S[0])==null?void 0:Pt.price)||0,D=((rr=S[S.length-1])==null?void 0:rr.close)||((hr=S[S.length-1])==null?void 0:hr.price)||0,q=D-L,fe=L?(q/L*100).toFixed(2):"0.00";return n.jsxs("span",{className:q>=0?"text-green-400 font-medium":"text-red-400 font-medium",children:["",L.toFixed(2),"  ",D.toFixed(2)," (",q>=0?"+":"",fe,"%)"]})})()]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-slate-400",children:"Active Indicators:"})," "," ",Object.keys(sn).length>0?n.jsx("span",{className:"text-purple-400 font-medium",children:Object.entries(sn).map(([S,L])=>`${S.toUpperCase()}(${L.length})`).join(", ")}):n.jsx("span",{className:"text-slate-500",children:"None applied"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-slate-400",children:"Trend Analysis:"})," "," ",(()=>{const S=Pr?Oa((rt==null?void 0:rt.candles)||[],Pr):(rt==null?void 0:rt.candles)||[];if(S.length<3)return n.jsx("span",{className:"text-slate-500",children:"Insufficient data"});const D=S.slice(-3).map(Se=>Se.close||Se.price||0),q=D[2]>D[1]&&D[1]>D[0]?"Bullish":D[2]<D[1]&&D[1]<D[0]?"Bearish":"Sideways",fe=q==="Bullish"?"text-green-400":q==="Bearish"?"text-red-400":"text-yellow-400";return n.jsxs("span",{className:`${fe} font-medium`,children:[q," momentum detected"]})})()]})]})]})]})}):cs?n.jsxs("div",{className:"h-full flex flex-col",children:[n.jsx("div",{className:"flex-1 max-h-80 overflow-y-auto p-3 space-y-3 bg-slate-800 rounded-lg border border-slate-700",children:jf.length===0?n.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400 mt-2",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("h4",{className:"text-xs font-semibold text-purple-600 dark:text-purple-400 mb-2",children:" Social Feed Stocks"}),n.jsx("div",{className:"flex flex-wrap gap-1 justify-center mb-3",children:Array.isArray(zr)&&zr.map(S=>n.jsx(Sr,{variant:"outline",className:"text-[10px] px-2 py-1 bg-green-50 text-green-700 border-green-200 dark:bg-green-900 dark:text-green-300 dark:border-green-700",children:S},S))})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[n.jsx(H,{variant:"outline",size:"sm",onClick:()=>dn("generate strategy code"),className:"text-[10px] h-6 px-2 bg-purple-50 hover:bg-purple-100 text-purple-700 border-purple-200 dark:bg-purple-900 dark:hover:bg-purple-800 dark:text-purple-300 dark:border-purple-700 rounded-lg",children:" Generate strategy code"}),n.jsx(H,{variant:"outline",size:"sm",onClick:()=>dn("emi code"),className:"text-[10px] h-6 px-2 bg-green-50 hover:bg-green-100 text-green-700 border-green-200 dark:bg-green-900 dark:hover:bg-green-800 dark:text-green-300 dark:border-green-700 rounded-lg",children:" EMI code"}),n.jsx(H,{variant:"outline",size:"sm",onClick:()=>dn("rsi,ema code"),className:"text-[10px] h-6 px-2 bg-blue-50 hover:bg-blue-100 text-blue-700 border-blue-200 dark:bg-blue-900 dark:hover:bg-blue-800 dark:text-blue-300 dark:border-blue-700 rounded-lg",children:" RSI,EMA code"}),n.jsx(H,{variant:"outline",size:"sm",onClick:()=>dn("show performance"),className:"text-[10px] h-6 px-2 bg-orange-50 hover:bg-orange-100 text-orange-700 border-orange-200 dark:bg-orange-900 dark:hover:bg-orange-800 dark:text-orange-300 dark:border-orange-700 rounded-lg",children:" Show performance"})]})]}):jf.map((S,L)=>n.jsx("div",{className:`flex ${S.role==="user"?"justify-end":"justify-start"}`,children:n.jsx("div",{className:`max-w-[80%] p-2 rounded-lg text-xs relative ${S.role==="user"?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white":"bg-gradient-to-r from-slate-700 to-slate-800 text-slate-100 border border-indigo-600/20"}`,children:S.isLoading?n.jsxs("div",{className:"flex items-center gap-3 py-2 px-4 bg-gradient-to-r from-slate-800 to-slate-700 border border-purple-500/30 rounded-lg animate-pulse",children:[n.jsxs("div",{className:"flex gap-1",children:[n.jsx("div",{className:"w-2.5 h-2.5 bg-gradient-to-r from-purple-400 to-blue-400 rounded-full animate-pulse"}),n.jsx("div",{className:"w-2.5 h-2.5 bg-gradient-to-r from-blue-400 to-indigo-400 rounded-full animate-pulse",style:{animationDelay:"200ms"}}),n.jsx("div",{className:"w-2.5 h-2.5 bg-gradient-to-r from-indigo-400 to-purple-400 rounded-full animate-pulse",style:{animationDelay:"400ms"}})]}),n.jsx("span",{className:"text-xs text-slate-300 font-medium animate-pulse",children:"BATTU AI is thinking..."})]}):S.isStockMessage&&S.stocks?n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"text-xs text-slate-200 mb-3",children:S.content}),S.stocks.map((D,q)=>n.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-800 rounded border border-slate-600 text-xs",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium text-white",children:D.symbol}),n.jsx("span",{className:"text-[10px] text-slate-400",children:D.exchange})]}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsxs("span",{className:"font-bold text-white",children:["",D.price.toLocaleString("en-IN",{minimumFractionDigits:2})]}),n.jsxs("span",{className:`text-[10px] font-medium ${D.changePercentage>=0?"text-green-400":"text-red-400"}`,children:[D.changePercentage>=0?"+":"",D.change.toFixed(2)," ",D.changePercentage>=0?"+":"",D.changePercentage.toFixed(2),"%"]})]})]}),n.jsx(H,{size:"sm",variant:"outline",onClick:()=>su(D.symbol),disabled:Array.isArray(zr)&&zr.includes(D.symbol),className:"text-[10px] h-6 px-2 ml-2 text-orange-600 border-orange-600 hover:bg-orange-100 dark:text-orange-400 dark:border-orange-400 dark:hover:bg-orange-900 disabled:opacity-50 disabled:cursor-not-allowed","data-testid":`button-add-${D.symbol}`,children:Array.isArray(zr)&&zr.includes(D.symbol)?"":"+"})]},q)),n.jsx("div",{className:"mt-3 pt-2 border-t border-slate-600",children:n.jsx(H,{size:"sm",variant:"outline",onClick:()=>Cf(S.stocks.map(D=>D.symbol)),className:"text-[10px] h-6 px-3 w-full text-orange-600 border-orange-600 hover:bg-orange-100 dark:text-orange-400 dark:border-orange-400 dark:hover:bg-orange-900","data-testid":"button-add-all-stocks",children:"+ Add All Stocks to Feed"})}),S.role==="assistant"&&n.jsxs("div",{className:"absolute bottom-2 right-2 flex gap-2",children:[n.jsx(H,{variant:"ghost",size:"sm",onClick:()=>{const D=S.content+`

`+S.stocks.map(q=>`${q.symbol}: ${q.price} (${q.changePercentage>=0?"+":""}${q.changePercentage.toFixed(2)}%)`).join(`
`);navigator.clipboard.writeText(D)},className:"h-5 w-5 p-1 text-slate-400 hover:text-slate-200 hover:bg-slate-600",children:n.jsx(Bi,{className:"w-2.5 h-2.5"})}),n.jsx(H,{variant:"ghost",size:"sm",className:"h-5 w-5 p-1 text-slate-400 hover:text-slate-200 hover:bg-slate-600",children:n.jsx(iN,{className:"w-2.5 h-2.5"})})]}),S.role==="assistant"&&n.jsxs("div",{className:"flex flex-wrap gap-1 mt-3 pt-2 border-t border-slate-600",children:[n.jsx(H,{variant:"outline",size:"sm",onClick:()=>dn("Analyze RELIANCE stock"),className:"text-[9px] h-5 px-1.5 bg-blue-50 hover:bg-blue-100 text-blue-700 border-blue-200 dark:bg-blue-900 dark:hover:bg-blue-800 dark:text-blue-300 dark:border-blue-700 rounded-md",children:" Analyze RELIANCE stock"}),n.jsx(H,{variant:"outline",size:"sm",onClick:()=>dn("Market news today"),className:"text-[9px] h-5 px-1.5 bg-green-50 hover:bg-green-100 text-green-700 border-green-200 dark:bg-green-900 dark:hover:bg-green-800 dark:text-green-300 dark:border-green-700 rounded-md",children:" Market news today"}),n.jsx(H,{variant:"outline",size:"sm",onClick:()=>dn("Best stocks to buy"),className:"text-[9px] h-5 px-1.5 bg-purple-50 hover:bg-purple-100 text-purple-700 border-purple-200 dark:bg-purple-900 dark:hover:bg-purple-800 dark:text-purple-300 dark:border-purple-700 rounded-md",children:" Best stocks to buy"}),n.jsx(H,{variant:"outline",size:"sm",onClick:()=>dn("Upcoming IPOs"),className:"text-[9px] h-5 px-1.5 bg-orange-50 hover:bg-orange-100 text-orange-700 border-orange-200 dark:bg-orange-900 dark:hover:bg-orange-800 dark:text-orange-300 dark:border-orange-700 rounded-md",children:" Upcoming IPOs"}),n.jsx(H,{variant:"outline",size:"sm",onClick:()=>dn("Bond market trends"),className:"text-[9px] h-5 px-1.5 bg-indigo-50 hover:bg-indigo-100 text-indigo-700 border-indigo-200 dark:bg-indigo-900 dark:hover:bg-indigo-800 dark:text-indigo-300 dark:border-indigo-700 rounded-md",children:" Bond market trends"})]})]}):n.jsxs("div",{children:[S.role==="assistant"?n.jsx("div",{className:"space-y-2",children:tl(S.content).map((D,q)=>n.jsx("div",{children:D.type==="text"?n.jsx("div",{className:"bg-slate-700 text-gray-200 px-3 py-2 rounded-lg text-sm whitespace-pre-wrap",children:D.content}):n.jsxs("div",{className:"bg-slate-900 border border-slate-600 rounded-lg overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between bg-slate-800 px-3 py-2 border-b border-slate-600",children:[n.jsx("span",{className:"text-xs text-gray-400 font-mono",children:"Strategy Code"}),n.jsx(H,{size:"sm",variant:"ghost",onClick:()=>Qr(D.content,L*100+q),className:"h-6 px-2 text-xs text-gray-400 hover:text-white hover:bg-slate-700",children:fc===L*100+q?n.jsxs(n.Fragment,{children:[n.jsx(hl,{className:"w-3 h-3 mr-1"}),"Copied!"]}):n.jsxs(n.Fragment,{children:[n.jsx(Bi,{className:"w-3 h-3 mr-1"}),"Copy"]})})]}),n.jsx("div",{className:"p-4 h-32 overflow-y-auto",children:n.jsx("pre",{className:"text-sm text-gray-100 font-mono whitespace-pre-wrap leading-relaxed tracking-wide break-all",children:D.content})})]})},q))}):n.jsx("div",{className:"mb-2 pr-16",children:S.content}),S.role==="assistant"&&S.newsData&&S.newsData.stocks&&n.jsxs("div",{className:"mt-4 space-y-2",children:[S.newsData.stocks.map((D,q)=>{const fe=D.change&&D.change>=0?"text-green-400":"text-red-400",Se=D.change&&D.change>=0?"":"";return n.jsxs("div",{className:"bg-slate-800 border border-slate-600 rounded-lg p-3 flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-semibold text-white",children:D.symbol}),n.jsx("span",{className:"text-xs text-slate-400",children:D.exchange||"NSE"})]}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsxs("span",{className:"text-lg font-bold text-white",children:["",D.price]}),n.jsxs("span",{className:`text-sm ${fe} flex items-center gap-1`,children:[Se,D.change>=0?"+":"",D.change||0," ",D.changePercent>=0?"+":"",(D.changePercent||0).toFixed(2),"%"]})]})]}),n.jsx(H,{size:"sm",onClick:()=>su(D.symbol),className:"h-8 w-8 rounded-full bg-purple-600 hover:bg-purple-700 text-white p-0 flex items-center justify-center",children:n.jsx("span",{className:"text-lg font-bold",children:"+"})})]},q)}),n.jsx("div",{className:"mt-2 pt-2 border-t border-slate-600",children:n.jsxs(H,{onClick:()=>{const D=S.newsData.stocks.map(q=>q.symbol);Cf(D)},className:"w-full bg-purple-600 hover:bg-purple-700 text-white font-medium py-1.5 px-3 rounded text-sm flex items-center justify-center gap-1",children:[n.jsx("span",{className:"text-sm font-bold",children:"+"}),"Add All (",S.newsData.stocks.filter(D=>!(Array.isArray(zr)&&zr.includes(D.symbol))).length,")"]})})]}),S.role==="assistant"&&n.jsxs("div",{className:"absolute bottom-2 right-2 flex gap-2",children:[n.jsx(H,{variant:"ghost",size:"sm",onClick:()=>navigator.clipboard.writeText(S.content),className:"h-5 w-5 p-1 text-slate-400 hover:text-slate-200 hover:bg-slate-600",children:n.jsx(Bi,{className:"w-2.5 h-2.5"})}),n.jsx(H,{variant:"ghost",size:"sm",className:"h-5 w-5 p-1 text-slate-400 hover:text-slate-200 hover:bg-slate-600",children:n.jsx(iN,{className:"w-2.5 h-2.5"})})]}),S.role==="assistant"&&n.jsxs("div",{className:"flex flex-wrap gap-1 mt-3 pt-2 border-t border-slate-600",children:[n.jsx(H,{variant:"outline",size:"sm",onClick:()=>dn("generate strategy code"),className:"text-[9px] h-5 px-1.5 bg-purple-50 hover:bg-purple-100 text-purple-700 border-purple-200 dark:bg-purple-900 dark:hover:bg-purple-800 dark:text-purple-300 dark:border-purple-700 rounded-md",children:" Generate strategy code"}),n.jsx(H,{variant:"outline",size:"sm",onClick:()=>dn("emi code"),className:"text-[9px] h-5 px-1.5 bg-green-50 hover:bg-green-100 text-green-700 border-green-200 dark:bg-green-900 dark:hover:bg-green-800 dark:text-green-300 dark:border-green-700 rounded-md",children:" EMI code"}),n.jsx(H,{variant:"outline",size:"sm",onClick:()=>dn("rsi+ema code"),className:"text-[9px] h-5 px-1.5 bg-blue-50 hover:bg-blue-100 text-blue-700 border-blue-200 dark:bg-blue-900 dark:hover:bg-blue-800 dark:text-blue-300 dark:border-blue-700 rounded-md",children:" RSI+EMA code"}),n.jsx(H,{variant:"outline",size:"sm",onClick:()=>dn("show performance"),className:"text-[9px] h-5 px-1.5 bg-orange-50 hover:bg-orange-100 text-orange-700 border-orange-200 dark:bg-orange-900 dark:hover:bg-orange-800 dark:text-orange-300 dark:border-orange-700 rounded-md",children:" Show performance"}),n.jsx(H,{variant:"outline",size:"sm",onClick:()=>dn("optimize my strategy"),className:"text-[9px] h-5 px-1.5 bg-indigo-50 hover:bg-indigo-100 text-indigo-700 border-indigo-200 dark:bg-indigo-900 dark:hover:bg-indigo-800 dark:text-indigo-300 dark:border-indigo-700 rounded-md",children:" Optimize strategy"})]})]})})},L))}),n.jsxs("div",{className:"mt-2 flex gap-2",children:[n.jsx("input",{value:Ka,onChange:S=>dn(S.target.value),onKeyPress:S=>{S.key==="Enter"&&!xs&&Ka.trim()&&(So(L=>[...L,{role:"user",content:Ka}]),Qd(!0),Rl(Ka),dn(""))},placeholder:"Ask strategy AI: generate strategy code, show performance...",className:"flex-1 px-3 py-2 text-xs border border-slate-600 rounded-lg bg-slate-800 text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500",disabled:xs}),n.jsx(H,{size:"sm",onClick:()=>{Ka.trim()&&!xs&&(So(S=>[...S,{role:"user",content:Ka}]),Qd(!0),Rl(Ka),dn(""))},disabled:xs||!Ka.trim(),className:"h-8 px-3 bg-purple-600 hover:bg-purple-700 text-white text-xs",children:"Send"})]})]}):Zd?n.jsx("textarea",{value:Ta,onChange:S=>Ts(S.target.value),placeholder:"Write your trading notes, strategies, observations...",className:"w-full h-full p-3 text-sm border border-slate-600 rounded-lg bg-slate-800 text-white placeholder-slate-400 resize-none focus:outline-none focus:ring-2 focus:ring-blue-500","data-testid":"textarea-notes"}):n.jsx("div",{className:"h-full p-3 text-sm border border-slate-700 rounded-lg bg-slate-800 text-white overflow-y-auto",children:Ea?n.jsx("pre",{className:"whitespace-pre-wrap font-sans",children:Ea}):n.jsx("p",{className:"text-slate-400 italic",children:"No trading notes yet. Click Edit to add your first note."})})})]})})})]})]}),n.jsx(bn,{open:ch,onOpenChange:Kd,children:n.jsxs(pn,{className:"sm:max-w-md bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:[n.jsx(Zn,{className:"text-center",children:n.jsx(Xn,{className:"text-gray-900 dark:text-white text-center",children:"Add custom interval"})}),n.jsxs("div",{className:"grid gap-4 py-4 px-2",children:[n.jsxs("div",{className:"grid gap-2",children:[n.jsx(Un,{htmlFor:"timeframe-type",className:"text-gray-700 dark:text-gray-300 text-sm font-medium",children:"Type"}),n.jsxs(Ms,{value:fg,onValueChange:Z0,children:[n.jsx(Ns,{className:"w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white",children:n.jsx(Os,{})}),n.jsxs(js,{className:"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600",children:[n.jsx(gt,{value:"minutes",children:"minutes"}),n.jsx(gt,{value:"hr",children:"hr"}),n.jsx(gt,{value:"d",children:"d"}),n.jsx(gt,{value:"m",children:"m"}),n.jsx(gt,{value:"w",children:"w"})]})]})]}),n.jsxs("div",{className:"grid gap-2",children:[n.jsx(Un,{htmlFor:"timeframe-interval",className:"text-gray-700 dark:text-gray-300 text-sm font-medium",children:"Interval"}),n.jsx(Nr,{id:"timeframe-interval",placeholder:"Enter number",value:Gd,onChange:S=>mg(S.target.value),className:"w-full bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white"})]})]}),n.jsxs("div",{className:"flex justify-center gap-3 pt-2",children:[n.jsx(H,{variant:"outline",onClick:()=>{Kd(!1),mg("")},className:"flex-1 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600",children:"Cancel"}),n.jsx(H,{onClick:()=>{if(Gd&&parseInt(Gd)>0){const S=to(fg,Gd),L=ud(fg,Gd);rd(D=>D.some(fe=>fe.value===S)?D:[...D,{value:S,label:L,deletable:!0}]),Sl(S),Kd(!1),mg("")}},disabled:!Gd||parseInt(Gd)<=0,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:"Add"})]})]})}),n.jsxs(Kh,{value:"trade",className:"p-0 -mx-6 h-[calc(100vh-120px)]",children:[n.jsx("div",{className:"flex h-full gap-0",children:n.jsxs("div",{className:"flex-[75] border-r border-border bg-[#131722] relative",children:[n.jsx("div",{className:"h-full",children:n.jsx(j3e,{height:typeof window<"u"?window.innerHeight-120:600,defaultSymbol:"NSE:NIFTY50-INDEX",interval:"15"})}),n.jsx("div",{className:`absolute bottom-0 left-0 right-0 z-50 transition-all duration-300 ease-in-out ${Ti?"max-h-80":"max-h-10"}`,children:n.jsxs("div",{className:"bg-slate-900/95 backdrop-blur-sm border-t border-slate-700 rounded-t-lg mx-2 shadow-lg",children:[n.jsxs("div",{className:"flex items-center justify-between px-3 py-2 cursor-pointer hover:bg-slate-800/50 rounded-t-lg",onClick:()=>To(!Ti),"data-testid":"button-trade-ohlc-toggle",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ia,{className:"h-4 w-4 text-orange-400"}),n.jsx("span",{className:"text-sm font-semibold text-white",children:"OHLC Data"}),n.jsx("span",{className:"text-[10px] px-1.5 py-0.5 bg-orange-500/20 text-orange-400 rounded font-medium",children:"Angel One"}),Qt&&n.jsxs("span",{className:"text-xs text-slate-400",children:["(",Qt,")"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[!Ti&&ir&&ir.candles&&ir.candles.length>0&&n.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[n.jsxs("span",{className:"text-slate-400",children:["O: ",n.jsxs("span",{className:"text-white",children:["",(bc=(rx=ir.candles[0])==null?void 0:rx.open)==null?void 0:bc.toFixed(2)]})]}),n.jsxs("span",{className:"text-green-400",children:["H: ",Math.max(...ir.candles.map(S=>S.high||0)).toFixed(2)]}),n.jsxs("span",{className:"text-red-400",children:["L: ",Math.min(...ir.candles.map(S=>S.low||1/0)).toFixed(2)]}),n.jsxs("span",{className:"text-purple-400",children:["C: ",(qr=(md=ir.candles[ir.candles.length-1])==null?void 0:md.close)==null?void 0:qr.toFixed(2)]})]}),n.jsx(Bb,{className:`h-4 w-4 text-slate-400 transition-transform duration-300 ${Ti?"":"rotate-180"}`})]})]}),n.jsxs("div",{className:`overflow-hidden transition-all duration-300 ${Ti?"opacity-100":"opacity-0 h-0"}`,children:[n.jsx("div",{className:"px-3 pb-3 space-y-3",children:n.jsxs("div",{className:"flex items-center gap-2 flex-wrap pt-2 border-t border-slate-700/50",children:[n.jsxs(wa,{open:wn,onOpenChange:nd,children:[n.jsx(Na,{asChild:!0,children:n.jsxs(H,{variant:"outline",role:"combobox","aria-expanded":wn,className:"w-32 h-7 justify-between bg-white dark:bg-slate-800 border-slate-600 text-slate-900 dark:text-white text-xs px-2","data-testid":"button-trade-symbol-search",children:[Qt?((bh=Cx.find(S=>S.value===Qt))==null?void 0:bh.label)||Qt:"Select...",n.jsx(yx,{className:"ml-1 h-3 w-3 shrink-0 opacity-50"})]})}),n.jsx(fa,{className:"w-64 p-0 bg-white dark:bg-slate-800 border-slate-600",side:"top",children:n.jsxs(ZN,{children:[n.jsx(ej,{placeholder:"Search stocks...",value:cn,onValueChange:Ya,className:"text-xs bg-white dark:bg-slate-800 text-slate-900 dark:text-white border-none"}),n.jsxs(tj,{className:"bg-white dark:bg-slate-800 max-h-48",children:[n.jsx(rj,{className:"text-slate-900 dark:text-white py-3 text-center text-xs",children:"No stock found."}),n.jsx(nj,{className:"bg-white dark:bg-slate-800",children:Cx.filter(S=>S.label.toLowerCase().includes(cn.toLowerCase())||S.value.toLowerCase().includes(cn.toLowerCase())).map(S=>n.jsxs(sj,{value:S.value,onSelect:L=>{Gc(L===Qt?"":L),nd(!1),Ya("")},className:"flex items-center px-2 py-1.5 text-xs text-slate-900 dark:text-white hover:bg-slate-100 dark:hover:bg-slate-700 cursor-pointer",children:[n.jsx(hl,{className:Ht("mr-2 h-3 w-3 flex-shrink-0",Qt===S.value?"opacity-100":"opacity-0")}),n.jsx("span",{className:"truncate",children:S.label})]},S.value))})]})]})})]}),n.jsxs(wa,{children:[n.jsx(Na,{asChild:!0,children:n.jsxs(H,{variant:"outline",className:"w-16 h-7 justify-between bg-white dark:bg-slate-800 border-slate-600 text-slate-900 dark:text-slate-300 text-xs px-2","data-testid":"button-trade-timeframe",children:[((so=yc().find(S=>S.value===is))==null?void 0:so.label)||is,n.jsx(yx,{className:"ml-1 h-3 w-3 shrink-0 opacity-50"})]})}),n.jsx(fa,{className:"w-36 p-1 bg-white dark:bg-slate-800 border-slate-600",children:n.jsxs("div",{className:"grid gap-1 max-h-48 overflow-y-auto",children:[yc().map(S=>n.jsxs("div",{className:"flex items-center justify-between px-2 py-1 rounded hover:bg-slate-100 dark:hover:bg-slate-700 group",children:[n.jsx("button",{className:"flex-1 text-left text-xs text-slate-900 dark:text-slate-300",onClick:()=>{Sl(S.value)},children:S.label}),S.deletable&&n.jsx("button",{className:"ml-1 w-4 h-4 flex items-center justify-center hover:bg-red-100 dark:hover:bg-red-900 rounded text-red-500 text-xs font-bold opacity-0 group-hover:opacity-100 transition-opacity",onClick:L=>{L.stopPropagation(),hd(S.value)},title:"Delete timeframe",children:""})]},S.value)),n.jsx("div",{className:"border-t border-slate-200 dark:border-slate-600 mt-1 pt-1",children:n.jsx("button",{className:"w-full text-left px-2 py-1 rounded hover:bg-slate-100 dark:hover:bg-slate-700 text-xs text-slate-900 dark:text-slate-300",onClick:()=>Kd(!0),children:"+ Add Custom"})})]})})]}),n.jsx(H,{onClick:dc,disabled:!ir||!ir.candles||ir.candles.length===0,variant:ln>0?"default":"outline",size:"sm",className:`h-7 px-2 transition-all duration-300 ${ln>0?"bg-purple-600 hover:bg-purple-700 text-white shadow-lg border-purple-500":"border-purple-300 dark:border-purple-600 text-purple-700 dark:text-purple-300 hover:bg-purple-50 dark:hover:bg-purple-900"}`,title:ln>0?`Mode ${ln}: ${["","Inverted","Reversed","Inverted+Reversed","H-Flip","Mock"][ln]}`:"Chart Transformation","data-testid":"button-trade-transform",children:n.jsx(Hk,{className:`h-3 w-3 ${ln>0?"animate-pulse":""}`})}),n.jsx(H,{onClick:Bl,disabled:la.isPending,size:"sm",className:"h-7 px-2 bg-green-600 hover:bg-green-700",title:la.isPending?"Fetching...":"Fetch Data","data-testid":"button-trade-fetch",children:la.isPending?n.jsx("div",{className:"animate-spin w-3 h-3 border-2 border-white border-t-transparent rounded-full"}):n.jsx(hl,{className:"h-3 w-3"})}),n.jsx(H,{onClick:gh,disabled:!ir||!ir.candles||ir.candles.length===0,variant:"outline",size:"sm",className:"h-7 px-2 border-slate-600 text-slate-300 hover:bg-slate-700",title:"Download OHLC CSV","data-testid":"button-trade-export",children:n.jsx(zk,{className:"h-3 w-3"})})]})}),la.isPending?n.jsx("div",{className:"h-32 flex items-center justify-center",children:n.jsxs("div",{className:"text-slate-400 text-sm flex items-center gap-2",children:[n.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-slate-600 border-t-purple-500 rounded-full"}),"Loading OHLC data..."]})}):ir&&ir.candles&&ir.candles.length>0?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-400 border-b border-slate-700 pb-2 mb-2",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"font-medium text-white",children:Qt||"NIFTY50"}),n.jsx("span",{className:"text-orange-400",children:is}),n.jsxs("span",{children:[ir.candles.length," candles"]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("span",{children:["Range: ",n.jsxs("span",{className:"text-slate-300",children:["",(Math.max(...ir.candles.map(S=>S.high||0))-Math.min(...ir.candles.map(S=>S.low||1/0))).toFixed(2)]})]}),n.jsxs("span",{className:((Io=ir.candles[ir.candles.length-1])==null?void 0:Io.close)>=((Mi=ir.candles[0])==null?void 0:Mi.open)?"text-green-400":"text-red-400",children:[((vg=ir.candles[ir.candles.length-1])==null?void 0:vg.close)>=((_f=ir.candles[0])==null?void 0:_f.open)?"+":"",((((Ym=ir.candles[ir.candles.length-1])==null?void 0:Ym.close)-((wh=ir.candles[0])==null?void 0:wh.open))/((Mo=ir.candles[0])==null?void 0:Mo.open)*100).toFixed(2),"%"]})]})]}),n.jsx("div",{className:"overflow-x-auto overflow-y-auto max-h-48 border border-slate-700 rounded-lg custom-thin-scrollbar",children:n.jsxs("table",{className:"w-full text-xs",children:[n.jsx("thead",{className:"sticky top-0 bg-slate-800 z-10",children:n.jsxs("tr",{className:"border-b border-slate-700",children:[n.jsx("th",{className:"text-left px-2 py-1.5 text-slate-400 font-medium",children:"Time"}),n.jsx("th",{className:"text-right px-2 py-1.5 text-slate-400 font-medium",children:"Open"}),n.jsx("th",{className:"text-right px-2 py-1.5 text-green-400 font-medium",children:"High"}),n.jsx("th",{className:"text-right px-2 py-1.5 text-red-400 font-medium",children:"Low"}),n.jsx("th",{className:"text-right px-2 py-1.5 text-purple-400 font-medium",children:"Close"}),n.jsx("th",{className:"text-right px-2 py-1.5 text-slate-400 font-medium",children:"Volume"})]})}),n.jsx("tbody",{children:ir.candles.map((S,L)=>{var ve,Ge,Qe,ht;const D=new Date(S.timestamp*1e3),q=D.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",timeZone:"Asia/Kolkata"}),fe=D.toLocaleDateString("en-IN",{day:"2-digit",month:"short",timeZone:"Asia/Kolkata"}),Se=S.close>=S.open;return n.jsxs("tr",{className:`border-b border-slate-700/50 hover:bg-slate-700/30 ${L%2===0?"bg-slate-800/30":""}`,"data-testid":`row-ohlc-candle-${L}`,children:[n.jsxs("td",{className:"px-2 py-1 text-slate-300 font-mono whitespace-nowrap",children:[n.jsx("span",{className:"text-slate-500",children:fe})," ",q]}),n.jsxs("td",{className:"text-right px-2 py-1 text-white font-mono",children:["",(ve=S.open)==null?void 0:ve.toFixed(2)]}),n.jsxs("td",{className:"text-right px-2 py-1 text-green-400 font-mono",children:["",(Ge=S.high)==null?void 0:Ge.toFixed(2)]}),n.jsxs("td",{className:"text-right px-2 py-1 text-red-400 font-mono",children:["",(Qe=S.low)==null?void 0:Qe.toFixed(2)]}),n.jsxs("td",{className:`text-right px-2 py-1 font-mono font-medium ${Se?"text-green-400":"text-red-400"}`,children:["",(ht=S.close)==null?void 0:ht.toFixed(2)]}),n.jsx("td",{className:"text-right px-2 py-1 text-slate-400 font-mono",children:S.volume?S.volume.toLocaleString():"-"})]},L)})})]})})]}):n.jsxs("div",{className:"h-24 flex flex-col items-center justify-center",children:[n.jsx("p",{className:"text-sm text-slate-400",children:"No OHLC data loaded"}),n.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:['Click "Fetch" to load ',is," data"]})]})]})]})})]})}),n.jsx("div",{className:"flex-[25] bg-muted/30",children:n.jsxs("div",{className:"h-full flex flex-col",children:[!cs&&n.jsx("div",{className:"flex-1 border-b border-border p-3 overflow-hidden",children:n.jsx(St,{className:"h-full bg-slate-900 dark:bg-slate-900 border-slate-700",children:n.jsxs(Kt,{className:"p-4 h-full flex flex-col",children:[n.jsx("h3",{className:"text-base font-semibold mb-3 text-white",children:"Watchlist"}),n.jsx("div",{className:"flex-1 space-y-2 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-600 scrollbar-track-slate-800",children:Array.isArray(Ps)&&Ps.map((S,L)=>{const D=fh[S],q=Zo[S],fe=D||q,Se=fe?{price:fe.price,change:fe.change,changePercent:fe.changePercent,isPositive:fe.isPositive,volume:fe.volume,isLastTraded:fe.isLastTraded||!1}:{price:0,changePercent:0,isPositive:!0,isLastTraded:!1};return n.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-800/50 rounded hover-elevate",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-xs font-medium text-slate-200",children:S}),n.jsx("span",{className:"text-[10px] text-slate-400",children:"NSE"})]}),n.jsx("div",{className:"flex flex-col items-end",children:fe?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsxs("span",{className:"text-xs font-mono text-white",children:["",Se.price.toLocaleString("en-IN",{minimumFractionDigits:2})]}),Se.isLastTraded?n.jsx("div",{className:"w-1 h-1 bg-orange-500 rounded-full"}):n.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full animate-pulse"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsxs("span",{className:`text-[10px] ${Se.isPositive?"text-green-400":"text-red-400"}`,children:[Se.isPositive?"+":"",Se.changePercent.toFixed(2),"%"]}),Se.isPositive?n.jsx(Gn,{className:"w-2 h-2 text-green-400"}):n.jsx($c,{className:"w-2 h-2 text-red-400"})]}),(fe==null?void 0:fe.isMarketOpen)===!1&&n.jsx("span",{className:"text-[10px] text-gray-400",children:"Market Closed"})]}):n.jsxs("div",{className:"flex flex-col items-end",children:[n.jsx("div",{className:"animate-pulse bg-slate-600 h-3 w-12 rounded mb-1"}),n.jsx("span",{className:"text-[10px] text-slate-500",children:"Loading..."})]})})]},L)})})]})})}),n.jsx("div",{className:`${cs||ts?"h-full":"flex-1"} p-3 overflow-hidden`,children:n.jsx(St,{className:"bg-slate-900 dark:bg-slate-900 border-slate-700 h-full",children:n.jsxs(Kt,{className:"p-4 h-full flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h3",{className:"text-lg font-semibold text-white",children:ts?" Visual AI":cs?"AI":"Notes AI"}),cs&&!ts&&n.jsx(Sr,{variant:"secondary",className:"text-xs bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",children:"Social Feed AI"}),ts&&n.jsx(Sr,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:"Chart Analysis"})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(H,{size:"sm",variant:"ghost",onClick:()=>od(!ts),className:`text-xs h-8 px-2 py-0 ${ts?"text-blue-400 hover:text-blue-300 hover:bg-blue-950":"text-gray-400 hover:text-white hover:bg-slate-800"}`,"data-testid":"button-toggle-visual-ai",title:ts?"Switch to Notes AI":"Switch to Visual AI",children:ts?n.jsx(Yk,{className:"w-4 h-4"}):n.jsx(Wk,{className:"w-4 h-4"})}),n.jsxs(H,{size:"sm",variant:cs?"default":"ghost",onClick:()=>ad(!cs),className:`text-xs h-8 px-2 py-0 ${cs?"bg-purple-600 hover:bg-purple-700 text-white":"text-gray-400 hover:text-white hover:bg-slate-800"}`,"data-testid":"button-toggle-ai",children:[n.jsx(Oc,{className:"w-6 h-6 mr-1"}),"AI"]}),!cs&&!ts&&(Zd?n.jsxs(n.Fragment,{children:[n.jsxs(H,{size:"sm",variant:"ghost",onClick:As,className:"text-xs text-red-400 hover:text-red-300 hover:bg-red-950 h-6 px-2","data-testid":"button-cancel-notes",children:[n.jsx(Wr,{className:"w-3 h-3 mr-1"}),"Cancel"]}),n.jsxs(H,{size:"sm",onClick:el,className:"text-xs bg-green-600 hover:bg-green-700 text-white h-6 px-2","data-testid":"button-save-notes",children:[n.jsx(hl,{className:"w-3 h-3 mr-1"}),"Save"]})]}):n.jsxs(H,{size:"sm",variant:"ghost",onClick:Fn,className:"text-xs text-gray-400 hover:text-white hover:bg-slate-800 h-6 px-2","data-testid":"button-edit-notes",children:[n.jsx(Bh,{className:"w-3 h-3 mr-1"}),"Edit"]}))]})]}),n.jsx("div",{className:"h-96",children:ts?n.jsx("div",{className:"h-full overflow-y-auto relative",children:n.jsxs("div",{className:"flex flex-col min-h-full",children:[n.jsx("div",{className:"h-80 flex-shrink-0",children:n.jsx(JL,{height:320,selectedPoints:Or||[],onPointsChange:S=>{Da(S),console.log(" Blackboard points updated:",S)},onReset:()=>Da([]),isExpanded:!0})}),n.jsx("div",{className:"w-full h-px bg-gradient-to-r from-transparent via-slate-500 to-transparent my-4"}),n.jsxs("div",{className:"px-4 py-3 bg-slate-800/30 border border-slate-600/20 rounded-lg mb-4",children:[n.jsxs("div",{className:"text-xs font-medium text-orange-400 mb-3 flex items-center gap-2",children:[n.jsx("span",{className:"w-2 h-2 bg-orange-400 rounded-full"}),"Point Management"]}),Or&&Or.length>0?n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"max-h-32 overflow-y-auto space-y-2",children:Or.map((S,L)=>n.jsxs("div",{className:"flex items-center gap-2 text-xs bg-slate-700/50 p-2 rounded",children:[n.jsxs("span",{className:"text-yellow-400 min-w-[20px] font-medium",children:["#",S.pointNumber]}),n.jsxs("span",{className:"text-white min-w-[60px]",children:["",S.price.toFixed(2)]}),n.jsxs("select",{value:S.label||"",onChange:D=>{window.labelPoint&&window.labelPoint(S.pointNumber,D.target.value||null)},className:"bg-slate-600 text-white px-2 py-1 rounded text-xs border-none flex-1","data-testid":`select-point-label-${S.pointNumber}`,children:[n.jsx("option",{value:"none",children:"Select Label"}),n.jsx("option",{value:"Entry",children:" Entry"}),n.jsx("option",{value:"SL",children:" Stop Loss"}),n.jsx("option",{value:"Target",children:" Target"}),n.jsx("option",{value:"Breakout",children:" Breakout"})]}),S.label&&n.jsx("button",{onClick:()=>{window.addHorizontalRay&&window.addHorizontalRay(S.price,S.label,S.pointNumber)},className:"bg-orange-600 hover:bg-orange-500 text-white px-2 py-1 rounded text-xs","data-testid":`button-add-ray-${S.pointNumber}`,children:""})]},L))}),n.jsxs("div",{className:"border-t border-slate-600/50 pt-3",children:[n.jsx("div",{className:"text-white text-xs font-medium mb-2",children:"Quick Ray Add:"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>{window.setIsAddingRay&&window.setIsAddingRay("SL")},className:"px-3 py-1 rounded text-xs bg-red-700 hover:bg-red-600 text-white","data-testid":"button-add-sl-ray",children:" SL"}),n.jsx("button",{onClick:()=>{window.setIsAddingRay&&window.setIsAddingRay("Target")},className:"px-3 py-1 rounded text-xs bg-green-700 hover:bg-green-600 text-white","data-testid":"button-add-target-ray",children:" Target"}),n.jsx("button",{onClick:()=>{window.setIsAddingRay&&window.setIsAddingRay("Breakout")},className:"px-3 py-1 rounded text-xs bg-orange-700 hover:bg-orange-600 text-white","data-testid":"button-add-breakout-ray",children:" Breakout"})]})]}),Ln&&Ln.length>0&&n.jsxs("div",{className:"border-t border-slate-600/50 pt-3",children:[n.jsx("div",{className:"text-white text-xs font-medium mb-2",children:"Active Rays:"}),n.jsx("div",{className:"max-h-20 overflow-y-auto space-y-1",children:Ln.reduce((L,D)=>(L.find(fe=>fe.label===D.label&&Math.abs(fe.price-D.price)<.01)||L.push(D),L),[]).map(L=>n.jsxs("div",{className:"flex items-center gap-2 text-xs bg-slate-700/30 p-2 rounded",children:[n.jsx("span",{style:{color:L.color},className:"min-w-[50px] font-medium",children:L.label}),n.jsxs("span",{className:"text-white",children:["",L.price.toFixed(2)]}),L.pointNumber&&n.jsxs("span",{className:"text-yellow-400",children:["#",L.pointNumber]}),n.jsx("button",{onClick:()=>{window.removeHorizontalRay&&window.removeHorizontalRay(L.id)},className:"bg-red-600 hover:bg-red-500 text-white px-2 py-1 rounded text-xs ml-auto","data-testid":`button-remove-ray-${L.id}`,children:""})]},L.id))})]})]}):n.jsx("div",{className:"text-xs text-slate-400 text-center py-4",children:"Click on the chart below to add manual points for pattern analysis"})]}),Or&&Or.length>=2&&n.jsxs("div",{className:"px-4 py-3 bg-slate-900/40 border border-blue-600/20 rounded-lg mb-4",children:[n.jsxs("div",{className:"text-xs font-medium text-blue-400 mb-3 flex items-center gap-2",children:[n.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full"}),"Smart Pattern Analysis"]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("div",{className:"text-xs text-slate-300 mb-2",children:"Point Relationships:"}),n.jsx("div",{className:"bg-slate-800/50 p-3 rounded text-xs font-mono",children:(()=>{const S=[...Or].sort((D,q)=>D.pointNumber-q.pointNumber),L=[];for(let D=0;D<S.length;D++){const q=S[D],fe=S[D+1];if(fe){const Se=q.price>fe.price?">":"<",ve=Se===">"?"text-red-400":"text-green-400";L.push(n.jsxs("span",{className:ve,children:[q.pointNumber,Se,fe.pointNumber]},`${q.pointNumber}-${fe.pointNumber}`))}}if(S.length>2){const D=S[S.length-1],q=S[0],fe=D.price>q.price?">":"<",Se=fe===">"?"text-red-400":"text-green-400";L.push(n.jsxs("span",{className:Se,children:[D.pointNumber,fe,q.pointNumber]},`${D.pointNumber}-${q.pointNumber}`))}return L.map((D,q)=>n.jsxs("span",{children:[D,q<L.length-1&&n.jsx("span",{className:"text-slate-500",children:", "})]},q))})()})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("div",{className:"text-xs text-slate-300",children:"Active Pattern Structure:"}),n.jsxs("div",{className:"flex gap-2",children:[!Hn&&Or.length>0&&n.jsx("button",{onClick:()=>{const S=Or.slice(0,-1);Da(S),window.selectedPoints=S,window.dispatchEvent(new CustomEvent("visualAIPointsUpdated",{detail:{selectedPoints:S,horizontalRays:Ln}})),console.log(` Deleted last point. Remaining: ${S.length} points`)},className:"bg-red-600 hover:bg-red-500 text-white px-2 py-1 rounded text-xs font-medium","data-testid":"button-delete-point",children:" Delete"}),Ln&&Ln.length>0&&Or.length>=3&&n.jsx("button",{onClick:()=>{const S=prompt("Enter pattern name:");S&&S.trim()&&Fm(S.trim())},className:"bg-green-600 hover:bg-green-500 text-white px-3 py-1 rounded text-xs font-medium","data-testid":"button-save-pattern",children:" Save"})]})]}),n.jsx("div",{className:"bg-slate-800/50 p-3 rounded",children:(()=>{if(!Ln||Ln.length===0)return n.jsx("div",{className:"text-xs text-slate-400 italic",children:"Use Quick Ray buttons or label points to create your pattern structure"});const S=Ln.reduce((fe,Se)=>(fe[Se.label]||(fe[Se.label]=Se),fe),{}),L=S.SL,D=S.Breakout,q=S.Target;return n.jsxs("div",{className:"space-y-2",children:[L&&n.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[n.jsxs("span",{className:"text-red-400 font-medium",children:[" SL-",L.pointNumber||"Ray"]}),n.jsxs("span",{className:"text-slate-400",children:["",L.price.toFixed(2)]})]}),D&&n.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[n.jsxs("span",{className:"text-orange-400 font-medium",children:[" Breakout-",D.pointNumber||"Ray"]}),n.jsxs("span",{className:"text-slate-400",children:["",D.price.toFixed(2)]})]}),q&&n.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[n.jsxs("span",{className:"text-green-400 font-medium",children:[" Target-",q.pointNumber||"Ray"]}),n.jsxs("span",{className:"text-slate-400",children:["",q.price.toFixed(2)]})]}),!L&&!D&&!q&&n.jsx("div",{className:"text-xs text-slate-400 italic",children:"No SL, Breakout, or Target rays assigned yet"})]})})()})]}),Or.length>=3&&n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-slate-300 mb-2",children:"Pattern Metrics:"}),n.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs",children:(()=>{const S=[...Or].sort((ve,Ge)=>ve.pointNumber-Ge.pointNumber),L=S.map(ve=>ve.price),D=Math.max(...L)-Math.min(...L),q=L.reduce((ve,Ge)=>ve+Ge,0)/L.length,fe=(D/q*100).toFixed(1),Se=(D*.6/(D*.3)).toFixed(1);return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-slate-700/30 p-2 rounded",children:[n.jsx("span",{className:"text-slate-400",children:"Range:"}),n.jsxs("span",{className:"text-white ml-1",children:["",D.toFixed(2)]})]}),n.jsxs("div",{className:"bg-slate-700/30 p-2 rounded",children:[n.jsx("span",{className:"text-slate-400",children:"Volatility:"}),n.jsxs("span",{className:`ml-1 ${parseFloat(fe)>2?"text-red-400":"text-green-400"}`,children:[fe,"%"]})]}),n.jsxs("div",{className:"bg-slate-700/30 p-2 rounded",children:[n.jsx("span",{className:"text-slate-400",children:"R:R Ratio:"}),n.jsxs("span",{className:"text-blue-400 ml-1",children:["1:",Se]})]}),n.jsxs("div",{className:"bg-slate-700/30 p-2 rounded",children:[n.jsx("span",{className:"text-slate-400",children:"Points:"}),n.jsx("span",{className:"text-yellow-400 ml-1",children:S.length})]})]})})()})]})]}),n.jsxs("div",{className:"px-4 py-3 bg-slate-800/50 border border-slate-600/30 rounded-lg",children:[n.jsxs("div",{className:"text-xs font-medium text-blue-400 mb-2 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse"}),"AI Chart Analysis"]}),n.jsx("div",{className:"flex items-center gap-1 bg-slate-700 rounded p-1",children:n.jsx("span",{className:"h-5 px-2 text-[10px] bg-blue-600 text-white rounded text-center flex items-center",children:" Candles"})})]}),n.jsxs("div",{className:"text-xs text-slate-300 leading-relaxed space-y-2",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-slate-400",children:"Period:"})," "," ",n.jsx("span",{className:"text-white font-medium",children:`${(()=>{switch(r){case"1":return"1min";case"5":return"5min";case"15":return"15min";case"30":return"30min";case"60":return"1hr";case"240":return"4hr";case"1440":return"1d";default:return r}})()} Timeframe`}),n.jsxs("span",{className:"ml-2 text-slate-400",children:["(",((pd=rt==null?void 0:rt.candles)==null?void 0:pd.length)||0," candles)"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-slate-400",children:"Price Movement:"})," "," ",(()=>{var Se,ve,Ge,Qe,ht,Et,Pt,rr,hr;if(!Pr||!((Se=rt==null?void 0:rt.candles)!=null&&Se.length)){const Tt=(rt==null?void 0:rt.candles)||[];if(Tt.length===0)return n.jsx("span",{className:"text-slate-500",children:"No data available"});const $t=((ve=Tt[0])==null?void 0:ve.close)||((Ge=Tt[0])==null?void 0:Ge.price)||0,vs=((Qe=Tt[Tt.length-1])==null?void 0:Qe.close)||((ht=Tt[Tt.length-1])==null?void 0:ht.price)||0,er=vs-$t,On=$t?(er/$t*100).toFixed(2):"0.00";return n.jsxs("span",{className:er>=0?"text-green-400 font-medium":"text-red-400 font-medium",children:["",$t.toFixed(2),"  ",vs.toFixed(2)," (",er>=0?"+":"",On,"%)"]})}const S=Oa(rt.candles,Pr);if(S.length===0)return n.jsx("span",{className:"text-slate-500",children:"No data in range"});const L=((Et=S[0])==null?void 0:Et.close)||((Pt=S[0])==null?void 0:Pt.price)||0,D=((rr=S[S.length-1])==null?void 0:rr.close)||((hr=S[S.length-1])==null?void 0:hr.price)||0,q=D-L,fe=L?(q/L*100).toFixed(2):"0.00";return n.jsxs("span",{className:q>=0?"text-green-400 font-medium":"text-red-400 font-medium",children:["",L.toFixed(2),"  ",D.toFixed(2)," (",q>=0?"+":"",fe,"%)"]})})()]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-slate-400",children:"Active Indicators:"})," "," ",Object.keys(sn).length>0?n.jsx("span",{className:"text-purple-400 font-medium",children:Object.entries(sn).map(([S,L])=>`${S.toUpperCase()}(${L.length})`).join(", ")}):n.jsx("span",{className:"text-slate-500",children:"None applied"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-slate-400",children:"Trend Analysis:"})," "," ",(()=>{const S=Pr?Oa((rt==null?void 0:rt.candles)||[],Pr):(rt==null?void 0:rt.candles)||[];if(S.length<3)return n.jsx("span",{className:"text-slate-500",children:"Insufficient data"});const D=S.slice(-3).map(Se=>Se.close||Se.price||0),q=D[2]>D[1]&&D[1]>D[0]?"Bullish":D[2]<D[1]&&D[1]<D[0]?"Bearish":"Sideways",fe=q==="Bullish"?"text-green-400":q==="Bearish"?"text-red-400":"text-yellow-400";return n.jsxs("span",{className:`${fe} font-medium`,children:[q," momentum detected"]})})()]})]})]})]})}):cs?n.jsxs("div",{className:"h-full flex flex-col",children:[n.jsx("div",{className:"flex-1 max-h-80 overflow-y-auto p-3 space-y-3 bg-slate-800 rounded-lg border border-slate-700",children:jf.length===0?n.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400 mt-2",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("h4",{className:"text-xs font-semibold text-purple-600 dark:text-purple-400 mb-2",children:" Social Feed Stocks"}),n.jsx("div",{className:"flex flex-wrap gap-1 justify-center mb-3",children:Array.isArray(zr)&&zr.map(S=>n.jsx(Sr,{variant:"outline",className:"text-[10px] px-2 py-1 bg-green-50 text-green-700 border-green-200 dark:bg-green-900 dark:text-green-300 dark:border-green-700",children:S},S))})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[n.jsx(H,{variant:"outline",size:"sm",onClick:()=>dn("generate strategy code"),className:"text-[10px] h-6 px-2 bg-purple-50 hover:bg-purple-100 text-purple-700 border-purple-200 dark:bg-purple-900 dark:hover:bg-purple-800 dark:text-purple-300 dark:border-purple-700 rounded-lg",children:" Generate strategy code"}),n.jsx(H,{variant:"outline",size:"sm",onClick:()=>dn("emi code"),className:"text-[10px] h-6 px-2 bg-green-50 hover:bg-green-100 text-green-700 border-green-200 dark:bg-green-900 dark:hover:bg-green-800 dark:text-green-300 dark:border-green-700 rounded-lg",children:" EMI code"}),n.jsx(H,{variant:"outline",size:"sm",onClick:()=>dn("rsi,ema code"),className:"text-[10px] h-6 px-2 bg-blue-50 hover:bg-blue-100 text-blue-700 border-blue-200 dark:bg-blue-900 dark:hover:bg-blue-800 dark:text-blue-300 dark:border-blue-700 rounded-lg",children:" RSI,EMA code"}),n.jsx(H,{variant:"outline",size:"sm",onClick:()=>dn("show performance"),className:"text-[10px] h-6 px-2 bg-orange-50 hover:bg-orange-100 text-orange-700 border-orange-200 dark:bg-orange-900 dark:hover:bg-orange-800 dark:text-orange-300 dark:border-orange-700 rounded-lg",children:" Show performance"})]})]}):jf.map((S,L)=>n.jsx("div",{className:`flex ${S.role==="user"?"justify-end":"justify-start"}`,children:n.jsx("div",{className:`max-w-[80%] p-2 rounded-lg text-xs relative ${S.role==="user"?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white":"bg-gradient-to-r from-slate-700 to-slate-800 text-slate-100 border border-indigo-600/20"}`,children:S.isLoading?n.jsxs("div",{className:"flex items-center gap-3 py-2 px-4 bg-gradient-to-r from-slate-800 to-slate-700 border border-purple-500/30 rounded-lg animate-pulse",children:[n.jsxs("div",{className:"flex gap-1",children:[n.jsx("div",{className:"w-2.5 h-2.5 bg-gradient-to-r from-purple-400 to-blue-400 rounded-full animate-pulse"}),n.jsx("div",{className:"w-2.5 h-2.5 bg-gradient-to-r from-blue-400 to-indigo-400 rounded-full animate-pulse",style:{animationDelay:"200ms"}}),n.jsx("div",{className:"w-2.5 h-2.5 bg-gradient-to-r from-indigo-400 to-purple-400 rounded-full animate-pulse",style:{animationDelay:"400ms"}})]}),n.jsx("span",{className:"text-xs text-slate-300 font-medium animate-pulse",children:"BATTU AI is thinking..."})]}):S.isStockMessage&&S.stocks?n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"text-xs text-slate-200 mb-3",children:S.content}),S.stocks.map((D,q)=>n.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-800 rounded border border-slate-600 text-xs",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium text-white",children:D.symbol}),n.jsx("span",{className:"text-[10px] text-slate-400",children:D.exchange})]}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsxs("span",{className:"font-bold text-white",children:["",D.price.toLocaleString("en-IN",{minimumFractionDigits:2})]}),n.jsxs("span",{className:`text-[10px] font-medium ${D.changePercentage>=0?"text-green-400":"text-red-400"}`,children:[D.changePercentage>=0?"+":"",D.change.toFixed(2)," ",D.changePercentage>=0?"+":"",D.changePercentage.toFixed(2),"%"]})]})]}),n.jsx(H,{size:"sm",variant:"outline",onClick:()=>su(D.symbol),disabled:Array.isArray(zr)&&zr.includes(D.symbol),className:"text-[10px] h-6 px-2 ml-2 text-orange-600 border-orange-600 hover:bg-orange-100 dark:text-orange-400 dark:border-orange-400 dark:hover:bg-orange-900 disabled:opacity-50 disabled:cursor-not-allowed","data-testid":`button-add-${D.symbol}`,children:Array.isArray(zr)&&zr.includes(D.symbol)?"":"+"})]},q)),n.jsx("div",{className:"mt-3 pt-2 border-t border-slate-600",children:n.jsx(H,{size:"sm",variant:"outline",onClick:()=>Cf(S.stocks.map(D=>D.symbol)),className:"text-[10px] h-6 px-3 w-full text-orange-600 border-orange-600 hover:bg-orange-100 dark:text-orange-400 dark:border-orange-400 dark:hover:bg-orange-900","data-testid":"button-add-all-stocks",children:"+ Add All Stocks to Feed"})}),S.role==="assistant"&&n.jsxs("div",{className:"absolute bottom-2 right-2 flex gap-2",children:[n.jsx(H,{variant:"ghost",size:"sm",onClick:()=>{const D=S.content+`

`+S.stocks.map(q=>`${q.symbol}: ${q.price} (${q.changePercentage>=0?"+":""}${q.changePercentage.toFixed(2)}%)`).join(`
`);navigator.clipboard.writeText(D)},className:"h-5 w-5 p-1 text-slate-400 hover:text-slate-200 hover:bg-slate-600",children:n.jsx(Bi,{className:"w-2.5 h-2.5"})}),n.jsx(H,{variant:"ghost",size:"sm",className:"h-5 w-5 p-1 text-slate-400 hover:text-slate-200 hover:bg-slate-600",children:n.jsx(iN,{className:"w-2.5 h-2.5"})})]}),S.role==="assistant"&&n.jsxs("div",{className:"flex flex-wrap gap-1 mt-3 pt-2 border-t border-slate-600",children:[n.jsx(H,{variant:"outline",size:"sm",onClick:()=>dn("Analyze RELIANCE stock"),className:"text-[9px] h-5 px-1.5 bg-blue-50 hover:bg-blue-100 text-blue-700 border-blue-200 dark:bg-blue-900 dark:hover:bg-blue-800 dark:text-blue-300 dark:border-blue-700 rounded-md",children:" Analyze RELIANCE stock"}),n.jsx(H,{variant:"outline",size:"sm",onClick:()=>dn("Market news today"),className:"text-[9px] h-5 px-1.5 bg-green-50 hover:bg-green-100 text-green-700 border-green-200 dark:bg-green-900 dark:hover:bg-green-800 dark:text-green-300 dark:border-green-700 rounded-md",children:" Market news today"}),n.jsx(H,{variant:"outline",size:"sm",onClick:()=>dn("Best stocks to buy"),className:"text-[9px] h-5 px-1.5 bg-purple-50 hover:bg-purple-100 text-purple-700 border-purple-200 dark:bg-purple-900 dark:hover:bg-purple-800 dark:text-purple-300 dark:border-purple-700 rounded-md",children:" Best stocks to buy"}),n.jsx(H,{variant:"outline",size:"sm",onClick:()=>dn("Upcoming IPOs"),className:"text-[9px] h-5 px-1.5 bg-orange-50 hover:bg-orange-100 text-orange-700 border-orange-200 dark:bg-orange-900 dark:hover:bg-orange-800 dark:text-orange-300 dark:border-orange-700 rounded-md",children:" Upcoming IPOs"}),n.jsx(H,{variant:"outline",size:"sm",onClick:()=>dn("Bond market trends"),className:"text-[9px] h-5 px-1.5 bg-indigo-50 hover:bg-indigo-100 text-indigo-700 border-indigo-200 dark:bg-indigo-900 dark:hover:bg-indigo-800 dark:text-indigo-300 dark:border-indigo-700 rounded-md",children:" Bond market trends"})]})]}):n.jsxs("div",{children:[S.role==="assistant"?n.jsx("div",{className:"space-y-2",children:tl(S.content).map((D,q)=>n.jsx("div",{children:D.type==="text"?n.jsx("div",{className:"bg-slate-700 text-gray-200 px-3 py-2 rounded-lg text-sm whitespace-pre-wrap",children:D.content}):n.jsxs("div",{className:"bg-slate-900 border border-slate-600 rounded-lg overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between bg-slate-800 px-3 py-2 border-b border-slate-600",children:[n.jsx("span",{className:"text-xs text-gray-400 font-mono",children:"Strategy Code"}),n.jsx(H,{size:"sm",variant:"ghost",onClick:()=>Qr(D.content,L*100+q),className:"h-6 px-2 text-xs text-gray-400 hover:text-white hover:bg-slate-700",children:fc===L*100+q?n.jsxs(n.Fragment,{children:[n.jsx(hl,{className:"w-3 h-3 mr-1"}),"Copied!"]}):n.jsxs(n.Fragment,{children:[n.jsx(Bi,{className:"w-3 h-3 mr-1"}),"Copy"]})})]}),n.jsx("div",{className:"p-4 h-32 overflow-y-auto",children:n.jsx("pre",{className:"text-sm text-gray-100 font-mono whitespace-pre-wrap leading-relaxed tracking-wide break-all",children:D.content})})]})},q))}):n.jsx("div",{className:"mb-2 pr-16",children:S.content}),S.role==="assistant"&&S.newsData&&S.newsData.stocks&&n.jsxs("div",{className:"mt-4 space-y-2",children:[S.newsData.stocks.map((D,q)=>{const fe=D.change&&D.change>=0?"text-green-400":"text-red-400",Se=D.change&&D.change>=0?"":"";return n.jsxs("div",{className:"bg-slate-800 border border-slate-600 rounded-lg p-3 flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-semibold text-white",children:D.symbol}),n.jsx("span",{className:"text-xs text-slate-400",children:D.exchange||"NSE"})]}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsxs("span",{className:"text-lg font-bold text-white",children:["",D.price]}),n.jsxs("span",{className:`text-sm ${fe} flex items-center gap-1`,children:[Se,D.change>=0?"+":"",D.change||0," ",D.changePercent>=0?"+":"",(D.changePercent||0).toFixed(2),"%"]})]})]}),n.jsx(H,{size:"sm",onClick:()=>su(D.symbol),className:"h-8 w-8 rounded-full bg-purple-600 hover:bg-purple-700 text-white p-0 flex items-center justify-center",children:n.jsx("span",{className:"text-lg font-bold",children:"+"})})]},q)}),n.jsx("div",{className:"mt-2 pt-2 border-t border-slate-600",children:n.jsxs(H,{onClick:()=>{const D=S.newsData.stocks.map(q=>q.symbol);Cf(D)},className:"w-full bg-purple-600 hover:bg-purple-700 text-white font-medium py-1.5 px-3 rounded text-sm flex items-center justify-center gap-1",children:[n.jsx("span",{className:"text-sm font-bold",children:"+"}),"Add All (",S.newsData.stocks.filter(D=>!(Array.isArray(zr)&&zr.includes(D.symbol))).length,")"]})})]}),S.role==="assistant"&&n.jsxs("div",{className:"absolute bottom-2 right-2 flex gap-2",children:[n.jsx(H,{variant:"ghost",size:"sm",onClick:()=>navigator.clipboard.writeText(S.content),className:"h-5 w-5 p-1 text-slate-400 hover:text-slate-200 hover:bg-slate-600",children:n.jsx(Bi,{className:"w-2.5 h-2.5"})}),n.jsx(H,{variant:"ghost",size:"sm",className:"h-5 w-5 p-1 text-slate-400 hover:text-slate-200 hover:bg-slate-600",children:n.jsx(iN,{className:"w-2.5 h-2.5"})})]}),S.role==="assistant"&&n.jsxs("div",{className:"flex flex-wrap gap-1 mt-3 pt-2 border-t border-slate-600",children:[n.jsx(H,{variant:"outline",size:"sm",onClick:()=>dn("generate strategy code"),className:"text-[9px] h-5 px-1.5 bg-purple-50 hover:bg-purple-100 text-purple-700 border-purple-200 dark:bg-purple-900 dark:hover:bg-purple-800 dark:text-purple-300 dark:border-purple-700 rounded-md",children:" Generate strategy code"}),n.jsx(H,{variant:"outline",size:"sm",onClick:()=>dn("emi code"),className:"text-[9px] h-5 px-1.5 bg-green-50 hover:bg-green-100 text-green-700 border-green-200 dark:bg-green-900 dark:hover:bg-green-800 dark:text-green-300 dark:border-green-700 rounded-md",children:" EMI code"}),n.jsx(H,{variant:"outline",size:"sm",onClick:()=>dn("rsi+ema code"),className:"text-[9px] h-5 px-1.5 bg-blue-50 hover:bg-blue-100 text-blue-700 border-blue-200 dark:bg-blue-900 dark:hover:bg-blue-800 dark:text-blue-300 dark:border-blue-700 rounded-md",children:" RSI+EMA code"}),n.jsx(H,{variant:"outline",size:"sm",onClick:()=>dn("show performance"),className:"text-[9px] h-5 px-1.5 bg-orange-50 hover:bg-orange-100 text-orange-700 border-orange-200 dark:bg-orange-900 dark:hover:bg-orange-800 dark:text-orange-300 dark:border-orange-700 rounded-md",children:" Show performance"}),n.jsx(H,{variant:"outline",size:"sm",onClick:()=>dn("optimize my strategy"),className:"text-[9px] h-5 px-1.5 bg-indigo-50 hover:bg-indigo-100 text-indigo-700 border-indigo-200 dark:bg-indigo-900 dark:hover:bg-indigo-800 dark:text-indigo-300 dark:border-indigo-700 rounded-md",children:" Optimize strategy"})]})]})})},L))}),n.jsxs("div",{className:"mt-2 flex gap-2",children:[n.jsx("input",{value:Ka,onChange:S=>dn(S.target.value),onKeyPress:S=>{S.key==="Enter"&&!xs&&Ka.trim()&&(So(L=>[...L,{role:"user",content:Ka}]),Qd(!0),Rl(Ka),dn(""))},placeholder:"Ask strategy AI: generate strategy code, show performance...",className:"flex-1 px-3 py-2 text-xs border border-slate-600 rounded-lg bg-slate-800 text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500",disabled:xs}),n.jsx(H,{size:"sm",onClick:()=>{Ka.trim()&&!xs&&(So(S=>[...S,{role:"user",content:Ka}]),Qd(!0),Rl(Ka),dn(""))},disabled:xs||!Ka.trim(),className:"h-8 px-3 bg-purple-600 hover:bg-purple-700 text-white text-xs",children:"Send"})]})]}):Zd?n.jsx("textarea",{value:Ta,onChange:S=>Ts(S.target.value),placeholder:"Write your trading notes, strategies, observations...",className:"w-full h-full p-3 text-sm border border-slate-600 rounded-lg bg-slate-800 text-white placeholder-slate-400 resize-none focus:outline-none focus:ring-2 focus:ring-blue-500","data-testid":"textarea-notes"}):n.jsx("div",{className:"h-full p-3 text-sm border border-slate-700 rounded-lg bg-slate-800 text-white overflow-y-auto",children:Ea?n.jsx("pre",{className:"whitespace-pre-wrap font-sans",children:Ea}):n.jsx("p",{className:"text-slate-400 italic",children:"No trading notes yet. Click Edit to add your first note."})})})]})})})]})})]}),n.jsxs(Kh,{value:"backtest",className:"p-6 flex gap-6",children:[n.jsxs("div",{className:"flex-1 space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-900 p-4 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[n.jsxs("div",{className:"relative flex-1 max-w-md",children:[n.jsx(Zl,{className:"absolute left-3 top-1/2 transform -y-1/2 text-gray-400 h-4 w-4"}),n.jsx(Nr,{placeholder:"Search strategy...",className:"pl-10 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700","data-testid":"input-search-strategy"})]}),n.jsx(H,{variant:"outline",size:"sm",className:"text-gray-600 dark:text-gray-300","data-testid":"button-sort-by",children:"Sort by"}),n.jsx(H,{variant:"outline",size:"sm",className:"text-gray-600 dark:text-gray-300","data-testid":"button-filters",children:"Filters"}),n.jsx(H,{variant:"outline",size:"sm",className:"text-gray-600 dark:text-gray-300","data-testid":"button-my-strategies",children:"My Strategies"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(H,{variant:"outline",size:"sm",className:"text-gray-600 dark:text-gray-300","data-testid":"button-visual-chart",onClick:()=>Ye(!0),children:"Visual Chart"}),n.jsx(H,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 border-red-200 hover:border-red-300","data-testid":"button-clear-all",onClick:he,children:" Clear All"}),n.jsx(H,{className:"bg-gray-800 hover:bg-gray-900 text-white","data-testid":"button-add-strategy",onClick:()=>te(!0),children:"+ Add Strategy"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[n.jsx(St,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:n.jsx(Kt,{className:"p-4",children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Strategy Performance"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:`w-2 h-2 rounded-full ${Zi.netPnL>=0?"bg-green-500":"bg-red-500"}`}),n.jsx("span",{className:"text-xs text-gray-500",children:Zi.netPnL>=0?"Profitable":"Not Profitable"})]})]}),n.jsx("div",{className:"h-20",children:n.jsx(yi,{width:"100%",height:"100%",children:n.jsxs(Bg,{data:(()=>{if(lt.length>0){let S=0;return lt.map((L,D)=>{var q;return S+=L.pnl,{trade:D+1,pnl:S,time:((q=L.crossingData)==null?void 0:q.time)||`T${D+1}`}})}else{const S=[{pnl:2850},{pnl:-1200},{pnl:1500},{pnl:-800},{pnl:3200},{pnl:-900},{pnl:1800},{pnl:-1500}];let L=0;return S.map((D,q)=>(L+=D.pnl,{trade:q+1,pnl:L,time:`T${q+1}`}))}})(),children:[n.jsx("defs",{children:n.jsxs("linearGradient",{id:"strategyPerformanceGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"5%",stopColor:Zi.netPnL>=0?"#16a34a":"#e5e7eb",stopOpacity:.8}),n.jsx("stop",{offset:"95%",stopColor:Zi.netPnL>=0?"#16a34a":"#e5e7eb",stopOpacity:.2})]})}),n.jsx(Sa,{dataKey:"trade",axisLine:!1,tickLine:!1,tick:!1,height:0}),n.jsx(ma,{axisLine:!1,tickLine:!1,tick:{fontSize:9,fill:"#9ca3af"},width:30,tickFormatter:S=>Math.abs(S)>=1e3?`${S>=0?"":"-"}${Math.abs(S/1e3).toFixed(0)}K`:S.toString()}),n.jsx(zs,{content:({active:S,payload:L,label:D})=>{if(S&&L&&L.length){const q=L[0].payload;return n.jsxs("div",{className:"bg-white dark:bg-gray-800 p-2 rounded border text-xs shadow-lg",children:[n.jsxs("p",{className:"font-medium",children:["Trade ",D]}),n.jsxs("p",{className:`${q.pnl>=0?"text-green-600":"text-red-600"}`,children:["",q.pnl.toLocaleString("en-IN")]}),n.jsx("p",{className:"text-gray-500",children:q.time})]})}return null}}),n.jsx(ec,{type:"monotone",dataKey:"pnl",stroke:Zi.netPnL>=0?"#16a34a":"#1f2937",strokeWidth:2,fill:"url(#strategyPerformanceGradient)",fillOpacity:1,dot:!1,activeDot:{r:3,fill:Zi.netPnL>=0?"#16a34a":"#dc2626"}}),n.jsx(nf,{y:0,stroke:"#9ca3af",strokeDasharray:"2 2",strokeWidth:1})]})})}),n.jsxs("p",{className:"text-xs text-gray-500",children:[lt.length>0?lt.length:nt.totalTrades," strategies tested"]})]})})}),n.jsx(St,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:n.jsx(Kt,{className:"p-4",children:n.jsxs("div",{className:"text-center space-y-3",children:[n.jsxs("div",{className:"relative w-20 h-20 mx-auto",children:[n.jsxs("svg",{className:"w-20 h-20 transform -rotate-90",viewBox:"0 0 80 80",children:[n.jsx("circle",{cx:"40",cy:"40",r:"36",stroke:"#e5e7eb",strokeWidth:"4",fill:"none"}),n.jsx("circle",{cx:"40",cy:"40",r:"36",stroke:"#374151",strokeWidth:"4",fill:"none",strokeDasharray:`${nt.winRate*2.26} ${226.2}`,className:nt.winRate>50?"text-green-500":"text-red-500"})]}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsxs("span",{className:"text-xl font-bold text-gray-800 dark:text-white",children:[nt.winRate,"%"]})})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"text-xs text-gray-500",children:"Win Rate"}),n.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Profitable trades"})]})]})})}),n.jsx(St,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:n.jsx(Kt,{className:"p-4",children:n.jsxs("div",{className:"space-y-3",children:[n.jsx("p",{className:"text-xs text-gray-500",children:"Active Strategies"}),n.jsxs("div",{className:"text-center",children:[n.jsx("span",{className:"text-lg font-bold text-gray-800 dark:text-white",children:nt.totalTrades}),n.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Total Trades"})]}),n.jsx("hr",{className:"border-gray-300 dark:border-gray-600"}),n.jsxs("div",{className:"text-center",children:[n.jsx("span",{className:"text-lg font-bold text-green-600",children:nt.totalTrades>0?lt.filter(S=>S.pnl>0).length:0}),n.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Win Trades"})]}),n.jsx("hr",{className:"border-gray-300 dark:border-gray-600"}),n.jsxs("div",{className:"text-center",children:[n.jsx("span",{className:"text-lg font-bold text-red-600",children:nt.totalTrades>0?lt.filter(S=>S.pnl<0).length:0}),n.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Loss Trades"})]})]})})}),n.jsx(St,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:n.jsx(Kt,{className:"p-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-xs text-gray-500",children:"Total Profit"}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"text-2xl font-bold text-green-600",children:["",nt.totalProfit.toFixed(2)]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Winning trades"}),n.jsx("span",{className:"text-xs text-green-600",children:""})]})]})]})})}),n.jsx(St,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:n.jsx(Kt,{className:"p-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-xs text-gray-500",children:"Total Loss"}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"text-2xl font-bold text-red-600",children:["",nt.totalLoss.toFixed(2)]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Losing trades"}),n.jsx("span",{className:"text-xs text-red-600",children:""})]})]})]})})}),n.jsx(St,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:n.jsx(Kt,{className:"p-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-xs text-gray-500",children:"Net P&L"}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("span",{className:`text-2xl font-bold ${nt.netPnL>=0?"text-green-600":"text-red-600"}`,children:["",nt.netPnL.toFixed(2)]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Overall"}),n.jsx("span",{className:`text-xs ${nt.netPnL>=0?"text-green-600":"text-red-600"}`,children:""})]})]})]})})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 dark:bg-gray-900 p-3 rounded-lg",children:[n.jsxs(wa,{open:wn,onOpenChange:nd,children:[n.jsx(Na,{asChild:!0,children:n.jsxs(H,{variant:"outline",role:"combobox","aria-expanded":wn,className:"w-40 h-8 justify-between bg-white dark:bg-black border-gray-300 dark:border-gray-700 text-gray-900 dark:text-white text-xs px-2",children:[Qt?((If=Cx.find(S=>S.value===Qt))==null?void 0:If.label)||Qt:"Select symbol...",n.jsx(yx,{className:"ml-1 h-3 w-3 shrink-0 opacity-50"})]})}),n.jsx(fa,{className:"w-72 p-0 bg-white dark:bg-black border-gray-300 dark:border-gray-700",children:n.jsxs(ZN,{children:[n.jsx(ej,{placeholder:"Search stocks...",value:cn,onValueChange:Ya,className:"text-xs bg-white dark:bg-black text-gray-900 dark:text-white border-none"}),n.jsxs(tj,{className:"bg-white dark:bg-black",children:[n.jsx(rj,{className:"text-gray-900 dark:text-white py-3 text-center text-xs",children:"No stock found."}),n.jsx(nj,{className:"bg-white dark:bg-black",children:Cx.filter(S=>S.label.toLowerCase().includes(cn.toLowerCase())||S.value.toLowerCase().includes(cn.toLowerCase())).map(S=>n.jsxs(sj,{value:S.value,onSelect:L=>{Gc(L===Qt?"":L),nd(!1),Ya("")},className:"flex items-center px-2 py-1.5 text-xs text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-900 cursor-pointer",children:[n.jsx(hl,{className:Ht("mr-2 h-3 w-3 flex-shrink-0",Qt===S.value?"opacity-100":"opacity-0")}),n.jsx("span",{className:"truncate",children:S.label})]},S.value))})]})]})})]}),n.jsxs(wa,{children:[n.jsx(Na,{asChild:!0,children:n.jsxs(H,{variant:"outline",className:"w-20 h-8 justify-between bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-slate-300 text-xs px-2",children:[((wc=yc().find(S=>S.value===is))==null?void 0:wc.label)||is,n.jsx(yx,{className:"ml-1 h-3 w-3 shrink-0 opacity-50"})]})}),n.jsx(fa,{className:"w-40 p-1 bg-white dark:bg-slate-800 border-gray-300 dark:border-slate-600",children:n.jsxs("div",{className:"grid gap-1",children:[yc().map(S=>n.jsxs("div",{className:"flex items-center justify-between px-2 py-1 rounded hover:bg-gray-100 dark:hover:bg-slate-700 group",children:[n.jsx("button",{className:"flex-1 text-left text-xs text-gray-900 dark:text-slate-300",onClick:()=>{Sl(S.value)},children:S.label}),S.deletable&&n.jsx("button",{className:"ml-1 w-4 h-4 flex items-center justify-center hover:bg-red-100 dark:hover:bg-red-900 rounded text-red-500 text-xs font-bold opacity-0 group-hover:opacity-100 transition-opacity",onClick:L=>{L.stopPropagation(),hd(S.value)},title:"Delete timeframe",children:""})]},S.value)),n.jsx("div",{className:"border-t border-gray-200 dark:border-slate-600 mt-1 pt-1",children:n.jsx("button",{className:"w-full text-left px-2 py-1 rounded hover:bg-gray-100 dark:hover:bg-slate-700 text-xs text-gray-900 dark:text-slate-300",onClick:()=>Kd(!0),children:"+ Add Custom"})})]})})]}),n.jsx(H,{onClick:()=>yf(!eh),variant:"outline",size:"sm",className:`h-8 px-2 border-gray-300 dark:border-slate-600 text-gray-700 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-slate-700 ${eh?"bg-gray-100 dark:bg-slate-700":""}`,title:"Select Date Range",children:n.jsx(wm,{className:"h-3 w-3"})})]}),eh&&n.jsxs("div",{className:"grid grid-cols-1 gap-3 mb-3 p-3 bg-gray-50 dark:bg-slate-800 rounded-lg border border-gray-200 dark:border-slate-600",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Un,{className:"text-gray-700 dark:text-slate-300 text-xs font-medium min-w-[40px]",children:"From:"}),n.jsx(Nr,{type:"date",value:Ys,onChange:S=>Om(S.target.value),className:"flex-1 h-8 bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-slate-300 text-xs"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Un,{className:"text-gray-700 dark:text-slate-300 text-xs font-medium min-w-[40px]",children:"To:"}),n.jsx(Nr,{type:"date",value:ps,onChange:S=>Xc(S.target.value),className:"flex-1 h-8 bg-white dark:bg-slate-700 border-gray-300 dark:border-slate-600 text-gray-900 dark:text-slate-300 text-xs"})]}),n.jsx("div",{className:"text-xs text-gray-600 dark:text-slate-400 text-center",children:Ys===ps?n.jsxs("div",{children:[n.jsxs("div",{children:[" Single day: ",Ys]}),n.jsx("div",{className:"mt-1 text-green-600 dark:text-green-400 font-medium",children:ho(new Date,"yyyy-MM-dd")===Ys?" Today's market data":" Last trading day"})]}):` Range: ${Ys} to ${ps}`})]}),n.jsx("div",{className:"max-h-[600px] overflow-y-auto pr-2 custom-thin-scrollbar",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[!I.includes(1)&&Ue.find(S=>S.id===1)&&n.jsx(St,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow relative",children:n.jsxs(Kt,{className:"p-4",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"font-medium text-gray-800 dark:text-white",children:(Mf=Ue.find(S=>S.id===1))==null?void 0:Mf.name}),n.jsxs(wa,{children:[n.jsx(Na,{asChild:!0,children:n.jsx(H,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:n.jsx(Gl,{className:"h-4 w-4"})})}),n.jsx(fa,{className:"w-40 p-1",children:n.jsxs("div",{className:"space-y-1",children:[n.jsxs(H,{variant:"ghost",size:"sm",className:"w-full justify-start text-indigo-600 hover:bg-indigo-50",onClick:()=>V(Ue.find(S=>S.id===1)),children:[n.jsx(Bh,{className:"h-4 w-4 mr-2"}),"Edit"]}),n.jsxs(H,{variant:"ghost",size:"sm",className:"w-full justify-start text-blue-600 hover:bg-blue-50",onClick:()=>X(Ue.find(S=>S.id===1)),children:[n.jsx(cb,{className:"h-4 w-4 mr-2"}),"Share"]}),n.jsxs(H,{variant:"ghost",size:"sm",className:"w-full justify-start text-red-600 hover:bg-red-50",onClick:()=>A(1),children:[n.jsx(za,{className:"h-4 w-4 mr-2"}),"Delete"]})]})})]})]}),n.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Pattern recognition and breakout strategy for intraday trading"}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[n.jsx("span",{children:" 15 Mar"}),n.jsx(Sr,{variant:"outline",className:"text-xs",children:"2"}),n.jsx("span",{children:" 1"})]})]}),n.jsx(H,{className:"absolute bottom-3 right-3 bg-gray-100 hover:bg-gray-200 text-gray-700 border-0 px-3 py-1.5 text-xs rounded-md font-medium","data-testid":"button-test-strategy-1",onClick:()=>Y(Ue.find(S=>S.id===1)),disabled:wt.has(1),children:wt.has(1)?"Testing...":"Test"})]})}),!I.includes(2)&&Ue.find(S=>S.id===2)&&n.jsx(St,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow relative",children:n.jsxs(Kt,{className:"p-4",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"font-medium text-gray-800 dark:text-white",children:(ra=Ue.find(S=>S.id===2))==null?void 0:ra.name}),n.jsxs(wa,{children:[n.jsx(Na,{asChild:!0,children:n.jsx(H,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:n.jsx(Gl,{className:"h-4 w-4"})})}),n.jsxs(fa,{className:"w-32 p-1",children:[n.jsxs(H,{variant:"ghost",size:"sm",className:"w-full justify-start text-indigo-600 hover:bg-indigo-50",onClick:()=>V(Ue.find(S=>S.id===2)),children:[n.jsx(Bh,{className:"h-4 w-4 mr-2"}),"Edit"]}),n.jsxs(H,{variant:"ghost",size:"sm",className:"w-full justify-start text-blue-600 hover:bg-blue-50",onClick:()=>X(Ue.find(S=>S.id===2)),children:[n.jsx(cb,{className:"h-4 w-4 mr-2"}),"Share"]}),n.jsxs(H,{variant:"ghost",size:"sm",className:"w-full justify-start text-red-600 hover:bg-red-50",onClick:()=>A(2),children:[n.jsx(za,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]}),n.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Momentum strategy based on RSI divergence patterns"}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[n.jsx("span",{children:" 12 Mar"}),n.jsx(Sr,{variant:"outline",className:"text-xs",children:"4"}),n.jsx("span",{children:" 3"})]})]}),n.jsx(H,{className:"absolute bottom-3 right-3 bg-white hover:bg-gray-100 text-black border border-gray-300 px-3 py-1 text-xs rounded shadow-sm","data-testid":"button-test-strategy-2",onClick:()=>Y(Ue.find(S=>S.id===2)),disabled:wt.has(2),children:wt.has(2)?"Testing...":"Test"})]})}),!I.includes(4)&&n.jsx(St,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow relative",children:n.jsxs(Kt,{className:"p-4",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"font-medium text-gray-800 dark:text-white",children:"Bollinger Squeeze"}),n.jsxs(wa,{children:[n.jsx(Na,{asChild:!0,children:n.jsx(H,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:n.jsx(Gl,{className:"h-4 w-4"})})}),n.jsx(fa,{className:"w-32 p-1",children:n.jsxs(H,{variant:"ghost",size:"sm",className:"w-full justify-start text-red-600 hover:bg-red-50",onClick:()=>A(4),children:[n.jsx(za,{className:"h-4 w-4 mr-2"}),"Delete"]})})]})]}),n.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Volatility breakout strategy using Bollinger Bands"}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[n.jsx("span",{children:" 08 Mar"}),n.jsx(Sr,{variant:"outline",className:"text-xs",children:"1"}),n.jsx("span",{children:" 4"})]})]}),n.jsx(H,{className:"absolute bottom-3 right-3 bg-white hover:bg-gray-100 text-black border border-gray-300 px-3 py-1 text-xs rounded shadow-sm","data-testid":"button-test-strategy-4",onClick:()=>Y(Ue.find(S=>S.id===4)),disabled:wt.has(4),children:wt.has(4)?"Testing...":"Test"})]})}),!I.includes(5)&&n.jsx(St,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow relative",children:n.jsxs(Kt,{className:"p-4",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"font-medium text-gray-800 dark:text-white",children:"Mean Reversion"}),n.jsxs(wa,{children:[n.jsx(Na,{asChild:!0,children:n.jsx(H,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:n.jsx(Gl,{className:"h-4 w-4"})})}),n.jsx(fa,{className:"w-32 p-1",children:n.jsxs(H,{variant:"ghost",size:"sm",className:"w-full justify-start text-red-600 hover:bg-red-50",onClick:()=>A(5),children:[n.jsx(za,{className:"h-4 w-4 mr-2"}),"Delete"]})})]})]}),n.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Counter-trend strategy for oversold/overbought conditions"}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[n.jsx("span",{children:" 05 Mar"}),n.jsx(Sr,{variant:"outline",className:"text-xs",children:"1"}),n.jsx("span",{children:" 2"})]})]}),n.jsx(H,{className:"absolute bottom-3 right-3 bg-white hover:bg-gray-100 text-black border border-gray-300 px-3 py-1 text-xs rounded shadow-sm","data-testid":"button-test-strategy-5",onClick:()=>Y(Ue.find(S=>S.id===5)),disabled:wt.has(5),children:wt.has(5)?"Testing...":"Test"})]})}),!I.includes(6)&&n.jsx(St,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow relative",children:n.jsxs(Kt,{className:"p-4",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"font-medium text-gray-800 dark:text-white",children:"Momentum Breakout"}),n.jsxs(wa,{children:[n.jsx(Na,{asChild:!0,children:n.jsx(H,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:n.jsx(Gl,{className:"h-4 w-4"})})}),n.jsx(fa,{className:"w-32 p-1",children:n.jsxs(H,{variant:"ghost",size:"sm",className:"w-full justify-start text-red-600 hover:bg-red-50",onClick:()=>A(6),children:[n.jsx(za,{className:"h-4 w-4 mr-2"}),"Delete"]})})]})]}),n.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"High-momentum breakout strategy with volume confirmation"}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[n.jsx("span",{children:" 02 Mar"}),n.jsx(Sr,{variant:"outline",className:"text-xs",children:"2"}),n.jsx("span",{children:" 5"})]})]}),n.jsx(H,{className:"absolute bottom-3 right-3 bg-white hover:bg-gray-100 text-black border border-gray-300 px-3 py-1 text-xs rounded shadow-sm","data-testid":"button-test-strategy-6",onClick:()=>Y(Ue.find(S=>S.id===6)),disabled:wt.has(6),children:wt.has(6)?"Testing...":"Test"})]})}),!I.includes(7)&&n.jsx(St,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow relative",children:n.jsxs(Kt,{className:"p-4",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"font-medium text-gray-800 dark:text-white",children:"Grid Trading"}),n.jsxs(wa,{children:[n.jsx(Na,{asChild:!0,children:n.jsx(H,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:n.jsx(Gl,{className:"h-4 w-4"})})}),n.jsx(fa,{className:"w-32 p-1",children:n.jsxs(H,{variant:"ghost",size:"sm",className:"w-full justify-start text-red-600 hover:bg-red-50",onClick:()=>A(7),children:[n.jsx(za,{className:"h-4 w-4 mr-2"}),"Delete"]})})]})]}),n.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Automated grid-based trading system for sideways markets"}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[n.jsx("span",{children:" 28 Feb"}),n.jsx(Sr,{variant:"outline",className:"text-xs",children:"4"}),n.jsx("span",{children:" 7"})]})]}),n.jsx(H,{className:"absolute bottom-3 right-3 bg-white hover:bg-gray-100 text-black border border-gray-300 px-3 py-1 text-xs rounded shadow-sm","data-testid":"button-test-strategy-7",onClick:()=>Y(Ue.find(S=>S.id===7)),disabled:wt.has(7),children:wt.has(7)?"Testing...":"Test"})]})}),!I.includes(8)&&n.jsx(St,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow relative",children:n.jsxs(Kt,{className:"p-4",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"font-medium text-gray-800 dark:text-white",children:"Arbitrage Scanner"}),n.jsxs(wa,{children:[n.jsx(Na,{asChild:!0,children:n.jsx(H,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:n.jsx(Gl,{className:"h-4 w-4"})})}),n.jsx(fa,{className:"w-32 p-1",children:n.jsxs(H,{variant:"ghost",size:"sm",className:"w-full justify-start text-red-600 hover:bg-red-50",onClick:()=>A(8),children:[n.jsx(za,{className:"h-4 w-4 mr-2"}),"Delete"]})})]})]}),n.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Cross-exchange arbitrage opportunities for risk-free profits"}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[n.jsx("span",{children:" 25 Feb"}),n.jsx(Sr,{variant:"outline",className:"text-xs",children:"4"}),n.jsx("span",{children:" 3"})]})]}),n.jsx(H,{className:"absolute bottom-3 right-3 bg-white hover:bg-gray-100 text-black border border-gray-300 px-3 py-1 text-xs rounded shadow-sm","data-testid":"button-test-strategy-8",onClick:()=>Y(Ue.find(S=>S.id===8)),disabled:wt.has(8),children:wt.has(8)?"Testing...":"Test"})]})}),Z.map(S=>S.isImported?n.jsxs(St,{className:"bg-slate-700 dark:bg-slate-800 border-slate-600 dark:border-slate-700 hover:shadow-lg transition-all duration-300 relative overflow-hidden",children:[n.jsxs("div",{className:"bg-slate-800 dark:bg-slate-900 px-4 py-3 border-b border-slate-600 dark:border-slate-700",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-white font-medium text-lg",children:S.name}),n.jsxs(wa,{children:[n.jsx(Na,{asChild:!0,children:n.jsx(H,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-slate-400 hover:text-white",children:n.jsx(Gl,{className:"h-4 w-4"})})}),n.jsx(fa,{className:"w-40 p-1 bg-slate-800 border-slate-600",children:n.jsxs("div",{className:"space-y-1",children:[n.jsxs(H,{variant:"ghost",size:"sm",className:"w-full justify-start text-indigo-400 hover:bg-slate-700",onClick:()=>V(S),children:[n.jsx(Bh,{className:"h-4 w-4 mr-2"}),"Edit"]}),n.jsxs(H,{variant:"ghost",size:"sm",className:"w-full justify-start text-blue-400 hover:bg-slate-700",onClick:()=>X(S),children:[n.jsx(cb,{className:"h-4 w-4 mr-2"}),"Share"]}),n.jsxs(H,{variant:"ghost",size:"sm",className:"w-full justify-start text-red-400 hover:bg-slate-700",onClick:()=>Ee(S.id),children:[n.jsx(za,{className:"h-4 w-4 mr-2"}),"Delete"]})]})})]})]}),n.jsxs("p",{className:"text-slate-300 text-sm mt-1",children:[S.indicator," crossover strategy for trend following"]})]}),n.jsxs(Kt,{className:"p-4 bg-slate-700 dark:bg-slate-800 text-white",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"text-green-400",children:""}),n.jsxs("span",{className:"text-slate-300",children:["Live since ",new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short"})]})]}),n.jsx(Sr,{className:"bg-slate-600 text-white text-xs px-2 py-0",children:"1"}),n.jsx("span",{className:"text-slate-400",children:"= 2"})]}),n.jsxs("div",{className:"text-xs text-slate-300 space-y-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),n.jsx("span",{children:"rahul.sharma@trading.com"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs bg-slate-600 px-2 py-0.5 rounded",children:"RS"}),n.jsx("span",{className:"text-slate-400",children:"Rahul Sharma"})]})]}),n.jsxs("div",{className:"text-xs text-slate-400 mt-2",children:[S.indicator,"-",S.period,"  ",S.entryCondition,"  SL: ",S.slCondition,"  Exit: ",S.exitRule]})]}),n.jsx(H,{className:"absolute bottom-3 right-3 bg-white hover:bg-gray-100 text-slate-800 border border-gray-300 px-3 py-1 text-xs rounded shadow-sm font-medium","data-testid":`button-test-strategy-${S.id}`,onClick:()=>Y(S),disabled:wt.has(Number(S.id)),children:wt.has(Number(S.id))?"Testing...":"Test"})]})]},S.id):n.jsx(St,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow relative",children:n.jsxs(Kt,{className:"p-4",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"font-medium text-gray-800 dark:text-white",children:S.name}),n.jsxs(wa,{children:[n.jsx(Na,{asChild:!0,children:n.jsx(H,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:n.jsx(Gl,{className:"h-4 w-4"})})}),n.jsx(fa,{className:"w-40 p-1",children:n.jsxs("div",{className:"space-y-1",children:[n.jsxs(H,{variant:"ghost",size:"sm",className:"w-full justify-start text-indigo-600 hover:bg-indigo-50",onClick:()=>V(S),children:[n.jsx(Bh,{className:"h-4 w-4 mr-2"}),"Edit"]}),n.jsxs(H,{variant:"ghost",size:"sm",className:"w-full justify-start text-blue-600 hover:bg-blue-50",onClick:()=>X(S),children:[n.jsx(cb,{className:"h-4 w-4 mr-2"}),"Share"]}),n.jsxs(H,{variant:"ghost",size:"sm",className:"w-full justify-start text-red-600 hover:bg-red-50",onClick:()=>Ee(S.id),children:[n.jsx(za,{className:"h-4 w-4 mr-2"}),"Delete"]})]})})]})]}),n.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[S.indicator,"-",S.period," ",S.entryCondition,"  Exit: ",S.exitRule]}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[n.jsxs("span",{children:[" ",S.dateAdded]}),n.jsx(Sr,{variant:"outline",className:"text-xs",children:"Custom"})]})]}),n.jsx(H,{className:"absolute bottom-3 right-3 bg-gray-100 hover:bg-gray-200 text-gray-700 border-0 px-3 py-1.5 text-xs rounded-md font-medium","data-testid":`button-test-strategy-${S.id}`,onClick:()=>Y(S),disabled:wt.has(Number(S.id)),children:wt.has(Number(S.id))?"Testing...":"Test"})]})},S.id))]})})]})]}),n.jsxs("div",{className:"w-80 bg-slate-900 border-l border-slate-700 flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-700",children:[n.jsx("h2",{className:"text-lg font-semibold text-white mb-2",children:"Trading Community"}),n.jsx("p",{className:"text-sm text-slate-400",children:"Follow & copy strategies from top traders"})]}),n.jsx("div",{className:"p-4 border-b border-slate-700",children:n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-600 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-white font-semibold text-sm",children:"ME"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-white font-medium",children:"Your Profile"}),n.jsx("p",{className:"text-slate-400 text-xs",children:"Active trader"})]}),n.jsx("div",{className:"bg-green-500 text-white px-2 py-1 rounded text-xs font-medium",children:"Online"})]})}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 max-h-80",children:[n.jsxs("h3",{className:"text-white font-medium mb-4 flex items-center gap-2",children:[n.jsx("span",{children:"Top Traders"}),n.jsx(Sr,{className:"bg-indigo-600 text-white",children:"4 Active"})]}),n.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 hover:bg-slate-750 transition-colors group",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-orange-400 to-red-500 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-white font-bold text-sm",children:"JL"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-white font-medium",children:"Jack Linton"}),n.jsx("p",{className:"text-slate-400 text-xs",children:"Day trader"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(H,{size:"sm",className:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white text-xs",onClick:()=>Le("jack_linton","EMA+RSI Multi Strategy"),children:[n.jsx(Bi,{className:"h-3 w-3 mr-1"}),"Copy Strategy"]}),n.jsx(H,{size:"sm",variant:"outline",className:"px-2 border-slate-600 text-slate-300 hover:bg-slate-700",onClick:()=>Ie("jack_linton"),children:n.jsx(vi,{className:"h-3 w-3"})})]})]}),n.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 hover:bg-slate-750 transition-colors group",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-400 to-pink-500 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-white font-bold text-sm",children:"SW"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-white font-medium",children:"Samuel Waters"}),n.jsx("p",{className:"text-slate-400 text-xs",children:"Active trader"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(H,{size:"sm",className:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white text-xs",onClick:()=>Le("samuel_waters","SMA+MACD Power Combo"),children:[n.jsx(Bi,{className:"h-3 w-3 mr-1"}),"Copy Strategy"]}),n.jsx(H,{size:"sm",variant:"outline",className:"px-2 border-slate-600 text-slate-300 hover:bg-slate-700",onClick:()=>Ie("samuel_waters"),children:n.jsx(vi,{className:"h-3 w-3"})})]})]}),n.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 hover:bg-slate-750 transition-colors group",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-green-400 to-blue-500 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-white font-bold text-sm",children:"HM"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-white font-medium",children:"Henry Mercer"}),n.jsx("p",{className:"text-slate-400 text-xs",children:"Active trader"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(H,{size:"sm",className:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white text-xs",onClick:()=>Le("henry_mercer","RSI+Bollinger Bands"),children:[n.jsx(Bi,{className:"h-3 w-3 mr-1"}),"Copy Strategy"]}),n.jsx(H,{size:"sm",variant:"outline",className:"px-2 border-slate-600 text-slate-300 hover:bg-slate-700",onClick:()=>Ie("henry_mercer"),children:n.jsx(vi,{className:"h-3 w-3"})})]})]}),n.jsxs("div",{className:"bg-slate-800 rounded-lg p-4 hover:bg-slate-750 transition-colors group",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-white font-bold text-sm",children:"AR"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-white font-medium",children:"Amelia Rowann"}),n.jsx("p",{className:"text-slate-400 text-xs",children:"Day trader"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(H,{size:"sm",className:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white text-xs",onClick:()=>Le("amelia_rowann","Triple EMA + Volume"),children:[n.jsx(Bi,{className:"h-3 w-3 mr-1"}),"Copy Strategy"]}),n.jsx(H,{size:"sm",variant:"outline",className:"px-2 border-slate-600 text-slate-300 hover:bg-slate-700",onClick:()=>Ie("amelia_rowann"),children:n.jsx(vi,{className:"h-3 w-3"})})]})]})]}),n.jsxs("div",{className:"border-t border-slate-700 bg-slate-900",children:[n.jsx("div",{className:"p-4 border-b border-slate-700",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h3",{className:"text-lg font-semibold text-white",children:en?" Visual AI":Co?"AI":"Notes AI"}),Co&&!en&&n.jsx(Sr,{variant:"secondary",className:"text-xs bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",children:"strategy AI"}),en&&n.jsx(Sr,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:"Chart Analysis"})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(H,{size:"sm",variant:"ghost",onClick:()=>ld(!en),className:`text-xs h-8 px-2 py-0 ${en?"text-blue-400 hover:text-blue-300 hover:bg-blue-950":"text-gray-400 hover:text-white hover:bg-slate-800"}`,"data-testid":"button-toggle-sidebar-visual-ai",title:en?"Switch to Notes AI":"Switch to Visual AI",children:en?n.jsx(Yk,{className:"w-4 h-4"}):n.jsx(Wk,{className:"w-4 h-4"})}),n.jsxs(H,{size:"sm",variant:Co?"default":"ghost",onClick:()=>gg(!Co),className:`text-xs h-8 px-2 py-0 ${Co?"bg-purple-600 hover:bg-purple-700 text-white":"text-gray-400 hover:text-white hover:bg-slate-800"}`,"data-testid":"button-toggle-ai",children:[n.jsx(Oc,{className:"w-6 h-6 mr-1"}),"AI"]}),!Co&&!en&&(id?n.jsxs(n.Fragment,{children:[n.jsxs(H,{size:"sm",variant:"ghost",onClick:xc,className:"text-xs text-red-400 hover:text-red-300 hover:bg-red-950 h-8 px-2","data-testid":"button-cancel-notes",children:[n.jsx(Wr,{className:"w-3 h-3 mr-1"}),"Cancel"]}),n.jsxs(H,{size:"sm",onClick:Ol,className:"text-xs bg-green-600 hover:bg-green-700 text-white h-8 px-2","data-testid":"button-save-notes",children:[n.jsx(hl,{className:"w-3 h-3 mr-1"}),"Save"]})]}):n.jsxs(H,{size:"sm",variant:"ghost",onClick:ya,className:"text-xs text-gray-400 hover:text-white hover:bg-slate-800 h-8 px-2","data-testid":"button-edit-notes",children:[n.jsx(Bh,{className:"w-3 h-3 mr-1"}),"Edit"]}))]})]})}),n.jsx("div",{className:"h-96",children:en?n.jsx("div",{className:"h-full p-2",children:n.jsx(yi,{width:"100%",height:"100%",children:n.jsxs(Dd,{data:(()=>{var L;if(!Pr||!((L=rt==null?void 0:rt.candles)!=null&&L.length))return[];const S=Oa(rt.candles,Pr);return S.map((D,q)=>({time:`${Math.floor((Pr[0]+q*((Pr[1]-Pr[0])/S.length))/60)}:${String(Math.floor((Pr[0]+q*((Pr[1]-Pr[0])/S.length))%60)).padStart(2,"0")}`,price:D.close||D.price||0}))})(),margin:{top:5,right:20,left:1.5,bottom:5},children:[n.jsx(Sa,{dataKey:"time",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"#64748b"},tickCount:8}),n.jsx(ma,{domain:["dataMin - 10","dataMax + 10"],axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"#64748b"},width:35}),n.jsx(zs,{content:({active:S,payload:L,label:D})=>{if(!S||!L||!L.length)return null;const q=L[0].value;return n.jsxs("div",{style:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"6px",color:"#e2e8f0",padding:"8px 16px",fontSize:"13px",minWidth:"140px",boxShadow:"0 4px 12px rgba(0,0,0,0.4)",display:"flex",alignItems:"center",gap:"12px"},children:[n.jsxs("span",{style:{fontSize:"13px",fontWeight:"500"},children:["",Number(q).toFixed(2)]}),n.jsx("div",{style:{width:"1px",height:"20px",backgroundColor:"#475569"}}),n.jsx("span",{style:{fontSize:"12px",color:"#94a3b8"},children:D})]})}}),n.jsx(Is,{type:"linear",dataKey:"price",stroke:"#10b981",strokeWidth:2,dot:!1,activeDot:{r:4,fill:"#10b981"}}),n.jsx(nf,{y:(()=>{var L,D,q;if(!Pr||!((L=rt==null?void 0:rt.candles)!=null&&L.length))return 0;const S=Oa(rt.candles,Pr);return S.length===0?0:((D=S[0])==null?void 0:D.close)||((q=S[0])==null?void 0:q.price)||0})(),stroke:"#64748b",strokeDasharray:"2 2",strokeWidth:1})]})})}):Co?n.jsxs("div",{className:"h-full flex flex-col",children:[n.jsx("div",{className:"flex-1 max-h-80 overflow-y-auto p-3 space-y-3 bg-slate-800 rounded-lg border border-slate-700 m-4",children:zm.length===0?n.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400 mt-2",children:[n.jsx("p",{className:"text-sm mb-4",children:" Strategy AI Ready"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[n.jsx(H,{variant:"outline",size:"sm",onClick:()=>Ki("generate strategy code"),className:"text-[10px] h-6 px-2 bg-purple-50 hover:bg-purple-100 text-purple-700 border-purple-200 dark:bg-purple-900 dark:hover:bg-purple-800 dark:text-purple-300 dark:border-purple-700 rounded-lg",children:" Generate strategy code"}),n.jsx(H,{variant:"outline",size:"sm",onClick:()=>Ki("emi code"),className:"text-[10px] h-6 px-2 bg-green-50 hover:bg-green-100 text-green-700 border-green-200 dark:bg-green-900 dark:hover:bg-green-800 dark:text-green-300 dark:border-green-700 rounded-lg",children:" EMI code"}),n.jsx(H,{variant:"outline",size:"sm",onClick:()=>Ki("rsi+ema code"),className:"text-[10px] h-6 px-2 bg-blue-50 hover:bg-blue-100 text-blue-700 border-blue-200 dark:bg-blue-900 dark:hover:bg-blue-800 dark:text-blue-300 dark:border-blue-700 rounded-lg",children:" RSI+EMA code"}),n.jsx(H,{variant:"outline",size:"sm",onClick:()=>Ki("show performance"),className:"text-[10px] h-6 px-2 bg-orange-50 hover:bg-orange-100 text-orange-700 border-orange-200 dark:bg-orange-900 dark:hover:bg-orange-800 dark:text-orange-300 dark:border-orange-700 rounded-lg",children:" Show performance"})]}),n.jsx("p",{className:"text-[10px] text-purple-600 dark:text-purple-400 font-medium",children:"Generate unique trading strategies instantly!"})]}):n.jsxs("div",{className:"space-y-3",children:[zm.map((S,L)=>n.jsx("div",{className:`flex ${S.role==="user"?"justify-end":"justify-start"}`,children:n.jsxs("div",{className:`max-w-md ${S.role==="user"?"":"w-full"}`,children:[S.role==="user"?n.jsx("div",{className:"bg-purple-600 text-white px-3 py-2 rounded-lg text-sm",children:S.content}):n.jsxs("div",{className:"space-y-2",children:[tl(S.content).map((D,q)=>n.jsx("div",{children:D.type==="text"?n.jsx("div",{className:"bg-slate-700 text-gray-200 px-3 py-2 rounded-lg text-sm whitespace-pre-wrap",children:D.content}):n.jsxs("div",{className:"bg-slate-900 border border-slate-600 rounded-lg overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between bg-slate-800 px-3 py-2 border-b border-slate-600",children:[n.jsx("span",{className:"text-xs text-gray-400 font-mono",children:"Strategy Code"}),n.jsx(H,{size:"sm",variant:"ghost",onClick:()=>Qr(D.content,L*100+q),className:"h-6 px-2 text-xs text-gray-400 hover:text-white hover:bg-slate-700",children:fc===L*100+q?n.jsxs(n.Fragment,{children:[n.jsx(hl,{className:"w-3 h-3 mr-1"}),"Copied!"]}):n.jsxs(n.Fragment,{children:[n.jsx(Bi,{className:"w-3 h-3 mr-1"}),"Copy"]})})]}),n.jsx("div",{className:"p-4 h-32 overflow-y-auto",children:n.jsx("pre",{className:"text-sm text-gray-100 font-mono whitespace-pre-wrap leading-relaxed tracking-wide break-all",children:D.content})})]})},q)),S.role==="assistant"&&S.newsData&&S.newsData.stocks&&n.jsxs("div",{className:"mt-3 space-y-2",children:[S.newsData.stocks.map((D,q)=>{const fe=D.change&&D.change>=0?"text-green-400":"text-red-400",Se=D.change&&D.change>=0?"":"";return n.jsxs("div",{className:"bg-slate-800 border border-slate-600 rounded-lg p-2 flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"font-semibold text-white text-sm",children:D.symbol}),n.jsx("span",{className:"text-xs text-slate-400",children:D.exchange||"NSE"})]}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsxs("span",{className:"text-sm font-bold text-white",children:["",D.price]}),n.jsxs("span",{className:`text-xs ${fe} flex items-center gap-1`,children:[Se,D.change>=0?"+":"",D.change||0," ",D.changePercent>=0?"+":"",(D.changePercent||0).toFixed(2),"%"]})]})]}),n.jsx(H,{size:"sm",onClick:()=>su(D.symbol),className:"h-6 w-6 rounded-full bg-purple-600 hover:bg-purple-700 text-white p-0 flex items-center justify-center",children:n.jsx("span",{className:"text-sm font-bold",children:"+"})})]},q)}),n.jsx("div",{className:"mt-2 pt-2 border-t border-slate-600",children:n.jsxs(H,{onClick:()=>{const D=S.newsData.stocks.map(q=>q.symbol);Cf(D)},className:"w-full bg-purple-600 hover:bg-purple-700 text-white font-medium py-1.5 px-2 rounded text-xs flex items-center justify-center gap-1",children:[n.jsx("span",{className:"text-xs font-bold",children:"+"}),"Add All (",S.newsData.stocks.filter(D=>!(Array.isArray(zr)&&zr.includes(D.symbol))).length,")"]})})]})]}),S.isLoading&&n.jsxs("div",{className:"flex items-center gap-2 mt-2 py-2 px-3 bg-gradient-to-r from-slate-800 to-slate-700 border border-purple-500/20 rounded-lg animate-pulse",children:[n.jsxs("div",{className:"flex gap-1",children:[n.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-purple-400 to-blue-400 rounded-full animate-pulse"}),n.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-blue-400 to-indigo-400 rounded-full animate-pulse",style:{animationDelay:"200ms"}}),n.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-indigo-400 to-purple-400 rounded-full animate-pulse",style:{animationDelay:"400ms"}})]}),n.jsx("span",{className:"text-xs text-slate-300 font-medium animate-pulse",children:"BATTU AI is thinking..."})]})]})},L)),cr&&n.jsx("div",{className:"flex justify-start animate-fadeIn",children:n.jsx("div",{className:"bg-gradient-to-r from-slate-700 to-slate-600 text-gray-200 max-w-sm px-4 py-3 rounded-lg border border-purple-500/30 animate-pulse",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex gap-1",children:[n.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-purple-400 to-blue-400 rounded-full animate-pulse"}),n.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-blue-400 to-indigo-400 rounded-full animate-pulse",style:{animationDelay:"200ms"}}),n.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-indigo-400 to-purple-400 rounded-full animate-pulse",style:{animationDelay:"400ms"}})]}),n.jsx("span",{className:"text-xs text-slate-300 font-medium animate-pulse",children:"BATTU AI is thinking..."})]})})})]})}),n.jsx("div",{className:"p-4 border-t border-slate-700",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",placeholder:"Ask about trading patterns...",value:Ei,onChange:S=>Ki(S.target.value),onKeyPress:S=>{S.key==="Enter"&&!cr&&Ei.trim()&&(hc(L=>[...L,{role:"user",content:Ei}]),hi(!0),Hm(Ei),Ki(""))},className:"flex-1 px-3 py-2 text-sm bg-slate-800 border border-slate-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500"}),n.jsx(H,{size:"sm",onClick:()=>{Ei.trim()&&!cr&&(hc(S=>[...S,{role:"user",content:Ei}]),hi(!0),Hm(Ei),Ki(""))},disabled:cr||!Ei.trim(),className:"bg-purple-600 hover:bg-purple-700 text-white px-4",children:n.jsx(X2,{className:"w-4 h-4"})})]})})]}):n.jsx("div",{className:"h-full flex flex-col p-4",children:n.jsx("div",{className:"flex-1 bg-slate-800 rounded-lg border border-slate-700",children:id?n.jsx("textarea",{value:Eo,onChange:S=>uh(S.target.value),placeholder:"Write your trading notes, strategies, observations...",className:"w-full h-full p-3 text-sm border-0 rounded-lg bg-slate-800 text-white placeholder-slate-400 resize-none focus:outline-none focus:ring-2 focus:ring-blue-500","data-testid":"textarea-sidebar-notes"}):n.jsx("div",{className:"h-full p-3 overflow-y-auto",children:Ea?n.jsx("div",{className:"text-sm text-gray-200 whitespace-pre-wrap",children:Ea}):n.jsx("div",{className:"h-full flex items-center justify-center",children:n.jsxs("div",{className:"text-center text-gray-500",children:[n.jsx(yb,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),n.jsx("p",{className:"text-sm mb-2",children:"No notes yet"}),n.jsx("p",{className:"text-xs",children:"Click Edit to add your trading insights"})]})})})})})})]})]})]}),n.jsxs(Kh,{value:"options",className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Underlying:"}),n.jsx("span",{className:"px-3 py-2 bg-gray-100 dark:bg-gray-700 rounded-md text-sm font-medium text-gray-800 dark:text-white border",children:"NIFTY"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Expiry:"}),n.jsxs(Ms,{value:Oe,onValueChange:S=>{me(S),ke(""),setTimeout(()=>{Fl(),ph()},100)},children:[n.jsx(Ns,{className:"w-[140px] h-10 text-sm","data-testid":"select-expiry",children:n.jsx(Os,{placeholder:it?"Loading...":"Select expiry"})}),n.jsxs(js,{children:[n.jsx("div",{className:"p-2 border-b border-gray-200 dark:border-gray-700",children:n.jsx("input",{type:"text",placeholder:"Search expiry dates...",value:je,onChange:S=>ke(S.target.value),className:"w-full px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-blue-500","data-testid":"input-expiry-search",onClick:S=>S.stopPropagation(),onKeyDown:S=>S.stopPropagation()})}),((Te==null?void 0:Te.expiry_dates)||[]).filter(S=>{if(!je)return!0;const L=je.toLowerCase();return new Date(S).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}).toLowerCase().includes(L)||S.includes(L)}).map(S=>n.jsx(gt,{value:S,children:new Date(S).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})},S)),(!(Te!=null&&Te.expiry_dates)||Te.expiry_dates.length===0)&&!it&&n.jsx("div",{className:"p-2 text-xs text-gray-500 dark:text-gray-400 text-center",children:"No expiry dates available. Click Refresh to load."}),je&&((Te==null?void 0:Te.expiry_dates)||[]).filter(S=>{const L=je.toLowerCase();return new Date(S).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}).toLowerCase().includes(L)||S.includes(L)}).length===0&&n.jsx("div",{className:"p-2 text-xs text-gray-500 dark:text-gray-400 text-center",children:"No expiry dates found"})]})]})]}),n.jsxs(H,{onClick:()=>{Fl(),ph()},disabled:it||He,className:"flex items-center gap-2",children:[n.jsx(go,{className:`h-4 w-4 ${it||He?"animate-spin":""}`}),it||He?"Loading...":"Refresh"]})]}),Zt&&n.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Wr,{className:"h-4 w-4 text-red-500"}),n.jsx("p",{className:"text-red-700 dark:text-red-300 text-sm",children:Zt})]})}),it&&n.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(go,{className:"h-4 w-4 text-blue-500 animate-spin"}),n.jsx("p",{className:"text-blue-700 dark:text-blue-300 text-sm",children:"Loading option chain data from NSE..."})]})}),Te&&!Zt&&n.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(rv,{className:"h-4 w-4 text-amber-600 dark:text-amber-400"}),n.jsx("p",{className:"text-amber-700 dark:text-amber-300 text-sm",children:Te.source==="mock"?" Showing demo option chain data (NSE API unavailable - live data requires authentication)":" Live option chain data from NSE API"})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx(St,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:n.jsx(Kt,{className:"p-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"text-lg font-bold text-gray-800 dark:text-white",children:["",((Km=Te==null?void 0:Te.spot_price)==null?void 0:Km.toFixed(2))||"N/A"]}),n.jsx(Gn,{className:"h-3 w-3 text-blue-500"})]}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:"Spot Price"})]})})}),n.jsx(St,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:n.jsx(Kt,{className:"p-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:ou((Te==null?void 0:Te.total_call_oi)||0)}),n.jsx(Gn,{className:"h-3 w-3 text-green-500"})]}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:"Call OI"})]})})}),n.jsx(St,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:n.jsx(Kt,{className:"p-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-lg font-bold text-red-600 dark:text-red-400",children:ou((Te==null?void 0:Te.total_put_oi)||0)}),n.jsx($c,{className:"h-3 w-3 text-red-500"})]}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:"Put OI"})]})})}),n.jsx(St,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:n.jsx(Kt,{className:"p-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:((ns=Te==null?void 0:Te.pcr)==null?void 0:ns.toFixed(2))||"N/A"}),n.jsx("span",{className:`text-xs font-medium ${((Te==null?void 0:Te.pcr)||0)>1?"text-red-600":"text-green-600"}`,children:((Te==null?void 0:Te.pcr)||0)>1?"Bearish":"Bullish"})]}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:"Put/Call Ratio"})]})})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsx("div",{children:n.jsx(St,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:n.jsxs(Kt,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Option Chain"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(H,{variant:"outline",size:"sm",className:"text-xs",children:[n.jsx(qk,{className:"h-3 w-3 mr-1"}),"Filter"]}),n.jsxs(H,{variant:"outline",size:"sm",className:"text-xs",children:[n.jsx(go,{className:"h-3 w-3 mr-1"}),"Refresh"]}),n.jsx(H,{variant:"default",size:"sm",className:"text-xs bg-blue-600 hover:bg-blue-700",children:"Export"})]})]}),it?n.jsxs("div",{className:"flex items-center justify-center py-8",children:[n.jsx(go,{className:"h-6 w-6 text-blue-500 animate-spin mr-2"}),n.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Loading option chain..."})]}):Te!=null&&Te.strikes&&Te.strikes.length>0?n.jsx("div",{className:"overflow-x-auto overflow-y-auto max-h-[460px] custom-thin-scrollbar",children:n.jsxs(Pb,{children:[n.jsxs(Ab,{className:"sticky top-0 bg-white dark:bg-gray-800 z-10",children:[n.jsxs(Uh,{className:"bg-gray-50 dark:bg-gray-700/50",children:[n.jsx(Tn,{className:"text-center text-xs font-medium text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/20",colSpan:4,children:"CALLS"}),n.jsx(Tn,{className:"text-center text-xs font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600",children:"Strike"}),n.jsx(Tn,{className:"text-center text-xs font-medium text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20",colSpan:5,children:"PUTS"})]}),n.jsxs(Uh,{className:"bg-gray-50 dark:bg-gray-700/50",children:[n.jsx(Tn,{className:"text-xs font-medium text-gray-600 dark:text-gray-300 text-center",children:"OI Chg%"}),n.jsx(Tn,{className:"text-xs font-medium text-gray-600 dark:text-gray-300 text-center",children:"OI-lakh"}),n.jsx(Tn,{className:"text-xs font-medium text-gray-600 dark:text-gray-300 text-center",children:"Call OI"}),n.jsx(Tn,{className:"text-xs font-medium text-gray-600 dark:text-gray-300 text-center",children:"LTP"}),n.jsx(Tn,{className:"text-xs font-medium text-gray-700 dark:text-gray-300 text-center bg-gray-100 dark:bg-gray-600"}),n.jsx(Tn,{className:"text-xs font-medium text-gray-600 dark:text-gray-300 text-center",children:"LTP"}),n.jsx(Tn,{className:"text-xs font-medium text-gray-600 dark:text-gray-300 text-center",children:"Put OI"}),n.jsx(Tn,{className:"text-xs font-medium text-gray-600 dark:text-gray-300 text-center",children:"IV"}),n.jsx(Tn,{className:"text-xs font-medium text-gray-600 dark:text-gray-300 text-center",children:"OI-lakh"}),n.jsx(Tn,{className:"text-xs font-medium text-gray-600 dark:text-gray-300 text-center",children:"OI Chg%"})]})]}),n.jsx(_b,{children:(Wn=Te.strikes)==null?void 0:Wn.map((S,L)=>{var Qe,ht,Et,Pt,rr,hr,Tt;const D=(Qe=Te.calls)==null?void 0:Qe.find($t=>$t.strike===S),q=(ht=Te.puts)==null?void 0:ht.find($t=>$t.strike===S),fe=(D==null?void 0:D.change_percentage)||0,Se=(q==null?void 0:q.change_percentage)||0,ve=D!=null&&D.open_interest?(D.open_interest/1e5).toFixed(1):"0.0",Ge=q!=null&&q.open_interest?(q.open_interest/1e5).toFixed(1):"0.0";return n.jsxs(Uh,{className:"hover:bg-gray-50 dark:hover:bg-gray-700/30 text-xs",children:[n.jsxs(Kn,{className:`text-center font-medium ${fe>=0?"text-green-600":"text-red-600"}`,children:[fe.toFixed(1),"%"]}),n.jsx(Kn,{className:"text-center text-gray-700 dark:text-gray-300",children:ve}),n.jsx(Kn,{className:"text-center text-gray-700 dark:text-gray-300",children:((Et=D==null?void 0:D.open_interest)==null?void 0:Et.toLocaleString())||"-"}),n.jsx(Kn,{className:"text-center font-medium text-gray-800 dark:text-white",children:((Pt=D==null?void 0:D.ltp)==null?void 0:Pt.toFixed(2))||"-"}),n.jsx(Kn,{className:"text-center font-bold text-gray-900 dark:text-white bg-gray-100 dark:bg-gray-600",children:S}),n.jsx(Kn,{className:"text-center font-medium text-gray-800 dark:text-white",children:((rr=q==null?void 0:q.ltp)==null?void 0:rr.toFixed(2))||"-"}),n.jsx(Kn,{className:"text-center text-gray-700 dark:text-gray-300",children:((hr=q==null?void 0:q.open_interest)==null?void 0:hr.toLocaleString())||"-"}),n.jsx(Kn,{className:"text-center text-gray-700 dark:text-gray-300",children:((Tt=q==null?void 0:q.implied_volatility)==null?void 0:Tt.toFixed(1))||"-"}),n.jsx(Kn,{className:"text-center text-gray-700 dark:text-gray-300",children:Ge}),n.jsxs(Kn,{className:`text-center font-medium ${Se>=0?"text-green-600":"text-red-600"}`,children:[Se.toFixed(1),"%"]})]},S)})})]})}):n.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[n.jsx(Np,{className:"h-12 w-12 text-gray-400 mb-2"}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"No option chain data available"}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:"Select an underlying symbol and click Refresh to load data"})]})]})})}),n.jsx("div",{children:n.jsx(qPe,{optionChainData:Te,selectedStrike:a,onStrikeChange:i,selectedExpiry:Oe})})]}),n.jsx("div",{className:"mt-6",children:n.jsx(St,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:n.jsx(Kt,{className:"p-6",children:n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"w-full",children:n.jsx(St,{className:"bg-gradient-to-br from-gray-50 to-blue-50 dark:from-gray-900/20 dark:to-blue-900/20 border-gray-200 dark:border-gray-800",children:n.jsxs(Kt,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h4",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Combined Greeks Analysis - 25 15-Min Intervals"}),n.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),n.jsx("span",{children:"Delta CE %"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-3 h-3 bg-pink-500 rounded-full"}),n.jsx("span",{children:"Delta PE %"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),n.jsx("span",{children:"Gamma %"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),n.jsx("span",{children:"Theta %"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),n.jsx("span",{children:"Vega %"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-3 h-3 bg-indigo-500 rounded-full"}),n.jsx("span",{children:"IV %"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),n.jsx("span",{children:"Strike Price "})]})]})]}),n.jsx("div",{className:"h-96",children:n.jsx(yi,{width:"100%",height:"100%",children:n.jsxs(Dd,{data:(()=>{const S=Array.from({length:25},(D,q)=>{const Se=(Math.random()-.5)*100,ve=Math.floor(9+q*15/60),Ge=(15+q*15)%60;return{time:q+1,timeLabel:`${ve}:${String(Ge).padStart(2,"0")}`,rawCallDelta:.45+Math.random()*.1+q/25*.1,rawPutDelta:-.45-Math.random()*.1-q/25*.1,rawGamma:.008+Math.random()*.004+q/25*.002,rawTheta:-.03-Math.random()*.04-q/25*.02,rawVega:.15+Math.random()*.1+q/25*.05,rawCallIV:20+Math.random()*15+q/25*10,rawPutIV:22+Math.random()*13+q/25*8,strikePrice:24750+Se}}),L=S[0];return S.map((D,q)=>({...D,callDelta:(D.rawCallDelta-L.rawCallDelta)/Math.abs(L.rawCallDelta)*100,putDelta:(D.rawPutDelta-L.rawPutDelta)/Math.abs(L.rawPutDelta)*100,gamma:(D.rawGamma-L.rawGamma)/L.rawGamma*100,theta:(D.rawTheta-L.rawTheta)/Math.abs(L.rawTheta)*100,vega:(D.rawVega-L.rawVega)/L.rawVega*100,callIV:(D.rawCallIV-L.rawCallIV)/L.rawCallIV*100,putIV:(D.rawPutIV-L.rawPutIV)/L.rawPutIV*100}))})(),children:[n.jsx(Sa,{dataKey:"time",axisLine:!0,tickLine:!0,tick:{fontSize:10},interval:3,tickFormatter:S=>{const L=S-1,D=Math.floor(9+L*15/60),q=(15+L*15)%60;return`${D}:${String(q).padStart(2,"0")}`}}),n.jsx(ma,{yAxisId:"left",axisLine:!0,tickLine:!0,tick:{fontSize:10},label:{value:"% Change",angle:-90,position:"insideLeft"}}),n.jsx(ma,{yAxisId:"right",orientation:"right",axisLine:!0,tickLine:!0,tick:{fontSize:10},label:{value:"Strike Price",angle:90,position:"insideRight"}}),n.jsx(zs,{labelFormatter:S=>{const L=Number(S)-1,D=Math.floor(9+L*15/60),q=(15+L*15)%60;return`${D}:${String(q).padStart(2,"0")}`},formatter:(S,L)=>{const D=String(L),q=Number(S);return D==="Strike Price"?[""+q.toFixed(2),D]:[q.toFixed(2)+"%",D]}}),n.jsx(Is,{yAxisId:"left",type:"monotone",dataKey:"callDelta",stroke:"#8b5cf6",strokeWidth:2,dot:!1,name:"Delta CE %"}),n.jsx(Is,{yAxisId:"left",type:"monotone",dataKey:"putDelta",stroke:"#ec4899",strokeWidth:2,dot:!1,name:"Delta PE %"}),n.jsx(Is,{yAxisId:"left",type:"monotone",dataKey:"gamma",stroke:"#10b981",strokeWidth:2,dot:!1,name:"Gamma %"}),n.jsx(Is,{yAxisId:"left",type:"monotone",dataKey:"theta",stroke:"#f59e0b",strokeWidth:2,dot:!1,name:"Theta %"}),n.jsx(Is,{yAxisId:"left",type:"monotone",dataKey:"vega",stroke:"#3b82f6",strokeWidth:2,dot:!1,name:"Vega %"}),n.jsx(Is,{yAxisId:"left",type:"monotone",dataKey:"callIV",stroke:"#6366f1",strokeWidth:2,dot:!1,strokeDasharray:"5 5",name:"IV% CE"}),n.jsx(Is,{yAxisId:"left",type:"monotone",dataKey:"putIV",stroke:"#8b5cf6",strokeWidth:2,dot:!1,strokeDasharray:"5 5",name:"IV% PE"}),n.jsx(Is,{yAxisId:"right",type:"monotone",dataKey:"strikePrice",stroke:"#ef4444",strokeWidth:3,dot:!1,name:"Strike Price"})]})})}),n.jsxs("div",{className:"grid grid-cols-7 gap-4 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Delta CE %"}),n.jsx("div",{className:"text-sm font-bold text-purple-600",children:"+15.6%"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Delta PE %"}),n.jsx("div",{className:"text-sm font-bold text-pink-600",children:"-12.3%"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Gamma %"}),n.jsx("div",{className:"text-sm font-bold text-green-600",children:"+28.7%"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Theta %"}),n.jsx("div",{className:"text-sm font-bold text-yellow-600",children:"-42.1%"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Vega %"}),n.jsx("div",{className:"text-sm font-bold text-blue-600",children:"+18.9%"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"IV %"}),n.jsx("div",{className:"text-sm font-bold text-indigo-600",children:"+24.3%"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Strike Price"}),n.jsx("div",{className:"text-sm font-bold text-red-600",children:"24,785"})]})]})]})})}),n.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center pt-2 border-t border-gray-200 dark:border-gray-700",children:"25 15-Min Intervals Greeks Analysis  Market Hours 9:15 AM - 3:30 PM  Updated Real-time"})]})})})}),n.jsx(St,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 mt-6",children:n.jsxs(Kt,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:[" Advanced Strike ",a.toLocaleString()," Analytics & Insights"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(H,{variant:"outline",size:"sm",className:"h-8 text-xs",children:"Real-Time"}),n.jsx(H,{variant:"outline",size:"sm",className:"h-8 text-xs",children:"Auto-Refresh"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsx(St,{className:"bg-gradient-to-br from-purple-50 to-indigo-50 dark:from-purple-900/20 dark:to-indigo-900/20 border-purple-200 dark:border-purple-800",children:n.jsxs(Kt,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h4",{className:"font-semibold text-purple-800 dark:text-purple-200",children:" Delta-Hedged P&L"}),n.jsx("span",{className:"text-sm font-bold text-green-600",children:"+2,340"})]}),n.jsx("div",{className:"h-32",children:n.jsx(yi,{width:"100%",height:"100%",children:n.jsxs(Dd,{data:[{time:"9:15",option:1200,hedge:-800,net:400},{time:"10:00",option:1800,hedge:-900,net:900},{time:"11:00",option:2200,hedge:-1100,net:1100},{time:"12:00",option:2800,hedge:-1200,net:1600},{time:"1:00",option:3400,hedge:-1e3,net:2400},{time:"2:00",option:3800,hedge:-1100,net:2700},{time:"3:00",option:4200,hedge:-1200,net:3e3}],children:[n.jsx(Sa,{dataKey:"time",axisLine:!1,tickLine:!1,tick:{fontSize:10}}),n.jsx(ma,{axisLine:!1,tickLine:!1,tick:{fontSize:10}}),n.jsx(zs,{}),n.jsx(Is,{type:"monotone",dataKey:"net",stroke:"#8b5cf6",strokeWidth:2,dot:!1}),n.jsx(Is,{type:"monotone",dataKey:"option",stroke:"#10b981",strokeWidth:1,strokeDasharray:"3 3",dot:!1}),n.jsx(Is,{type:"monotone",dataKey:"hedge",stroke:"#ef4444",strokeWidth:1,strokeDasharray:"3 3",dot:!1})]})})}),n.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs mt-3",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-green-600 font-bold",children:"CE P&L"}),n.jsx("div",{children:"4,200"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 font-bold",children:"Hedge P&L"}),n.jsx("div",{children:"-1,200"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-purple-600 font-bold",children:"Net P&L"}),n.jsx("div",{children:"3,000"})]})]})]})}),n.jsx(St,{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 border-green-200 dark:border-green-800",children:n.jsxs(Kt,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h4",{className:"font-semibold text-green-800 dark:text-green-200",children:" Gamma Scalping"}),n.jsx("span",{className:"text-sm font-bold text-green-600",children:"12 Signals"})]}),n.jsx("div",{className:"h-32",children:n.jsx(yi,{width:"100%",height:"100%",children:n.jsxs(Dd,{data:[{time:"9:15",gamma:.008,signal:0,profit:0},{time:"9:30",gamma:.012,signal:1,profit:45},{time:"10:00",gamma:.015,signal:1,profit:78},{time:"10:30",gamma:.018,signal:0,profit:0},{time:"11:00",gamma:.022,signal:1,profit:92},{time:"11:30",gamma:.019,signal:1,profit:67},{time:"12:00",gamma:.025,signal:1,profit:115}],children:[n.jsx(Sa,{dataKey:"time",axisLine:!1,tickLine:!1,tick:{fontSize:10}}),n.jsx(ma,{axisLine:!1,tickLine:!1,tick:{fontSize:10}}),n.jsx(zs,{}),n.jsx(Is,{type:"monotone",dataKey:"gamma",stroke:"#10b981",strokeWidth:2,dot:!1}),n.jsx(Is,{type:"monotone",dataKey:"profit",stroke:"#f59e0b",strokeWidth:2,dot:!1})]})})}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs mt-3",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-green-600 font-bold",children:"Signals Today"}),n.jsx("div",{children:"12 / 8 Profitable"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-yellow-600 font-bold",children:"Avg Profit"}),n.jsx("div",{children:"73 per signal"})]})]})]})}),n.jsx(St,{className:"bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 border-blue-200 dark:border-blue-800",children:n.jsxs(Kt,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-200",children:" IV Skew Analysis"}),n.jsx("span",{className:"text-sm font-bold text-red-600",children:"PUT SKEW"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"text-center p-2 bg-green-100 dark:bg-green-900/30 rounded",children:[n.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"24750 CE IV"}),n.jsxs("div",{className:"font-bold text-green-600",children:[((Nc=(Of=(Nh=(gd=Q==null?void 0:Q.greeks)==null?void 0:gd.data)==null?void 0:Nh[0])==null?void 0:Of.iv)==null?void 0:Nc.toFixed(1))||"16.7","%"]})]}),n.jsxs("div",{className:"text-center p-2 bg-red-100 dark:bg-red-900/30 rounded",children:[n.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"24750 PE IV"}),n.jsxs("div",{className:"font-bold text-red-600",children:[((Ls=(ss=(jc=(bg=Q==null?void 0:Q.greeks)==null?void 0:bg.data)==null?void 0:jc[1])==null?void 0:ss.iv)==null?void 0:Ls.toFixed(1))||"23.1","%"]})]})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Skew Differential"}),n.jsxs("div",{className:"font-bold text-orange-600",children:[((((uu=(Oo=(Xs=Q==null?void 0:Q.greeks)==null?void 0:Xs.data)==null?void 0:Oo[1])==null?void 0:uu.iv)||23.1)-(((ca=(Gm=(Sc=Q==null?void 0:Q.greeks)==null?void 0:Sc.data)==null?void 0:Gm[0])==null?void 0:ca.iv)||16.7)).toFixed(1),"%"]})]}),n.jsx("div",{className:"text-xs text-center p-2 bg-orange-100 dark:bg-orange-900/30 rounded",children:n.jsx("div",{className:"font-medium text-orange-800 dark:text-orange-200",children:"High demand for downside protection"})})]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6",children:[n.jsx(St,{className:"bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 border-orange-200 dark:border-orange-800",children:n.jsxs(Kt,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h4",{className:"font-semibold text-orange-800 dark:text-orange-200",children:" Theta Decay Analysis"}),n.jsx("span",{className:"text-sm font-bold text-red-600",children:"High Risk"})]}),n.jsx("div",{className:"h-32",children:n.jsx(yi,{width:"100%",height:"100%",children:n.jsxs(Dd,{data:[{day:"Today",ceTheta:-.05,peTheta:-.05,combined:-.1},{day:"Day 2",ceTheta:-.08,peTheta:-.08,combined:-.16},{day:"Day 3",ceTheta:-.12,peTheta:-.12,combined:-.24},{day:"Expiry",ceTheta:-.2,peTheta:-.2,combined:-.4}],children:[n.jsx(Sa,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fontSize:10}}),n.jsx(ma,{axisLine:!1,tickLine:!1,tick:{fontSize:10}}),n.jsx(zs,{}),n.jsx(Is,{type:"monotone",dataKey:"combined",stroke:"#f59e0b",strokeWidth:2,dot:!1}),n.jsx(Is,{type:"monotone",dataKey:"ceTheta",stroke:"#10b981",strokeWidth:1,strokeDasharray:"3 3",dot:!1}),n.jsx(Is,{type:"monotone",dataKey:"peTheta",stroke:"#ef4444",strokeWidth:1,strokeDasharray:"3 3",dot:!1})]})})}),n.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs mt-3",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-orange-600 font-bold",children:"Daily Decay"}),n.jsxs("div",{children:["",Math.abs((((hu=(Rf=(xd=Q==null?void 0:Q.greeks)==null?void 0:xd.data)==null?void 0:Rf[0])==null?void 0:hu.theta)||-.05)+(((fu=(Fs=(rl=Q==null?void 0:Q.greeks)==null?void 0:rl.data)==null?void 0:Fs[1])==null?void 0:fu.theta)||-.05)).toFixed(2)]})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-red-600 font-bold",children:"Weekend Risk"}),n.jsxs("div",{children:["",(Math.abs((((Qm=(Xm=(Oi=Q==null?void 0:Q.greeks)==null?void 0:Oi.data)==null?void 0:Xm[0])==null?void 0:Qm.theta)||-.05)+(((kc=(wg=(Jm=Q==null?void 0:Q.greeks)==null?void 0:Jm.data)==null?void 0:wg[1])==null?void 0:kc.theta)||-.05))*2.5).toFixed(2)]})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-purple-600 font-bold",children:"4D Total"}),n.jsxs("div",{children:["",(Math.abs((((ep=(Zm=(mu=Q==null?void 0:Q.greeks)==null?void 0:mu.data)==null?void 0:Zm[0])==null?void 0:ep.theta)||-.05)+(((tp=(Ul=(nl=Q==null?void 0:Q.greeks)==null?void 0:nl.data)==null?void 0:Ul[1])==null?void 0:tp.theta)||-.05))*4).toFixed(2)]})]})]})]})}),n.jsx(St,{className:"bg-gradient-to-br from-cyan-50 to-teal-50 dark:from-cyan-900/20 dark:to-teal-900/20 border-cyan-200 dark:border-cyan-800",children:n.jsxs(Kt,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h4",{className:"font-semibold text-cyan-800 dark:text-cyan-200",children:" Breakeven Probability"}),n.jsx("span",{className:"text-sm font-bold text-cyan-600",children:"Live Analysis"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"text-center p-3 bg-green-100 dark:bg-green-900/30 rounded",children:[n.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"CE Breakeven"}),n.jsx("div",{className:"font-bold text-green-600",children:(24750+(((Ng=($f=(Df=Q==null?void 0:Q.greeks)==null?void 0:Df.data)==null?void 0:$f[0])==null?void 0:Ng.price)||91.1)).toFixed(0)}),n.jsxs("div",{className:"text-xs text-green-600 mt-1",children:[(((24750+(((rp=(yd=(jh=Q==null?void 0:Q.greeks)==null?void 0:jh.data)==null?void 0:yd[0])==null?void 0:rp.price)||91.1))/24741-1)*100).toFixed(1),"% move needed"]}),n.jsx("div",{className:"text-xs font-bold text-green-700 mt-1",children:"Probability: 34%"})]}),n.jsxs("div",{className:"text-center p-3 bg-red-100 dark:bg-red-900/30 rounded",children:[n.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"PE Breakeven"}),n.jsx("div",{className:"font-bold text-red-600",children:(24750-(((Ff=(jg=(Lf=Q==null?void 0:Q.greeks)==null?void 0:Lf.data)==null?void 0:jg[1])==null?void 0:Ff.price)||71.9)).toFixed(0)}),n.jsxs("div",{className:"text-xs text-red-600 mt-1",children:[(((24750-(((np=(Bf=(vd=Q==null?void 0:Q.greeks)==null?void 0:vd.data)==null?void 0:Bf[1])==null?void 0:np.price)||71.9))/24741-1)*-100).toFixed(1),"% move needed"]}),n.jsx("div",{className:"text-xs font-bold text-red-700 mt-1",children:"Probability: 28%"})]})]}),n.jsxs("div",{className:"text-center p-2 bg-purple-100 dark:bg-purple-900/30 rounded",children:[n.jsxs("div",{className:"text-xs text-purple-800 dark:text-purple-200 font-medium",children:["Straddle Breakeven Zone: ",(24750-(((ao=(sp=(Ro=Q==null?void 0:Q.greeks)==null?void 0:Ro.data)==null?void 0:sp[1])==null?void 0:ao.price)||71.9)).toFixed(0)," - ",(24750+(((ys=(Sh=(Sg=Q==null?void 0:Q.greeks)==null?void 0:Sg.data)==null?void 0:Sh[0])==null?void 0:ys.price)||91.1)).toFixed(0)]}),n.jsx("div",{className:"text-xs text-purple-600 mt-1",children:"Combined Probability: 62%"})]})]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mt-6",children:[n.jsx(St,{className:"bg-gradient-to-br from-indigo-50 to-violet-50 dark:from-indigo-900/20 dark:to-violet-900/20 border-indigo-200 dark:border-indigo-800",children:n.jsxs(Kt,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h4",{className:"font-semibold text-indigo-800 dark:text-indigo-200",children:" Flow Intelligence"}),n.jsx("span",{className:"text-sm font-bold text-blue-600",children:"BULLISH"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[n.jsxs("div",{className:"text-center p-2 bg-green-100 dark:bg-green-900/30 rounded",children:[n.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"CE Volume"}),n.jsx("div",{className:"font-bold text-green-600",children:((((Uf=(bd=(Ja=Q==null?void 0:Q.greeks)==null?void 0:Ja.data)==null?void 0:bd[0])==null?void 0:Uf.price)||91.1)*1e3).toFixed(0)})]}),n.jsxs("div",{className:"text-center p-2 bg-red-100 dark:bg-red-900/30 rounded",children:[n.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"PE Volume"}),n.jsx("div",{className:"font-bold text-red-600",children:((((mi=(ap=(kg=Q==null?void 0:Q.greeks)==null?void 0:kg.data)==null?void 0:ap[1])==null?void 0:mi.price)||71.9)*850).toFixed(0)})]})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Put/Call Ratio"}),n.jsx("div",{className:"font-bold text-purple-600",children:((((nx=(kh=(Cg=Q==null?void 0:Q.greeks)==null?void 0:Cg.data)==null?void 0:kh[1])==null?void 0:nx.price)||71.9)*850/((((pu=(sx=(ip=Q==null?void 0:Q.greeks)==null?void 0:ip.data)==null?void 0:sx[0])==null?void 0:pu.price)||91.1)*1e3)).toFixed(2)})]}),n.jsx("div",{className:"text-center p-2 bg-blue-100 dark:bg-blue-900/30 rounded",children:n.jsx("div",{className:"text-xs font-medium text-blue-800 dark:text-blue-200",children:"More call buying than put buying"})})]})]})}),n.jsx(St,{className:"bg-gradient-to-br from-red-50 to-pink-50 dark:from-red-900/20 dark:to-pink-900/20 border-red-200 dark:border-red-800",children:n.jsxs(Kt,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h4",{className:"font-semibold text-red-800 dark:text-red-200",children:" Risk Dashboard"}),n.jsx("span",{className:"text-sm font-bold text-yellow-600",children:"MODERATE"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Pin Risk"}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-16 h-2 bg-gray-200 dark:bg-gray-700 rounded",children:n.jsx("div",{className:"w-3/4 h-2 bg-yellow-500 rounded"})}),n.jsx("span",{className:"text-xs font-bold text-yellow-600",children:"75%"})]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Time Decay"}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-16 h-2 bg-gray-200 dark:bg-gray-700 rounded",children:n.jsx("div",{className:"w-4/5 h-2 bg-orange-500 rounded"})}),n.jsx("span",{className:"text-xs font-bold text-orange-600",children:"80%"})]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Vol Risk"}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-16 h-2 bg-gray-200 dark:bg-gray-700 rounded",children:n.jsx("div",{className:"w-1/2 h-2 bg-green-500 rounded"})}),n.jsx("span",{className:"text-xs font-bold text-green-600",children:"50%"})]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Liquidity"}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-16 h-2 bg-gray-200 dark:bg-gray-700 rounded",children:n.jsx("div",{className:"w-5/6 h-2 bg-blue-500 rounded"})}),n.jsx("span",{className:"text-xs font-bold text-blue-600",children:"85%"})]})]})]})]})}),n.jsx(St,{className:"bg-gradient-to-br from-emerald-50 to-green-50 dark:from-emerald-900/20 dark:to-green-900/20 border-emerald-200 dark:border-emerald-800",children:n.jsxs(Kt,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h4",{className:"font-semibold text-emerald-800 dark:text-emerald-200",children:" AI Recommendation"}),n.jsx("span",{className:"text-sm font-bold text-green-600",children:"BUY"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"text-center p-2 bg-green-100 dark:bg-green-900/30 rounded",children:[n.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Strategy"}),n.jsx("div",{className:"font-bold text-green-800 dark:text-green-200",children:"ATM Straddle"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Entry"}),n.jsxs("div",{className:"font-bold text-blue-600",children:["",((((Ch=(Eg=(io=Q==null?void 0:Q.greeks)==null?void 0:io.data)==null?void 0:Eg[0])==null?void 0:Ch.price)||91.1)+(((da=(gu=(Ri=Q==null?void 0:Q.greeks)==null?void 0:Ri.data)==null?void 0:gu[1])==null?void 0:da.price)||71.9)).toFixed(0)]})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Target"}),n.jsxs("div",{className:"font-bold text-green-600",children:["",(((((Eh=(Bs=(Cc=Q==null?void 0:Q.greeks)==null?void 0:Cc.data)==null?void 0:Bs[0])==null?void 0:Eh.price)||91.1)+(((na=(va=(Tg=Q==null?void 0:Q.greeks)==null?void 0:Tg.data)==null?void 0:va[1])==null?void 0:na.price)||71.9))*1.5).toFixed(0)]})]})]}),n.jsx("div",{className:"text-xs p-2 bg-blue-100 dark:bg-blue-900/30 rounded",children:n.jsx("div",{className:"font-medium text-blue-800 dark:text-blue-200",children:"High IV suggests volatility expansion expected"})})]})]})})]}),n.jsx("div",{className:"mt-6 p-3 bg-gray-50 dark:bg-gray-900/30 rounded-lg border border-gray-200 dark:border-gray-700",children:n.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 text-center",children:[" ",n.jsx("strong",{children:"Advanced Analytics Engine"}),"  Real-time Greeks  Delta-hedged P&L  Gamma scalping  IV skew analysis  Risk metrics  AI recommendations  Updated every 30 seconds"]})})]})})]}),n.jsxs(Kh,{value:"visualai",className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("div",{className:"flex items-center gap-3"}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs(Ms,{value:Hn,onValueChange:Ci,children:[n.jsx(Ns,{className:"w-[280px]","data-testid":"select-pattern",children:n.jsx(Os,{placeholder:"Select pattern to detect..."})}),n.jsxs(js,{children:[n.jsx(gt,{value:"head_shoulders",children:"Head & Shoulders (1<2>1<3>1)"}),n.jsx(gt,{value:"double_top",children:"Double Top (1<2=1)"}),n.jsx(gt,{value:"double_bottom",children:"Double Bottom (1>2=1)"}),n.jsx(gt,{value:"ascending_triangle",children:"Ascending Triangle (1<2<3=3)"}),n.jsx(gt,{value:"descending_triangle",children:"Descending Triangle (1>2>3=3)"}),n.jsx(gt,{value:"cup_handle",children:"Cup & Handle (1>2>3<4>5)"}),n.jsx(gt,{value:"bullish_flag",children:"Bullish Flag (1<2>3<4>5)"}),n.jsx(gt,{value:"bearish_flag",children:"Bearish Flag (1>2<3>4<5)"}),n.jsx(gt,{value:"wedge_rising",children:"Rising Wedge (1<2<3<4<5)"}),n.jsx(gt,{value:"wedge_falling",children:"Falling Wedge (1>2>3>4>5)"}),n.jsx(gt,{value:"triple_top",children:"Triple Top (1<2=3=1)"}),n.jsx(gt,{value:"triple_bottom",children:"Triple Bottom (1>2=3=1)"}),n.jsx(gt,{value:"diamond",children:"Diamond (1<2>3<4>5)"}),n.jsx(gt,{value:"rectangle",children:"Rectangle (1>2<3>4<5)"}),n.jsx(gt,{value:"pennant",children:"Pennant (1>2<3>4<5>1)"})]})]}),n.jsx(Sr,{variant:Hn?"default":"secondary",className:Hn?"bg-green-100 text-green-800 border-green-300":"",children:Hn?`${td(Hn)} Selected`:"No Pattern Selected"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded-lg bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20",children:[n.jsx("label",{className:"text-sm font-medium",children:"Auto-Detection"}),n.jsx(H,{variant:Ks?"default":"outline",size:"sm",onClick:()=>{an(!Ks),Ks?(Pi(!1),Ga([]),_l([]),gr({title:" Auto-Detection Disabled",description:"Pattern scanning stopped."})):(Pi(!0),gr({title:" Auto-Detection Enabled",description:"Scanning for saved patterns in real-time..."}))},className:Ht("transition-all duration-200",Ks?"bg-green-600 hover:bg-green-700 text-white":"border-gray-300 hover:bg-gray-50"),"data-testid":"button-auto-detection-toggle",children:Ks?n.jsxs(n.Fragment,{children:[n.jsx(Ui,{className:"h-3 w-3 mr-1"}),"ON"]}):n.jsxs(n.Fragment,{children:[n.jsx(go,{className:"h-3 w-3 mr-1"}),"OFF"]})})]}),n.jsxs(H,{variant:"outline",size:"sm",onClick:()=>cd(!kf),className:"flex items-center gap-2","data-testid":"button-pattern-manager",children:[n.jsx(Gl,{className:"h-3 w-3"}),"Manage Patterns (",ls.length,")"]})]})]}),Ks&&$s.length>0&&n.jsxs("div",{className:"mb-4 p-4 bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 border-l-4 border-green-500 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(nm,{className:"h-5 w-5 text-green-600"}),n.jsxs("span",{className:"font-semibold text-green-800 dark:text-green-200",children:[" LIVE DETECTION: ",$s.length," High-Confidence Pattern Match",$s.length>1?"es":""," Found!"]})]}),n.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[$s.slice(0,3).map((S,L)=>n.jsxs(Sr,{variant:"secondary",className:"bg-green-100 text-green-800 border-green-300",children:[S.patternName,": ",(S.confidence*100).toFixed(1),"% match"]},L)),$s.length>3&&n.jsxs(Sr,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:["+",$s.length-3," more..."]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsx(St,{className:"lg:col-span-2 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:n.jsxs(Kt,{className:"p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[n.jsx(ia,{className:"h-5 w-5"}),"Interactive Chart"]}),n.jsx("div",{className:"flex gap-2",children:n.jsxs(H,{variant:rs?"default":"outline",size:"sm",onClick:()=>{if(Or.length===0){gr({title:" No Points Selected",description:"Please select points on the chart first.",variant:"destructive"});return}Qi(!0)},className:"bg-purple-600 text-white hover:bg-purple-700","data-testid":"button-save-pattern",children:[n.jsx(vi,{className:"h-3 w-3 mr-1"}),"Save Pattern"]})})]}),n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(H,{variant:"outline",size:"sm",onClick:Es,"data-testid":"button-expand",children:[n.jsx(ia,{className:"h-3 w-3 mr-1"}),Dm?"Collapse":"Expand"]}),n.jsxs(H,{variant:"outline",size:"sm",onClick:Rr,"data-testid":"button-reset",children:[n.jsx(go,{className:"h-3 w-3 mr-1"}),"Reset"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[!Hn&&n.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 flex items-center gap-1",children:[n.jsx(Np,{className:"h-3 w-3 text-green-600"}),"Points: ",Or.length]}),eu.length>0&&n.jsxs(Sr,{variant:"secondary",className:"bg-purple-100 text-purple-800 border-purple-300",children:[eu.length," S/R Pattern",eu.length>1?"s":""," Detected"]})]})]}),n.jsx("div",{className:"mb-4 p-3 bg-gradient-to-r from-gray-50 to-blue-50 dark:from-gray-800 dark:to-blue-900/20 rounded-lg border",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:Ht("w-2 h-2 rounded-full",Ks&&tn?"bg-green-500 animate-pulse":"bg-gray-400")}),n.jsx("span",{className:"text-sm font-medium",children:Ks?"Real-time Pattern Detection ACTIVE":"Manual Pattern Selection Mode"})]}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600 dark:text-gray-400",children:[n.jsxs("span",{children:["Saved Patterns: ",ls.length]}),n.jsx("span",{children:""}),n.jsx("span",{children:"Threshold: 75%+"}),n.jsx("span",{children:""}),n.jsxs("span",{children:["Selected Points: ",Or.length]})]})]})}),n.jsx("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 rounded-lg p-6 border-2 border-purple-500/30 shadow-2xl",children:n.jsxs("div",{className:"text-center space-y-4",children:[n.jsx("div",{className:"text-purple-400 text-lg font-semibold",children:" Test AI Engine"}),n.jsx("div",{className:"text-gray-300 text-sm",children:"Revolutionary Pattern Recognition System"}),n.jsx("div",{className:"text-xs text-gray-500 bg-slate-800/50 p-3 rounded-lg",children:"Advanced AI-powered pattern detection with 75% matching threshold"})]})}),n.jsxs("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(qk,{className:"h-4 w-4 text-blue-600"}),n.jsx("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Show Time Filter"})]}),n.jsxs("div",{className:"text-xs text-blue-600 dark:text-blue-300",children:["Current range: ",Qc(Pr[0])," - ",Qc(Pr[1])]})]})]})}),n.jsx(St,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:n.jsxs(Kt,{className:"p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Oc,{className:"h-5 w-5"}),n.jsx("h3",{className:"text-lg font-semibold",children:"Pattern Manager"})]}),n.jsxs(Sr,{variant:"outline",className:"bg-purple-100 text-purple-800 border-purple-300",children:[ls.length," Saved Patterns"]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Saved Patterns"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"text-xs text-gray-500",children:[ls.length," patterns"]}),Ks&&n.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse",title:"Auto-detection active"})]})]}),n.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:ls.length===0?n.jsxs("div",{className:"p-3 text-center text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-700/50 rounded-lg border-2 border-dashed border-gray-300 dark:border-gray-600",children:[n.jsx(Np,{className:"h-6 w-6 mx-auto mb-2 text-gray-400"}),n.jsx("p",{className:"text-sm",children:"No patterns saved yet"}),n.jsx("p",{className:"text-xs mt-1",children:"Select points on chart and save your first pattern!"})]}):ls.map((S,L)=>{var fe,Se,ve,Ge;const D=$s.some(Qe=>Qe.patternId===S.id),q=$s.find(Qe=>Qe.patternId===S.id);return n.jsx("div",{className:Ht("p-3 border rounded-lg transition-all hover:shadow-md relative",D?"border-green-300 bg-green-50 dark:bg-green-900/20 shadow-md":"border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700/50 hover:border-purple-300"),"data-testid":`pattern-item-${L}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("span",{className:"font-medium text-sm truncate",children:S.name}),D&&n.jsxs(Sr,{variant:"secondary",className:"bg-green-100 text-green-800 border-green-300 text-xs",children:[" ",(q.confidence*100).toFixed(0),"%"]})]}),n.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[((fe=S.points)==null?void 0:fe.length)||0," points  ",S.createdAt&&!isNaN(new Date(S.createdAt).getTime())?ho(new Date(S.createdAt),"MMM d"):"Recently"]}),((Se=S.rays)==null?void 0:Se.sl)&&((ve=S.rays)==null?void 0:ve.breakout)&&((Ge=S.rays)==null?void 0:Ge.target)&&n.jsxs("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:["R:R ",(Math.abs(S.rays.target.price-S.rays.breakout.price)/Math.abs(S.rays.breakout.price-S.rays.sl.price)).toFixed(2)]})]}),n.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[n.jsx(H,{variant:"ghost",size:"sm",onClick:Qe=>{Qe.stopPropagation(),Pl(S.id)},className:"h-8 w-8 p-0 hover:bg-blue-100 hover:text-blue-600","data-testid":`button-apply-pattern-${L}`,title:"Apply pattern to chart",children:n.jsx(nm,{className:"h-3 w-3"})}),n.jsx(H,{variant:"ghost",size:"sm",onClick:Qe=>{Qe.stopPropagation(),pc(S.id)},className:"h-8 w-8 p-0 hover:bg-red-100 hover:text-red-600 absolute top-1 right-1","data-testid":`button-delete-pattern-${L}`,title:"Delete pattern",children:n.jsx(za,{className:"h-3 w-3"})})]})]})},S.id)})})]}),La.length>0&&n.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-green-50 to-orange-50 dark:from-green-900/20 dark:to-orange-900/20 border-l-4 border-green-500 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(nm,{className:"h-5 w-5 text-green-600"}),n.jsxs("span",{className:"font-semibold text-green-800 dark:text-green-200",children:[" Pattern Detection Results: ",La.length," Match",La.length>1?"es":""," Found"]})]}),n.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:La.map((S,L)=>n.jsx("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded border",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:S.name}),n.jsxs(Sr,{variant:"secondary",className:"bg-green-100 text-green-800 border-green-300",children:[(S.confidence*100).toFixed(1),"% match"]})]}),n.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:["Candles ",S.startIndex+1,"-",S.endIndex+1,"  ",S.matchScore,"/",S.totalRelationships," relationships matched"]})]})},S.id))})]}),Ks&&n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(nm,{className:"h-4 w-4 text-green-600"}),n.jsx("span",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:"Live Detection Results"}),n.jsx("div",{className:Ht("w-2 h-2 rounded-full",tn?"bg-green-500 animate-pulse":"bg-gray-400")})]}),n.jsx("div",{className:"p-3 bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900/10 dark:to-blue-900/10 rounded-lg border border-green-200 dark:border-green-800",children:$s.length>0?n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"text-sm font-semibold text-green-800 dark:text-green-200 mb-2",children:[" ",$s.length," High-Confidence Match",$s.length>1?"es":""," Found!"]}),$s.slice(0,2).map((S,L)=>n.jsxs("div",{className:"flex items-center justify-between p-2 bg-white dark:bg-gray-800 rounded border",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-medium text-sm truncate",children:S.patternName}),n.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Candles ",S.startIndex,"-",S.endIndex]})]}),n.jsx("div",{className:"flex items-center gap-2 ml-2",children:n.jsxs(Sr,{variant:"secondary",className:"bg-green-100 text-green-800 text-xs",children:[(S.confidence*100).toFixed(1),"%"]})})]},L)),$s.length>2&&n.jsxs("div",{className:"text-xs text-center text-gray-600 dark:text-gray-400",children:["+",$s.length-2," more matches detected..."]})]}):n.jsxs("div",{className:"text-center text-sm text-gray-600 dark:text-gray-400",children:[n.jsx(Zl,{className:"h-5 w-5 mx-auto mb-2"}),n.jsx("p",{children:"Scanning for pattern matches..."}),n.jsx("p",{className:"text-xs mt-1",children:"Threshold: 75%+ confidence required"})]})})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium text-purple-600 dark:text-purple-400",children:"Current Selection"}),!Hn&&Or.length>0&&n.jsx(H,{variant:"ghost",size:"sm",onClick:Rr,className:"text-xs h-6 px-2 text-red-600 hover:text-red-800 hover:bg-red-50",children:"Clear All"})]}),n.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:Or.length===0?n.jsxs("div",{className:"p-3 text-center text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-dashed border-gray-300 dark:border-gray-600",children:[n.jsx(Np,{className:"h-5 w-5 mx-auto mb-2 text-gray-400"}),!Hn&&n.jsx("p",{className:"text-xs",children:"Click on chart to select points"}),Hn&&n.jsx("p",{className:"text-xs",children:"Pattern detection mode active"})]}):Or.sort((S,L)=>S.pointNumber-L.pointNumber).map((S,L)=>n.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[n.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),n.jsxs("span",{className:"text-sm font-mono",children:["#",S.pointNumber]}),n.jsxs("span",{className:"text-sm font-mono truncate",children:["",S.price.toFixed(2)]})]}),n.jsxs(Ms,{defaultValue:S.label||"none",onValueChange:D=>{D!=="none"&&Cl(L,D)},"data-testid":`select-point-label-${L}`,children:[n.jsx(Ns,{className:"w-20 h-7 text-xs",children:n.jsx(Os,{placeholder:"Label"})}),n.jsxs(js,{children:[n.jsx(gt,{value:"none",children:"None"}),n.jsx(gt,{value:"SL",children:"SL"}),n.jsx(gt,{value:"Target",children:"Target"}),n.jsx(gt,{value:"Breakout",children:"Breakout"}),n.jsx(gt,{value:"Entry",children:"Entry"})]})]})]},`${S.pointNumber}_${L}`))}),n.jsxs("div",{className:"mt-4 p-3 bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 rounded-lg border border-purple-200 dark:border-purple-700",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Oc,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm font-semibold text-purple-800 dark:text-purple-200",children:"Quick Actions"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(H,{variant:"outline",size:"sm",onClick:()=>{if(ls.length===0){gr({title:" No Patterns Available",description:"Save some patterns first to enable auto-detection."});return}oh(),gr({title:" Manual Scan Triggered",description:"Scanning current chart for pattern matches..."})},className:"w-full justify-start text-xs","data-testid":"button-manual-scan",children:[n.jsx(Zl,{className:"h-3 w-3 mr-2"}),"Manual Scan (",ls.length," patterns)"]}),n.jsxs(H,{variant:"outline",size:"sm",onClick:()=>{const S=JSON.stringify(ls,null,2);navigator.clipboard.writeText(S),gr({title:" Patterns Copied",description:`${ls.length} pattern(s) copied to clipboard as JSON.`})},className:"w-full justify-start text-xs","data-testid":"button-export-patterns",children:[n.jsx(Bi,{className:"h-3 w-3 mr-2"}),"Export All Patterns"]}),n.jsxs(H,{variant:"outline",size:"sm",onClick:()=>{if($s.length===0){gr({title:" No Active Matches",description:"No pattern matches found to clear."});return}Ga([]),_l([]),gr({title:" Overlays Cleared",description:"All pattern overlays removed from chart."})},className:"w-full justify-start text-xs","data-testid":"button-clear-overlays",children:[n.jsx(Wr,{className:"h-3 w-3 mr-2"}),"Clear Overlays"]})]})]})]})]})})]}),n.jsx(St,{className:"bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 border-purple-200 dark:border-purple-700",children:n.jsxs(Kt,{className:"p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(Oc,{className:"h-5 w-5"}),n.jsx("h3",{className:"text-lg font-semibold text-purple-800 dark:text-purple-200",children:"AI Pattern Recognition Summary"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border",children:[n.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pattern Type"}),n.jsx("div",{className:"font-semibold text-purple-800 dark:text-purple-200",children:"Ascending Triangle"})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border",children:[n.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Confidence Level"}),n.jsx("div",{className:"font-semibold text-green-600 dark:text-green-400",children:"High (87%)"})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border",children:[n.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Selected Points"}),n.jsx("div",{className:"font-semibold text-blue-600 dark:text-blue-400",children:"5 Critical Points"})]})]}),n.jsxs("div",{className:"mt-4 p-3 bg-white dark:bg-gray-800 rounded-lg border",children:[n.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"AI Recommendations"}),n.jsxs("div",{className:"text-sm space-y-1",children:[n.jsx("div",{className:"text-green-600",children:" Strong upward momentum detected"}),n.jsx("div",{className:"text-blue-600",children:" Watch for breakout above 14,470"}),n.jsx("div",{className:"text-orange-600",children:" Set stop loss below 14,400 support"}),n.jsx("div",{className:"text-purple-600",children:" Target projection: 14,520 - 14,580"})]})]})]})})]})]})})}),n.jsx(bn,{open:rs,onOpenChange:Qi,children:n.jsxs(pn,{className:"max-w-md max-h-96 overflow-y-auto",children:[n.jsx(Zn,{children:n.jsxs(Xn,{className:"flex items-center gap-2",children:[n.jsx(Oc,{className:"h-5 w-5"}),"Save Pattern for AI Recognition"]})}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsx(Un,{htmlFor:"pattern-name",className:"text-sm font-medium",children:"Pattern Name"}),n.jsx(Nr,{id:"pattern-name",value:jr,onChange:S=>dd(S.target.value),placeholder:"e.g., Bullish Triangle, Support Breakout...",className:"mt-1","data-testid":"input-pattern-name"})]}),n.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[n.jsx("div",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-2",children:"Pattern Summary"}),n.jsxs("div",{className:"text-xs text-blue-700 dark:text-blue-300 space-y-1",children:[n.jsxs("div",{children:[" Points selected: ",Or.length]}),n.jsxs("div",{children:[" Rays added: ",Ln.length]}),n.jsxs("div",{children:[" Chart symbol: ",o]}),n.jsx("div",{children:" Will be used for auto-detection at 75% match threshold"})]})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(H,{variant:"outline",onClick:()=>{Qi(!1),dd("")},"data-testid":"button-cancel-save",children:"Cancel"}),n.jsxs(H,{onClick:()=>{if(!jr.trim()){gr({title:" Name Required",description:"Please enter a name for your pattern.",variant:"destructive"});return}Fm(jr.trim()),Qi(!1),dd(""),ls.length===0&&setTimeout(()=>{an(!0),Pi(!0),gr({title:" Auto-Detection Enabled",description:"Your first pattern is saved! Auto-detection is now active."})},1e3)},className:"bg-purple-600 hover:bg-purple-700 text-white","data-testid":"button-confirm-save",children:[n.jsx(vi,{className:"h-3 w-3 mr-1"}),"Save Pattern"]})]})]})]})}),n.jsx(bn,{open:!!mc,onOpenChange:S=>!S&&pc(null),children:n.jsxs(pn,{className:"max-w-md max-h-96 overflow-y-auto",children:[n.jsx(Zn,{children:n.jsxs(Xn,{className:"flex items-center gap-2 text-red-600",children:[n.jsx(za,{className:"h-5 w-5"}),"Delete Pattern"]})}),n.jsxs("div",{className:"space-y-2",children:[mc&&(()=>{var L;const S=ls.find(D=>D.id===mc);return S?n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:["Are you sure you want to delete the pattern ",n.jsxs("strong",{children:['"',S.name,'"']}),"?"]}),n.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:n.jsxs("div",{className:"text-sm text-red-800 dark:text-red-200 space-y-1",children:[n.jsxs("div",{children:[" ",((L=S.points)==null?void 0:L.length)||0," points will be lost"]}),n.jsx("div",{children:" Pattern will be removed from auto-detection"}),n.jsx("div",{children:" This action cannot be undone"})]})})]}):null})(),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(H,{variant:"outline",onClick:()=>pc(null),"data-testid":"button-cancel-delete",children:"Cancel"}),n.jsxs(H,{variant:"destructive",onClick:()=>{mc&&(Tl(mc),pc(null))},className:"bg-red-600 hover:bg-red-700 text-white","data-testid":"button-confirm-delete",children:[n.jsx(za,{className:"h-3 w-3 mr-1"}),"Delete Pattern"]})]})]})]})}),n.jsx(bn,{open:sd,onOpenChange:Sf,children:n.jsxs(pn,{className:"max-w-md max-h-96 overflow-y-auto",children:[n.jsx(Zn,{children:n.jsx(Xn,{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"TRADE HISTORY SUMMARY"})}),n.jsx("div",{className:"space-y-2",children:n.jsxs(Pb,{children:[n.jsx(Ab,{className:"bg-gray-800",children:n.jsxs(Uh,{className:"border-gray-600",children:[n.jsx(Tn,{className:"text-white text-xs p-1",children:"Symbol"}),n.jsx(Tn,{className:"text-white text-xs p-1",children:"Action"}),n.jsx(Tn,{className:"text-white text-xs p-1",children:"Qty"}),n.jsx(Tn,{className:"text-white text-xs p-1",children:"Entry"})]})}),n.jsx(_b,{children:Qo.map((S,L)=>n.jsxs(Uh,{className:"border-gray-200 dark:border-gray-700","data-testid":`row-trade-${L}`,children:[n.jsx(Kn,{className:"text-xs p-1 text-gray-800 dark:text-white",children:S.symbol}),n.jsx(Kn,{className:"text-xs p-1 text-gray-800 dark:text-white",children:S.action}),n.jsx(Kn,{className:"text-xs p-1 text-gray-800 dark:text-white",children:S.qty}),n.jsx(Kn,{className:"text-xs p-1 text-gray-800 dark:text-white",children:S.entry})]},L))})]})})]})}),le&&(()=>{const S=["EMA","SMA","RSI","MACD","BB","WMA","ATR","Stoch","CCI","MFI","Williams %R","ROC","ADX","PSAR","VWAP"],L=[{value:"none",label:"None"},{value:"above",label:"Above"},{value:"below",label:"Below"},{value:"cross_above",label:"Cross Above"},{value:"cross_below",label:"Cross Below"},{value:"equal",label:"Equal To"},{value:"greater_than",label:"Greater Than"},{value:"less_than",label:"Less Than"}],D=[{value:"none",label:"None"},{value:"prev_low",label:"Previous Candle Low"},{value:"prev_high",label:"Previous Candle High"},{value:"fixed_percent",label:"Fixed Percentage"},{value:"atr_multiple",label:"ATR Multiple"},{value:"support_resistance",label:"Support/Resistance"}],q=[{value:"none",label:"None"},{value:"1:1",label:"1:1 Risk-Reward"},{value:"1:2",label:"1:2 Risk-Reward"},{value:"1:3",label:"1:3 Risk-Reward"},{value:"1:4",label:"1:4 Risk-Reward"},{value:"time_exit",label:"Time Exit (Candle Close)"},{value:"trailing_stop",label:"Trailing Stop"},{value:"market_close",label:"Market Close"}],fe=(ve,Ge)=>{ot(Qe=>({...Qe,[ve]:Ge}))},Se=async()=>{if(!We.name.trim()||!We.indicator||!It.trim()){alert("Please fill in strategy name, select an indicator, and enter a period");return}const ve={name:We.name,indicator:We.indicator,period:It,entryCondition:We.entryCondition,slCondition:We.slCondition,exitRule:We.exitRule,trailSL:We.trailSL,dateAdded:(de==null?void 0:de.dateAdded)||ho(new Date,"dd MMM")};try{if(de){if(de.isDefault||de.id<=8){const Ge=Ue.map(Qe=>Qe.id===de.id?{...ve,id:de.id,isDefault:!0}:Qe);Ae(Ge),localStorage.setItem("defaultStrategies",JSON.stringify(Ge))}else await ce(de.id,ve);ie(null)}else await ue(ve);ot({name:"",indicator:"",entryCondition:"above",slCondition:"prev_low",exitRule:"1:1",trailSL:!1}),tr(""),te(!1)}catch(Ge){console.error(" Error saving strategy:",Ge),alert(" Failed to save strategy. Please try again.")}};return n.jsx(bn,{open:le,onOpenChange:ve=>{te(ve),ve||(ie(null),ot({name:"",indicator:"",entryCondition:"above",slCondition:"prev_low",exitRule:"1:1",trailSL:!1}),tr(""),we(""))},children:n.jsxs(pn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(Zn,{children:n.jsx(Xn,{className:"text-lg font-semibold text-gray-900 dark:text-white",children:de?"Edit Strategy":"Add Custom Strategy"})}),n.jsxs("div",{className:"space-y-6 p-1",children:[n.jsxs("div",{className:"space-y-3 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h3",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Import from Code"}),n.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-300",children:"(Optional - paste strategy code from shared strategies)"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Nr,{value:Ct,onChange:ve=>we(ve.target.value),placeholder:"Enter strategy code (e.g., ABCD1234EFGH)",className:"flex-1","data-testid":"input-strategy-code"}),n.jsx(H,{type:"button",onClick:re,variant:"outline",size:"sm",className:"px-4","data-testid":"button-import-code",children:"Import"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Un,{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Strategy Name *"}),n.jsx(Nr,{value:We.name,onChange:ve=>fe("name",ve.target.value),placeholder:"Enter custom strategy name",className:"w-full","data-testid":"input-strategy-name"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Un,{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Indicator *"}),n.jsxs(Ms,{value:We.indicator,onValueChange:ve=>fe("indicator",ve),children:[n.jsx(Ns,{"data-testid":"select-indicator",children:n.jsx(Os,{placeholder:"Search and select indicator"})}),n.jsx(js,{children:S.map(ve=>n.jsx(gt,{value:ve,children:ve},ve))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Un,{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Period *"}),n.jsx(Nr,{type:"number",value:It,onChange:ve=>tr(ve.target.value),placeholder:"Enter period (e.g., 9, 14, 21, 50)",className:"w-full","data-testid":"input-period",min:"1",max:"200"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Un,{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Entry Condition"}),n.jsxs(Ms,{value:We.entryCondition,onValueChange:ve=>fe("entryCondition",ve),children:[n.jsx(Ns,{"data-testid":"select-entry-condition",children:n.jsx(Os,{})}),n.jsx(js,{children:L.map(ve=>n.jsx(gt,{value:ve.value,children:ve.label},ve.value))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Un,{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Stop Loss Condition"}),n.jsxs(Ms,{value:We.slCondition,onValueChange:ve=>fe("slCondition",ve),children:[n.jsx(Ns,{"data-testid":"select-sl-condition",children:n.jsx(Os,{})}),n.jsx(js,{children:D.map(ve=>n.jsx(gt,{value:ve.value,children:ve.label},ve.value))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Un,{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Exit Rules"}),n.jsxs(Ms,{value:We.exitRule,onValueChange:ve=>fe("exitRule",ve),children:[n.jsx(Ns,{"data-testid":"select-exit-rule",children:n.jsx(Os,{})}),n.jsx(js,{children:q.map(ve=>n.jsx(gt,{value:ve.value,children:ve.label},ve.value))})]})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("input",{type:"checkbox",id:"trailSL",checked:We.trailSL,onChange:ve=>fe("trailSL",ve.target.checked),className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500","data-testid":"checkbox-trail-sl"}),n.jsx(Un,{htmlFor:"trailSL",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Enable Trailing Stop Loss"})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[n.jsx(H,{variant:"outline",onClick:()=>te(!1),"data-testid":"button-cancel-strategy",children:"Cancel"}),n.jsx(H,{onClick:Se,className:"bg-indigo-600 hover:bg-indigo-700 text-white","data-testid":"button-save-strategy",children:de?"Update Strategy":"Save Strategy"})]})]})]})})})(),n.jsx(bn,{open:Fe,onOpenChange:Ye,children:n.jsxs(pn,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsx(Zn,{children:n.jsx(Xn,{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Strategy Test Results"})}),n.jsx("div",{className:"space-y-2",children:lt.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[n.jsx("div",{className:"mb-4",children:n.jsx(Gn,{className:"h-12 w-12 mx-auto text-gray-300"})}),n.jsx("p",{className:"text-lg",children:"No test results yet"}),n.jsx("p",{className:"text-sm",children:'Click "Test" on any strategy card to run a simulation'})]}):n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("h3",{className:"text-md font-medium text-gray-900 dark:text-white",children:["Recent Test Results (",lt.length,")"]}),n.jsx(H,{variant:"outline",size:"sm",onClick:()=>pt([]),className:"text-gray-600 dark:text-gray-300",children:"Clear All"})]}),n.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:lt.map(S=>n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex justify-between items-start mb-3",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:S.strategyName}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[S.symbol,"  ",S.timeframe,"  ",S.indicator]})]}),n.jsx("div",{className:"text-right",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-md ${S.status==="no_trades"?"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200":S.pnl>0?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:S.status==="no_trades"?"0 Trades":`${S.pnl>0?"+":""}${S.pnl} `})})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Entry:"}),n.jsx("span",{className:"ml-2 font-medium text-gray-900 dark:text-white",children:S.status==="no_trades"?"N/A":S.entryPrice})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Exit:"}),n.jsx("span",{className:"ml-2 font-medium text-gray-900 dark:text-white",children:S.status==="no_trades"?"N/A":S.exitPrice})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Direction:"}),n.jsx("span",{className:`ml-2 font-medium ${S.status==="no_trades"?"text-gray-600 dark:text-gray-400":S.direction==="BUY"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:S.status==="no_trades"?"NO TRADES":S.direction})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Status:"}),n.jsx("span",{className:"ml-2 font-medium text-gray-900 dark:text-white",children:S.status==="no_trades"?"No Signals Generated":S.status})]})]}),n.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600",children:n.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500 dark:text-gray-400",children:[n.jsxs("span",{children:["Entry: ",S.conditions.entry," | SL: ",S.conditions.stopLoss," | Exit: ",S.conditions.exit]}),n.jsx("span",{children:new Date(S.timestamp).toLocaleString()})]})})]},S.id))})]})}),n.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200 dark:border-gray-700",children:n.jsx(H,{variant:"outline",onClick:()=>Ye(!1),"data-testid":"button-close-orders",children:"Close"})})]})}),n.jsx(bn,{open:h,onOpenChange:f,children:n.jsxs(pn,{className:"max-w-lg",children:[n.jsx(Zn,{children:n.jsx(Xn,{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Share Strategy Code"})}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Strategy Code"}),n.jsxs(H,{variant:"outline",size:"sm",onClick:ee,className:"h-8 text-xs","data-testid":"button-copy-code",children:[n.jsx(Bi,{className:"h-3 w-3 mr-1"}),"Copy"]})]}),n.jsx("div",{className:"font-mono text-sm bg-white dark:bg-gray-800 p-3 rounded border border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 break-all",children:m})]}),n.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:"Share this code with others to import the strategy"}),n.jsx("div",{className:"flex justify-end gap-2 pt-2",children:n.jsx(H,{variant:"outline",onClick:()=>f(!1),"data-testid":"button-close-share",children:"Close"})})]})]})}),n.jsx(bn,{open:N,onOpenChange:w,children:n.jsxs(pn,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[n.jsx(Zn,{children:n.jsxs(Xn,{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[n.jsx("span",{className:"text-blue-500",children:""}),"Advanced Trading Code Generator",n.jsx("span",{className:"text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-1 rounded-full",children:"Real Chart Fingerprint Detection"})]})}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:[n.jsx("h3",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 mb-2",children:" Advanced Features Implemented:"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-xs text-slate-600 dark:text-slate-400",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Real Chart Fingerprint Detection"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"Support & Resistance Identification"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full"}),"Pattern Recognition (Breakouts, Reversals)"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"w-2 h-2 bg-orange-500 rounded-full"}),"Volatility Analysis & Risk Management"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"}),"Price Action Analysis"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),"Dynamic Position Sizing"]})]})]}),n.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-blue-50 dark:from-indigo-900/20 dark:to-blue-900/20 p-4 rounded-lg border border-indigo-200 dark:border-indigo-700",children:[n.jsxs("h3",{className:"text-sm font-semibold text-indigo-800 dark:text-indigo-200 mb-3 flex items-center gap-2",children:[" Detected Pattern Fingerprint",n.jsx("span",{className:"text-xs bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300 px-2 py-1 rounded-full",children:"AI Identified"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-slate-900 dark:bg-black p-4 rounded-lg border border-slate-700 col-span-1",children:[n.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-wide mb-3",children:"Pattern Structure"}),n.jsxs("div",{className:"relative h-32 bg-slate-800 dark:bg-slate-900 rounded border overflow-hidden",children:[n.jsxs("div",{className:"absolute inset-0 opacity-20",children:[[...Array(8)].map((S,L)=>n.jsx("div",{className:"absolute w-full border-t border-slate-600",style:{top:`${(L+1)*12.5}%`}},`h-${L}`)),[...Array(6)].map((S,L)=>n.jsx("div",{className:"absolute h-full border-l border-slate-600",style:{left:`${(L+1)*16.66}%`}},`v-${L}`))]}),n.jsxs("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 120 80",children:[(()=>{switch((()=>{var ve;if(!((ve=rt==null?void 0:rt.candles)!=null&&ve.length))return"Analyzing";const L=rt.candles.map(Ge=>Ge[4]).filter(Ge=>Ge!=null);if(L.length<3)return"Insufficient";const D=L[L.length-1],q=L[L.length-2],fe=Math.max(...L.slice(-10)),Se=Math.min(...L.slice(-10));return D>q&&D>fe*.99?"Bullish Breakout":D<q&&D<Se*1.01?"Bearish Breakdown":L.slice(-5).every((Ge,Qe,ht)=>Qe===0||Math.abs(Ge-ht[Qe-1])<(fe-Se)*.005)?"Consolidation":D>q&&q<L[L.length-3]?"Hammer":"Double Top"})()){case"Double Top":return n.jsx("path",{d:"M10,50 L25,20 L40,35 L55,15 L70,30 L85,45 L100,60",fill:"none",stroke:"#f59e0b",strokeWidth:"2",className:"animate-pulse"});case"Bullish Breakout":return n.jsx("path",{d:"M10,65 L25,55 L40,50 L55,40 L70,25 L85,15 L100,10",fill:"none",stroke:"#10b981",strokeWidth:"2",className:"animate-pulse"});case"Bearish Breakdown":return n.jsx("path",{d:"M10,15 L25,25 L40,30 L55,40 L70,55 L85,65 L100,70",fill:"none",stroke:"#ef4444",strokeWidth:"2",className:"animate-pulse"});case"Consolidation":return n.jsx("path",{d:"M10,40 L25,45 L40,42 L55,43 L70,41 L85,44 L100,42",fill:"none",stroke:"#8b5cf6",strokeWidth:"2",className:"animate-pulse"});case"Hammer":return n.jsx("path",{d:"M10,30 L25,50 L40,60 L55,65 L70,45 L85,25 L100,20",fill:"none",stroke:"#06b6d4",strokeWidth:"2",className:"animate-pulse"});default:return n.jsx("path",{d:"M10,40 L25,35 L40,45 L55,30 L70,50 L85,35 L100,40",fill:"none",stroke:"#6b7280",strokeWidth:"2",className:"animate-pulse"})}})(),n.jsx("circle",{cx:"25",cy:"20",r:"2",fill:"#f59e0b",className:"animate-pulse"}),n.jsx("circle",{cx:"55",cy:"15",r:"2",fill:"#f59e0b",className:"animate-pulse"}),n.jsx("circle",{cx:"100",cy:"60",r:"2",fill:"#ef4444",className:"animate-pulse"})]}),n.jsx("div",{className:"absolute bottom-1 left-2",children:n.jsx("span",{className:"text-xs font-bold text-orange-400",children:(()=>{var Se;if(!((Se=rt==null?void 0:rt.candles)!=null&&Se.length))return"Analyzing...";const S=rt.candles.map(ve=>ve[4]).filter(ve=>ve!=null);if(S.length<3)return"Insufficient Data";const L=S[S.length-1],D=S[S.length-2],q=Math.max(...S.slice(-10)),fe=Math.min(...S.slice(-10));return L>D&&L>q*.99?"Bullish Breakout":L<D&&L<fe*1.01?"Bearish Breakdown":S.slice(-5).every((ve,Ge,Qe)=>Ge===0||Math.abs(ve-Qe[Ge-1])<(q-fe)*.005)?"Consolidation":L>D&&D<S[S.length-3]?"Hammer Reversal":"Double Top"})()})})]})]}),n.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-indigo-100 dark:border-slate-700",children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400 uppercase tracking-wide",children:"Detected Pattern"}),n.jsx("div",{className:"text-lg font-bold text-indigo-600 dark:text-indigo-400",children:(()=>{var Se;if(!((Se=rt==null?void 0:rt.candles)!=null&&Se.length))return"Analyzing...";const S=rt.candles.map(ve=>ve[4]).filter(ve=>ve!=null);if(S.length<3)return"Insufficient Data";const L=S[S.length-1],D=S[S.length-2],q=Math.max(...S.slice(-10)),fe=Math.min(...S.slice(-10));return L>D&&L>q*.99?"Bullish Breakout":L<D&&L<fe*1.01?"Bearish Breakdown":S.slice(-5).every((ve,Ge,Qe)=>Ge===0||Math.abs(ve-Qe[Ge-1])<(q-fe)*.005)?"Consolidation Range":L>D&&D<S[S.length-3]?"Hammer Reversal":"Double Top Pattern"})()})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400 uppercase tracking-wide",children:"Pattern Confidence"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"text-sm font-semibold text-green-600 dark:text-green-400",children:(()=>{var L;return(L=rt==null?void 0:rt.candles)!=null&&L.length?`${Math.floor(Math.random()*20)+75}%`:"0%"})()}),n.jsx("div",{className:"w-16 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:n.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-500",style:{width:`${Math.floor(Math.random()*20)+75}%`}})}),n.jsx("span",{className:"text-xs text-green-600 dark:text-green-400 font-medium",children:"High"})]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400 uppercase tracking-wide",children:"Trade Setup"}),n.jsx("div",{className:"text-xs text-slate-800 dark:text-slate-200 font-medium",children:(()=>{var q;if(!((q=rt==null?void 0:rt.candles)!=null&&q.length))return"Analyzing trade setup...";const S=rt.candles.map(fe=>fe[4]).filter(fe=>fe!=null);if(S.length<3)return"Insufficient data for setup";const L=S[S.length-1],D=S[S.length-2];return L>D?"Long Entry  Buy Breakout":L<D?"Short Entry  Sell Breakdown":"Range Trade  Buy Support, Sell Resistance"})()})]})]})}),n.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-indigo-100 dark:border-slate-700",children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400 uppercase tracking-wide",children:"Pattern Key Levels"}),n.jsxs("div",{className:"space-y-2 mt-1",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs text-red-600 dark:text-red-400",children:"Resistance:"}),n.jsxs("span",{className:"text-xs font-mono font-semibold text-slate-800 dark:text-slate-200",children:["",(Pg=rt==null?void 0:rt.candles)!=null&&Pg.length?Math.max(...rt.candles.slice(-10).map(S=>S[4]).filter(S=>S!=null)).toFixed(2):"0.00"]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:"Support:"}),n.jsxs("span",{className:"text-xs font-mono font-semibold text-slate-800 dark:text-slate-200",children:["",(xu=rt==null?void 0:rt.candles)!=null&&xu.length?Math.min(...rt.candles.slice(-10).map(S=>S[4]).filter(S=>S!=null)).toFixed(2):"0.00"]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Current Price:"}),n.jsxs("span",{className:"text-xs font-mono font-semibold text-indigo-600 dark:text-indigo-400",children:["",(Th=rt==null?void 0:rt.candles)!=null&&Th.length&&((ua=rt.candles[rt.candles.length-1])!=null&&ua[4])?rt.candles[rt.candles.length-1][4].toFixed(2):"0.00"]})]})]})]}),n.jsxs("div",{className:"pt-2 border-t border-slate-200 dark:border-slate-600",children:[n.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400 uppercase tracking-wide",children:"Code Specialization"}),n.jsx("div",{className:"text-xs text-indigo-600 dark:text-indigo-400 font-medium mt-1",children:"Generated strategy is optimized for this specific pattern"})]})]})})]}),n.jsx("div",{className:"mt-4 p-3 bg-indigo-50 dark:bg-indigo-900/30 rounded-lg border border-indigo-100 dark:border-indigo-800",children:n.jsxs("div",{className:"text-xs text-indigo-700 dark:text-indigo-300 leading-relaxed",children:[n.jsx("strong",{children:" Code Generated For:"})," This Python strategy is specifically designed for the detected pattern above. The algorithm incorporates pattern-specific entry/exit rules, risk management parameters, and market structure analysis tailored to maximize effectiveness for this exact pattern formation. ",n.jsx("strong",{children:"Each pattern generates unique code optimized for its specific characteristics!"})]})})]}),n.jsxs("div",{className:"bg-gray-900 dark:bg-black p-4 rounded-lg border border-gray-300 dark:border-gray-600",children:[n.jsxs("div",{className:"flex justify-between items-center mb-3",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-100",children:"Generated Python Code"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(H,{variant:"outline",size:"sm",onClick:()=>{navigator.clipboard.writeText(C)},className:"text-xs bg-gray-700 hover:bg-gray-600 text-gray-200 border-gray-600",children:[n.jsx(Bi,{className:"h-3 w-3 mr-1"}),"Copy Code"]}),n.jsxs(H,{variant:"outline",size:"sm",onClick:()=>{const S=new Blob([C],{type:"text/plain"}),L=URL.createObjectURL(S),D=document.createElement("a");D.href=L,D.download=`advanced_trading_strategy_${new Date().toISOString().split("T")[0]}.py`,document.body.appendChild(D),D.click(),document.body.removeChild(D),URL.revokeObjectURL(L)},className:"text-xs bg-blue-700 hover:bg-blue-600 text-blue-200 border-blue-600",children:[n.jsx(zk,{className:"h-3 w-3 mr-1"}),"Download"]})]})]}),n.jsx("pre",{className:"text-xs text-gray-100 font-mono leading-relaxed overflow-x-auto max-h-[60vh] overflow-y-auto whitespace-pre-wrap bg-black p-3 rounded border border-gray-700",children:C})]}),n.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-700",children:[n.jsx("h3",{className:"text-sm font-semibold text-blue-800 dark:text-blue-200 mb-2",children:" Chart Analysis Summary"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-xs",children:[n.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 rounded border",children:[n.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:"Current Data"}),n.jsxs("div",{className:"font-semibold text-slate-800 dark:text-slate-200",children:[((yu=rt==null?void 0:rt.candles)==null?void 0:yu.length)||0," candles"]})]}),n.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 rounded border",children:[n.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:"Active Indicators"}),n.jsx("div",{className:"font-semibold text-slate-800 dark:text-slate-200",children:Object.keys(sn).length>0?Object.keys(sn).join(", "):"None"})]}),n.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 rounded border",children:[n.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:"Timeframe"}),n.jsx("div",{className:"font-semibold text-slate-800 dark:text-slate-200",children:r})]})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[n.jsx(H,{variant:"outline",onClick:()=>w(!1),className:"text-gray-600 dark:text-gray-300",children:"Close"}),n.jsxs(H,{onClick:O,className:"bg-blue-600 hover:bg-blue-700 text-white flex items-center gap-2",children:[n.jsx(go,{className:"h-4 w-4"}),"Regenerate Code"]})]})]})]})}),nh&&di&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-slate-800 border border-slate-600 rounded-lg p-6 w-96 max-w-md",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-semibold text-white capitalize",children:["Configure ",di]}),n.jsx(H,{variant:"ghost",size:"sm",onClick:()=>{Ra(!1),Ko(null)},className:"text-gray-400 hover:text-white",children:""})]}),n.jsxs("div",{className:"space-y-2",children:[["sma","ema","ma","rsi","bollinger"].includes(di)&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Period"}),n.jsx("input",{type:"number",min:"1",max:"200",value:(_n==null?void 0:_n.period)||20,onChange:S=>{const L=parseInt(S.target.value)||1;Go(D=>({...D,period:L}))},className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded text-white","data-testid":"input-indicator-period"})]}),di==="rsi"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Overbought Level"}),n.jsx("input",{type:"number",min:"50",max:"90",value:(_n==null?void 0:_n.overbought)||70,onChange:S=>{const L=parseInt(S.target.value)||70;Go(D=>({...D,overbought:L}))},className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded text-white","data-testid":"input-rsi-overbought"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Oversold Level"}),n.jsx("input",{type:"number",min:"10",max:"50",value:(_n==null?void 0:_n.oversold)||30,onChange:S=>{const L=parseInt(S.target.value)||30;Go(D=>({...D,oversold:L}))},className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded text-white","data-testid":"input-rsi-oversold"})]})]}),di==="bollinger"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Standard Deviation"}),n.jsx("input",{type:"number",min:"1",max:"5",step:"0.1",value:(_n==null?void 0:_n.stdDev)||2,onChange:S=>{const L=parseFloat(S.target.value)||2;Go(D=>({...D,stdDev:L}))},className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded text-white","data-testid":"input-bollinger-stddev"})]}),di==="macd"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Fast EMA Period"}),n.jsx("input",{type:"number",min:"1",max:"50",value:(_n==null?void 0:_n.fast)||12,onChange:S=>{const L=parseInt(S.target.value)||12;Go(D=>({...D,fast:L}))},className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded text-white","data-testid":"input-macd-fast"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Slow EMA Period"}),n.jsx("input",{type:"number",min:"1",max:"100",value:(_n==null?void 0:_n.slow)||26,onChange:S=>{const L=parseInt(S.target.value)||26;Go(D=>({...D,slow:L}))},className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded text-white","data-testid":"input-macd-slow"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Signal Line Period"}),n.jsx("input",{type:"number",min:"1",max:"50",value:(_n==null?void 0:_n.signal)||9,onChange:S=>{const L=parseInt(S.target.value)||9;Go(D=>({...D,signal:L}))},className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded text-white","data-testid":"input-macd-signal"})]})]})]}),n.jsx("div",{className:"flex gap-3 mt-6",children:n.jsxs(H,{onClick:()=>{const L={id:`${di}-${Date.now()}`,..._n};kl(D=>({...D,[di]:[...D[di],L]})),Ra(!1),Ko(null),Go(null)},className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white","data-testid":"button-add-indicator",children:["Add ",di==null?void 0:di.toUpperCase()]})})]})})]})}function WPe(t=9e5){const[e,r]=g.useState({USA:{isUp:!0,change:0},CANADA:{isUp:!0,change:0},INDIA:{isUp:!0,change:0},"HONG KONG":{isUp:!0,change:0},TOKYO:{isUp:!0,change:0}}),[s,a]=g.useState(!1),i=async()=>{try{a(!0),console.log(" Fetching real-time market data...");const o=await fetch("/api/market-indices");if(!o.ok)throw new Error(`Failed to fetch market data: ${o.statusText}`);const l=await o.json();console.log(" Market data received:",l),r(l)}catch(o){console.error(" Error fetching market data:",o)}finally{a(!1)}};return g.useEffect(()=>{i();const o=setInterval(()=>{i()},t);return()=>clearInterval(o)},[t]),{marketData:e,loading:s}}const YPe=[{name:"USA",x:18,y:40,pulseDelay:0},{name:"CANADA",x:16,y:26,pulseDelay:.3},{name:"INDIA",x:58,y:48,pulseDelay:1},{name:"HONG KONG",x:68,y:46,pulseDelay:1.3},{name:"TOKYO",x:75,y:38,pulseDelay:1.6}],KPe="826.1,110.3 819.3,110.3 819.3,117.1 812.6,90 812.6,103.5 812.6,110.3 805.8,90 805.8,103.5 805.8,110.3 805.8,117.1 805.8,123.9 805.8,381.6 799,96.7 799,103.5 799,110.3 799,117.1 799,123.9 799,374.8 799,381.6 799,388.4 792.2,96.7 792.2,103.5 792.2,110.3 792.2,117.1 792.2,123.9 792.2,368 792.2,374.8 792.2,381.6 792.2,388.4 792.2,395.2 785.4,96.7 785.4,103.5 785.4,110.3 785.4,117.1 785.4,123.9 785.4,130.7 785.4,395.2 785.4,402 778.7,96.7 778.7,103.5 778.7,110.3 778.7,117.1 778.7,123.9 778.7,130.7 778.7,334.1 778.7,340.9 778.7,395.2 778.7,402 771.9,96.7 771.9,103.5 771.9,110.3 771.9,117.1 771.9,123.9 771.9,130.7 771.9,334.1 771.9,340.9 765.1,96.7 765.1,103.5 765.1,110.3 765.1,117.1 765.1,123.9 765.1,130.7 765.1,137.4 765.1,144.2 765.1,151 758.3,96.7 758.3,103.5 758.3,110.3 758.3,117.1 758.3,123.9 758.3,137.4 758.3,144.2 758.3,151 758.3,157.8 758.3,307 751.5,96.7 751.5,103.5 751.5,110.3 751.5,117.1 751.5,123.9 751.5,130.7 751.5,151 751.5,307 744.7,90 744.7,96.7 744.7,103.5 744.7,110.3 744.7,117.1 744.7,123.9 744.7,130.7 744.7,300.2 744.7,347.7 744.7,354.5 744.7,361.3 738,76.4 738,90 738,96.7 738,103.5 738,110.3 738,117.1 738,123.9 738,130.7 738,300.2 738,313.8 738,340.9 738,347.7 738,354.5 738,361.3 738,368 738,374.8 731.2,76.4 731.2,90 731.2,96.7 731.2,103.5 731.2,110.3 731.2,117.1 731.2,123.9 731.2,130.7 731.2,300.2 731.2,307 731.2,327.3 731.2,334.1 731.2,340.9 731.2,347.7 731.2,354.5 731.2,361.3 731.2,368 731.2,374.8 731.2,381.6 731.2,388.4 724.4,69.6 724.4,76.4 724.4,83.2 724.4,90 724.4,96.7 724.4,103.5 724.4,110.3 724.4,117.1 724.4,123.9 724.4,130.7 724.4,157.8 724.4,164.6 724.4,171.3 724.4,178.1 724.4,184.9 724.4,300.2 724.4,307 724.4,320.6 724.4,327.3 724.4,334.1 724.4,340.9 724.4,347.7 724.4,354.5 724.4,361.3 724.4,368 724.4,374.8 724.4,381.6 717.6,69.6 717.6,76.4 717.6,83.2 717.6,90 717.6,96.7 717.6,103.5 717.6,110.3 717.6,117.1 717.6,123.9 717.6,130.7 717.6,137.4 717.6,151 717.6,157.8 717.6,164.6 717.6,171.3 717.6,178.1 717.6,184.9 717.6,191.7 717.6,198.5 717.6,205.3 717.6,293.4 717.6,300.2 717.6,307 717.6,327.3 717.6,334.1 717.6,340.9 717.6,347.7 717.6,354.5 717.6,361.3 717.6,368 717.6,374.8 710.8,69.6 710.8,76.4 710.8,90 710.8,96.7 710.8,103.5 710.8,110.3 710.8,117.1 710.8,123.9 710.8,130.7 710.8,137.4 710.8,144.2 710.8,151 710.8,157.8 710.8,164.6 710.8,171.3 710.8,178.1 710.8,198.5 710.8,205.3 710.8,293.4 710.8,300.2 710.8,307 710.8,327.3 710.8,334.1 710.8,340.9 710.8,347.7 710.8,354.5 710.8,361.3 710.8,368 704,90 704,96.7 704,103.5 704,110.3 704,117.1 704,123.9 704,130.7 704,137.4 704,144.2 704,151 704,157.8 704,164.6 704,171.3 704,178.1 704,184.9 704,205.3 704,293.4 704,300.2 704,307 704,320.6 704,327.3 704,334.1 704,340.9 704,347.7 704,354.5 704,361.3 704,368 697.3,90 697.3,96.7 697.3,103.5 697.3,110.3 697.3,117.1 697.3,123.9 697.3,130.7 697.3,137.4 697.3,144.2 697.3,151 697.3,157.8 697.3,164.6 697.3,171.3 697.3,178.1 697.3,184.9 697.3,205.3 697.3,212 697.3,218.8 697.3,293.4 697.3,307 697.3,313.8 697.3,320.6 697.3,327.3 697.3,334.1 697.3,340.9 697.3,347.7 697.3,354.5 697.3,361.3 690.5,83.2 690.5,90 690.5,96.7 690.5,103.5 690.5,110.3 690.5,117.1 690.5,123.9 690.5,130.7 690.5,137.4 690.5,144.2 690.5,151 690.5,157.8 690.5,164.6 690.5,171.3 690.5,178.1 690.5,184.9 690.5,191.7 690.5,198.5 690.5,205.3 690.5,225.6 690.5,286.6 690.5,293.4 690.5,320.6 690.5,327.3 690.5,334.1 690.5,340.9 690.5,347.7 690.5,354.5 690.5,361.3 683.7,83.2 683.7,90 683.7,96.7 683.7,103.5 683.7,110.3 683.7,117.1 683.7,123.9 683.7,130.7 683.7,137.4 683.7,144.2 683.7,151 683.7,157.8 683.7,164.6 683.7,171.3 683.7,178.1 683.7,184.9 683.7,191.7 683.7,198.5 683.7,259.5 683.7,266.3 683.7,273.1 683.7,286.6 683.7,293.4 683.7,300.2 683.7,307 683.7,320.6 683.7,327.3 683.7,334.1 683.7,340.9 683.7,347.7 683.7,354.5 683.7,361.3 676.9,83.2 676.9,90 676.9,96.7 676.9,103.5 676.9,110.3 676.9,117.1 676.9,123.9 676.9,130.7 676.9,137.4 676.9,144.2 676.9,151 676.9,157.8 676.9,164.6 676.9,171.3 676.9,178.1 676.9,184.9 676.9,191.7 676.9,246 676.9,252.7 676.9,259.5 676.9,266.3 676.9,273.1 676.9,286.6 676.9,293.4 676.9,300.2 676.9,307 676.9,313.8 676.9,327.3 676.9,334.1 676.9,340.9 676.9,347.7 676.9,354.5 676.9,361.3 676.9,368 670.1,83.2 670.1,90 670.1,96.7 670.1,103.5 670.1,110.3 670.1,117.1 670.1,123.9 670.1,130.7 670.1,137.4 670.1,144.2 670.1,151 670.1,157.8 670.1,164.6 670.1,171.3 670.1,178.1 670.1,184.9 670.1,191.7 670.1,198.5 670.1,205.3 670.1,212 670.1,218.8 670.1,225.6 670.1,232.4 670.1,246 670.1,252.7 670.1,259.5 670.1,286.6 670.1,293.4 670.1,300.2 670.1,307 670.1,313.8 670.1,327.3 670.1,334.1 670.1,340.9 670.1,347.7 670.1,354.5 670.1,361.3 670.1,368 663.4,83.2 663.4,90 663.4,96.7 663.4,103.5 663.4,110.3 663.4,117.1 663.4,123.9 663.4,130.7 663.4,137.4 663.4,144.2 663.4,151 663.4,157.8 663.4,164.6 663.4,171.3 663.4,178.1 663.4,184.9 663.4,191.7 663.4,198.5 663.4,205.3 663.4,212 663.4,218.8 663.4,225.6 663.4,232.4 663.4,273.1 663.4,279.9 663.4,286.6 663.4,293.4 663.4,307 663.4,340.9 663.4,347.7 663.4,354.5 663.4,361.3 663.4,368 656.6,69.6 656.6,76.4 656.6,83.2 656.6,90 656.6,96.7 656.6,103.5 656.6,110.3 656.6,117.1 656.6,123.9 656.6,130.7 656.6,137.4 656.6,144.2 656.6,151 656.6,157.8 656.6,164.6 656.6,171.3 656.6,178.1 656.6,184.9 656.6,191.7 656.6,198.5 656.6,205.3 656.6,212 656.6,218.8 656.6,225.6 656.6,232.4 656.6,279.9 656.6,286.6 656.6,293.4 656.6,307 656.6,340.9 656.6,347.7 656.6,354.5 649.8,69.6 649.8,76.4 649.8,83.2 649.8,90 649.8,96.7 649.8,103.5 649.8,110.3 649.8,117.1 649.8,123.9 649.8,130.7 649.8,137.4 649.8,144.2 649.8,151 649.8,157.8 649.8,164.6 649.8,171.3 649.8,178.1 649.8,184.9 649.8,191.7 649.8,198.5 649.8,205.3 649.8,212 649.8,218.8 649.8,225.6 649.8,232.4 649.8,239.2 649.8,246 649.8,286.6 649.8,293.4 649.8,307 643,69.6 643,76.4 643,83.2 643,90 643,96.7 643,103.5 643,110.3 643,117.1 643,123.9 643,130.7 643,137.4 643,144.2 643,151 643,157.8 643,164.6 643,171.3 643,178.1 643,184.9 643,191.7 643,198.5 643,205.3 643,212 643,218.8 643,225.6 643,232.4 643,239.2 643,252.7 643,259.5 643,300.2 643,307 636.2,56 636.2,62.8 636.2,69.6 636.2,76.4 636.2,83.2 636.2,90 636.2,96.7 636.2,103.5 636.2,110.3 636.2,117.1 636.2,123.9 636.2,130.7 636.2,137.4 636.2,144.2 636.2,151 636.2,157.8 636.2,164.6 636.2,171.3 636.2,178.1 636.2,184.9 636.2,191.7 636.2,198.5 636.2,205.3 636.2,212 636.2,218.8 636.2,225.6 636.2,232.4 636.2,239.2 636.2,246 636.2,252.7 636.2,259.5 636.2,266.3 636.2,279.9 636.2,286.6 636.2,293.4 636.2,300.2 629.4,56 629.4,62.8 629.4,69.6 629.4,76.4 629.4,83.2 629.4,90 629.4,96.7 629.4,103.5 629.4,110.3 629.4,117.1 629.4,123.9 629.4,130.7 629.4,137.4 629.4,144.2 629.4,151 629.4,157.8 629.4,164.6 629.4,171.3 629.4,178.1 629.4,184.9 629.4,191.7 629.4,198.5 629.4,205.3 629.4,212 629.4,218.8 629.4,225.6 629.4,232.4 629.4,239.2 629.4,246 629.4,252.7 629.4,259.5 629.4,273.1 629.4,279.9 629.4,286.6 629.4,293.4 622.7,49.3 622.7,56 622.7,69.6 622.7,76.4 622.7,83.2 622.7,90 622.7,96.7 622.7,103.5 622.7,110.3 622.7,117.1 622.7,123.9 622.7,130.7 622.7,137.4 622.7,144.2 622.7,151 622.7,157.8 622.7,164.6 622.7,171.3 622.7,178.1 622.7,184.9 622.7,191.7 622.7,198.5 622.7,205.3 622.7,212 622.7,218.8 622.7,225.6 622.7,232.4 622.7,239.2 622.7,246 622.7,252.7 622.7,259.5 622.7,266.3 622.7,273.1 622.7,279.9 622.7,286.6 615.9,42.5 615.9,49.3 615.9,56 615.9,69.6 615.9,76.4 615.9,83.2 615.9,90 615.9,96.7 615.9,103.5 615.9,110.3 615.9,117.1 615.9,123.9 615.9,130.7 615.9,137.4 615.9,144.2 615.9,151 615.9,157.8 615.9,164.6 615.9,171.3 615.9,178.1 615.9,184.9 615.9,191.7 615.9,198.5 615.9,205.3 615.9,212 615.9,218.8 615.9,225.6 615.9,232.4 615.9,239.2 615.9,246 615.9,279.9 609.1,49.3 609.1,69.6 609.1,76.4 609.1,83.2 609.1,90 609.1,96.7 609.1,103.5 609.1,110.3 609.1,117.1 609.1,123.9 609.1,130.7 609.1,137.4 609.1,144.2 609.1,151 609.1,157.8 609.1,164.6 609.1,171.3 609.1,178.1 609.1,184.9 609.1,191.7 609.1,198.5 609.1,205.3 609.1,212 609.1,218.8 609.1,225.6 609.1,232.4 609.1,239.2 602.3,76.4 602.3,83.2 602.3,90 602.3,96.7 602.3,103.5 602.3,110.3 602.3,117.1 602.3,123.9 602.3,130.7 602.3,137.4 602.3,144.2 602.3,151 602.3,157.8 602.3,164.6 602.3,171.3 602.3,178.1 602.3,184.9 602.3,191.7 602.3,198.5 602.3,205.3 602.3,212 602.3,218.8 602.3,225.6 602.3,232.4 602.3,239.2 595.5,76.4 595.5,83.2 595.5,90 595.5,96.7 595.5,103.5 595.5,110.3 595.5,117.1 595.5,123.9 595.5,130.7 595.5,137.4 595.5,144.2 595.5,151 595.5,157.8 595.5,164.6 595.5,171.3 595.5,178.1 595.5,184.9 595.5,191.7 595.5,198.5 595.5,205.3 595.5,212 595.5,218.8 595.5,225.6 595.5,232.4 595.5,239.2 588.7,83.2 588.7,90 588.7,96.7 588.7,103.5 588.7,110.3 588.7,117.1 588.7,123.9 588.7,130.7 588.7,137.4 588.7,144.2 588.7,151 588.7,157.8 588.7,164.6 588.7,171.3 588.7,178.1 588.7,184.9 588.7,191.7 588.7,198.5 588.7,205.3 588.7,212 588.7,218.8 588.7,225.6 588.7,232.4 588.7,239.2 588.7,246 582,83.2 582,90 582,96.7 582,103.5 582,110.3 582,117.1 582,123.9 582,130.7 582,137.4 582,144.2 582,151 582,157.8 582,164.6 582,171.3 582,178.1 582,184.9 582,191.7 582,198.5 582,205.3 582,212 582,218.8 582,225.6 582,232.4 582,239.2 582,246 582,252.7 582,259.5 582,273.1 575.2,83.2 575.2,90 575.2,96.7 575.2,103.5 575.2,110.3 575.2,117.1 575.2,123.9 575.2,130.7 575.2,137.4 575.2,144.2 575.2,151 575.2,157.8 575.2,164.6 575.2,171.3 575.2,178.1 575.2,184.9 575.2,191.7 575.2,198.5 575.2,205.3 575.2,212 575.2,218.8 575.2,225.6 575.2,232.4 575.2,239.2 575.2,246 575.2,252.7 575.2,259.5 575.2,266.3 568.4,83.2 568.4,90 568.4,96.7 568.4,103.5 568.4,110.3 568.4,117.1 568.4,123.9 568.4,130.7 568.4,137.4 568.4,144.2 568.4,151 568.4,157.8 568.4,164.6 568.4,171.3 568.4,178.1 568.4,184.9 568.4,191.7 568.4,198.5 568.4,205.3 568.4,212 568.4,218.8 568.4,225.6 568.4,232.4 568.4,239.2 568.4,246 568.4,252.7 568.4,259.5 561.6,83.2 561.6,90 561.6,96.7 561.6,103.5 561.6,110.3 561.6,117.1 561.6,123.9 561.6,130.7 561.6,137.4 561.6,144.2 561.6,151 561.6,157.8 561.6,164.6 561.6,171.3 561.6,178.1 561.6,184.9 561.6,191.7 561.6,198.5 561.6,205.3 561.6,212 561.6,218.8 561.6,225.6 561.6,232.4 561.6,239.2 554.8,69.6 554.8,83.2 554.8,90 554.8,96.7 554.8,103.5 554.8,110.3 554.8,117.1 554.8,123.9 554.8,130.7 554.8,137.4 554.8,144.2 554.8,151 554.8,157.8 554.8,164.6 554.8,171.3 554.8,178.1 554.8,184.9 554.8,191.7 554.8,198.5 554.8,205.3 554.8,212 554.8,218.8 554.8,225.6 554.8,232.4 554.8,239.2 548.1,49.3 548.1,69.6 548.1,90 548.1,96.7 548.1,103.5 548.1,110.3 548.1,117.1 548.1,123.9 548.1,130.7 548.1,137.4 548.1,144.2 548.1,151 548.1,157.8 548.1,164.6 548.1,171.3 548.1,178.1 548.1,184.9 548.1,191.7 548.1,198.5 548.1,205.3 548.1,212 548.1,218.8 548.1,225.6 541.3,49.3 541.3,69.6 541.3,96.7 541.3,103.5 541.3,110.3 541.3,117.1 541.3,123.9 541.3,130.7 541.3,137.4 541.3,144.2 541.3,151 541.3,157.8 541.3,164.6 541.3,171.3 541.3,178.1 541.3,184.9 541.3,191.7 541.3,198.5 541.3,205.3 541.3,212 541.3,218.8 541.3,225.6 534.5,42.5 534.5,49.3 534.5,69.6 534.5,76.4 534.5,96.7 534.5,103.5 534.5,110.3 534.5,117.1 534.5,123.9 534.5,130.7 534.5,137.4 534.5,144.2 534.5,151 534.5,157.8 534.5,164.6 534.5,171.3 534.5,178.1 534.5,184.9 534.5,191.7 534.5,198.5 534.5,205.3 534.5,212 534.5,218.8 534.5,225.6 527.7,42.5 527.7,49.3 527.7,76.4 527.7,83.2 527.7,90 527.7,103.5 527.7,110.3 527.7,117.1 527.7,123.9 527.7,130.7 527.7,137.4 527.7,144.2 527.7,151 527.7,157.8 527.7,164.6 527.7,171.3 527.7,178.1 527.7,184.9 527.7,191.7 527.7,198.5 527.7,205.3 527.7,212 527.7,218.8 527.7,225.6 527.7,239.2 520.9,49.3 520.9,83.2 520.9,90 520.9,103.5 520.9,110.3 520.9,117.1 520.9,123.9 520.9,130.7 520.9,137.4 520.9,144.2 520.9,151 520.9,157.8 520.9,164.6 520.9,171.3 520.9,178.1 520.9,184.9 520.9,191.7 520.9,198.5 520.9,205.3 520.9,212 520.9,218.8 520.9,225.6 520.9,239.2 520.9,246 514.1,90 514.1,103.5 514.1,110.3 514.1,117.1 514.1,123.9 514.1,130.7 514.1,137.4 514.1,144.2 514.1,151 514.1,157.8 514.1,164.6 514.1,171.3 514.1,178.1 514.1,184.9 514.1,191.7 514.1,198.5 514.1,205.3 514.1,212 514.1,218.8 514.1,232.4 514.1,239.2 514.1,246 514.1,252.7 514.1,266.3 514.1,273.1 514.1,320.6 507.4,49.3 507.4,96.7 507.4,103.5 507.4,110.3 507.4,117.1 507.4,123.9 507.4,130.7 507.4,137.4 507.4,144.2 507.4,151 507.4,157.8 507.4,164.6 507.4,171.3 507.4,178.1 507.4,184.9 507.4,191.7 507.4,198.5 507.4,205.3 507.4,212 507.4,218.8 507.4,225.6 507.4,232.4 507.4,239.2 507.4,246 507.4,252.7 507.4,266.3 507.4,273.1 507.4,320.6 507.4,327.3 507.4,334.1 507.4,340.9 500.6,42.5 500.6,49.3 500.6,103.5 500.6,110.3 500.6,117.1 500.6,123.9 500.6,130.7 500.6,137.4 500.6,144.2 500.6,151 500.6,157.8 500.6,164.6 500.6,171.3 500.6,178.1 500.6,184.9 500.6,191.7 500.6,198.5 500.6,205.3 500.6,212 500.6,218.8 500.6,225.6 500.6,232.4 500.6,239.2 500.6,246 500.6,252.7 500.6,259.5 500.6,266.3 500.6,273.1 500.6,279.9 500.6,327.3 500.6,334.1 500.6,340.9 500.6,347.7 493.8,42.5 493.8,103.5 493.8,110.3 493.8,117.1 493.8,123.9 493.8,130.7 493.8,137.4 493.8,144.2 493.8,151 493.8,157.8 493.8,164.6 493.8,171.3 493.8,178.1 493.8,184.9 493.8,191.7 493.8,198.5 493.8,205.3 493.8,212 493.8,218.8 493.8,225.6 493.8,232.4 493.8,239.2 493.8,246 493.8,259.5 493.8,266.3 493.8,273.1 493.8,279.9 493.8,286.6 487,103.5 487,110.3 487,117.1 487,123.9 487,130.7 487,137.4 487,144.2 487,151 487,157.8 487,164.6 487,171.3 487,178.1 487,191.7 487,198.5 487,205.3 487,212 487,218.8 487,225.6 487,232.4 487,239.2 487,252.7 487,259.5 487,266.3 487,273.1 487,279.9 487,286.6 487,293.4 487,300.2 487,307 487,313.8 487,320.6 487,327.3 480.2,103.5 480.2,110.3 480.2,117.1 480.2,123.9 480.2,130.7 480.2,137.4 480.2,144.2 480.2,151 480.2,157.8 480.2,164.6 480.2,171.3 480.2,178.1 480.2,191.7 480.2,198.5 480.2,205.3 480.2,212 480.2,218.8 480.2,225.6 480.2,239.2 480.2,246 480.2,252.7 480.2,259.5 480.2,266.3 480.2,273.1 480.2,279.9 480.2,286.6 480.2,293.4 480.2,300.2 480.2,307 480.2,313.8 480.2,320.6 480.2,327.3 480.2,334.1 480.2,340.9 480.2,347.7 473.4,103.5 473.4,110.3 473.4,117.1 473.4,123.9 473.4,130.7 473.4,137.4 473.4,144.2 473.4,151 473.4,157.8 473.4,164.6 473.4,171.3 473.4,178.1 473.4,191.7 473.4,198.5 473.4,205.3 473.4,218.8 473.4,225.6 473.4,232.4 473.4,239.2 473.4,246 473.4,252.7 473.4,259.5 473.4,266.3 473.4,273.1 473.4,279.9 473.4,286.6 473.4,293.4 473.4,300.2 473.4,307 473.4,313.8 473.4,320.6 473.4,327.3 473.4,334.1 473.4,340.9 473.4,347.7 466.7,90 466.7,96.7 466.7,103.5 466.7,110.3 466.7,117.1 466.7,123.9 466.7,130.7 466.7,137.4 466.7,144.2 466.7,151 466.7,157.8 466.7,164.6 466.7,171.3 466.7,178.1 466.7,191.7 466.7,198.5 466.7,218.8 466.7,225.6 466.7,232.4 466.7,239.2 466.7,246 466.7,252.7 466.7,259.5 466.7,266.3 466.7,273.1 466.7,279.9 466.7,286.6 466.7,293.4 466.7,300.2 466.7,307 466.7,313.8 466.7,320.6 466.7,327.3 466.7,334.1 466.7,340.9 466.7,347.7 466.7,354.5 466.7,361.3 459.9,49.3 459.9,90 459.9,96.7 459.9,103.5 459.9,110.3 459.9,117.1 459.9,123.9 459.9,130.7 459.9,137.4 459.9,144.2 459.9,151 459.9,157.8 459.9,164.6 459.9,171.3 459.9,178.1 459.9,184.9 459.9,191.7 459.9,198.5 459.9,218.8 459.9,225.6 459.9,232.4 459.9,239.2 459.9,246 459.9,252.7 459.9,259.5 459.9,266.3 459.9,273.1 459.9,279.9 459.9,286.6 459.9,293.4 459.9,300.2 459.9,307 459.9,313.8 459.9,320.6 459.9,327.3 459.9,334.1 459.9,340.9 459.9,347.7 459.9,354.5 459.9,361.3 459.9,368 453.1,49.3 453.1,62.8 453.1,96.7 453.1,103.5 453.1,110.3 453.1,117.1 453.1,123.9 453.1,130.7 453.1,137.4 453.1,144.2 453.1,151 453.1,157.8 453.1,164.6 453.1,171.3 453.1,178.1 453.1,184.9 453.1,191.7 453.1,198.5 453.1,212 453.1,218.8 453.1,225.6 453.1,232.4 453.1,239.2 453.1,246 453.1,252.7 453.1,259.5 453.1,266.3 453.1,273.1 453.1,279.9 453.1,286.6 453.1,293.4 453.1,300.2 453.1,307 453.1,313.8 453.1,320.6 453.1,327.3 453.1,334.1 453.1,340.9 453.1,347.7 453.1,354.5 453.1,361.3 453.1,368 446.3,49.3 446.3,56 446.3,96.7 446.3,103.5 446.3,110.3 446.3,117.1 446.3,123.9 446.3,144.2 446.3,151 446.3,157.8 446.3,164.6 446.3,171.3 446.3,178.1 446.3,184.9 446.3,191.7 446.3,198.5 446.3,212 446.3,218.8 446.3,225.6 446.3,232.4 446.3,239.2 446.3,246 446.3,252.7 446.3,259.5 446.3,266.3 446.3,273.1 446.3,279.9 446.3,286.6 446.3,293.4 446.3,300.2 446.3,307 446.3,313.8 446.3,320.6 446.3,327.3 446.3,334.1 446.3,340.9 446.3,347.7 446.3,354.5 446.3,361.3 446.3,368 439.5,49.3 439.5,56 439.5,62.8 439.5,96.7 439.5,103.5 439.5,110.3 439.5,117.1 439.5,130.7 439.5,151 439.5,157.8 439.5,164.6 439.5,171.3 439.5,178.1 439.5,184.9 439.5,218.8 439.5,225.6 439.5,232.4 439.5,239.2 439.5,246 439.5,252.7 439.5,259.5 439.5,266.3 439.5,273.1 439.5,279.9 439.5,286.6 439.5,293.4 439.5,300.2 439.5,307 439.5,313.8 439.5,320.6 439.5,327.3 439.5,334.1 439.5,340.9 439.5,347.7 439.5,354.5 439.5,361.3 439.5,368 432.8,56 432.8,62.8 432.8,103.5 432.8,110.3 432.8,117.1 432.8,123.9 432.8,130.7 432.8,137.4 432.8,144.2 432.8,151 432.8,157.8 432.8,164.6 432.8,171.3 432.8,178.1 432.8,191.7 432.8,198.5 432.8,218.8 432.8,225.6 432.8,232.4 432.8,239.2 432.8,246 432.8,252.7 432.8,259.5 432.8,266.3 432.8,273.1 432.8,279.9 432.8,286.6 432.8,293.4 432.8,300.2 432.8,307 432.8,313.8 432.8,320.6 432.8,327.3 432.8,334.1 432.8,340.9 432.8,347.7 426,56 426,110.3 426,117.1 426,123.9 426,130.7 426,137.4 426,151 426,157.8 426,164.6 426,171.3 426,178.1 426,184.9 426,198.5 426,212 426,218.8 426,225.6 426,232.4 426,239.2 426,246 426,252.7 426,259.5 426,266.3 426,273.1 426,279.9 426,286.6 426,293.4 426,300.2 426,320.6 426,327.3 419.2,117.1 419.2,123.9 419.2,130.7 419.2,137.4 419.2,144.2 419.2,151 419.2,157.8 419.2,164.6 419.2,171.3 419.2,178.1 419.2,184.9 419.2,191.7 419.2,205.3 419.2,212 419.2,218.8 419.2,225.6 419.2,232.4 419.2,239.2 419.2,246 419.2,252.7 419.2,259.5 419.2,266.3 419.2,273.1 419.2,279.9 419.2,286.6 419.2,293.4 412.4,123.9 412.4,130.7 412.4,137.4 412.4,157.8 412.4,164.6 412.4,171.3 412.4,178.1 412.4,184.9 412.4,205.3 412.4,212 412.4,218.8 412.4,225.6 412.4,232.4 412.4,239.2 412.4,246 412.4,252.7 412.4,259.5 412.4,266.3 412.4,273.1 405.6,157.8 405.6,164.6 405.6,171.3 405.6,178.1 405.6,184.9 405.6,205.3 405.6,212 405.6,218.8 405.6,225.6 405.6,232.4 405.6,239.2 405.6,246 405.6,252.7 405.6,259.5 405.6,266.3 405.6,273.1 398.8,130.7 398.8,151 398.8,164.6 398.8,171.3 398.8,178.1 398.8,184.9 398.8,191.7 398.8,205.3 398.8,212 398.8,218.8 398.8,225.6 398.8,232.4 398.8,239.2 398.8,246 398.8,252.7 398.8,259.5 398.8,266.3 398.8,273.1 392.1,130.7 392.1,137.4 392.1,144.2 392.1,151 392.1,157.8 392.1,171.3 392.1,184.9 392.1,191.7 392.1,198.5 392.1,205.3 392.1,212 392.1,218.8 392.1,225.6 392.1,232.4 392.1,239.2 392.1,246 392.1,252.7 392.1,259.5 392.1,266.3 392.1,273.1 385.3,137.4 385.3,144.2 385.3,151 385.3,157.8 385.3,171.3 385.3,184.9 385.3,191.7 385.3,198.5 385.3,205.3 385.3,212 385.3,218.8 385.3,225.6 385.3,232.4 385.3,239.2 385.3,246 385.3,252.7 385.3,259.5 385.3,266.3 385.3,273.1 385.3,279.9 378.5,123.9 378.5,144.2 378.5,151 378.5,184.9 378.5,191.7 378.5,198.5 378.5,212 378.5,218.8 378.5,225.6 378.5,232.4 378.5,239.2 378.5,246 378.5,252.7 378.5,259.5 378.5,266.3 378.5,273.1 378.5,279.9 371.7,42.5 371.7,151 371.7,225.6 371.7,232.4 371.7,239.2 371.7,246 371.7,252.7 371.7,259.5 371.7,266.3 371.7,273.1 364.9,42.5 364.9,232.4 364.9,239.2 364.9,246 364.9,252.7 364.9,259.5 358.1,42.5 358.1,49.3 358.1,110.3 358.1,239.2 351.4,35.7 351.4,42.5 351.4,49.3 351.4,56 351.4,62.8 351.4,69.6 351.4,76.4 351.4,110.3 351.4,117.1 344.6,35.7 344.6,42.5 344.6,49.3 344.6,56 344.6,62.8 344.6,69.6 344.6,76.4 344.6,83.2 344.6,90 344.6,96.7 344.6,110.3 344.6,117.1 337.8,28.9 337.8,35.7 337.8,42.5 337.8,49.3 337.8,56 337.8,62.8 337.8,69.6 337.8,76.4 337.8,83.2 337.8,90 337.8,96.7 331,28.9 331,35.7 331,42.5 331,49.3 331,56 331,62.8 331,69.6 331,76.4 331,83.2 331,90 331,96.7 331,103.5 324.2,28.9 324.2,35.7 324.2,42.5 324.2,49.3 324.2,56 324.2,62.8 324.2,69.6 324.2,76.4 324.2,83.2 324.2,90 324.2,96.7 324.2,103.5 317.5,28.9 317.5,35.7 317.5,42.5 317.5,49.3 317.5,56 317.5,62.8 317.5,69.6 317.5,76.4 317.5,83.2 317.5,90 317.5,96.7 317.5,103.5 317.5,110.3 317.5,300.2 317.5,307 310.7,28.9 310.7,35.7 310.7,42.5 310.7,49.3 310.7,56 310.7,62.8 310.7,69.6 310.7,76.4 310.7,83.2 310.7,90 310.7,96.7 310.7,103.5 310.7,110.3 310.7,300.2 310.7,307 310.7,313.8 310.7,320.6 310.7,327.3 303.9,35.7 303.9,42.5 303.9,49.3 303.9,56 303.9,62.8 303.9,69.6 303.9,76.4 303.9,83.2 303.9,90 303.9,96.7 303.9,103.5 303.9,110.3 303.9,117.1 303.9,123.9 303.9,300.2 303.9,307 303.9,313.8 303.9,320.6 303.9,327.3 303.9,334.1 303.9,340.9 297.1,35.7 297.1,42.5 297.1,49.3 297.1,56 297.1,62.8 297.1,69.6 297.1,76.4 297.1,83.2 297.1,90 297.1,96.7 297.1,103.5 297.1,110.3 297.1,117.1 297.1,123.9 297.1,130.7 297.1,293.4 297.1,300.2 297.1,307 297.1,313.8 297.1,320.6 297.1,327.3 297.1,334.1 297.1,340.9 290.3,35.7 290.3,42.5 290.3,49.3 290.3,56 290.3,62.8 290.3,69.6 290.3,76.4 290.3,83.2 290.3,90 290.3,96.7 290.3,103.5 290.3,110.3 290.3,117.1 290.3,123.9 290.3,130.7 290.3,293.4 290.3,300.2 290.3,307 290.3,313.8 290.3,320.6 290.3,327.3 290.3,334.1 290.3,340.9 290.3,347.7 283.5,35.7 283.5,42.5 283.5,49.3 283.5,56 283.5,62.8 283.5,69.6 283.5,76.4 283.5,83.2 283.5,90 283.5,96.7 283.5,103.5 283.5,110.3 283.5,117.1 283.5,123.9 283.5,279.9 283.5,286.6 283.5,293.4 283.5,300.2 283.5,307 283.5,313.8 283.5,320.6 283.5,327.3 283.5,334.1 283.5,340.9 283.5,347.7 283.5,354.5 283.5,361.3 276.8,42.5 276.8,49.3 276.8,56 276.8,62.8 276.8,69.6 276.8,76.4 276.8,83.2 276.8,90 276.8,96.7 276.8,103.5 276.8,110.3 276.8,171.3 276.8,279.9 276.8,286.6 276.8,293.4 276.8,300.2 276.8,307 276.8,313.8 276.8,320.6 276.8,327.3 276.8,334.1 276.8,340.9 276.8,347.7 276.8,354.5 276.8,361.3 276.8,368 270,42.5 270,49.3 270,56 270,62.8 270,69.6 270,76.4 270,157.8 270,164.6 270,171.3 270,279.9 270,286.6 270,293.4 270,300.2 270,307 270,313.8 270,320.6 270,327.3 270,334.1 270,340.9 270,347.7 270,354.5 270,361.3 270,368 270,374.8 263.2,42.5 263.2,49.3 263.2,56 263.2,62.8 263.2,69.6 263.2,151 263.2,157.8 263.2,171.3 263.2,273.1 263.2,279.9 263.2,286.6 263.2,293.4 263.2,300.2 263.2,307 263.2,313.8 263.2,320.6 263.2,327.3 263.2,334.1 263.2,340.9 263.2,347.7 263.2,354.5 263.2,361.3 263.2,368 263.2,374.8 263.2,381.6 256.4,35.7 256.4,42.5 256.4,49.3 256.4,56 256.4,62.8 256.4,69.6 256.4,110.3 256.4,144.2 256.4,151 256.4,157.8 256.4,178.1 256.4,266.3 256.4,273.1 256.4,279.9 256.4,286.6 256.4,293.4 256.4,300.2 256.4,307 256.4,313.8 256.4,320.6 256.4,327.3 256.4,334.1 256.4,340.9 256.4,347.7 256.4,354.5 256.4,361.3 256.4,368 256.4,374.8 256.4,381.6 256.4,388.4 249.6,35.7 249.6,42.5 249.6,49.3 249.6,56 249.6,62.8 249.6,69.6 249.6,103.5 249.6,110.3 249.6,117.1 249.6,123.9 249.6,137.4 249.6,144.2 249.6,151 249.6,157.8 249.6,171.3 249.6,178.1 249.6,246 249.6,266.3 249.6,273.1 249.6,279.9 249.6,286.6 249.6,293.4 249.6,300.2 249.6,307 249.6,313.8 249.6,320.6 249.6,327.3 249.6,334.1 249.6,340.9 249.6,347.7 249.6,354.5 249.6,361.3 249.6,368 249.6,374.8 249.6,381.6 249.6,388.4 249.6,395.2 249.6,429.1 242.8,35.7 242.8,42.5 242.8,56 242.8,62.8 242.8,69.6 242.8,96.7 242.8,103.5 242.8,110.3 242.8,117.1 242.8,123.9 242.8,137.4 242.8,144.2 242.8,151 242.8,157.8 242.8,164.6 242.8,171.3 242.8,178.1 242.8,246 242.8,266.3 242.8,273.1 242.8,279.9 242.8,286.6 242.8,293.4 242.8,300.2 242.8,307 242.8,313.8 242.8,320.6 242.8,327.3 242.8,334.1 242.8,340.9 242.8,347.7 242.8,354.5 242.8,361.3 242.8,368 242.8,374.8 242.8,381.6 242.8,388.4 242.8,395.2 242.8,402 242.8,408.7 242.8,422.3 242.8,429.1 236.1,35.7 236.1,42.5 236.1,49.3 236.1,56 236.1,62.8 236.1,90 236.1,96.7 236.1,103.5 236.1,110.3 236.1,117.1 236.1,130.7 236.1,137.4 236.1,144.2 236.1,151 236.1,157.8 236.1,164.6 236.1,171.3 236.1,178.1 236.1,184.9 236.1,239.2 236.1,246 236.1,259.5 236.1,266.3 236.1,273.1 236.1,279.9 236.1,286.6 236.1,293.4 236.1,300.2 236.1,307 236.1,313.8 236.1,320.6 236.1,327.3 236.1,354.5 236.1,361.3 236.1,368 236.1,374.8 236.1,381.6 236.1,388.4 236.1,395.2 236.1,402 236.1,408.7 236.1,415.5 236.1,422.3 236.1,429.1 229.3,35.7 229.3,42.5 229.3,49.3 229.3,90 229.3,96.7 229.3,117.1 229.3,123.9 229.3,130.7 229.3,137.4 229.3,144.2 229.3,151 229.3,157.8 229.3,164.6 229.3,171.3 229.3,178.1 229.3,184.9 229.3,191.7 229.3,239.2 229.3,246 229.3,266.3 229.3,273.1 229.3,279.9 229.3,286.6 229.3,293.4 229.3,300.2 229.3,307 229.3,313.8 229.3,320.6 229.3,388.4 229.3,395.2 229.3,402 229.3,408.7 229.3,415.5 229.3,422.3 222.5,35.7 222.5,42.5 222.5,49.3 222.5,56 222.5,90 222.5,96.7 222.5,103.5 222.5,117.1 222.5,123.9 222.5,130.7 222.5,137.4 222.5,151 222.5,157.8 222.5,164.6 222.5,171.3 222.5,178.1 222.5,184.9 222.5,191.7 222.5,198.5 222.5,205.3 222.5,239.2 222.5,246 222.5,266.3 222.5,273.1 222.5,279.9 222.5,286.6 222.5,293.4 222.5,300.2 222.5,307 222.5,313.8 215.7,35.7 215.7,42.5 215.7,49.3 215.7,56 215.7,62.8 215.7,76.4 215.7,83.2 215.7,90 215.7,96.7 215.7,164.6 215.7,171.3 215.7,178.1 215.7,184.9 215.7,191.7 215.7,198.5 215.7,205.3 215.7,212 215.7,218.8 215.7,225.6 215.7,239.2 215.7,266.3 215.7,273.1 215.7,286.6 215.7,293.4 215.7,300.2 208.9,35.7 208.9,42.5 208.9,49.3 208.9,56 208.9,62.8 208.9,76.4 208.9,83.2 208.9,90 208.9,96.7 208.9,103.5 208.9,110.3 208.9,117.1 208.9,123.9 208.9,151 208.9,157.8 208.9,164.6 208.9,171.3 208.9,178.1 208.9,184.9 208.9,191.7 208.9,198.5 208.9,205.3 208.9,212 208.9,218.8 208.9,252.7 208.9,259.5 208.9,266.3 202.2,42.5 202.2,49.3 202.2,56 202.2,62.8 202.2,76.4 202.2,83.2 202.2,90 202.2,96.7 202.2,103.5 202.2,110.3 202.2,117.1 202.2,151 202.2,157.8 202.2,164.6 202.2,171.3 202.2,178.1 202.2,184.9 202.2,191.7 202.2,198.5 202.2,205.3 202.2,212 202.2,218.8 202.2,239.2 202.2,252.7 202.2,259.5 202.2,266.3 195.4,42.5 195.4,49.3 195.4,56 195.4,69.6 195.4,76.4 195.4,83.2 195.4,90 195.4,103.5 195.4,110.3 195.4,117.1 195.4,144.2 195.4,151 195.4,157.8 195.4,164.6 195.4,171.3 195.4,178.1 195.4,184.9 195.4,191.7 195.4,198.5 195.4,205.3 195.4,212 195.4,218.8 195.4,239.2 195.4,246 195.4,252.7 195.4,259.5 188.6,42.5 188.6,49.3 188.6,56 188.6,69.6 188.6,83.2 188.6,96.7 188.6,103.5 188.6,110.3 188.6,117.1 188.6,123.9 188.6,137.4 188.6,144.2 188.6,151 188.6,157.8 188.6,164.6 188.6,171.3 188.6,178.1 188.6,184.9 188.6,191.7 188.6,198.5 188.6,205.3 188.6,212 188.6,218.8 188.6,246 188.6,252.7 181.8,49.3 181.8,62.8 181.8,83.2 181.8,90 181.8,96.7 181.8,103.5 181.8,110.3 181.8,117.1 181.8,123.9 181.8,130.7 181.8,137.4 181.8,144.2 181.8,151 181.8,157.8 181.8,164.6 181.8,171.3 181.8,178.1 181.8,184.9 181.8,191.7 181.8,198.5 181.8,205.3 181.8,212 181.8,218.8 181.8,246 181.8,252.7 175,56 175,69.6 175,83.2 175,90 175,96.7 175,103.5 175,110.3 175,117.1 175,123.9 175,130.7 175,137.4 175,144.2 175,151 175,157.8 175,164.6 175,171.3 175,178.1 175,184.9 175,191.7 175,198.5 175,205.3 175,212 175,218.8 175,225.6 175,232.4 175,239.2 175,246 175,252.7 168.2,49.3 168.2,56 168.2,69.6 168.2,83.2 168.2,96.7 168.2,103.5 168.2,110.3 168.2,117.1 168.2,123.9 168.2,130.7 168.2,137.4 168.2,144.2 168.2,151 168.2,157.8 168.2,164.6 168.2,171.3 168.2,178.1 168.2,184.9 168.2,191.7 168.2,198.5 168.2,205.3 168.2,212 168.2,218.8 168.2,225.6 168.2,232.4 168.2,239.2 168.2,246 161.5,56 161.5,62.8 161.5,69.6 161.5,83.2 161.5,90 161.5,96.7 161.5,103.5 161.5,110.3 161.5,117.1 161.5,123.9 161.5,130.7 161.5,137.4 161.5,144.2 161.5,151 161.5,157.8 161.5,164.6 161.5,171.3 161.5,178.1 161.5,184.9 161.5,191.7 161.5,198.5 161.5,205.3 161.5,212 161.5,218.8 161.5,225.6 161.5,232.4 161.5,239.2 161.5,246 154.7,69.6 154.7,83.2 154.7,90 154.7,96.7 154.7,103.5 154.7,110.3 154.7,117.1 154.7,123.9 154.7,130.7 154.7,137.4 154.7,144.2 154.7,151 154.7,157.8 154.7,164.6 154.7,171.3 154.7,178.1 154.7,184.9 154.7,191.7 154.7,198.5 154.7,205.3 154.7,212 154.7,218.8 154.7,225.6 154.7,232.4 147.9,56 147.9,62.8 147.9,69.6 147.9,90 147.9,96.7 147.9,110.3 147.9,117.1 147.9,123.9 147.9,130.7 147.9,137.4 147.9,144.2 147.9,151 147.9,157.8 147.9,164.6 147.9,171.3 147.9,178.1 147.9,184.9 147.9,191.7 147.9,198.5 147.9,205.3 147.9,212 147.9,218.8 147.9,225.6 147.9,232.4 141.1,62.8 141.1,69.6 141.1,76.4 141.1,90 141.1,96.7 141.1,110.3 141.1,117.1 141.1,123.9 141.1,130.7 141.1,137.4 141.1,144.2 141.1,151 141.1,157.8 141.1,164.6 141.1,171.3 141.1,178.1 141.1,184.9 141.1,191.7 141.1,198.5 141.1,205.3 141.1,212 141.1,218.8 141.1,225.6 134.3,62.8 134.3,69.6 134.3,83.2 134.3,90 134.3,96.7 134.3,103.5 134.3,110.3 134.3,117.1 134.3,123.9 134.3,130.7 134.3,137.4 134.3,144.2 134.3,151 134.3,157.8 134.3,164.6 134.3,171.3 134.3,178.1 134.3,184.9 134.3,191.7 134.3,198.5 134.3,205.3 134.3,212 127.5,62.8 127.5,69.6 127.5,83.2 127.5,90 127.5,103.5 127.5,110.3 127.5,117.1 127.5,123.9 127.5,130.7 127.5,137.4 127.5,144.2 127.5,151 127.5,157.8 127.5,164.6 127.5,171.3 127.5,178.1 127.5,184.9 127.5,191.7 127.5,198.5 127.5,205.3 120.8,69.6 120.8,76.4 120.8,83.2 120.8,90 120.8,96.7 120.8,103.5 120.8,110.3 120.8,117.1 120.8,123.9 120.8,130.7 120.8,137.4 120.8,144.2 120.8,151 120.8,157.8 120.8,164.6 120.8,171.3 120.8,178.1 120.8,184.9 120.8,191.7 120.8,198.5 114,83.2 114,90 114,96.7 114,103.5 114,110.3 114,117.1 114,123.9 114,130.7 114,137.4 114,144.2 114,151 114,157.8 114,164.6 107.2,96.7 107.2,103.5 107.2,110.3 107.2,117.1 107.2,123.9 107.2,130.7 107.2,137.4 107.2,144.2 107.2,151 107.2,157.8 107.2,164.6 100.4,96.7 100.4,103.5 100.4,110.3 100.4,117.1 100.4,123.9 100.4,130.7 100.4,137.4 100.4,144.2 100.4,151 93.6,103.5 93.6,110.3 93.6,117.1 93.6,123.9 93.6,130.7 93.6,137.4 93.6,144.2 93.6,151 86.9,103.5 86.9,110.3 86.9,117.1 86.9,123.9 86.9,130.7 86.9,137.4 80.1,96.7 80.1,103.5 80.1,110.3 80.1,117.1 80.1,123.9 80.1,130.7 73.3,96.7 73.3,103.5 73.3,110.3 73.3,117.1 73.3,123.9 73.3,130.7 66.5,96.7 66.5,103.5 66.5,110.3 66.5,117.1 66.5,123.9 66.5,130.7 59.7,96.7 59.7,103.5 59.7,110.3 59.7,117.1 59.7,123.9 59.7,130.7 52.9,96.7 52.9,103.5 52.9,110.3 52.9,117.1 52.9,123.9 52.9,130.7 52.9,137.4 46.2,90 46.2,96.7 46.2,103.5 46.2,110.3 46.2,117.1 46.2,123.9 46.2,130.7 46.2,137.4 46.2,144.2 39.4,90 39.4,96.7 39.4,103.5 39.4,110.3 39.4,117.1 39.4,123.9 39.4,130.7 39.4,137.4 39.4,144.2 32.6,96.7 32.6,103.5 32.6,110.3 32.6,117.1 32.6,123.9 32.6,130.7 32.6,137.4 32.6,144.2 32.6,151 25.8,103.5 25.8,110.3 25.8,117.1 25.8,123.9 25.8,130.7 25.8,151 19,103.5 19,110.3 19,117.1 19,151 19,157.8".split(" ").map(t=>{const[e,r]=t.split(",");return[parseFloat(e),parseFloat(r)]}),GPe=(t,e,r,s)=>{let a="";return t>=100&&t<=265&&e>=70&&e<=180?a="CANADA":t>=100&&t<=350&&e>=180&&e<=260?a="USA":t>=550&&t<=600&&e>=210&&e<=280?a="INDIA":t>=550&&t<=680&&e>=145&&e<=230?a="HONG KONG":t>=680&&t<=740&&e>=140&&e<=230&&(a="TOKYO"),a&&r&&r[a]?s?r[a].isUp?"#10b981":"#ef4444":r[a].isUp?"#52b788":"#ef233c":s?"#ffffff":"#00296b"};function XPe(){const{marketData:t,loading:e}=WPe(9e5),{theme:r}=OA(),s=r==="dark",[a,i]=g.useState(!1);g.useEffect(()=>{const l=()=>{i(window.innerWidth<768)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]);const o=a?"1.5":"1.8";return n.jsxs("div",{className:"mb-5 relative",children:[n.jsx("div",{className:"relative h-35 overflow-hidden",style:{backgroundColor:s?"#1a1a1a":"#e3f2fd"},children:n.jsx("svg",{viewBox:"-10 0 1045.2 458",className:"w-full h-full",preserveAspectRatio:"xMidYMid meet",shapeRendering:"crispEdges",style:{filter:"none",background:"none"},children:KPe.map(([l,d],h)=>{const f=GPe(l,d,t,s);return n.jsx("circle",{cx:l,cy:d,r:o,fill:f,opacity:1,shapeRendering:"crispEdges"},h)})})}),n.jsxs("div",{className:"flex justify-center gap-3 mt-3 flex-wrap",children:[YPe.map(l=>{const d=t==null?void 0:t[l.name],h=d?d.isUp?s?"#10b981":"#73ba9b":s?"#ef4444":"#ef233c":"#64748b";return n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full",style:{backgroundColor:h}}),n.jsx("span",{className:"text-gray-600 text-[10px] tracking-wide",children:l.name}),d&&d.change!==void 0&&n.jsxs("span",{className:"text-[9px]",style:{color:h},children:[d.isUp?"+":"",d.change.toFixed(2),"%"]})]},l.name)}),e&&n.jsx("span",{className:"text-gray-400 text-[9px]",children:"Updating..."})]})]})}function m3(t,e=!1){var r;if(!t)return 0;if(((r=t.performanceMetrics)==null?void 0:r.netPnL)!==void 0)return t.performanceMetrics.netPnL;if(e)return 0;if(t.tradeHistory&&Array.isArray(t.tradeHistory)){let s=0;return t.tradeHistory.forEach(a=>{if(a.pnl&&typeof a.pnl=="string"){const i=parseFloat(a.pnl.replace(/[,]/g,""));isNaN(i)||(s+=i)}}),s}return 0}function QPe(t){if(t===0)return"bg-gray-200 dark:bg-gray-700";const e=Math.abs(t);return t>0?e>=5e3?"bg-green-800 dark:bg-green-700":e>=1500?"bg-green-600 dark:bg-green-500":"bg-green-300 dark:bg-green-300":e>=5e3?"bg-red-800 dark:bg-red-700":e>=1500?"bg-red-600 dark:bg-red-500":"bg-red-300 dark:bg-red-300"}function K5({onDateSelect:t,selectedDate:e,onDataUpdate:r,onRangeChange:s,highlightedDates:a,isPublicView:i,tradingDataByDate:o,onSelectDateForHeatmap:l,refreshTrigger:d=0}){const{currentUser:h}=h1(),[f,m]=g.useState(new Date),[x,b]=g.useState(null),[j,N]=g.useState({}),[w,C]=g.useState(!0),[T,O]=g.useState(!1),[I,P]=g.useState(!1),[A,R]=g.useState(!1),[B,V]=g.useState(null),[X,ee]=g.useState(0),Y=g.useRef(null),re=g.useRef(null),le=g.useRef(null),te=h.email==="chiranjeevi.perala99@gmail.com";g.useEffect(()=>{console.log(" Current user email:",h.email),console.log(" Can edit demo trades:",te)},[h.email,te]),g.useEffect(()=>{console.log(" DemoHeatmap mounted - triggering immediate auto-fetch on mount"),o||ee(Ke=>Ke+1)},[]);const de=g.useRef(null),ie=g.useRef(null),[Z,ne]=g.useState(null),[oe,U]=g.useState(null),[W,be]=g.useState([]),[pe,ge]=g.useState([]),[Ce,he]=g.useState(null),[ue,ce]=g.useState(null),Ee=g.useRef(null),Le=g.useRef(!1),{toast:Ie}=Ia(),[Ue,Ae]=g.useState(null);g.useEffect(()=>{const Ke=o?Object.keys(o).length:0;if(i&&Ke>10){console.log(" DemoHeatmap: Using provided tradingDataByDate (public/secure mode)"),console.log(` DemoHeatmap: ${Ke} dates provided externally`),N(o),C(!1),r&&r(o);return}console.log(` DemoHeatmap: AUTO-FETCHING COMPLETE AWS data... (refreshKey: ${X}${Ke>0?`, ignoring ${Ke} partial parent dates`:""})`),N({}),C(!0),fetch("/api/journal/all-dates").then(Oe=>Oe.json()).then(Oe=>{console.log(" DemoHeatmap: Raw AWS data received:",Oe),console.log(" DemoHeatmap: Total dates loaded:",Object.keys(Oe).length);const me={};Object.keys(Oe).forEach(je=>{const ke=je.match(/(\d{4}-\d{2}-\d{2})/);if(ke){const Te=ke[1];me[Te]=Oe[je];const Je=m3(Oe[je]);console.log(` DemoHeatmap: ${Te} = ${Je.toFixed(2)}`)}}),console.log(" DemoHeatmap: Processed complete dataset with",Object.keys(me).length,"dates"),N(me),C(!1),r&&r(me)}).catch(Oe=>{console.error(" DemoHeatmap: Fetch error:",Oe),C(!1)})},[X,d,i]),g.useEffect(()=>{if(W.length!==2||!re.current||!le.current){console.log(" DemoHeatmap: Badge positions reset - conditions not met",{selectedCount:W.length,badge1Exists:!!re.current,badge2Exists:!!le.current}),ne(null);return}const Ke=()=>{if(!re.current||!le.current||!Y.current){console.log(" DemoHeatmap: Badges or container not ready yet");return}const ke=re.current.getBoundingClientRect(),Te=le.current.getBoundingClientRect(),Je=Y.current.getBoundingClientRect(),Q=ke.left-Je.left+ke.width/2,tt=Te.left-Je.left+Te.width/2,it=ke.top-Je.top+ke.height/2,ft=Je.height;console.log(" DemoHeatmap: Calculated badge positions",{x1:Q,x2:tt,y:it,containerHeight:ft}),ne({x1:Q,x2:tt,y:it,containerHeight:ft})},Ne=setTimeout(Ke,0),Oe=setTimeout(Ke,50),me=setTimeout(Ke,100),je=Ee.current;return je&&je.addEventListener("scroll",Ke),()=>{clearTimeout(Ne),clearTimeout(Oe),clearTimeout(me),je&&je.removeEventListener("scroll",Ke)}},[W]);const[We,ot]=g.useState(null),[It,tr]=g.useState(!0),[Ct,we]=g.useState(!1);g.useEffect(()=>{if(!i||!Ee.current||w)return;const Ke=Ee.current,Ne=Ke.scrollWidth-Ke.clientWidth;if(Ne<=0)return;let Oe=1,me=0,je=null,ke=!1;const Te=()=>{if(ke)return;me+=.5*Oe,me>=Ne?(me=Ne,Oe=-1):me<=0&&(me=0,Oe=1),Ke.scrollLeft=me,je=requestAnimationFrame(Te)},Je=()=>{var tt;if(ke=!0,tr(!1),je&&cancelAnimationFrame(je),!Ct){we(!0);const it=Ke.querySelector('button[title*="Click to"]');it&&((tt=it.textContent)!=null&&tt.includes("FOMO"))&&(it.click(),console.log(" FOMO button auto-clicked on user interaction"),setTimeout(()=>{it.click(),console.log(" FOMO button auto-turned off")},2e3))}};Ke.addEventListener("touchstart",Je,{once:!0}),Ke.addEventListener("click",Je,{once:!0}),Ke.addEventListener("mousedown",Je,{once:!0});const Q=setTimeout(()=>{ke||(je=requestAnimationFrame(Te),ot(je))},500);return()=>{clearTimeout(Q),je&&cancelAnimationFrame(je),Ke.removeEventListener("touchstart",Je),Ke.removeEventListener("click",Je),Ke.removeEventListener("mousedown",Je)}},[i,w,Ct]),g.useEffect(()=>{if(pe.length!==2||!de.current||!ie.current){U(null);return}const Ke=()=>{if(!de.current||!ie.current||!Y.current)return;const ke=de.current.getBoundingClientRect(),Te=ie.current.getBoundingClientRect(),Je=Y.current.getBoundingClientRect(),Q=ke.left-Je.left+ke.width/2,tt=Te.left-Je.left+Te.width/2,it=ke.top-Je.top+ke.height/2,ft=Je.height;console.log(" DemoHeatmap: Calculated range badge positions",{x1:Q,x2:tt,y:it,containerHeight:ft}),U({x1:Q,x2:tt,y:it,containerHeight:ft})},Ne=setTimeout(Ke,0),Oe=setTimeout(Ke,50),me=setTimeout(Ke,100),je=Ee.current;return je&&je.addEventListener("scroll",Ke),()=>{clearTimeout(Ne),clearTimeout(Oe),clearTimeout(me),je&&je.removeEventListener("scroll",Ke)}},[pe]),g.useEffect(()=>{if(W.length!==2||!T||!Ee.current){he(null);return}const Ke=()=>{var qt,ar;const[ke,Te]=W,Je=(qt=Ee.current)==null?void 0:qt.querySelector(`[data-date="${ke}"]`),Q=(ar=Ee.current)==null?void 0:ar.querySelector(`[data-date="${Te}"]`);if(!Je||!Q||!Ee.current){console.log(" DemoHeatmap: Calendar cells not found yet",{date1Key:ke,date2Key:Te});return}const tt=Ee.current.getBoundingClientRect(),it=Je.getBoundingClientRect(),ft=Q.getBoundingClientRect(),He=Ee.current.scrollLeft,Vt=Ee.current.scrollTop,Zt=it.left-tt.left+it.width/2+He,vr=it.top-tt.top+it.height/2+Vt,Dt=ft.left-tt.left+ft.width/2+He,Xt=ft.top-tt.top+ft.height/2+Vt;console.log(" DemoHeatmap: Calculated heatmap line positions",{x1:Zt,y1:vr,x2:Dt,y2:Xt,scrollLeft:He,scrollTop:Vt}),he({x1:Zt,y1:vr,x2:Dt,y2:Xt})},Ne=setTimeout(Ke,0),Oe=setTimeout(Ke,50),me=setTimeout(Ke,150),je=Ee.current;return je&&je.addEventListener("scroll",Ke),()=>{clearTimeout(Ne),clearTimeout(Oe),clearTimeout(me),je&&je.removeEventListener("scroll",Ke)}},[W,T]),g.useEffect(()=>{if(!x||!Ee.current){ce(null);return}const Ke=()=>{var qt,ar;const ke=x.from.toLocaleString("en-US",{month:"short",year:"numeric"}),Te=x.to.toLocaleString("en-US",{month:"short",year:"numeric"}),Je=(qt=Ee.current)==null?void 0:qt.querySelector(`[data-month="${ke}"]`),Q=(ar=Ee.current)==null?void 0:ar.querySelector(`[data-month="${Te}"]`);if(!Je||!Q||!Ee.current){console.log(" DemoHeatmap: Month labels not found yet",{fromMonth:ke,toMonth:Te});return}const tt=Ee.current.getBoundingClientRect(),it=Je.getBoundingClientRect(),ft=Q.getBoundingClientRect(),He=Ee.current.scrollLeft,Vt=Ee.current.scrollTop,Zt=it.left-tt.left+it.width/2+He,vr=it.top-tt.top+it.height/2+Vt,Dt=ft.left-tt.left+ft.width/2+He,Xt=ft.top-tt.top+ft.height/2+Vt;console.log(" DemoHeatmap: Range line positions (month labels)",{x1:Zt,y1:vr,x2:Dt,y2:Xt,fromMonth:ke,toMonth:Te}),ce({x1:Zt,y1:vr,x2:Dt,y2:Xt})},Ne=setTimeout(Ke,100),Oe=setTimeout(Ke,250),me=setTimeout(Ke,500),je=Ee.current;return je&&je.addEventListener("scroll",Ke),()=>{clearTimeout(Ne),clearTimeout(Oe),clearTimeout(me),je&&je.removeEventListener("scroll",Ke)}},[x]),g.useEffect(()=>{if(!i||!a||a.dates.length===0||!Ee.current){Ae(null);return}const Ke=()=>{const ke=Ee.current;if(!ke)return;const Te=ke.getBoundingClientRect(),Je=ke.scrollLeft,Q=ke.scrollTop,tt=Te.width/2,it=-10,ft=[];a.dates.forEach(He=>{const Vt=ke.querySelector(`[data-date="${He}"]`);if(Vt){const Zt=Vt.getBoundingClientRect(),vr=Zt.left-Te.left+Zt.width/2+Je,Dt=Zt.top-Te.top+Zt.height/2+Q;ft.push({x1:tt,y1:it,x2:vr,y2:Dt})}}),console.log(` DemoHeatmap: Calculated ${ft.length} FOMO line positions for ${a.tag} tag`),Ae(ft.length>0?ft:null)},Ne=setTimeout(Ke,100),Oe=setTimeout(Ke,250),me=setTimeout(Ke,500),je=Ee.current;return je&&je.addEventListener("scroll",Ke),()=>{clearTimeout(Ne),clearTimeout(Oe),clearTimeout(me),je&&je.removeEventListener("scroll",Ke)}},[a,i]);const Fe=()=>{if(!x)return j;const Ke={},Ne=x.from.getTime(),Oe=x.to.getTime();return Object.keys(j).forEach(me=>{const ke=new Date(me).getTime();ke>=Ne&&ke<=Oe&&(Ke[me]=j[me])}),Ke},Ye=()=>{const Ke=f.getFullYear(),Ne=f.getFullYear(),Oe=0,me=11,je=[];for(let ke=Ke;ke<=Ne;ke++)for(let Te=Oe;Te<=me;Te++){const Je=new Date(ke,Te,1).toLocaleString("en-US",{month:"short"}),Q=new Date(ke,Te,1),tt=new Date(ke,Te+1,0),it=Q.getDay(),ft=[[],[],[],[],[],[],[]];for(let He=0;He<it;He++)ft[He].push(null);for(let He=1;He<=tt.getDate();He++){const Vt=new Date(ke,Te,He),Zt=Vt.getDay();ft[Zt].push(Vt)}je.push({name:Je,year:ke,dayRows:ft})}return je},lt=["S","M","T","W","TH","F","S"],pt=Ke=>{if(Le.current){Le.current=!1;return}const Ne=Ke.getFullYear(),Oe=String(Ke.getMonth()+1).padStart(2,"0"),me=String(Ke.getDate()).padStart(2,"0"),je=`${Ne}-${Oe}-${me}`;if(I){ge(ke=>{if(ke.includes(je))return ke.filter(ft=>ft!==je);if(ke.length<2){const ft=[...ke,je];if(ft.length===2){const[He,Vt]=ft.sort(),Zt=new Date(He),vr=new Date(Vt);b({from:Zt,to:vr}),s&&s({from:Zt,to:vr}),console.log(" Range auto-selected:",{from:Zt.toDateString(),to:vr.toDateString()})}return ft}const Te=[ke[0],je],[Je,Q]=Te.sort(),tt=new Date(Je),it=new Date(Q);return b({from:tt,to:it}),s&&s({from:tt,to:it}),Te});return}if(T){be(ke=>ke.includes(je)?ke.filter(Te=>Te!==je):ke.length<2?[...ke,je]:[ke[0],je]);return}if(A){V(ke=>ke===je?null:je);return}if(m(Ke),t(Ke),l&&o){const ke=o[je];let Te="NSE:NIFTY50-INDEX";if(ke!=null&&ke.tradeHistory&&ke.tradeHistory.length>0){const Je=ke.tradeHistory[0];Je.symbol&&(Te=`NSE:${Je.symbol.replace(/NSE:|BSE:|-INDEX|-EQ/g,"")}-INDEX`)}console.log(` [DEMOHEATMAP] Selected date: ${je}, Symbol: ${Te}`),l(Te,je)}},nt=()=>{O(!0),P(!1),R(!1),be([]),V(null)},wt=()=>{R(!0),O(!1),P(!1),V(null)},Lr=()=>{R(!1),V(null)},Tr=async()=>{if(!B){Ie({title:"No Date Selected",description:"Please select a date to delete",variant:"destructive"});return}console.log(` Deleting data for date: ${B}`);try{if(Ie({title:"Deleting Data...",description:`Removing all data for ${B}`}),!(await fetch(`/api/journal/${B}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({})})).ok)throw new Error("Failed to delete data from AWS");console.log(` Data deleted successfully for ${B}`),Ie({title:"Success!",description:`All data deleted for ${B}`}),console.log(" Triggering heatmap refresh after deletion..."),ee(Ne=>Ne+1),R(!1),V(null)}catch(Ke){console.error(" Error deleting data:",Ke),Ie({title:"Error",description:Ke instanceof Error?Ke.message:"Failed to delete data",variant:"destructive"})}},Mr=()=>{P(!0),O(!1),ge([])},ta=()=>{O(!1),be([])},st=async()=>{if(W.length!==2){Ie({title:"Select Two Dates",description:"Please select exactly two dates on the heatmap",variant:"destructive"});return}const[Ke,Ne]=W;console.log(` Relocating demo data: ${Ke}  ${Ne}`);try{Ie({title:"Relocating Data...",description:`Moving data from ${Ke} to ${Ne}`});const Oe=await fetch(`/api/journal/${Ke}`);if(!Oe.ok)throw new Error("Failed to fetch source data");const me=await Oe.json();if(!me||Object.keys(me).length===0){Ie({title:"No Data",description:`No data found at ${Ke}`,variant:"destructive"});return}if(!(await fetch(`/api/journal/${Ne}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(me)})).ok)throw new Error("Failed to save to target date");(await fetch(`/api/journal/${Ke}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({})})).ok||console.warn(" Failed to delete source date, but data was copied successfully"),console.log(" Demo data relocated successfully"),Ie({title:"Success!",description:`All data moved from ${Ke} to ${Ne}`}),console.log(" Triggering heatmap refresh after relocation..."),ee(Te=>Te+1),O(!1),be([])}catch(Oe){console.error(" Error relocating demo data:",Oe),Ie({title:"Error",description:Oe instanceof Error?Oe.message:"Failed to relocate data",variant:"destructive"})}},zt=()=>{const Ke=new Date(f);Ke.setFullYear(f.getFullYear()-1),m(Ke)},Ft=()=>{const Ke=new Date(f);Ke.setFullYear(f.getFullYear()+1),m(Ke)},pr=Ye(),kt=Fe(),Mt=Ke=>Object.keys(Ke).filter(Ne=>m3(Ke[Ne],!!o)!==0).length;return n.jsxs("div",{className:"flex flex-col gap-2 p-3 rounded-md border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 select-none overflow-visible",children:[n.jsxs("div",{className:"text-[10px] uppercase tracking-wider text-gray-500 dark:text-gray-400 flex items-center justify-between gap-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:"preview"}),n.jsx("span",{children:x?`${x.from.getFullYear()}${x.from.getFullYear()!==x.to.getFullYear()?`-${x.to.getFullYear()}`:""}`:f.getFullYear()})]}),n.jsx("span",{className:"text-[10px] text-gray-600 dark:text-gray-400",children:w?"Loading...":x?`${Mt(kt)} of ${Mt(j)} dates`:`${Mt(j)} dates`})]}),n.jsx("div",{className:"flex flex-col gap-2 overflow-visible",children:n.jsxs("div",{className:"overflow-x-auto thin-scrollbar",ref:Ee,style:{position:"relative",zIndex:10,paddingTop:"20px"},children:[ue&&x&&!T&&(()=>{var Xt,qt;const{x1:Ke,y1:Ne,x2:Oe,y2:me}=ue,je=Oe-Ke,ke=me-Ne,Te=Math.sqrt(je*je+ke*ke),Je=Math.min(Te*.3,50),tt=Math.atan2(ke,je)-Math.PI/2,it=(Ke+Oe)/2,ft=(Ne+me)/2,He=it+Math.cos(tt)*Je,Vt=ft+Math.sin(tt)*Je,Zt=`M ${Ke} ${Ne} Q ${He} ${Vt}, ${Oe} ${me}`,vr=((Xt=Ee.current)==null?void 0:Xt.scrollWidth)||0,Dt=((qt=Ee.current)==null?void 0:qt.scrollHeight)||0;return n.jsxs("svg",{style:{position:"absolute",top:0,left:0,width:`${vr}px`,height:`${Dt}px`,pointerEvents:"none",zIndex:10},children:[n.jsx("defs",{children:n.jsxs("linearGradient",{id:"demo-rangeLineGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[n.jsx("stop",{offset:"0%",style:{stopColor:"rgb(59, 130, 246)",stopOpacity:.7}}),n.jsx("stop",{offset:"100%",style:{stopColor:"rgb(147, 51, 234)",stopOpacity:.7}})]})}),n.jsx("path",{d:Zt,stroke:"url(#demo-rangeLineGradient)",strokeWidth:"3",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",style:{filter:"drop-shadow(0 2px 6px rgba(59, 130, 246, 0.4))"}})]})})(),Ce&&T&&(()=>{var Xt,qt;const{x1:Ke,y1:Ne,x2:Oe,y2:me}=Ce,je=Oe-Ke,ke=me-Ne,Te=Math.sqrt(je*je+ke*ke);let Je;const Q=Math.min(Te*.3,50),it=Math.atan2(ke,je)-Math.PI/2,ft=(Ke+Oe)/2,He=(Ne+me)/2,Vt=ft+Math.cos(it)*Q,Zt=He+Math.sin(it)*Q;Je=`M ${Ke} ${Ne} Q ${Vt} ${Zt}, ${Oe} ${me}`;const vr=((Xt=Ee.current)==null?void 0:Xt.scrollWidth)||0,Dt=((qt=Ee.current)==null?void 0:qt.scrollHeight)||0;return n.jsxs("svg",{style:{position:"absolute",top:0,left:0,width:`${vr}px`,height:`${Dt}px`,pointerEvents:"none",zIndex:10},children:[n.jsx("defs",{children:n.jsxs("linearGradient",{id:"lineGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[n.jsx("stop",{offset:"0%",style:{stopColor:"rgb(147, 51, 234)",stopOpacity:.6}}),n.jsx("stop",{offset:"100%",style:{stopColor:"rgb(234, 88, 12)",stopOpacity:.6}})]})}),n.jsx("path",{d:Je,stroke:"url(#lineGradient)",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.2))"}})]})})(),Ue&&i&&a&&(()=>{var Oe,me;const Ke=((Oe=Ee.current)==null?void 0:Oe.scrollWidth)||0,Ne=((me=Ee.current)==null?void 0:me.scrollHeight)||0;return n.jsxs("svg",{style:{position:"absolute",top:0,left:0,width:`${Ke}px`,height:`${Ne}px`,pointerEvents:"none",zIndex:10},children:[n.jsx("defs",{children:n.jsxs("linearGradient",{id:"fomo-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[n.jsx("stop",{offset:"0%",style:{stopColor:"rgb(234, 179, 8)",stopOpacity:.8}}),n.jsx("stop",{offset:"100%",style:{stopColor:"rgb(234, 88, 12)",stopOpacity:.8}})]})}),Ue.map((je,ke)=>{const{x1:Te,y1:Je,x2:Q,y2:tt}=je,it=Q-Te,ft=tt-Je,He=Math.sqrt(it*it+ft*ft),Vt=Math.min(He*.3,50),vr=Math.atan2(ft,it)-Math.PI/2,Dt=(Te+Q)/2,Xt=(Je+tt)/2,qt=Dt+Math.cos(vr)*Vt,ar=Xt+Math.sin(vr)*Vt,Cr=`M ${Te} ${Je} Q ${qt} ${ar}, ${Q} ${tt}`;return n.jsx("path",{d:Cr,stroke:"url(#fomo-gradient)",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",style:{filter:"drop-shadow(0 2px 4px rgba(234, 179, 8, 0.4))"}},ke)})]})})(),n.jsx("div",{className:"flex gap-3 pb-2 select-none",style:{minWidth:"fit-content",position:"relative",zIndex:1},children:pr.map((Ke,Ne)=>n.jsxs("div",{className:"flex flex-col gap-0.5",children:[n.jsx("div",{className:"text-[10px] font-medium text-gray-600 dark:text-gray-400 mb-1 text-center select-none","data-month":`${Ke.name} ${Ke.year}`,children:Ke.name}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx("div",{className:"flex flex-col gap-0.5 select-none",children:lt.map((Oe,me)=>n.jsx("div",{className:"w-5 h-3 flex items-center justify-center text-[8px] text-gray-500 dark:text-gray-500 select-none",children:Oe},me))}),n.jsx("div",{className:"flex flex-col gap-0.5 min-w-fit select-none",children:Ke.dayRows.map((Oe,me)=>n.jsx("div",{className:"flex gap-0.5 select-none",children:Oe.map((je,ke)=>{if(!je)return n.jsx("div",{className:"w-3 h-3"},ke);const Te=je.getFullYear(),Je=String(je.getMonth()+1).padStart(2,"0"),Q=String(je.getDate()).padStart(2,"0"),tt=`${Te}-${Je}-${Q}`,it=!x||je>=x.from&&je<=x.to,ft=j[tt],He=m3(ft,!!o);let Vt=it?QPe(He):"bg-gray-200 dark:bg-gray-700";e&&je.toDateString()===e.toDateString()&&!T&&!I&&(Vt="bg-blue-500 dark:bg-blue-400 ring-2 ring-blue-600");const vr=W.includes(tt),Dt=W.indexOf(tt),Xt=B===tt,qt=pe.includes(tt),ar=pe.indexOf(tt),Cr=a==null?void 0:a.dates.includes(tt);return n.jsxs("div",{className:`w-3 h-3 rounded-sm cursor-pointer transition-all relative ${Vt} ${Cr?"ring-2 ring-yellow-400 dark:ring-yellow-300 animate-pulse shadow-lg shadow-yellow-400/50":""}`,onClick:()=>pt(je),title:`${tt}: ${He.toFixed(2)}${Cr&&a?`  ${a.tag.toUpperCase()} tag`:""}`,"data-testid":`heatmap-cell-${tt}`,"data-date":tt,children:[vr&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${Dt===0?"bg-purple-600 dark:bg-purple-400":"bg-orange-600 dark:bg-orange-400"}`,"data-testid":`edit-marker-${tt}`})}),qt&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${ar===0?"bg-blue-500 dark:bg-blue-400":"bg-green-500 dark:bg-green-400"}`,"data-testid":`range-marker-${tt}`})}),Xt&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center ring-2 ring-red-600 dark:ring-red-400 rounded-sm",children:n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-600 dark:bg-red-400","data-testid":`delete-marker-${tt}`})})]},ke)})},me))})]})]},Ne))})]})}),n.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Loss"}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx("div",{className:"w-2.5 h-2.5 bg-red-800 dark:bg-red-700 rounded-full",title:"High Loss (5000+)"}),n.jsx("div",{className:"w-2.5 h-2.5 bg-red-600 dark:bg-red-500 rounded-full",title:"Medium Loss (1500+)"}),n.jsx("div",{className:"w-2.5 h-2.5 bg-red-300 dark:bg-red-300 rounded-full",title:"Small Loss"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"flex gap-1",children:[n.jsx("div",{className:"w-2.5 h-2.5 bg-green-300 dark:bg-green-300 rounded-full",title:"Small Profit"}),n.jsx("div",{className:"w-2.5 h-2.5 bg-green-600 dark:bg-green-500 rounded-full",title:"Medium Profit (1500+)"}),n.jsx("div",{className:"w-2.5 h-2.5 bg-green-800 dark:bg-green-700 rounded-full",title:"High Profit (5000+)"})]}),n.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Profit"})]})]}),n.jsxs("div",{className:"relative pt-2 border-t border-gray-200 dark:border-gray-700",children:[A?n.jsxs("div",{className:"flex items-center justify-between gap-1.5 px-2 py-1.5 bg-red-50 dark:bg-red-900/20 rounded-md",children:[n.jsx("div",{className:"flex-1 min-w-0 flex justify-center",children:B?n.jsxs("div",{className:"flex items-center gap-0.5 px-1 py-0.5 rounded text-[9px] font-medium bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-600"}),n.jsx("span",{className:"truncate",children:B})]}):n.jsx("p",{className:"text-[10px] font-medium text-red-900 dark:text-red-100",children:"Select date to delete"})}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(H,{variant:"ghost",size:"sm",onClick:Lr,className:"h-6 px-2 text-[10px]","data-testid":"button-cancel-delete",children:"Cancel"}),n.jsx(H,{variant:"destructive",size:"sm",onClick:Tr,disabled:!te||!B,className:"h-6 px-2 text-[10px]","data-testid":"button-confirm-delete",children:"Delete"})]})]}):T?n.jsxs("div",{className:"flex items-center justify-between gap-1.5 px-2 py-1.5 bg-purple-50 dark:bg-purple-900/20 rounded-md",children:[n.jsx("div",{className:"flex-1 min-w-0 flex justify-center",children:W.length===0?n.jsx("p",{className:"text-[10px] font-medium text-purple-900 dark:text-purple-100",children:"Select 2 dates"}):n.jsxs("div",{ref:Y,className:"flex gap-1 relative",children:[W.length===2&&Z&&n.jsxs("svg",{className:"absolute pointer-events-none overflow-visible",style:{left:0,top:"-8px",width:"100%",height:`calc(${Z.containerHeight}px + 20px)`,zIndex:0},children:[n.jsx("defs",{children:n.jsxs("linearGradient",{id:"demo-badge-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[n.jsx("stop",{offset:"0%",stopColor:"rgb(147, 51, 234)",stopOpacity:"0.6"}),n.jsx("stop",{offset:"100%",stopColor:"rgb(234, 88, 12)",stopOpacity:"0.6"})]})}),(()=>{const{x1:Ke,x2:Ne,y:Oe,containerHeight:me}=Z,je=Ne-Ke,ke=Math.abs(je),Te=Math.min(ke*.3,20),Je=(Ke+Ne)/2,Q=Oe-Te,tt=`M ${Ke} ${Oe} Q ${Je} ${Q}, ${Ne} ${Oe}`;return n.jsx("path",{d:tt,stroke:"url(#demo-badge-gradient)",strokeWidth:"2",fill:"none",strokeLinecap:"round"})})()]}),W.map((Ke,Ne)=>n.jsxs("div",{ref:Ne===0?re:le,className:"flex items-center gap-0.5 px-1 py-0.5 rounded text-[9px] font-medium relative z-10",style:{backgroundColor:Ne===0?"rgb(147 51 234 / 0.1)":"rgb(234 88 12 / 0.1)",color:Ne===0?"rgb(147 51 234)":"rgb(234 88 12)"},children:[n.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${Ne===0?"bg-purple-600":"bg-orange-600"}`}),n.jsx("span",{className:"truncate",children:Ke})]},Ke))]})}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(H,{variant:"ghost",size:"sm",onClick:ta,className:"h-6 px-2 text-[10px]","data-testid":"button-cancel-edit",children:"Cancel"}),n.jsx(H,{variant:"default",size:"sm",onClick:st,disabled:!te||W.length!==2,className:"h-6 px-2 text-[10px]","data-testid":"button-save-edit",children:"Save"})]})]}):n.jsxs("div",{className:"flex items-center justify-center gap-0 w-full",children:[!I&&n.jsx(H,{variant:"ghost",size:"icon",onClick:zt,className:"h-8 w-8 flex-shrink-0","data-testid":"button-prev-year",children:n.jsx(Du,{className:"w-4 h-4"})}),I?n.jsxs(H,{variant:"ghost",size:"sm",className:"h-8 px-2 flex-shrink flex items-center gap-1","data-testid":"button-select-date-range-mode",children:[n.jsx("span",{className:"text-xs text-gray-900 dark:text-gray-100 whitespace-nowrap",children:pe.length===0?"Select range":pe.length>0?(()=>{const[Ke,Ne]=pe.sort(),Oe=new Date(Ke),me=new Date(Ne),je=Oe.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"}),ke=me.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"});return`${je} - ${ke}`})():"Select range"}),n.jsx("button",{onClick:Ke=>{Ke.preventDefault(),Ke.stopPropagation(),Le.current=!0,P(!1),ge([]),b(null),s&&s(null)},className:"flex items-center justify-center w-4 h-4 hover:opacity-70","data-testid":"button-close-range-select",children:n.jsx(Wr,{className:"w-4 h-4"})})]}):n.jsx(H,{variant:"ghost",size:"sm",onClick:Mr,className:"h-8 px-2 hover-elevate flex-shrink","data-testid":"button-select-date-range",children:n.jsx("span",{className:"text-xs text-gray-900 dark:text-gray-100 whitespace-nowrap",children:f.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})})}),!I&&n.jsx(H,{variant:"ghost",size:"icon",onClick:Ft,className:"h-8 w-8 flex-shrink-0","data-testid":"button-next-year",children:n.jsx(Zh,{className:"w-4 h-4"})}),!I&&!i&&n.jsxs(lk,{children:[n.jsx(ck,{asChild:!0,children:n.jsx(H,{variant:"ghost",size:"icon",className:"h-8 w-8 ml-1","data-testid":"button-calendar-menu",children:n.jsx(Gl,{className:"w-4 h-4"})})}),n.jsxs(j1,{align:"end",className:"w-40",children:[n.jsx(xm,{onClick:nt,"data-testid":"menu-item-move-date",children:"Move date"}),n.jsx(xm,{onClick:wt,"data-testid":"menu-item-delete",children:"Delete"})]})]})]}),n.jsx("div",{ref:de,className:"hidden"}),n.jsx("div",{ref:ie,className:"hidden"})]}),n.jsx("style",{children:`
        .thin-scrollbar::-webkit-scrollbar {
          height: 6px;
        }
        .thin-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .thin-scrollbar::-webkit-scrollbar-thumb {
          background: #d1d5db;
          border-radius: 3px;
        }
        .thin-scrollbar::-webkit-scrollbar-thumb:hover {
          background: #9ca3af;
        }
        .dark .thin-scrollbar::-webkit-scrollbar-thumb {
          background: #4b5563;
        }
        .dark .thin-scrollbar::-webkit-scrollbar-thumb:hover {
          background: #6b7280;
        }
      `})]})}function p3(t){var e,r,s,a;if(!t)return 0;if(((r=(e=t.tradingData)==null?void 0:e.performanceMetrics)==null?void 0:r.netPnL)!==void 0)return t.tradingData.performanceMetrics.netPnL;if(((s=t.performanceMetrics)==null?void 0:s.netPnL)!==void 0)return t.performanceMetrics.netPnL;if(t.profitLossAmount!==void 0&&typeof t.profitLossAmount=="number")return t.profitLossAmount;if((a=t.tradingData)!=null&&a.tradeHistory&&Array.isArray(t.tradingData.tradeHistory)){let i=0;if(t.tradingData.tradeHistory.forEach(o=>{if(o.pnl&&o.pnl!=="-"&&typeof o.pnl=="string"){const l=parseFloat(o.pnl.replace(/[,+]/g,""));isNaN(l)||(i+=l)}}),i!==0)return i}if(t.tradeHistory&&Array.isArray(t.tradeHistory)){let i=0;if(t.tradeHistory.forEach(o=>{if(o.pnl&&o.pnl!=="-"&&typeof o.pnl=="string"){const l=parseFloat(o.pnl.replace(/[,+]/g,""));isNaN(l)||(i+=l)}}),i!==0)return i}return 0}function JPe(t){if(t===0)return"bg-gray-200 dark:bg-gray-700";const e=Math.abs(t);return t>0?e>=5e3?"bg-green-800 dark:bg-green-700":e>=1500?"bg-green-600 dark:bg-green-500":"bg-green-300 dark:bg-green-300":e>=5e3?"bg-red-800 dark:bg-red-700":e>=1500?"bg-red-600 dark:bg-red-500":"bg-red-300 dark:bg-red-300"}function ZPe({userId:t,onDateSelect:e,selectedDate:r,onDataUpdate:s,onRangeChange:a,highlightedDates:i,isPublicView:o=!1,refreshTrigger:l=0}){const[d,h]=g.useState(new Date),[f,m]=g.useState({}),[x,b]=g.useState(!1),[j,N]=g.useState(null),[w,C]=g.useState(!1),[T,O]=g.useState(!1),[I,P]=g.useState(!1),[A,R]=g.useState(null),[B,V]=g.useState([]),[X,ee]=g.useState([]),[Y,re]=g.useState(null),[le,te]=g.useState(null),de=g.useRef(null),ie=g.useRef(null),Z=g.useRef(null),ne=g.useRef(null),oe=g.useRef(null),U=g.useRef(null),[W,be]=g.useState(null),[pe,ge]=g.useState(null),Ce=g.useRef(!1),{toast:he}=Ia(),[ue,ce]=g.useState(0),[Ee,Le]=g.useState(!1),[Ie,Ue]=g.useState("Personal Trading Calendar"),Ae=g.useRef(null);g.useEffect(()=>{const st=localStorage.getItem("heatmapTitle");st&&Ue(st)},[]),g.useEffect(()=>{if(!t){console.log(" PersonalHeatmap: No userId provided, skipping fetch"),m({}),b(!1);return}console.log(" PersonalHeatmap: CLEARING old data and fetching FRESH AWS data for userId:",t),m({}),b(!0),fetch(`/api/user-journal/${t}/all`).then(st=>st.json()).then(st=>{console.log(" PersonalHeatmap: Raw AWS DynamoDB data received:",st),console.log(" PersonalHeatmap: Total dates:",Object.keys(st).length);const zt={};Object.keys(st).forEach(Ft=>{if(Ft.match(/^\d{4}-\d{2}-\d{2}$/))zt[Ft]=st[Ft];else{const pr=Ft.match(/(\d{4}-\d{2}-\d{2})/);pr?zt[pr[1]]=st[Ft]:st[Ft].date&&st[Ft].date.match(/^\d{4}-\d{2}-\d{2}$/)?zt[st[Ft].date]=st[Ft]:console.warn(` PersonalHeatmap: Could not normalize key ${Ft}, skipping`)}}),console.log(` PersonalHeatmap: Normalized ${Object.keys(st).length} keys to ${Object.keys(zt).length} YYYY-MM-DD format keys`),m(zt),b(!1),Object.keys(zt).forEach(Ft=>{const pr=p3(zt[Ft]);console.log(` PersonalHeatmap: ${Ft} = ${pr.toFixed(2)}`)}),s&&(console.log(` PersonalHeatmap: Emitting ${Object.keys(zt).length} normalized dates to parent`),s(zt))}).catch(st=>{console.error(" PersonalHeatmap: Fetch error:",st),b(!1)})},[t,ue,l]);const ot=(()=>{if(!j)return f;const st={},zt=j.from.getTime(),Ft=j.to.getTime();return Object.keys(f).forEach(pr=>{const[kt,Mt,Ke]=pr.split("-").map(Number),Ne=new Date(kt,Mt-1,Ke).getTime();Ne>=zt&&Ne<=Ft&&(st[pr]=f[pr])}),console.log(` Filtered ${Object.keys(f).length} dates to ${Object.keys(st).length} dates within range`),st})(),It=async st=>{if(!t)return;const zt=st.getFullYear(),Ft=String(st.getMonth()+1).padStart(2,"0"),pr=String(st.getDate()).padStart(2,"0"),kt=`${zt}-${Ft}-${pr}`;if(T){ee(Mt=>{if(Mt.includes(kt))return Mt.filter(ke=>ke!==kt);if(Mt.length<2){const ke=[...Mt,kt];if(ke.length===2){const[Te,Je]=ke.sort(),Q=new Date(Te),tt=new Date(Je);N({from:Q,to:tt}),a&&a({from:Q,to:tt}),console.log(" Range auto-selected:",{from:Q.toDateString(),to:tt.toDateString()})}return ke}const Ke=[Mt[0],kt],[Ne,Oe]=Ke.sort(),me=new Date(Ne),je=new Date(Oe);return N({from:me,to:je}),a&&a({from:me,to:je}),Ke});return}if(w){V(Mt=>Mt.includes(kt)?Mt.filter(Ke=>Ke!==kt):Mt.length<2?[...Mt,kt]:[Mt[0],kt]);return}if(I){R(Mt=>Mt===kt?null:kt);return}console.log(` PersonalHeatmap: Date clicked: ${kt}, fetching FRESH data from Firebase...`);try{const Ke=await(await fetch(`/api/user-journal/${t}/${kt}`)).json();console.log(` PersonalHeatmap: Fresh Firebase data for ${kt}:`,Ke),h(st),e(st,Ke)}catch(Mt){console.error(` PersonalHeatmap: Error fetching data for ${kt}:`,Mt),e(st,{})}},tr=()=>{C(!0),O(!1),P(!1),V([]),R(null)},Ct=()=>{P(!0),C(!1),O(!1),R(null)},we=()=>{P(!1),R(null)},Fe=async()=>{if(!A){he({title:"No Date Selected",description:"Please select a date to delete",variant:"destructive"});return}if(!t){he({title:"Error",description:"User not authenticated",variant:"destructive"});return}console.log(` Deleting personal data for userId=${t}, date=${A}`);try{if(he({title:"Deleting Data...",description:`Removing all data for ${A}`}),!(await fetch(`/api/user-journal/${t}/${A}`,{method:"DELETE"})).ok)throw new Error("Failed to delete data from Firebase");console.log(` Personal data deleted successfully for ${A}`),he({title:"Success!",description:`All data deleted for ${A}`}),console.log(" Triggering heatmap refresh after deletion..."),ce(zt=>zt+1),P(!1),R(null)}catch(st){console.error(" Error deleting personal data:",st),he({title:"Error",description:st instanceof Error?st.message:"Failed to delete data",variant:"destructive"})}},Ye=()=>{O(!0),C(!1),P(!1),ee([]),R(null)},lt=()=>{C(!1),V([])},pt=async()=>{if(B.length!==2){he({title:"Select Two Dates",description:"Please select exactly two dates on the heatmap",variant:"destructive"});return}if(!t){he({title:"Error",description:"User not authenticated",variant:"destructive"});return}const[st,zt]=B;console.log(` Relocating data: ${st}  ${zt}`);try{he({title:"Relocating Data...",description:`Moving data from ${st} to ${zt}`});const Ft=await fetch("/api/relocate-date",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t,sourceDate:st,targetDate:zt})});if(!Ft.ok){const kt=await Ft.json();throw new Error(kt.error||"Failed to relocate data")}const pr=await Ft.json();console.log(" Data relocated successfully:",pr),he({title:"Success!",description:`All data moved from ${st} to ${zt}`}),console.log(" Triggering heatmap refresh after relocation..."),ce(kt=>kt+1),C(!1),V([])}catch(Ft){console.error(" Error relocating data:",Ft),he({title:"Error",description:Ft instanceof Error?Ft.message:"Failed to relocate data",variant:"destructive"})}};g.useEffect(()=>{if(B.length!==2||!Z.current||!ne.current){console.log(" PersonalHeatmap: Badge positions reset - conditions not met",{selectedCount:B.length,badge1Exists:!!Z.current,badge2Exists:!!ne.current}),be(null);return}const st=()=>{if(!Z.current||!ne.current||!ie.current){console.log(" PersonalHeatmap: Badges or container not ready yet");return}const Mt=Z.current.getBoundingClientRect(),Ke=ne.current.getBoundingClientRect(),Ne=ie.current.getBoundingClientRect(),Oe=Mt.left-Ne.left+Mt.width/2,me=Ke.left-Ne.left+Ke.width/2,je=Mt.top-Ne.top+Mt.height/2,ke=Ne.height;console.log(" PersonalHeatmap: Calculated badge positions",{x1:Oe,x2:me,y:je,containerHeight:ke}),be({x1:Oe,x2:me,y:je,containerHeight:ke})},zt=setTimeout(st,0),Ft=setTimeout(st,50),pr=setTimeout(st,100),kt=de.current;return kt&&kt.addEventListener("scroll",st),()=>{clearTimeout(zt),clearTimeout(Ft),clearTimeout(pr),kt&&kt.removeEventListener("scroll",st)}},[B]),g.useEffect(()=>{if(X.length!==2||!oe.current||!U.current){ge(null);return}const st=()=>{if(!oe.current||!U.current||!ie.current)return;const Mt=oe.current.getBoundingClientRect(),Ke=U.current.getBoundingClientRect(),Ne=ie.current.getBoundingClientRect(),Oe=Mt.left-Ne.left+Mt.width/2,me=Ke.left-Ne.left+Ke.width/2,je=Mt.top-Ne.top+Mt.height/2,ke=Ne.height;console.log(" PersonalHeatmap: Calculated range badge positions",{x1:Oe,x2:me,y:je,containerHeight:ke}),ge({x1:Oe,x2:me,y:je,containerHeight:ke})},zt=setTimeout(st,0),Ft=setTimeout(st,50),pr=setTimeout(st,100),kt=de.current;return kt&&kt.addEventListener("scroll",st),()=>{clearTimeout(zt),clearTimeout(Ft),clearTimeout(pr),kt&&kt.removeEventListener("scroll",st)}},[X]),g.useEffect(()=>{if(B.length!==2||!w||!de.current){re(null);return}const st=()=>{var He,Vt;const[Mt,Ke]=B,Ne=(He=de.current)==null?void 0:He.querySelector(`[data-date="${Mt}"]`),Oe=(Vt=de.current)==null?void 0:Vt.querySelector(`[data-date="${Ke}"]`);if(!Ne||!Oe||!de.current){console.log(" PersonalHeatmap: Calendar cells not found yet",{date1Key:Mt,date2Key:Ke});return}const me=de.current.getBoundingClientRect(),je=Ne.getBoundingClientRect(),ke=Oe.getBoundingClientRect(),Te=de.current.scrollLeft,Je=de.current.scrollTop,Q=je.left-me.left+je.width/2+Te,tt=je.top-me.top+je.height/2+Je,it=ke.left-me.left+ke.width/2+Te,ft=ke.top-me.top+ke.height/2+Je;console.log(" PersonalHeatmap: Calculated heatmap line positions",{x1:Q,y1:tt,x2:it,y2:ft,scrollLeft:Te,scrollTop:Je}),re({x1:Q,y1:tt,x2:it,y2:ft})},zt=setTimeout(st,0),Ft=setTimeout(st,50),pr=setTimeout(st,150),kt=de.current;return kt&&kt.addEventListener("scroll",st),()=>{clearTimeout(zt),clearTimeout(Ft),clearTimeout(pr),kt&&kt.removeEventListener("scroll",st)}},[B,w]),g.useEffect(()=>{if(!j||!de.current){te(null);return}const st=()=>{var He,Vt;const Mt=j.from.toLocaleString("en-US",{month:"short",year:"numeric"}),Ke=j.to.toLocaleString("en-US",{month:"short",year:"numeric"}),Ne=(He=de.current)==null?void 0:He.querySelector(`[data-month="${Mt}"]`),Oe=(Vt=de.current)==null?void 0:Vt.querySelector(`[data-month="${Ke}"]`);if(!Ne||!Oe||!de.current){console.log(" PersonalHeatmap: Month labels not found yet",{fromMonth:Mt,toMonth:Ke});return}const me=de.current.getBoundingClientRect(),je=Ne.getBoundingClientRect(),ke=Oe.getBoundingClientRect(),Te=de.current.scrollLeft,Je=de.current.scrollTop,Q=je.left-me.left+je.width/2+Te,tt=je.top-me.top+je.height/2+Je,it=ke.left-me.left+ke.width/2+Te,ft=ke.top-me.top+ke.height/2+Je;console.log(" PersonalHeatmap: Range line positions (month labels)",{x1:Q,y1:tt,x2:it,y2:ft,fromMonth:Mt,toMonth:Ke}),te({x1:Q,y1:tt,x2:it,y2:ft})},zt=setTimeout(st,100),Ft=setTimeout(st,250),pr=setTimeout(st,500),kt=de.current;return kt&&kt.addEventListener("scroll",st),()=>{clearTimeout(zt),clearTimeout(Ft),clearTimeout(pr),kt&&kt.removeEventListener("scroll",st)}},[j]);const nt=()=>{const st=d.getFullYear(),zt=d.getFullYear(),Ft=0,pr=11,kt=[];for(let Mt=st;Mt<=zt;Mt++)for(let Ke=Ft;Ke<=pr;Ke++){const Ne=new Date(Mt,Ke,1).toLocaleString("en-US",{month:"short"}),Oe=new Date(Mt,Ke,1),me=new Date(Mt,Ke+1,0),je=Oe.getDay(),ke=[[],[],[],[],[],[],[]];for(let Te=0;Te<je;Te++)ke[Te].push(null);for(let Te=1;Te<=me.getDate();Te++){const Je=new Date(Mt,Ke,Te),Q=Je.getDay();ke[Q].push(Je)}kt.push({name:Ne,year:Mt,dayRows:ke})}return kt},wt=["S","M","T","W","TH","F","S"],Lr=()=>{const st=new Date(d);st.setFullYear(d.getFullYear()-1),h(st)},Tr=()=>{const st=new Date(d);st.setFullYear(d.getFullYear()+1),h(st)},Mr=nt(),ta=st=>Object.keys(st).filter(zt=>p3(st[zt])!==0).length;return t?n.jsxs("div",{className:"flex flex-col gap-2 p-3 rounded-md border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 select-none overflow-visible",children:[n.jsxs("div",{className:"text-[10px] uppercase tracking-wider text-gray-500 dark:text-gray-400 flex items-center justify-between gap-2",children:[n.jsx("div",{className:"flex items-center gap-1",children:Ee?n.jsx("input",{ref:Ae,type:"text",value:Ie,onChange:st=>Ue(st.target.value),onBlur:()=>{Le(!1),localStorage.setItem("heatmapTitle",Ie)},onKeyDown:st=>{st.key==="Enter"&&(Le(!1),localStorage.setItem("heatmapTitle",Ie))},className:"bg-transparent border-b border-gray-400 dark:border-gray-500 px-1 py-0.5 text-[10px] focus:outline-none text-gray-500 dark:text-gray-400",autoFocus:!0,"data-testid":"input-edit-title"}):n.jsxs(n.Fragment,{children:[n.jsxs("span",{children:[Ie," ",j?`${j.from.getFullYear()}${j.from.getFullYear()!==j.to.getFullYear()?`-${j.to.getFullYear()}`:""}`:d.getFullYear()]}),n.jsx("button",{onClick:()=>Le(!0),className:"opacity-0 hover:opacity-100 transition-opacity ml-1","data-testid":"button-edit-title",title:"Edit title",children:n.jsx(Rq,{className:"w-3 h-3 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"})})]})}),n.jsx("span",{className:"text-[10px] text-gray-600 dark:text-gray-400",children:x?"Loading...":j?`${ta(ot)} of ${ta(f)} dates`:`${ta(f)} dates`})]}),n.jsx("div",{className:"flex flex-col gap-2 overflow-visible",children:n.jsxs("div",{className:"overflow-x-auto thin-scrollbar",ref:de,style:{position:"relative",zIndex:10,paddingTop:"20px"},children:[le&&j&&!w&&(()=>{var ft,He;const{x1:st,y1:zt,x2:Ft,y2:pr}=le,kt=Ft-st,Mt=pr-zt,Ke=Math.sqrt(kt*kt+Mt*Mt),Ne=Math.min(Ke*.3,50),me=Math.atan2(Mt,kt)-Math.PI/2,je=(st+Ft)/2,ke=(zt+pr)/2,Te=je+Math.cos(me)*Ne,Je=ke+Math.sin(me)*Ne,Q=`M ${st} ${zt} Q ${Te} ${Je}, ${Ft} ${pr}`,tt=((ft=de.current)==null?void 0:ft.scrollWidth)||0,it=((He=de.current)==null?void 0:He.scrollHeight)||0;return n.jsxs("svg",{style:{position:"absolute",top:0,left:0,width:`${tt}px`,height:`${it}px`,pointerEvents:"none",zIndex:10},children:[n.jsx("defs",{children:n.jsxs("linearGradient",{id:"rangeLineGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[n.jsx("stop",{offset:"0%",style:{stopColor:"rgb(59, 130, 246)",stopOpacity:.7}}),n.jsx("stop",{offset:"100%",style:{stopColor:"rgb(147, 51, 234)",stopOpacity:.7}})]})}),n.jsx("path",{d:Q,stroke:"url(#rangeLineGradient)",strokeWidth:"3",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",style:{filter:"drop-shadow(0 2px 6px rgba(59, 130, 246, 0.4))"}})]})})(),Y&&w&&(()=>{var ft,He;const{x1:st,y1:zt,x2:Ft,y2:pr}=Y,kt=Ft-st,Mt=pr-zt,Ke=Math.sqrt(kt*kt+Mt*Mt);let Ne;const Oe=Math.min(Ke*.3,50),je=Math.atan2(Mt,kt)-Math.PI/2,ke=(st+Ft)/2,Te=(zt+pr)/2,Je=ke+Math.cos(je)*Oe,Q=Te+Math.sin(je)*Oe;Ne=`M ${st} ${zt} Q ${Je} ${Q}, ${Ft} ${pr}`;const tt=((ft=de.current)==null?void 0:ft.scrollWidth)||0,it=((He=de.current)==null?void 0:He.scrollHeight)||0;return n.jsxs("svg",{style:{position:"absolute",top:0,left:0,width:`${tt}px`,height:`${it}px`,pointerEvents:"none",zIndex:10},children:[n.jsx("defs",{children:n.jsxs("linearGradient",{id:"lineGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[n.jsx("stop",{offset:"0%",style:{stopColor:"rgb(147, 51, 234)",stopOpacity:.6}}),n.jsx("stop",{offset:"100%",style:{stopColor:"rgb(234, 88, 12)",stopOpacity:.6}})]})}),n.jsx("path",{d:Ne,stroke:"url(#lineGradient)",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.2))"}})]})})(),n.jsx("div",{className:"flex gap-3 pb-2 select-none",style:{minWidth:"fit-content",position:"relative",zIndex:1},children:Mr.map((st,zt)=>n.jsxs("div",{className:"flex flex-col gap-0.5",children:[n.jsx("div",{className:"text-[10px] font-medium text-gray-600 dark:text-gray-400 mb-1 text-center select-none","data-month":`${st.name} ${st.year}`,children:st.name}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx("div",{className:"flex flex-col gap-0.5 select-none",children:wt.map((Ft,pr)=>n.jsx("div",{className:"w-3 h-3 flex items-center justify-center text-[8px] text-gray-500 dark:text-gray-500 select-none",children:Ft},pr))}),n.jsx("div",{className:"flex flex-col gap-0.5 min-w-fit select-none",children:st.dayRows.map((Ft,pr)=>n.jsx("div",{className:"flex gap-0.5 select-none",children:Ft.map((kt,Mt)=>{if(!kt)return n.jsx("div",{className:"w-3 h-3"},Mt);const Ke=kt.getFullYear(),Ne=String(kt.getMonth()+1).padStart(2,"0"),Oe=String(kt.getDate()).padStart(2,"0"),me=`${Ke}-${Ne}-${Oe}`,je=!j||kt>=j.from&&kt<=j.to,ke=f[me],Te=p3(ke);let Je=je?JPe(Te):"bg-gray-200 dark:bg-gray-700";r&&kt.toDateString()===r.toDateString()&&!w&&!T&&(Je="bg-blue-500 dark:bg-blue-400 ring-2 ring-blue-600");const tt=B.includes(me),it=B.indexOf(me),ft=A===me,He=X.includes(me),Vt=X.indexOf(me),Zt=i==null?void 0:i.dates.includes(me);return n.jsxs("div",{className:`w-3 h-3 rounded-sm cursor-pointer transition-all relative ${Je} ${Zt?"ring-2 ring-yellow-400 dark:ring-yellow-300 animate-pulse shadow-lg shadow-yellow-400/50":""}`,onClick:()=>It(kt),title:`${me}: ${Te.toFixed(2)}${Zt&&i?`  ${i.tag.toUpperCase()} tag`:""}`,"data-testid":`personal-heatmap-cell-${me}`,"data-date":me,children:[tt&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${it===0?"bg-purple-600 dark:bg-purple-400":"bg-orange-600 dark:bg-orange-400"}`,"data-testid":`edit-marker-${me}`})}),He&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${Vt===0?"bg-blue-500 dark:bg-blue-400":"bg-green-500 dark:bg-green-400"}`,"data-testid":`range-marker-${me}`})}),ft&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center ring-2 ring-red-600 dark:ring-red-400 rounded-sm",children:n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-600 dark:bg-red-400","data-testid":`delete-marker-${me}`})})]},Mt)})},pr))})]})]},zt))})]})}),n.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Loss"}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx("div",{className:"w-2.5 h-2.5 bg-red-800 dark:bg-red-700 rounded-full",title:"High Loss (5000+)"}),n.jsx("div",{className:"w-2.5 h-2.5 bg-red-600 dark:bg-red-500 rounded-full",title:"Medium Loss (1500+)"}),n.jsx("div",{className:"w-2.5 h-2.5 bg-red-300 dark:bg-red-300 rounded-full",title:"Small Loss"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"flex gap-1",children:[n.jsx("div",{className:"w-2.5 h-2.5 bg-green-300 dark:bg-green-300 rounded-full",title:"Small Profit"}),n.jsx("div",{className:"w-2.5 h-2.5 bg-green-600 dark:bg-green-500 rounded-full",title:"Medium Profit (1500+)"}),n.jsx("div",{className:"w-2.5 h-2.5 bg-green-800 dark:bg-green-700 rounded-full",title:"High Profit (5000+)"})]}),n.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Profit"})]})]}),n.jsxs("div",{className:"relative pt-2 border-t border-gray-200 dark:border-gray-700",children:[I?n.jsxs("div",{className:"flex items-center justify-between gap-1.5 px-2 py-1.5 bg-red-50 dark:bg-red-900/20 rounded-md",children:[n.jsx("div",{className:"flex-1 min-w-0 flex justify-center",children:A?n.jsxs("div",{className:"flex items-center gap-0.5 px-1 py-0.5 rounded text-[9px] font-medium bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-600"}),n.jsx("span",{className:"truncate",children:A})]}):n.jsx("p",{className:"text-[10px] font-medium text-red-900 dark:text-red-100",children:"Select date to delete"})}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(H,{variant:"ghost",size:"sm",onClick:we,className:"h-6 px-2 text-[10px]","data-testid":"button-cancel-delete",children:"Cancel"}),n.jsx(H,{variant:"destructive",size:"sm",onClick:Fe,disabled:!A,className:"h-6 px-2 text-[10px]","data-testid":"button-confirm-delete",children:"Delete"})]})]}):w?n.jsxs("div",{className:"flex items-center justify-between gap-1.5 px-2 py-1.5 bg-purple-50 dark:bg-purple-900/20 rounded-md",children:[n.jsx("div",{className:"flex-1 min-w-0 flex justify-center",children:B.length===0?n.jsx("p",{className:"text-[10px] font-medium text-purple-900 dark:text-purple-100",children:"Select 2 dates"}):n.jsxs("div",{ref:ie,className:"flex gap-1 relative",children:[B.length===2&&W&&n.jsxs("svg",{className:"absolute pointer-events-none overflow-visible",style:{left:0,top:"-8px",width:"100%",height:`calc(${W.containerHeight}px + 20px)`,zIndex:0},children:[n.jsx("defs",{children:n.jsxs("linearGradient",{id:"personal-badge-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[n.jsx("stop",{offset:"0%",stopColor:"rgb(147, 51, 234)",stopOpacity:"0.6"}),n.jsx("stop",{offset:"100%",stopColor:"rgb(234, 88, 12)",stopOpacity:"0.6"})]})}),(()=>{const{x1:st,x2:zt,y:Ft,containerHeight:pr}=W,kt=zt-st,Mt=Math.abs(kt),Ke=Math.min(Mt*.3,20),Ne=(st+zt)/2,Oe=Ft-Ke,me=`M ${st} ${Ft} Q ${Ne} ${Oe}, ${zt} ${Ft}`;return n.jsx("path",{d:me,stroke:"url(#personal-badge-gradient)",strokeWidth:"2",fill:"none",strokeLinecap:"round"})})()]}),B.map((st,zt)=>n.jsxs("div",{ref:zt===0?Z:ne,className:"flex items-center gap-0.5 px-1 py-0.5 rounded text-[9px] font-medium relative z-10",style:{backgroundColor:zt===0?"rgb(147 51 234 / 0.1)":"rgb(234 88 12 / 0.1)",color:zt===0?"rgb(147 51 234)":"rgb(234 88 12)"},children:[n.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${zt===0?"bg-purple-600":"bg-orange-600"}`}),n.jsx("span",{className:"truncate",children:st})]},st))]})}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(H,{variant:"ghost",size:"sm",onClick:lt,className:"h-6 px-2 text-[10px]","data-testid":"button-cancel-edit",children:"Cancel"}),n.jsx(H,{variant:"default",size:"sm",onClick:pt,disabled:B.length!==2,className:"h-6 px-2 text-[10px]","data-testid":"button-save-edit",children:"Save"})]})]}):n.jsxs("div",{className:"flex items-center justify-center gap-0 w-full",children:[!T&&n.jsx(H,{variant:"ghost",size:"icon",onClick:Lr,className:"h-8 w-8 flex-shrink-0","data-testid":"button-prev-year",children:n.jsx(Du,{className:"w-4 h-4"})}),T?n.jsxs(H,{variant:"ghost",size:"sm",className:"h-8 px-2 flex-shrink flex items-center gap-1","data-testid":"button-select-date-range-mode",children:[n.jsx("span",{className:"text-xs text-gray-900 dark:text-gray-100 whitespace-nowrap",children:X.length===0?"Select range":X.length>0?(()=>{const[st,zt]=X.sort(),Ft=new Date(st),pr=new Date(zt),kt=Ft.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"}),Mt=pr.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"});return`${kt} - ${Mt}`})():"Select range"}),n.jsx("button",{onClick:st=>{st.preventDefault(),st.stopPropagation(),Ce.current=!0,O(!1),ee([]),N(null),a&&a(null)},className:"flex items-center justify-center w-4 h-4 hover:opacity-70","data-testid":"button-close-range-select",children:n.jsx(Wr,{className:"w-4 h-4"})})]}):n.jsx(H,{variant:"ghost",size:"sm",onClick:Ye,className:"h-8 px-2 hover-elevate flex-shrink","data-testid":"button-select-date-range",children:n.jsx("span",{className:"text-xs text-gray-900 dark:text-gray-100 whitespace-nowrap",children:d.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})})}),!T&&n.jsx(H,{variant:"ghost",size:"icon",onClick:Tr,className:"h-8 w-8 flex-shrink-0","data-testid":"button-next-year",children:n.jsx(Zh,{className:"w-4 h-4"})}),!T&&!o&&n.jsxs(lk,{children:[n.jsx(ck,{asChild:!0,children:n.jsx(H,{variant:"ghost",size:"icon",className:"h-8 w-8 ml-1","data-testid":"button-calendar-menu",children:n.jsx(Gl,{className:"w-4 h-4"})})}),n.jsxs(j1,{align:"end",className:"w-40",children:[n.jsx(xm,{onClick:tr,"data-testid":"menu-item-move-date",children:"Move date"}),n.jsx(xm,{onClick:Ct,"data-testid":"menu-item-delete",children:"Delete"})]})]})]}),n.jsx("div",{ref:oe,className:"hidden"}),n.jsx("div",{ref:U,className:"hidden"})]}),n.jsx("style",{children:`
        .thin-scrollbar::-webkit-scrollbar {
          height: 6px;
        }
        .thin-scrollbar::-webkit-scrollbar-track {
          background: transparent;
        }
        .thin-scrollbar::-webkit-scrollbar-thumb {
          background: #d1d5db;
          border-radius: 3px;
        }
        .thin-scrollbar::-webkit-scrollbar-thumb:hover {
          background: #9ca3af;
        }
        .dark .thin-scrollbar::-webkit-scrollbar-thumb {
          background: #4b5563;
        }
        .dark .thin-scrollbar::-webkit-scrollbar-thumb:hover {
          background: #6b7280;
        }
      `})]}):n.jsx("div",{className:"flex flex-col gap-2 p-6 rounded-md border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900",children:n.jsx("div",{className:"py-12 text-center",children:n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Please log in to view your personal trading heatmap"})})})}function e5e(){const t=g.useRef(!1),e=g.useRef(!1),{data:r,isLoading:s}=xn({queryKey:["/api/angelone/status"],refetchInterval:3e4,staleTime:1e4}),a=yo({mutationFn:async()=>await Bp("POST","/api/angelone/connect-env"),onSuccess:()=>{console.log(" [AUTO-CONNECT] Angel One connected successfully via hook"),Vi.invalidateQueries({queryKey:["/api/angelone/status"]}),Vi.invalidateQueries({queryKey:["/api/angelone/profile"]}),Vi.invalidateQueries({queryKey:["/api/angelone/statistics"]})},onError:i=>{console.log(" [AUTO-CONNECT] Angel One connection failed:",i==null?void 0:i.message)},onSettled:()=>{e.current=!1}});return g.useEffect(()=>{if(s||t.current||e.current||!r)return;if(!r.connected||!r.authenticated||r.tokenExpired){console.log(" [AUTO-CONNECT] Angel One status check:",{connected:r.connected,authenticated:r.authenticated,tokenExpired:r.tokenExpired}),e.current=!0;const o=setTimeout(()=>{console.log(" [AUTO-CONNECT] Triggering Angel One auto-connect..."),a.mutate()},500);return()=>clearTimeout(o)}else console.log(" [AUTO-CONNECT] Angel One already connected"),t.current=!0},[s,r,a]),g.useEffect(()=>{const i=setInterval(()=>{r&&(!r.connected||!r.authenticated||r.tokenExpired)&&(e.current||(console.log(" [AUTO-CONNECT] Periodic health check: Reconnecting..."),e.current=!0,a.mutate()))},6e4);return()=>clearInterval(i)},[r,a]),g.useEffect(()=>{!(r!=null&&r.connected)||!(r!=null&&r.authenticated)||r.tokenExpired&&!e.current&&(console.log(" [AUTO-CONNECT] Token expired, triggering reconnection..."),e.current=!0,a.mutate())},[r==null?void 0:r.tokenExpired,r==null?void 0:r.connected,r==null?void 0:r.authenticated,a]),{isConnected:(r==null?void 0:r.connected)&&(r==null?void 0:r.authenticated)&&!(r!=null&&r.tokenExpired),isConnecting:a.isPending,status:r}}function Vs(t){var e=t.width,r=t.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(r<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:r}}function h0(t,e){return t.width===e.width&&t.height===e.height}var t5e=(function(){function t(e){var r=this;this._resolutionListener=function(){return r._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(e){var r=this,s={next:e};return this._observers.push(s),{unsubscribe:function(){r._observers=r._observers.filter(function(a){return a!==s})}}},t.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(r){return r.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},t})();function r5e(t){return new t5e(t)}var n5e=(function(){function t(e,r,s){var a;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=Vs({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=r??(function(i){return i}),this._allowResizeObserver=(a=s==null?void 0:s.allowResizeObserver)!==null&&a!==void 0?a:!0,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var e,r;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(r=this._devicePixelRatioObservable)===null||r===void 0||r.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return Vs({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=Vs(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(r){return r!==e})},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(r){return r!==e})},t.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(e){var r=this.bitmapSize;h0(r,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(r,e))},t.prototype._emitBitmapSizeChanged=function(e,r){var s=this;this._bitmapSizeChangedListeners.forEach(function(a){return a.call(s,e,r)})},t.prototype._suggestNewBitmapSize=function(e){var r=this._suggestedBitmapSize,s=Vs(this._transformBitmapSize(e,this._canvasElementClientSize)),a=h0(this.bitmapSize,s)?null:s;r===null&&a===null||r!==null&&a!==null&&h0(r,a)||(this._suggestedBitmapSize=a,this._emitSuggestedBitmapSizeChanged(r,a))},t.prototype._emitSuggestedBitmapSizeChanged=function(e,r){var s=this;this._suggestedBitmapSizeChangedListeners.forEach(function(a){return a.call(s,e,r)})},t.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}a5e().then(function(r){return r?e._initResizeObserver():e._initDevicePixelRatioObservable()})},t.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var r=iF(this._canvasElement);if(r===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=r5e(r),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){var e,r;if(this._canvasElement!==null){var s=iF(this._canvasElement);if(s!==null){var a=(r=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&r!==void 0?r:s.devicePixelRatio,i=this._canvasElement.getClientRects(),o=i[0]!==void 0?i5e(i[0],a):Vs({width:this._canvasElementClientSize.width*a,height:this._canvasElementClientSize.height*a});this._suggestNewBitmapSize(o)}}},t.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(r){var s=r.find(function(o){return o.target===e._canvasElement});if(!(!s||!s.devicePixelContentBoxSize||!s.devicePixelContentBoxSize[0])){var a=s.devicePixelContentBoxSize[0],i=Vs({width:a.inlineSize,height:a.blockSize});e._suggestNewBitmapSize(i)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t})();function s5e(t,e){return new n5e(t,e.transform,e.options)}function iF(t){return t.ownerDocument.defaultView}function a5e(){return new Promise(function(t){var e=new ResizeObserver(function(r){t(r.every(function(s){return"devicePixelContentBoxSize"in s})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function i5e(t,e){return Vs({width:Math.round(t.left*e+t.width*e)-Math.round(t.left*e),height:Math.round(t.top*e+t.height*e)-Math.round(t.top*e)})}var o5e=(function(){function t(e,r,s){if(r.width===0||r.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=r,s.width===0||s.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=s,this._context=e}return t.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t})();function P0(t,e){var r=t.canvasElementClientSize;if(r.width===0||r.height===0)return null;var s=t.bitmapSize;if(s.width===0||s.height===0)return null;var a=t.canvasElement.getContext("2d",e);return a===null?null:new o5e(a,r,s)}/*!
 * @license
 * TradingView Lightweight Charts v5.0.9
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const ZJ={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var oF,lF;function A0(t,e){const r={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(r)}function eZ(t,e,r,s){t.beginPath();const a=t.lineWidth%2?.5:0;t.moveTo(r,e+a),t.lineTo(s,e+a),t.stroke()}function xo(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:""))}function ic(t){if(t===void 0)throw new Error("Value is undefined");return t}function xt(t){if(t===null)throw new Error("Value is null");return t}function Dp(t){return xt(ic(t))}(function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps",t[t.Curved=2]="Curved"})(oF||(oF={})),(function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"})(lF||(lF={}));class Wa{constructor(){this.t=[]}i(e,r,s){const a={h:e,l:r,o:s===!0};this.t.push(a)}_(e){const r=this.t.findIndex((s=>e===s.h));r>-1&&this.t.splice(r,1)}u(e){this.t=this.t.filter((r=>r.l!==e))}p(e,r,s){const a=[...this.t];this.t=this.t.filter((i=>!i.o)),a.forEach((i=>i.h(e,r,s)))}v(){return this.t.length>0}m(){this.t=[]}}function Vc(t,...e){for(const r of e)for(const s in r)r[s]!==void 0&&Object.prototype.hasOwnProperty.call(r,s)&&!["__proto__","constructor","prototype"].includes(s)&&(typeof r[s]!="object"||t[s]===void 0||Array.isArray(r[s])?t[s]=r[s]:Vc(t[s],r[s]));return t}function _0(t){return typeof t=="number"&&isFinite(t)}function Aw(t){return typeof t=="number"&&t%1==0}function E1(t){return typeof t=="string"}function _N(t){return typeof t=="boolean"}function cm(t){const e=t;if(!e||typeof e!="object")return e;let r,s,a;for(s in r=Array.isArray(e)?[]:{},e)e.hasOwnProperty(s)&&(a=e[s],r[s]=a&&typeof a=="object"?cm(a):a);return r}function l5e(t){return t!==null}function _w(t){return t===null?void 0:t}const tZ="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function Iw(t,e,r){return e===void 0&&(e=tZ),`${r=r!==void 0?`${r} `:""}${t}px ${e}`}class c5e{constructor(e){this.M={S:1,C:5,P:NaN,k:"",T:"",R:"",D:"",V:0,B:0,I:0,A:0,L:0},this.O=e}N(){const e=this.M,r=this.F(),s=this.W();return e.P===r&&e.T===s||(e.P=r,e.T=s,e.k=Iw(r,s),e.A=2.5/12*r,e.V=e.A,e.B=r/12*e.C,e.I=r/12*e.C,e.L=0),e.R=this.H(),e.D=this.U(),this.M}H(){return this.O.N().layout.textColor}U(){return this.O.$()}F(){return this.O.N().layout.fontSize}W(){return this.O.N().layout.fontFamily}}function g3(t){return t<0?0:t>255?255:Math.round(t)||0}function cF(t){return .199*t[0]+.687*t[1]+.114*t[2]}class d5e{constructor(e,r){this.q=new Map,this.Y=e,r&&(this.q=r)}j(e,r){if(e==="transparent")return e;const s=this.K(e),a=s[3];return`rgba(${s[0]}, ${s[1]}, ${s[2]}, ${r*a})`}X(e){const r=this.K(e);return{Z:`rgb(${r[0]}, ${r[1]}, ${r[2]})`,G:cF(r)>160?"black":"white"}}J(e){return cF(this.K(e))}tt(e,r,s){const[a,i,o,l]=this.K(e),[d,h,f,m]=this.K(r),x=[g3(a+s*(d-a)),g3(i+s*(h-i)),g3(o+s*(f-o)),(b=l+s*(m-l),b<=0||b>1?Math.min(Math.max(b,0),1):Math.round(1e4*b)/1e4)];var b;return`rgba(${x[0]}, ${x[1]}, ${x[2]}, ${x[3]})`}K(e){const r=this.q.get(e);if(r)return r;const s=(function(o){const l=document.createElement("div");l.style.display="none",document.body.appendChild(l),l.style.color=o;const d=window.getComputedStyle(l).color;return document.body.removeChild(l),d})(e),a=s.match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!a){if(this.Y.length)for(const o of this.Y){const l=o(e);if(l)return this.q.set(e,l),l}throw new Error(`Failed to parse color: ${e}`)}const i=[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10),a[4]?parseFloat(a[4]):1];return this.q.set(e,i),i}}class u5e{constructor(){this.it=[]}st(e){this.it=e}nt(e,r,s){this.it.forEach((a=>{a.nt(e,r,s)}))}}class og{nt(e,r,s){e.useBitmapCoordinateSpace((a=>this.et(a,r,s)))}}class h5e extends og{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et({context:e,horizontalPixelRatio:r,verticalPixelRatio:s}){if(this.rt===null||this.rt.lt===null)return;const a=this.rt.lt,i=this.rt,o=Math.max(1,Math.floor(r))%2/2,l=d=>{e.beginPath();for(let h=a.to-1;h>=a.from;--h){const f=i.ot[h],m=Math.round(f._t*r)+o,x=f.ut*s,b=d*s+o;e.moveTo(m,x),e.arc(m,x,b,0,2*Math.PI)}e.fill()};i.ct>0&&(e.fillStyle=i.dt,l(i.ft+i.ct)),e.fillStyle=i.vt,l(i.ft)}}function f5e(){return{ot:[{_t:0,ut:0,wt:0,gt:0}],vt:"",dt:"",ft:0,ct:0,lt:null}}const m5e={from:0,to:1};class p5e{constructor(e,r,s){this.Mt=new u5e,this.bt=[],this.St=[],this.xt=!0,this.O=e,this.Ct=r,this.Pt=s,this.Mt.st(this.bt)}yt(e){this.kt(),this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Mt}kt(){const e=this.Pt.Dt();e.length!==this.bt.length&&(this.St=e.map(f5e),this.bt=this.St.map((r=>{const s=new h5e;return s.ht(r),s})),this.Mt.st(this.bt))}Rt(){const e=this.Ct.N().mode===2||!this.Ct.Vt(),r=this.Pt.Bt(),s=this.Ct.It(),a=this.O.Et();this.kt(),r.forEach(((i,o)=>{const l=this.St[o],d=i.At(s),h=i.zt();!e&&d!==null&&i.Vt()&&h!==null?(l.vt=d.Lt,l.ft=d.ft,l.ct=d.Ot,l.ot[0].gt=d.gt,l.ot[0].ut=i.Ft().Nt(d.gt,h.Wt),l.dt=d.Ht??this.O.Ut(l.ot[0].ut/i.Ft().$t()),l.ot[0].wt=s,l.ot[0]._t=a.qt(s),l.lt=m5e):l.lt=null}))}}class g5e extends og{constructor(e){super(),this.Yt=e}et({context:e,bitmapSize:r,horizontalPixelRatio:s,verticalPixelRatio:a}){if(this.Yt===null)return;const i=this.Yt.jt.Vt,o=this.Yt.Kt.Vt;if(!i&&!o)return;const l=Math.round(this.Yt._t*s),d=Math.round(this.Yt.ut*a);e.lineCap="butt",i&&l>=0&&(e.lineWidth=Math.floor(this.Yt.jt.ct*s),e.strokeStyle=this.Yt.jt.R,e.fillStyle=this.Yt.jt.R,A0(e,this.Yt.jt.Xt),(function(h,f,m,x){h.beginPath();const b=h.lineWidth%2?.5:0;h.moveTo(f+b,m),h.lineTo(f+b,x),h.stroke()})(e,l,0,r.height)),o&&d>=0&&(e.lineWidth=Math.floor(this.Yt.Kt.ct*a),e.strokeStyle=this.Yt.Kt.R,e.fillStyle=this.Yt.Kt.R,A0(e,this.Yt.Kt.Xt),eZ(e,d,0,r.width))}}class x5e{constructor(e,r){this.xt=!0,this.Zt={jt:{ct:1,Xt:0,R:"",Vt:!1},Kt:{ct:1,Xt:0,R:"",Vt:!1},_t:0,ut:0},this.Gt=new g5e(this.Zt),this.Jt=e,this.Pt=r}yt(){this.xt=!0}Tt(e){return this.xt&&(this.Rt(),this.xt=!1),this.Gt}Rt(){const e=this.Jt.Vt(),r=this.Pt.Qt().N().crosshair,s=this.Zt;if(r.mode===2)return s.Kt.Vt=!1,void(s.jt.Vt=!1);s.Kt.Vt=e&&this.Jt.ti(this.Pt),s.jt.Vt=e&&this.Jt.ii(),s.Kt.ct=r.horzLine.width,s.Kt.Xt=r.horzLine.style,s.Kt.R=r.horzLine.color,s.jt.ct=r.vertLine.width,s.jt.Xt=r.vertLine.style,s.jt.R=r.vertLine.color,s._t=this.Jt.si(),s.ut=this.Jt.ni()}}function y5e(t,e,r,s,a,i){t.fillRect(e+i,r,s-2*i,i),t.fillRect(e+i,r+a-i,s-2*i,i),t.fillRect(e,r,i,a),t.fillRect(e+s-i,r,i,a)}function fk(t,e,r,s,a,i){t.save(),t.globalCompositeOperation="copy",t.fillStyle=i,t.fillRect(e,r,s,a),t.restore()}function dF(t,e,r,s,a,i){t.beginPath(),t.roundRect?t.roundRect(e,r,s,a,i):(t.lineTo(e+s-i[1],r),i[1]!==0&&t.arcTo(e+s,r,e+s,r+i[1],i[1]),t.lineTo(e+s,r+a-i[2]),i[2]!==0&&t.arcTo(e+s,r+a,e+s-i[2],r+a,i[2]),t.lineTo(e+i[3],r+a),i[3]!==0&&t.arcTo(e,r+a,e,r+a-i[3],i[3]),t.lineTo(e,r+i[0]),i[0]!==0&&t.arcTo(e,r,e+i[0],r,i[0]))}function uF(t,e,r,s,a,i,o=0,l=[0,0,0,0],d=""){if(t.save(),!o||!d||d===i)return dF(t,e,r,s,a,l),t.fillStyle=i,t.fill(),void t.restore();const h=o/2;var f;dF(t,e+h,r+h,s-o,a-o,(f=-h,l.map((m=>m===0?m:m+f)))),i!=="transparent"&&(t.fillStyle=i,t.fill()),d!=="transparent"&&(t.lineWidth=o,t.strokeStyle=d,t.closePath(),t.stroke()),t.restore()}function rZ(t,e,r,s,a,i,o){t.save(),t.globalCompositeOperation="copy";const l=t.createLinearGradient(0,0,0,a);l.addColorStop(0,i),l.addColorStop(1,o),t.fillStyle=l,t.fillRect(e,r,s,a),t.restore()}class hF{constructor(e,r){this.ht(e,r)}ht(e,r){this.Yt=e,this.ei=r}$t(e,r){return this.Yt.Vt?e.P+e.A+e.V:0}nt(e,r,s,a){if(!this.Yt.Vt||this.Yt.ri.length===0)return;const i=this.Yt.R,o=this.ei.Z,l=e.useBitmapCoordinateSpace((d=>{const h=d.context;h.font=r.k;const f=this.hi(d,r,s,a),m=f.ai;return f.li?uF(h,m.oi,m._i,m.ui,m.ci,o,m.di,[m.ft,0,0,m.ft],o):uF(h,m.fi,m._i,m.ui,m.ci,o,m.di,[0,m.ft,m.ft,0],o),this.Yt.pi&&(h.fillStyle=i,h.fillRect(m.fi,m.mi,m.wi-m.fi,m.gi)),this.Yt.Mi&&(h.fillStyle=r.D,h.fillRect(f.li?m.bi-m.di:0,m._i,m.di,m.Si-m._i)),f}));e.useMediaCoordinateSpace((({context:d})=>{const h=l.xi;d.font=r.k,d.textAlign=l.li?"right":"left",d.textBaseline="middle",d.fillStyle=i,d.fillText(this.Yt.ri,h.Ci,(h._i+h.Si)/2+h.Pi)}))}hi(e,r,s,a){const{context:i,bitmapSize:o,mediaSize:l,horizontalPixelRatio:d,verticalPixelRatio:h}=e,f=this.Yt.pi||!this.Yt.yi?r.C:0,m=this.Yt.ki?r.S:0,x=r.A+this.ei.Ti,b=r.V+this.ei.Ri,j=r.B,N=r.I,w=this.Yt.ri,C=r.P,T=s.Di(i,w),O=Math.ceil(s.Vi(i,w)),I=C+x+b,P=r.S+j+N+O+f,A=Math.max(1,Math.floor(h));let R=Math.round(I*h);R%2!=A%2&&(R+=1);const B=m>0?Math.max(1,Math.floor(m*d)):0,V=Math.round(P*d),X=Math.round(f*d),ee=this.ei.Bi??this.ei.Ii,Y=Math.round(ee*h)-Math.floor(.5*h),re=Math.floor(Y+A/2-R/2),le=re+R,te=a==="right",de=te?l.width-m:m,ie=te?o.width-B:B;let Z,ne,oe;return te?(Z=ie-V,ne=ie-X,oe=de-f-j-m):(Z=ie+V,ne=ie+X,oe=de+f+j),{li:te,ai:{_i:re,mi:Y,Si:le,ui:V,ci:R,ft:2*d,di:B,oi:Z,fi:ie,wi:ne,gi:A,bi:o.width},xi:{_i:re/h,Si:le/h,Ci:oe,Pi:T}}}}class mk{constructor(e){this.Ei={Ii:0,Z:"#000",Ri:0,Ti:0},this.Ai={ri:"",Vt:!1,pi:!0,yi:!1,Ht:"",R:"#FFF",Mi:!1,ki:!1},this.zi={ri:"",Vt:!1,pi:!1,yi:!0,Ht:"",R:"#FFF",Mi:!0,ki:!0},this.xt=!0,this.Li=new(e||hF)(this.Ai,this.Ei),this.Oi=new(e||hF)(this.zi,this.Ei)}ri(){return this.Ni(),this.Ai.ri}Ii(){return this.Ni(),this.Ei.Ii}yt(){this.xt=!0}$t(e,r=!1){return Math.max(this.Li.$t(e,r),this.Oi.$t(e,r))}Fi(){return this.Ei.Bi||0}Wi(e){this.Ei.Bi=e}Hi(){return this.Ni(),this.Ai.Vt||this.zi.Vt}Ui(){return this.Ni(),this.Ai.Vt}Tt(e){return this.Ni(),this.Ai.pi=this.Ai.pi&&e.N().ticksVisible,this.zi.pi=this.zi.pi&&e.N().ticksVisible,this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Li}$i(){return this.Ni(),this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Oi}Ni(){this.xt&&(this.Ai.pi=!0,this.zi.pi=!1,this.qi(this.Ai,this.zi,this.Ei))}}class v5e extends mk{constructor(e,r,s){super(),this.Jt=e,this.Yi=r,this.ji=s}qi(e,r,s){if(e.Vt=!1,this.Jt.N().mode===2)return;const a=this.Jt.N().horzLine;if(!a.labelVisible)return;const i=this.Yi.zt();if(!this.Jt.Vt()||this.Yi.Ki()||i===null)return;const o=this.Yi.Xi().X(a.labelBackgroundColor);s.Z=o.Z,e.R=o.G;const l=2/12*this.Yi.P();s.Ti=l,s.Ri=l;const d=this.ji(this.Yi);s.Ii=d.Ii,e.ri=this.Yi.Zi(d.gt,i),e.Vt=!0}}const b5e=/[1-9]/g;class nZ{constructor(){this.Yt=null}ht(e){this.Yt=e}nt(e,r){if(this.Yt===null||this.Yt.Vt===!1||this.Yt.ri.length===0)return;const s=e.useMediaCoordinateSpace((({context:x})=>(x.font=r.k,Math.round(r.Gi.Vi(x,xt(this.Yt).ri,b5e)))));if(s<=0)return;const a=r.Ji,i=s+2*a,o=i/2,l=this.Yt.Qi;let d=this.Yt.Ii,h=Math.floor(d-o)+.5;h<0?(d+=Math.abs(0-h),h=Math.floor(d-o)+.5):h+i>l&&(d-=Math.abs(l-(h+i)),h=Math.floor(d-o)+.5);const f=h+i,m=Math.ceil(0+r.S+r.C+r.A+r.P+r.V);e.useBitmapCoordinateSpace((({context:x,horizontalPixelRatio:b,verticalPixelRatio:j})=>{const N=xt(this.Yt);x.fillStyle=N.Z;const w=Math.round(h*b),C=Math.round(0*j),T=Math.round(f*b),O=Math.round(m*j),I=Math.round(2*b);if(x.beginPath(),x.moveTo(w,C),x.lineTo(w,O-I),x.arcTo(w,O,w+I,O,I),x.lineTo(T-I,O),x.arcTo(T,O,T,O-I,I),x.lineTo(T,C),x.fill(),N.pi){const P=Math.round(N.Ii*b),A=C,R=Math.round((A+r.C)*j);x.fillStyle=N.R;const B=Math.max(1,Math.floor(b)),V=Math.floor(.5*b);x.fillRect(P-V,A,B,R-A)}})),e.useMediaCoordinateSpace((({context:x})=>{const b=xt(this.Yt),j=0+r.S+r.C+r.A+r.P/2;x.font=r.k,x.textAlign="left",x.textBaseline="middle",x.fillStyle=b.R;const N=r.Gi.Di(x,"Apr0");x.translate(h+a,j+N),x.fillText(b.ri,0,0)}))}}class w5e{constructor(e,r,s){this.xt=!0,this.Gt=new nZ,this.Zt={Vt:!1,Z:"#4c525e",R:"white",ri:"",Qi:0,Ii:NaN,pi:!0},this.Ct=e,this.ts=r,this.ji=s}yt(){this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Gt.ht(this.Zt),this.Gt}Rt(){const e=this.Zt;if(e.Vt=!1,this.Ct.N().mode===2)return;const r=this.Ct.N().vertLine;if(!r.labelVisible)return;const s=this.ts.Et();if(s.Ki())return;e.Qi=s.Qi();const a=this.ji();if(a===null)return;e.Ii=a.Ii;const i=s.ss(this.Ct.It());e.ri=s.ns(xt(i)),e.Vt=!0;const o=this.ts.Xi().X(r.labelBackgroundColor);e.Z=o.Z,e.R=o.G,e.pi=s.N().ticksVisible}}class sZ{constructor(){this.es=null,this.rs=0}hs(){return this.rs}ls(e){this.rs=e}Ft(){return this.es}_s(e){this.es=e}us(e){return[]}cs(){return[]}Vt(){return!0}}var fF;(function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden",t[t.MagnetOHLC=3]="MagnetOHLC"})(fF||(fF={}));class N5e extends sZ{constructor(e,r){super(),this.Pt=null,this.ds=NaN,this.fs=0,this.ps=!1,this.vs=new Map,this.ws=!1,this.gs=new WeakMap,this.Ms=new WeakMap,this.bs=NaN,this.Ss=NaN,this.xs=NaN,this.Cs=NaN,this.ts=e,this.Ps=r,this.ys=((a,i)=>o=>{const l=i(),d=a();if(o===xt(this.Pt).ks())return{gt:d,Ii:l};{const h=xt(o.zt());return{gt:o.Ts(l,h),Ii:l}}})((()=>this.ds),(()=>this.Ss));const s=((a,i)=>()=>{const o=this.ts.Et().Rs(a()),l=i();return o&&Number.isFinite(l)?{wt:o,Ii:l}:null})((()=>this.fs),(()=>this.si()));this.Ds=new w5e(this,e,s)}N(){return this.Ps}Vs(e,r){this.xs=e,this.Cs=r}Bs(){this.xs=NaN,this.Cs=NaN}Is(){return this.xs}Es(){return this.Cs}As(e,r,s){this.ws||(this.ws=!0),this.ps=!0,this.zs(e,r,s)}It(){return this.fs}si(){return this.bs}ni(){return this.Ss}Vt(){return this.ps}Ls(){this.ps=!1,this.Os(),this.ds=NaN,this.bs=NaN,this.Ss=NaN,this.Pt=null,this.Bs(),this.Ns()}Fs(e){let r=this.gs.get(e);r||(r=new x5e(this,e),this.gs.set(e,r));let s=this.Ms.get(e);return s||(s=new p5e(this.ts,this,e),this.Ms.set(e,s)),[r,s]}ti(e){return e===this.Pt&&this.Ps.horzLine.visible}ii(){return this.Ps.vertLine.visible}Ws(e,r){this.ps&&this.Pt===e||this.vs.clear();const s=[];return this.Pt===e&&s.push(this.Hs(this.vs,r,this.ys)),s}cs(){return this.ps?[this.Ds]:[]}Us(){return this.Pt}Ns(){this.ts.$s().forEach((e=>{var r,s;(r=this.gs.get(e))==null||r.yt(),(s=this.Ms.get(e))==null||s.yt()})),this.vs.forEach((e=>e.yt())),this.Ds.yt()}qs(e){return e&&!e.ks().Ki()?e.ks():null}zs(e,r,s){this.Ys(e,r,s)&&this.Ns()}Ys(e,r,s){const a=this.bs,i=this.Ss,o=this.ds,l=this.fs,d=this.Pt,h=this.qs(s);this.fs=e,this.bs=isNaN(e)?NaN:this.ts.Et().qt(e),this.Pt=s;const f=h!==null?h.zt():null;return h!==null&&f!==null?(this.ds=r,this.Ss=h.Nt(r,f)):(this.ds=NaN,this.Ss=NaN),a!==this.bs||i!==this.Ss||l!==this.fs||o!==this.ds||d!==this.Pt}Os(){const e=this.ts.js().map((s=>s.Xs().Ks())).filter(l5e),r=e.length===0?null:Math.max(...e);this.fs=r!==null?r:NaN}Hs(e,r,s){let a=e.get(r);return a===void 0&&(a=new v5e(this,r,s),e.set(r,a)),a}}function pk(t){return t==="left"||t==="right"}class mo{constructor(e){this.Zs=new Map,this.Gs=[],this.Js=e}Qs(e,r){const s=(function(a,i){return a===void 0?i:{tn:Math.max(a.tn,i.tn),sn:a.sn||i.sn}})(this.Zs.get(e),r);this.Zs.set(e,s)}nn(){return this.Js}en(e){const r=this.Zs.get(e);return r===void 0?{tn:this.Js}:{tn:Math.max(this.Js,r.tn),sn:r.sn}}rn(){this.hn(),this.Gs=[{an:0}]}ln(e){this.hn(),this.Gs=[{an:1,Wt:e}]}_n(e){this.un(),this.Gs.push({an:5,Wt:e})}hn(){this.un(),this.Gs.push({an:6})}cn(){this.hn(),this.Gs=[{an:4}]}dn(e){this.hn(),this.Gs.push({an:2,Wt:e})}fn(e){this.hn(),this.Gs.push({an:3,Wt:e})}pn(){return this.Gs}vn(e){for(const r of e.Gs)this.mn(r);this.Js=Math.max(this.Js,e.Js),e.Zs.forEach(((r,s)=>{this.Qs(s,r)}))}static wn(){return new mo(2)}static gn(){return new mo(3)}mn(e){switch(e.an){case 0:this.rn();break;case 1:this.ln(e.Wt);break;case 2:this.dn(e.Wt);break;case 3:this.fn(e.Wt);break;case 4:this.cn();break;case 5:this._n(e.Wt);break;case 6:this.un()}}un(){const e=this.Gs.findIndex((r=>r.an===5));e!==-1&&this.Gs.splice(e,1)}}class aZ{formatTickmarks(e){return e.map((r=>this.format(r)))}}const mF=".";function dm(t,e){if(!_0(t))return"n/a";if(!Aw(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?t.toString():("0000000000000000"+t.toString()).slice(-e)}class gk extends aZ{constructor(e,r){if(super(),r||(r=1),_0(e)&&Aw(e)||(e=100),e<0)throw new TypeError("invalid base");this.Yi=e,this.Mn=r,this.bn()}format(e){const r=e<0?"":"";return e=Math.abs(e),r+this.Sn(e)}bn(){if(this.xn=0,this.Yi>0&&this.Mn>0){let e=this.Yi;for(;e>1;)e/=10,this.xn++}}Sn(e){const r=this.Yi/this.Mn;let s=Math.floor(e),a="";const i=this.xn!==void 0?this.xn:NaN;if(r>1){let o=+(Math.round(e*r)-s*r).toFixed(this.xn);o>=r&&(o-=r,s+=1),a=mF+dm(+o.toFixed(this.xn)*this.Mn,i)}else s=Math.round(s*r)/r,i>0&&(a=mF+dm(0,i));return s.toFixed(0)+a}}class iZ extends gk{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class j5e extends aZ{constructor(e){super(),this.Cn=e}format(e){let r="";return e<0&&(r="-",e=-e),e<995?r+this.Pn(e):e<999995?r+this.Pn(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),r+this.Pn(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),r+this.Pn(e/1e9)+"B")}Pn(e){let r;const s=Math.pow(10,this.Cn);return r=(e=Math.round(e*s)/s)>=1e-15&&e<1?e.toFixed(this.Cn).replace(/\.?0+$/,""):String(e),r.replace(/(\.[1-9]*)0+$/,((a,i)=>i))}}const S5e=/[2-9]/g;class Mw{constructor(e=50){this.yn=0,this.kn=1,this.Tn=1,this.Rn={},this.Dn=new Map,this.Vn=e}Bn(){this.yn=0,this.Dn.clear(),this.kn=1,this.Tn=1,this.Rn={}}Vi(e,r,s){return this.In(e,r,s).width}Di(e,r,s){const a=this.In(e,r,s);return((a.actualBoundingBoxAscent||0)-(a.actualBoundingBoxDescent||0))/2}In(e,r,s){const a=s||S5e,i=String(r).replace(a,"0");if(this.Dn.has(i))return ic(this.Dn.get(i)).En;if(this.yn===this.Vn){const l=this.Rn[this.Tn];delete this.Rn[this.Tn],this.Dn.delete(l),this.Tn++,this.yn--}e.save(),e.textBaseline="middle";const o=e.measureText(i);return e.restore(),o.width===0&&r.length||(this.Dn.set(i,{En:o,An:this.kn}),this.Rn[this.kn]=i,this.yn++,this.kn++),o}}class k5e{constructor(e){this.zn=null,this.M=null,this.Ln="right",this.On=e}Nn(e,r,s){this.zn=e,this.M=r,this.Ln=s}nt(e){this.M!==null&&this.zn!==null&&this.zn.nt(e,this.M,this.On,this.Ln)}}class oZ{constructor(e,r,s){this.Fn=e,this.On=new Mw(50),this.Wn=r,this.O=s,this.F=-1,this.Gt=new k5e(this.On)}Tt(){const e=this.O.Hn(this.Wn);if(e===null)return null;const r=e.Un(this.Wn)?e.$n():this.Wn.Ft();if(r===null)return null;const s=e.qn(r);if(s==="overlay")return null;const a=this.O.Yn();return a.P!==this.F&&(this.F=a.P,this.On.Bn()),this.Gt.Nn(this.Fn.$i(),a,s),this.Gt}}class C5e extends og{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}jn(e,r){var o;if(!((o=this.Yt)!=null&&o.Vt))return null;const{ut:s,ct:a,Kn:i}=this.Yt;return r>=s-a-7&&r<=s+a+7?{Xn:this.Yt,Kn:i}:null}et({context:e,bitmapSize:r,horizontalPixelRatio:s,verticalPixelRatio:a}){if(this.Yt===null||this.Yt.Vt===!1)return;const i=Math.round(this.Yt.ut*a);i<0||i>r.height||(e.lineCap="butt",e.strokeStyle=this.Yt.R,e.lineWidth=Math.floor(this.Yt.ct*s),A0(e,this.Yt.Xt),eZ(e,i,0,r.width))}}class pI{constructor(e){this.Zn={ut:0,R:"rgba(0, 0, 0, 0)",ct:1,Xt:0,Vt:!1},this.Gn=new C5e,this.xt=!0,this.Jn=e,this.Qn=e.Qt(),this.Gn.ht(this.Zn)}yt(){this.xt=!0}Tt(){return this.Jn.Vt()?(this.xt&&(this.te(),this.xt=!1),this.Gn):null}}class E5e extends pI{constructor(e){super(e)}te(){this.Zn.Vt=!1;const e=this.Jn.Ft(),r=e.ie().ie;if(r!==2&&r!==3)return;const s=this.Jn.N();if(!s.baseLineVisible||!this.Jn.Vt())return;const a=this.Jn.zt();a!==null&&(this.Zn.Vt=!0,this.Zn.ut=e.Nt(a.Wt,a.Wt),this.Zn.R=s.baseLineColor,this.Zn.ct=s.baseLineWidth,this.Zn.Xt=s.baseLineStyle)}}class T5e extends og{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}se(){return this.Yt}et({context:e,horizontalPixelRatio:r,verticalPixelRatio:s}){const a=this.Yt;if(a===null)return;const i=Math.max(1,Math.floor(r)),o=i%2/2,l=Math.round(a.ne.x*r)+o,d=a.ne.y*s;e.fillStyle=a.ee,e.beginPath();const h=Math.max(2,1.5*a.re)*r;e.arc(l,d,h,0,2*Math.PI,!1),e.fill(),e.fillStyle=a.he,e.beginPath(),e.arc(l,d,a.ft*r,0,2*Math.PI,!1),e.fill(),e.lineWidth=i,e.strokeStyle=a.ae,e.beginPath(),e.arc(l,d,a.ft*r+i/2,0,2*Math.PI,!1),e.stroke()}}const P5e=[{le:0,oe:.25,_e:4,ue:10,ce:.25,de:0,fe:.4,pe:.8},{le:.25,oe:.525,_e:10,ue:14,ce:0,de:0,fe:.8,pe:0},{le:.525,oe:1,_e:14,ue:14,ce:0,de:0,fe:0,pe:0}];class A5e{constructor(e){this.Gt=new T5e,this.xt=!0,this.ve=!0,this.me=performance.now(),this.we=this.me-1,this.ge=e}Me(){this.we=this.me-1,this.yt()}be(){if(this.yt(),this.ge.N().lastPriceAnimation===2){const e=performance.now(),r=this.we-e;if(r>0)return void(r<650&&(this.we+=2600));this.me=e,this.we=e+2600}}yt(){this.xt=!0}Se(){this.ve=!0}Vt(){return this.ge.N().lastPriceAnimation!==0}xe(){switch(this.ge.N().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.we}}Tt(){return this.xt?(this.Rt(),this.xt=!1,this.ve=!1):this.ve&&(this.Ce(),this.ve=!1),this.Gt}Rt(){this.Gt.ht(null);const e=this.ge.Qt().Et(),r=e.Pe(),s=this.ge.zt();if(r===null||s===null)return;const a=this.ge.ye(!0);if(a.ke||!r.Te(a.Re))return;const i={x:e.qt(a.Re),y:this.ge.Ft().Nt(a.gt,s.Wt)},o=a.R,l=this.ge.N().lineWidth,d=this.De(this.Ve(),o);this.Gt.ht({ee:o,re:l,he:d.he,ae:d.ae,ft:d.ft,ne:i})}Ce(){const e=this.Gt.se();if(e!==null){const r=this.De(this.Ve(),e.ee);e.he=r.he,e.ae=r.ae,e.ft=r.ft}}Ve(){return this.xe()?performance.now()-this.me:2599}Be(e,r,s,a){const i=s+(a-s)*r;return this.ge.Qt().Xi().j(e,i)}De(e,r){const s=e%2600/2600;let a;for(const h of P5e)if(s>=h.le&&s<=h.oe){a=h;break}xo(a!==void 0,"Last price animation internal logic error");const i=(s-a.le)/(a.oe-a.le);return{he:this.Be(r,i,a.ce,a.de),ae:this.Be(r,i,a.fe,a.pe),ft:(o=i,l=a._e,d=a.ue,l+(d-l)*o)};var o,l,d}}class _5e extends pI{constructor(e){super(e)}te(){const e=this.Zn;e.Vt=!1;const r=this.Jn.N();if(!r.priceLineVisible||!this.Jn.Vt())return;const s=this.Jn.ye(r.priceLineSource===0);s.ke||(e.Vt=!0,e.ut=s.Ii,e.R=this.Jn.Ie(s.R),e.ct=r.priceLineWidth,e.Xt=r.priceLineStyle)}}class I5e extends mk{constructor(e){super(),this.Jt=e}qi(e,r,s){e.Vt=!1,r.Vt=!1;const a=this.Jt;if(!a.Vt())return;const i=a.N(),o=i.lastValueVisible,l=a.Ee()!=="",d=i.seriesLastValueMode===0,h=a.ye(!1);if(h.ke)return;o&&(e.ri=this.Ae(h,o,d),e.Vt=e.ri.length!==0),(l||d)&&(r.ri=this.ze(h,o,l,d),r.Vt=r.ri.length>0);const f=a.Ie(h.R),m=this.Jt.Qt().Xi().X(f);s.Z=m.Z,s.Ii=h.Ii,r.Ht=a.Qt().Ut(h.Ii/a.Ft().$t()),e.Ht=f,e.R=m.G,r.R=m.G}ze(e,r,s,a){let i="";const o=this.Jt.Ee();return s&&o.length!==0&&(i+=`${o} `),r&&a&&(i+=this.Jt.Ft().Le()?e.Oe:e.Ne),i.trim()}Ae(e,r,s){return r?s?this.Jt.Ft().Le()?e.Ne:e.Oe:e.ri:""}}function pF(t,e,r,s){const a=Number.isFinite(e),i=Number.isFinite(r);return a&&i?t(e,r):a||i?a?e:r:s}class xl{constructor(e,r){this.Fe=e,this.We=r}He(e){return e!==null&&this.Fe===e.Fe&&this.We===e.We}Ue(){return new xl(this.Fe,this.We)}$e(){return this.Fe}qe(){return this.We}Ye(){return this.We-this.Fe}Ki(){return this.We===this.Fe||Number.isNaN(this.We)||Number.isNaN(this.Fe)}vn(e){return e===null?this:new xl(pF(Math.min,this.$e(),e.$e(),-1/0),pF(Math.max,this.qe(),e.qe(),1/0))}je(e){if(!_0(e)||this.We-this.Fe===0)return;const r=.5*(this.We+this.Fe);let s=this.We-r,a=this.Fe-r;s*=e,a*=e,this.We=r+s,this.Fe=r+a}Ke(e){_0(e)&&(this.We+=e,this.Fe+=e)}Xe(){return{minValue:this.Fe,maxValue:this.We}}static Ze(e){return e===null?null:new xl(e.minValue,e.maxValue)}}class S2{constructor(e,r){this.Ge=e,this.Je=r||null}Qe(){return this.Ge}tr(){return this.Je}Xe(){return{priceRange:this.Ge===null?null:this.Ge.Xe(),margins:this.Je||void 0}}static Ze(e){return e===null?null:new S2(xl.Ze(e.priceRange),e.margins)}}class M5e extends pI{constructor(e,r){super(e),this.ir=r}te(){const e=this.Zn;e.Vt=!1;const r=this.ir.N();if(!this.Jn.Vt()||!r.lineVisible)return;const s=this.ir.sr();s!==null&&(e.Vt=!0,e.ut=s,e.R=r.color,e.ct=r.lineWidth,e.Xt=r.lineStyle,e.Kn=this.ir.N().id)}}class O5e extends mk{constructor(e,r){super(),this.ge=e,this.ir=r}qi(e,r,s){e.Vt=!1,r.Vt=!1;const a=this.ir.N(),i=a.axisLabelVisible,o=a.title!=="",l=this.ge;if(!i||!l.Vt())return;const d=this.ir.sr();if(d===null)return;o&&(r.ri=a.title,r.Vt=!0),r.Ht=l.Qt().Ut(d/l.Ft().$t()),e.ri=this.nr(a.price),e.Vt=!0;const h=this.ge.Qt().Xi().X(a.axisLabelColor||a.color);s.Z=h.Z;const f=a.axisLabelTextColor||h.G;e.R=f,r.R=f,s.Ii=d}nr(e){const r=this.ge.zt();return r===null?"":this.ge.Ft().Zi(e,r.Wt)}}class R5e{constructor(e,r){this.ge=e,this.Ps=r,this.er=new M5e(e,this),this.Fn=new O5e(e,this),this.rr=new oZ(this.Fn,e,e.Qt())}hr(e){Vc(this.Ps,e),this.yt(),this.ge.Qt().ar()}N(){return this.Ps}lr(){return this.er}_r(){return this.rr}ur(){return this.Fn}yt(){this.er.yt(),this.Fn.yt()}sr(){const e=this.ge,r=e.Ft();if(e.Qt().Et().Ki()||r.Ki())return null;const s=e.zt();return s===null?null:r.Nt(this.Ps.price,s.Wt)}}class D5e extends sZ{constructor(e){super(),this.ts=e}Qt(){return this.ts}}const $5e={Bar:(t,e,r,s)=>{const a=e.upColor,i=e.downColor,o=xt(t(r,s)),l=Dp(o.Wt[0])<=Dp(o.Wt[3]);return{cr:o.R??(l?a:i)}},Candlestick:(t,e,r,s)=>{const a=e.upColor,i=e.downColor,o=e.borderUpColor,l=e.borderDownColor,d=e.wickUpColor,h=e.wickDownColor,f=xt(t(r,s)),m=Dp(f.Wt[0])<=Dp(f.Wt[3]);return{cr:f.R??(m?a:i),dr:f.Ht??(m?o:l),pr:f.vr??(m?d:h)}},Custom:(t,e,r,s)=>({cr:xt(t(r,s)).R??e.color}),Area:(t,e,r,s)=>{const a=xt(t(r,s));return{cr:a.vt??e.lineColor,vt:a.vt??e.lineColor,mr:a.mr??e.topColor,wr:a.wr??e.bottomColor}},Baseline:(t,e,r,s)=>{const a=xt(t(r,s));return{cr:a.Wt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,gr:a.gr??e.topLineColor,Mr:a.Mr??e.bottomLineColor,br:a.br??e.topFillColor1,Sr:a.Sr??e.topFillColor2,Cr:a.Cr??e.bottomFillColor1,Pr:a.Pr??e.bottomFillColor2}},Line:(t,e,r,s)=>{const a=xt(t(r,s));return{cr:a.R??e.color,vt:a.R??e.color}},Histogram:(t,e,r,s)=>({cr:xt(t(r,s)).R??e.color})};class L5e{constructor(e){this.yr=(r,s)=>s!==void 0?s.Wt:this.ge.Xs().kr(r),this.ge=e,this.Tr=$5e[e.Rr()]}Dr(e,r){return this.Tr(this.yr,this.ge.N(),e,r)}}function lZ(t,e,r,s,a=0,i=e.length){let o=i-a;for(;0<o;){const l=o>>1,d=a+l;s(e[d],r)===t?(a=d+1,o-=l+1):o=l}return a}const Hy=lZ.bind(null,!0),cZ=lZ.bind(null,!1);var gF;(function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"})(gF||(gF={}));const xp=30;class F5e{constructor(){this.Vr=[],this.Br=new Map,this.Ir=new Map,this.Er=[]}Ar(){return this.zr()>0?this.Vr[this.Vr.length-1]:null}Lr(){return this.zr()>0?this.Or(0):null}Ks(){return this.zr()>0?this.Or(this.Vr.length-1):null}zr(){return this.Vr.length}Ki(){return this.zr()===0}Te(e){return this.Nr(e,0)!==null}kr(e){return this.Fr(e)}Fr(e,r=0){const s=this.Nr(e,r);return s===null?null:{...this.Wr(s),Re:this.Or(s)}}Hr(){return this.Vr}Ur(e,r,s){if(this.Ki())return null;let a=null;for(const i of s)a=IN(a,this.$r(e,r,i));return a}ht(e){this.Ir.clear(),this.Br.clear(),this.Vr=e,this.Er=e.map((r=>r.Re))}qr(){return this.Er}Or(e){return this.Vr[e].Re}Wr(e){return this.Vr[e]}Nr(e,r){const s=this.Yr(e);if(s===null&&r!==0)switch(r){case-1:return this.jr(e);case 1:return this.Kr(e);default:throw new TypeError("Unknown search mode")}return s}jr(e){let r=this.Xr(e);return r>0&&(r-=1),r!==this.Vr.length&&this.Or(r)<e?r:null}Kr(e){const r=this.Zr(e);return r!==this.Vr.length&&e<this.Or(r)?r:null}Yr(e){const r=this.Xr(e);return r===this.Vr.length||e<this.Vr[r].Re?null:r}Xr(e){return Hy(this.Vr,e,((r,s)=>r.Re<s))}Zr(e){return cZ(this.Vr,e,((r,s)=>r.Re>s))}Gr(e,r,s){let a=null;for(let i=e;i<r;i++){const o=this.Vr[i].Wt[s];Number.isNaN(o)||(a===null?a={Jr:o,Qr:o}:(o<a.Jr&&(a.Jr=o),o>a.Qr&&(a.Qr=o)))}return a}$r(e,r,s){if(this.Ki())return null;let a=null;const i=xt(this.Lr()),o=xt(this.Ks()),l=Math.max(e,i),d=Math.min(r,o),h=Math.ceil(l/xp)*xp,f=Math.max(h,Math.floor(d/xp)*xp);{const x=this.Xr(l),b=this.Zr(Math.min(d,h,r));a=IN(a,this.Gr(x,b,s))}let m=this.Br.get(s);m===void 0&&(m=new Map,this.Br.set(s,m));for(let x=Math.max(h+1,l);x<f;x+=xp){const b=Math.floor(x/xp);let j=m.get(b);if(j===void 0){const N=this.Xr(b*xp),w=this.Zr((b+1)*xp-1);j=this.Gr(N,w,s),m.set(b,j)}a=IN(a,j)}{const x=this.Xr(f),b=this.Zr(d);a=IN(a,this.Gr(x,b,s))}return a}}function IN(t,e){return t===null?e:e===null?t:{Jr:Math.min(t.Jr,e.Jr),Qr:Math.max(t.Qr,e.Qr)}}const k2={setLineStyle:A0};class B5e{constructor(e){this.th=e}nt(e,r,s){this.th.draw(e,k2)}ih(e,r,s){var a,i;(i=(a=this.th).drawBackground)==null||i.call(a,e,k2)}}class U5e{constructor(e){this.Dn=null,this.sh=e}Tt(){var s;const e=this.sh.renderer();if(e===null)return null;if(((s=this.Dn)==null?void 0:s.nh)===e)return this.Dn.eh;const r=new B5e(e);return this.Dn={nh:e,eh:r},r}rh(){var e,r;return((r=(e=this.sh).zOrder)==null?void 0:r.call(e))??"normal"}}class dZ{constructor(e){this.hh=null,this.ah=e}oh(){return this.ah}Ns(){var e,r;(r=(e=this.ah).updateAllViews)==null||r.call(e)}Fs(){var s,a,i;const e=((a=(s=this.ah).paneViews)==null?void 0:a.call(s))??[];if(((i=this.hh)==null?void 0:i.nh)===e)return this.hh.eh;const r=e.map((o=>new U5e(o)));return this.hh={nh:e,eh:r},r}jn(e,r){var s,a;return((a=(s=this.ah).hitTest)==null?void 0:a.call(s,e,r))??null}}let z5e=class extends dZ{us(){return[]}};class V5e{constructor(e){this.th=e}nt(e,r,s){this.th.draw(e,k2)}ih(e,r,s){var a,i;(i=(a=this.th).drawBackground)==null||i.call(a,e,k2)}}class xF{constructor(e){this.Dn=null,this.sh=e}Tt(){var s;const e=this.sh.renderer();if(e===null)return null;if(((s=this.Dn)==null?void 0:s.nh)===e)return this.Dn.eh;const r=new V5e(e);return this.Dn={nh:e,eh:r},r}rh(){var e,r;return((r=(e=this.sh).zOrder)==null?void 0:r.call(e))??"normal"}}function uZ(t){var e,r,s;return{ri:t.text(),Ii:t.coordinate(),Bi:(e=t.fixedCoordinate)==null?void 0:e.call(t),R:t.textColor(),Z:t.backColor(),Vt:((r=t.visible)==null?void 0:r.call(t))??!0,pi:((s=t.tickVisible)==null?void 0:s.call(t))??!0}}class q5e{constructor(e,r){this.Gt=new nZ,this._h=e,this.uh=r}Tt(){return this.Gt.ht({Qi:this.uh.Qi(),...uZ(this._h)}),this.Gt}}class H5e extends mk{constructor(e,r){super(),this._h=e,this.Yi=r}qi(e,r,s){const a=uZ(this._h);s.Z=a.Z,e.R=a.R;const i=2/12*this.Yi.P();s.Ti=i,s.Ri=i,s.Ii=a.Ii,s.Bi=a.Bi,e.ri=a.ri,e.Vt=a.Vt,e.pi=a.pi}}class W5e extends dZ{constructor(e,r){super(e),this.dh=null,this.fh=null,this.ph=null,this.mh=null,this.ge=r}cs(){var a,i,o;const e=((i=(a=this.ah).timeAxisViews)==null?void 0:i.call(a))??[];if(((o=this.dh)==null?void 0:o.nh)===e)return this.dh.eh;const r=this.ge.Qt().Et(),s=e.map((l=>new q5e(l,r)));return this.dh={nh:e,eh:s},s}Ws(){var a,i,o;const e=((i=(a=this.ah).priceAxisViews)==null?void 0:i.call(a))??[];if(((o=this.fh)==null?void 0:o.nh)===e)return this.fh.eh;const r=this.ge.Ft(),s=e.map((l=>new H5e(l,r)));return this.fh={nh:e,eh:s},s}wh(){var s,a,i;const e=((a=(s=this.ah).priceAxisPaneViews)==null?void 0:a.call(s))??[];if(((i=this.ph)==null?void 0:i.nh)===e)return this.ph.eh;const r=e.map((o=>new xF(o)));return this.ph={nh:e,eh:r},r}gh(){var s,a,i;const e=((a=(s=this.ah).timeAxisPaneViews)==null?void 0:a.call(s))??[];if(((i=this.mh)==null?void 0:i.nh)===e)return this.mh.eh;const r=e.map((o=>new xF(o)));return this.mh={nh:e,eh:r},r}Mh(e,r){var s,a;return((a=(s=this.ah).autoscaleInfo)==null?void 0:a.call(s,e,r))??null}}function x3(t,e,r,s){t.forEach((a=>{e(a).forEach((i=>{i.rh()===r&&s.push(i)}))}))}function y3(t){return t.Fs()}function Y5e(t){return t.wh()}function K5e(t){return t.gh()}const G5e=["Area","Line","Baseline"];class xk extends D5e{constructor(e,r,s,a,i){super(e),this.Yt=new F5e,this.er=new _5e(this),this.bh=[],this.Sh=new E5e(this),this.xh=null,this.Ch=null,this.Ph=null,this.yh=[],this.Ps=s,this.kh=r;const o=new I5e(this);this.vs=[o],this.rr=new oZ(o,this,e),G5e.includes(this.kh)&&(this.xh=new A5e(this)),this.Th(),this.sh=a(this,this.Qt(),i)}m(){this.Ph!==null&&clearTimeout(this.Ph)}Ie(e){return this.Ps.priceLineColor||e}ye(e){const r={ke:!0},s=this.Ft();if(this.Qt().Et().Ki()||s.Ki()||this.Yt.Ki())return r;const a=this.Qt().Et().Pe(),i=this.zt();if(a===null||i===null)return r;let o,l;if(e){const m=this.Yt.Ar();if(m===null)return r;o=m,l=m.Re}else{const m=this.Yt.Fr(a.bi(),-1);if(m===null||(o=this.Yt.kr(m.Re),o===null))return r;l=m.Re}const d=o.Wt[3],h=this.Rh().Dr(l,{Wt:o}),f=s.Nt(d,i.Wt);return{ke:!1,gt:d,ri:s.Zi(d,i.Wt),Oe:s.Dh(d),Ne:s.Vh(d,i.Wt),R:h.cr,Ii:f,Re:l}}Rh(){return this.Ch!==null||(this.Ch=new L5e(this)),this.Ch}N(){return this.Ps}hr(e){const r=e.priceScaleId;r!==void 0&&r!==this.Ps.priceScaleId&&this.Qt().Bh(this,r),Vc(this.Ps,e),e.priceFormat!==void 0&&(this.Th(),this.Qt().Ih()),this.Qt().Eh(this),this.Qt().Ah(),this.sh.yt("options")}ht(e,r){this.Yt.ht(e),this.sh.yt("data"),this.xh!==null&&(r&&r.zh?this.xh.be():e.length===0&&this.xh.Me());const s=this.Qt().Hn(this);this.Qt().Lh(s),this.Qt().Eh(this),this.Qt().Ah(),this.Qt().ar()}Oh(e){const r=new R5e(this,e);return this.bh.push(r),this.Qt().Eh(this),r}Nh(e){const r=this.bh.indexOf(e);r!==-1&&this.bh.splice(r,1),this.Qt().Eh(this)}Fh(){return this.bh}Rr(){return this.kh}zt(){const e=this.Wh();return e===null?null:{Wt:e.Wt[3],Hh:e.wt}}Wh(){const e=this.Qt().Et().Pe();if(e===null)return null;const r=e.Uh();return this.Yt.Fr(r,1)}Xs(){return this.Yt}$h(e){const r=this.Yt.kr(e);return r===null?null:this.kh==="Bar"||this.kh==="Candlestick"||this.kh==="Custom"?{qh:r.Wt[0],Yh:r.Wt[1],jh:r.Wt[2],Kh:r.Wt[3]}:r.Wt[3]}Xh(e){const r=[];x3(this.yh,y3,"top",r);const s=this.xh;return s!==null&&s.Vt()&&(this.Ph===null&&s.xe()&&(this.Ph=setTimeout((()=>{this.Ph=null,this.Qt().Zh()}),0)),s.Se(),r.unshift(s)),r}Fs(){const e=[];this.Gh()||e.push(this.Sh),e.push(this.sh,this.er);const r=this.bh.map((s=>s.lr()));return e.push(...r),x3(this.yh,y3,"normal",e),e}Jh(){return this.Qh(y3,"bottom")}ta(e){return this.Qh(Y5e,e)}ia(e){return this.Qh(K5e,e)}sa(e,r){return this.yh.map((s=>s.jn(e,r))).filter((s=>s!==null))}us(){return[this.rr,...this.bh.map((e=>e._r()))]}Ws(e,r){if(r!==this.es&&!this.Gh())return[];const s=[...this.vs];for(const a of this.bh)s.push(a.ur());return this.yh.forEach((a=>{s.push(...a.Ws())})),s}cs(){const e=[];return this.yh.forEach((r=>{e.push(...r.cs())})),e}Mh(e,r){if(this.Ps.autoscaleInfoProvider!==void 0){const s=this.Ps.autoscaleInfoProvider((()=>{const a=this.na(e,r);return a===null?null:a.Xe()}));return S2.Ze(s)}return this.na(e,r)}nh(){const e=this.Ps.priceFormat;return e.base??1/e.minMove}ea(){return this.ra}Ns(){var e;this.sh.yt();for(const r of this.vs)r.yt();for(const r of this.bh)r.yt();this.er.yt(),this.Sh.yt(),(e=this.xh)==null||e.yt(),this.yh.forEach((r=>r.Ns()))}Ft(){return xt(super.Ft())}At(e){if(!((this.kh==="Line"||this.kh==="Area"||this.kh==="Baseline")&&this.Ps.crosshairMarkerVisible))return null;const r=this.Yt.kr(e);return r===null?null:{gt:r.Wt[3],ft:this.ha(),Ht:this.aa(),Ot:this.la(),Lt:this.oa(e)}}Ee(){return this.Ps.title}Vt(){return this.Ps.visible}_a(e){this.yh.push(new W5e(e,this))}ua(e){this.yh=this.yh.filter((r=>r.oh()!==e))}ca(){if(this.kh==="Custom")return e=>this.sh.da(e)}fa(){if(this.kh==="Custom")return e=>this.sh.pa(e)}va(){return this.Yt.qr()}Gh(){return!pk(this.Ft().ma())}na(e,r){if(!Aw(e)||!Aw(r)||this.Yt.Ki())return null;const s=this.kh==="Line"||this.kh==="Area"||this.kh==="Baseline"||this.kh==="Histogram"?[3]:[2,1],a=this.Yt.Ur(e,r,s);let i=a!==null?new xl(a.Jr,a.Qr):null,o=null;if(this.Rr()==="Histogram"){const l=this.Ps.base,d=new xl(l,l);i=i!==null?i.vn(d):d}return this.yh.forEach((l=>{const d=l.Mh(e,r);if(d!=null&&d.priceRange){const h=new xl(d.priceRange.minValue,d.priceRange.maxValue);i=i!==null?i.vn(h):h}d!=null&&d.margins&&(o=d.margins)})),new S2(i,o)}ha(){switch(this.kh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerRadius}return 0}aa(){switch(this.kh){case"Line":case"Area":case"Baseline":{const e=this.Ps.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}la(){switch(this.kh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerBorderWidth}return 0}oa(e){switch(this.kh){case"Line":case"Area":case"Baseline":{const r=this.Ps.crosshairMarkerBackgroundColor;if(r.length!==0)return r}}return this.Rh().Dr(e).cr}Th(){switch(this.Ps.priceFormat.type){case"custom":{const e=this.Ps.priceFormat.formatter;this.ra={format:e,formatTickmarks:this.Ps.priceFormat.tickmarksFormatter??(r=>r.map(e))};break}case"volume":this.ra=new j5e(this.Ps.priceFormat.precision);break;case"percent":this.ra=new iZ(this.Ps.priceFormat.precision);break;default:{const e=Math.pow(10,this.Ps.priceFormat.precision);this.ra=new gk(e,this.Ps.priceFormat.minMove*e)}}this.es!==null&&this.es.wa()}Qh(e,r){const s=[];return x3(this.yh,e,r,s),s}}const X5e=[3],Q5e=[0,1,2,3];class J5e{constructor(e){this.Ps=e}ga(e,r,s){let a=e;if(this.Ps.mode===0)return a;const i=s.ks(),o=i.zt();if(o===null)return a;const l=i.Nt(e,o),d=s.Ma().filter((f=>f instanceof xk)).reduce(((f,m)=>{if(s.Un(m)||!m.Vt())return f;const x=m.Ft(),b=m.Xs();if(x.Ki()||!b.Te(r))return f;const j=b.kr(r);if(j===null)return f;const N=Dp(m.zt()),w=this.Ps.mode===3?Q5e:X5e;return f.concat(w.map((C=>x.Nt(j.Wt[C],N.Wt))))}),[]);if(d.length===0)return a;d.sort(((f,m)=>Math.abs(f-l)-Math.abs(m-l)));const h=d[0];return a=i.Ts(h,o),a}}function Mb(t,e,r){return Math.min(Math.max(t,e),r)}function MN(t,e,r){return e-t<=r}function gI(t){const e=Math.ceil(t);return e%2==0?e-1:e}class Z5e extends og{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}et({context:e,bitmapSize:r,horizontalPixelRatio:s,verticalPixelRatio:a}){if(this.Yt===null)return;const i=Math.max(1,Math.floor(s));e.lineWidth=i,(function(o,l){o.save(),o.lineWidth%2&&o.translate(.5,.5),l(),o.restore()})(e,(()=>{const o=xt(this.Yt);if(o.ba){e.strokeStyle=o.Sa,A0(e,o.xa),e.beginPath();for(const l of o.Ca){const d=Math.round(l.Pa*s);e.moveTo(d,-i),e.lineTo(d,r.height+i)}e.stroke()}if(o.ya){e.strokeStyle=o.ka,A0(e,o.Ta),e.beginPath();for(const l of o.Ra){const d=Math.round(l.Pa*a);e.moveTo(-i,d),e.lineTo(r.width+i,d)}e.stroke()}}))}}class eAe{constructor(e){this.Gt=new Z5e,this.xt=!0,this.Pt=e}yt(){this.xt=!0}Tt(){if(this.xt){const e=this.Pt.Qt().N().grid,r={ya:e.horzLines.visible,ba:e.vertLines.visible,ka:e.horzLines.color,Sa:e.vertLines.color,Ta:e.horzLines.style,xa:e.vertLines.style,Ra:this.Pt.ks().Da(),Ca:(this.Pt.Qt().Et().Da()||[]).map((s=>({Pa:s.coord})))};this.Gt.ht(r),this.xt=!1}return this.Gt}}class tAe{constructor(e){this.sh=new eAe(e)}lr(){return this.sh}}const v3={Va:4,Ba:1e-4};function Bx(t,e){const r=100*(t-e)/e;return e<0?-r:r}function rAe(t,e){const r=Bx(t.$e(),e),s=Bx(t.qe(),e);return new xl(r,s)}function Ob(t,e){const r=100*(t-e)/e+100;return e<0?-r:r}function nAe(t,e){const r=Ob(t.$e(),e),s=Ob(t.qe(),e);return new xl(r,s)}function C2(t,e){const r=Math.abs(t);if(r<1e-15)return 0;const s=Math.log10(r+e.Ba)+e.Va;return t<0?-s:s}function Rb(t,e){const r=Math.abs(t);if(r<1e-15)return 0;const s=Math.pow(10,r-e.Va)-e.Ba;return t<0?-s:s}function rb(t,e){if(t===null)return null;const r=C2(t.$e(),e),s=C2(t.qe(),e);return new xl(r,s)}function Ux(t,e){if(t===null)return null;const r=Rb(t.$e(),e),s=Rb(t.qe(),e);return new xl(r,s)}function b3(t){if(t===null)return v3;const e=Math.abs(t.qe()-t.$e());if(e>=1||e<1e-15)return v3;const r=Math.ceil(Math.abs(Math.log10(e))),s=v3.Va+r;return{Va:s,Ba:1/Math.pow(10,s)}}class w3{constructor(e,r){if(this.Ia=e,this.Ea=r,(function(s){if(s<0)return!1;if(s>1e18)return!0;for(let a=s;a>1;a/=10)if(a%10!=0)return!1;return!0})(this.Ia))this.Aa=[2,2.5,2];else{this.Aa=[];for(let s=this.Ia;s!==1;){if(s%2==0)this.Aa.push(2),s/=2;else{if(s%5!=0)throw new Error("unexpected base");this.Aa.push(2,2.5),s/=5}if(this.Aa.length>100)throw new Error("something wrong with base")}}}za(e,r,s){const a=this.Ia===0?0:1/this.Ia;let i=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-r)))),o=0,l=this.Ea[0];for(;;){const m=MN(i,a,1e-14)&&i>a+1e-14,x=MN(i,s*l,1e-14),b=MN(i,1,1e-14);if(!(m&&x&&b))break;i/=l,l=this.Ea[++o%this.Ea.length]}if(i<=a+1e-14&&(i=a),i=Math.max(1,i),this.Aa.length>0&&(d=i,h=1,f=1e-14,Math.abs(d-h)<f))for(o=0,l=this.Aa[0];MN(i,s*l,1e-14)&&i>a+1e-14;)i/=l,l=this.Aa[++o%this.Aa.length];var d,h,f;return i}}class yF{constructor(e,r,s,a){this.La=[],this.Yi=e,this.Ia=r,this.Oa=s,this.Na=a}za(e,r){if(e<r)throw new Error("high < low");const s=this.Yi.$t(),a=(e-r)*this.Fa()/s,i=new w3(this.Ia,[2,2.5,2]),o=new w3(this.Ia,[2,2,2.5]),l=new w3(this.Ia,[2.5,2,2]),d=[];return d.push(i.za(e,r,a),o.za(e,r,a),l.za(e,r,a)),(function(h){if(h.length<1)throw Error("array is empty");let f=h[0];for(let m=1;m<h.length;++m)h[m]<f&&(f=h[m]);return f})(d)}Wa(){const e=this.Yi,r=e.zt();if(r===null)return void(this.La=[]);const s=e.$t(),a=this.Oa(s-1,r),i=this.Oa(0,r),o=this.Yi.N().entireTextOnly?this.Ha()/2:0,l=o,d=s-1-o,h=Math.max(a,i),f=Math.min(a,i);if(h===f)return void(this.La=[]);const m=this.za(h,f);if(this.Ua(r,m,h,f,l,d),e.$a()&&this.qa(m,f,h)){const j=this.Yi.Ya();this.ja(r,m,l,d,j,2*j)}const x=this.La.map((j=>j.Ka)),b=this.Yi.Xa(x);for(let j=0;j<this.La.length;j++)this.La[j].Za=b[j]}Da(){return this.La}Ha(){return this.Yi.P()}Fa(){return Math.ceil(2.5*this.Ha())}Ua(e,r,s,a,i,o){const l=this.La,d=this.Yi;let h=s%r;h+=h<0?r:0;const f=s>=a?1:-1;let m=null,x=0;for(let b=s-h;b>a;b-=r){const j=this.Na(b,e,!0);m!==null&&Math.abs(j-m)<this.Fa()||j<i||j>o||(x<l.length?(l[x].Pa=j,l[x].Za=d.Ga(b),l[x].Ka=b):l.push({Pa:j,Za:d.Ga(b),Ka:b}),x++,m=j,d.Ja()&&(r=this.za(b*f,a)))}l.length=x}ja(e,r,s,a,i,o){const l=this.La,d=this.Qa(e,s,i,o),h=this.Qa(e,a,-o,-i),f=this.Na(0,e,!0)-this.Na(r,e,!0);l.length>0&&l[0].Pa-d.Pa<f/2&&l.shift(),l.length>0&&h.Pa-l[l.length-1].Pa<f/2&&l.pop(),l.unshift(d),l.push(h)}Qa(e,r,s,a){const i=(s+a)/2,o=this.Oa(r+s,e),l=this.Oa(r+a,e),d=Math.min(o,l),h=Math.max(o,l),f=Math.max(.1,this.za(h,d)),m=this.Oa(r+i,e),x=m-m%f,b=this.Na(x,e,!0);return{Za:this.Yi.Ga(x),Pa:b,Ka:x}}qa(e,r,s){let a=Dp(this.Yi.Qe());return this.Yi.Ja()&&(a=Ux(a,this.Yi.tl())),a.$e()-r<e&&s-a.qe()<e}}function hZ(t){return t.slice().sort(((e,r)=>xt(e.hs())-xt(r.hs())))}var vF;(function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"})(vF||(vF={}));const bF=new iZ,wF=new gk(100,1);class sAe{constructor(e,r,s,a,i){this.il=0,this.sl=null,this.Ge=null,this.nl=null,this.el={rl:!1,hl:null},this.al=!1,this.ll=0,this.ol=0,this._l=new Wa,this.ul=new Wa,this.cl=[],this.dl=null,this.fl=null,this.pl=null,this.vl=null,this.ml=null,this.ra=wF,this.wl=b3(null),this.gl=e,this.Ps=r,this.Ml=s,this.bl=a,this.Sl=i,this.xl=new yF(this,100,this.Cl.bind(this),this.Pl.bind(this))}ma(){return this.gl}N(){return this.Ps}hr(e){if(Vc(this.Ps,e),this.wa(),e.mode!==void 0&&this.yl({ie:e.mode}),e.scaleMargins!==void 0){const r=ic(e.scaleMargins.top),s=ic(e.scaleMargins.bottom);if(r<0||r>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${r}`);if(s<0||s>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${s}`);if(r+s>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${r+s}`);this.kl(),this.pl=null}}Tl(){return this.Ps.autoScale}Rl(){return this.al}Ja(){return this.Ps.mode===1}Le(){return this.Ps.mode===2}Dl(){return this.Ps.mode===3}tl(){return this.wl}ie(){return{sn:this.Ps.autoScale,Vl:this.Ps.invertScale,ie:this.Ps.mode}}yl(e){const r=this.ie();let s=null;e.sn!==void 0&&(this.Ps.autoScale=e.sn),e.ie!==void 0&&(this.Ps.mode=e.ie,e.ie!==2&&e.ie!==3||(this.Ps.autoScale=!0),this.el.rl=!1),r.ie===1&&e.ie!==r.ie&&((function(i,o){if(i===null)return!1;const l=Rb(i.$e(),o),d=Rb(i.qe(),o);return isFinite(l)&&isFinite(d)})(this.Ge,this.wl)?(s=Ux(this.Ge,this.wl),s!==null&&this.Bl(s)):this.Ps.autoScale=!0),e.ie===1&&e.ie!==r.ie&&(s=rb(this.Ge,this.wl),s!==null&&this.Bl(s));const a=r.ie!==this.Ps.mode;a&&(r.ie===2||this.Le())&&this.wa(),a&&(r.ie===3||this.Dl())&&this.wa(),e.Vl!==void 0&&r.Vl!==e.Vl&&(this.Ps.invertScale=e.Vl,this.Il()),this.ul.p(r,this.ie())}El(){return this.ul}P(){return this.Ml.fontSize}$t(){return this.il}Al(e){this.il!==e&&(this.il=e,this.kl(),this.pl=null)}zl(){if(this.sl)return this.sl;const e=this.$t()-this.Ll()-this.Ol();return this.sl=e,e}Qe(){return this.Nl(),this.Ge}Bl(e,r){const s=this.Ge;(r||s===null&&e!==null||s!==null&&!s.He(e))&&(this.pl=null,this.Ge=e)}Fl(e){this.Bl(e),this.Wl(e!==null)}Ki(){return this.Nl(),this.il===0||!this.Ge||this.Ge.Ki()}Hl(e){return this.Vl()?e:this.$t()-1-e}Nt(e,r){return this.Le()?e=Bx(e,r):this.Dl()&&(e=Ob(e,r)),this.Pl(e,r)}Ul(e,r,s){this.Nl();const a=this.Ol(),i=xt(this.Qe()),o=i.$e(),l=i.qe(),d=this.zl()-1,h=this.Vl(),f=d/(l-o),m=s===void 0?0:s.from,x=s===void 0?e.length:s.to,b=this.$l();for(let j=m;j<x;j++){const N=e[j],w=N.gt;if(isNaN(w))continue;let C=w;b!==null&&(C=b(N.gt,r));const T=a+f*(C-o),O=h?T:this.il-1-T;N.ut=O}}ql(e,r,s){this.Nl();const a=this.Ol(),i=xt(this.Qe()),o=i.$e(),l=i.qe(),d=this.zl()-1,h=this.Vl(),f=d/(l-o),m=s===void 0?0:s.from,x=s===void 0?e.length:s.to,b=this.$l();for(let j=m;j<x;j++){const N=e[j];let w=N.qh,C=N.Yh,T=N.jh,O=N.Kh;b!==null&&(w=b(N.qh,r),C=b(N.Yh,r),T=b(N.jh,r),O=b(N.Kh,r));let I=a+f*(w-o),P=h?I:this.il-1-I;N.Yl=P,I=a+f*(C-o),P=h?I:this.il-1-I,N.jl=P,I=a+f*(T-o),P=h?I:this.il-1-I,N.Kl=P,I=a+f*(O-o),P=h?I:this.il-1-I,N.Xl=P}}Ts(e,r){const s=this.Cl(e,r);return this.Zl(s,r)}Zl(e,r){let s=e;return this.Le()?s=(function(a,i){return i<0&&(a=-a),a/100*i+i})(s,r):this.Dl()&&(s=(function(a,i){return a-=100,i<0&&(a=-a),a/100*i+i})(s,r)),s}Ma(){return this.cl}Dt(){return this.fl||(this.fl=hZ(this.cl)),this.fl}Gl(e){this.cl.indexOf(e)===-1&&(this.cl.push(e),this.wa(),this.Jl())}Ql(e){const r=this.cl.indexOf(e);if(r===-1)throw new Error("source is not attached to scale");this.cl.splice(r,1),this.cl.length===0&&(this.yl({sn:!0}),this.Bl(null)),this.wa(),this.Jl()}zt(){let e=null;for(const r of this.cl){const s=r.zt();s!==null&&(e===null||s.Hh<e.Hh)&&(e=s)}return e===null?null:e.Wt}Vl(){return this.Ps.invertScale}Da(){const e=this.zt()===null;if(this.pl!==null&&(e||this.pl.io===e))return this.pl.Da;this.xl.Wa();const r=this.xl.Da();return this.pl={Da:r,io:e},this._l.p(),r}so(){return this._l}no(e){this.Le()||this.Dl()||this.vl===null&&this.nl===null&&(this.Ki()||(this.vl=this.il-e,this.nl=xt(this.Qe()).Ue()))}eo(e){if(this.Le()||this.Dl()||this.vl===null)return;this.yl({sn:!1}),(e=this.il-e)<0&&(e=0);let r=(this.vl+.2*(this.il-1))/(e+.2*(this.il-1));const s=xt(this.nl).Ue();r=Math.max(r,.1),s.je(r),this.Bl(s)}ro(){this.Le()||this.Dl()||(this.vl=null,this.nl=null)}ho(e){this.Tl()||this.ml===null&&this.nl===null&&(this.Ki()||(this.ml=e,this.nl=xt(this.Qe()).Ue()))}ao(e){if(this.Tl()||this.ml===null)return;const r=xt(this.Qe()).Ye()/(this.zl()-1);let s=e-this.ml;this.Vl()&&(s*=-1);const a=s*r,i=xt(this.nl).Ue();i.Ke(a),this.Bl(i,!0),this.pl=null}lo(){this.Tl()||this.ml!==null&&(this.ml=null,this.nl=null)}ea(){return this.ra||this.wa(),this.ra}Zi(e,r){switch(this.Ps.mode){case 2:return this.oo(Bx(e,r));case 3:return this.ea().format(Ob(e,r));default:return this.nr(e)}}Ga(e){switch(this.Ps.mode){case 2:return this.oo(e);case 3:return this.ea().format(e);default:return this.nr(e)}}Xa(e){switch(this.Ps.mode){case 2:return this._o(e);case 3:return this.ea().formatTickmarks(e);default:return this.uo(e)}}Dh(e){return this.nr(e,xt(this.dl).ea())}Vh(e,r){return e=Bx(e,r),this.oo(e,bF)}co(){return this.cl}do(e){this.el={hl:e,rl:!1}}Ns(){this.cl.forEach((e=>e.Ns()))}$a(){return this.Ps.ensureEdgeTickMarksVisible&&this.Tl()}Ya(){return this.P()/2}wa(){this.pl=null;let e=1/0;this.dl=null;for(const s of this.cl)s.hs()<e&&(e=s.hs(),this.dl=s);let r=100;this.dl!==null&&(r=Math.round(this.dl.nh())),this.ra=wF,this.Le()?(this.ra=bF,r=100):this.Dl()?(this.ra=new gk(100,1),r=100):this.dl!==null&&(this.ra=this.dl.ea()),this.xl=new yF(this,r,this.Cl.bind(this),this.Pl.bind(this)),this.xl.Wa()}Jl(){this.fl=null}fo(){return this.dl===null||this.Le()||this.Dl()?1:1/this.dl.nh()}Xi(){return this.Sl}Wl(e){this.al=e}Ll(){return this.Vl()?this.Ps.scaleMargins.bottom*this.$t()+this.ol:this.Ps.scaleMargins.top*this.$t()+this.ll}Ol(){return this.Vl()?this.Ps.scaleMargins.top*this.$t()+this.ll:this.Ps.scaleMargins.bottom*this.$t()+this.ol}Nl(){this.el.rl||(this.el.rl=!0,this.po())}kl(){this.sl=null}Pl(e,r){if(this.Nl(),this.Ki())return 0;e=this.Ja()&&e?C2(e,this.wl):e;const s=xt(this.Qe()),a=this.Ol()+(this.zl()-1)*(e-s.$e())/s.Ye();return this.Hl(a)}Cl(e,r){if(this.Nl(),this.Ki())return 0;const s=this.Hl(e),a=xt(this.Qe()),i=a.$e()+a.Ye()*((s-this.Ol())/(this.zl()-1));return this.Ja()?Rb(i,this.wl):i}Il(){this.pl=null,this.xl.Wa()}po(){if(this.Rl()&&!this.Tl())return;const e=this.el.hl;if(e===null)return;let r=null;const s=this.co();let a=0,i=0;for(const d of s){if(!d.Vt())continue;const h=d.zt();if(h===null)continue;const f=d.Mh(e.Uh(),e.bi());let m=f&&f.Qe();if(m!==null){switch(this.Ps.mode){case 1:m=rb(m,this.wl);break;case 2:m=rAe(m,h.Wt);break;case 3:m=nAe(m,h.Wt)}if(r=r===null?m:r.vn(xt(m)),f!==null){const x=f.tr();x!==null&&(a=Math.max(a,x.above),i=Math.max(i,x.below))}}}if(this.$a()&&(a=Math.max(a,this.Ya()),i=Math.max(i,this.Ya())),a===this.ll&&i===this.ol||(this.ll=a,this.ol=i,this.pl=null,this.kl()),r!==null){if(r.$e()===r.qe()){const d=5*this.fo();this.Ja()&&(r=Ux(r,this.wl)),r=new xl(r.$e()-d,r.qe()+d),this.Ja()&&(r=rb(r,this.wl))}if(this.Ja()){const d=Ux(r,this.wl),h=b3(d);if(o=h,l=this.wl,o.Va!==l.Va||o.Ba!==l.Ba){const f=this.nl!==null?Ux(this.nl,this.wl):null;this.wl=h,r=rb(d,h),f!==null&&(this.nl=rb(f,h))}}this.Bl(r)}else this.Ge===null&&(this.Bl(new xl(-.5,.5)),this.wl=b3(null));var o,l}$l(){return this.Le()?Bx:this.Dl()?Ob:this.Ja()?e=>C2(e,this.wl):null}vo(e,r,s){return r===void 0?(s===void 0&&(s=this.ea()),s.format(e)):r(e)}mo(e,r,s){return r===void 0?(s===void 0&&(s=this.ea()),s.formatTickmarks(e)):r(e)}nr(e,r){return this.vo(e,this.bl.priceFormatter,r)}uo(e,r){const s=this.bl.priceFormatter;return this.mo(e,this.bl.tickmarksPriceFormatter??(s?a=>a.map(s):void 0),r)}oo(e,r){return this.vo(e,this.bl.percentageFormatter,r)}_o(e,r){const s=this.bl.percentageFormatter;return this.mo(e,this.bl.tickmarksPercentageFormatter??(s?a=>a.map(s):void 0),r)}}function NF(t){return t instanceof xk}class jF{constructor(e,r){this.cl=[],this.wo=new Map,this.il=0,this.Mo=0,this.bo=1,this.fl=null,this.So=!1,this.xo=new Wa,this.yh=[],this.uh=e,this.ts=r,this.Co=new tAe(this);const s=r.N();this.Po=this.yo("left",s.leftPriceScale),this.ko=this.yo("right",s.rightPriceScale),this.Po.El().i(this.To.bind(this,this.Po),this),this.ko.El().i(this.To.bind(this,this.ko),this),this.Ro(s)}Ro(e){if(e.leftPriceScale&&this.Po.hr(e.leftPriceScale),e.rightPriceScale&&this.ko.hr(e.rightPriceScale),e.localization&&(this.Po.wa(),this.ko.wa()),e.overlayPriceScales){const r=Array.from(this.wo.values());for(const s of r){const a=xt(s[0].Ft());a.hr(e.overlayPriceScales),e.localization&&a.wa()}}}Do(e){switch(e){case"left":return this.Po;case"right":return this.ko}return this.wo.has(e)?ic(this.wo.get(e))[0].Ft():null}m(){this.Qt().Vo().u(this),this.Po.El().u(this),this.ko.El().u(this),this.cl.forEach((e=>{e.m&&e.m()})),this.yh=this.yh.filter((e=>{const r=e.oh();return r.detached&&r.detached(),!1})),this.xo.p()}Bo(){return this.bo}Io(e){this.bo=e}Qt(){return this.ts}Qi(){return this.Mo}$t(){return this.il}Eo(e){this.Mo=e,this.Ao()}Al(e){this.il=e,this.Po.Al(e),this.ko.Al(e),this.cl.forEach((r=>{if(this.Un(r)){const s=r.Ft();s!==null&&s.Al(e)}})),this.Ao()}zo(e){this.So=e}Lo(){return this.So}Oo(){return this.cl.filter(NF)}Ma(){return this.cl}Un(e){const r=e.Ft();return r===null||this.Po!==r&&this.ko!==r}Gl(e,r,s){this.No(e,r,s?e.hs():this.cl.length)}Ql(e,r){const s=this.cl.indexOf(e);xo(s!==-1,"removeDataSource: invalid data source"),this.cl.splice(s,1),r||this.cl.forEach(((o,l)=>o.ls(l)));const a=xt(e.Ft()).ma();if(this.wo.has(a)){const o=ic(this.wo.get(a)),l=o.indexOf(e);l!==-1&&(o.splice(l,1),o.length===0&&this.wo.delete(a))}const i=e.Ft();i&&i.Ma().indexOf(e)>=0&&(i.Ql(e),this.Fo(i)),this.fl=null}qn(e){return e===this.Po?"left":e===this.ko?"right":"overlay"}Wo(){return this.Po}Ho(){return this.ko}Uo(e,r){e.no(r)}$o(e,r){e.eo(r),this.Ao()}qo(e){e.ro()}Yo(e,r){e.ho(r)}jo(e,r){e.ao(r),this.Ao()}Ko(e){e.lo()}Ao(){this.cl.forEach((e=>{e.Ns()}))}ks(){let e=null;return this.ts.N().rightPriceScale.visible&&this.ko.Ma().length!==0?e=this.ko:this.ts.N().leftPriceScale.visible&&this.Po.Ma().length!==0?e=this.Po:this.cl.length!==0&&(e=this.cl[0].Ft()),e===null&&(e=this.ko),e}$n(){let e=null;return this.ts.N().rightPriceScale.visible?e=this.ko:this.ts.N().leftPriceScale.visible&&(e=this.Po),e}Fo(e){e!==null&&e.Tl()&&this.Xo(e)}Zo(e){const r=this.uh.Pe();e.yl({sn:!0}),r!==null&&e.do(r),this.Ao()}Go(){this.Xo(this.Po),this.Xo(this.ko)}Jo(){this.Fo(this.Po),this.Fo(this.ko),this.cl.forEach((e=>{this.Un(e)&&this.Fo(e.Ft())})),this.Ao(),this.ts.ar()}Dt(){return this.fl===null&&(this.fl=hZ(this.cl)),this.fl}Qo(e,r){r=Mb(r,0,this.cl.length-1);const s=this.cl.indexOf(e);xo(s!==-1,"setSeriesOrder: invalid data source"),this.cl.splice(s,1),this.cl.splice(r,0,e),this.cl.forEach(((a,i)=>a.ls(i))),this.fl=null;for(const a of[this.Po,this.ko])a.Jl(),a.wa();this.ts.ar()}Bt(){return this.Dt().filter(NF)}t_(){return this.xo}i_(){return this.Co}_a(e){this.yh.push(new z5e(e))}ua(e){this.yh=this.yh.filter((r=>r.oh()!==e)),e.detached&&e.detached(),this.ts.ar()}s_(){return this.yh}sa(e,r){return this.yh.map((s=>s.jn(e,r))).filter((s=>s!==null))}Xo(e){const r=e.co();if(r&&r.length>0&&!this.uh.Ki()){const s=this.uh.Pe();s!==null&&e.do(s)}e.Ns()}No(e,r,s){let a=this.Do(r);if(a===null&&(a=this.yo(r,this.ts.N().overlayPriceScales)),this.cl.splice(s,0,e),!pk(r)){const i=this.wo.get(r)||[];i.push(e),this.wo.set(r,i)}e.ls(s),a.Gl(e),e._s(a),this.Fo(a),this.fl=null}To(e,r,s){r.ie!==s.ie&&this.Xo(e)}yo(e,r){const s={visible:!0,autoScale:!0,...cm(r)},a=new sAe(e,s,this.ts.N().layout,this.ts.N().localization,this.ts.Xi());return a.Al(this.$t()),a}}function ON(t){return{n_:t.n_,e_:{Kn:t.r_.externalId},h_:t.r_.cursorStyle}}function aAe(t,e,r,s){for(const a of t){const i=a.Tt(s);if(i!==null&&i.jn){const o=i.jn(e,r);if(o!==null)return{a_:a,e_:o}}}return null}function iAe(t){return t.Fs!==void 0}function fZ(t,e,r){const s=[t,...t.Dt()],a=(function(i,o,l){var x;let d,h;for(const b of i){const j=((x=b.sa)==null?void 0:x.call(b,o,l))??[];for(const N of j)f=N.zOrder,m=d==null?void 0:d.zOrder,(!m||f==="top"&&m!=="top"||f==="normal"&&m==="bottom")&&(d=N,h=b)}var f,m;return d&&h?{r_:d,n_:h}:null})(s,e,r);if((a==null?void 0:a.r_.zOrder)==="top")return ON(a);for(const i of s){if(a&&a.n_===i&&a.r_.zOrder!=="bottom"&&!a.r_.isBackground)return ON(a);if(iAe(i)){const o=aAe(i.Fs(t),e,r,t);if(o!==null)return{n_:i,a_:o.a_,e_:o.e_}}if(a&&a.n_===i&&a.r_.zOrder!=="bottom"&&a.r_.isBackground)return ON(a)}return a!=null&&a.r_?ON(a):null}class oAe{constructor(e,r,s=50){this.yn=0,this.kn=1,this.Tn=1,this.Dn=new Map,this.Rn=new Map,this.l_=e,this.o_=r,this.Vn=s}__(e){const r=e.time,s=this.o_.cacheKey(r),a=this.Dn.get(s);if(a!==void 0)return a.u_;if(this.yn===this.Vn){const o=this.Rn.get(this.Tn);this.Rn.delete(this.Tn),this.Dn.delete(ic(o)),this.Tn++,this.yn--}const i=this.l_(e);return this.Dn.set(s,{u_:i,An:this.kn}),this.Rn.set(this.kn,s),this.yn++,this.kn++,i}}class Qx{constructor(e,r){xo(e<=r,"right should be >= left"),this.c_=e,this.d_=r}Uh(){return this.c_}bi(){return this.d_}f_(){return this.d_-this.c_+1}Te(e){return this.c_<=e&&e<=this.d_}He(e){return this.c_===e.Uh()&&this.d_===e.bi()}}function SF(t,e){return t===null||e===null?t===e:t.He(e)}class lAe{constructor(){this.p_=new Map,this.Dn=null,this.v_=!1}m_(e){this.v_=e,this.Dn=null}w_(e,r){this.g_(r),this.Dn=null;for(let s=r;s<e.length;++s){const a=e[s];let i=this.p_.get(a.timeWeight);i===void 0&&(i=[],this.p_.set(a.timeWeight,i)),i.push({index:s,time:a.time,weight:a.timeWeight,originalTime:a.originalTime})}}M_(e,r,s,a,i){const o=Math.ceil(r/e);return this.Dn!==null&&this.Dn.b_===o&&i===this.Dn.S_&&s===this.Dn.x_||(this.Dn={S_:i,x_:s,Da:this.C_(o,s,a),b_:o}),this.Dn.Da}g_(e){if(e===0)return void this.p_.clear();const r=[];this.p_.forEach(((s,a)=>{e<=s[0].index?r.push(a):s.splice(Hy(s,e,(i=>i.index<e)),1/0)}));for(const s of r)this.p_.delete(s)}C_(e,r,s){let a=[];const i=o=>!r||s.has(o.index);for(const o of Array.from(this.p_.keys()).sort(((l,d)=>d-l))){if(!this.p_.get(o))continue;const l=a;a=[];const d=l.length;let h=0;const f=ic(this.p_.get(o)),m=f.length;let x=1/0,b=-1/0;for(let j=0;j<m;j++){const N=f[j],w=N.index;for(;h<d;){const C=l[h],T=C.index;if(!(T<w&&i(C))){x=T;break}h++,a.push(C),b=T,x=1/0}if(x-w>=e&&w-b>=e&&i(N))a.push(N),b=w;else if(this.v_)return l}for(;h<d;h++)i(l[h])&&a.push(l[h])}return a}}class Jx{constructor(e){this.P_=e}y_(){return this.P_===null?null:new Qx(Math.floor(this.P_.Uh()),Math.ceil(this.P_.bi()))}k_(){return this.P_}static T_(){return new Jx(null)}}function cAe(t,e){return t.weight>e.weight?t:e}class dAe{constructor(e,r,s,a){this.Mo=0,this.R_=null,this.D_=[],this.ml=null,this.vl=null,this.V_=new lAe,this.B_=new Map,this.I_=Jx.T_(),this.E_=!0,this.A_=new Wa,this.z_=new Wa,this.L_=new Wa,this.O_=null,this.N_=null,this.F_=new Map,this.W_=-1,this.H_=[],this.Ps=r,this.bl=s,this.U_=r.rightOffset,this.q_=r.barSpacing,this.ts=e,this.Y_(r),this.o_=a,this.j_(),this.V_.m_(r.uniformDistribution),this.K_()}N(){return this.Ps}X_(e){Vc(this.bl,e),this.Z_(),this.j_()}hr(e,r){Vc(this.Ps,e),this.Ps.fixLeftEdge&&this.G_(),this.Ps.fixRightEdge&&this.J_(),e.barSpacing!==void 0&&this.ts.dn(e.barSpacing),e.rightOffset!==void 0&&this.ts.fn(e.rightOffset),this.Y_(e),e.minBarSpacing===void 0&&e.maxBarSpacing===void 0||this.ts.dn(e.barSpacing??this.q_),e.ignoreWhitespaceIndices!==void 0&&e.ignoreWhitespaceIndices!==this.Ps.ignoreWhitespaceIndices&&this.K_(),this.Z_(),this.j_(),this.L_.p()}Rs(e){var r;return((r=this.D_[e])==null?void 0:r.time)??null}ss(e){return this.D_[e]??null}Q_(e,r){if(this.D_.length<1)return null;if(this.o_.key(e)>this.o_.key(this.D_[this.D_.length-1].time))return r?this.D_.length-1:null;const s=Hy(this.D_,this.o_.key(e),((a,i)=>this.o_.key(a.time)<i));return this.o_.key(e)<this.o_.key(this.D_[s].time)?r?s:null:s}Ki(){return this.Mo===0||this.D_.length===0||this.R_===null}tu(){return this.D_.length>0}Pe(){return this.iu(),this.I_.y_()}su(){return this.iu(),this.I_.k_()}nu(){const e=this.Pe();if(e===null)return null;const r={from:e.Uh(),to:e.bi()};return this.eu(r)}eu(e){const r=Math.round(e.from),s=Math.round(e.to),a=xt(this.ru()),i=xt(this.hu());return{from:xt(this.ss(Math.max(a,r))),to:xt(this.ss(Math.min(i,s)))}}au(e){return{from:xt(this.Q_(e.from,!0)),to:xt(this.Q_(e.to,!0))}}Qi(){return this.Mo}Eo(e){if(!isFinite(e)||e<=0||this.Mo===e)return;const r=this.su(),s=this.Mo;if(this.Mo=e,this.E_=!0,this.Ps.lockVisibleTimeRangeOnResize&&s!==0){const a=this.q_*e/s;this.q_=a}if(this.Ps.fixLeftEdge&&r!==null&&r.Uh()<=0){const a=s-e;this.U_-=Math.round(a/this.q_)+1,this.E_=!0}this.lu(),this.ou()}qt(e){if(this.Ki()||!Aw(e))return 0;const r=this._u()+this.U_-e;return this.Mo-(r+.5)*this.q_-1}uu(e,r){const s=this._u(),a=r===void 0?0:r.from,i=r===void 0?e.length:r.to;for(let o=a;o<i;o++){const l=e[o].wt,d=s+this.U_-l,h=this.Mo-(d+.5)*this.q_-1;e[o]._t=h}}cu(e,r){const s=Math.ceil(this.du(e));return r&&this.Ps.ignoreWhitespaceIndices&&!this.fu(s)?this.pu(s):s}fn(e){this.E_=!0,this.U_=e,this.ou(),this.ts.vu(),this.ts.ar()}mu(){return this.q_}dn(e){const r=this.q_;if(this.wu(e),this.Ps.rightOffsetPixels!==void 0&&r!==0){const s=this.U_*r/this.q_;this.U_=s}this.ou(),this.ts.vu(),this.ts.ar()}gu(){return this.U_}Da(){if(this.Ki())return null;if(this.N_!==null)return this.N_;const e=this.q_,r=5*(this.ts.N().layout.fontSize+4)/8*(this.Ps.tickMarkMaxCharacterLength||8),s=Math.round(r/e),a=xt(this.Pe()),i=Math.max(a.Uh(),a.Uh()-s),o=Math.max(a.bi(),a.bi()-s),l=this.V_.M_(e,r,this.Ps.ignoreWhitespaceIndices,this.F_,this.W_),d=this.ru()+s,h=this.hu()-s,f=this.Mu(),m=this.Ps.fixLeftEdge||f,x=this.Ps.fixRightEdge||f;let b=0;for(const j of l){if(!(i<=j.index&&j.index<=o))continue;let N;b<this.H_.length?(N=this.H_[b],N.coord=this.qt(j.index),N.label=this.bu(j),N.weight=j.weight):(N={needAlignCoordinate:!1,coord:this.qt(j.index),label:this.bu(j),weight:j.weight},this.H_.push(N)),this.q_>r/2&&!f?N.needAlignCoordinate=!1:N.needAlignCoordinate=m&&j.index<=d||x&&j.index>=h,b++}return this.H_.length=b,this.N_=this.H_,this.H_}Su(){let e;this.E_=!0,this.dn(this.Ps.barSpacing),e=this.Ps.rightOffsetPixels!==void 0?this.Ps.rightOffsetPixels/this.mu():this.Ps.rightOffset,this.fn(e)}xu(e){this.E_=!0,this.R_=e,this.ou(),this.G_()}Cu(e,r){const s=this.du(e),a=this.mu(),i=a+r*(a/10);this.dn(i),this.Ps.rightBarStaysOnScroll||this.fn(this.gu()+(s-this.du(e)))}no(e){this.ml&&this.lo(),this.vl===null&&this.O_===null&&(this.Ki()||(this.vl=e,this.Pu()))}eo(e){if(this.O_===null)return;const r=Mb(this.Mo-e,0,this.Mo),s=Mb(this.Mo-xt(this.vl),0,this.Mo);r!==0&&s!==0&&this.dn(this.O_.mu*r/s)}ro(){this.vl!==null&&(this.vl=null,this.yu())}ho(e){this.ml===null&&this.O_===null&&(this.Ki()||(this.ml=e,this.Pu()))}ao(e){if(this.ml===null)return;const r=(this.ml-e)/this.mu();this.U_=xt(this.O_).gu+r,this.E_=!0,this.ou()}lo(){this.ml!==null&&(this.ml=null,this.yu())}ku(){this.Tu(this.Ps.rightOffset)}Tu(e,r=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(r)||r<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const s=this.U_,a=performance.now();this.ts._n({Ru:i=>(i-a)/r>=1,Du:i=>{const o=(i-a)/r;return o>=1?e:s+(e-s)*o}})}yt(e,r){this.E_=!0,this.D_=e,this.V_.w_(e,r),this.ou()}Vu(){return this.A_}Bu(){return this.z_}Iu(){return this.L_}_u(){return this.R_||0}Eu(e,r){const s=e.f_(),a=r&&this.Ps.rightOffsetPixels||0;this.wu((this.Mo-a)/s),this.U_=e.bi()-this._u(),r&&(this.U_=a?a/this.mu():this.Ps.rightOffset),this.ou(),this.E_=!0,this.ts.vu(),this.ts.ar()}Au(){const e=this.ru(),r=this.hu();e!==null&&r!==null&&this.Eu(new Qx(e,r),!0)}zu(e){const r=new Qx(e.from,e.to);this.Eu(r)}ns(e){return this.bl.timeFormatter!==void 0?this.bl.timeFormatter(e.originalTime):this.o_.formatHorzItem(e.time)}K_(){if(!this.Ps.ignoreWhitespaceIndices)return;this.F_.clear();const e=this.ts.js();for(const r of e)for(const s of r.va())this.F_.set(s,!0);this.W_++}Mu(){const e=this.ts.N().handleScroll,r=this.ts.N().handleScale;return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||r.axisDoubleClickReset.time||r.axisPressedMouseMove.time||r.mouseWheel||r.pinch)}ru(){return this.D_.length===0?null:0}hu(){return this.D_.length===0?null:this.D_.length-1}Lu(e){return(this.Mo-1-e)/this.q_}du(e){const r=this.Lu(e),s=this._u()+this.U_-r;return Math.round(1e6*s)/1e6}wu(e){const r=this.q_;this.q_=e,this.lu(),r!==this.q_&&(this.E_=!0,this.Ou())}iu(){if(!this.E_)return;if(this.E_=!1,this.Ki())return void this.Nu(Jx.T_());const e=this._u(),r=this.Mo/this.q_,s=this.U_+e,a=new Qx(s-r+1,s);this.Nu(new Jx(a))}lu(){const e=Mb(this.q_,this.Fu(),this.Wu());this.q_!==e&&(this.q_=e,this.E_=!0)}Wu(){return this.Ps.maxBarSpacing>0?this.Ps.maxBarSpacing:.5*this.Mo}Fu(){return this.Ps.fixLeftEdge&&this.Ps.fixRightEdge&&this.D_.length!==0?this.Mo/this.D_.length:this.Ps.minBarSpacing}ou(){const e=this.Hu();e!==null&&this.U_<e&&(this.U_=e,this.E_=!0);const r=this.Uu();this.U_>r&&(this.U_=r,this.E_=!0)}Hu(){const e=this.ru(),r=this.R_;return e===null||r===null?null:e-r-1+(this.Ps.fixLeftEdge?this.Mo/this.q_:Math.min(2,this.D_.length))}Uu(){return this.Ps.fixRightEdge?0:this.Mo/this.q_-Math.min(2,this.D_.length)}Pu(){this.O_={mu:this.mu(),gu:this.gu()}}yu(){this.O_=null}bu(e){let r=this.B_.get(e.weight);return r===void 0&&(r=new oAe((s=>this.$u(s)),this.o_),this.B_.set(e.weight,r)),r.__(e)}$u(e){return this.o_.formatTickmark(e,this.bl)}Nu(e){const r=this.I_;this.I_=e,SF(r.y_(),this.I_.y_())||this.A_.p(),SF(r.k_(),this.I_.k_())||this.z_.p(),this.Ou()}Ou(){this.N_=null}Z_(){this.Ou(),this.B_.clear()}j_(){this.o_.updateFormatter(this.bl)}G_(){if(!this.Ps.fixLeftEdge)return;const e=this.ru();if(e===null)return;const r=this.Pe();if(r===null)return;const s=r.Uh()-e;if(s<0){const a=this.U_-s-1;this.fn(a)}this.lu()}J_(){this.ou(),this.lu()}fu(e){return!this.Ps.ignoreWhitespaceIndices||this.F_.get(e)||!1}pu(e){const r=(function*(a){const i=Math.round(a),o=i<a;let l=1;for(;;)o?(yield i+l,yield i-l):(yield i-l,yield i+l),l++})(e),s=this.hu();for(;s;){const a=r.next().value;if(this.F_.get(a))return a;if(a<0||a>s)break}return e}Y_(e){if(e.rightOffsetPixels!==void 0){const r=e.rightOffsetPixels/(e.barSpacing||this.q_);this.ts.fn(r)}}}var kF,CF,EF,E2,TF;(function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"})(kF||(kF={}));class uAe{constructor(e,r,s){this.qu=[],this.Yu=[],this.Mo=0,this.ju=null,this.Ku=new Wa,this.Xu=new Wa,this.Zu=null,this.Gu=e,this.Ps=r,this.o_=s,this.Sl=new d5e(this.Ps.layout.colorParsers),this.Ju=new c5e(this),this.uh=new dAe(this,r.timeScale,this.Ps.localization,s),this.Ct=new N5e(this,r.crosshair),this.Qu=new J5e(r.crosshair),r.addDefaultPane&&(this.tc(0),this.qu[0].Io(2)),this.sc=this.nc(0),this.ec=this.nc(1)}Ih(){this.rc(mo.gn())}ar(){this.rc(mo.wn())}Zh(){this.rc(new mo(1))}Eh(e){const r=this.hc(e);this.rc(r)}ac(){return this.ju}lc(e){var s,a,i,o;if(((s=this.ju)==null?void 0:s.n_)===(e==null?void 0:e.n_)&&((i=(a=this.ju)==null?void 0:a.e_)==null?void 0:i.Kn)===((o=e==null?void 0:e.e_)==null?void 0:o.Kn))return;const r=this.ju;this.ju=e,r!==null&&this.Eh(r.n_),e!==null&&e.n_!==(r==null?void 0:r.n_)&&this.Eh(e.n_)}N(){return this.Ps}hr(e){Vc(this.Ps,e),this.qu.forEach((r=>r.Ro(e))),e.timeScale!==void 0&&this.uh.hr(e.timeScale),e.localization!==void 0&&this.uh.X_(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.Ku.p(),this.sc=this.nc(0),this.ec=this.nc(1),this.Ih()}oc(e,r,s=0){const a=this.qu[s];if(a===void 0)return;if(e==="left")return Vc(this.Ps,{leftPriceScale:r}),a.Ro({leftPriceScale:r}),this.Ku.p(),void this.Ih();if(e==="right")return Vc(this.Ps,{rightPriceScale:r}),a.Ro({rightPriceScale:r}),this.Ku.p(),void this.Ih();const i=this._c(e,s);i!==null&&(i.Ft.hr(r),this.Ku.p())}_c(e,r){const s=this.qu[r];if(s===void 0)return null;const a=s.Do(e);return a!==null?{Us:s,Ft:a}:null}Et(){return this.uh}$s(){return this.qu}uc(){return this.Ct}cc(){return this.Xu}dc(e,r){e.Al(r),this.vu()}Eo(e){this.Mo=e,this.uh.Eo(this.Mo),this.qu.forEach((r=>r.Eo(e))),this.vu()}fc(e){this.qu.length!==1&&(xo(e>=0&&e<this.qu.length,"Invalid pane index"),this.qu.splice(e,1),this.Ih())}vc(e,r){if(this.qu.length<2)return;xo(e>=0&&e<this.qu.length,"Invalid pane index");const s=this.qu[e],a=this.qu.reduce(((m,x)=>m+x.Bo()),0),i=this.qu.reduce(((m,x)=>m+x.$t()),0),o=i-30*(this.qu.length-1);r=Math.min(o,Math.max(30,r));const l=a/i,d=s.$t();s.Io(r*l);let h=r-d,f=this.qu.length-1;for(const m of this.qu)if(m!==s){const x=Math.min(o,Math.max(30,m.$t()-h/f));h-=m.$t()-x,f-=1;const b=x*l;m.Io(b)}this.Ih()}mc(e,r){xo(e>=0&&e<this.qu.length&&r>=0&&r<this.qu.length,"Invalid pane index");const s=this.qu[e],a=this.qu[r];this.qu[e]=a,this.qu[r]=s,this.Ih()}wc(e,r){if(xo(e>=0&&e<this.qu.length&&r>=0&&r<this.qu.length,"Invalid pane index"),e===r)return;const[s]=this.qu.splice(e,1);this.qu.splice(r,0,s),this.Ih()}Uo(e,r,s){e.Uo(r,s)}$o(e,r,s){e.$o(r,s),this.Ah(),this.rc(this.gc(e,2))}qo(e,r){e.qo(r),this.rc(this.gc(e,2))}Yo(e,r,s){r.Tl()||e.Yo(r,s)}jo(e,r,s){r.Tl()||(e.jo(r,s),this.Ah(),this.rc(this.gc(e,2)))}Ko(e,r){r.Tl()||(e.Ko(r),this.rc(this.gc(e,2)))}Zo(e,r){e.Zo(r),this.rc(this.gc(e,2))}Mc(e){this.uh.no(e)}bc(e,r){const s=this.Et();if(s.Ki()||r===0)return;const a=s.Qi();e=Math.max(1,Math.min(e,a)),s.Cu(e,r),this.vu()}Sc(e){this.xc(0),this.Cc(e),this.Pc()}yc(e){this.uh.eo(e),this.vu()}kc(){this.uh.ro(),this.ar()}xc(e){this.uh.ho(e)}Cc(e){this.uh.ao(e),this.vu()}Pc(){this.uh.lo(),this.ar()}js(){return this.Yu}Tc(e,r,s,a,i){this.Ct.Vs(e,r);let o=NaN,l=this.uh.cu(e,!0);const d=this.uh.Pe();d!==null&&(l=Math.min(Math.max(d.Uh(),l),d.bi()));const h=a.ks(),f=h.zt();if(f!==null&&(o=h.Ts(r,f)),o=this.Qu.ga(o,l,a),this.Ct.As(l,o,a),this.Zh(),!i){const m=fZ(a,e,r);this.lc(m&&{n_:m.n_,e_:m.e_,h_:m.h_||null}),this.Xu.p(this.Ct.It(),{x:e,y:r},s)}}Rc(e,r,s){const a=s.ks(),i=a.zt(),o=a.Nt(e,xt(i)),l=this.uh.Q_(r,!0),d=this.uh.qt(xt(l));this.Tc(d,o,null,s,!0)}Dc(e){this.uc().Ls(),this.Zh(),e||this.Xu.p(null,null,null)}Ah(){const e=this.Ct.Us();if(e!==null){const r=this.Ct.Is(),s=this.Ct.Es();this.Tc(r,s,null,e)}this.Ct.Ns()}Vc(e,r,s){const a=this.uh.Rs(0);r!==void 0&&s!==void 0&&this.uh.yt(r,s);const i=this.uh.Rs(0),o=this.uh._u(),l=this.uh.Pe();if(l!==null&&a!==null&&i!==null){const d=l.Te(o),h=this.o_.key(a)>this.o_.key(i),f=e!==null&&e>o&&!h,m=this.uh.N().allowShiftVisibleRangeOnWhitespaceReplacement,x=d&&(s!==void 0||m)&&this.uh.N().shiftVisibleRangeOnNewBar;if(f&&!x){const b=e-o;this.uh.fn(this.uh.gu()-b)}}this.uh.xu(e)}Lh(e){e!==null&&e.Jo()}Hn(e){if((function(s){return s instanceof jF})(e))return e;const r=this.qu.find((s=>s.Dt().includes(e)));return r===void 0?null:r}vu(){this.qu.forEach((e=>e.Jo())),this.Ah()}m(){this.qu.forEach((e=>e.m())),this.qu.length=0,this.Ps.localization.priceFormatter=void 0,this.Ps.localization.percentageFormatter=void 0,this.Ps.localization.timeFormatter=void 0}Bc(){return this.Ju}Yn(){return this.Ju.N()}Vo(){return this.Ku}Ic(e,r){const s=this.tc(r);this.Ec(e,s),this.Yu.push(e),this.Yu.length===1?this.Ih():this.ar()}Ac(e){const r=this.Hn(e),s=this.Yu.indexOf(e);xo(s!==-1,"Series not found");const a=xt(r);this.Yu.splice(s,1),a.Ql(e),e.m&&e.m(),this.uh.K_(),this.zc(a)}Bh(e,r){const s=xt(this.Hn(e));s.Ql(e,!0),s.Gl(e,r,!0)}Au(){const e=mo.wn();e.rn(),this.rc(e)}Lc(e){const r=mo.wn();r.ln(e),this.rc(r)}cn(){const e=mo.wn();e.cn(),this.rc(e)}dn(e){const r=mo.wn();r.dn(e),this.rc(r)}fn(e){const r=mo.wn();r.fn(e),this.rc(r)}_n(e){const r=mo.wn();r._n(e),this.rc(r)}hn(){const e=mo.wn();e.hn(),this.rc(e)}Oc(){return this.Ps.rightPriceScale.visible?"right":"left"}Nc(e,r){if(xo(r>=0,"Index should be greater or equal to 0"),r===this.Fc(e))return;const s=xt(this.Hn(e));s.Ql(e);const a=this.tc(r);this.Ec(e,a),s.Ma().length===0&&this.zc(s),this.Ih()}Wc(){return this.ec}$(){return this.sc}Ut(e){const r=this.ec,s=this.sc;if(r===s)return r;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.Zu===null||this.Zu.mr!==s||this.Zu.wr!==r)this.Zu={mr:s,wr:r,Hc:new Map};else{const i=this.Zu.Hc.get(e);if(i!==void 0)return i}const a=this.Sl.tt(s,r,e/100);return this.Zu.Hc.set(e,a),a}Uc(e){return this.qu.indexOf(e)}Xi(){return this.Sl}$c(){return this.qc()}qc(e){const r=new jF(this.uh,this);this.qu.push(r);const s=e??this.qu.length-1,a=mo.gn();return a.Qs(s,{tn:0,sn:!0}),this.rc(a),r}tc(e){return xo(e>=0,"Index should be greater or equal to 0"),(e=Math.min(this.qu.length,e))<this.qu.length?this.qu[e]:this.qc(e)}Fc(e){return this.qu.findIndex((r=>r.Oo().includes(e)))}gc(e,r){const s=new mo(r);if(e!==null){const a=this.qu.indexOf(e);s.Qs(a,{tn:r})}return s}hc(e,r){return r===void 0&&(r=2),this.gc(this.Hn(e),r)}rc(e){this.Gu&&this.Gu(e),this.qu.forEach((r=>r.i_().lr().yt()))}Ec(e,r){const s=e.N().priceScaleId,a=s!==void 0?s:this.Oc();r.Gl(e,a),pk(a)||e.hr(e.N())}nc(e){const r=this.Ps.layout;return r.background.type==="gradient"?e===0?r.background.topColor:r.background.bottomColor:r.background.color}zc(e){!e.Lo()&&e.Ma().length===0&&this.qu.length>1&&this.qu.splice(this.Uc(e),1)}}function mZ(t){if(t>=1)return 0;let e=0;for(;e<8;e++){const r=Math.round(t);if(Math.abs(r-t)<1e-8)return e;t*=10}return e}function G5(t){return!_0(t)&&!E1(t)}function pZ(t){return _0(t)}(function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"})(CF||(CF={})),(function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"})(EF||(EF={})),(function(t){t.Solid="solid",t.VerticalGradient="gradient"})(E2||(E2={})),(function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"})(TF||(TF={}));const PF=t=>t.getUTCFullYear();function hAe(t,e,r){return e.replace(/yyyy/g,(s=>dm(PF(s),4))(t)).replace(/yy/g,(s=>dm(PF(s)%100,2))(t)).replace(/MMMM/g,((s,a)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(a,{month:"long"}))(t,r)).replace(/MMM/g,((s,a)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(a,{month:"short"}))(t,r)).replace(/MM/g,(s=>dm((a=>a.getUTCMonth()+1)(s),2))(t)).replace(/dd/g,(s=>dm((a=>a.getUTCDate())(s),2))(t))}class gZ{constructor(e="yyyy-MM-dd",r="default"){this.Yc=e,this.jc=r}__(e){return hAe(e,this.Yc,this.jc)}}class fAe{constructor(e){this.Kc=e||"%h:%m:%s"}__(e){return this.Kc.replace("%h",dm(e.getUTCHours(),2)).replace("%m",dm(e.getUTCMinutes(),2)).replace("%s",dm(e.getUTCSeconds(),2))}}const mAe={Xc:"yyyy-MM-dd",Zc:"%h:%m:%s",Gc:" ",Jc:"default"};class pAe{constructor(e={}){const r={...mAe,...e};this.Qc=new gZ(r.Xc,r.Jc),this.td=new fAe(r.Zc),this.sd=r.Gc}__(e){return`${this.Qc.__(e)}${this.sd}${this.td.__(e)}`}}function RN(t){return 60*t*60*1e3}function N3(t){return 60*t*1e3}const DN=[{nd:(AF=1,1e3*AF),ed:10},{nd:N3(1),ed:20},{nd:N3(5),ed:21},{nd:N3(30),ed:22},{nd:RN(1),ed:30},{nd:RN(3),ed:31},{nd:RN(6),ed:32},{nd:RN(12),ed:33}];var AF;function _F(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let r=DN.length-1;r>=0;--r)if(Math.floor(e.getTime()/DN[r].nd)!==Math.floor(t.getTime()/DN[r].nd))return DN[r].ed;return 0}function j3(t){let e=t;if(E1(t)&&(e=xI(t)),!G5(e))throw new Error("time must be of type BusinessDay");const r=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{rd:Math.round(r.getTime()/1e3),hd:e}}function IF(t){if(!pZ(t))throw new Error("time must be of type isUTCTimestamp");return{rd:t}}function xI(t){const e=new Date(t);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function MF(t){E1(t.time)&&(t.time=xI(t.time))}class OF{options(){return this.Ps}setOptions(e){this.Ps=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?(function(r){r.forEach(MF)})(e):MF(e)}createConverterToInternalObj(e){return xt((function(r){return r.length===0?null:G5(r[0].time)||E1(r[0].time)?j3:IF})(e))}key(e){return typeof e=="object"&&"rd"in e?e.rd:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const r=e;return r.hd===void 0?new Date(1e3*r.rd).getTime():new Date(Date.UTC(r.hd.year,r.hd.month-1,r.hd.day)).getTime()}convertHorzItemToInternal(e){return pZ(r=e)?IF(r):G5(r)?j3(r):j3(xI(r));var r}updateFormatter(e){if(!this.Ps)return;const r=e.dateFormat;this.Ps.timeScale.timeVisible?this.ad=new pAe({Xc:r,Zc:this.Ps.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",Gc:"   ",Jc:e.locale}):this.ad=new gZ(r,e.locale)}formatHorzItem(e){const r=e;return this.ad.__(new Date(1e3*r.rd))}formatTickmark(e,r){const s=(function(i,o,l){switch(i){case 0:case 10:return o?l?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return o?3:2;case 50:return 2;case 60:return 1;case 70:return 0}})(e.weight,this.Ps.timeScale.timeVisible,this.Ps.timeScale.secondsVisible),a=this.Ps.timeScale;if(a.tickMarkFormatter!==void 0){const i=a.tickMarkFormatter(e.originalTime,s,r.locale);if(i!==null)return i}return(function(i,o,l){const d={};switch(o){case 0:d.year="numeric";break;case 1:d.month="short";break;case 2:d.day="numeric";break;case 3:d.hour12=!1,d.hour="2-digit",d.minute="2-digit";break;case 4:d.hour12=!1,d.hour="2-digit",d.minute="2-digit",d.second="2-digit"}const h=i.hd===void 0?new Date(1e3*i.rd):new Date(Date.UTC(i.hd.year,i.hd.month-1,i.hd.day));return new Date(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate(),h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()).toLocaleString(l,d)})(e.time,s,r.locale)}maxTickMarkWeight(e){let r=e.reduce(cAe,e[0]).weight;return r>30&&r<50&&(r=30),r}fillWeightsForPoints(e,r){(function(s,a=0){if(s.length===0)return;let i=a===0?null:s[a-1].time.rd,o=i!==null?new Date(1e3*i):null,l=0;for(let d=a;d<s.length;++d){const h=s[d],f=new Date(1e3*h.time.rd);o!==null&&(h.timeWeight=_F(f,o)),l+=h.time.rd-(i||h.time.rd),i=h.time.rd,o=f}if(a===0&&s.length>1){const d=Math.ceil(l/(s.length-1)),h=new Date(1e3*(s[0].time.rd-d));s[0].timeWeight=_F(new Date(1e3*s[0].time.rd),h)}})(e,r)}static ld(e){return Vc({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const Wy=typeof window<"u";function RF(){return!!Wy&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function S3(){return!!Wy&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function X5(t){return t+t%2}function gAe(t){Wy&&window.chrome!==void 0&&t.addEventListener("mousedown",(e=>{if(e.button===1)return e.preventDefault(),!1}))}class yk{constructor(e,r,s){this.od=0,this._d=null,this.ud={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.dd=0,this.fd=null,this.pd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.vd=null,this.md=!1,this.wd=null,this.gd=null,this.Md=!1,this.bd=!1,this.Sd=!1,this.xd=null,this.Cd=null,this.Pd=null,this.yd=null,this.kd=null,this.Td=null,this.Rd=null,this.Dd=0,this.Vd=!1,this.Bd=!1,this.Id=!1,this.Ed=0,this.Ad=null,this.zd=!S3(),this.Ld=a=>{this.Od(a)},this.Nd=a=>{if(this.Fd(a)){const i=this.Wd(a);if(++this.dd,this.fd&&this.dd>1){const{Hd:o}=this.Ud(Fh(a),this.pd);o<30&&!this.Sd&&this.$d(i,this.Yd.qd),this.jd()}}else{const i=this.Wd(a);if(++this.od,this._d&&this.od>1){const{Hd:o}=this.Ud(Fh(a),this.ud);o<5&&!this.bd&&this.Kd(i,this.Yd.Xd),this.Zd()}}},this.Gd=e,this.Yd=r,this.Ps=s,this.Jd()}m(){this.xd!==null&&(this.xd(),this.xd=null),this.Cd!==null&&(this.Cd(),this.Cd=null),this.yd!==null&&(this.yd(),this.yd=null),this.kd!==null&&(this.kd(),this.kd=null),this.Td!==null&&(this.Td(),this.Td=null),this.Pd!==null&&(this.Pd(),this.Pd=null),this.Qd(),this.Zd()}tf(e){this.yd&&this.yd();const r=this.if.bind(this);if(this.yd=()=>{this.Gd.removeEventListener("mousemove",r)},this.Gd.addEventListener("mousemove",r),this.Fd(e))return;const s=this.Wd(e);this.Kd(s,this.Yd.sf),this.zd=!0}Zd(){this._d!==null&&clearTimeout(this._d),this.od=0,this._d=null,this.ud={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}jd(){this.fd!==null&&clearTimeout(this.fd),this.dd=0,this.fd=null,this.pd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}if(e){if(this.Id||this.gd!==null||this.Fd(e))return;const r=this.Wd(e);this.Kd(r,this.Yd.nf),this.zd=!0}ef(e){const r=k3(e.changedTouches,xt(this.Ad));if(r===null||(this.Ed=$N(e),this.Rd!==null)||this.Bd)return;this.Vd=!0;const s=this.Ud(Fh(r),xt(this.gd)),{rf:a,hf:i,Hd:o}=s;if(this.Md||!(o<5)){if(!this.Md){const l=.5*a,d=i>=l&&!this.Ps.af(),h=l>i&&!this.Ps.lf();d||h||(this.Bd=!0),this.Md=!0,this.Sd=!0,this.Qd(),this.jd()}if(!this.Bd){const l=this.Wd(e,r);this.$d(l,this.Yd._f),Ex(e)}}}uf(e){if(e.button!==0)return;const r=this.Ud(Fh(e),xt(this.wd)),{Hd:s}=r;if(s>=5&&(this.bd=!0,this.Zd()),this.bd){const a=this.Wd(e);this.Kd(a,this.Yd.cf)}}Ud(e,r){const s=Math.abs(r._t-e._t),a=Math.abs(r.ut-e.ut);return{rf:s,hf:a,Hd:s+a}}df(e){let r=k3(e.changedTouches,xt(this.Ad));if(r===null&&e.touches.length===0&&(r=e.changedTouches[0]),r===null)return;this.Ad=null,this.Ed=$N(e),this.Qd(),this.gd=null,this.Td&&(this.Td(),this.Td=null);const s=this.Wd(e,r);if(this.$d(s,this.Yd.ff),++this.dd,this.fd&&this.dd>1){const{Hd:a}=this.Ud(Fh(r),this.pd);a<30&&!this.Sd&&this.$d(s,this.Yd.qd),this.jd()}else this.Sd||(this.$d(s,this.Yd.pf),this.Yd.pf&&Ex(e));this.dd===0&&Ex(e),e.touches.length===0&&this.md&&(this.md=!1,Ex(e))}Od(e){if(e.button!==0)return;const r=this.Wd(e);if(this.wd=null,this.Id=!1,this.kd&&(this.kd(),this.kd=null),RF()&&this.Gd.ownerDocument.documentElement.removeEventListener("mouseleave",this.Ld),!this.Fd(e))if(this.Kd(r,this.Yd.vf),++this.od,this._d&&this.od>1){const{Hd:s}=this.Ud(Fh(e),this.ud);s<5&&!this.bd&&this.Kd(r,this.Yd.Xd),this.Zd()}else this.bd||this.Kd(r,this.Yd.mf)}Qd(){this.vd!==null&&(clearTimeout(this.vd),this.vd=null)}wf(e){if(this.Ad!==null)return;const r=e.changedTouches[0];this.Ad=r.identifier,this.Ed=$N(e);const s=this.Gd.ownerDocument.documentElement;this.Sd=!1,this.Md=!1,this.Bd=!1,this.gd=Fh(r),this.Td&&(this.Td(),this.Td=null);{const i=this.ef.bind(this),o=this.df.bind(this);this.Td=()=>{s.removeEventListener("touchmove",i),s.removeEventListener("touchend",o)},s.addEventListener("touchmove",i,{passive:!1}),s.addEventListener("touchend",o,{passive:!1}),this.Qd(),this.vd=setTimeout(this.gf.bind(this,e),240)}const a=this.Wd(e,r);this.$d(a,this.Yd.Mf),this.fd||(this.dd=0,this.fd=setTimeout(this.jd.bind(this),500),this.pd=Fh(r))}bf(e){if(e.button!==0)return;const r=this.Gd.ownerDocument.documentElement;RF()&&r.addEventListener("mouseleave",this.Ld),this.bd=!1,this.wd=Fh(e),this.kd&&(this.kd(),this.kd=null);{const a=this.uf.bind(this),i=this.Od.bind(this);this.kd=()=>{r.removeEventListener("mousemove",a),r.removeEventListener("mouseup",i)},r.addEventListener("mousemove",a),r.addEventListener("mouseup",i)}if(this.Id=!0,this.Fd(e))return;const s=this.Wd(e);this.Kd(s,this.Yd.Sf),this._d||(this.od=0,this._d=setTimeout(this.Zd.bind(this),500),this.ud=Fh(e))}Jd(){this.Gd.addEventListener("mouseenter",this.tf.bind(this)),this.Gd.addEventListener("touchcancel",this.Qd.bind(this));{const e=this.Gd.ownerDocument,r=s=>{this.Yd.xf&&(s.composed&&this.Gd.contains(s.composedPath()[0])||s.target&&this.Gd.contains(s.target)||this.Yd.xf())};this.Cd=()=>{e.removeEventListener("touchstart",r)},this.xd=()=>{e.removeEventListener("mousedown",r)},e.addEventListener("mousedown",r),e.addEventListener("touchstart",r,{passive:!0})}S3()&&(this.Pd=()=>{this.Gd.removeEventListener("dblclick",this.Nd)},this.Gd.addEventListener("dblclick",this.Nd)),this.Gd.addEventListener("mouseleave",this.Cf.bind(this)),this.Gd.addEventListener("touchstart",this.wf.bind(this),{passive:!0}),gAe(this.Gd),this.Gd.addEventListener("mousedown",this.bf.bind(this)),this.Pf(),this.Gd.addEventListener("touchmove",(()=>{}),{passive:!1})}Pf(){this.Yd.yf===void 0&&this.Yd.kf===void 0&&this.Yd.Tf===void 0||(this.Gd.addEventListener("touchstart",(e=>this.Rf(e.touches)),{passive:!0}),this.Gd.addEventListener("touchmove",(e=>{if(e.touches.length===2&&this.Rd!==null&&this.Yd.kf!==void 0){const r=DF(e.touches[0],e.touches[1])/this.Dd;this.Yd.kf(this.Rd,r),Ex(e)}}),{passive:!1}),this.Gd.addEventListener("touchend",(e=>{this.Rf(e.touches)})))}Rf(e){e.length===1&&(this.Vd=!1),e.length!==2||this.Vd||this.md?this.Df():this.Vf(e)}Vf(e){const r=this.Gd.getBoundingClientRect()||{left:0,top:0};this.Rd={_t:(e[0].clientX-r.left+(e[1].clientX-r.left))/2,ut:(e[0].clientY-r.top+(e[1].clientY-r.top))/2},this.Dd=DF(e[0],e[1]),this.Yd.yf!==void 0&&this.Yd.yf(),this.Qd()}Df(){this.Rd!==null&&(this.Rd=null,this.Yd.Tf!==void 0&&this.Yd.Tf())}Cf(e){if(this.yd&&this.yd(),this.Fd(e)||!this.zd)return;const r=this.Wd(e);this.Kd(r,this.Yd.Bf),this.zd=!S3()}gf(e){const r=k3(e.touches,xt(this.Ad));if(r===null)return;const s=this.Wd(e,r);this.$d(s,this.Yd.If),this.Sd=!0,this.md=!0}Fd(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:$N(e)<this.Ed+500}$d(e,r){r&&r.call(this.Yd,e)}Kd(e,r){r&&r.call(this.Yd,e)}Wd(e,r){const s=r||e,a=this.Gd.getBoundingClientRect()||{left:0,top:0};return{clientX:s.clientX,clientY:s.clientY,pageX:s.pageX,pageY:s.pageY,screenX:s.screenX,screenY:s.screenY,localX:s.clientX-a.left,localY:s.clientY-a.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Ef:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Af:e.type,zf:s.target,a_:e.view,Lf:()=>{e.type!=="touchstart"&&Ex(e)}}}}function DF(t,e){const r=t.clientX-e.clientX,s=t.clientY-e.clientY;return Math.sqrt(r*r+s*s)}function Ex(t){t.cancelable&&t.preventDefault()}function Fh(t){return{_t:t.pageX,ut:t.pageY}}function $N(t){return t.timeStamp||performance.now()}function k3(t,e){for(let r=0;r<t.length;++r)if(t[r].identifier===e)return t[r];return null}class xAe{constructor(e,r,s){this.Of=null,this.Nf=null,this.Ff=!0,this.Wf=null,this.Hf=e,this.Uf=e.$f()[r],this.qf=e.$f()[s],this.Yf=document.createElement("tr"),this.Yf.style.height="1px",this.jf=document.createElement("td"),this.jf.style.position="relative",this.jf.style.padding="0",this.jf.style.margin="0",this.jf.setAttribute("colspan","3"),this.Kf(),this.Yf.appendChild(this.jf),this.Ff=this.Hf.N().layout.panes.enableResize,this.Ff?this.Xf():(this.Of=null,this.Nf=null)}m(){this.Nf!==null&&this.Nf.m()}Zf(){return this.Yf}Gf(){return Vs({width:this.Uf.Gf().width,height:1})}Jf(){return Vs({width:this.Uf.Jf().width,height:1*window.devicePixelRatio})}Qf(e,r,s){const a=this.Jf();e.fillStyle=this.Hf.N().layout.panes.separatorColor,e.fillRect(r,s,a.width,a.height)}yt(){this.Kf(),this.Hf.N().layout.panes.enableResize!==this.Ff&&(this.Ff=this.Hf.N().layout.panes.enableResize,this.Ff?this.Xf():(this.Of!==null&&(this.jf.removeChild(this.Of.tp),this.jf.removeChild(this.Of.ip),this.Of=null),this.Nf!==null&&(this.Nf.m(),this.Nf=null)))}Xf(){const e=document.createElement("div"),r=e.style;r.position="fixed",r.display="none",r.zIndex="49",r.top="0",r.left="0",r.width="100%",r.height="100%",r.cursor="row-resize",this.jf.appendChild(e);const s=document.createElement("div"),a=s.style;a.position="absolute",a.zIndex="50",a.top="-4px",a.height="9px",a.width="100%",a.backgroundColor="",a.cursor="row-resize",this.jf.appendChild(s);const i={sf:this.sp.bind(this),Bf:this.np.bind(this),Sf:this.ep.bind(this),Mf:this.ep.bind(this),cf:this.rp.bind(this),_f:this.rp.bind(this),vf:this.hp.bind(this),ff:this.hp.bind(this)};this.Nf=new yk(s,i,{af:()=>!1,lf:()=>!0}),this.Of={ip:s,tp:e}}Kf(){this.jf.style.background=this.Hf.N().layout.panes.separatorColor}sp(e){this.Of!==null&&(this.Of.ip.style.backgroundColor=this.Hf.N().layout.panes.separatorHoverColor)}np(e){this.Of!==null&&this.Wf===null&&(this.Of.ip.style.backgroundColor="")}ep(e){if(this.Of===null)return;const r=this.Uf.ap().Bo()+this.qf.ap().Bo(),s=r/(this.Uf.Gf().height+this.qf.Gf().height),a=30*s;r<=2*a||(this.Wf={lp:e.pageY,op:this.Uf.ap().Bo(),_p:r-a,up:r,cp:s,dp:a},this.Of.tp.style.display="block")}rp(e){const r=this.Wf;if(r===null)return;const s=(e.pageY-r.lp)*r.cp,a=Mb(r.op+s,r.dp,r._p);this.Uf.ap().Io(a),this.qf.ap().Io(r.up-a),this.Hf.Qt().Ih()}hp(e){this.Wf!==null&&this.Of!==null&&(this.Wf=null,this.Of.tp.style.display="none")}}function C3(t,e){return t.fp-e.fp}function E3(t,e,r){const s=(t.fp-e.fp)/(t.wt-e.wt);return Math.sign(s)*Math.min(Math.abs(s),r)}class yAe{constructor(e,r,s,a){this.pp=null,this.vp=null,this.mp=null,this.wp=null,this.gp=null,this.Mp=0,this.bp=0,this.Sp=e,this.xp=r,this.Cp=s,this.Mn=a}Pp(e,r){if(this.pp!==null){if(this.pp.wt===r)return void(this.pp.fp=e);if(Math.abs(this.pp.fp-e)<this.Mn)return}this.wp=this.mp,this.mp=this.vp,this.vp=this.pp,this.pp={wt:r,fp:e}}le(e,r){if(this.pp===null||this.vp===null||r-this.pp.wt>50)return;let s=0;const a=E3(this.pp,this.vp,this.xp),i=C3(this.pp,this.vp),o=[a],l=[i];if(s+=i,this.mp!==null){const h=E3(this.vp,this.mp,this.xp);if(Math.sign(h)===Math.sign(a)){const f=C3(this.vp,this.mp);if(o.push(h),l.push(f),s+=f,this.wp!==null){const m=E3(this.mp,this.wp,this.xp);if(Math.sign(m)===Math.sign(a)){const x=C3(this.mp,this.wp);o.push(m),l.push(x),s+=x}}}}let d=0;for(let h=0;h<o.length;++h)d+=l[h]/s*o[h];Math.abs(d)<this.Sp||(this.gp={fp:e,wt:r},this.bp=d,this.Mp=(function(h,f){const m=Math.log(f);return Math.log(1*m/-h)/m})(Math.abs(d),this.Cp))}Du(e){const r=xt(this.gp),s=e-r.wt;return r.fp+this.bp*(Math.pow(this.Cp,s)-1)/Math.log(this.Cp)}Ru(e){return this.gp===null||this.yp(e)===this.Mp}yp(e){const r=e-xt(this.gp).wt;return Math.min(r,this.Mp)}}class vAe{constructor(e,r){this.kp=void 0,this.Tp=void 0,this.Rp=void 0,this.ps=!1,this.Dp=e,this.Vp=r,this.Bp()}yt(){this.Bp()}Ip(){this.kp&&this.Dp.removeChild(this.kp),this.Tp&&this.Dp.removeChild(this.Tp),this.kp=void 0,this.Tp=void 0}Ep(){return this.ps!==this.Ap()||this.Rp!==this.zp()}zp(){return this.Vp.Qt().Xi().J(this.Vp.N().layout.textColor)>160?"dark":"light"}Ap(){return this.Vp.N().layout.attributionLogo}Lp(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}Bp(){this.Ep()&&(this.Ip(),this.ps=this.Ap(),this.ps&&(this.Rp=this.zp(),this.Tp=document.createElement("style"),this.Tp.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.kp=document.createElement("a"),this.kp.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.Lp()}`,this.kp.title="Charting by TradingView",this.kp.id="tv-attr-logo",this.kp.target="_blank",this.kp.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.kp.toggleAttribute("data-dark",this.Rp==="dark"),this.Dp.appendChild(this.Tp),this.Dp.appendChild(this.kp)))}}function I0(t,e){const r=xt(t.ownerDocument).createElement("canvas");t.appendChild(r);const s=s5e(r,{options:{allowResizeObserver:!0},transform:(a,i)=>({width:Math.max(a.width,i.width),height:Math.max(a.height,i.height)})});return s.resizeCanvasElement(e),s}function M0(t){var e;t.width=1,t.height=1,(e=t.getContext("2d"))==null||e.clearRect(0,0,1,1)}function Q5(t,e,r,s){t.ih&&t.ih(e,r,s)}function aj(t,e,r,s){t.nt(e,r,s)}function J5(t,e,r,s){const a=t(r,s);for(const i of a){const o=i.Tt(s);o!==null&&e(o)}}function T3(t,e){return r=>{var s,a;return(function(i){return i.Ft!==void 0})(r)?(((s=r.Ft())==null?void 0:s.ma())??"")!==e?[]:((a=r.ta)==null?void 0:a.call(r,t))??[]:[]}}function $F(t,e,r,s){if(!t.length)return;let a=0;const i=t[0].$t(s,!0);let o=e===1?r/2-(t[0].Fi()-i/2):t[0].Fi()-i/2-r/2;o=Math.max(0,o);for(let l=1;l<t.length;l++){const d=t[l],h=t[l-1],f=h.$t(s,!1),m=d.Fi(),x=h.Fi();if(e===1?m>x-f:m<x+f){const b=x-f*e;d.Wi(b);const j=b-e*f/2;if((e===1?j<0:j>r)&&o>0){const N=e===1?-1-j:j-r,w=Math.min(N,o);for(let C=a;C<t.length;C++)t[C].Wi(t[C].Fi()+e*w);o-=w}}else a=l,o=e===1?x-f-m:m-(x+f)}}class LF{constructor(e,r,s,a){this.Yi=null,this.Op=null,this.Np=!1,this.Fp=new Mw(200),this.Wp=null,this.Hp=0,this.Up=!1,this.$p=()=>{this.Up||this.Pt.qp().Qt().ar()},this.Yp=()=>{this.Up||this.Pt.qp().Qt().ar()},this.Pt=e,this.Ps=r,this.Ml=r.layout,this.Ju=s,this.jp=a==="left",this.Kp=T3("normal",a),this.Xp=T3("top",a),this.Zp=T3("bottom",a),this.jf=document.createElement("div"),this.jf.style.height="100%",this.jf.style.overflow="hidden",this.jf.style.width="25px",this.jf.style.left="0",this.jf.style.position="relative",this.Gp=I0(this.jf,Vs({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p);const i=this.Gp.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Jp=I0(this.jf,Vs({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.Yp);const o=this.Jp.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";const l={Sf:this.ep.bind(this),Mf:this.ep.bind(this),cf:this.rp.bind(this),_f:this.rp.bind(this),xf:this.Qp.bind(this),vf:this.hp.bind(this),ff:this.hp.bind(this),Xd:this.tv.bind(this),qd:this.tv.bind(this),sf:this.iv.bind(this),Bf:this.np.bind(this)};this.Nf=new yk(this.Jp.canvasElement,l,{af:()=>!this.Ps.handleScroll.vertTouchDrag,lf:()=>!0})}m(){this.Nf.m(),this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.Yp),M0(this.Jp.canvasElement),this.Jp.dispose(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),M0(this.Gp.canvasElement),this.Gp.dispose(),this.Yi!==null&&this.Yi.so().u(this),this.Yi=null}Zf(){return this.jf}P(){return this.Ml.fontSize}sv(){const e=this.Ju.N();return this.Wp!==e.k&&(this.Fp.Bn(),this.Wp=e.k),e}nv(){if(this.Yi===null)return 0;let e=0;const r=this.sv(),s=xt(this.Gp.canvasElement.getContext("2d",{colorSpace:this.Pt.qp().N().layout.colorSpace}));s.save();const a=this.Yi.Da();s.font=this.ev(),a.length>0&&(e=Math.max(this.Fp.Vi(s,a[0].Za),this.Fp.Vi(s,a[a.length-1].Za)));const i=this.rv();for(let h=i.length;h--;){const f=this.Fp.Vi(s,i[h].ri());f>e&&(e=f)}const o=this.Yi.zt();if(o!==null&&this.Op!==null&&(l=this.Ps.crosshair).mode!==2&&l.horzLine.visible&&l.horzLine.labelVisible){const h=this.Yi.Ts(1,o),f=this.Yi.Ts(this.Op.height-2,o);e=Math.max(e,this.Fp.Vi(s,this.Yi.Zi(Math.floor(Math.min(h,f))+.11111111111111,o)),this.Fp.Vi(s,this.Yi.Zi(Math.ceil(Math.max(h,f))-.11111111111111,o)))}var l;s.restore();const d=e||34;return X5(Math.ceil(r.S+r.C+r.B+r.I+5+d))}hv(e){this.Op!==null&&h0(this.Op,e)||(this.Op=e,this.Up=!0,this.Gp.resizeCanvasElement(e),this.Jp.resizeCanvasElement(e),this.Up=!1,this.jf.style.width=`${e.width}px`,this.jf.style.height=`${e.height}px`)}av(){return xt(this.Op).width}_s(e){this.Yi!==e&&(this.Yi!==null&&this.Yi.so().u(this),this.Yi=e,e.so().i(this._l.bind(this),this))}Ft(){return this.Yi}Bn(){const e=this.Pt.ap();this.Pt.qp().Qt().Zo(e,xt(this.Ft()))}lv(e){if(this.Op===null)return;const r={colorSpace:this.Pt.qp().N().layout.colorSpace};if(e!==1){this.ov(),this.Gp.applySuggestedBitmapSize();const a=P0(this.Gp,r);a!==null&&(a.useBitmapCoordinateSpace((i=>{this._v(i),this.uv(i)})),this.Pt.cv(a,this.Zp),this.dv(a),this.Pt.cv(a,this.Kp),this.fv(a))}this.Jp.applySuggestedBitmapSize();const s=P0(this.Jp,r);s!==null&&(s.useBitmapCoordinateSpace((({context:a,bitmapSize:i})=>{a.clearRect(0,0,i.width,i.height)})),this.pv(s),this.Pt.cv(s,this.Xp))}Jf(){return this.Gp.bitmapSize}Qf(e,r,s,a){const i=this.Jf();if(i.width>0&&i.height>0&&(e.drawImage(this.Gp.canvasElement,r,s),a)){const o=this.Jp.canvasElement;e.drawImage(o,r,s)}}yt(){var e;(e=this.Yi)==null||e.Da()}ep(e){if(this.Yi===null||this.Yi.Ki()||!this.Ps.handleScale.axisPressedMouseMove.price)return;const r=this.Pt.qp().Qt(),s=this.Pt.ap();this.Np=!0,r.Uo(s,this.Yi,e.localY)}rp(e){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const r=this.Pt.qp().Qt(),s=this.Pt.ap(),a=this.Yi;r.$o(s,a,e.localY)}Qp(){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.Pt.qp().Qt(),r=this.Pt.ap(),s=this.Yi;this.Np&&(this.Np=!1,e.qo(r,s))}hp(e){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const r=this.Pt.qp().Qt(),s=this.Pt.ap();this.Np=!1,r.qo(s,this.Yi)}tv(e){this.Ps.handleScale.axisDoubleClickReset.price&&this.Bn()}iv(e){this.Yi!==null&&(!this.Pt.qp().Qt().N().handleScale.axisPressedMouseMove.price||this.Yi.Le()||this.Yi.Dl()||this.vv(1))}np(e){this.vv(0)}rv(){const e=[],r=this.Yi===null?void 0:this.Yi;return(s=>{for(let a=0;a<s.length;++a){const i=s[a].Ws(this.Pt.ap(),r);for(let o=0;o<i.length;o++)e.push(i[o])}})(this.Pt.ap().Dt()),e}_v({context:e,bitmapSize:r}){const{width:s,height:a}=r,i=this.Pt.ap().Qt(),o=i.$(),l=i.Wc();o===l?fk(e,0,0,s,a,o):rZ(e,0,0,s,a,o,l)}uv({context:e,bitmapSize:r,horizontalPixelRatio:s}){if(this.Op===null||this.Yi===null||!this.Yi.N().borderVisible)return;e.fillStyle=this.Yi.N().borderColor;const a=Math.max(1,Math.floor(this.sv().S*s));let i;i=this.jp?r.width-a:0,e.fillRect(i,0,a,r.height)}dv(e){if(this.Op===null||this.Yi===null)return;const r=this.Yi.Da(),s=this.Yi.N(),a=this.sv(),i=this.jp?this.Op.width-a.C:0;s.borderVisible&&s.ticksVisible&&e.useBitmapCoordinateSpace((({context:o,horizontalPixelRatio:l,verticalPixelRatio:d})=>{o.fillStyle=s.borderColor;const h=Math.max(1,Math.floor(d)),f=Math.floor(.5*d),m=Math.round(a.C*l);o.beginPath();for(const x of r)o.rect(Math.floor(i*l),Math.round(x.Pa*d)-f,m,h);o.fill()})),e.useMediaCoordinateSpace((({context:o})=>{o.font=this.ev(),o.fillStyle=s.textColor??this.Ml.textColor,o.textAlign=this.jp?"right":"left",o.textBaseline="middle";const l=this.jp?Math.round(i-a.B):Math.round(i+a.C+a.B),d=r.map((h=>this.Fp.Di(o,h.Za)));for(let h=r.length;h--;){const f=r[h];o.fillText(f.Za,l,f.Pa+d[h])}}))}ov(){if(this.Op===null||this.Yi===null)return;let e=this.Op.height/2;const r=[],s=this.Yi.Dt().slice(),a=this.Pt.ap(),i=this.sv();this.Yi===a.$n()&&this.Pt.ap().Dt().forEach((d=>{a.Un(d)&&s.push(d)}));const o=this.Yi.Ma()[0],l=this.Yi;s.forEach((d=>{const h=d.Ws(a,l);h.forEach((f=>{f.Wi(null),f.Hi()&&r.push(f)})),o===d&&h.length>0&&(e=h[0].Ii())})),r.forEach((d=>d.Wi(d.Ii()))),this.Yi.N().alignLabels&&this.mv(r,i,e)}mv(e,r,s){if(this.Op===null)return;const a=e.filter((o=>o.Ii()<=s)),i=e.filter((o=>o.Ii()>s));a.sort(((o,l)=>l.Ii()-o.Ii())),a.length&&i.length&&i.push(a[0]),i.sort(((o,l)=>o.Ii()-l.Ii()));for(const o of e){const l=Math.floor(o.$t(r)/2),d=o.Ii();d>-l&&d<l&&o.Wi(l),d>this.Op.height-l&&d<this.Op.height+l&&o.Wi(this.Op.height-l)}$F(a,1,this.Op.height,r),$F(i,-1,this.Op.height,r)}fv(e){if(this.Op===null)return;const r=this.rv(),s=this.sv(),a=this.jp?"right":"left";r.forEach((i=>{i.Ui()&&i.Tt(xt(this.Yi)).nt(e,s,this.Fp,a)}))}pv(e){if(this.Op===null||this.Yi===null)return;const r=this.Pt.qp().Qt(),s=[],a=this.Pt.ap(),i=r.uc().Ws(a,this.Yi);i.length&&s.push(i);const o=this.sv(),l=this.jp?"right":"left";s.forEach((d=>{d.forEach((h=>{h.Tt(xt(this.Yi)).nt(e,o,this.Fp,l)}))}))}vv(e){this.jf.style.cursor=e===1?"ns-resize":"default"}_l(){const e=this.nv();this.Hp<e&&this.Pt.qp().Qt().Ih(),this.Hp=e}ev(){return Iw(this.Ml.fontSize,this.Ml.fontFamily)}}function bAe(t,e){var r;return((r=t.Jh)==null?void 0:r.call(t,e))??[]}function FF(t,e){var r;return((r=t.Fs)==null?void 0:r.call(t,e))??[]}function BF(t,e){var r;return((r=t.us)==null?void 0:r.call(t,e))??[]}function wAe(t,e){var r;return((r=t.Xh)==null?void 0:r.call(t,e))??[]}class yI{constructor(e,r){this.Op=Vs({width:0,height:0}),this.wv=null,this.gv=null,this.Mv=null,this.bv=null,this.Sv=!1,this.xv=new Wa,this.Cv=new Wa,this.Pv=0,this.yv=!1,this.kv=null,this.Tv=!1,this.Rv=null,this.Dv=null,this.Up=!1,this.$p=()=>{this.Up||this.Vv===null||this.ts().ar()},this.Yp=()=>{this.Up||this.Vv===null||this.ts().ar()},this.Vp=e,this.Vv=r,this.Vv.t_().i(this.Bv.bind(this),this,!0),this.Iv=document.createElement("td"),this.Iv.style.padding="0",this.Iv.style.position="relative";const s=document.createElement("div");s.style.width="100%",s.style.height="100%",s.style.position="relative",s.style.overflow="hidden",this.Ev=document.createElement("td"),this.Ev.style.padding="0",this.Av=document.createElement("td"),this.Av.style.padding="0",this.Iv.appendChild(s),this.Gp=I0(s,Vs({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p);const a=this.Gp.canvasElement;a.style.position="absolute",a.style.zIndex="1",a.style.left="0",a.style.top="0",this.Jp=I0(s,Vs({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.Yp);const i=this.Jp.canvasElement;i.style.position="absolute",i.style.zIndex="2",i.style.left="0",i.style.top="0",this.Yf=document.createElement("tr"),this.Yf.appendChild(this.Ev),this.Yf.appendChild(this.Iv),this.Yf.appendChild(this.Av),this.zv(),this.Nf=new yk(this.Jp.canvasElement,this,{af:()=>this.kv===null&&!this.Vp.N().handleScroll.vertTouchDrag,lf:()=>this.kv===null&&!this.Vp.N().handleScroll.horzTouchDrag})}m(){this.wv!==null&&this.wv.m(),this.gv!==null&&this.gv.m(),this.Mv=null,this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.Yp),M0(this.Jp.canvasElement),this.Jp.dispose(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),M0(this.Gp.canvasElement),this.Gp.dispose(),this.Vv!==null&&(this.Vv.t_().u(this),this.Vv.m()),this.Nf.m()}ap(){return xt(this.Vv)}Lv(e){var r;this.Vv!==null&&this.Vv.t_().u(this),this.Vv=e,this.Vv!==null&&this.Vv.t_().i(yI.prototype.Bv.bind(this),this,!0),this.zv(),this.Vp.$f().indexOf(this)===this.Vp.$f().length-1?(this.Mv=this.Mv??new vAe(this.Iv,this.Vp),this.Mv.yt()):((r=this.Mv)==null||r.Ip(),this.Mv=null)}qp(){return this.Vp}Zf(){return this.Yf}zv(){if(this.Vv!==null&&(this.Ov(),this.ts().js().length!==0)){if(this.wv!==null){const e=this.Vv.Wo();this.wv._s(xt(e))}if(this.gv!==null){const e=this.Vv.Ho();this.gv._s(xt(e))}}}Nv(){this.wv!==null&&this.wv.yt(),this.gv!==null&&this.gv.yt()}Bo(){return this.Vv!==null?this.Vv.Bo():0}Io(e){this.Vv&&this.Vv.Io(e)}sf(e){if(!this.Vv)return;this.Fv();const r=e.localX,s=e.localY;this.Wv(r,s,e)}Sf(e){this.Fv(),this.Hv(),this.Wv(e.localX,e.localY,e)}nf(e){if(!this.Vv)return;this.Fv();const r=e.localX,s=e.localY;this.Wv(r,s,e)}mf(e){this.Vv!==null&&(this.Fv(),this.Uv(e))}Xd(e){this.Vv!==null&&this.$v(this.Cv,e)}qd(e){this.Xd(e)}cf(e){this.Fv(),this.qv(e),this.Wv(e.localX,e.localY,e)}vf(e){this.Vv!==null&&(this.Fv(),this.yv=!1,this.Yv(e))}pf(e){this.Vv!==null&&this.Uv(e)}If(e){if(this.yv=!0,this.kv===null){const r={x:e.localX,y:e.localY};this.jv(r,r,e)}}Bf(e){this.Vv!==null&&(this.Fv(),this.Vv.Qt().lc(null),this.Kv())}Xv(){return this.xv}Zv(){return this.Cv}yf(){this.Pv=1,this.ts().hn()}kf(e,r){if(!this.Vp.N().handleScale.pinch)return;const s=5*(r-this.Pv);this.Pv=r,this.ts().bc(e._t,s)}Mf(e){this.yv=!1,this.Tv=this.kv!==null,this.Hv();const r=this.ts().uc();this.kv!==null&&r.Vt()&&(this.Rv={x:r.si(),y:r.ni()},this.kv={x:e.localX,y:e.localY})}_f(e){if(this.Vv===null)return;const r=e.localX,s=e.localY;if(this.kv===null)this.qv(e);else{this.Tv=!1;const a=xt(this.Rv),i=a.x+(r-this.kv.x),o=a.y+(s-this.kv.y);this.Wv(i,o,e)}}ff(e){this.qp().N().trackingMode.exitMode===0&&(this.Tv=!0),this.Gv(),this.Yv(e)}jn(e,r){const s=this.Vv;return s===null?null:fZ(s,e,r)}Jv(e,r){xt(r==="left"?this.wv:this.gv).hv(Vs({width:e,height:this.Op.height}))}Gf(){return this.Op}hv(e){h0(this.Op,e)||(this.Op=e,this.Up=!0,this.Gp.resizeCanvasElement(e),this.Jp.resizeCanvasElement(e),this.Up=!1,this.Iv.style.width=e.width+"px",this.Iv.style.height=e.height+"px")}Qv(){const e=xt(this.Vv);e.Fo(e.Wo()),e.Fo(e.Ho());for(const r of e.Ma())if(e.Un(r)){const s=r.Ft();s!==null&&e.Fo(s),r.Ns()}for(const r of e.s_())r.Ns()}Jf(){return this.Gp.bitmapSize}Qf(e,r,s,a){const i=this.Jf();if(i.width>0&&i.height>0&&(e.drawImage(this.Gp.canvasElement,r,s),a)){const o=this.Jp.canvasElement;e!==null&&e.drawImage(o,r,s)}}lv(e){if(e===0||this.Vv===null)return;e>1&&this.Qv(),this.wv!==null&&this.wv.lv(e),this.gv!==null&&this.gv.lv(e);const r={colorSpace:this.Vp.N().layout.colorSpace};if(e!==1){this.Gp.applySuggestedBitmapSize();const a=P0(this.Gp,r);a!==null&&(a.useBitmapCoordinateSpace((i=>{this._v(i)})),this.Vv&&(this.tm(a,bAe),this.im(a),this.tm(a,FF),this.tm(a,BF)))}this.Jp.applySuggestedBitmapSize();const s=P0(this.Jp,r);s!==null&&(s.useBitmapCoordinateSpace((({context:a,bitmapSize:i})=>{a.clearRect(0,0,i.width,i.height)})),this.sm(s),this.tm(s,wAe),this.tm(s,BF))}nm(){return this.wv}rm(){return this.gv}cv(e,r){this.tm(e,r)}Bv(){this.Vv!==null&&this.Vv.t_().u(this),this.Vv=null}Uv(e){this.$v(this.xv,e)}$v(e,r){const s=r.localX,a=r.localY;e.v()&&e.p(this.ts().Et().cu(s),{x:s,y:a},r)}_v({context:e,bitmapSize:r}){const{width:s,height:a}=r,i=this.ts(),o=i.$(),l=i.Wc();o===l?fk(e,0,0,s,a,l):rZ(e,0,0,s,a,o,l)}im(e){const r=xt(this.Vv),s=r.i_().lr().Tt(r);s!==null&&s.nt(e,!1)}sm(e){this.hm(e,FF,aj,this.ts().uc())}tm(e,r){const s=xt(this.Vv),a=s.Dt(),i=s.s_();for(const o of i)this.hm(e,r,Q5,o);for(const o of a)this.hm(e,r,Q5,o);for(const o of i)this.hm(e,r,aj,o);for(const o of a)this.hm(e,r,aj,o)}hm(e,r,s,a){const i=xt(this.Vv),o=i.Qt().ac(),l=o!==null&&o.n_===a,d=o!==null&&l&&o.e_!==void 0?o.e_.Xn:void 0;J5(r,(h=>s(h,e,l,d)),a,i)}Ov(){if(this.Vv===null)return;const e=this.Vp,r=this.Vv.Wo().N().visible,s=this.Vv.Ho().N().visible;r||this.wv===null||(this.Ev.removeChild(this.wv.Zf()),this.wv.m(),this.wv=null),s||this.gv===null||(this.Av.removeChild(this.gv.Zf()),this.gv.m(),this.gv=null);const a=e.Qt().Bc();r&&this.wv===null&&(this.wv=new LF(this,e.N(),a,"left"),this.Ev.appendChild(this.wv.Zf())),s&&this.gv===null&&(this.gv=new LF(this,e.N(),a,"right"),this.Av.appendChild(this.gv.Zf()))}am(e){return e.Ef&&this.yv||this.kv!==null}lm(e){return Math.max(0,Math.min(e,this.Op.width-1))}om(e){return Math.max(0,Math.min(e,this.Op.height-1))}Wv(e,r,s){this.ts().Tc(this.lm(e),this.om(r),s,xt(this.Vv))}Kv(){this.ts().Dc()}Gv(){this.Tv&&(this.kv=null,this.Kv())}jv(e,r,s){this.kv=e,this.Tv=!1,this.Wv(r.x,r.y,s);const a=this.ts().uc();this.Rv={x:a.si(),y:a.ni()}}ts(){return this.Vp.Qt()}Yv(e){if(!this.Sv)return;const r=this.ts(),s=this.ap();if(r.Ko(s,s.ks()),this.bv=null,this.Sv=!1,r.Pc(),this.Dv!==null){const a=performance.now(),i=r.Et();this.Dv.le(i.gu(),a),this.Dv.Ru(a)||r._n(this.Dv)}}Fv(){this.kv=null}Hv(){if(this.Vv){if(this.ts().hn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)xt(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Vv.ks().Ki()&&this.ts().Et().Ki()}}qv(e){if(this.Vv===null)return;const r=this.ts(),s=r.Et();if(s.Ki())return;const a=this.Vp.N(),i=a.handleScroll,o=a.kineticScroll;if((!i.pressedMouseMove||e.Ef)&&(!i.horzTouchDrag&&!i.vertTouchDrag||!e.Ef))return;const l=this.Vv.ks(),d=performance.now();if(this.bv!==null||this.am(e)||(this.bv={x:e.clientX,y:e.clientY,rd:d,_m:e.localX,um:e.localY}),this.bv!==null&&!this.Sv&&(this.bv.x!==e.clientX||this.bv.y!==e.clientY)){if(e.Ef&&o.touch||!e.Ef&&o.mouse){const h=s.mu();this.Dv=new yAe(.2/h,7/h,.997,15/h),this.Dv.Pp(s.gu(),this.bv.rd)}else this.Dv=null;l.Ki()||r.Yo(this.Vv,l,e.localY),r.xc(e.localX),this.Sv=!0}this.Sv&&(l.Ki()||r.jo(this.Vv,l,e.localY),r.Cc(e.localX),this.Dv!==null&&this.Dv.Pp(s.gu(),d))}}class UF{constructor(e,r,s,a,i){this.xt=!0,this.Op=Vs({width:0,height:0}),this.$p=()=>this.lv(3),this.jp=e==="left",this.Ju=s.Bc,this.Ps=r,this.dm=a,this.fm=i,this.jf=document.createElement("div"),this.jf.style.width="25px",this.jf.style.height="100%",this.jf.style.overflow="hidden",this.Gp=I0(this.jf,Vs({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p)}m(){this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),M0(this.Gp.canvasElement),this.Gp.dispose()}Zf(){return this.jf}Gf(){return this.Op}hv(e){h0(this.Op,e)||(this.Op=e,this.Gp.resizeCanvasElement(e),this.jf.style.width=`${e.width}px`,this.jf.style.height=`${e.height}px`,this.xt=!0)}lv(e){if(e<3&&!this.xt||this.Op.width===0||this.Op.height===0)return;this.xt=!1,this.Gp.applySuggestedBitmapSize();const r=P0(this.Gp,{colorSpace:this.Ps.layout.colorSpace});r!==null&&r.useBitmapCoordinateSpace((s=>{this._v(s),this.uv(s)}))}Jf(){return this.Gp.bitmapSize}Qf(e,r,s){const a=this.Jf();a.width>0&&a.height>0&&e.drawImage(this.Gp.canvasElement,r,s)}uv({context:e,bitmapSize:r,horizontalPixelRatio:s,verticalPixelRatio:a}){if(!this.dm())return;e.fillStyle=this.Ps.timeScale.borderColor;const i=Math.floor(this.Ju.N().S*s),o=Math.floor(this.Ju.N().S*a),l=this.jp?r.width-i:0;e.fillRect(l,0,i,o)}_v({context:e,bitmapSize:r}){fk(e,0,0,r.width,r.height,this.fm())}}function vI(t){return e=>{var r;return((r=e.ia)==null?void 0:r.call(e,t))??[]}}const NAe=vI("normal"),jAe=vI("top"),SAe=vI("bottom");class kAe{constructor(e,r){this.pm=null,this.vm=null,this.M=null,this.wm=!1,this.Op=Vs({width:0,height:0}),this.gm=new Wa,this.Fp=new Mw(5),this.Up=!1,this.$p=()=>{this.Up||this.Vp.Qt().ar()},this.Yp=()=>{this.Up||this.Vp.Qt().ar()},this.Vp=e,this.o_=r,this.Ps=e.N().layout,this.kp=document.createElement("tr"),this.Mm=document.createElement("td"),this.Mm.style.padding="0",this.bm=document.createElement("td"),this.bm.style.padding="0",this.jf=document.createElement("td"),this.jf.style.height="25px",this.jf.style.padding="0",this.Sm=document.createElement("div"),this.Sm.style.width="100%",this.Sm.style.height="100%",this.Sm.style.position="relative",this.Sm.style.overflow="hidden",this.jf.appendChild(this.Sm),this.Gp=I0(this.Sm,Vs({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.$p);const s=this.Gp.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Jp=I0(this.Sm,Vs({width:16,height:16})),this.Jp.subscribeSuggestedBitmapSizeChanged(this.Yp);const a=this.Jp.canvasElement;a.style.position="absolute",a.style.zIndex="2",a.style.left="0",a.style.top="0",this.kp.appendChild(this.Mm),this.kp.appendChild(this.jf),this.kp.appendChild(this.bm),this.xm(),this.Vp.Qt().Vo().i(this.xm.bind(this),this),this.Nf=new yk(this.Jp.canvasElement,this,{af:()=>!0,lf:()=>!this.Vp.N().handleScroll.horzTouchDrag})}m(){this.Nf.m(),this.pm!==null&&this.pm.m(),this.vm!==null&&this.vm.m(),this.Jp.unsubscribeSuggestedBitmapSizeChanged(this.Yp),M0(this.Jp.canvasElement),this.Jp.dispose(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.$p),M0(this.Gp.canvasElement),this.Gp.dispose()}Zf(){return this.kp}Cm(){return this.pm}Pm(){return this.vm}Sf(e){if(this.wm)return;this.wm=!0;const r=this.Vp.Qt();!r.Et().Ki()&&this.Vp.N().handleScale.axisPressedMouseMove.time&&r.Mc(e.localX)}Mf(e){this.Sf(e)}xf(){const e=this.Vp.Qt();!e.Et().Ki()&&this.wm&&(this.wm=!1,this.Vp.N().handleScale.axisPressedMouseMove.time&&e.kc())}cf(e){const r=this.Vp.Qt();!r.Et().Ki()&&this.Vp.N().handleScale.axisPressedMouseMove.time&&r.yc(e.localX)}_f(e){this.cf(e)}vf(){this.wm=!1;const e=this.Vp.Qt();e.Et().Ki()&&!this.Vp.N().handleScale.axisPressedMouseMove.time||e.kc()}ff(){this.vf()}Xd(){this.Vp.N().handleScale.axisDoubleClickReset.time&&this.Vp.Qt().cn()}qd(){this.Xd()}sf(){this.Vp.Qt().N().handleScale.axisPressedMouseMove.time&&this.vv(1)}Bf(){this.vv(0)}Gf(){return this.Op}ym(){return this.gm}km(e,r,s){h0(this.Op,e)||(this.Op=e,this.Up=!0,this.Gp.resizeCanvasElement(e),this.Jp.resizeCanvasElement(e),this.Up=!1,this.jf.style.width=`${e.width}px`,this.jf.style.height=`${e.height}px`,this.gm.p(e)),this.pm!==null&&this.pm.hv(Vs({width:r,height:e.height})),this.vm!==null&&this.vm.hv(Vs({width:s,height:e.height}))}Tm(){const e=this.Rm();return Math.ceil(e.S+e.C+e.P+e.A+e.V+e.Dm)}yt(){this.Vp.Qt().Et().Da()}Jf(){return this.Gp.bitmapSize}Qf(e,r,s,a){const i=this.Jf();if(i.width>0&&i.height>0&&(e.drawImage(this.Gp.canvasElement,r,s),a)){const o=this.Jp.canvasElement;e.drawImage(o,r,s)}}lv(e){if(e===0)return;const r={colorSpace:this.Ps.colorSpace};if(e!==1){this.Gp.applySuggestedBitmapSize();const a=P0(this.Gp,r);a!==null&&(a.useBitmapCoordinateSpace((i=>{this._v(i),this.uv(i),this.Vm(a,SAe)})),this.dv(a),this.Vm(a,NAe)),this.pm!==null&&this.pm.lv(e),this.vm!==null&&this.vm.lv(e)}this.Jp.applySuggestedBitmapSize();const s=P0(this.Jp,r);s!==null&&(s.useBitmapCoordinateSpace((({context:a,bitmapSize:i})=>{a.clearRect(0,0,i.width,i.height)})),this.Bm([...this.Vp.Qt().js(),this.Vp.Qt().uc()],s),this.Vm(s,jAe))}Vm(e,r){const s=this.Vp.Qt().js();for(const a of s)J5(r,(i=>Q5(i,e,!1,void 0)),a,void 0);for(const a of s)J5(r,(i=>aj(i,e,!1,void 0)),a,void 0)}_v({context:e,bitmapSize:r}){fk(e,0,0,r.width,r.height,this.Vp.Qt().Wc())}uv({context:e,bitmapSize:r,verticalPixelRatio:s}){if(this.Vp.N().timeScale.borderVisible){e.fillStyle=this.Im();const a=Math.max(1,Math.floor(this.Rm().S*s));e.fillRect(0,0,r.width,a)}}dv(e){const r=this.Vp.Qt().Et(),s=r.Da();if(!s||s.length===0)return;const a=this.o_.maxTickMarkWeight(s),i=this.Rm(),o=r.N();o.borderVisible&&o.ticksVisible&&e.useBitmapCoordinateSpace((({context:l,horizontalPixelRatio:d,verticalPixelRatio:h})=>{l.strokeStyle=this.Im(),l.fillStyle=this.Im();const f=Math.max(1,Math.floor(d)),m=Math.floor(.5*d);l.beginPath();const x=Math.round(i.C*h);for(let b=s.length;b--;){const j=Math.round(s[b].coord*d);l.rect(j-m,0,f,x)}l.fill()})),e.useMediaCoordinateSpace((({context:l})=>{const d=i.S+i.C+i.A+i.P/2;l.textAlign="center",l.textBaseline="middle",l.fillStyle=this.H(),l.font=this.ev();for(const h of s)if(h.weight<a){const f=h.needAlignCoordinate?this.Em(l,h.coord,h.label):h.coord;l.fillText(h.label,f,d)}this.Vp.N().timeScale.allowBoldLabels&&(l.font=this.Am());for(const h of s)if(h.weight>=a){const f=h.needAlignCoordinate?this.Em(l,h.coord,h.label):h.coord;l.fillText(h.label,f,d)}}))}Em(e,r,s){const a=this.Fp.Vi(e,s),i=a/2,o=Math.floor(r-i)+.5;return o<0?r+=Math.abs(0-o):o+a>this.Op.width&&(r-=Math.abs(this.Op.width-(o+a))),r}Bm(e,r){const s=this.Rm();for(const a of e)for(const i of a.cs())i.Tt().nt(r,s)}Im(){return this.Vp.N().timeScale.borderColor}H(){return this.Ps.textColor}F(){return this.Ps.fontSize}ev(){return Iw(this.F(),this.Ps.fontFamily)}Am(){return Iw(this.F(),this.Ps.fontFamily,"bold")}Rm(){this.M===null&&(this.M={S:1,L:NaN,A:NaN,V:NaN,Ji:NaN,C:5,P:NaN,k:"",Gi:new Mw,Dm:0});const e=this.M,r=this.ev();if(e.k!==r){const s=this.F();e.P=s,e.k=r,e.A=3*s/12,e.V=3*s/12,e.Ji=9*s/12,e.L=0,e.Dm=4*s/12,e.Gi.Bn()}return this.M}vv(e){this.jf.style.cursor=e===1?"ew-resize":"default"}xm(){const e=this.Vp.Qt(),r=e.N();r.leftPriceScale.visible||this.pm===null||(this.Mm.removeChild(this.pm.Zf()),this.pm.m(),this.pm=null),r.rightPriceScale.visible||this.vm===null||(this.bm.removeChild(this.vm.Zf()),this.vm.m(),this.vm=null);const s={Bc:this.Vp.Qt().Bc()},a=()=>r.leftPriceScale.borderVisible&&e.Et().N().borderVisible,i=()=>e.Wc();r.leftPriceScale.visible&&this.pm===null&&(this.pm=new UF("left",r,s,a,i),this.Mm.appendChild(this.pm.Zf())),r.rightPriceScale.visible&&this.vm===null&&(this.vm=new UF("right",r,s,a,i),this.bm.appendChild(this.vm.Zf()))}}var G9;const CAe=!!Wy&&!!navigator.userAgentData&&navigator.userAgentData.brands.some((t=>t.brand.includes("Chromium")))&&!!Wy&&((G9=navigator==null?void 0:navigator.userAgentData)!=null&&G9.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);class EAe{constructor(e,r,s){var a;this.zm=[],this.Lm=[],this.Om=0,this.il=0,this.Mo=0,this.Nm=0,this.Fm=0,this.Wm=null,this.Hm=!1,this.xv=new Wa,this.Cv=new Wa,this.Xu=new Wa,this.Um=null,this.$m=null,this.Dp=e,this.Ps=r,this.o_=s,this.kp=document.createElement("div"),this.kp.classList.add("tv-lightweight-charts"),this.kp.style.overflow="hidden",this.kp.style.direction="ltr",this.kp.style.width="100%",this.kp.style.height="100%",(a=this.kp).style.userSelect="none",a.style.webkitUserSelect="none",a.style.msUserSelect="none",a.style.MozUserSelect="none",a.style.webkitTapHighlightColor="transparent",this.qm=document.createElement("table"),this.qm.setAttribute("cellspacing","0"),this.kp.appendChild(this.qm),this.Ym=this.jm.bind(this),P3(this.Ps)&&this.Km(!0),this.ts=new uAe(this.Gu.bind(this),this.Ps,s),this.Qt().cc().i(this.Xm.bind(this),this),this.Zm=new kAe(this,this.o_),this.qm.appendChild(this.Zm.Zf());const i=r.autoSize&&this.Gm();let o=this.Ps.width,l=this.Ps.height;if(i||o===0||l===0){const d=e.getBoundingClientRect();o=o||d.width,l=l||d.height}this.Jm(o,l),this.Qm(),e.appendChild(this.kp),this.tw(),this.ts.Et().Iu().i(this.ts.Ih.bind(this.ts),this),this.ts.Vo().i(this.ts.Ih.bind(this.ts),this)}Qt(){return this.ts}N(){return this.Ps}$f(){return this.zm}iw(){return this.Zm}m(){this.Km(!1),this.Om!==0&&window.cancelAnimationFrame(this.Om),this.ts.cc().u(this),this.ts.Et().Iu().u(this),this.ts.Vo().u(this),this.ts.m();for(const e of this.zm)this.qm.removeChild(e.Zf()),e.Xv().u(this),e.Zv().u(this),e.m();this.zm=[];for(const e of this.Lm)this.sw(e);this.Lm=[],xt(this.Zm).m(),this.kp.parentElement!==null&&this.kp.parentElement.removeChild(this.kp),this.Xu.m(),this.xv.m(),this.Cv.m(),this.nw()}Jm(e,r,s=!1){if(this.il===r&&this.Mo===e)return;const a=(function(l){const d=Math.floor(l.width),h=Math.floor(l.height);return Vs({width:d-d%2,height:h-h%2})})(Vs({width:e,height:r}));this.il=a.height,this.Mo=a.width;const i=this.il+"px",o=this.Mo+"px";xt(this.kp).style.height=i,xt(this.kp).style.width=o,this.qm.style.height=i,this.qm.style.width=o,s?this.ew(mo.gn(),performance.now()):this.ts.Ih()}lv(e){e===void 0&&(e=mo.gn());for(let r=0;r<this.zm.length;r++)this.zm[r].lv(e.en(r).tn);this.Ps.timeScale.visible&&this.Zm.lv(e.nn())}hr(e){var a;const r=P3(this.Ps);this.ts.hr(e);const s=P3(this.Ps);s!==r&&this.Km(s),(a=e.layout)!=null&&a.panes&&this.rw(),this.tw(),this.hw(e)}Xv(){return this.xv}Zv(){return this.Cv}cc(){return this.Xu}aw(e=!1){this.Wm!==null&&(this.ew(this.Wm,performance.now()),this.Wm=null);const r=this.lw(null),s=document.createElement("canvas");s.width=r.width,s.height=r.height;const a=xt(s.getContext("2d"));return this.lw(a,e),s}ow(e){return e==="left"&&!this._w()||e==="right"&&!this.uw()||this.zm.length===0?0:xt(e==="left"?this.zm[0].nm():this.zm[0].rm()).av()}cw(){return this.Ps.autoSize&&this.Um!==null}ip(){return this.kp}dw(e){this.$m=e,this.$m?this.ip().style.setProperty("cursor",e):this.ip().style.removeProperty("cursor")}fw(){return this.$m}pw(e){return ic(this.zm[e]).Gf()}rw(){this.Lm.forEach((e=>{e.yt()}))}hw(e){(e.autoSize!==void 0||!this.Um||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.Um&&this.Gm(),e.autoSize===!1&&this.Um!==null&&this.nw(),e.autoSize||e.width===void 0&&e.height===void 0||this.Jm(e.width||this.Mo,e.height||this.il))}lw(e,r){let s=0,a=0;const i=this.zm[0],o=(d,h)=>{let f=0;for(let m=0;m<this.zm.length;m++){const x=this.zm[m],b=xt(d==="left"?x.nm():x.rm()),j=b.Jf();if(e!==null&&b.Qf(e,h,f,r),f+=j.height,m<this.zm.length-1){const N=this.Lm[m],w=N.Jf();e!==null&&N.Qf(e,h,f),f+=w.height}}};this._w()&&(o("left",0),s+=xt(i.nm()).Jf().width);for(let d=0;d<this.zm.length;d++){const h=this.zm[d],f=h.Jf();if(e!==null&&h.Qf(e,s,a,r),a+=f.height,d<this.zm.length-1){const m=this.Lm[d],x=m.Jf();e!==null&&m.Qf(e,s,a),a+=x.height}}s+=i.Jf().width,this.uw()&&(o("right",s),s+=xt(i.rm()).Jf().width);const l=(d,h,f)=>{xt(d==="left"?this.Zm.Cm():this.Zm.Pm()).Qf(xt(e),h,f)};if(this.Ps.timeScale.visible){const d=this.Zm.Jf();if(e!==null){let h=0;this._w()&&(l("left",h,a),h=xt(i.nm()).Jf().width),this.Zm.Qf(e,h,a,r),h+=d.width,this.uw()&&l("right",h,a)}a+=d.height}return Vs({width:s,height:a})}mw(){let e=0,r=0,s=0;for(const w of this.zm)this._w()&&(r=Math.max(r,xt(w.nm()).nv(),this.Ps.leftPriceScale.minimumWidth)),this.uw()&&(s=Math.max(s,xt(w.rm()).nv(),this.Ps.rightPriceScale.minimumWidth)),e+=w.Bo();r=X5(r),s=X5(s);const a=this.Mo,i=this.il,o=Math.max(a-r-s,0),l=1*this.Lm.length,d=this.Ps.timeScale.visible;let h=d?Math.max(this.Zm.Tm(),this.Ps.timeScale.minimumHeight):0;var f;h=(f=h)+f%2;const m=l+h,x=i<m?0:i-m,b=x/e;let j=0;const N=window.devicePixelRatio||1;for(let w=0;w<this.zm.length;++w){const C=this.zm[w];C.Lv(this.ts.$s()[w]);let T=0,O=0;O=w===this.zm.length-1?Math.ceil((x-j)*N)/N:Math.round(C.Bo()*b*N)/N,T=Math.max(O,2),j+=T,C.hv(Vs({width:o,height:T})),this._w()&&C.Jv(r,"left"),this.uw()&&C.Jv(s,"right"),C.ap()&&this.ts.dc(C.ap(),T)}this.Zm.km(Vs({width:d?o:0,height:h}),d?r:0,d?s:0),this.ts.Eo(o),this.Nm!==r&&(this.Nm=r),this.Fm!==s&&(this.Fm=s)}Km(e){e?this.kp.addEventListener("wheel",this.Ym,{passive:!1}):this.kp.removeEventListener("wheel",this.Ym)}ww(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return CAe?1/window.devicePixelRatio:1}jm(e){if(!(e.deltaX!==0&&this.Ps.handleScroll.mouseWheel||e.deltaY!==0&&this.Ps.handleScale.mouseWheel))return;const r=this.ww(e),s=r*e.deltaX/100,a=-r*e.deltaY/100;if(e.cancelable&&e.preventDefault(),a!==0&&this.Ps.handleScale.mouseWheel){const i=Math.sign(a)*Math.min(1,Math.abs(a)),o=e.clientX-this.kp.getBoundingClientRect().left;this.Qt().bc(o,i)}s!==0&&this.Ps.handleScroll.mouseWheel&&this.Qt().Sc(-80*s)}ew(e,r){var a;const s=e.nn();s===3&&this.gw(),s!==3&&s!==2||(this.Mw(e),this.bw(e,r),this.Zm.yt(),this.zm.forEach((i=>{i.Nv()})),((a=this.Wm)==null?void 0:a.nn())===3&&(this.Wm.vn(e),this.gw(),this.Mw(this.Wm),this.bw(this.Wm,r),e=this.Wm,this.Wm=null)),this.lv(e)}bw(e,r){for(const s of e.pn())this.mn(s,r)}Mw(e){const r=this.ts.$s();for(let s=0;s<r.length;s++)e.en(s).sn&&r[s].Go()}mn(e,r){const s=this.ts.Et();switch(e.an){case 0:s.Au();break;case 1:s.zu(e.Wt);break;case 2:s.dn(e.Wt);break;case 3:s.fn(e.Wt);break;case 4:s.Su();break;case 5:e.Wt.Ru(r)||s.fn(e.Wt.Du(r))}}Gu(e){this.Wm!==null?this.Wm.vn(e):this.Wm=e,this.Hm||(this.Hm=!0,this.Om=window.requestAnimationFrame((r=>{if(this.Hm=!1,this.Om=0,this.Wm!==null){const s=this.Wm;this.Wm=null,this.ew(s,r);for(const a of s.pn())if(a.an===5&&!a.Wt.Ru(r)){this.Qt()._n(a.Wt);break}}})))}gw(){this.Qm()}sw(e){this.qm.removeChild(e.Zf()),e.m()}Qm(){const e=this.ts.$s(),r=e.length,s=this.zm.length;for(let a=r;a<s;a++){const i=ic(this.zm.pop());this.qm.removeChild(i.Zf()),i.Xv().u(this),i.Zv().u(this),i.m();const o=this.Lm.pop();o!==void 0&&this.sw(o)}for(let a=s;a<r;a++){const i=new yI(this,e[a]);if(i.Xv().i(this.Sw.bind(this,i),this),i.Zv().i(this.xw.bind(this,i),this),this.zm.push(i),a>0){const o=new xAe(this,a-1,a);this.Lm.push(o),this.qm.insertBefore(o.Zf(),this.Zm.Zf())}this.qm.insertBefore(i.Zf(),this.Zm.Zf())}for(let a=0;a<r;a++){const i=e[a],o=this.zm[a];o.ap()!==i?o.Lv(i):o.zv()}this.tw(),this.mw()}Cw(e,r,s,a){var m;const i=new Map;e!==null&&this.ts.js().forEach((x=>{const b=x.Xs().Fr(e);b!==null&&i.set(x,b)}));let o;if(e!==null){const x=(m=this.ts.Et().ss(e))==null?void 0:m.originalTime;x!==void 0&&(o=x)}const l=this.Qt().ac(),d=l!==null&&l.n_ instanceof xk?l.n_:void 0,h=l!==null&&l.e_!==void 0?l.e_.Kn:void 0,f=this.Pw(a);return{yw:o,Re:e??void 0,kw:r??void 0,Tw:f!==-1?f:void 0,Rw:d,Dw:i,Vw:h,Bw:s??void 0}}Pw(e){let r=-1;if(e)r=this.zm.indexOf(e);else{const s=this.Qt().uc().Us();s!==null&&(r=this.Qt().$s().indexOf(s))}return r}Sw(e,r,s,a){this.xv.p((()=>this.Cw(r,s,a,e)))}xw(e,r,s,a){this.Cv.p((()=>this.Cw(r,s,a,e)))}Xm(e,r,s){var a;this.dw(((a=this.Qt().ac())==null?void 0:a.h_)??null),this.Xu.p((()=>this.Cw(e,r,s)))}tw(){const e=this.Ps.timeScale.visible?"":"none";this.Zm.Zf().style.display=e}_w(){return this.zm[0].ap().Wo().N().visible}uw(){return this.zm[0].ap().Ho().N().visible}Gm(){return"ResizeObserver"in window&&(this.Um=new ResizeObserver((e=>{const r=e[e.length-1];r&&this.Jm(r.contentRect.width,r.contentRect.height)})),this.Um.observe(this.Dp,{box:"border-box"}),!0)}nw(){this.Um!==null&&this.Um.disconnect(),this.Um=null}}function P3(t){return!!(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function TAe(t){return t.open===void 0&&t.value===void 0}function PAe(t){return(function(e){return e.open!==void 0})(t)||(function(e){return e.value!==void 0})(t)}function zF(t,e,r,s){const a=r.value,i={Re:e,wt:t,Wt:[a,a,a,a],yw:s};return r.color!==void 0&&(i.R=r.color),i}function AAe(t,e,r,s){const a=r.value,i={Re:e,wt:t,Wt:[a,a,a,a],yw:s};return r.lineColor!==void 0&&(i.vt=r.lineColor),r.topColor!==void 0&&(i.mr=r.topColor),r.bottomColor!==void 0&&(i.wr=r.bottomColor),i}function _Ae(t,e,r,s){const a=r.value,i={Re:e,wt:t,Wt:[a,a,a,a],yw:s};return r.topLineColor!==void 0&&(i.gr=r.topLineColor),r.bottomLineColor!==void 0&&(i.Mr=r.bottomLineColor),r.topFillColor1!==void 0&&(i.br=r.topFillColor1),r.topFillColor2!==void 0&&(i.Sr=r.topFillColor2),r.bottomFillColor1!==void 0&&(i.Cr=r.bottomFillColor1),r.bottomFillColor2!==void 0&&(i.Pr=r.bottomFillColor2),i}function IAe(t,e,r,s){const a={Re:e,wt:t,Wt:[r.open,r.high,r.low,r.close],yw:s};return r.color!==void 0&&(a.R=r.color),a}function MAe(t,e,r,s){const a={Re:e,wt:t,Wt:[r.open,r.high,r.low,r.close],yw:s};return r.color!==void 0&&(a.R=r.color),r.borderColor!==void 0&&(a.Ht=r.borderColor),r.wickColor!==void 0&&(a.vr=r.wickColor),a}function OAe(t,e,r,s,a){const i=ic(a)(r),o=Math.max(...i),l=Math.min(...i),d=i[i.length-1],h=[d,o,l,d],{time:f,color:m,...x}=r;return{Re:e,wt:t,Wt:h,yw:s,se:x,R:m}}function nb(t){return t.Wt!==void 0}function VF(t,e){return e.customValues!==void 0&&(t.Iw=e.customValues),t}function Dg(t){return(e,r,s,a,i,o)=>(function(l,d){return d?d(l):TAe(l)})(s,o)?VF({wt:e,Re:r,yw:a},s):VF(t(e,r,s,a,i),s)}function qF(t){return{Candlestick:Dg(MAe),Bar:Dg(IAe),Area:Dg(AAe),Baseline:Dg(_Ae),Histogram:Dg(zF),Line:Dg(zF),Custom:Dg(OAe)}[t]}function HF(t){return{Re:0,Ew:new Map,Hh:t}}function WF(t,e){if(t!==void 0&&t.length!==0)return{Aw:e.key(t[0].wt),zw:e.key(t[t.length-1].wt)}}function YF(t){let e;return t.forEach((r=>{e===void 0&&(e=r.yw)})),ic(e)}class RAe{constructor(e){this.Lw=new Map,this.Ow=new Map,this.Nw=new Map,this.Fw=[],this.o_=e}m(){this.Lw.clear(),this.Ow.clear(),this.Nw.clear(),this.Fw=[]}Ww(e,r){let s=this.Lw.size!==0,a=!1;const i=this.Ow.get(e);if(i!==void 0)if(this.Ow.size===1)s=!1,a=!0,this.Lw.clear();else for(const d of this.Fw)d.pointData.Ew.delete(e)&&(a=!0);let o=[];if(r.length!==0){const d=r.map((b=>b.time)),h=this.o_.createConverterToInternalObj(r),f=qF(e.Rr()),m=e.ca(),x=e.fa();o=r.map(((b,j)=>{const N=h(b.time),w=this.o_.key(N);let C=this.Lw.get(w);C===void 0&&(C=HF(N),this.Lw.set(w,C),a=!0);const T=f(N,C.Re,b,d[j],m,x);return C.Ew.set(e,T),T}))}s&&this.Hw(),this.Uw(e,o);let l=-1;if(a){const d=[];this.Lw.forEach((h=>{d.push({timeWeight:0,time:h.Hh,pointData:h,originalTime:YF(h.Ew)})})),d.sort(((h,f)=>this.o_.key(h.time)-this.o_.key(f.time))),l=this.$w(d)}return this.qw(e,l,(function(d,h,f){const m=WF(d,f),x=WF(h,f);if(m!==void 0&&x!==void 0)return{Yw:!1,zh:m.zw>=x.zw&&m.Aw>=x.Aw}})(this.Ow.get(e),i,this.o_))}Ac(e){return this.Ww(e,[])}jw(e,r,s){const a=r;(function(w){w.yw===void 0&&(w.yw=w.time)})(a),this.o_.preprocessData(r);const i=this.o_.createConverterToInternalObj([r])(r.time),o=this.Nw.get(e);if(!s&&o!==void 0&&this.o_.key(i)<this.o_.key(o))throw new Error(`Cannot update oldest data, last time=${o}, new time=${i}`);let l=this.Lw.get(this.o_.key(i));if(s&&l===void 0)throw new Error("Cannot update non-existing data point when historicalUpdate is true");const d=l===void 0;l===void 0&&(l=HF(i),this.Lw.set(this.o_.key(i),l));const h=qF(e.Rr()),f=e.ca(),m=e.fa(),x=h(i,l.Re,r,a.yw,f,m);l.Ew.set(e,x),s?this.Kw(e,x,l.Re):this.Xw(e,x);const b={zh:nb(x),Yw:s};if(!d)return this.qw(e,-1,b);const j={timeWeight:0,time:l.Hh,pointData:l,originalTime:YF(l.Ew)},N=Hy(this.Fw,this.o_.key(j.time),((w,C)=>this.o_.key(w.time)<C));this.Fw.splice(N,0,j);for(let w=N;w<this.Fw.length;++w)LN(this.Fw[w].pointData,w);return this.o_.fillWeightsForPoints(this.Fw,N),this.qw(e,N,b)}Zw(e,r){const s=this.Ow.get(e);if(s===void 0||r<=0)return[[],this.Gw()];r=Math.min(r,s.length);const a=s.splice(-r).reverse();s.length===0?this.Nw.delete(e):this.Nw.set(e,s[s.length-1].wt);for(const i of a){const o=this.Lw.get(this.o_.key(i.wt));if(o&&(o.Ew.delete(e),o.Ew.size===0)){this.Lw.delete(this.o_.key(o.Hh)),this.Fw.splice(o.Re,1);for(let l=o.Re;l<this.Fw.length;++l)LN(this.Fw[l].pointData,l)}}return[a,this.qw(e,this.Fw.length-1,{Yw:!1,zh:!1})]}Xw(e,r){let s=this.Ow.get(e);s===void 0&&(s=[],this.Ow.set(e,s));const a=s.length!==0?s[s.length-1]:null;a===null||this.o_.key(r.wt)>this.o_.key(a.wt)?nb(r)&&s.push(r):nb(r)?s[s.length-1]=r:s.splice(-1,1),this.Nw.set(e,r.wt)}Kw(e,r,s){const a=this.Ow.get(e);if(a===void 0)return;const i=Hy(a,s,((o,l)=>o.Re<l));nb(r)?a[i]=r:a.splice(i,1)}Uw(e,r){r.length!==0?(this.Ow.set(e,r.filter(nb)),this.Nw.set(e,r[r.length-1].wt)):(this.Ow.delete(e),this.Nw.delete(e))}Hw(){for(const e of this.Fw)e.pointData.Ew.size===0&&this.Lw.delete(this.o_.key(e.time))}$w(e){let r=-1;for(let s=0;s<this.Fw.length&&s<e.length;++s){const a=this.Fw[s],i=e[s];if(this.o_.key(a.time)!==this.o_.key(i.time)){r=s;break}i.timeWeight=a.timeWeight,LN(i.pointData,s)}if(r===-1&&this.Fw.length!==e.length&&(r=Math.min(this.Fw.length,e.length)),r===-1)return-1;for(let s=r;s<e.length;++s)LN(e[s].pointData,s);return this.o_.fillWeightsForPoints(e,r),this.Fw=e,r}Jw(){if(this.Ow.size===0)return null;let e=0;return this.Ow.forEach((r=>{r.length!==0&&(e=Math.max(e,r[r.length-1].Re))})),e}qw(e,r,s){const a=this.Gw();if(r!==-1)this.Ow.forEach(((i,o)=>{a.Oo.set(o,{se:i,Qw:o===e?s:void 0})})),this.Ow.has(e)||a.Oo.set(e,{se:[],Qw:s}),a.Et.tg=this.Fw,a.Et.ig=r;else{const i=this.Ow.get(e);a.Oo.set(e,{se:i||[],Qw:s})}return a}Gw(){return{Oo:new Map,Et:{_u:this.Jw()}}}}function LN(t,e){t.Re=e,t.Ew.forEach((r=>{r.Re=e}))}function DAe(t,e){return t.wt<e}function $Ae(t,e){return e<t.wt}function xZ(t,e,r){const s=e.Uh(),a=e.bi(),i=Hy(t,s,DAe),o=cZ(t,a,$Ae);if(!r)return{from:i,to:o};let l=i,d=o;return i>0&&i<t.length&&t[i].wt>=s&&(l=i-1),o>0&&o<t.length&&t[o-1].wt<=a&&(d=o+1),{from:l,to:d}}class bI{constructor(e,r,s){this.sg=!0,this.ng=!0,this.eg=!0,this.rg=[],this.hg=null,this.Jn=e,this.Qn=r,this.ag=s}yt(e){this.sg=!0,e==="data"&&(this.ng=!0),e==="options"&&(this.eg=!0)}Tt(){return this.Jn.Vt()?(this.lg(),this.hg===null?null:this.og):null}_g(){this.rg=this.rg.map((e=>({...e,...this.Jn.Rh().Dr(e.wt)})))}ug(){this.hg=null}lg(){this.ng&&(this.cg(),this.ng=!1),this.eg&&(this._g(),this.eg=!1),this.sg&&(this.dg(),this.sg=!1)}dg(){const e=this.Jn.Ft(),r=this.Qn.Et();if(this.ug(),r.Ki()||e.Ki())return;const s=r.Pe();if(s===null||this.Jn.Xs().zr()===0)return;const a=this.Jn.zt();a!==null&&(this.hg=xZ(this.rg,s,this.ag),this.fg(e,r,a.Wt),this.pg())}}class LAe{constructor(e,r){this.vg=e,this.Yi=r}nt(e,r,s){this.vg.draw(e,this.Yi,r,s)}}class FAe extends bI{constructor(e,r,s){super(e,r,!1),this.sh=s,this.og=new LAe(this.sh.renderer(),(a=>{const i=e.zt();return i===null?null:e.Ft().Nt(a,i.Wt)}))}da(e){return this.sh.priceValueBuilder(e)}pa(e){return this.sh.isWhitespace(e)}cg(){const e=this.Jn.Rh();this.rg=this.Jn.Xs().Hr().map((r=>({wt:r.Re,_t:NaN,...e.Dr(r.Re),mg:r.se})))}fg(e,r){r.uu(this.rg,_w(this.hg))}pg(){this.sh.update({bars:this.rg.map(BAe),barSpacing:this.Qn.Et().mu(),visibleRange:this.hg},this.Jn.N())}}function BAe(t){return{x:t._t,time:t.wt,originalData:t.mg,barColor:t.cr}}const UAe={color:"#2196f3"},zAe=(t,e,r)=>{const s=Dp(r);return new FAe(t,e,s)};function wI(t){const e={value:t.Wt[3],time:t.yw};return t.Iw!==void 0&&(e.customValues=t.Iw),e}function KF(t){const e=wI(t);return t.R!==void 0&&(e.color=t.R),e}function VAe(t){const e=wI(t);return t.vt!==void 0&&(e.lineColor=t.vt),t.mr!==void 0&&(e.topColor=t.mr),t.wr!==void 0&&(e.bottomColor=t.wr),e}function qAe(t){const e=wI(t);return t.gr!==void 0&&(e.topLineColor=t.gr),t.Mr!==void 0&&(e.bottomLineColor=t.Mr),t.br!==void 0&&(e.topFillColor1=t.br),t.Sr!==void 0&&(e.topFillColor2=t.Sr),t.Cr!==void 0&&(e.bottomFillColor1=t.Cr),t.Pr!==void 0&&(e.bottomFillColor2=t.Pr),e}function yZ(t){const e={open:t.Wt[0],high:t.Wt[1],low:t.Wt[2],close:t.Wt[3],time:t.yw};return t.Iw!==void 0&&(e.customValues=t.Iw),e}function HAe(t){const e=yZ(t);return t.R!==void 0&&(e.color=t.R),e}function WAe(t){const e=yZ(t),{R:r,Ht:s,vr:a}=t;return r!==void 0&&(e.color=r),s!==void 0&&(e.borderColor=s),a!==void 0&&(e.wickColor=a),e}function ij(t){return{Area:VAe,Line:KF,Baseline:qAe,Histogram:KF,Bar:HAe,Candlestick:WAe,Custom:YAe}[t]}function YAe(t){const e=t.yw;return{...t.se,time:e}}const KAe={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},GAe={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},XAe={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:tZ,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},A3={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0,ensureEdgeTickMarksVisible:!1},QAe={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1};function GF(){return{addDefaultPane:!0,width:0,height:0,autoSize:!1,layout:XAe,crosshair:KAe,grid:GAe,overlayPriceScales:{...A3},leftPriceScale:{...A3,visible:!1},rightPriceScale:{...A3,visible:!0},timeScale:QAe,localization:{locale:Wy?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class vZ{constructor(e,r,s){this.Hf=e,this.wg=r,this.gg=s??0}applyOptions(e){this.Hf.Qt().oc(this.wg,e,this.gg)}options(){return this.Yi().N()}width(){return pk(this.wg)?this.Hf.ow(this.wg):0}setVisibleRange(e){this.setAutoScale(!1),this.Yi().Fl(new xl(e.from,e.to))}getVisibleRange(){let e,r,s=this.Yi().Qe();if(s===null)return null;if(this.Yi().Ja()){const a=this.Yi().fo(),i=mZ(a);s=Ux(s,this.Yi().tl()),e=Number((Math.round(s.$e()/a)*a).toFixed(i)),r=Number((Math.round(s.qe()/a)*a).toFixed(i))}else e=s.$e(),r=s.qe();return{from:e,to:r}}setAutoScale(e){this.applyOptions({autoScale:e})}Yi(){return xt(this.Hf.Qt()._c(this.wg,this.gg)).Ft}}class JAe{constructor(e,r,s,a){this.Hf=e,this.Pt=s,this.Mg=r,this.bg=a}getHeight(){return this.Pt.$t()}setHeight(e){const r=this.Hf.Qt(),s=r.Uc(this.Pt);r.vc(s,e)}getStretchFactor(){return this.Pt.Bo()}setStretchFactor(e){this.Pt.Io(e),this.Hf.Qt().Ih()}paneIndex(){return this.Hf.Qt().Uc(this.Pt)}moveTo(e){const r=this.paneIndex();r!==e&&(xo(e>=0&&e<this.Hf.$f().length,"Invalid pane index"),this.Hf.Qt().wc(r,e))}getSeries(){return this.Pt.Oo().map((e=>this.Mg(e)))??[]}getHTMLElement(){const e=this.Hf.$f();return e&&e.length!==0&&e[this.paneIndex()]?e[this.paneIndex()].Zf():null}attachPrimitive(e){this.Pt._a(e),e.attached&&e.attached({chart:this.bg,requestUpdate:()=>this.Pt.Qt().Ih()})}detachPrimitive(e){this.Pt.ua(e)}priceScale(e){if(this.Pt.Do(e)===null)throw new Error(`Cannot find price scale with id: ${e}`);return new vZ(this.Hf,e,this.paneIndex())}setPreserveEmptyPane(e){this.Pt.zo(e)}preserveEmptyPane(){return this.Pt.Lo()}addCustomSeries(e,r={},s=0){return this.bg.addCustomSeries(e,r,s)}addSeries(e,r={}){return this.bg.addSeries(e,r,this.paneIndex())}}const ZAe={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class XF{constructor(e){this.ir=e}applyOptions(e){this.ir.hr(e)}options(){return this.ir.N()}Sg(){return this.ir}}class e_e{constructor(e,r,s,a,i,o){this.xg=new Wa,this.Jn=e,this.Cg=r,this.Pg=s,this.o_=i,this.bg=a,this.yg=o}m(){this.xg.m()}priceFormatter(){return this.Jn.ea()}priceToCoordinate(e){const r=this.Jn.zt();return r===null?null:this.Jn.Ft().Nt(e,r.Wt)}coordinateToPrice(e){const r=this.Jn.zt();return r===null?null:this.Jn.Ft().Ts(e,r.Wt)}barsInLogicalRange(e){if(e===null)return null;const r=new Jx(new Qx(e.from,e.to)).y_(),s=this.Jn.Xs();if(s.Ki())return null;const a=s.Fr(r.Uh(),1),i=s.Fr(r.bi(),-1),o=xt(s.Lr()),l=xt(s.Ks());if(a!==null&&i!==null&&a.Re>i.Re)return{barsBefore:e.from-o,barsAfter:l-e.to};const d={barsBefore:a===null||a.Re===o?e.from-o:a.Re-o,barsAfter:i===null||i.Re===l?l-e.to:l-i.Re};return a!==null&&i!==null&&(d.from=a.yw,d.to=i.yw),d}setData(e){this.o_,this.Jn.Rr(),this.Cg.kg(this.Jn,e),this.Tg("full")}update(e,r=!1){this.Jn.Rr(),this.Cg.Rg(this.Jn,e,r),this.Tg("update")}pop(e=1){const r=this.Cg.Dg(this.Jn,e);r.length!==0&&this.Tg("update");const s=ij(this.seriesType());return r.map((a=>s(a)))}dataByIndex(e,r){const s=this.Jn.Xs().Fr(e,r);return s===null?null:ij(this.seriesType())(s)}data(){const e=ij(this.seriesType());return this.Jn.Xs().Hr().map((r=>e(r)))}subscribeDataChanged(e){this.xg.i(e)}unsubscribeDataChanged(e){this.xg._(e)}applyOptions(e){this.Jn.hr(e)}options(){return cm(this.Jn.N())}priceScale(){return this.Pg.priceScale(this.Jn.Ft().ma(),this.getPane().paneIndex())}createPriceLine(e){const r=Vc(cm(ZAe),e),s=this.Jn.Oh(r);return new XF(s)}removePriceLine(e){this.Jn.Nh(e.Sg())}priceLines(){return this.Jn.Fh().map((e=>new XF(e)))}seriesType(){return this.Jn.Rr()}lastValueData(e){const r=this.Jn.ye(e);return r.ke?{noData:!0}:{noData:!1,price:r.gt,color:r.R}}attachPrimitive(e){this.Jn._a(e),e.attached&&e.attached({chart:this.bg,series:this,requestUpdate:()=>this.Jn.Qt().Ih(),horzScaleBehavior:this.o_})}detachPrimitive(e){this.Jn.ua(e),e.detached&&e.detached(),this.Jn.Qt().Ih()}getPane(){const e=this.Jn,r=xt(this.Jn.Qt().Hn(e));return this.yg(r)}moveToPane(e){this.Jn.Qt().Nc(this.Jn,e)}seriesOrder(){const e=this.Jn.Qt().Hn(this.Jn);return e===null?-1:e.Oo().indexOf(this.Jn)}setSeriesOrder(e){const r=this.Jn.Qt().Hn(this.Jn);r!==null&&r.Qo(this.Jn,e)}Tg(e){this.xg.v()&&this.xg.p(e)}}class t_e{constructor(e,r,s){this.Vg=new Wa,this.z_=new Wa,this.gm=new Wa,this.ts=e,this.uh=e.Et(),this.Zm=r,this.uh.Vu().i(this.Bg.bind(this)),this.uh.Bu().i(this.Ig.bind(this)),this.Zm.ym().i(this.Eg.bind(this)),this.o_=s}m(){this.uh.Vu().u(this),this.uh.Bu().u(this),this.Zm.ym().u(this),this.Vg.m(),this.z_.m(),this.gm.m()}scrollPosition(){return this.uh.gu()}scrollToPosition(e,r){r?this.uh.Tu(e,1e3):this.ts.fn(e)}scrollToRealTime(){this.uh.ku()}getVisibleRange(){const e=this.uh.nu();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const r={from:this.o_.convertHorzItemToInternal(e.from),to:this.o_.convertHorzItemToInternal(e.to)},s=this.uh.au(r);this.ts.Lc(s)}getVisibleLogicalRange(){const e=this.uh.su();return e===null?null:{from:e.Uh(),to:e.bi()}}setVisibleLogicalRange(e){xo(e.from<=e.to,"The from index cannot be after the to index."),this.ts.Lc(e)}resetTimeScale(){this.ts.cn()}fitContent(){this.ts.Au()}logicalToCoordinate(e){const r=this.ts.Et();return r.Ki()?null:r.qt(e)}coordinateToLogical(e){return this.uh.Ki()?null:this.uh.cu(e)}timeToIndex(e,r){const s=this.o_.convertHorzItemToInternal(e);return this.uh.Q_(s,r)}timeToCoordinate(e){const r=this.timeToIndex(e,!1);return r===null?null:this.uh.qt(r)}coordinateToTime(e){const r=this.ts.Et(),s=r.cu(e),a=r.ss(s);return a===null?null:a.originalTime}width(){return this.Zm.Gf().width}height(){return this.Zm.Gf().height}subscribeVisibleTimeRangeChange(e){this.Vg.i(e)}unsubscribeVisibleTimeRangeChange(e){this.Vg._(e)}subscribeVisibleLogicalRangeChange(e){this.z_.i(e)}unsubscribeVisibleLogicalRangeChange(e){this.z_._(e)}subscribeSizeChange(e){this.gm.i(e)}unsubscribeSizeChange(e){this.gm._(e)}applyOptions(e){this.uh.hr(e)}options(){return{...cm(this.uh.N()),barSpacing:this.uh.mu()}}Bg(){this.Vg.v()&&this.Vg.p(this.getVisibleRange())}Ig(){this.z_.v()&&this.z_.p(this.getVisibleLogicalRange())}Eg(e){this.gm.p(e.width,e.height)}}function QF(t){return(function(e){if(_N(e.handleScale)){const s=e.handleScale;e.handleScale={axisDoubleClickReset:{time:s,price:s},axisPressedMouseMove:{time:s,price:s},mouseWheel:s,pinch:s}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:s,axisDoubleClickReset:a}=e.handleScale;_N(s)&&(e.handleScale.axisPressedMouseMove={time:s,price:s}),_N(a)&&(e.handleScale.axisDoubleClickReset={time:a,price:a})}const r=e.handleScroll;_N(r)&&(e.handleScroll={horzTouchDrag:r,vertTouchDrag:r,mouseWheel:r,pressedMouseMove:r})})(t),t}class r_e{constructor(e,r,s){this.Ag=new Map,this.zg=new Map,this.Lg=new Wa,this.Og=new Wa,this.Ng=new Wa,this.qu=new WeakMap,this.Fg=new RAe(r);const a=s===void 0?cm(GF()):Vc(cm(GF()),QF(s));this.Wg=r,this.Hf=new EAe(e,a,r),this.Hf.Xv().i((o=>{this.Lg.v()&&this.Lg.p(this.Hg(o()))}),this),this.Hf.Zv().i((o=>{this.Og.v()&&this.Og.p(this.Hg(o()))}),this),this.Hf.cc().i((o=>{this.Ng.v()&&this.Ng.p(this.Hg(o()))}),this);const i=this.Hf.Qt();this.Ug=new t_e(i,this.Hf.iw(),this.Wg)}remove(){this.Hf.Xv().u(this),this.Hf.Zv().u(this),this.Hf.cc().u(this),this.Ug.m(),this.Hf.m(),this.Ag.clear(),this.zg.clear(),this.Lg.m(),this.Og.m(),this.Ng.m(),this.Fg.m()}resize(e,r,s){this.autoSizeActive()||this.Hf.Jm(e,r,s)}addCustomSeries(e,r={},s=0){const a=(i=>({type:"Custom",isBuiltIn:!1,defaultOptions:{...UAe,...i.defaultOptions()},$g:zAe,qg:i}))(Dp(e));return this.Yg(a,r,s)}addSeries(e,r={},s=0){return this.Yg(e,r,s)}removeSeries(e){const r=ic(this.Ag.get(e)),s=this.Fg.Ac(r);this.Hf.Qt().Ac(r),this.jg(s),this.Ag.delete(e),this.zg.delete(r)}kg(e,r){this.jg(this.Fg.Ww(e,r))}Rg(e,r,s){this.jg(this.Fg.jw(e,r,s))}Dg(e,r){const[s,a]=this.Fg.Zw(e,r);return s.length!==0&&this.jg(a),s}subscribeClick(e){this.Lg.i(e)}unsubscribeClick(e){this.Lg._(e)}subscribeCrosshairMove(e){this.Ng.i(e)}unsubscribeCrosshairMove(e){this.Ng._(e)}subscribeDblClick(e){this.Og.i(e)}unsubscribeDblClick(e){this.Og._(e)}priceScale(e,r=0){return new vZ(this.Hf,e,r)}timeScale(){return this.Ug}applyOptions(e){this.Hf.hr(QF(e))}options(){return this.Hf.N()}takeScreenshot(e=!1,r=!1){let s,a;try{r||(s=this.Hf.Qt().N().crosshair.mode,this.Hf.hr({crosshair:{mode:2}})),a=this.Hf.aw(e)}finally{r||s===void 0||this.Hf.Qt().hr({crosshair:{mode:s}})}return a}addPane(e=!1){const r=this.Hf.Qt().$c();return r.zo(e),this.Kg(r)}removePane(e){this.Hf.Qt().fc(e)}swapPanes(e,r){this.Hf.Qt().mc(e,r)}autoSizeActive(){return this.Hf.cw()}chartElement(){return this.Hf.ip()}panes(){return this.Hf.Qt().$s().map((e=>this.Kg(e)))}paneSize(e=0){const r=this.Hf.pw(e);return{height:r.height,width:r.width}}setCrosshairPosition(e,r,s){const a=this.Ag.get(s);if(a===void 0)return;const i=this.Hf.Qt().Hn(a);i!==null&&this.Hf.Qt().Rc(e,r,i)}clearCrosshairPosition(){this.Hf.Qt().Dc(!0)}horzBehaviour(){return this.Wg}Yg(e,r={},s=0){xo(e.$g!==void 0),(function(d){if(d===void 0||d.type==="custom")return;const h=d;h.minMove!==void 0&&h.precision===void 0&&(h.precision=mZ(h.minMove))})(r.priceFormat),e.type==="Candlestick"&&(function(d){d.borderColor!==void 0&&(d.borderUpColor=d.borderColor,d.borderDownColor=d.borderColor),d.wickColor!==void 0&&(d.wickUpColor=d.wickColor,d.wickDownColor=d.wickColor)})(r);const a=Vc(cm(ZJ),cm(e.defaultOptions),r),i=e.$g,o=new xk(this.Hf.Qt(),e.type,a,i,e.qg);this.Hf.Qt().Ic(o,s);const l=new e_e(o,this,this,this,this.Wg,(d=>this.Kg(d)));return this.Ag.set(l,o),this.zg.set(o,l),l}jg(e){const r=this.Hf.Qt();r.Vc(e.Et._u,e.Et.tg,e.Et.ig),e.Oo.forEach(((s,a)=>a.ht(s.se,s.Qw))),r.Et().K_(),r.vu()}Xg(e){return ic(this.zg.get(e))}Hg(e){const r=new Map;e.Dw.forEach(((a,i)=>{const o=i.Rr(),l=ij(o)(a);if(o!=="Custom")xo(PAe(l));else{const d=i.fa();xo(!d||d(l)===!1)}r.set(this.Xg(i),l)}));const s=e.Rw!==void 0&&this.zg.has(e.Rw)?this.Xg(e.Rw):void 0;return{time:e.yw,logical:e.Re,point:e.kw,paneIndex:e.Tw,hoveredSeries:s,hoveredObjectId:e.Vw,seriesData:r,sourceEvent:e.Bw}}Kg(e){let r=this.qu.get(e);return r||(r=new JAe(this.Hf,(s=>this.Xg(s)),e,this),this.qu.set(e,r)),r}}function n_e(t){if(E1(t)){const e=document.getElementById(t);return xo(e!==null,`Cannot find element in DOM with id=${t}`),e}return t}function s_e(t,e,r){const s=n_e(t),a=new r_e(s,e,r);return e.setOptions(a.options()),a}function JF(t,e){return s_e(t,new OF,OF.ld(e))}class bZ extends bI{constructor(e,r){super(e,r,!0)}fg(e,r,s){r.uu(this.rg,_w(this.hg)),e.Ul(this.rg,s,_w(this.hg))}Zg(e,r){return{wt:e,gt:r,_t:NaN,ut:NaN}}cg(){const e=this.Jn.Rh();this.rg=this.Jn.Xs().Hr().map((r=>{const s=r.Wt[3];return this.Gg(r.Re,s,e)}))}}function a_e(t,e,r,s,a,i,o){if(e.length===0||s.from>=e.length||s.to<=0)return;const{context:l,horizontalPixelRatio:d,verticalPixelRatio:h}=t,f=e[s.from];let m=i(t,f),x=f;if(s.to-s.from<2){const b=a/2;l.beginPath();const j={_t:f._t-b,ut:f.ut},N={_t:f._t+b,ut:f.ut};l.moveTo(j._t*d,j.ut*h),l.lineTo(N._t*d,N.ut*h),o(t,m,j,N)}else{const b=(N,w)=>{o(t,m,x,w),l.beginPath(),m=N,x=w};let j=x;l.beginPath(),l.moveTo(f._t*d,f.ut*h);for(let N=s.from+1;N<s.to;++N){j=e[N];const w=i(t,j);switch(r){case 0:l.lineTo(j._t*d,j.ut*h);break;case 1:l.lineTo(j._t*d,e[N-1].ut*h),w!==m&&(b(w,j),l.lineTo(j._t*d,e[N-1].ut*h)),l.lineTo(j._t*d,j.ut*h);break;case 2:{const[C,T]=i_e(e,N-1,N);l.bezierCurveTo(C._t*d,C.ut*h,T._t*d,T.ut*h,j._t*d,j.ut*h);break}}r!==1&&w!==m&&(b(w,j),l.moveTo(j._t*d,j.ut*h))}(x!==j||x===j&&r===1)&&o(t,m,x,j)}}const ZF=6;function _3(t,e){return{_t:t._t-e._t,ut:t.ut-e.ut}}function e9(t,e){return{_t:t._t/e,ut:t.ut/e}}function i_e(t,e,r){const s=Math.max(0,e-1),a=Math.min(t.length-1,r+1);var i,o;return[(i=t[e],o=e9(_3(t[r],t[s]),ZF),{_t:i._t+o._t,ut:i.ut+o.ut}),_3(t[r],e9(_3(t[a],t[e]),ZF))]}function o_e(t,e){const r=t.context;r.strokeStyle=e,r.stroke()}class l_e extends og{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et(e){if(this.rt===null)return;const{ot:r,lt:s,Jg:a,Qg:i,ct:o,Xt:l,tM:d}=this.rt;if(s===null)return;const h=e.context;h.lineCap="butt",h.lineWidth=o*e.verticalPixelRatio,A0(h,l),h.lineJoin="round";const f=this.iM.bind(this);i!==void 0&&a_e(e,r,i,s,a,f,o_e),d&&(function(m,x,b,j,N){if(j.to-j.from<=0)return;const{horizontalPixelRatio:w,verticalPixelRatio:C,context:T}=m;let O=null;const I=Math.max(1,Math.floor(w))%2/2,P=b*C+I;for(let A=j.to-1;A>=j.from;--A){const R=x[A];if(R){const B=N(m,R);B!==O&&(T.beginPath(),O!==null&&T.fill(),T.fillStyle=B,O=B);const V=Math.round(R._t*w)+I,X=R.ut*C;T.moveTo(V,X),T.arc(V,X,P,0,2*Math.PI)}}T.fill()})(e,r,d,s,f)}}class c_e extends l_e{iM(e,r){return r.vt}}class d_e extends bZ{constructor(){super(...arguments),this.og=new c_e}Gg(e,r,s){return{...this.Zg(e,r),...s.Dr(e)}}pg(){const e=this.Jn.N(),r={ot:this.rg,Xt:e.lineStyle,Qg:e.lineVisible?e.lineType:void 0,ct:e.lineWidth,tM:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,lt:this.hg,Jg:this.Qn.Et().mu()};this.og.ht(r)}}const t9={type:"Line",isBuiltIn:!0,defaultOptions:{color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},$g:(t,e)=>new d_e(t,e)};class u_e extends bI{constructor(e,r){super(e,r,!1)}fg(e,r,s){r.uu(this.rg,_w(this.hg)),e.ql(this.rg,s,_w(this.hg))}VM(e,r,s){return{wt:e,qh:r.Wt[0],Yh:r.Wt[1],jh:r.Wt[2],Kh:r.Wt[3],_t:NaN,Yl:NaN,jl:NaN,Kl:NaN,Xl:NaN}}cg(){const e=this.Jn.Rh();this.rg=this.Jn.Xs().Hr().map((r=>this.Gg(r.Re,r,e)))}}class h_e extends og{constructor(){super(...arguments),this.Yt=null,this.yM=0}ht(e){this.Yt=e}et(e){if(this.Yt===null||this.Yt.Xs.length===0||this.Yt.lt===null)return;const{horizontalPixelRatio:r}=e;this.yM=(function(i,o){if(i>=2.5&&i<=4)return Math.floor(3*o);const l=1-.2*Math.atan(Math.max(4,i)-4)/(.5*Math.PI),d=Math.floor(i*l*o),h=Math.floor(i*o),f=Math.min(d,h);return Math.max(Math.floor(o),f)})(this.Yt.mu,r),this.yM>=2&&Math.floor(r)%2!=this.yM%2&&this.yM--;const s=this.Yt.Xs;this.Yt.BM&&this.IM(e,s,this.Yt.lt),this.Yt.Mi&&this.uv(e,s,this.Yt.lt);const a=this.EM(r);(!this.Yt.Mi||this.yM>2*a)&&this.AM(e,s,this.Yt.lt)}IM(e,r,s){if(this.Yt===null)return;const{context:a,horizontalPixelRatio:i,verticalPixelRatio:o}=e;let l="",d=Math.min(Math.floor(i),Math.floor(this.Yt.mu*i));d=Math.max(Math.floor(i),Math.min(d,this.yM));const h=Math.floor(.5*d);let f=null;for(let m=s.from;m<s.to;m++){const x=r[m];x.pr!==l&&(a.fillStyle=x.pr,l=x.pr);const b=Math.round(Math.min(x.Yl,x.Xl)*o),j=Math.round(Math.max(x.Yl,x.Xl)*o),N=Math.round(x.jl*o),w=Math.round(x.Kl*o);let C=Math.round(i*x._t)-h;const T=C+d-1;f!==null&&(C=Math.max(f+1,C),C=Math.min(C,T));const O=T-C+1;a.fillRect(C,N,O,b-N),a.fillRect(C,j+1,O,w-j),f=T}}EM(e){let r=Math.floor(1*e);this.yM<=2*r&&(r=Math.floor(.5*(this.yM-1)));const s=Math.max(Math.floor(e),r);return this.yM<=2*s?Math.max(Math.floor(e),Math.floor(1*e)):s}uv(e,r,s){if(this.Yt===null)return;const{context:a,horizontalPixelRatio:i,verticalPixelRatio:o}=e;let l="";const d=this.EM(i);let h=null;for(let f=s.from;f<s.to;f++){const m=r[f];m.dr!==l&&(a.fillStyle=m.dr,l=m.dr);let x=Math.round(m._t*i)-Math.floor(.5*this.yM);const b=x+this.yM-1,j=Math.round(Math.min(m.Yl,m.Xl)*o),N=Math.round(Math.max(m.Yl,m.Xl)*o);if(h!==null&&(x=Math.max(h+1,x),x=Math.min(x,b)),this.Yt.mu*i>2*d)y5e(a,x,j,b-x+1,N-j+1,d);else{const w=b-x+1;a.fillRect(x,j,w,N-j+1)}h=b}}AM(e,r,s){if(this.Yt===null)return;const{context:a,horizontalPixelRatio:i,verticalPixelRatio:o}=e;let l="";const d=this.EM(i);for(let h=s.from;h<s.to;h++){const f=r[h];let m=Math.round(Math.min(f.Yl,f.Xl)*o),x=Math.round(Math.max(f.Yl,f.Xl)*o),b=Math.round(f._t*i)-Math.floor(.5*this.yM),j=b+this.yM-1;if(f.cr!==l){const N=f.cr;a.fillStyle=N,l=N}this.Yt.Mi&&(b+=d,m+=d,j-=d,x-=d),m>x||a.fillRect(b,m,j-b+1,x-m+1)}}}class f_e extends u_e{constructor(){super(...arguments),this.og=new h_e}Gg(e,r,s){return{...this.VM(e,r,s),...s.Dr(e)}}pg(){const e=this.Jn.N();this.og.ht({Xs:this.rg,mu:this.Qn.Et().mu(),BM:e.wickVisible,Mi:e.borderVisible,lt:this.hg})}}const r9={type:"Candlestick",isBuiltIn:!0,defaultOptions:{upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},$g:(t,e)=>new f_e(t,e)};class m_e extends og{constructor(){super(...arguments),this.Yt=null,this.zM=[]}ht(e){this.Yt=e,this.zM=[]}et({context:e,horizontalPixelRatio:r,verticalPixelRatio:s}){if(this.Yt===null||this.Yt.ot.length===0||this.Yt.lt===null)return;this.zM.length||this.LM(r);const a=Math.max(1,Math.floor(s)),i=Math.round(this.Yt.OM*s)-Math.floor(a/2),o=i+a;for(let l=this.Yt.lt.from;l<this.Yt.lt.to;l++){const d=this.Yt.ot[l],h=this.zM[l-this.Yt.lt.from],f=Math.round(d.ut*s);let m,x;e.fillStyle=d.cr,f<=i?(m=f,x=o):(m=i,x=f-Math.floor(a/2)+a),e.fillRect(h.Uh,m,h.bi-h.Uh+1,x-m)}}LM(e){if(this.Yt===null||this.Yt.ot.length===0||this.Yt.lt===null)return void(this.zM=[]);const r=Math.ceil(this.Yt.mu*e)<=1?0:Math.max(1,Math.floor(e)),s=Math.round(this.Yt.mu*e)-r;this.zM=new Array(this.Yt.lt.to-this.Yt.lt.from);for(let i=this.Yt.lt.from;i<this.Yt.lt.to;i++){const o=this.Yt.ot[i],l=Math.round(o._t*e);let d,h;if(s%2){const f=(s-1)/2;d=l-f,h=l+f}else{const f=s/2;d=l-f,h=l+f-1}this.zM[i-this.Yt.lt.from]={Uh:d,bi:h,NM:l,ne:o._t*e,wt:o.wt}}for(let i=this.Yt.lt.from+1;i<this.Yt.lt.to;i++){const o=this.zM[i-this.Yt.lt.from],l=this.zM[i-this.Yt.lt.from-1];o.wt===l.wt+1&&o.Uh-l.bi!==r+1&&(l.NM>l.ne?l.bi=o.Uh-r-1:o.Uh=l.bi+r+1)}let a=Math.ceil(this.Yt.mu*e);for(let i=this.Yt.lt.from;i<this.Yt.lt.to;i++){const o=this.zM[i-this.Yt.lt.from];o.bi<o.Uh&&(o.bi=o.Uh);const l=o.bi-o.Uh+1;a=Math.min(l,a)}if(r>0&&a<4)for(let i=this.Yt.lt.from;i<this.Yt.lt.to;i++){const o=this.zM[i-this.Yt.lt.from];o.bi-o.Uh+1>a&&(o.NM>o.ne?o.bi-=1:o.Uh+=1)}}}class p_e extends bZ{constructor(){super(...arguments),this.og=new m_e}Gg(e,r,s){return{...this.Zg(e,r),...s.Dr(e)}}pg(){const e={ot:this.rg,mu:this.Qn.Et().mu(),lt:this.hg,OM:this.Jn.Ft().Nt(this.Jn.N().base,xt(this.Jn.zt()).Wt)};this.og.ht(e)}}const n9={type:"Histogram",isBuiltIn:!0,defaultOptions:{color:"#26a69a",base:0},$g:(t,e)=>new p_e(t,e)};class g_e{constructor(e,r){this.Jn=e,this.ah=r,this.WM()}detach(){this.Jn.detachPrimitive(this.ah)}getSeries(){return this.Jn}applyOptions(e){this.ah&&this.ah.hr&&this.ah.hr(e)}WM(){this.Jn.attachPrimitive(this.ah)}}const x_e={autoScale:!0,zOrder:"normal"};function Db(t,e){return gI(Math.min(Math.max(t,12),30)*e)}function Yy(t,e){switch(t){case"arrowDown":case"arrowUp":return Db(e,1);case"circle":return Db(e,.8);case"square":return Db(e,.7)}}function wZ(t){return(function(e){const r=Math.ceil(e);return r%2!=0?r-1:r})(Db(t,1))}function NZ(t){return Math.max(Db(t,.1),3)}function s9(t,e,r){return e?t:r?Math.ceil(t/2):0}function a9(t,e,r,s){const a=(Yy("arrowUp",s)-1)/2*r._b,i=(gI(s/2)-1)/2*r._b;e.beginPath(),t?(e.moveTo(r._t-a,r.ut),e.lineTo(r._t,r.ut-a),e.lineTo(r._t+a,r.ut),e.lineTo(r._t+i,r.ut),e.lineTo(r._t+i,r.ut+a),e.lineTo(r._t-i,r.ut+a),e.lineTo(r._t-i,r.ut)):(e.moveTo(r._t-a,r.ut),e.lineTo(r._t,r.ut+a),e.lineTo(r._t+a,r.ut),e.lineTo(r._t+i,r.ut),e.lineTo(r._t+i,r.ut-a),e.lineTo(r._t-i,r.ut-a),e.lineTo(r._t-i,r.ut)),e.fill()}function i9(t,e,r,s,a,i){const o=(Yy("arrowUp",s)-1)/2,l=(gI(s/2)-1)/2;return a>=e-l-2&&a<=e+l+2&&i>=(t?r:r-o)-2&&i<=(t?r+o:r)+2?!0:(()=>{if(a<e-o-3||a>e+o+3||i<(t?r-o-3:r)||i>(t?r:r+o+3))return!1;const d=Math.abs(a-e);return Math.abs(i-r)+3>=d/2})()}class y_e{constructor(){this.Yt=null,this.On=new Mw,this.F=-1,this.W="",this.Wp="",this.ub="normal"}ht(e){this.Yt=e}Nn(e,r,s){this.F===e&&this.W===r||(this.F=e,this.W=r,this.Wp=Iw(e,r),this.On.Bn()),this.ub=s}jn(e,r){if(this.Yt===null||this.Yt.lt===null)return null;for(let s=this.Yt.lt.from;s<this.Yt.lt.to;s++){const a=this.Yt.ot[s];if(a&&b_e(a,e,r))return{zOrder:"normal",externalId:a.Kn??""}}return null}draw(e){this.ub!=="aboveSeries"&&e.useBitmapCoordinateSpace((r=>{this.et(r)}))}drawBackground(e){this.ub==="aboveSeries"&&e.useBitmapCoordinateSpace((r=>{this.et(r)}))}et({context:e,horizontalPixelRatio:r,verticalPixelRatio:s}){if(this.Yt!==null&&this.Yt.lt!==null){e.textBaseline="middle",e.font=this.Wp;for(let a=this.Yt.lt.from;a<this.Yt.lt.to;a++){const i=this.Yt.ot[a];i.ri!==void 0&&(i.ri.Qi=this.On.Vi(e,i.ri.cb),i.ri.$t=this.F,i.ri._t=i._t-i.ri.Qi/2),v_e(i,e,r,s)}}}}function v_e(t,e,r,s){e.fillStyle=t.R,t.ri!==void 0&&(function(a,i,o,l,d,h){a.save(),a.scale(d,h),a.fillText(i,o,l),a.restore()})(e,t.ri.cb,t.ri._t,t.ri.ut,r,s),(function(a,i,o){if(a.zr!==0){switch(a.fb){case"arrowDown":return void a9(!1,i,o,a.zr);case"arrowUp":return void a9(!0,i,o,a.zr);case"circle":return void(function(l,d,h){const f=(Yy("circle",h)-1)/2;l.beginPath(),l.arc(d._t,d.ut,f*d._b,0,2*Math.PI,!1),l.fill()})(i,o,a.zr);case"square":return void(function(l,d,h){const f=Yy("square",h),m=(f-1)*d._b/2,x=d._t-m,b=d.ut-m;l.fillRect(x,b,f*d._b,f*d._b)})(i,o,a.zr)}a.fb}})(t,e,(function(a,i,o){const l=Math.max(1,Math.floor(i))%2/2;return{_t:Math.round(a._t*i)+l,ut:a.ut*o,_b:i}})(t,r,s))}function b_e(t,e,r){return!(t.ri===void 0||!(function(s,a,i,o,l,d){const h=o/2;return l>=s&&l<=s+i&&d>=a-h&&d<=a+h})(t.ri._t,t.ri.ut,t.ri.Qi,t.ri.$t,e,r))||(function(s,a,i){if(s.zr===0)return!1;switch(s.fb){case"arrowDown":return i9(!0,s._t,s.ut,s.zr,a,i);case"arrowUp":return i9(!1,s._t,s.ut,s.zr,a,i);case"circle":return(function(o,l,d,h,f){const m=2+Yy("circle",d)/2,x=o-h,b=l-f;return Math.sqrt(x*x+b*b)<=m})(s._t,s.ut,s.zr,a,i);case"square":return(function(o,l,d,h,f){const m=Yy("square",d),x=(m-1)/2,b=o-x,j=l-x;return h>=b&&h<=b+m&&f>=j&&f<=j+m})(s._t,s.ut,s.zr,a,i)}})(t,e,r)}function o9(t){return t==="atPriceTop"||t==="atPriceBottom"||t==="atPriceMiddle"}function w_e(t,e,r,s,a,i,o,l){const d=(function(j,N,w){if(o9(N.position)&&N.price!==void 0)return N.price;if("value"in(C=j)&&typeof C.value=="number")return j.value;var C;if((function(T){return"open"in T&&"high"in T&&"low"in T&&"close"in T})(j)){if(N.position==="inBar")return j.close;if(N.position==="aboveBar")return w?j.low:j.high;if(N.position==="belowBar")return w?j.high:j.low}})(r,e,o.priceScale().options().invertScale);if(d===void 0)return;const h=o9(e.position),f=l.timeScale(),m=_0(e.size)?Math.max(e.size,0):1,x=wZ(f.options().barSpacing)*m,b=x/2;switch(t.zr=x,e.position){case"inBar":case"atPriceMiddle":return t.ut=xt(o.priceToCoordinate(d)),void(t.ri!==void 0&&(t.ri.ut=t.ut+b+i+.6*a));case"aboveBar":case"atPriceTop":{const j=h?0:s.pb;return t.ut=xt(o.priceToCoordinate(d))-b-j,t.ri!==void 0&&(t.ri.ut=t.ut-b-.6*a,s.pb+=1.2*a),void(h||(s.pb+=x+i))}case"belowBar":case"atPriceBottom":{const j=h?0:s.mb;return t.ut=xt(o.priceToCoordinate(d))+b+j,t.ri!==void 0&&(t.ri.ut=t.ut+b+i+.6*a,s.mb+=1.2*a),void(h||(s.mb+=x+i))}}}class N_e{constructor(e,r,s){this.wb=[],this.xt=!0,this.gb=!0,this.Gt=new y_e,this.ge=e,this.Vp=r,this.Yt={ot:[],lt:null},this.Ps=s}renderer(){if(!this.ge.options().visible)return null;this.xt&&this.Mb();const e=this.Vp.options().layout;return this.Gt.Nn(e.fontSize,e.fontFamily,this.Ps.zOrder),this.Gt.ht(this.Yt),this.Gt}bb(e){this.wb=e,this.yt("data")}yt(e){this.xt=!0,e==="data"&&(this.gb=!0)}Sb(e){this.xt=!0,this.Ps=e}zOrder(){return this.Ps.zOrder==="aboveSeries"?"top":this.Ps.zOrder}Mb(){const e=this.Vp.timeScale(),r=this.wb;this.gb&&(this.Yt.ot=r.map((h=>({wt:h.time,_t:0,ut:0,zr:0,fb:h.shape,R:h.color,Kn:h.id,xb:h.xb,ri:void 0}))),this.gb=!1);const s=this.Vp.options().layout;this.Yt.lt=null;const a=e.getVisibleLogicalRange();if(a===null)return;const i=new Qx(Math.floor(a.from),Math.ceil(a.to));if(this.ge.data()[0]===null||this.Yt.ot.length===0)return;let o=NaN;const l=NZ(e.options().barSpacing),d={pb:l,mb:l};this.Yt.lt=xZ(this.Yt.ot,i,!0);for(let h=this.Yt.lt.from;h<this.Yt.lt.to;h++){const f=r[h];f.time!==o&&(d.pb=l,d.mb=l,o=f.time);const m=this.Yt.ot[h];m._t=xt(e.logicalToCoordinate(f.time)),f.text!==void 0&&f.text.length>0&&(m.ri={cb:f.text,_t:0,ut:0,Qi:0,$t:0});const x=this.ge.dataByIndex(f.time,0);x!==null&&w_e(m,f,x,d,s.fontSize,l,this.ge,this.Vp)}this.xt=!1}}function l9(t){return{...x_e,...t}}class j_e{constructor(e){this.sh=null,this.wb=[],this.Cb=[],this.Pb=null,this.ge=null,this.Vp=null,this.yb=!0,this.kb=null,this.Tb=null,this.Rb=null,this.Db=!0,this.Ps=l9(e)}attached(e){this.Vb(),this.Vp=e.chart,this.ge=e.series,this.sh=new N_e(this.ge,xt(this.Vp),this.Ps),this.lb=e.requestUpdate,this.ge.subscribeDataChanged((r=>this.Tg(r))),this.Db=!0,this.jM()}jM(){this.lb&&this.lb()}detached(){this.ge&&this.Pb&&this.ge.unsubscribeDataChanged(this.Pb),this.Vp=null,this.ge=null,this.sh=null,this.Pb=null}bb(e){this.Db=!0,this.wb=e,this.Vb(),this.yb=!0,this.Tb=null,this.jM()}Bb(){return this.wb}paneViews(){return this.sh?[this.sh]:[]}updateAllViews(){this.Ib()}hitTest(e,r){var s;return this.sh?((s=this.sh.renderer())==null?void 0:s.jn(e,r))??null:null}autoscaleInfo(e,r){if(this.Ps.autoScale&&this.sh){const s=this.Eb();if(s)return{priceRange:null,margins:s}}return null}hr(e){this.Ps=l9({...this.Ps,...e}),this.jM&&this.jM()}Eb(){const e=xt(this.Vp).timeScale().options().barSpacing;if(this.yb||e!==this.Rb){if(this.Rb=e,this.wb.length>0){const r=NZ(e),s=1.5*wZ(e)+2*r,a=this.Ab();this.kb={above:s9(s,a.aboveBar,a.inBar),below:s9(s,a.belowBar,a.inBar)}}else this.kb=null;this.yb=!1}return this.kb}Ab(){return this.Tb===null&&(this.Tb=this.wb.reduce(((e,r)=>(e[r.position]||(e[r.position]=!0),e)),{inBar:!1,aboveBar:!1,belowBar:!1,atPriceTop:!1,atPriceBottom:!1,atPriceMiddle:!1})),this.Tb}Vb(){var a;if(!this.Db||!this.Vp||!this.ge)return;const e=this.Vp.timeScale(),r=(a=this.ge)==null?void 0:a.data();if(e.getVisibleLogicalRange()==null||!this.ge||r.length===0)return void(this.Cb=[]);const s=e.timeToIndex(xt(r[0].time),!0);this.Cb=this.wb.map(((i,o)=>{const l=e.timeToIndex(i.time,!0),d=l<s?1:-1,h=xt(this.ge).dataByIndex(l,d),f={time:e.timeToIndex(xt(h).time,!1),position:i.position,shape:i.shape,color:i.color,id:i.id,xb:o,text:i.text,size:i.size,price:i.price,yw:i.time};if(i.position==="atPriceTop"||i.position==="atPriceBottom"||i.position==="atPriceMiddle"){if(i.price===void 0)throw new Error(`Price is required for position ${i.position}`);return{...f,position:i.position,price:i.price}}return{...f,position:i.position,price:i.price}})),this.Db=!1}Ib(e){this.sh&&(this.Vb(),this.sh.bb(this.Cb),this.sh.Sb(this.Ps),this.sh.yt(e))}Tg(e){this.Db=!0,this.jM()}}class S_e extends g_e{constructor(e,r,s){super(e,r),s&&this.setMarkers(s)}setMarkers(e){this.ah.bb(e)}markers(){return this.ah.Bb()}}function k_e(t,e,r){return new S_e(t,new j_e({}))}({...ZJ});const zg={time:["time","timestamp","tm"],order:["order","side","action","buy/sell"],symbol:["symbol","script","scrip","instrument","stock","pe/ce","ce/pe"],type:["type","product","prd"],qty:["qty","quantity","qn","lot","lots"],price:["price","prc","rate","value"]};function c9(t){const e=t.trim();if(!e)return[];let r=[];if(e.includes('"')||e.includes("'")){const s=/(?:^|,)(?:"([^"]*)"|'([^']*)'|([^,]*))/g;let a;for(;(a=s.exec(e))!==null;)r.push((a[1]||a[2]||a[3]||"").trim())}else e.includes("	")?r=e.split("	").map(s=>s.trim()):e.includes(",")?r=e.split(",").map(s=>s.trim()):e.match(/\s{2,}/)?r=e.split(/\s{2,}/).map(s=>s.trim()):r=e.split(/\s+/).map(s=>s.trim());return r.filter(s=>s.length>0)}function C_e(t){if(t.length<3)return!1;const e=t.map(s=>s.toLowerCase());let r=0;for(const s of e)for(const a of Object.values(zg))if(a.some(i=>s.includes(i))){r++;break}return r>=3}function E_e(t){const e=t.map(h=>h.toLowerCase()),r=h=>{for(let f=0;f<e.length;f++){const m=e[f];if(h.some(x=>m.includes(x)))return f}return-1},s=r(zg.time),a=r(zg.order),i=r(zg.symbol),o=r(zg.type),l=r(zg.qty),d=r(zg.price);return s===-1||a===-1||i===-1?null:{timeIndex:s,orderIndex:a,symbolIndex:i,typeIndex:o===-1?-1:o,qtyIndex:l===-1?-1:l,priceIndex:d===-1?-1:d}}function sb(t){const e=t.trim(),r=e.match(/^(\d{1,2}):(\d{2})(:(\d{2}))?$/),s=e.match(/^(\d{1,2}):(\d{2})(:(\d{2}))?\s*(AM|PM)$/i);if(s){let a=parseInt(s[1]);const i=s[2],o=s[4]||"00",l=s[5].toUpperCase();return l==="AM"&&a===12?a=0:l==="PM"&&a!==12&&(a+=12),`${a.toString().padStart(2,"0")}:${i}:${o}`}else if(r){const a=r[1].padStart(2,"0"),i=r[2],o=r[4]||"00";return`${a}:${i}:${o}`}return e}function Tx(t){const e=t.toUpperCase().trim();return e==="BUY"||e==="B"?"BUY":e==="SELL"||e==="S"?"SELL":e.includes("BUY")?"BUY":e.includes("SELL")?"SELL":null}function FN(t){return t.replace(/\s+(NFO|BFO|NSE|BSE)$/i,"").replace(/\s+(CE|PE)\s+(NFO|BFO|NSE|BSE)$/i," $1").trim()}function _d(t){if(!t)return 0;const e=t.replace(/[$,\s]/g,"").trim(),r=parseFloat(e);return isNaN(r)?0:r}function T_e(t,e,r){try{let s="",a=null,i="",o="MIS",l=0,d=0;if(e){if(s=e.timeIndex>=0&&t[e.timeIndex]?sb(t[e.timeIndex]):"",a=e.orderIndex>=0&&t[e.orderIndex]?Tx(t[e.orderIndex]):null,i=e.symbolIndex>=0&&t[e.symbolIndex]?FN(t[e.symbolIndex]):"",o=e.typeIndex>=0&&t[e.typeIndex]?t[e.typeIndex].toUpperCase().replace(/[|\s]/g,""):"MIS",l=e.qtyIndex>=0&&t[e.qtyIndex]?_d(t[e.qtyIndex]):0,d=e.priceIndex>=0&&t[e.priceIndex]?_d(t[e.priceIndex]):0,l===0||d===0){const h=t.map(f=>_d(f)).filter(f=>!isNaN(f)&&f>0);if(l===0&&h.length>0){const f=h.find(m=>Number.isInteger(m)&&m<1e4);f&&(l=f)}if(d===0&&h.length>0){const f=h.find(m=>m!==l&&m<1e5);f&&(d=f)}}}else{if(t[0]&&/^\d{1,2}:\d{2}/.test(t[0]))if(s=sb(t[0]),a=Tx(t[1]||""),a)i=FN(t[2]||""),o=(t[3]||"MIS").toUpperCase().replace(/[|\s]/g,""),l=_d(t[4]||"0"),d=_d(t[5]||"0");else{i=FN(t[1]||"");const f=t[2]||"";a=Tx(f),o=f.toUpperCase().replace(/BUY|SELL/g,"").replace(/[|\s]/g,"").trim()||"MIS",l=_d(t[3]||"0"),d=_d(t[4]||"0")}else{i=FN(t[0]||"");const f=t[1]||"";if(f.includes("|")){const m=f.split("|").map(x=>x.trim());a=Tx(m[0]),o=(m[1]||"MIS").toUpperCase(),l=_d(t[2]||"0"),d=_d(t[3]||"0"),s=sb(t[4]||"")}else a=Tx(f),o=f.toUpperCase().replace(/BUY|SELL/g,"").replace(/[|\s]/g,"").trim()||"MIS",l=_d(t[2]||"0"),d=_d(t[3]||"0"),s=sb(t[4]||t[5]||"")}if(!a)for(const f of t){const m=Tx(f);if(m){a=m;break}}if(!s){for(const f of t)if(/^\d{1,2}:\d{2}/.test(f)){s=sb(f);break}}if(l===0||d===0){const f=t.map(m=>_d(m)).filter(m=>!isNaN(m)&&m>0);if(l===0&&f.length>0){const m=f.find(x=>Number.isInteger(x)&&x<1e4);m&&(l=m)}if(d===0&&f.length>0){const m=f.find(x=>x!==l&&x<1e5);m&&(d=m)}}}return l>0&&l<1?{trade:null,error:{line:r,content:t.join(" | "),reason:"Invalid quantity detected (possible comma-formatting issue)"}}:d>0&&d<.01?{trade:null,error:{line:r,content:t.join(" | "),reason:"Invalid price detected (possible comma-formatting issue)"}}:(["MIS","CNC","NRML","BFO","LIM","LIMIT"].includes(o)||(o="MIS"),s?a?i?l<=0?{trade:null,error:{line:r,content:t.join(" | "),reason:"Missing or invalid quantity"}}:{trade:{time:s,order:a,symbol:i,type:o,qty:Math.floor(l),price:d,pnl:"-",duration:"-"},error:null}:{trade:null,error:{line:r,content:t.join(" | "),reason:"Missing symbol"}}:{trade:null,error:{line:r,content:t.join(" | "),reason:"Missing or invalid order type (BUY/SELL)"}}:{trade:null,error:{line:r,content:t.join(" | "),reason:"Missing time"}})}catch(s){return{trade:null,error:{line:r,content:t.join(" | "),reason:s instanceof Error?s.message:"Unknown parsing error"}}}}function d9(t){const e={trades:[],errors:[]},s=t.replace(/^\uFEFF/,"").replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(`
`).filter(d=>d.trim());if(s.length===0)return e.errors.push({line:0,content:"",reason:"No data found"}),e;const a=c9(s[0]),i=C_e(a),o=i?E_e(a):null,l=i?1:0;for(let d=l;d<s.length;d++){const h=c9(s[d]);if(h.length===0)continue;const{trade:f,error:m}=T_e(h,o,d+1);f?e.trades.push(f):m&&e.errors.push(m)}return e.trades.sort((d,h)=>d.time.localeCompare(h.time)),e}var T1=t=>t.type==="checkbox",Qg=t=>t instanceof Date,Ql=t=>t==null;const jZ=t=>typeof t=="object";var ai=t=>!Ql(t)&&!Array.isArray(t)&&jZ(t)&&!Qg(t),P_e=t=>ai(t)&&t.target?T1(t.target)?t.target.checked:t.target.value:t,A_e=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,__e=(t,e)=>t.has(A_e(e)),I_e=t=>{const e=t.constructor&&t.constructor.prototype;return ai(e)&&e.hasOwnProperty("isPrototypeOf")},NI=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Li(t){let e;const r=Array.isArray(t),s=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(NI&&(t instanceof Blob||s))&&(r||ai(t)))if(e=r?[]:Object.create(Object.getPrototypeOf(t)),!r&&!I_e(t))e=t;else for(const a in t)t.hasOwnProperty(a)&&(e[a]=Li(t[a]));else return t;return e}var vk=t=>/^\w*$/.test(t),Ha=t=>t===void 0,jI=t=>Array.isArray(t)?t.filter(Boolean):[],SI=t=>jI(t.replace(/["|']|\]/g,"").split(/\.|\[/)),or=(t,e,r)=>{if(!e||!ai(t))return r;const s=(vk(e)?[e]:SI(e)).reduce((a,i)=>Ql(a)?a:a[i],t);return Ha(s)||s===t?Ha(t[e])?r:t[e]:s},zh=t=>typeof t=="boolean",Us=(t,e,r)=>{let s=-1;const a=vk(e)?[e]:SI(e),i=a.length,o=i-1;for(;++s<i;){const l=a[s];let d=r;if(s!==o){const h=t[l];d=ai(h)||Array.isArray(h)?h:isNaN(+a[s+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;t[l]=d,t=t[l]}};const u9={BLUR:"blur",FOCUS_OUT:"focusout"},Ou={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Kf={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},M_e=$e.createContext(null);M_e.displayName="HookFormContext";var O_e=(t,e,r,s=!0)=>{const a={defaultValues:e._defaultValues};for(const i in t)Object.defineProperty(a,i,{get:()=>{const o=i;return e._proxyFormState[o]!==Ou.all&&(e._proxyFormState[o]=!s||Ou.all),t[o]}});return a};const R_e=typeof window<"u"?$e.useLayoutEffect:$e.useEffect;var Fc=t=>typeof t=="string",D_e=(t,e,r,s,a)=>Fc(t)?(s&&e.watch.add(t),or(r,t,a)):Array.isArray(t)?t.map(i=>(s&&e.watch.add(i),or(r,i))):(s&&(e.watchAll=!0),r),Z5=t=>Ql(t)||!jZ(t);function jp(t,e,r=new WeakSet){if(Z5(t)||Z5(e))return t===e;if(Qg(t)&&Qg(e))return t.getTime()===e.getTime();const s=Object.keys(t),a=Object.keys(e);if(s.length!==a.length)return!1;if(r.has(t)||r.has(e))return!0;r.add(t),r.add(e);for(const i of s){const o=t[i];if(!a.includes(i))return!1;if(i!=="ref"){const l=e[i];if(Qg(o)&&Qg(l)||ai(o)&&ai(l)||Array.isArray(o)&&Array.isArray(l)?!jp(o,l,r):o!==l)return!1}}return!0}var SZ=(t,e,r,s,a)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[s]:a||!0}}:{},$b=t=>Array.isArray(t)?t:[t],h9=()=>{let t=[];return{get observers(){return t},next:a=>{for(const i of t)i.next&&i.next(a)},subscribe:a=>(t.push(a),{unsubscribe:()=>{t=t.filter(i=>i!==a)}}),unsubscribe:()=>{t=[]}}};function kZ(t,e){const r={};for(const s in t)if(t.hasOwnProperty(s)){const a=t[s],i=e[s];if(a&&ai(a)&&i){const o=kZ(a,i);ai(o)&&(r[s]=o)}else t[s]&&(r[s]=i)}return r}var Xl=t=>ai(t)&&!Object.keys(t).length,kI=t=>t.type==="file",Ru=t=>typeof t=="function",T2=t=>{if(!NI)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},CZ=t=>t.type==="select-multiple",CI=t=>t.type==="radio",$_e=t=>CI(t)||T1(t),I3=t=>T2(t)&&t.isConnected;function L_e(t,e){const r=e.slice(0,-1).length;let s=0;for(;s<r;)t=Ha(t)?s++:t[e[s++]];return t}function F_e(t){for(const e in t)if(t.hasOwnProperty(e)&&!Ha(t[e]))return!1;return!0}function ti(t,e){const r=Array.isArray(e)?e:vk(e)?[e]:SI(e),s=r.length===1?t:L_e(t,r),a=r.length-1,i=r[a];return s&&delete s[i],a!==0&&(ai(s)&&Xl(s)||Array.isArray(s)&&F_e(s))&&ti(t,r.slice(0,-1)),t}var B_e=t=>{for(const e in t)if(Ru(t[e]))return!0;return!1};function EZ(t){return Array.isArray(t)||ai(t)&&!B_e(t)}function eA(t,e={}){for(const r in t)EZ(t[r])?(e[r]=Array.isArray(t[r])?[]:{},eA(t[r],e[r])):Ha(t[r])||(e[r]=!0);return e}function Ox(t,e,r){r||(r=eA(e));for(const s in t)EZ(t[s])?Ha(e)||Z5(r[s])?r[s]=eA(t[s],Array.isArray(t[s])?[]:{}):Ox(t[s],Ql(e)?{}:e[s],r[s]):r[s]=!jp(t[s],e[s]);return r}const f9={value:!1,isValid:!1},m9={value:!0,isValid:!0};var TZ=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Ha(t[0].attributes.value)?Ha(t[0].value)||t[0].value===""?m9:{value:t[0].value,isValid:!0}:m9:f9}return f9},PZ=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:s})=>Ha(t)?t:e?t===""?NaN:t&&+t:r&&Fc(t)?new Date(t):s?s(t):t;const p9={isValid:!1,value:null};var AZ=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,p9):p9;function g9(t){const e=t.ref;return kI(e)?e.files:CI(e)?AZ(t.refs).value:CZ(e)?[...e.selectedOptions].map(({value:r})=>r):T1(e)?TZ(t.refs).value:PZ(Ha(e.value)?t.ref.value:e.value,t)}var U_e=(t,e,r,s)=>{const a={};for(const i of t){const o=or(e,i);o&&Us(a,i,o._f)}return{criteriaMode:r,names:[...t],fields:a,shouldUseNativeValidation:s}},P2=t=>t instanceof RegExp,ab=t=>Ha(t)?t:P2(t)?t.source:ai(t)?P2(t.value)?t.value.source:t.value:t,x9=t=>({isOnSubmit:!t||t===Ou.onSubmit,isOnBlur:t===Ou.onBlur,isOnChange:t===Ou.onChange,isOnAll:t===Ou.all,isOnTouch:t===Ou.onTouched});const y9="AsyncFunction";var z_e=t=>!!t&&!!t.validate&&!!(Ru(t.validate)&&t.validate.constructor.name===y9||ai(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===y9)),V_e=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),v9=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(s=>t.startsWith(s)&&/^\.\w+/.test(t.slice(s.length))));const Lb=(t,e,r,s)=>{for(const a of r||Object.keys(t)){const i=or(t,a);if(i){const{_f:o,...l}=i;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],a)&&!s)return!0;if(o.ref&&e(o.ref,o.name)&&!s)return!0;if(Lb(l,e))break}else if(ai(l)&&Lb(l,e))break}}};function b9(t,e,r){const s=or(t,r);if(s||vk(r))return{error:s,name:r};const a=r.split(".");for(;a.length;){const i=a.join("."),o=or(e,i),l=or(t,i);if(o&&!Array.isArray(o)&&r!==i)return{name:r};if(l&&l.type)return{name:i,error:l};if(l&&l.root&&l.root.type)return{name:`${i}.root`,error:l.root};a.pop()}return{name:r}}var q_e=(t,e,r,s)=>{r(t);const{name:a,...i}=t;return Xl(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(o=>e[o]===(!s||Ou.all))},H_e=(t,e,r)=>!t||!e||t===e||$b(t).some(s=>s&&(r?s===e:s.startsWith(e)||e.startsWith(s))),W_e=(t,e,r,s,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(e||t):(r?s.isOnBlur:a.isOnBlur)?!t:(r?s.isOnChange:a.isOnChange)?t:!0,Y_e=(t,e)=>!jI(or(t,e)).length&&ti(t,e),K_e=(t,e,r)=>{const s=$b(or(t,r));return Us(s,"root",e[r]),Us(t,r,s),t};function w9(t,e,r="validate"){if(Fc(t)||Array.isArray(t)&&t.every(Fc)||zh(t)&&!t)return{type:r,message:Fc(t)?t:"",ref:e}}var Px=t=>ai(t)&&!P2(t)?t:{value:t,message:""},N9=async(t,e,r,s,a,i)=>{const{ref:o,refs:l,required:d,maxLength:h,minLength:f,min:m,max:x,pattern:b,validate:j,name:N,valueAsNumber:w,mount:C}=t._f,T=or(r,N);if(!C||e.has(N))return{};const O=l?l[0]:o,I=Y=>{a&&O.reportValidity&&(O.setCustomValidity(zh(Y)?"":Y||""),O.reportValidity())},P={},A=CI(o),R=T1(o),B=A||R,V=(w||kI(o))&&Ha(o.value)&&Ha(T)||T2(o)&&o.value===""||T===""||Array.isArray(T)&&!T.length,X=SZ.bind(null,N,s,P),ee=(Y,re,le,te=Kf.maxLength,de=Kf.minLength)=>{const ie=Y?re:le;P[N]={type:Y?te:de,message:ie,ref:o,...X(Y?te:de,ie)}};if(i?!Array.isArray(T)||!T.length:d&&(!B&&(V||Ql(T))||zh(T)&&!T||R&&!TZ(l).isValid||A&&!AZ(l).isValid)){const{value:Y,message:re}=Fc(d)?{value:!!d,message:d}:Px(d);if(Y&&(P[N]={type:Kf.required,message:re,ref:O,...X(Kf.required,re)},!s))return I(re),P}if(!V&&(!Ql(m)||!Ql(x))){let Y,re;const le=Px(x),te=Px(m);if(!Ql(T)&&!isNaN(T)){const de=o.valueAsNumber||T&&+T;Ql(le.value)||(Y=de>le.value),Ql(te.value)||(re=de<te.value)}else{const de=o.valueAsDate||new Date(T),ie=oe=>new Date(new Date().toDateString()+" "+oe),Z=o.type=="time",ne=o.type=="week";Fc(le.value)&&T&&(Y=Z?ie(T)>ie(le.value):ne?T>le.value:de>new Date(le.value)),Fc(te.value)&&T&&(re=Z?ie(T)<ie(te.value):ne?T<te.value:de<new Date(te.value))}if((Y||re)&&(ee(!!Y,le.message,te.message,Kf.max,Kf.min),!s))return I(P[N].message),P}if((h||f)&&!V&&(Fc(T)||i&&Array.isArray(T))){const Y=Px(h),re=Px(f),le=!Ql(Y.value)&&T.length>+Y.value,te=!Ql(re.value)&&T.length<+re.value;if((le||te)&&(ee(le,Y.message,re.message),!s))return I(P[N].message),P}if(b&&!V&&Fc(T)){const{value:Y,message:re}=Px(b);if(P2(Y)&&!T.match(Y)&&(P[N]={type:Kf.pattern,message:re,ref:o,...X(Kf.pattern,re)},!s))return I(re),P}if(j){if(Ru(j)){const Y=await j(T,r),re=w9(Y,O);if(re&&(P[N]={...re,...X(Kf.validate,re.message)},!s))return I(re.message),P}else if(ai(j)){let Y={};for(const re in j){if(!Xl(Y)&&!s)break;const le=w9(await j[re](T,r),O,re);le&&(Y={...le,...X(re,le.message)},I(le.message),s&&(P[N]=Y))}if(!Xl(Y)&&(P[N]={ref:O,...Y},!s))return P}}return I(!0),P};const G_e={mode:Ou.onSubmit,reValidateMode:Ou.onChange,shouldFocusError:!0};function X_e(t={}){let e={...G_e,...t},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ru(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},s={},a=ai(e.defaultValues)||ai(e.values)?Li(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:Li(a),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,h=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let m={...f};const x={array:h9(),state:h9()},b=e.criteriaMode===Ou.all,j=we=>Fe=>{clearTimeout(h),h=setTimeout(we,Fe)},N=async we=>{if(!e.disabled&&(f.isValid||m.isValid||we)){const Fe=e.resolver?Xl((await R()).errors):await V(s,!0);Fe!==r.isValid&&x.state.next({isValid:Fe})}},w=(we,Fe)=>{!e.disabled&&(f.isValidating||f.validatingFields||m.isValidating||m.validatingFields)&&((we||Array.from(l.mount)).forEach(Ye=>{Ye&&(Fe?Us(r.validatingFields,Ye,Fe):ti(r.validatingFields,Ye))}),x.state.next({validatingFields:r.validatingFields,isValidating:!Xl(r.validatingFields)}))},C=(we,Fe=[],Ye,lt,pt=!0,nt=!0)=>{if(lt&&Ye&&!e.disabled){if(o.action=!0,nt&&Array.isArray(or(s,we))){const wt=Ye(or(s,we),lt.argA,lt.argB);pt&&Us(s,we,wt)}if(nt&&Array.isArray(or(r.errors,we))){const wt=Ye(or(r.errors,we),lt.argA,lt.argB);pt&&Us(r.errors,we,wt),Y_e(r.errors,we)}if((f.touchedFields||m.touchedFields)&&nt&&Array.isArray(or(r.touchedFields,we))){const wt=Ye(or(r.touchedFields,we),lt.argA,lt.argB);pt&&Us(r.touchedFields,we,wt)}(f.dirtyFields||m.dirtyFields)&&(r.dirtyFields=Ox(a,i)),x.state.next({name:we,isDirty:ee(we,Fe),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Us(i,we,Fe)},T=(we,Fe)=>{Us(r.errors,we,Fe),x.state.next({errors:r.errors})},O=we=>{r.errors=we,x.state.next({errors:r.errors,isValid:!1})},I=(we,Fe,Ye,lt)=>{const pt=or(s,we);if(pt){const nt=or(i,we,Ha(Ye)?or(a,we):Ye);Ha(nt)||lt&&lt.defaultChecked||Fe?Us(i,we,Fe?nt:g9(pt._f)):le(we,nt),o.mount&&N()}},P=(we,Fe,Ye,lt,pt)=>{let nt=!1,wt=!1;const Lr={name:we};if(!e.disabled){if(!Ye||lt){(f.isDirty||m.isDirty)&&(wt=r.isDirty,r.isDirty=Lr.isDirty=ee(),nt=wt!==Lr.isDirty);const Tr=jp(or(a,we),Fe);wt=!!or(r.dirtyFields,we),Tr?ti(r.dirtyFields,we):Us(r.dirtyFields,we,!0),Lr.dirtyFields=r.dirtyFields,nt=nt||(f.dirtyFields||m.dirtyFields)&&wt!==!Tr}if(Ye){const Tr=or(r.touchedFields,we);Tr||(Us(r.touchedFields,we,Ye),Lr.touchedFields=r.touchedFields,nt=nt||(f.touchedFields||m.touchedFields)&&Tr!==Ye)}nt&&pt&&x.state.next(Lr)}return nt?Lr:{}},A=(we,Fe,Ye,lt)=>{const pt=or(r.errors,we),nt=(f.isValid||m.isValid)&&zh(Fe)&&r.isValid!==Fe;if(e.delayError&&Ye?(d=j(()=>T(we,Ye)),d(e.delayError)):(clearTimeout(h),d=null,Ye?Us(r.errors,we,Ye):ti(r.errors,we)),(Ye?!jp(pt,Ye):pt)||!Xl(lt)||nt){const wt={...lt,...nt&&zh(Fe)?{isValid:Fe}:{},errors:r.errors,name:we};r={...r,...wt},x.state.next(wt)}},R=async we=>{w(we,!0);const Fe=await e.resolver(i,e.context,U_e(we||l.mount,s,e.criteriaMode,e.shouldUseNativeValidation));return w(we),Fe},B=async we=>{const{errors:Fe}=await R(we);if(we)for(const Ye of we){const lt=or(Fe,Ye);lt?Us(r.errors,Ye,lt):ti(r.errors,Ye)}else r.errors=Fe;return Fe},V=async(we,Fe,Ye={valid:!0})=>{for(const lt in we){const pt=we[lt];if(pt){const{_f:nt,...wt}=pt;if(nt){const Lr=l.array.has(nt.name),Tr=pt._f&&z_e(pt._f);Tr&&f.validatingFields&&w([nt.name],!0);const Mr=await N9(pt,l.disabled,i,b,e.shouldUseNativeValidation&&!Fe,Lr);if(Tr&&f.validatingFields&&w([nt.name]),Mr[nt.name]&&(Ye.valid=!1,Fe))break;!Fe&&(or(Mr,nt.name)?Lr?K_e(r.errors,Mr,nt.name):Us(r.errors,nt.name,Mr[nt.name]):ti(r.errors,nt.name))}!Xl(wt)&&await V(wt,Fe,Ye)}}return Ye.valid},X=()=>{for(const we of l.unMount){const Fe=or(s,we);Fe&&(Fe._f.refs?Fe._f.refs.every(Ye=>!I3(Ye)):!I3(Fe._f.ref))&&he(we)}l.unMount=new Set},ee=(we,Fe)=>!e.disabled&&(we&&Fe&&Us(i,we,Fe),!jp(oe(),a)),Y=(we,Fe,Ye)=>D_e(we,l,{...o.mount?i:Ha(Fe)?a:Fc(we)?{[we]:Fe}:Fe},Ye,Fe),re=we=>jI(or(o.mount?i:a,we,e.shouldUnregister?or(a,we,[]):[])),le=(we,Fe,Ye={})=>{const lt=or(s,we);let pt=Fe;if(lt){const nt=lt._f;nt&&(!nt.disabled&&Us(i,we,PZ(Fe,nt)),pt=T2(nt.ref)&&Ql(Fe)?"":Fe,CZ(nt.ref)?[...nt.ref.options].forEach(wt=>wt.selected=pt.includes(wt.value)):nt.refs?T1(nt.ref)?nt.refs.forEach(wt=>{(!wt.defaultChecked||!wt.disabled)&&(Array.isArray(pt)?wt.checked=!!pt.find(Lr=>Lr===wt.value):wt.checked=pt===wt.value||!!pt)}):nt.refs.forEach(wt=>wt.checked=wt.value===pt):kI(nt.ref)?nt.ref.value="":(nt.ref.value=pt,nt.ref.type||x.state.next({name:we,values:Li(i)})))}(Ye.shouldDirty||Ye.shouldTouch)&&P(we,pt,Ye.shouldTouch,Ye.shouldDirty,!0),Ye.shouldValidate&&ne(we)},te=(we,Fe,Ye)=>{for(const lt in Fe){if(!Fe.hasOwnProperty(lt))return;const pt=Fe[lt],nt=we+"."+lt,wt=or(s,nt);(l.array.has(we)||ai(pt)||wt&&!wt._f)&&!Qg(pt)?te(nt,pt,Ye):le(nt,pt,Ye)}},de=(we,Fe,Ye={})=>{const lt=or(s,we),pt=l.array.has(we),nt=Li(Fe);Us(i,we,nt),pt?(x.array.next({name:we,values:Li(i)}),(f.isDirty||f.dirtyFields||m.isDirty||m.dirtyFields)&&Ye.shouldDirty&&x.state.next({name:we,dirtyFields:Ox(a,i),isDirty:ee(we,nt)})):lt&&!lt._f&&!Ql(nt)?te(we,nt,Ye):le(we,nt,Ye),v9(we,l)&&x.state.next({...r,name:we}),x.state.next({name:o.mount?we:void 0,values:Li(i)})},ie=async we=>{o.mount=!0;const Fe=we.target;let Ye=Fe.name,lt=!0;const pt=or(s,Ye),nt=Tr=>{lt=Number.isNaN(Tr)||Qg(Tr)&&isNaN(Tr.getTime())||jp(Tr,or(i,Ye,Tr))},wt=x9(e.mode),Lr=x9(e.reValidateMode);if(pt){let Tr,Mr;const ta=Fe.type?g9(pt._f):P_e(we),st=we.type===u9.BLUR||we.type===u9.FOCUS_OUT,zt=!V_e(pt._f)&&!e.resolver&&!or(r.errors,Ye)&&!pt._f.deps||W_e(st,or(r.touchedFields,Ye),r.isSubmitted,Lr,wt),Ft=v9(Ye,l,st);Us(i,Ye,ta),st?(!Fe||!Fe.readOnly)&&(pt._f.onBlur&&pt._f.onBlur(we),d&&d(0)):pt._f.onChange&&pt._f.onChange(we);const pr=P(Ye,ta,st),kt=!Xl(pr)||Ft;if(!st&&x.state.next({name:Ye,type:we.type,values:Li(i)}),zt)return(f.isValid||m.isValid)&&(e.mode==="onBlur"?st&&N():st||N()),kt&&x.state.next({name:Ye,...Ft?{}:pr});if(!st&&Ft&&x.state.next({...r}),e.resolver){const{errors:Mt}=await R([Ye]);if(nt(ta),lt){const Ke=b9(r.errors,s,Ye),Ne=b9(Mt,s,Ke.name||Ye);Tr=Ne.error,Ye=Ne.name,Mr=Xl(Mt)}}else w([Ye],!0),Tr=(await N9(pt,l.disabled,i,b,e.shouldUseNativeValidation))[Ye],w([Ye]),nt(ta),lt&&(Tr?Mr=!1:(f.isValid||m.isValid)&&(Mr=await V(s,!0)));lt&&(pt._f.deps&&(!Array.isArray(pt._f.deps)||pt._f.deps.length>0)&&ne(pt._f.deps),A(Ye,Mr,Tr,pr))}},Z=(we,Fe)=>{if(or(r.errors,Fe)&&we.focus)return we.focus(),1},ne=async(we,Fe={})=>{let Ye,lt;const pt=$b(we);if(e.resolver){const nt=await B(Ha(we)?we:pt);Ye=Xl(nt),lt=we?!pt.some(wt=>or(nt,wt)):Ye}else we?(lt=(await Promise.all(pt.map(async nt=>{const wt=or(s,nt);return await V(wt&&wt._f?{[nt]:wt}:wt)}))).every(Boolean),!(!lt&&!r.isValid)&&N()):lt=Ye=await V(s);return x.state.next({...!Fc(we)||(f.isValid||m.isValid)&&Ye!==r.isValid?{}:{name:we},...e.resolver||!we?{isValid:Ye}:{},errors:r.errors}),Fe.shouldFocus&&!lt&&Lb(s,Z,we?pt:l.mount),lt},oe=(we,Fe)=>{let Ye={...o.mount?i:a};return Fe&&(Ye=kZ(Fe.dirtyFields?r.dirtyFields:r.touchedFields,Ye)),Ha(we)?Ye:Fc(we)?or(Ye,we):we.map(lt=>or(Ye,lt))},U=(we,Fe)=>({invalid:!!or((Fe||r).errors,we),isDirty:!!or((Fe||r).dirtyFields,we),error:or((Fe||r).errors,we),isValidating:!!or(r.validatingFields,we),isTouched:!!or((Fe||r).touchedFields,we)}),W=we=>{we&&$b(we).forEach(Fe=>ti(r.errors,Fe)),x.state.next({errors:we?r.errors:{}})},be=(we,Fe,Ye)=>{const lt=(or(s,we,{_f:{}})._f||{}).ref,pt=or(r.errors,we)||{},{ref:nt,message:wt,type:Lr,...Tr}=pt;Us(r.errors,we,{...Tr,...Fe,ref:lt}),x.state.next({name:we,errors:r.errors,isValid:!1}),Ye&&Ye.shouldFocus&&lt&&lt.focus&&lt.focus()},pe=(we,Fe)=>Ru(we)?x.state.subscribe({next:Ye=>"values"in Ye&&we(Y(void 0,Fe),Ye)}):Y(we,Fe,!0),ge=we=>x.state.subscribe({next:Fe=>{H_e(we.name,Fe.name,we.exact)&&q_e(Fe,we.formState||f,It,we.reRenderRoot)&&we.callback({values:{...i},...r,...Fe,defaultValues:a})}}).unsubscribe,Ce=we=>(o.mount=!0,m={...m,...we.formState},ge({...we,formState:m})),he=(we,Fe={})=>{for(const Ye of we?$b(we):l.mount)l.mount.delete(Ye),l.array.delete(Ye),Fe.keepValue||(ti(s,Ye),ti(i,Ye)),!Fe.keepError&&ti(r.errors,Ye),!Fe.keepDirty&&ti(r.dirtyFields,Ye),!Fe.keepTouched&&ti(r.touchedFields,Ye),!Fe.keepIsValidating&&ti(r.validatingFields,Ye),!e.shouldUnregister&&!Fe.keepDefaultValue&&ti(a,Ye);x.state.next({values:Li(i)}),x.state.next({...r,...Fe.keepDirty?{isDirty:ee()}:{}}),!Fe.keepIsValid&&N()},ue=({disabled:we,name:Fe})=>{(zh(we)&&o.mount||we||l.disabled.has(Fe))&&(we?l.disabled.add(Fe):l.disabled.delete(Fe))},ce=(we,Fe={})=>{let Ye=or(s,we);const lt=zh(Fe.disabled)||zh(e.disabled);return Us(s,we,{...Ye||{},_f:{...Ye&&Ye._f?Ye._f:{ref:{name:we}},name:we,mount:!0,...Fe}}),l.mount.add(we),Ye?ue({disabled:zh(Fe.disabled)?Fe.disabled:e.disabled,name:we}):I(we,!0,Fe.value),{...lt?{disabled:Fe.disabled||e.disabled}:{},...e.progressive?{required:!!Fe.required,min:ab(Fe.min),max:ab(Fe.max),minLength:ab(Fe.minLength),maxLength:ab(Fe.maxLength),pattern:ab(Fe.pattern)}:{},name:we,onChange:ie,onBlur:ie,ref:pt=>{if(pt){ce(we,Fe),Ye=or(s,we);const nt=Ha(pt.value)&&pt.querySelectorAll&&pt.querySelectorAll("input,select,textarea")[0]||pt,wt=$_e(nt),Lr=Ye._f.refs||[];if(wt?Lr.find(Tr=>Tr===nt):nt===Ye._f.ref)return;Us(s,we,{_f:{...Ye._f,...wt?{refs:[...Lr.filter(I3),nt,...Array.isArray(or(a,we))?[{}]:[]],ref:{type:nt.type,name:we}}:{ref:nt}}}),I(we,!1,void 0,nt)}else Ye=or(s,we,{}),Ye._f&&(Ye._f.mount=!1),(e.shouldUnregister||Fe.shouldUnregister)&&!(__e(l.array,we)&&o.action)&&l.unMount.add(we)}}},Ee=()=>e.shouldFocusError&&Lb(s,Z,l.mount),Le=we=>{zh(we)&&(x.state.next({disabled:we}),Lb(s,(Fe,Ye)=>{const lt=or(s,Ye);lt&&(Fe.disabled=lt._f.disabled||we,Array.isArray(lt._f.refs)&&lt._f.refs.forEach(pt=>{pt.disabled=lt._f.disabled||we}))},0,!1))},Ie=(we,Fe)=>async Ye=>{let lt;Ye&&(Ye.preventDefault&&Ye.preventDefault(),Ye.persist&&Ye.persist());let pt=Li(i);if(x.state.next({isSubmitting:!0}),e.resolver){const{errors:nt,values:wt}=await R();r.errors=nt,pt=Li(wt)}else await V(s);if(l.disabled.size)for(const nt of l.disabled)ti(pt,nt);if(ti(r.errors,"root"),Xl(r.errors)){x.state.next({errors:{}});try{await we(pt,Ye)}catch(nt){lt=nt}}else Fe&&await Fe({...r.errors},Ye),Ee(),setTimeout(Ee);if(x.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Xl(r.errors)&&!lt,submitCount:r.submitCount+1,errors:r.errors}),lt)throw lt},Ue=(we,Fe={})=>{or(s,we)&&(Ha(Fe.defaultValue)?de(we,Li(or(a,we))):(de(we,Fe.defaultValue),Us(a,we,Li(Fe.defaultValue))),Fe.keepTouched||ti(r.touchedFields,we),Fe.keepDirty||(ti(r.dirtyFields,we),r.isDirty=Fe.defaultValue?ee(we,Li(or(a,we))):ee()),Fe.keepError||(ti(r.errors,we),f.isValid&&N()),x.state.next({...r}))},Ae=(we,Fe={})=>{const Ye=we?Li(we):a,lt=Li(Ye),pt=Xl(we),nt=pt?a:lt;if(Fe.keepDefaultValues||(a=Ye),!Fe.keepValues){if(Fe.keepDirtyValues){const wt=new Set([...l.mount,...Object.keys(Ox(a,i))]);for(const Lr of Array.from(wt))or(r.dirtyFields,Lr)?Us(nt,Lr,or(i,Lr)):de(Lr,or(nt,Lr))}else{if(NI&&Ha(we))for(const wt of l.mount){const Lr=or(s,wt);if(Lr&&Lr._f){const Tr=Array.isArray(Lr._f.refs)?Lr._f.refs[0]:Lr._f.ref;if(T2(Tr)){const Mr=Tr.closest("form");if(Mr){Mr.reset();break}}}}if(Fe.keepFieldsRef)for(const wt of l.mount)de(wt,or(nt,wt));else s={}}i=e.shouldUnregister?Fe.keepDefaultValues?Li(a):{}:Li(nt),x.array.next({values:{...nt}}),x.state.next({values:{...nt}})}l={mount:Fe.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!f.isValid||!!Fe.keepIsValid||!!Fe.keepDirtyValues,o.watch=!!e.shouldUnregister,x.state.next({submitCount:Fe.keepSubmitCount?r.submitCount:0,isDirty:pt?!1:Fe.keepDirty?r.isDirty:!!(Fe.keepDefaultValues&&!jp(we,a)),isSubmitted:Fe.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:pt?{}:Fe.keepDirtyValues?Fe.keepDefaultValues&&i?Ox(a,i):r.dirtyFields:Fe.keepDefaultValues&&we?Ox(a,we):Fe.keepDirty?r.dirtyFields:{},touchedFields:Fe.keepTouched?r.touchedFields:{},errors:Fe.keepErrors?r.errors:{},isSubmitSuccessful:Fe.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},We=(we,Fe)=>Ae(Ru(we)?we(i):we,Fe),ot=(we,Fe={})=>{const Ye=or(s,we),lt=Ye&&Ye._f;if(lt){const pt=lt.refs?lt.refs[0]:lt.ref;pt.focus&&(pt.focus(),Fe.shouldSelect&&Ru(pt.select)&&pt.select())}},It=we=>{r={...r,...we}},Ct={control:{register:ce,unregister:he,getFieldState:U,handleSubmit:Ie,setError:be,_subscribe:ge,_runSchema:R,_focusError:Ee,_getWatch:Y,_getDirty:ee,_setValid:N,_setFieldArray:C,_setDisabledField:ue,_setErrors:O,_getFieldArray:re,_reset:Ae,_resetDefaultValues:()=>Ru(e.defaultValues)&&e.defaultValues().then(we=>{We(we,e.resetOptions),x.state.next({isLoading:!1})}),_removeUnmounted:X,_disableForm:Le,_subjects:x,_proxyFormState:f,get _fields(){return s},get _formValues(){return i},get _state(){return o},set _state(we){o=we},get _defaultValues(){return a},get _names(){return l},set _names(we){l=we},get _formState(){return r},get _options(){return e},set _options(we){e={...e,...we}}},subscribe:Ce,trigger:ne,register:ce,handleSubmit:Ie,watch:pe,setValue:de,getValues:oe,reset:We,resetField:Ue,clearErrors:W,unregister:he,setError:be,setFocus:ot,getFieldState:U};return{...Ct,formControl:Ct}}function j9(t={}){const e=$e.useRef(void 0),r=$e.useRef(void 0),[s,a]=$e.useState({isDirty:!1,isValidating:!1,isLoading:Ru(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Ru(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:s},t.defaultValues&&!Ru(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...l}=X_e(t);e.current={...l,formState:s}}const i=e.current.control;return i._options=t,R_e(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0});return a(l=>({...l,isReady:!0})),i._formState.isReady=!0,o},[i]),$e.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),$e.useEffect(()=>{t.mode&&(i._options.mode=t.mode),t.reValidateMode&&(i._options.reValidateMode=t.reValidateMode)},[i,t.mode,t.reValidateMode]),$e.useEffect(()=>{t.errors&&(i._setErrors(t.errors),i._focusError())},[i,t.errors]),$e.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,t.shouldUnregister]),$e.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==s.isDirty&&i._subjects.state.next({isDirty:o})}},[i,s.isDirty]),$e.useEffect(()=>{t.values&&!jp(t.values,r.current)?(i._reset(t.values,{keepFieldsRef:!0,...i._options.resetOptions}),r.current=t.values,a(o=>({...o}))):i._resetDefaultValues()},[i,t.values]),$e.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),e.current.formState=O_e(s,i),e.current}const S9=(t,e,r)=>{if(t&&"reportValidity"in t){const s=or(r,e);t.setCustomValidity(s&&s.message||""),t.reportValidity()}},_Z=(t,e)=>{for(const r in e.fields){const s=e.fields[r];s&&s.ref&&"reportValidity"in s.ref?S9(s.ref,r,t):s.refs&&s.refs.forEach(a=>S9(a,r,t))}},Q_e=(t,e)=>{e.shouldUseNativeValidation&&_Z(t,e);const r={};for(const s in t){const a=or(e.fields,s),i=Object.assign(t[s]||{},{ref:a&&a.ref});if(J_e(e.names||Object.keys(t),s)){const o=Object.assign({},or(r,s));Us(o,"root",i),Us(r,s,o)}else Us(r,s,i)}return r},J_e=(t,e)=>t.some(r=>r.startsWith(e+"."));var Z_e=function(t,e){for(var r={};t.length;){var s=t[0],a=s.code,i=s.message,o=s.path.join(".");if(!r[o])if("unionErrors"in s){var l=s.unionErrors[0].errors[0];r[o]={message:l.message,type:l.code}}else r[o]={message:i,type:a};if("unionErrors"in s&&s.unionErrors.forEach(function(f){return f.errors.forEach(function(m){return t.push(m)})}),e){var d=r[o].types,h=d&&d[s.code];r[o]=SZ(o,e,r,a,h?[].concat(h,s.message):s.message)}t.shift()}return r},k9=function(t,e,r){return r===void 0&&(r={}),function(s,a,i){try{return Promise.resolve((function(o,l){try{var d=Promise.resolve(t[r.mode==="sync"?"parse":"parseAsync"](s,e)).then(function(h){return i.shouldUseNativeValidation&&_Z({},i),{errors:{},values:r.raw?s:h}})}catch(h){return l(h)}return d&&d.then?d.then(void 0,l):d})(0,function(o){if((function(l){return Array.isArray(l==null?void 0:l.errors)})(o))return{values:{},errors:Q_e(Z_e(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}};const mt=Symbol.for("drizzle:entityKind");function po(t,e){if(!t||typeof t!="object")return!1;if(t instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,mt))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let r=Object.getPrototypeOf(t).constructor;if(r)for(;r;){if(mt in r&&r[mt]===e[mt])return!0;r=Object.getPrototypeOf(r)}return!1}var X9;X9=mt;class Ky{constructor(e,r){qe(this,"name");qe(this,"keyAsName");qe(this,"primary");qe(this,"notNull");qe(this,"default");qe(this,"defaultFn");qe(this,"onUpdateFn");qe(this,"hasDefault");qe(this,"isUnique");qe(this,"uniqueName");qe(this,"uniqueType");qe(this,"dataType");qe(this,"columnType");qe(this,"enumValues");qe(this,"generated");qe(this,"generatedIdentity");qe(this,"config");this.table=e,this.config=r,this.name=r.name,this.keyAsName=r.keyAsName,this.notNull=r.notNull,this.default=r.default,this.defaultFn=r.defaultFn,this.onUpdateFn=r.onUpdateFn,this.hasDefault=r.hasDefault,this.primary=r.primaryKey,this.isUnique=r.isUnique,this.uniqueName=r.uniqueName,this.uniqueType=r.uniqueType,this.dataType=r.dataType,this.columnType=r.columnType,this.generated=r.generated,this.generatedIdentity=r.generatedIdentity}mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}qe(Ky,X9,"Column");var Q9;Q9=mt;class IZ{constructor(e,r,s){qe(this,"config");qe(this,"$default",this.$defaultFn);qe(this,"$onUpdate",this.$onUpdateFn);this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:r,columnType:s,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}qe(IZ,Q9,"ColumnBuilder");const Zx=Symbol.for("drizzle:Name");var J9;J9=mt;class MZ{constructor(e,r){qe(this,"reference");qe(this,"_onUpdate","no action");qe(this,"_onDelete","no action");this.reference=()=>{const{name:s,columns:a,foreignColumns:i}=e();return{name:s,columns:a,foreignTable:i[0].table,foreignColumns:i}},r&&(this._onUpdate=r.onUpdate,this._onDelete=r.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new OZ(e,this)}}qe(MZ,J9,"PgForeignKeyBuilder");var Z9;Z9=mt;class OZ{constructor(e,r){qe(this,"reference");qe(this,"onUpdate");qe(this,"onDelete");this.table=e,this.reference=r.reference,this.onUpdate=r._onUpdate,this.onDelete=r._onDelete}getName(){const{name:e,columns:r,foreignColumns:s}=this.reference(),a=r.map(l=>l.name),i=s.map(l=>l.name),o=[this.table[Zx],...a,s[0].table[Zx],...i];return e??`${o.join("_")}_fk`}}qe(OZ,Z9,"PgForeignKey");function eIe(t,...e){return t(...e)}function tIe(t,e){return`${t[Zx]}_${e.join("_")}_unique`}function C9(t,e,r){for(let s=e;s<t.length;s++){const a=t[s];if(a==="\\"){s++;continue}if(a==='"')return[t.slice(e,s).replace(/\\/g,""),s+1];if(!r&&(a===","||a==="}"))return[t.slice(e,s).replace(/\\/g,""),s]}return[t.slice(e).replace(/\\/g,""),t.length]}function RZ(t,e=0){const r=[];let s=e,a=!1;for(;s<t.length;){const i=t[s];if(i===","){(a||s===e)&&r.push(""),a=!0,s++;continue}if(a=!1,i==="\\"){s+=2;continue}if(i==='"'){const[d,h]=C9(t,s+1,!0);r.push(d),s=h;continue}if(i==="}")return[r,s+1];if(i==="{"){const[d,h]=RZ(t,s+1);r.push(d),s=h;continue}const[o,l]=C9(t,s,!1);r.push(o),s=l}return[r,s]}function rIe(t){const[e]=RZ(t,1);return e}function DZ(t){return`{${t.map(e=>Array.isArray(e)?DZ(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var eB,tB;class Vn extends(tB=IZ,eB=mt,tB){constructor(){super(...arguments);qe(this,"foreignKeyConfigs",[])}array(r){return new LZ(this.config.name,this,r)}references(r,s={}){return this.foreignKeyConfigs.push({ref:r,actions:s}),this}unique(r,s){return this.config.isUnique=!0,this.config.uniqueName=r,this.config.uniqueType=s==null?void 0:s.nulls,this}generatedAlwaysAs(r){return this.config.generated={as:r,type:"always",mode:"stored"},this}buildForeignKeys(r,s){return this.foreignKeyConfigs.map(({ref:a,actions:i})=>eIe((o,l)=>{const d=new MZ(()=>{const h=o();return{columns:[r],foreignColumns:[h]}});return l.onUpdate&&d.onUpdate(l.onUpdate),l.onDelete&&d.onDelete(l.onDelete),d.build(s)},a,i))}buildExtraConfigColumn(r){return new $Z(r,this.config)}}qe(Vn,eB,"PgColumnBuilder");var rB,nB;class nn extends(nB=Ky,rB=mt,nB){constructor(e,r){r.uniqueName||(r.uniqueName=tIe(e,[r.name])),super(e,r),this.table=e}}qe(nn,rB,"PgColumn");var sB,aB;class $Z extends(aB=nn,sB=mt,aB){constructor(){super(...arguments);qe(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});qe(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(r){return this.indexConfig.opClass=r,this}}qe($Z,sB,"ExtraConfigColumn");var iB,oB;class LZ extends(oB=Vn,iB=mt,oB){constructor(e,r,s){super(e,"array","PgArray"),this.config.baseBuilder=r,this.config.size=s}build(e){const r=this.config.baseBuilder.build(e);return new tA(e,this.config,r)}}qe(LZ,iB,"PgArrayBuilder");var lB,cB;const z2=class z2 extends(cB=nn,lB=mt,cB){constructor(r,s,a,i){super(r,s);qe(this,"size");this.baseColumn=a,this.range=i,this.size=s.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(r){return typeof r=="string"&&(r=rIe(r)),r.map(s=>this.baseColumn.mapFromDriverValue(s))}mapToDriverValue(r,s=!1){const a=r.map(i=>i===null?null:po(this.baseColumn,z2)?this.baseColumn.mapToDriverValue(i,!0):this.baseColumn.mapToDriverValue(i));return s?a:DZ(a)}};qe(z2,lB,"PgArray");let tA=z2;const E9=Symbol.for("drizzle:isPgEnum");function nIe(t){return!!t&&typeof t=="function"&&E9 in t&&t[E9]===!0}var dB;dB=mt;class EI{constructor(e,r,s,a=!1){this._={brand:"Subquery",sql:e,selectedFields:r,alias:s,isWith:a}}}qe(EI,dB,"Subquery");const sIe={startActiveSpan(t,e){return e()}},ey=Symbol.for("drizzle:ViewBaseConfig"),M3=Symbol.for("drizzle:Schema"),T9=Symbol.for("drizzle:Columns"),P9=Symbol.for("drizzle:ExtraConfigColumns"),O3=Symbol.for("drizzle:OriginalName"),R3=Symbol.for("drizzle:BaseName"),A2=Symbol.for("drizzle:IsAlias"),A9=Symbol.for("drizzle:ExtraConfigBuilder"),FZ=Symbol.for("drizzle:IsDrizzleTable");var uB,hB,fB,mB,pB,gB,xB,yB,vB,bB;bB=mt,vB=Zx,yB=O3,xB=M3,gB=T9,pB=P9,mB=R3,fB=A2,hB=FZ,uB=A9;class ml{constructor(e,r,s){qe(this,vB);qe(this,yB);qe(this,xB);qe(this,gB);qe(this,pB);qe(this,mB);qe(this,fB,!1);qe(this,hB,!0);qe(this,uB);this[Zx]=this[O3]=e,this[M3]=r,this[R3]=s}}qe(ml,bB,"Table"),qe(ml,"Symbol",{Name:Zx,Schema:M3,OriginalName:O3,Columns:T9,ExtraConfigColumns:P9,BaseName:R3,IsAlias:A2,ExtraConfigBuilder:A9});function BZ(t){return typeof t=="object"&&t!==null&&FZ in t}function aIe(t){return t!=null&&typeof t.getSQL=="function"}function iIe(t){var r;const e={sql:"",params:[]};for(const s of t)e.sql+=s.sql,e.params.push(...s.params),(r=s.typings)!=null&&r.length&&(e.typings||(e.typings=[]),e.typings.push(...s.typings));return e}var wB;wB=mt;class Od{constructor(e){qe(this,"value");this.value=Array.isArray(e)?e:[e]}getSQL(){return new ji([this])}}qe(Od,wB,"StringChunk");var NB;NB=mt;const qg=class qg{constructor(e){qe(this,"decoder",UZ);qe(this,"shouldInlineParams",!1);this.queryChunks=e}append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return sIe.startActiveSpan("drizzle.buildSQL",r=>{const s=this.buildQueryFromSourceParams(this.queryChunks,e);return r==null||r.setAttributes({"drizzle.query.text":s.sql,"drizzle.query.params":JSON.stringify(s.params)}),s})}buildQueryFromSourceParams(e,r){const s=Object.assign({},r,{inlineParams:r.inlineParams||this.shouldInlineParams,paramStartIndex:r.paramStartIndex||{value:0}}),{casing:a,escapeName:i,escapeParam:o,prepareTyping:l,inlineParams:d,paramStartIndex:h}=s;return iIe(e.map(f=>{var m;if(po(f,Od))return{sql:f.value.join(""),params:[]};if(po(f,_2))return{sql:i(f.value),params:[]};if(f===void 0)return{sql:"",params:[]};if(Array.isArray(f)){const x=[new Od("(")];for(const[b,j]of f.entries())x.push(j),b<f.length-1&&x.push(new Od(", "));return x.push(new Od(")")),this.buildQueryFromSourceParams(x,s)}if(po(f,qg))return this.buildQueryFromSourceParams(f.queryChunks,{...s,inlineParams:d||f.shouldInlineParams});if(po(f,ml)){const x=f[ml.Symbol.Schema],b=f[ml.Symbol.Name];return{sql:x===void 0||f[A2]?i(b):i(x)+"."+i(b),params:[]}}if(po(f,Ky)){const x=a.getColumnCasing(f);if(r.invokeSource==="indexes")return{sql:i(x),params:[]};const b=f.table[ml.Symbol.Schema];return{sql:f.table[A2]||b===void 0?i(f.table[ml.Symbol.Name])+"."+i(x):i(b)+"."+i(f.table[ml.Symbol.Name])+"."+i(x),params:[]}}if(po(f,qZ)){const x=f[ey].schema,b=f[ey].name;return{sql:x===void 0||f[ey].isAlias?i(b):i(x)+"."+i(b),params:[]}}if(po(f,TI)){if(po(f.value,M2))return{sql:o(h.value++,f),params:[f],typings:["none"]};const x=f.value===null?null:f.encoder.mapToDriverValue(f.value);if(po(x,qg))return this.buildQueryFromSourceParams([x],s);if(d)return{sql:this.mapInlineParam(x,s),params:[]};let b=["none"];return l&&(b=[l(f.encoder)]),{sql:o(h.value++,x),params:[x],typings:b}}return po(f,M2)?{sql:o(h.value++,f),params:[f],typings:["none"]}:po(f,qg.Aliased)&&f.fieldAlias!==void 0?{sql:i(f.fieldAlias),params:[]}:po(f,EI)?f._.isWith?{sql:i(f._.alias),params:[]}:this.buildQueryFromSourceParams([new Od("("),f._.sql,new Od(") "),new _2(f._.alias)],s):nIe(f)?f.schema?{sql:i(f.schema)+"."+i(f.enumName),params:[]}:{sql:i(f.enumName),params:[]}:aIe(f)?(m=f.shouldOmitSQLParens)!=null&&m.call(f)?this.buildQueryFromSourceParams([f.getSQL()],s):this.buildQueryFromSourceParams([new Od("("),f.getSQL(),new Od(")")],s):d?{sql:this.mapInlineParam(f,s),params:[]}:{sql:o(h.value++,f),params:[f],typings:["none"]}}))}mapInlineParam(e,{escapeString:r}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return r(e);if(typeof e=="object"){const s=e.toString();return r(s==="[object Object]"?JSON.stringify(e):s)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new qg.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}};qe(qg,NB,"SQL");let ji=qg;var jB;jB=mt;class _2{constructor(e){qe(this,"brand");this.value=e}getSQL(){return new ji([this])}}qe(_2,jB,"Name");const UZ={mapFromDriverValue:t=>t},zZ={mapToDriverValue:t=>t};({...UZ,...zZ});var SB;SB=mt;class TI{constructor(e,r=zZ){qe(this,"brand");this.value=e,this.encoder=r}getSQL(){return new ji([this])}}qe(TI,SB,"Param");function I2(t,...e){const r=[];(e.length>0||t.length>0&&t[0]!=="")&&r.push(new Od(t[0]));for(const[s,a]of e.entries())r.push(a,new Od(t[s+1]));return new ji(r)}(t=>{function e(){return new ji([])}t.empty=e;function r(d){return new ji(d)}t.fromList=r;function s(d){return new ji([new Od(d)])}t.raw=s;function a(d,h){const f=[];for(const[m,x]of d.entries())m>0&&h!==void 0&&f.push(h),f.push(x);return new ji(f)}t.join=a;function i(d){return new _2(d)}t.identifier=i;function o(d){return new M2(d)}t.placeholder=o;function l(d,h){return new TI(d,h)}t.param=l})(I2||(I2={}));(t=>{var r;r=mt;const s=class s{constructor(i,o){qe(this,"isSelectionField",!1);this.sql=i,this.fieldAlias=o}getSQL(){return this.sql}clone(){return new s(this.sql,this.fieldAlias)}};qe(s,r,"SQL.Aliased");let e=s;t.Aliased=e})(ji||(ji={}));var kB;kB=mt;class M2{constructor(e){this.name=e}getSQL(){return new ji([this])}}qe(M2,kB,"Placeholder");const VZ=Symbol.for("drizzle:IsDrizzleView");var CB,EB,TB;TB=mt,EB=ey,CB=VZ;class qZ{constructor({name:e,schema:r,selectedFields:s,query:a}){qe(this,EB);qe(this,CB,!0);this[ey]={name:e,originalName:e,schema:r,selectedFields:s,query:a,isExisting:!a,isAlias:!1}}getSQL(){return new ji([this])}}qe(qZ,TB,"View");function oIe(t){return typeof t=="object"&&t!==null&&VZ in t}Ky.prototype.getSQL=function(){return new ji([this])};ml.prototype.getSQL=function(){return new ji([this])};EI.prototype.getSQL=function(){return new ji([this])};function lIe(t){return t[ml.Symbol.Columns]}function cIe(t){return t[ey].selectedFields}function Yi(t,e){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:e}}var PB,AB;class P1 extends(AB=Vn,PB=mt,AB){generatedAlwaysAsIdentity(e){if(e){const{name:r,...s}=e;this.config.generatedIdentity={type:"always",sequenceName:r,sequenceOptions:s}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:r,...s}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:r,sequenceOptions:s}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}qe(P1,PB,"PgIntColumnBaseBuilder");var _B,IB;class HZ extends(IB=P1,_B=mt,IB){constructor(e){super(e,"number","PgBigInt53")}build(e){return new WZ(e,this.config)}}qe(HZ,_B,"PgBigInt53Builder");var MB,OB;class WZ extends(OB=nn,MB=mt,OB){getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}qe(WZ,MB,"PgBigInt53");var RB,DB;class YZ extends(DB=P1,RB=mt,DB){constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new KZ(e,this.config)}}qe(YZ,RB,"PgBigInt64Builder");var $B,LB;class KZ extends(LB=nn,$B=mt,LB){getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}qe(KZ,$B,"PgBigInt64");function dIe(t,e){const{name:r,config:s}=Yi(t,e);return s.mode==="number"?new HZ(r):new YZ(r)}var FB,BB;class GZ extends(BB=Vn,FB=mt,BB){constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new XZ(e,this.config)}}qe(GZ,FB,"PgBigSerial53Builder");var UB,zB;class XZ extends(zB=nn,UB=mt,zB){getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}qe(XZ,UB,"PgBigSerial53");var VB,qB;class QZ extends(qB=Vn,VB=mt,qB){constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new JZ(e,this.config)}}qe(QZ,VB,"PgBigSerial64Builder");var HB,WB;class JZ extends(WB=nn,HB=mt,WB){getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}qe(JZ,HB,"PgBigSerial64");function uIe(t,e){const{name:r,config:s}=Yi(t,e);return s.mode==="number"?new GZ(r):new QZ(r)}var YB,KB;class ZZ extends(KB=Vn,YB=mt,KB){constructor(e){super(e,"boolean","PgBoolean")}build(e){return new eee(e,this.config)}}qe(ZZ,YB,"PgBooleanBuilder");var GB,XB;class eee extends(XB=nn,GB=mt,XB){getSQLType(){return"boolean"}}qe(eee,GB,"PgBoolean");function No(t){return new ZZ(t??"")}var QB,JB;class tee extends(JB=Vn,QB=mt,JB){constructor(e,r){super(e,"string","PgChar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new ree(e,this.config)}}qe(tee,QB,"PgCharBuilder");var ZB,eU;class ree extends(eU=nn,ZB=mt,eU){constructor(){super(...arguments);qe(this,"length",this.config.length);qe(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}qe(ree,ZB,"PgChar");function hIe(t,e={}){const{name:r,config:s}=Yi(t,e);return new tee(r,s)}var tU,rU;class nee extends(rU=Vn,tU=mt,rU){constructor(e){super(e,"string","PgCidr")}build(e){return new see(e,this.config)}}qe(nee,tU,"PgCidrBuilder");var nU,sU;class see extends(sU=nn,nU=mt,sU){getSQLType(){return"cidr"}}qe(see,nU,"PgCidr");function fIe(t){return new nee(t??"")}var aU,iU;class aee extends(iU=Vn,aU=mt,iU){constructor(e,r,s){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=r,this.config.customTypeParams=s}build(e){return new iee(e,this.config)}}qe(aee,aU,"PgCustomColumnBuilder");var oU,lU;class iee extends(lU=nn,oU=mt,lU){constructor(r,s){super(r,s);qe(this,"sqlName");qe(this,"mapTo");qe(this,"mapFrom");this.sqlName=s.customTypeParams.dataType(s.fieldConfig),this.mapTo=s.customTypeParams.toDriver,this.mapFrom=s.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(r){return typeof this.mapFrom=="function"?this.mapFrom(r):r}mapToDriverValue(r){return typeof this.mapTo=="function"?this.mapTo(r):r}}qe(iee,oU,"PgCustomColumn");function mIe(t){return(e,r)=>{const{name:s,config:a}=Yi(e,r);return new aee(s,a,t)}}var cU,dU;class Sv extends(dU=Vn,cU=mt,dU){defaultNow(){return this.default(I2`now()`)}}qe(Sv,cU,"PgDateColumnBaseBuilder");var uU,hU;class oee extends(hU=Sv,uU=mt,hU){constructor(e){super(e,"date","PgDate")}build(e){return new lee(e,this.config)}}qe(oee,uU,"PgDateBuilder");var fU,mU;class lee extends(mU=nn,fU=mt,mU){getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}qe(lee,fU,"PgDate");var pU,gU;class cee extends(gU=Sv,pU=mt,gU){constructor(e){super(e,"string","PgDateString")}build(e){return new dee(e,this.config)}}qe(cee,pU,"PgDateStringBuilder");var xU,yU;class dee extends(yU=nn,xU=mt,yU){getSQLType(){return"date"}}qe(dee,xU,"PgDateString");function pIe(t,e){const{name:r,config:s}=Yi(t,e);return(s==null?void 0:s.mode)==="date"?new oee(r):new cee(r)}var vU,bU;class uee extends(bU=Vn,vU=mt,bU){constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new hee(e,this.config)}}qe(uee,vU,"PgDoublePrecisionBuilder");var wU,NU;class hee extends(NU=nn,wU=mt,NU){getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}}qe(hee,wU,"PgDoublePrecision");function gIe(t){return new uee(t??"")}var jU,SU;class fee extends(SU=Vn,jU=mt,SU){constructor(e){super(e,"string","PgInet")}build(e){return new mee(e,this.config)}}qe(fee,jU,"PgInetBuilder");var kU,CU;class mee extends(CU=nn,kU=mt,CU){getSQLType(){return"inet"}}qe(mee,kU,"PgInet");function xIe(t){return new fee(t??"")}var EU,TU;class pee extends(TU=P1,EU=mt,TU){constructor(e){super(e,"number","PgInteger")}build(e){return new gee(e,this.config)}}qe(pee,EU,"PgIntegerBuilder");var PU,AU;class gee extends(AU=nn,PU=mt,AU){getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}}qe(gee,PU,"PgInteger");function Gr(t){return new pee(t??"")}var _U,IU;class xee extends(IU=Vn,_U=mt,IU){constructor(e,r){super(e,"string","PgInterval"),this.config.intervalConfig=r}build(e){return new yee(e,this.config)}}qe(xee,_U,"PgIntervalBuilder");var MU,OU;class yee extends(OU=nn,MU=mt,OU){constructor(){super(...arguments);qe(this,"fields",this.config.intervalConfig.fields);qe(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const r=this.fields?` ${this.fields}`:"",s=this.precision?`(${this.precision})`:"";return`interval${r}${s}`}}qe(yee,MU,"PgInterval");function yIe(t,e={}){const{name:r,config:s}=Yi(t,e);return new xee(r,s)}var RU,DU;class vee extends(DU=Vn,RU=mt,DU){constructor(e){super(e,"json","PgJson")}build(e){return new bee(e,this.config)}}qe(vee,RU,"PgJsonBuilder");var $U,LU;class bee extends(LU=nn,$U=mt,LU){constructor(e,r){super(e,r)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}qe(bee,$U,"PgJson");function vIe(t){return new vee(t??"")}var FU,BU;class wee extends(BU=Vn,FU=mt,BU){constructor(e){super(e,"json","PgJsonb")}build(e){return new Nee(e,this.config)}}qe(wee,FU,"PgJsonbBuilder");var UU,zU;class Nee extends(zU=nn,UU=mt,zU){constructor(e,r){super(e,r)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}qe(Nee,UU,"PgJsonb");function Cs(t){return new wee(t??"")}var VU,qU;class jee extends(qU=Vn,VU=mt,qU){constructor(e){super(e,"array","PgLine")}build(e){return new See(e,this.config)}}qe(jee,VU,"PgLineBuilder");var HU,WU;class See extends(WU=nn,HU=mt,WU){getSQLType(){return"line"}mapFromDriverValue(e){const[r,s,a]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(s),Number.parseFloat(a)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}qe(See,HU,"PgLine");var YU,KU;class kee extends(KU=Vn,YU=mt,KU){constructor(e){super(e,"json","PgLineABC")}build(e){return new Cee(e,this.config)}}qe(kee,YU,"PgLineABCBuilder");var GU,XU;class Cee extends(XU=nn,GU=mt,XU){getSQLType(){return"line"}mapFromDriverValue(e){const[r,s,a]=e.slice(1,-1).split(",");return{a:Number.parseFloat(r),b:Number.parseFloat(s),c:Number.parseFloat(a)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}qe(Cee,GU,"PgLineABC");function bIe(t,e){const{name:r,config:s}=Yi(t,e);return!(s!=null&&s.mode)||s.mode==="tuple"?new jee(r):new kee(r)}var QU,JU;class Eee extends(JU=Vn,QU=mt,JU){constructor(e){super(e,"string","PgMacaddr")}build(e){return new Tee(e,this.config)}}qe(Eee,QU,"PgMacaddrBuilder");var ZU,ez;class Tee extends(ez=nn,ZU=mt,ez){getSQLType(){return"macaddr"}}qe(Tee,ZU,"PgMacaddr");function wIe(t){return new Eee(t??"")}var tz,rz;class Pee extends(rz=Vn,tz=mt,rz){constructor(e){super(e,"string","PgMacaddr8")}build(e){return new Aee(e,this.config)}}qe(Pee,tz,"PgMacaddr8Builder");var nz,sz;class Aee extends(sz=nn,nz=mt,sz){getSQLType(){return"macaddr8"}}qe(Aee,nz,"PgMacaddr8");function NIe(t){return new Pee(t??"")}var az,iz;class _ee extends(iz=Vn,az=mt,iz){constructor(e,r,s){super(e,"string","PgNumeric"),this.config.precision=r,this.config.scale=s}build(e){return new Iee(e,this.config)}}qe(_ee,az,"PgNumericBuilder");var oz,lz;class Iee extends(lz=nn,oz=mt,lz){constructor(r,s){super(r,s);qe(this,"precision");qe(this,"scale");this.precision=s.precision,this.scale=s.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}qe(Iee,oz,"PgNumeric");function Mee(t,e){const{name:r,config:s}=Yi(t,e);return new _ee(r,s==null?void 0:s.precision,s==null?void 0:s.scale)}const _r=Mee;var cz,dz;class Oee extends(dz=Vn,cz=mt,dz){constructor(e){super(e,"array","PgPointTuple")}build(e){return new Ree(e,this.config)}}qe(Oee,cz,"PgPointTupleBuilder");var uz,hz;class Ree extends(hz=nn,uz=mt,hz){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[r,s]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(s)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}qe(Ree,uz,"PgPointTuple");var fz,mz;class Dee extends(mz=Vn,fz=mt,mz){constructor(e){super(e,"json","PgPointObject")}build(e){return new $ee(e,this.config)}}qe(Dee,fz,"PgPointObjectBuilder");var pz,gz;class $ee extends(gz=nn,pz=mt,gz){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[r,s]=e.slice(1,-1).split(",");return{x:Number.parseFloat(r),y:Number.parseFloat(s)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}qe($ee,pz,"PgPointObject");function jIe(t,e){const{name:r,config:s}=Yi(t,e);return!(s!=null&&s.mode)||s.mode==="tuple"?new Oee(r):new Dee(r)}function SIe(t){const e=[];for(let r=0;r<t.length;r+=2)e.push(Number.parseInt(t.slice(r,r+2),16));return new Uint8Array(e)}function _9(t,e){const r=new ArrayBuffer(8),s=new DataView(r);for(let a=0;a<8;a++)s.setUint8(a,t[e+a]);return s.getFloat64(0,!0)}function Lee(t){const e=SIe(t);let r=0;const s=e[r];r+=1;const a=new DataView(e.buffer),i=a.getUint32(r,s===1);if(r+=4,i&536870912&&(a.getUint32(r,s===1),r+=4),(i&65535)===1){const o=_9(e,r);r+=8;const l=_9(e,r);return r+=8,[o,l]}throw new Error("Unsupported geometry type")}var xz,yz;class Fee extends(yz=Vn,xz=mt,yz){constructor(e){super(e,"array","PgGeometry")}build(e){return new Bee(e,this.config)}}qe(Fee,xz,"PgGeometryBuilder");var vz,bz;class Bee extends(bz=nn,vz=mt,bz){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return Lee(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}qe(Bee,vz,"PgGeometry");var wz,Nz;class Uee extends(Nz=Vn,wz=mt,Nz){constructor(e){super(e,"json","PgGeometryObject")}build(e){return new zee(e,this.config)}}qe(Uee,wz,"PgGeometryObjectBuilder");var jz,Sz;class zee extends(Sz=nn,jz=mt,Sz){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const r=Lee(e);return{x:r[0],y:r[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}qe(zee,jz,"PgGeometryObject");function kIe(t,e){const{name:r,config:s}=Yi(t,e);return!(s!=null&&s.mode)||s.mode==="tuple"?new Fee(r):new Uee(r)}var kz,Cz;class Vee extends(Cz=Vn,kz=mt,Cz){constructor(e,r){super(e,"number","PgReal"),this.config.length=r}build(e){return new qee(e,this.config)}}qe(Vee,kz,"PgRealBuilder");var Ez,Tz;class qee extends(Tz=nn,Ez=mt,Tz){constructor(r,s){super(r,s);qe(this,"mapFromDriverValue",r=>typeof r=="string"?Number.parseFloat(r):r)}getSQLType(){return"real"}}qe(qee,Ez,"PgReal");function Js(t){return new Vee(t??"")}var Pz,Az;class Hee extends(Az=Vn,Pz=mt,Az){constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Wee(e,this.config)}}qe(Hee,Pz,"PgSerialBuilder");var _z,Iz;class Wee extends(Iz=nn,_z=mt,Iz){getSQLType(){return"serial"}}qe(Wee,_z,"PgSerial");function fs(t){return new Hee(t??"")}var Mz,Oz;class Yee extends(Oz=P1,Mz=mt,Oz){constructor(e){super(e,"number","PgSmallInt")}build(e){return new Kee(e,this.config)}}qe(Yee,Mz,"PgSmallIntBuilder");var Rz,Dz;class Kee extends(Dz=nn,Rz=mt,Dz){constructor(){super(...arguments);qe(this,"mapFromDriverValue",r=>typeof r=="string"?Number(r):r)}getSQLType(){return"smallint"}}qe(Kee,Rz,"PgSmallInt");function CIe(t){return new Yee(t??"")}var $z,Lz;class Gee extends(Lz=Vn,$z=mt,Lz){constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Xee(e,this.config)}}qe(Gee,$z,"PgSmallSerialBuilder");var Fz,Bz;class Xee extends(Bz=nn,Fz=mt,Bz){getSQLType(){return"smallserial"}}qe(Xee,Fz,"PgSmallSerial");function EIe(t){return new Gee(t??"")}var Uz,zz;class Qee extends(zz=Vn,Uz=mt,zz){constructor(e,r){super(e,"string","PgText"),this.config.enumValues=r.enum}build(e){return new Jee(e,this.config)}}qe(Qee,Uz,"PgTextBuilder");var Vz,qz;class Jee extends(qz=nn,Vz=mt,qz){constructor(){super(...arguments);qe(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}qe(Jee,Vz,"PgText");function _t(t,e={}){const{name:r,config:s}=Yi(t,e);return new Qee(r,s)}var Hz,Wz;class Zee extends(Wz=Sv,Hz=mt,Wz){constructor(e,r,s){super(e,"string","PgTime"),this.withTimezone=r,this.precision=s,this.config.withTimezone=r,this.config.precision=s}build(e){return new ete(e,this.config)}}qe(Zee,Hz,"PgTimeBuilder");var Yz,Kz;class ete extends(Kz=nn,Yz=mt,Kz){constructor(r,s){super(r,s);qe(this,"withTimezone");qe(this,"precision");this.withTimezone=s.withTimezone,this.precision=s.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}qe(ete,Yz,"PgTime");function TIe(t,e={}){const{name:r,config:s}=Yi(t,e);return new Zee(r,s.withTimezone??!1,s.precision)}var Gz,Xz;class tte extends(Xz=Sv,Gz=mt,Xz){constructor(e,r,s){super(e,"date","PgTimestamp"),this.config.withTimezone=r,this.config.precision=s}build(e){return new rte(e,this.config)}}qe(tte,Gz,"PgTimestampBuilder");var Qz,Jz;class rte extends(Jz=nn,Qz=mt,Jz){constructor(r,s){super(r,s);qe(this,"withTimezone");qe(this,"precision");qe(this,"mapFromDriverValue",r=>new Date(this.withTimezone?r:r+"+0000"));qe(this,"mapToDriverValue",r=>r.toISOString());this.withTimezone=s.withTimezone,this.precision=s.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}qe(rte,Qz,"PgTimestamp");var Zz,eV;class nte extends(eV=Sv,Zz=mt,eV){constructor(e,r,s){super(e,"string","PgTimestampString"),this.config.withTimezone=r,this.config.precision=s}build(e){return new ste(e,this.config)}}qe(nte,Zz,"PgTimestampStringBuilder");var tV,rV;class ste extends(rV=nn,tV=mt,rV){constructor(r,s){super(r,s);qe(this,"withTimezone");qe(this,"precision");this.withTimezone=s.withTimezone,this.precision=s.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}qe(ste,tV,"PgTimestampString");function mr(t,e={}){const{name:r,config:s}=Yi(t,e);return(s==null?void 0:s.mode)==="string"?new nte(r,s.withTimezone??!1,s.precision):new tte(r,(s==null?void 0:s.withTimezone)??!1,s==null?void 0:s.precision)}var nV,sV;class ate extends(sV=Vn,nV=mt,sV){constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(I2`gen_random_uuid()`)}build(e){return new ite(e,this.config)}}qe(ate,nV,"PgUUIDBuilder");var aV,iV;class ite extends(iV=nn,aV=mt,iV){getSQLType(){return"uuid"}}qe(ite,aV,"PgUUID");function PIe(t){return new ate(t??"")}var oV,lV;class ote extends(lV=Vn,oV=mt,lV){constructor(e,r){super(e,"string","PgVarchar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new lte(e,this.config)}}qe(ote,oV,"PgVarcharBuilder");var cV,dV;class lte extends(dV=nn,cV=mt,dV){constructor(){super(...arguments);qe(this,"length",this.config.length);qe(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}qe(lte,cV,"PgVarchar");function Dn(t,e={}){const{name:r,config:s}=Yi(t,e);return new ote(r,s)}var uV,hV;class cte extends(hV=Vn,uV=mt,hV){constructor(e,r){super(e,"string","PgBinaryVector"),this.config.dimensions=r.dimensions}build(e){return new dte(e,this.config)}}qe(cte,uV,"PgBinaryVectorBuilder");var fV,mV;class dte extends(mV=nn,fV=mt,mV){constructor(){super(...arguments);qe(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}qe(dte,fV,"PgBinaryVector");function AIe(t,e){const{name:r,config:s}=Yi(t,e);return new cte(r,s)}var pV,gV;class ute extends(gV=Vn,pV=mt,gV){constructor(e,r){super(e,"array","PgHalfVector"),this.config.dimensions=r.dimensions}build(e){return new hte(e,this.config)}}qe(ute,pV,"PgHalfVectorBuilder");var xV,yV;class hte extends(yV=nn,xV=mt,yV){constructor(){super(...arguments);qe(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(r){return JSON.stringify(r)}mapFromDriverValue(r){return r.slice(1,-1).split(",").map(s=>Number.parseFloat(s))}}qe(hte,xV,"PgHalfVector");function _Ie(t,e){const{name:r,config:s}=Yi(t,e);return new ute(r,s)}var vV,bV;class fte extends(bV=Vn,vV=mt,bV){constructor(e,r){super(e,"string","PgSparseVector"),this.config.dimensions=r.dimensions}build(e){return new mte(e,this.config)}}qe(fte,vV,"PgSparseVectorBuilder");var wV,NV;class mte extends(NV=nn,wV=mt,NV){constructor(){super(...arguments);qe(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}qe(mte,wV,"PgSparseVector");function IIe(t,e){const{name:r,config:s}=Yi(t,e);return new fte(r,s)}var jV,SV;class pte extends(SV=Vn,jV=mt,SV){constructor(e,r){super(e,"array","PgVector"),this.config.dimensions=r.dimensions}build(e){return new gte(e,this.config)}}qe(pte,jV,"PgVectorBuilder");var kV,CV;class gte extends(CV=nn,kV=mt,CV){constructor(){super(...arguments);qe(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(r){return JSON.stringify(r)}mapFromDriverValue(r){return r.slice(1,-1).split(",").map(s=>Number.parseFloat(s))}}qe(gte,kV,"PgVector");function MIe(t,e){const{name:r,config:s}=Yi(t,e);return new pte(r,s)}function OIe(){return{bigint:dIe,bigserial:uIe,boolean:No,char:hIe,cidr:fIe,customType:mIe,date:pIe,doublePrecision:gIe,inet:xIe,integer:Gr,interval:yIe,json:vIe,jsonb:Cs,line:bIe,macaddr:wIe,macaddr8:NIe,numeric:Mee,point:jIe,geometry:kIe,real:Js,serial:fs,smallint:CIe,smallserial:EIe,text:_t,time:TIe,timestamp:mr,uuid:PIe,varchar:Dn,bit:AIe,halfvec:_Ie,sparsevec:IIe,vector:MIe}}const rA=Symbol.for("drizzle:PgInlineForeignKeys"),I9=Symbol.for("drizzle:EnableRLS");var EV,TV,PV,AV,_V;class O2 extends(_V=ml,AV=mt,PV=rA,TV=I9,EV=ml.Symbol.ExtraConfigBuilder,_V){constructor(){super(...arguments);qe(this,PV,[]);qe(this,TV,!1);qe(this,EV)}}qe(O2,AV,"PgTable"),qe(O2,"Symbol",Object.assign({},ml.Symbol,{InlineForeignKeys:rA,EnableRLS:I9}));function RIe(t,e,r,s,a=t){const i=new O2(t,s,a),o=typeof e=="function"?e(OIe()):e,l=Object.fromEntries(Object.entries(o).map(([f,m])=>{const x=m;x.setName(f);const b=x.build(i);return i[rA].push(...x.buildForeignKeys(b,i)),[f,b]})),d=Object.fromEntries(Object.entries(o).map(([f,m])=>{const x=m;x.setName(f);const b=x.buildExtraConfigColumn(i);return[f,b]})),h=Object.assign(i,l);return h[ml.Symbol.Columns]=l,h[ml.Symbol.ExtraConfigColumns]=d,Object.assign(h,{enableRLS:()=>(h[O2.Symbol.EnableRLS]=!0,h)})}const ms=(t,e,r)=>RIe(t,e,r,void 0);var zn;(function(t){t.assertEqual=a=>{};function e(a){}t.assertIs=e;function r(a){throw new Error}t.assertNever=r,t.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},t.getValidEnumValues=a=>{const i=t.objectKeys(a).filter(l=>typeof a[a[l]]!="number"),o={};for(const l of i)o[l]=a[l];return t.objectValues(o)},t.objectValues=a=>t.objectKeys(a).map(function(i){return a[i]}),t.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},t.find=(a,i)=>{for(const o of a)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function s(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=s,t.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(zn||(zn={}));var nA;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(nA||(nA={}));const Jt=zn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Jf=t=>{switch(typeof t){case"undefined":return Jt.undefined;case"string":return Jt.string;case"number":return Number.isNaN(t)?Jt.nan:Jt.number;case"boolean":return Jt.boolean;case"function":return Jt.function;case"bigint":return Jt.bigint;case"symbol":return Jt.symbol;case"object":return Array.isArray(t)?Jt.array:t===null?Jt.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Jt.promise:typeof Map<"u"&&t instanceof Map?Jt.map:typeof Set<"u"&&t instanceof Set?Jt.set:typeof Date<"u"&&t instanceof Date?Jt.date:Jt.object;default:return Jt.unknown}},bt=zn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),DIe=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class qc extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){const r=e||function(i){return i.message},s={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)s._errors.push(r(o));else{let l=s,d=0;for(;d<o.path.length;){const h=o.path[d];d===o.path.length-1?(l[h]=l[h]||{_errors:[]},l[h]._errors.push(r(o))):l[h]=l[h]||{_errors:[]},l=l[h],d++}}};return a(this),s}static assert(e){if(!(e instanceof qc))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,zn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},s=[];for(const a of this.issues)if(a.path.length>0){const i=a.path[0];r[i]=r[i]||[],r[i].push(e(a))}else s.push(e(a));return{formErrors:s,fieldErrors:r}}get formErrors(){return this.flatten()}}qc.create=t=>new qc(t);const Gy=(t,e)=>{let r;switch(t.code){case bt.invalid_type:t.received===Jt.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case bt.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,zn.jsonStringifyReplacer)}`;break;case bt.unrecognized_keys:r=`Unrecognized key(s) in object: ${zn.joinValues(t.keys,", ")}`;break;case bt.invalid_union:r="Invalid input";break;case bt.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${zn.joinValues(t.options)}`;break;case bt.invalid_enum_value:r=`Invalid enum value. Expected ${zn.joinValues(t.options)}, received '${t.received}'`;break;case bt.invalid_arguments:r="Invalid function arguments";break;case bt.invalid_return_type:r="Invalid function return type";break;case bt.invalid_date:r="Invalid date";break;case bt.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:zn.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case bt.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case bt.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case bt.custom:r="Invalid input";break;case bt.invalid_intersection_types:r="Intersection results could not be merged";break;case bt.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case bt.not_finite:r="Number must be finite";break;default:r=e.defaultError,zn.assertNever(t)}return{message:r}};let xte=Gy;function $Ie(t){xte=t}function R2(){return xte}const D2=t=>{const{data:e,path:r,errorMaps:s,issueData:a}=t,i=[...r,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let l="";const d=s.filter(h=>!!h).slice().reverse();for(const h of d)l=h(o,{data:e,defaultError:l}).message;return{...a,path:i,message:l}},LIe=[];function Ut(t,e){const r=R2(),s=D2({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===Gy?void 0:Gy].filter(a=>!!a)});t.common.issues.push(s)}class Ho{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const s=[];for(const a of r){if(a.status==="aborted")return Ir;a.status==="dirty"&&e.dirty(),s.push(a.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,r){const s=[];for(const a of r){const i=await a.key,o=await a.value;s.push({key:i,value:o})}return Ho.mergeObjectSync(e,s)}static mergeObjectSync(e,r){const s={};for(const a of r){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return Ir;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(s[i.value]=o.value)}return{status:e.value,value:s}}}const Ir=Object.freeze({status:"aborted"}),zx=t=>({status:"dirty",value:t}),bl=t=>({status:"valid",value:t}),sA=t=>t.status==="aborted",aA=t=>t.status==="dirty",O0=t=>t.status==="valid",Ow=t=>typeof Promise<"u"&&t instanceof Promise;var fr;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(fr||(fr={}));class uf{constructor(e,r,s,a){this._cachedPath=[],this.parent=e,this.data=r,this._path=s,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const M9=(t,e)=>{if(O0(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new qc(t.common.issues);return this._error=r,this._error}}};function rn(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:s,description:a}=t;if(e&&(r||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:a}:{errorMap:(o,l)=>{const{message:d}=t;return o.code==="invalid_enum_value"?{message:d??l.defaultError}:typeof l.data>"u"?{message:d??s??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:d??r??l.defaultError}},description:a}}class fn{get description(){return this._def.description}_getType(e){return Jf(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Jf(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ho,ctx:{common:e.parent.common,data:e.data,parsedType:Jf(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(Ow(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const s=this.safeParse(e,r);if(s.success)return s.data;throw s.error}safeParse(e,r){const s={common:{issues:[],async:(r==null?void 0:r.async)??!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Jf(e)},a=this._parseSync({data:e,path:s.path,parent:s});return M9(s,a)}"~validate"(e){var s,a;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Jf(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:r});return O0(i)?{value:i.value}:{issues:r.common.issues}}catch(i){(a=(s=i==null?void 0:i.message)==null?void 0:s.toLowerCase())!=null&&a.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(i=>O0(i)?{value:i.value}:{issues:r.common.issues})}async parseAsync(e,r){const s=await this.safeParseAsync(e,r);if(s.success)return s.data;throw s.error}async safeParseAsync(e,r){const s={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Jf(e)},a=this._parse({data:e,path:s.path,parent:s}),i=await(Ow(a)?a:Promise.resolve(a));return M9(s,i)}refine(e,r){const s=a=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(a):r;return this._refinement((a,i)=>{const o=e(a),l=()=>i.addIssue({code:bt.custom,...s(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(d=>d?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,r){return this._refinement((s,a)=>e(s)?!0:(a.addIssue(typeof r=="function"?r(s,a):r),!1))}_refinement(e){return new Vu({schema:this,typeName:$r.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return af.create(this,this._def)}nullable(){return Qp.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Fu.create(this)}promise(){return Qy.create(this,this._def)}or(e){return Lw.create([this,e],this._def)}and(e){return Fw.create(this,e,this._def)}transform(e){return new Vu({...rn(this._def),schema:this,typeName:$r.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new qw({...rn(this._def),innerType:this,defaultValue:r,typeName:$r.ZodDefault})}brand(){return new PI({typeName:$r.ZodBranded,type:this,...rn(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new Hw({...rn(this._def),innerType:this,catchValue:r,typeName:$r.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return A1.create(this,e)}readonly(){return Ww.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const FIe=/^c[^\s-]{8,}$/i,BIe=/^[0-9a-z]+$/,UIe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,zIe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,VIe=/^[a-z0-9_-]{21}$/i,qIe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,HIe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,WIe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,YIe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let D3;const KIe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,GIe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,XIe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,QIe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,JIe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,ZIe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,yte="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",e6e=new RegExp(`^${yte}$`);function vte(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}function t6e(t){return new RegExp(`^${vte(t)}$`)}function bte(t){let e=`${yte}T${vte(t)}`;const r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function r6e(t,e){return!!((e==="v4"||!e)&&KIe.test(t)||(e==="v6"||!e)&&XIe.test(t))}function n6e(t,e){if(!qIe.test(t))return!1;try{const[r]=t.split(".");if(!r)return!1;const s=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),a=JSON.parse(atob(s));return!(typeof a!="object"||a===null||"typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||e&&a.alg!==e)}catch{return!1}}function s6e(t,e){return!!((e==="v4"||!e)&&GIe.test(t)||(e==="v6"||!e)&&QIe.test(t))}class Lu extends fn{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Jt.string){const i=this._getOrReturnCtx(e);return Ut(i,{code:bt.invalid_type,expected:Jt.string,received:i.parsedType}),Ir}const s=new Ho;let a;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(a=this._getOrReturnCtx(e,a),Ut(a,{code:bt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="max")e.data.length>i.value&&(a=this._getOrReturnCtx(e,a),Ut(a,{code:bt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,l=e.data.length<i.value;(o||l)&&(a=this._getOrReturnCtx(e,a),o?Ut(a,{code:bt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&Ut(a,{code:bt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),s.dirty())}else if(i.kind==="email")WIe.test(e.data)||(a=this._getOrReturnCtx(e,a),Ut(a,{validation:"email",code:bt.invalid_string,message:i.message}),s.dirty());else if(i.kind==="emoji")D3||(D3=new RegExp(YIe,"u")),D3.test(e.data)||(a=this._getOrReturnCtx(e,a),Ut(a,{validation:"emoji",code:bt.invalid_string,message:i.message}),s.dirty());else if(i.kind==="uuid")zIe.test(e.data)||(a=this._getOrReturnCtx(e,a),Ut(a,{validation:"uuid",code:bt.invalid_string,message:i.message}),s.dirty());else if(i.kind==="nanoid")VIe.test(e.data)||(a=this._getOrReturnCtx(e,a),Ut(a,{validation:"nanoid",code:bt.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid")FIe.test(e.data)||(a=this._getOrReturnCtx(e,a),Ut(a,{validation:"cuid",code:bt.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid2")BIe.test(e.data)||(a=this._getOrReturnCtx(e,a),Ut(a,{validation:"cuid2",code:bt.invalid_string,message:i.message}),s.dirty());else if(i.kind==="ulid")UIe.test(e.data)||(a=this._getOrReturnCtx(e,a),Ut(a,{validation:"ulid",code:bt.invalid_string,message:i.message}),s.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),Ut(a,{validation:"url",code:bt.invalid_string,message:i.message}),s.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),Ut(a,{validation:"regex",code:bt.invalid_string,message:i.message}),s.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(e,a),Ut(a,{code:bt.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),s.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(a=this._getOrReturnCtx(e,a),Ut(a,{code:bt.invalid_string,validation:{startsWith:i.value},message:i.message}),s.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(a=this._getOrReturnCtx(e,a),Ut(a,{code:bt.invalid_string,validation:{endsWith:i.value},message:i.message}),s.dirty()):i.kind==="datetime"?bte(i).test(e.data)||(a=this._getOrReturnCtx(e,a),Ut(a,{code:bt.invalid_string,validation:"datetime",message:i.message}),s.dirty()):i.kind==="date"?e6e.test(e.data)||(a=this._getOrReturnCtx(e,a),Ut(a,{code:bt.invalid_string,validation:"date",message:i.message}),s.dirty()):i.kind==="time"?t6e(i).test(e.data)||(a=this._getOrReturnCtx(e,a),Ut(a,{code:bt.invalid_string,validation:"time",message:i.message}),s.dirty()):i.kind==="duration"?HIe.test(e.data)||(a=this._getOrReturnCtx(e,a),Ut(a,{validation:"duration",code:bt.invalid_string,message:i.message}),s.dirty()):i.kind==="ip"?r6e(e.data,i.version)||(a=this._getOrReturnCtx(e,a),Ut(a,{validation:"ip",code:bt.invalid_string,message:i.message}),s.dirty()):i.kind==="jwt"?n6e(e.data,i.alg)||(a=this._getOrReturnCtx(e,a),Ut(a,{validation:"jwt",code:bt.invalid_string,message:i.message}),s.dirty()):i.kind==="cidr"?s6e(e.data,i.version)||(a=this._getOrReturnCtx(e,a),Ut(a,{validation:"cidr",code:bt.invalid_string,message:i.message}),s.dirty()):i.kind==="base64"?JIe.test(e.data)||(a=this._getOrReturnCtx(e,a),Ut(a,{validation:"base64",code:bt.invalid_string,message:i.message}),s.dirty()):i.kind==="base64url"?ZIe.test(e.data)||(a=this._getOrReturnCtx(e,a),Ut(a,{validation:"base64url",code:bt.invalid_string,message:i.message}),s.dirty()):zn.assertNever(i);return{status:s.value,value:e.data}}_regex(e,r,s){return this.refinement(a=>e.test(a),{validation:r,code:bt.invalid_string,...fr.errToObj(s)})}_addCheck(e){return new Lu({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...fr.errToObj(e)})}url(e){return this._addCheck({kind:"url",...fr.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...fr.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...fr.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...fr.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...fr.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...fr.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...fr.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...fr.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...fr.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...fr.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...fr.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...fr.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...fr.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...fr.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...fr.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...fr.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...fr.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...fr.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...fr.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...fr.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...fr.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...fr.errToObj(r)})}nonempty(e){return this.min(1,fr.errToObj(e))}trim(){return new Lu({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Lu({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Lu({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Lu.create=t=>new Lu({checks:[],typeName:$r.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...rn(t)});function a6e(t,e){const r=(t.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,a=r>s?r:s,i=Number.parseInt(t.toFixed(a).replace(".","")),o=Number.parseInt(e.toFixed(a).replace(".",""));return i%o/10**a}class Kp extends fn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Jt.number){const i=this._getOrReturnCtx(e);return Ut(i,{code:bt.invalid_type,expected:Jt.number,received:i.parsedType}),Ir}let s;const a=new Ho;for(const i of this._def.checks)i.kind==="int"?zn.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),Ut(s,{code:bt.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(s=this._getOrReturnCtx(e,s),Ut(s,{code:bt.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(s=this._getOrReturnCtx(e,s),Ut(s,{code:bt.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?a6e(e.data,i.value)!==0&&(s=this._getOrReturnCtx(e,s),Ut(s,{code:bt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),Ut(s,{code:bt.not_finite,message:i.message}),a.dirty()):zn.assertNever(i);return{status:a.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,fr.toString(r))}gt(e,r){return this.setLimit("min",e,!1,fr.toString(r))}lte(e,r){return this.setLimit("max",e,!0,fr.toString(r))}lt(e,r){return this.setLimit("max",e,!1,fr.toString(r))}setLimit(e,r,s,a){return new Kp({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:s,message:fr.toString(a)}]})}_addCheck(e){return new Kp({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:fr.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:fr.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:fr.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:fr.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:fr.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:fr.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:fr.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:fr.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:fr.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&zn.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(r===null||s.value>r)&&(r=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(r)&&Number.isFinite(e)}}Kp.create=t=>new Kp({checks:[],typeName:$r.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...rn(t)});class Gp extends fn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Jt.bigint)return this._getInvalidInput(e);let s;const a=new Ho;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(s=this._getOrReturnCtx(e,s),Ut(s,{code:bt.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(s=this._getOrReturnCtx(e,s),Ut(s,{code:bt.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),Ut(s,{code:bt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):zn.assertNever(i);return{status:a.value,value:e.data}}_getInvalidInput(e){const r=this._getOrReturnCtx(e);return Ut(r,{code:bt.invalid_type,expected:Jt.bigint,received:r.parsedType}),Ir}gte(e,r){return this.setLimit("min",e,!0,fr.toString(r))}gt(e,r){return this.setLimit("min",e,!1,fr.toString(r))}lte(e,r){return this.setLimit("max",e,!0,fr.toString(r))}lt(e,r){return this.setLimit("max",e,!1,fr.toString(r))}setLimit(e,r,s,a){return new Gp({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:s,message:fr.toString(a)}]})}_addCheck(e){return new Gp({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:fr.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:fr.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:fr.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:fr.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:fr.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Gp.create=t=>new Gp({checks:[],typeName:$r.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...rn(t)});class Rw extends fn{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Jt.boolean){const s=this._getOrReturnCtx(e);return Ut(s,{code:bt.invalid_type,expected:Jt.boolean,received:s.parsedType}),Ir}return bl(e.data)}}Rw.create=t=>new Rw({typeName:$r.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...rn(t)});class R0 extends fn{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Jt.date){const i=this._getOrReturnCtx(e);return Ut(i,{code:bt.invalid_type,expected:Jt.date,received:i.parsedType}),Ir}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Ut(i,{code:bt.invalid_date}),Ir}const s=new Ho;let a;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(a=this._getOrReturnCtx(e,a),Ut(a,{code:bt.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),s.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(a=this._getOrReturnCtx(e,a),Ut(a,{code:bt.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),s.dirty()):zn.assertNever(i);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new R0({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:fr.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:fr.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}R0.create=t=>new R0({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:$r.ZodDate,...rn(t)});class $2 extends fn{_parse(e){if(this._getType(e)!==Jt.symbol){const s=this._getOrReturnCtx(e);return Ut(s,{code:bt.invalid_type,expected:Jt.symbol,received:s.parsedType}),Ir}return bl(e.data)}}$2.create=t=>new $2({typeName:$r.ZodSymbol,...rn(t)});class Dw extends fn{_parse(e){if(this._getType(e)!==Jt.undefined){const s=this._getOrReturnCtx(e);return Ut(s,{code:bt.invalid_type,expected:Jt.undefined,received:s.parsedType}),Ir}return bl(e.data)}}Dw.create=t=>new Dw({typeName:$r.ZodUndefined,...rn(t)});class $w extends fn{_parse(e){if(this._getType(e)!==Jt.null){const s=this._getOrReturnCtx(e);return Ut(s,{code:bt.invalid_type,expected:Jt.null,received:s.parsedType}),Ir}return bl(e.data)}}$w.create=t=>new $w({typeName:$r.ZodNull,...rn(t)});class Xy extends fn{constructor(){super(...arguments),this._any=!0}_parse(e){return bl(e.data)}}Xy.create=t=>new Xy({typeName:$r.ZodAny,...rn(t)});class f0 extends fn{constructor(){super(...arguments),this._unknown=!0}_parse(e){return bl(e.data)}}f0.create=t=>new f0({typeName:$r.ZodUnknown,...rn(t)});class Em extends fn{_parse(e){const r=this._getOrReturnCtx(e);return Ut(r,{code:bt.invalid_type,expected:Jt.never,received:r.parsedType}),Ir}}Em.create=t=>new Em({typeName:$r.ZodNever,...rn(t)});class L2 extends fn{_parse(e){if(this._getType(e)!==Jt.undefined){const s=this._getOrReturnCtx(e);return Ut(s,{code:bt.invalid_type,expected:Jt.void,received:s.parsedType}),Ir}return bl(e.data)}}L2.create=t=>new L2({typeName:$r.ZodVoid,...rn(t)});class Fu extends fn{_parse(e){const{ctx:r,status:s}=this._processInputParams(e),a=this._def;if(r.parsedType!==Jt.array)return Ut(r,{code:bt.invalid_type,expected:Jt.array,received:r.parsedType}),Ir;if(a.exactLength!==null){const o=r.data.length>a.exactLength.value,l=r.data.length<a.exactLength.value;(o||l)&&(Ut(r,{code:o?bt.too_big:bt.too_small,minimum:l?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),s.dirty())}if(a.minLength!==null&&r.data.length<a.minLength.value&&(Ut(r,{code:bt.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),s.dirty()),a.maxLength!==null&&r.data.length>a.maxLength.value&&(Ut(r,{code:bt.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),s.dirty()),r.common.async)return Promise.all([...r.data].map((o,l)=>a.type._parseAsync(new uf(r,o,r.path,l)))).then(o=>Ho.mergeArray(s,o));const i=[...r.data].map((o,l)=>a.type._parseSync(new uf(r,o,r.path,l)));return Ho.mergeArray(s,i)}get element(){return this._def.type}min(e,r){return new Fu({...this._def,minLength:{value:e,message:fr.toString(r)}})}max(e,r){return new Fu({...this._def,maxLength:{value:e,message:fr.toString(r)}})}length(e,r){return new Fu({...this._def,exactLength:{value:e,message:fr.toString(r)}})}nonempty(e){return this.min(1,e)}}Fu.create=(t,e)=>new Fu({type:t,minLength:null,maxLength:null,exactLength:null,typeName:$r.ZodArray,...rn(e)});function Rx(t){if(t instanceof ka){const e={};for(const r in t.shape){const s=t.shape[r];e[r]=af.create(Rx(s))}return new ka({...t._def,shape:()=>e})}else return t instanceof Fu?new Fu({...t._def,type:Rx(t.element)}):t instanceof af?af.create(Rx(t.unwrap())):t instanceof Qp?Qp.create(Rx(t.unwrap())):t instanceof hf?hf.create(t.items.map(e=>Rx(e))):t}class ka extends fn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=zn.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==Jt.object){const h=this._getOrReturnCtx(e);return Ut(h,{code:bt.invalid_type,expected:Jt.object,received:h.parsedType}),Ir}const{status:s,ctx:a}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Em&&this._def.unknownKeys==="strip"))for(const h in a.data)o.includes(h)||l.push(h);const d=[];for(const h of o){const f=i[h],m=a.data[h];d.push({key:{status:"valid",value:h},value:f._parse(new uf(a,m,a.path,h)),alwaysSet:h in a.data})}if(this._def.catchall instanceof Em){const h=this._def.unknownKeys;if(h==="passthrough")for(const f of l)d.push({key:{status:"valid",value:f},value:{status:"valid",value:a.data[f]}});else if(h==="strict")l.length>0&&(Ut(a,{code:bt.unrecognized_keys,keys:l}),s.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const f of l){const m=a.data[f];d.push({key:{status:"valid",value:f},value:h._parse(new uf(a,m,a.path,f)),alwaysSet:f in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const h=[];for(const f of d){const m=await f.key,x=await f.value;h.push({key:m,value:x,alwaysSet:f.alwaysSet})}return h}).then(h=>Ho.mergeObjectSync(s,h)):Ho.mergeObjectSync(s,d)}get shape(){return this._def.shape()}strict(e){return fr.errToObj,new ka({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,s)=>{var i,o;const a=((o=(i=this._def).errorMap)==null?void 0:o.call(i,r,s).message)??s.defaultError;return r.code==="unrecognized_keys"?{message:fr.errToObj(e).message??a}:{message:a}}}:{}})}strip(){return new ka({...this._def,unknownKeys:"strip"})}passthrough(){return new ka({...this._def,unknownKeys:"passthrough"})}extend(e){return new ka({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ka({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:$r.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new ka({...this._def,catchall:e})}pick(e){const r={};for(const s of zn.objectKeys(e))e[s]&&this.shape[s]&&(r[s]=this.shape[s]);return new ka({...this._def,shape:()=>r})}omit(e){const r={};for(const s of zn.objectKeys(this.shape))e[s]||(r[s]=this.shape[s]);return new ka({...this._def,shape:()=>r})}deepPartial(){return Rx(this)}partial(e){const r={};for(const s of zn.objectKeys(this.shape)){const a=this.shape[s];e&&!e[s]?r[s]=a:r[s]=a.optional()}return new ka({...this._def,shape:()=>r})}required(e){const r={};for(const s of zn.objectKeys(this.shape))if(e&&!e[s])r[s]=this.shape[s];else{let i=this.shape[s];for(;i instanceof af;)i=i._def.innerType;r[s]=i}return new ka({...this._def,shape:()=>r})}keyof(){return wte(zn.objectKeys(this.shape))}}ka.create=(t,e)=>new ka({shape:()=>t,unknownKeys:"strip",catchall:Em.create(),typeName:$r.ZodObject,...rn(e)});ka.strictCreate=(t,e)=>new ka({shape:()=>t,unknownKeys:"strict",catchall:Em.create(),typeName:$r.ZodObject,...rn(e)});ka.lazycreate=(t,e)=>new ka({shape:t,unknownKeys:"strip",catchall:Em.create(),typeName:$r.ZodObject,...rn(e)});class Lw extends fn{_parse(e){const{ctx:r}=this._processInputParams(e),s=this._def.options;function a(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;const o=i.map(l=>new qc(l.ctx.common.issues));return Ut(r,{code:bt.invalid_union,unionErrors:o}),Ir}if(r.common.async)return Promise.all(s.map(async i=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const d of s){const h={...r,common:{...r.common,issues:[]},parent:null},f=d._parseSync({data:r.data,path:r.path,parent:h});if(f.status==="valid")return f;f.status==="dirty"&&!i&&(i={result:f,ctx:h}),h.common.issues.length&&o.push(h.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const l=o.map(d=>new qc(d));return Ut(r,{code:bt.invalid_union,unionErrors:l}),Ir}}get options(){return this._def.options}}Lw.create=(t,e)=>new Lw({options:t,typeName:$r.ZodUnion,...rn(e)});const Xf=t=>t instanceof Uw?Xf(t.schema):t instanceof Vu?Xf(t.innerType()):t instanceof zw?[t.value]:t instanceof Xp?t.options:t instanceof Vw?zn.objectValues(t.enum):t instanceof qw?Xf(t._def.innerType):t instanceof Dw?[void 0]:t instanceof $w?[null]:t instanceof af?[void 0,...Xf(t.unwrap())]:t instanceof Qp?[null,...Xf(t.unwrap())]:t instanceof PI||t instanceof Ww?Xf(t.unwrap()):t instanceof Hw?Xf(t._def.innerType):[];class bk extends fn{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==Jt.object)return Ut(r,{code:bt.invalid_type,expected:Jt.object,received:r.parsedType}),Ir;const s=this.discriminator,a=r.data[s],i=this.optionsMap.get(a);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(Ut(r,{code:bt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),Ir)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,s){const a=new Map;for(const i of r){const o=Xf(i.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of o){if(a.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);a.set(l,i)}}return new bk({typeName:$r.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:a,...rn(s)})}}function iA(t,e){const r=Jf(t),s=Jf(e);if(t===e)return{valid:!0,data:t};if(r===Jt.object&&s===Jt.object){const a=zn.objectKeys(e),i=zn.objectKeys(t).filter(l=>a.indexOf(l)!==-1),o={...t,...e};for(const l of i){const d=iA(t[l],e[l]);if(!d.valid)return{valid:!1};o[l]=d.data}return{valid:!0,data:o}}else if(r===Jt.array&&s===Jt.array){if(t.length!==e.length)return{valid:!1};const a=[];for(let i=0;i<t.length;i++){const o=t[i],l=e[i],d=iA(o,l);if(!d.valid)return{valid:!1};a.push(d.data)}return{valid:!0,data:a}}else return r===Jt.date&&s===Jt.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Fw extends fn{_parse(e){const{status:r,ctx:s}=this._processInputParams(e),a=(i,o)=>{if(sA(i)||sA(o))return Ir;const l=iA(i.value,o.value);return l.valid?((aA(i)||aA(o))&&r.dirty(),{status:r.value,value:l.data}):(Ut(s,{code:bt.invalid_intersection_types}),Ir)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}Fw.create=(t,e,r)=>new Fw({left:t,right:e,typeName:$r.ZodIntersection,...rn(r)});class hf extends fn{_parse(e){const{status:r,ctx:s}=this._processInputParams(e);if(s.parsedType!==Jt.array)return Ut(s,{code:bt.invalid_type,expected:Jt.array,received:s.parsedType}),Ir;if(s.data.length<this._def.items.length)return Ut(s,{code:bt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ir;!this._def.rest&&s.data.length>this._def.items.length&&(Ut(s,{code:bt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...s.data].map((o,l)=>{const d=this._def.items[l]||this._def.rest;return d?d._parse(new uf(s,o,s.path,l)):null}).filter(o=>!!o);return s.common.async?Promise.all(i).then(o=>Ho.mergeArray(r,o)):Ho.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new hf({...this._def,rest:e})}}hf.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new hf({items:t,typeName:$r.ZodTuple,rest:null,...rn(e)})};class Bw extends fn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:s}=this._processInputParams(e);if(s.parsedType!==Jt.object)return Ut(s,{code:bt.invalid_type,expected:Jt.object,received:s.parsedType}),Ir;const a=[],i=this._def.keyType,o=this._def.valueType;for(const l in s.data)a.push({key:i._parse(new uf(s,l,s.path,l)),value:o._parse(new uf(s,s.data[l],s.path,l)),alwaysSet:l in s.data});return s.common.async?Ho.mergeObjectAsync(r,a):Ho.mergeObjectSync(r,a)}get element(){return this._def.valueType}static create(e,r,s){return r instanceof fn?new Bw({keyType:e,valueType:r,typeName:$r.ZodRecord,...rn(s)}):new Bw({keyType:Lu.create(),valueType:e,typeName:$r.ZodRecord,...rn(r)})}}class F2 extends fn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:s}=this._processInputParams(e);if(s.parsedType!==Jt.map)return Ut(s,{code:bt.invalid_type,expected:Jt.map,received:s.parsedType}),Ir;const a=this._def.keyType,i=this._def.valueType,o=[...s.data.entries()].map(([l,d],h)=>({key:a._parse(new uf(s,l,s.path,[h,"key"])),value:i._parse(new uf(s,d,s.path,[h,"value"]))}));if(s.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const d of o){const h=await d.key,f=await d.value;if(h.status==="aborted"||f.status==="aborted")return Ir;(h.status==="dirty"||f.status==="dirty")&&r.dirty(),l.set(h.value,f.value)}return{status:r.value,value:l}})}else{const l=new Map;for(const d of o){const h=d.key,f=d.value;if(h.status==="aborted"||f.status==="aborted")return Ir;(h.status==="dirty"||f.status==="dirty")&&r.dirty(),l.set(h.value,f.value)}return{status:r.value,value:l}}}}F2.create=(t,e,r)=>new F2({valueType:e,keyType:t,typeName:$r.ZodMap,...rn(r)});class D0 extends fn{_parse(e){const{status:r,ctx:s}=this._processInputParams(e);if(s.parsedType!==Jt.set)return Ut(s,{code:bt.invalid_type,expected:Jt.set,received:s.parsedType}),Ir;const a=this._def;a.minSize!==null&&s.data.size<a.minSize.value&&(Ut(s,{code:bt.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),r.dirty()),a.maxSize!==null&&s.data.size>a.maxSize.value&&(Ut(s,{code:bt.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),r.dirty());const i=this._def.valueType;function o(d){const h=new Set;for(const f of d){if(f.status==="aborted")return Ir;f.status==="dirty"&&r.dirty(),h.add(f.value)}return{status:r.value,value:h}}const l=[...s.data.values()].map((d,h)=>i._parse(new uf(s,d,s.path,h)));return s.common.async?Promise.all(l).then(d=>o(d)):o(l)}min(e,r){return new D0({...this._def,minSize:{value:e,message:fr.toString(r)}})}max(e,r){return new D0({...this._def,maxSize:{value:e,message:fr.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}D0.create=(t,e)=>new D0({valueType:t,minSize:null,maxSize:null,typeName:$r.ZodSet,...rn(e)});class ty extends fn{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==Jt.function)return Ut(r,{code:bt.invalid_type,expected:Jt.function,received:r.parsedType}),Ir;function s(l,d){return D2({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,R2(),Gy].filter(h=>!!h),issueData:{code:bt.invalid_arguments,argumentsError:d}})}function a(l,d){return D2({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,R2(),Gy].filter(h=>!!h),issueData:{code:bt.invalid_return_type,returnTypeError:d}})}const i={errorMap:r.common.contextualErrorMap},o=r.data;if(this._def.returns instanceof Qy){const l=this;return bl(async function(...d){const h=new qc([]),f=await l._def.args.parseAsync(d,i).catch(b=>{throw h.addIssue(s(d,b)),h}),m=await Reflect.apply(o,this,f);return await l._def.returns._def.type.parseAsync(m,i).catch(b=>{throw h.addIssue(a(m,b)),h})})}else{const l=this;return bl(function(...d){const h=l._def.args.safeParse(d,i);if(!h.success)throw new qc([s(d,h.error)]);const f=Reflect.apply(o,this,h.data),m=l._def.returns.safeParse(f,i);if(!m.success)throw new qc([a(f,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ty({...this._def,args:hf.create(e).rest(f0.create())})}returns(e){return new ty({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,s){return new ty({args:e||hf.create([]).rest(f0.create()),returns:r||f0.create(),typeName:$r.ZodFunction,...rn(s)})}}class Uw extends fn{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}Uw.create=(t,e)=>new Uw({getter:t,typeName:$r.ZodLazy,...rn(e)});class zw extends fn{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return Ut(r,{received:r.data,code:bt.invalid_literal,expected:this._def.value}),Ir}return{status:"valid",value:e.data}}get value(){return this._def.value}}zw.create=(t,e)=>new zw({value:t,typeName:$r.ZodLiteral,...rn(e)});function wte(t,e){return new Xp({values:t,typeName:$r.ZodEnum,...rn(e)})}class Xp extends fn{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),s=this._def.values;return Ut(r,{expected:zn.joinValues(s),received:r.parsedType,code:bt.invalid_type}),Ir}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const r=this._getOrReturnCtx(e),s=this._def.values;return Ut(r,{received:r.data,code:bt.invalid_enum_value,options:s}),Ir}return bl(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return Xp.create(e,{...this._def,...r})}exclude(e,r=this._def){return Xp.create(this.options.filter(s=>!e.includes(s)),{...this._def,...r})}}Xp.create=wte;class Vw extends fn{_parse(e){const r=zn.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==Jt.string&&s.parsedType!==Jt.number){const a=zn.objectValues(r);return Ut(s,{expected:zn.joinValues(a),received:s.parsedType,code:bt.invalid_type}),Ir}if(this._cache||(this._cache=new Set(zn.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const a=zn.objectValues(r);return Ut(s,{received:s.data,code:bt.invalid_enum_value,options:a}),Ir}return bl(e.data)}get enum(){return this._def.values}}Vw.create=(t,e)=>new Vw({values:t,typeName:$r.ZodNativeEnum,...rn(e)});class Qy extends fn{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==Jt.promise&&r.common.async===!1)return Ut(r,{code:bt.invalid_type,expected:Jt.promise,received:r.parsedType}),Ir;const s=r.parsedType===Jt.promise?r.data:Promise.resolve(r.data);return bl(s.then(a=>this._def.type.parseAsync(a,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Qy.create=(t,e)=>new Qy({type:t,typeName:$r.ZodPromise,...rn(e)});class Vu extends fn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===$r.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:s}=this._processInputParams(e),a=this._def.effect||null,i={addIssue:o=>{Ut(s,o),o.fatal?r.abort():r.dirty()},get path(){return s.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(s.data,i);if(s.common.async)return Promise.resolve(o).then(async l=>{if(r.value==="aborted")return Ir;const d=await this._def.schema._parseAsync({data:l,path:s.path,parent:s});return d.status==="aborted"?Ir:d.status==="dirty"||r.value==="dirty"?zx(d.value):d});{if(r.value==="aborted")return Ir;const l=this._def.schema._parseSync({data:o,path:s.path,parent:s});return l.status==="aborted"?Ir:l.status==="dirty"||r.value==="dirty"?zx(l.value):l}}if(a.type==="refinement"){const o=l=>{const d=a.refinement(l,i);if(s.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(s.common.async===!1){const l=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return l.status==="aborted"?Ir:(l.status==="dirty"&&r.dirty(),o(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(l=>l.status==="aborted"?Ir:(l.status==="dirty"&&r.dirty(),o(l.value).then(()=>({status:r.value,value:l.value}))))}if(a.type==="transform")if(s.common.async===!1){const o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!O0(o))return Ir;const l=a.transform(o.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>O0(o)?Promise.resolve(a.transform(o.value,i)).then(l=>({status:r.value,value:l})):Ir);zn.assertNever(a)}}Vu.create=(t,e,r)=>new Vu({schema:t,typeName:$r.ZodEffects,effect:e,...rn(r)});Vu.createWithPreprocess=(t,e,r)=>new Vu({schema:e,effect:{type:"preprocess",transform:t},typeName:$r.ZodEffects,...rn(r)});class af extends fn{_parse(e){return this._getType(e)===Jt.undefined?bl(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}af.create=(t,e)=>new af({innerType:t,typeName:$r.ZodOptional,...rn(e)});class Qp extends fn{_parse(e){return this._getType(e)===Jt.null?bl(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Qp.create=(t,e)=>new Qp({innerType:t,typeName:$r.ZodNullable,...rn(e)});class qw extends fn{_parse(e){const{ctx:r}=this._processInputParams(e);let s=r.data;return r.parsedType===Jt.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}qw.create=(t,e)=>new qw({innerType:t,typeName:$r.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...rn(e)});class Hw extends fn{_parse(e){const{ctx:r}=this._processInputParams(e),s={...r,common:{...r.common,issues:[]}},a=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return Ow(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new qc(s.common.issues)},input:s.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new qc(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}Hw.create=(t,e)=>new Hw({innerType:t,typeName:$r.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...rn(e)});class B2 extends fn{_parse(e){if(this._getType(e)!==Jt.nan){const s=this._getOrReturnCtx(e);return Ut(s,{code:bt.invalid_type,expected:Jt.nan,received:s.parsedType}),Ir}return{status:"valid",value:e.data}}}B2.create=t=>new B2({typeName:$r.ZodNaN,...rn(t)});const i6e=Symbol("zod_brand");class PI extends fn{_parse(e){const{ctx:r}=this._processInputParams(e),s=r.data;return this._def.type._parse({data:s,path:r.path,parent:r})}unwrap(){return this._def.type}}class A1 extends fn{_parse(e){const{status:r,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return i.status==="aborted"?Ir:i.status==="dirty"?(r.dirty(),zx(i.value)):this._def.out._parseAsync({data:i.value,path:s.path,parent:s})})();{const a=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return a.status==="aborted"?Ir:a.status==="dirty"?(r.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:s.path,parent:s})}}static create(e,r){return new A1({in:e,out:r,typeName:$r.ZodPipeline})}}class Ww extends fn{_parse(e){const r=this._def.innerType._parse(e),s=a=>(O0(a)&&(a.value=Object.freeze(a.value)),a);return Ow(r)?r.then(a=>s(a)):s(r)}unwrap(){return this._def.innerType}}Ww.create=(t,e)=>new Ww({innerType:t,typeName:$r.ZodReadonly,...rn(e)});function O9(t,e){const r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}function AI(t,e={},r){return t?Xy.create().superRefine((s,a)=>{const i=t(s);if(i instanceof Promise)return i.then(o=>{if(!o){const l=O9(e,s),d=l.fatal??r??!0;a.addIssue({code:"custom",...l,fatal:d})}});if(!i){const o=O9(e,s),l=o.fatal??r??!0;a.addIssue({code:"custom",...o,fatal:l})}}):Xy.create()}const o6e={object:ka.lazycreate};var $r;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})($r||($r={}));const l6e=(t,e={message:`Input not instance of ${t.name}`})=>AI(r=>r instanceof t,e),Si=Lu.create,wi=Kp.create,c6e=B2.create,d6e=Gp.create,wk=Rw.create,u6e=R0.create,h6e=$2.create,f6e=Dw.create,Nte=$w.create,U2=Xy.create,m6e=f0.create,p6e=Em.create,g6e=L2.create,Yw=Fu.create,Qu=ka.create,x6e=ka.strictCreate,_I=Lw.create,jte=bk.create,y6e=Fw.create,v6e=hf.create,Ste=Bw.create,b6e=F2.create,w6e=D0.create,N6e=ty.create,j6e=Uw.create,II=zw.create,MI=Xp.create,S6e=Vw.create,k6e=Qy.create,R9=Vu.create,C6e=af.create,E6e=Qp.create,T6e=Vu.createWithPreprocess,P6e=A1.create,A6e=()=>Si().optional(),_6e=()=>wi().optional(),I6e=()=>wk().optional(),M6e={string:(t=>Lu.create({...t,coerce:!0})),number:(t=>Kp.create({...t,coerce:!0})),boolean:(t=>Rw.create({...t,coerce:!0})),bigint:(t=>Gp.create({...t,coerce:!0})),date:(t=>R0.create({...t,coerce:!0}))},O6e=Ir,R6e=Object.freeze(Object.defineProperty({__proto__:null,BRAND:i6e,DIRTY:zx,EMPTY_PATH:LIe,INVALID:Ir,NEVER:O6e,OK:bl,ParseStatus:Ho,Schema:fn,ZodAny:Xy,ZodArray:Fu,ZodBigInt:Gp,ZodBoolean:Rw,ZodBranded:PI,ZodCatch:Hw,ZodDate:R0,ZodDefault:qw,ZodDiscriminatedUnion:bk,ZodEffects:Vu,ZodEnum:Xp,ZodError:qc,get ZodFirstPartyTypeKind(){return $r},ZodFunction:ty,ZodIntersection:Fw,ZodIssueCode:bt,ZodLazy:Uw,ZodLiteral:zw,ZodMap:F2,ZodNaN:B2,ZodNativeEnum:Vw,ZodNever:Em,ZodNull:$w,ZodNullable:Qp,ZodNumber:Kp,ZodObject:ka,ZodOptional:af,ZodParsedType:Jt,ZodPipeline:A1,ZodPromise:Qy,ZodReadonly:Ww,ZodRecord:Bw,ZodSchema:fn,ZodSet:D0,ZodString:Lu,ZodSymbol:$2,ZodTransformer:Vu,ZodTuple:hf,ZodType:fn,ZodUndefined:Dw,ZodUnion:Lw,ZodUnknown:f0,ZodVoid:L2,addIssueToContext:Ut,any:U2,array:Yw,bigint:d6e,boolean:wk,coerce:M6e,custom:AI,date:u6e,datetimeRegex:bte,defaultErrorMap:Gy,discriminatedUnion:jte,effect:R9,enum:MI,function:N6e,getErrorMap:R2,getParsedType:Jf,instanceof:l6e,intersection:y6e,isAborted:sA,isAsync:Ow,isDirty:aA,isValid:O0,late:o6e,lazy:j6e,literal:II,makeIssue:D2,map:b6e,nan:c6e,nativeEnum:S6e,never:p6e,null:Nte,nullable:E6e,number:wi,object:Qu,get objectUtil(){return nA},oboolean:I6e,onumber:_6e,optional:C6e,ostring:A6e,pipeline:P6e,preprocess:T6e,promise:k6e,quotelessJson:DIe,record:Ste,set:w6e,setErrorMap:$Ie,strictObject:x6e,string:Si,symbol:h6e,transformer:R9,tuple:v6e,undefined:f6e,union:_I,unknown:m6e,get util(){return zn},void:g6e},Symbol.toStringTag,{value:"Module"})),ja={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function qa(t,e){return e.includes(t.columnType)}function D6e(t){return"enumValues"in t&&Array.isArray(t.enumValues)&&t.enumValues.length>0}const $6e=_I([Si(),wi(),wk(),Nte()]),L6e=_I([$6e,Ste(U2()),Yw(U2())]),F6e=AI(t=>t instanceof Buffer);function kte(t,e){const r=(e==null?void 0:e.zodInstance)??R6e,s=(e==null?void 0:e.coerce)??{};let a;return D6e(t)&&(a=t.enumValues.length?r.enum(t.enumValues):r.string()),a||(qa(t,["PgGeometry","PgPointTuple"])?a=r.tuple([r.number(),r.number()]):qa(t,["PgGeometryObject","PgPointObject"])?a=r.object({x:r.number(),y:r.number()}):qa(t,["PgHalfVector","PgVector"])?(a=r.array(r.number()),a=t.dimensions?a.length(t.dimensions):a):qa(t,["PgLine"])?a=r.tuple([r.number(),r.number(),r.number()]):qa(t,["PgLineABC"])?a=r.object({a:r.number(),b:r.number(),c:r.number()}):qa(t,["PgArray"])?(a=r.array(kte(t.baseColumn,r)),a=t.size?a.length(t.size):a):t.dataType==="array"?a=r.array(r.any()):t.dataType==="number"?a=B6e(t,r,s):t.dataType==="bigint"?a=U6e(t,r,s):t.dataType==="boolean"?a=s===!0||s.boolean?r.coerce.boolean():r.boolean():t.dataType==="date"?a=s===!0||s.date?r.coerce.date():r.date():t.dataType==="string"?a=z6e(t,r,s):t.dataType==="json"?a=L6e:t.dataType==="custom"?a=r.any():t.dataType==="buffer"&&(a=F6e)),a||(a=r.any()),a}function B6e(t,e,r){let s=t.getSQLType().includes("unsigned"),a,i,o=!1;qa(t,["MySqlTinyInt","SingleStoreTinyInt"])?(a=s?0:ja.INT8_MIN,i=s?ja.INT8_UNSIGNED_MAX:ja.INT8_MAX,o=!0):qa(t,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(a=s?0:ja.INT16_MIN,i=s?ja.INT16_UNSIGNED_MAX:ja.INT16_MAX,o=!0):qa(t,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(a=s?0:ja.INT24_MIN,i=s?ja.INT24_UNSIGNED_MAX:ja.INT24_MAX,o=qa(t,["MySqlMediumInt","SingleStoreMediumInt"])):qa(t,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(a=s?0:ja.INT32_MIN,i=s?ja.INT32_UNSIGNED_MAX:ja.INT32_MAX,o=!0):qa(t,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(a=s?0:ja.INT48_MIN,i=s?ja.INT48_UNSIGNED_MAX:ja.INT48_MAX):qa(t,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(s=s||qa(t,["MySqlSerial","SingleStoreSerial"]),a=s?0:Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER,o=!0):qa(t,["MySqlYear","SingleStoreYear"])?(a=1901,i=2155,o=!0):(a=Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER);let l=r===!0||r!=null&&r.number?e.coerce.number():e.number();return l=l.min(a).max(i),o?l.int():l}function U6e(t,e,r){const s=t.getSQLType().includes("unsigned"),a=s?0n:ja.INT64_MIN,i=s?ja.INT64_UNSIGNED_MAX:ja.INT64_MAX;return(r===!0||r!=null&&r.bigint?e.coerce.bigint():e.bigint()).min(a).max(i)}function z6e(t,e,r){if(qa(t,["PgUUID"]))return e.string().uuid();let s,a,i=!1;qa(t,["PgVarchar","SQLiteText"])?s=t.length:qa(t,["MySqlVarChar","SingleStoreVarChar"])?s=t.length??ja.INT16_UNSIGNED_MAX:qa(t,["MySqlText","SingleStoreText"])&&(t.textType==="longtext"?s=ja.INT32_UNSIGNED_MAX:t.textType==="mediumtext"?s=ja.INT24_UNSIGNED_MAX:t.textType==="text"?s=ja.INT16_UNSIGNED_MAX:s=ja.INT8_UNSIGNED_MAX),qa(t,["PgChar","MySqlChar","SingleStoreChar"])&&(s=t.length,i=!0),qa(t,["PgBinaryVector"])&&(a=/^[01]+$/,s=t.dimensions);let o=r===!0||r!=null&&r.string?e.coerce.string():e.string();return o=a?o.regex(a):o,s&&i?o.length(s):s?o.max(s):o}function Cte(t){return BZ(t)?lIe(t):cIe(t)}function Ete(t,e,r,s){const a={};for(const[i,o]of Object.entries(t)){if(!po(o,Ky)&&!po(o,ji)&&!po(o,ji.Aliased)&&typeof o=="object"){const m=BZ(o)||oIe(o)?Cte(o):o;a[i]=Ete(m,e[i]??{},r,s);continue}const l=e[i];if(l!==void 0&&typeof l!="function"){a[i]=l;continue}const d=po(o,Ky)?o:void 0,h=d?kte(d,s):U2(),f=typeof l=="function"?l(h):h;r.never(d)||(a[i]=f,d&&(r.nullable(d)&&(a[i]=a[i].nullable()),r.optional(d)&&(a[i]=a[i].optional())))}return Qu(a)}const V6e={never:t=>{var e,r;return((e=t==null?void 0:t.generated)==null?void 0:e.type)==="always"||((r=t==null?void 0:t.generatedIdentity)==null?void 0:r.type)==="always"},optional:t=>!t.notNull||t.notNull&&t.hasDefault,nullable:t=>!t.notNull},ea=(t,e)=>{const r=Cte(t);return Ete(r,e??{},V6e)},Tte=ms("users",{id:fs("id").primaryKey(),username:_t("username").notNull().unique(),password:_t("password").notNull()}),q6e=ms("api_status",{id:fs("id").primaryKey(),connected:No("connected").notNull().default(!1),authenticated:No("authenticated").notNull().default(!1),lastUpdate:mr("last_update").notNull().defaultNow(),version:_t("version").notNull().default("v3.0.0"),dailyLimit:Gr("daily_limit").notNull().default(1e5),requestsUsed:Gr("requests_used").notNull().default(0),websocketActive:No("websocket_active").notNull().default(!1),responseTime:Gr("response_time").notNull().default(0),successRate:Js("success_rate").notNull().default(0),throughput:_t("throughput").notNull().default("0 MB/s"),activeSymbols:Gr("active_symbols").notNull().default(0),updatesPerSec:Gr("updates_per_sec").notNull().default(0),uptime:Js("uptime").notNull().default(0),latency:Gr("latency").notNull().default(0),accessToken:_t("access_token"),tokenExpiry:mr("token_expiry")}),H6e=ms("market_data",{id:fs("id").primaryKey(),symbol:_t("symbol").notNull(),name:_t("name").notNull(),code:_t("code").notNull(),ltp:Js("ltp").notNull(),change:Js("change").notNull(),changePercent:Js("change_percent").notNull(),lastUpdate:mr("last_update").notNull().defaultNow()}),W6e=ms("activity_log",{id:fs("id").primaryKey(),timestamp:mr("timestamp").notNull().defaultNow(),type:_t("type").notNull(),message:_t("message").notNull()}),Pte=ms("analysis_instructions",{id:fs("id").primaryKey(),name:_t("name").notNull().unique(),description:_t("description").notNull(),instructions:Cs("instructions").$type().notNull(),isActive:No("is_active").notNull().default(!0),createdAt:mr("created_at").notNull().defaultNow(),updatedAt:mr("updated_at").notNull().defaultNow()}),Y6e=ms("analysis_results",{id:fs("id").primaryKey(),instructionId:Gr("instruction_id").notNull().references(()=>Pte.id),symbol:_t("symbol").notNull(),timeframe:_t("timeframe").notNull(),dateRange:_t("date_range").notNull(),inputData:Cs("input_data").$type().notNull(),processedData:Cs("processed_data").$type().notNull(),metadata:Cs("metadata").$type(),executedAt:mr("executed_at").notNull().defaultNow(),createdAt:mr("created_at").notNull().defaultNow()}),Nk=ms("social_posts",{id:fs("id").primaryKey(),authorUsername:_t("author_username").notNull(),authorDisplayName:_t("author_display_name").notNull(),authorAvatar:_t("author_avatar"),authorVerified:No("author_verified").notNull().default(!1),authorFollowers:Gr("author_followers").default(0),content:_t("content").notNull(),likes:Gr("likes").notNull().default(0),comments:Gr("comments").notNull().default(0),reposts:Gr("reposts").notNull().default(0),tags:Cs("tags").$type().notNull().default([]),stockMentions:Cs("stock_mentions").$type().notNull().default([]),sentiment:_t("sentiment"),hasImage:No("has_image").notNull().default(!1),imageUrl:_t("image_url"),isAudioPost:No("is_audio_post").notNull().default(!1),selectedPostIds:Cs("selected_post_ids").$type().default([]),selectedPosts:Cs("selected_posts").$type().default([]),createdAt:mr("created_at").notNull().defaultNow(),updatedAt:mr("updated_at").notNull().defaultNow()});ms("social_post_likes",{id:fs("id").primaryKey(),postId:Gr("post_id").notNull().references(()=>Nk.id,{onDelete:"cascade"}),userEmail:_t("user_email").notNull(),createdAt:mr("created_at").notNull().defaultNow()});ms("social_post_comments",{id:fs("id").primaryKey(),postId:Gr("post_id").notNull().references(()=>Nk.id,{onDelete:"cascade"}),userEmail:_t("user_email").notNull(),username:_t("username").notNull(),comment:_t("comment").notNull(),createdAt:mr("created_at").notNull().defaultNow()});ms("social_post_reposts",{id:fs("id").primaryKey(),postId:Gr("post_id").notNull().references(()=>Nk.id,{onDelete:"cascade"}),userEmail:_t("user_email").notNull(),username:_t("username").notNull(),createdAt:mr("created_at").notNull().defaultNow()});ms("user_follows",{id:fs("id").primaryKey(),followerEmail:_t("follower_email").notNull(),followingEmail:_t("following_email").notNull(),followingUsername:_t("following_username").notNull(),createdAt:mr("created_at").notNull().defaultNow()});const K6e=ms("historical_backup_data",{id:fs("id").primaryKey(),symbol:_t("symbol").notNull(),timeframe:_t("timeframe").notNull(),date:_t("date").notNull(),ohlcData:Cs("ohlc_data").$type().notNull(),candleCount:Gr("candle_count").notNull().default(0),dataSource:_t("data_source").notNull().default("fyers"),lastUpdated:mr("last_updated").notNull().defaultNow(),createdAt:mr("created_at").notNull().defaultNow()}),G6e=ms("historical_backup_index",{id:fs("id").primaryKey(),symbol:_t("symbol").notNull(),timeframe:_t("timeframe").notNull(),availableDates:Cs("available_dates").$type().notNull().default([]),totalCandles:Gr("total_candles").notNull().default(0),oldestDate:_t("oldest_date"),newestDate:_t("newest_date"),lastSynced:mr("last_synced").notNull().defaultNow(),isActive:No("is_active").notNull().default(!0)}),X6e=ms("backup_sync_status",{id:fs("id").primaryKey(),operationType:_t("operation_type").notNull(),status:_t("status").notNull(),totalSymbols:Gr("total_symbols").notNull().default(0),processedSymbols:Gr("processed_symbols").notNull().default(0),currentSymbol:_t("current_symbol"),currentTimeframe:_t("current_timeframe"),errors:Cs("errors").$type().notNull().default([]),startedAt:mr("started_at").notNull().defaultNow(),completedAt:mr("completed_at"),estimatedCompletion:mr("estimated_completion")}),Q6e=ms("livestream_settings",{id:fs("id").primaryKey(),youtubeUrl:_t("youtube_url"),updatedAt:mr("updated_at").notNull().defaultNow()}),J6e=ms("verified_reports",{id:fs("id").primaryKey(),reportId:_t("report_id").notNull().unique(),userId:_t("user_id").notNull(),username:_t("username").notNull(),reportData:Cs("report_data").$type().notNull(),shareUrl:_t("share_url").notNull(),views:Gr("views").notNull().default(0),createdAt:mr("created_at").notNull().defaultNow(),expiresAt:mr("expires_at").notNull()});ea(Tte).pick({username:!0,password:!0});ea(q6e).omit({id:!0});ea(H6e).omit({id:!0});ea(W6e).omit({id:!0});ea(Pte).omit({id:!0,createdAt:!0,updatedAt:!0});ea(Y6e).omit({id:!0,executedAt:!0,createdAt:!0});ea(K6e).omit({id:!0,lastUpdated:!0,createdAt:!0});ea(G6e).omit({id:!0,lastSynced:!0});ea(X6e).omit({id:!0,startedAt:!0});ea(Q6e).omit({id:!0,updatedAt:!0});ea(J6e).omit({id:!0,createdAt:!0});const Z6e=ms("scanner_sessions",{id:fs("id").primaryKey(),sessionId:Dn("session_id",{length:100}).notNull().unique(),startTime:mr("start_time").notNull(),endTime:mr("end_time"),status:Dn("status",{length:20}).notNull().default("ACTIVE"),marketDate:Dn("market_date",{length:10}).notNull(),totalSymbolsScanned:Gr("total_symbols_scanned").default(0),totalPatternsFound:Gr("total_patterns_found").default(0),totalTradesExecuted:Gr("total_trades_executed").default(0),scanningFrequency:Gr("scanning_frequency").default(60),createdAt:mr("created_at").defaultNow(),updatedAt:mr("updated_at").defaultNow()}),eMe=ms("symbols",{id:fs("id").primaryKey(),symbol:Dn("symbol",{length:50}).notNull().unique(),name:Dn("name",{length:100}).notNull(),exchange:Dn("exchange",{length:10}).notNull(),isActive:No("is_active").default(!0),lotSize:Gr("lot_size").default(1),tickSize:_r("tick_size",{precision:10,scale:2}).default("0.05"),priority:Gr("priority").default(1),createdAt:mr("created_at").defaultNow()}),tMe=ms("valid_patterns",{id:fs("id").primaryKey(),patternId:Dn("pattern_id",{length:100}).notNull().unique(),sessionId:Dn("session_id",{length:100}).notNull(),symbol:Dn("symbol",{length:50}).notNull(),timeframe:Dn("timeframe",{length:10}).notNull(),patternType:Dn("pattern_type",{length:50}).notNull(),trend:Dn("trend",{length:10}).notNull(),confidence:_r("confidence",{precision:5,scale:2}).notNull(),pointAPrice:_r("point_a_price",{precision:12,scale:2}).notNull(),pointBPrice:_r("point_b_price",{precision:12,scale:2}).notNull(),breakoutLevel:_r("breakout_level",{precision:12,scale:2}).notNull(),stopLoss:_r("stop_loss",{precision:12,scale:2}).notNull(),targetPrice:_r("target_price",{precision:12,scale:2}).notNull(),pointATime:mr("point_a_time").notNull(),pointBTime:mr("point_b_time").notNull(),patternFoundAt:mr("pattern_found_at").notNull(),slope:_r("slope",{precision:10,scale:6}),duration:Gr("duration"),candleData:Cs("candle_data"),oneMinuteData:Cs("one_minute_data"),status:Dn("status",{length:20}).notNull().default("DISCOVERED"),isValid:No("is_valid").default(!0),expiryTime:mr("expiry_time"),riskAmount:_r("risk_amount",{precision:12,scale:2}),riskPercentage:_r("risk_percentage",{precision:5,scale:2}),createdAt:mr("created_at").defaultNow(),updatedAt:mr("updated_at").defaultNow()}),rMe=ms("executed_trades",{id:fs("id").primaryKey(),tradeId:Dn("trade_id",{length:100}).notNull().unique(),patternId:Dn("pattern_id",{length:100}).notNull(),sessionId:Dn("session_id",{length:100}).notNull(),symbol:Dn("symbol",{length:50}).notNull(),orderType:Dn("order_type",{length:20}).notNull(),orderPrice:_r("order_price",{precision:12,scale:2}).notNull(),quantity:Gr("quantity").notNull(),orderStatus:Dn("order_status",{length:20}).notNull(),entryPrice:_r("entry_price",{precision:12,scale:2}),entryTime:mr("entry_time"),exitPrice:_r("exit_price",{precision:12,scale:2}),exitTime:mr("exit_time"),exitReason:Dn("exit_reason",{length:50}),grossPnl:_r("gross_pnl",{precision:12,scale:2}),charges:_r("charges",{precision:10,scale:2}),netPnl:_r("net_pnl",{precision:12,scale:2}),stopLossPrice:_r("stop_loss_price",{precision:12,scale:2}),targetPrice:_r("target_price",{precision:12,scale:2}),tradeStatus:Dn("trade_status",{length:20}).notNull().default("ACTIVE"),brokerage:_r("brokerage",{precision:10,scale:2}),orderRef:Dn("order_ref",{length:100}),notes:_t("notes"),createdAt:mr("created_at").defaultNow(),updatedAt:mr("updated_at").defaultNow()}),nMe=ms("scanner_logs",{id:fs("id").primaryKey(),sessionId:Dn("session_id",{length:100}).notNull(),symbol:Dn("symbol",{length:50}).notNull(),scanTime:mr("scan_time").notNull(),patternsFound:Gr("patterns_found").default(0),scanDuration:Gr("scan_duration"),candlesAnalyzed:Gr("candles_analyzed"),scanStatus:Dn("scan_status",{length:20}).notNull(),errorMessage:_t("error_message"),marketPrice:_r("market_price",{precision:12,scale:2}),volume:Gr("volume"),createdAt:mr("created_at").defaultNow()}),sMe=ms("scanner_config",{id:fs("id").primaryKey(),configName:Dn("config_name",{length:100}).notNull().unique(),scanningFrequency:Gr("scanning_frequency").default(60),maxSymbolsPerScan:Gr("max_symbols_per_scan").default(50),timeframes:Cs("timeframes").default(["5","10","15"]),minConfidence:_r("min_confidence",{precision:5,scale:2}).default("70.00"),maxPatternsPerSymbol:Gr("max_patterns_per_symbol").default(3),patternExpiryMinutes:Gr("pattern_expiry_minutes").default(240),defaultRiskAmount:_r("default_risk_amount",{precision:12,scale:2}).default("10000.00"),maxRiskPerTrade:_r("max_risk_per_trade",{precision:12,scale:2}).default("25000.00"),maxDailyRisk:_r("max_daily_risk",{precision:12,scale:2}).default("100000.00"),marketStartTime:Dn("market_start_time",{length:8}).default("09:15:00"),marketEndTime:Dn("market_end_time",{length:8}).default("15:30:00"),autoTradingEnabled:No("auto_trading_enabled").default(!1),requireManualApproval:No("require_manual_approval").default(!0),isActive:No("is_active").default(!0),createdAt:mr("created_at").defaultNow(),updatedAt:mr("updated_at").defaultNow()}),aMe=ms("trade_approvals",{id:fs("id").primaryKey(),patternId:Dn("pattern_id",{length:100}).notNull(),symbol:Dn("symbol",{length:50}).notNull(),approvalStatus:Dn("approval_status",{length:20}).notNull().default("PENDING"),approvedBy:Dn("approved_by",{length:100}),approvalTime:mr("approval_time"),rejectionReason:_t("rejection_reason"),proposedOrderType:Dn("proposed_order_type",{length:20}).notNull(),proposedPrice:_r("proposed_price",{precision:12,scale:2}).notNull(),proposedQuantity:Gr("proposed_quantity").notNull(),estimatedRisk:_r("estimated_risk",{precision:12,scale:2}).notNull(),createdAt:mr("created_at").defaultNow()});ea(Z6e);ea(eMe);ea(tMe);ea(rMe);ea(nMe);ea(sMe);ea(aMe);ea(Nk);const jk=ms("portfolios",{id:fs("id").primaryKey(),userId:Gr("user_id").notNull().references(()=>Tte.id),name:_t("name").notNull(),description:_t("description"),initialCapital:_r("initial_capital",{precision:15,scale:2}).notNull(),currentValue:_r("current_value",{precision:15,scale:2}).notNull(),totalPnL:_r("total_pnl",{precision:15,scale:2}).notNull().default("0"),totalPnLPercent:Js("total_pnl_percent").notNull().default(0),dayPnL:_r("day_pnl",{precision:15,scale:2}).notNull().default("0"),dayPnLPercent:Js("day_pnl_percent").notNull().default(0),portfolioType:_t("portfolio_type").notNull().default("equity"),riskLevel:_t("risk_level").notNull().default("moderate"),isActive:No("is_active").notNull().default(!0),createdAt:mr("created_at").notNull().defaultNow(),updatedAt:mr("updated_at").notNull().defaultNow()}),iMe=ms("portfolio_holdings",{id:fs("id").primaryKey(),portfolioId:Gr("portfolio_id").notNull().references(()=>jk.id),symbol:_t("symbol").notNull(),quantity:Gr("quantity").notNull(),averagePrice:_r("average_price",{precision:12,scale:2}).notNull(),currentPrice:_r("current_price",{precision:12,scale:2}).notNull(),investedAmount:_r("invested_amount",{precision:15,scale:2}).notNull(),currentValue:_r("current_value",{precision:15,scale:2}).notNull(),unrealizedPnL:_r("unrealized_pnl",{precision:15,scale:2}).notNull(),unrealizedPnLPercent:Js("unrealized_pnl_percent").notNull(),dayChange:_r("day_change",{precision:15,scale:2}).notNull().default("0"),dayChangePercent:Js("day_change_percent").notNull().default(0),sector:_t("sector"),marketCap:_t("market_cap"),beta:Js("beta"),pe:Js("pe"),lastUpdated:mr("last_updated").notNull().defaultNow(),createdAt:mr("created_at").notNull().defaultNow()}),oMe=ms("trade_history",{id:fs("id").primaryKey(),portfolioId:Gr("portfolio_id").notNull().references(()=>jk.id),symbol:_t("symbol").notNull(),tradeType:_t("trade_type").notNull(),orderType:_t("order_type").notNull(),quantity:Gr("quantity").notNull(),price:_r("price",{precision:12,scale:2}).notNull(),totalAmount:_r("total_amount",{precision:15,scale:2}).notNull(),brokerage:_r("brokerage",{precision:10,scale:2}).notNull().default("0"),taxes:_r("taxes",{precision:10,scale:2}).notNull().default("0"),netAmount:_r("net_amount",{precision:15,scale:2}).notNull(),pnlRealized:_r("pnl_realized",{precision:15,scale:2}),pnlPercent:Js("pnl_percent"),tradeStrategy:_t("trade_strategy"),patternId:_t("pattern_id"),notes:_t("notes"),executedAt:mr("executed_at").notNull().defaultNow(),createdAt:mr("created_at").notNull().defaultNow()}),lMe=ms("portfolio_risk_analytics",{id:fs("id").primaryKey(),portfolioId:Gr("portfolio_id").notNull().references(()=>jk.id),valueAtRisk:_r("value_at_risk",{precision:15,scale:2}),expectedShortfall:_r("expected_shortfall",{precision:15,scale:2}),portfolioBeta:Js("portfolio_beta"),portfolioVolatility:Js("portfolio_volatility"),sharpeRatio:Js("sharpe_ratio"),maxDrawdown:Js("max_drawdown"),topHoldingPercent:Js("top_holding_percent"),top5HoldingsPercent:Js("top5_holdings_percent"),sectorConcentration:Cs("sector_concentration"),dailyReturns:Cs("daily_returns"),monthlyReturns:Cs("monthly_returns"),correlation:Cs("correlation"),calculatedAt:mr("calculated_at").notNull().defaultNow(),isValid:No("is_valid").notNull().default(!0)}),cMe=ms("ai_research_reports",{id:fs("id").primaryKey(),reportId:_t("report_id").notNull().unique(),reportType:_t("report_type").notNull(),title:_t("title").notNull(),summary:_t("summary").notNull(),marketOutlook:_t("market_outlook"),sectorAnalysis:Cs("sector_analysis"),topPicks:Cs("top_picks"),riskFactors:Cs("risk_factors"),technicalView:_t("technical_view"),niftyTarget:_r("nifty_target",{precision:10,scale:2}),niftySupport:_r("nifty_support",{precision:10,scale:2}),marketSentiment:_t("market_sentiment"),volatilityOutlook:_t("volatility_outlook"),readCount:Gr("read_count").notNull().default(0),shareCount:Gr("share_count").notNull().default(0),accuracyScore:Js("accuracy_score"),isPublished:No("is_published").notNull().default(!0),publishedAt:mr("published_at").notNull().defaultNow(),expiresAt:mr("expires_at"),createdAt:mr("created_at").notNull().defaultNow()}),dMe=ms("algorithmic_signals",{id:fs("id").primaryKey(),signalId:_t("signal_id").notNull().unique(),symbol:_t("symbol").notNull(),signalType:_t("signal_type").notNull(),strategy:_t("strategy").notNull(),entryPrice:_r("entry_price",{precision:12,scale:2}).notNull(),targetPrice:_r("target_price",{precision:12,scale:2}),stopLoss:_r("stop_loss",{precision:12,scale:2}),confidence:Js("confidence").notNull(),timeframe:_t("timeframe").notNull(),rsi:Js("rsi"),macdSignal:_t("macd_signal"),movingAverage:Cs("moving_average"),supportResistance:Cs("support_resistance"),volumePattern:_t("volume_pattern"),peRatio:Js("pe_ratio"),marketCap:_r("market_cap",{precision:15,scale:2}),earningsGrowth:Js("earnings_growth"),revenueGrowth:Js("revenue_growth"),status:_t("status").notNull().default("ACTIVE"),triggeredAt:mr("triggered_at"),expiresAt:mr("expires_at").notNull(),performance:Js("performance"),createdAt:mr("created_at").notNull().defaultNow()});ea(jk);ea(iMe);ea(oMe);ea(lMe);ea(cMe);ea(dMe);const uMe=ms("saved_patterns",{id:Dn("id").primaryKey(),name:_t("name").notNull(),points:Cs("points").$type().notNull(),relationships:Cs("relationships").$type().notNull(),rays:Cs("rays").$type().notNull(),metadata:Cs("metadata").$type().notNull(),createdAt:mr("created_at").notNull().defaultNow()}),hMe=Qu({pointNumber:wi().min(1),price:wi().positive(),timestamp:wi().positive(),relativePrice:wi().min(0).max(1),relativeTime:wi().min(0).max(1),label:Si().optional()}),BN=Qu({price:wi().positive(),relativePrice:wi().min(0).max(1),color:Si()}),fMe=Qu({sl:BN.optional(),target:BN.optional(),breakout:BN.optional()}).catchall(BN.optional()),mMe=Qu({totalPoints:wi().min(1),priceRange:wi().positive(),timeRange:wi().positive(),volatility:wi().min(0),avgSlope:wi(),symbol:Si().min(1),timeframe:Si().min(1),dateCreated:Si()});ea(uMe,{points:Yw(hMe).min(2),relationships:Yw(Si()).default([]),rays:fMe.default({}),metadata:mMe}).omit({createdAt:!0});const Ate=["kite","dhan"],_te=MI(Ate),Ite=Qu({broker:II("kite"),apiKey:Si().min(1,"API Key is required"),apiSecret:Si().min(1,"API Secret is required"),requestToken:Si().min(1,"Request Token is required")}),Mte=Qu({broker:II("dhan"),clientId:Si().min(1,"Client ID is required"),accessToken:Si().min(1,"Access Token is required")}),pMe=jte("broker",[Ite,Mte]),gMe=Qu({broker:_te,tradeId:Si(),symbol:Si().min(1),action:MI(["BUY","SELL"]),quantity:wi().positive(),price:wi().positive(),executedAt:Si(),pnl:wi().optional(),fees:wi().optional(),notes:Si().optional()});Qu({broker:_te,credentials:pMe});Qu({success:wk(),trades:Yw(gMe),message:Si().optional()});function xMe({open:t,onOpenChange:e,onSuccess:r}){var N;const[s,a]=g.useState(""),[i,o]=g.useState(!1),l={kite:"Kite (Zerodha)",dhan:"Dhan"},d={kite:"Login to Kite Connect and generate a request token from your developer dashboard.",dhan:"Get your access token from the Dhan trading platform settings."},h=j9({resolver:k9(Ite),defaultValues:{broker:"kite",apiKey:"",apiSecret:"",requestToken:""}}),f=j9({resolver:k9(Mte),defaultValues:{broker:"dhan",clientId:"",accessToken:""}}),m=()=>s==="kite"?h:s==="dhan"?f:null,x=yo({mutationFn:async w=>await Bp({url:"/api/brokers/import",method:"POST",body:{broker:s,credentials:w}}),onSuccess:w=>{o(!0),setTimeout(()=>{r(w.trades),b()},1500)}}),b=()=>{a(""),o(!1),h.reset(),f.reset(),x.reset(),e(!1)},j=()=>{const w=m();w&&w.handleSubmit(C=>{x.mutate(C)})()};return n.jsx(bn,{open:t,onOpenChange:e,children:n.jsxs(pn,{className:"max-w-xl",children:[n.jsx(Zn,{children:n.jsxs(Xn,{className:"flex items-center gap-2",children:[n.jsx(Qne,{className:"h-5 w-5"}),"Import Trades from Broker"]})}),n.jsx("div",{className:"space-y-4",children:i?n.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[n.jsx(Bc,{className:"h-16 w-16 text-green-600 dark:text-green-400 mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-green-900 dark:text-green-100",children:"Import Successful!"}),n.jsxs("p",{className:"text-sm text-green-700 dark:text-green-300 mt-2",children:[((N=x.data)==null?void 0:N.trades.length)||0," trades imported from"," ",s&&l[s]]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx(Un,{className:"text-sm font-medium",children:"Select Broker"}),n.jsxs(Ms,{value:s,onValueChange:w=>a(w),children:[n.jsx(Ns,{className:"mt-2","data-testid":"select-broker",children:n.jsx(Os,{placeholder:"Choose your broker"})}),n.jsx(js,{children:Ate.map(w=>n.jsx(gt,{value:w,"data-testid":`option-broker-${w}`,children:l[w]},w))})]}),s&&n.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:d[s]})]}),s==="kite"&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx(Un,{htmlFor:"kite-api-key",className:"text-sm",children:"API Key"}),n.jsx(Nr,{id:"kite-api-key",...h.register("apiKey"),placeholder:"Enter your Kite API Key",className:"mt-1","data-testid":"input-kite-api-key"}),h.formState.errors.apiKey&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:h.formState.errors.apiKey.message})]}),n.jsxs("div",{children:[n.jsx(Un,{htmlFor:"kite-api-secret",className:"text-sm",children:"API Secret"}),n.jsx(Nr,{id:"kite-api-secret",type:"password",...h.register("apiSecret"),placeholder:"Enter your Kite API Secret",className:"mt-1","data-testid":"input-kite-api-secret"}),h.formState.errors.apiSecret&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:h.formState.errors.apiSecret.message})]}),n.jsxs("div",{children:[n.jsx(Un,{htmlFor:"kite-request-token",className:"text-sm",children:"Request Token"}),n.jsx(Nr,{id:"kite-request-token",...h.register("requestToken"),placeholder:"Enter your Request Token",className:"mt-1","data-testid":"input-kite-request-token"}),h.formState.errors.requestToken&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:h.formState.errors.requestToken.message})]})]}),s==="dhan"&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx(Un,{htmlFor:"dhan-client-id",className:"text-sm",children:"Client ID"}),n.jsx(Nr,{id:"dhan-client-id",...f.register("clientId"),placeholder:"Enter your Dhan Client ID",className:"mt-1","data-testid":"input-dhan-client-id"}),f.formState.errors.clientId&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:f.formState.errors.clientId.message})]}),n.jsxs("div",{children:[n.jsx(Un,{htmlFor:"dhan-access-token",className:"text-sm",children:"Access Token"}),n.jsx(Nr,{id:"dhan-access-token",type:"password",...f.register("accessToken"),placeholder:"Enter your Access Token",className:"mt-1","data-testid":"input-dhan-access-token"}),f.formState.errors.accessToken&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:f.formState.errors.accessToken.message})]})]}),x.isError&&n.jsx("div",{className:"bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800 rounded-md p-3",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(rv,{className:"h-4 w-4 text-red-600 dark:text-red-400 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-red-900 dark:text-red-100",children:"Import Failed"}),n.jsx("p",{className:"text-xs text-red-700 dark:text-red-300 mt-1",children:x.error instanceof Error?x.error.message:"Failed to import trades. Please check your credentials and try again."})]})]})}),n.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[n.jsx(H,{variant:"outline",onClick:b,disabled:x.isPending,"data-testid":"button-cancel-broker-import",children:"Cancel"}),n.jsx(H,{onClick:j,disabled:!s||x.isPending,"data-testid":"button-submit-broker-import",children:x.isPending?n.jsxs(n.Fragment,{children:[n.jsx(Vo,{className:"mr-2 h-4 w-4 animate-spin"}),"Importing..."]}):"Import Trades"})]})]})})]})})}function $3({onSectorChange:t,selectedSector:e,onCardIndexChange:r,currentCardIndex:s=0}){const[a,i]=g.useState(!1),[o,l]=g.useState(""),[d,h]=g.useState(!1),[f,m]=g.useState(null),[x,b]=g.useState([{id:1,title:"TECH NEWS",subtitle:`Latest in
technology`,buttonText:"Read Now",gradient:"from-blue-500 to-blue-600",buttonColor:"text-blue-600",icon:"",sector:"IT"},{id:2,title:"FINANCE NEWS",subtitle:`Market updates
& trends`,buttonText:"Listen",gradient:"from-green-500 to-green-600",buttonColor:"text-green-600",icon:"",sector:"FINANCE"},{id:3,title:"COMMODITY NEWS",subtitle:`Commodity
market trends`,buttonText:"Listen",gradient:"from-orange-500 to-orange-600",buttonColor:"text-orange-600",icon:"",sector:"COMMODITY"},{id:4,title:"GLOBAL NEWS",subtitle:`World events
& updates`,buttonText:"Listen",gradient:"from-purple-500 to-purple-600",buttonColor:"text-purple-600",icon:"",sector:"GLOBAL"},{id:5,title:"BANKING NEWS",subtitle:`Banking sector
updates`,buttonText:"Listen",gradient:"from-indigo-500 to-indigo-600",buttonColor:"text-indigo-600",icon:"",sector:"BANKS"},{id:6,title:"AUTO NEWS",subtitle:`Automotive
industry news`,buttonText:"Listen",gradient:"from-red-500 to-red-600",buttonColor:"text-red-600",icon:"",sector:"AUTOMOBILE"}]),j=$e.useRef({}),N=10*1e3,w=$e.useCallback(()=>{f&&(speechSynthesis.cancel(),m(null),i(!1))},[f]),C=async(P,A)=>{w();try{h(!0);const R=A,B=j.current[R],V=Date.now();if(B&&V-B.timestamp<N){l(B.content),T(B.content),h(!1);return}const X=await fetch(ha("/api/daily-news"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sector:A})});if(!X.ok)throw new Error("Failed to generate news content");const Y=(await X.json()).summary;j.current[R]={content:Y,timestamp:V},l(Y),T(Y)}catch(R){console.error("Error fetching news:",R);const B=`${A.toLowerCase()} market update. Current developments in progress. Trading activity continues.`;l(B),T(B)}finally{h(!1)}},T=P=>{f&&speechSynthesis.cancel();const A=P.replace(/^(good morning|good afternoon|good evening|hello|hi|welcome)/gi,"").replace(/^(ladies and gentlemen|dear listeners|in today's news)/gi,"").replace(/^[.,\s]+/,"").trim(),R=new SpeechSynthesisUtterance(A),B=speechSynthesis.getVoices(),V=B.find(ee=>ee.lang.startsWith("en")&&ee.name.toLowerCase().includes("moira")),X=B.filter(ee=>ee.lang.startsWith("en")&&!ee.name.toLowerCase().includes("moira")&&(ee.name.toLowerCase().includes("samantha")||ee.name.toLowerCase().includes("karen")||ee.name.toLowerCase().includes("susan")||ee.name.toLowerCase().includes("fiona")||ee.name.toLowerCase().includes("serena")||ee.name.toLowerCase().includes("allison")||ee.name.toLowerCase().includes("ava")||ee.name.toLowerCase().includes("claire")||ee.name.toLowerCase().includes("aria")||ee.name.toLowerCase().includes("zira")||ee.name.toLowerCase().includes("hazel")||ee.name.toLowerCase().includes("neural")||ee.name.toLowerCase().includes("premium")||ee.name.toLowerCase().includes("enhanced")));if(V)R.voice=V;else if(X.length>0)R.voice=X[0];else{const ee=B.filter(Y=>Y.lang.startsWith("en")&&!Y.name.toLowerCase().includes("novelty"));ee.length>0&&(R.voice=ee[0])}R.rate=.9,R.pitch=1.05,R.volume=.85,R.lang="en-US",R.onstart=()=>i(!0),R.onend=()=>{i(!1),m(null)},R.onerror=()=>{i(!1),m(null)},m(R),speechSynthesis.speak(R)},O=()=>{f&&(speechSynthesis.cancel(),i(!1),m(null))},I=P=>{w(),b(A=>{const R=[...A];let B=s;if(P==="right"){const V=R.shift();V&&R.push(V),B=(s+1)%7}else{const V=R.pop();V&&R.unshift(V),B=(s-1+7)%7}if(r&&r(B),R.length>0){const V=R[0];setTimeout(()=>{C(V.title,V.sector)},100)}return R})};return $e.useEffect(()=>(window.stopNewsAudio=w,()=>{delete window.stopNewsAudio}),[w]),$e.useEffect(()=>{const P=()=>{w()},A=()=>{document.hidden&&w()};return window.addEventListener("blur",P),document.addEventListener("visibilitychange",A),()=>{window.removeEventListener("blur",P),document.removeEventListener("visibilitychange",A)}},[w]),$e.useEffect(()=>{const P=()=>{speechSynthesis.getVoices()};return P(),speechSynthesis.addEventListener("voiceschanged",P),()=>{speechSynthesis.removeEventListener("voiceschanged",P),w()}},[w]),n.jsx("div",{className:"relative w-56 h-48 md:w-44 md:h-52",children:x.map((P,A)=>{const R=A===0,B=A===1,V=A===2;return n.jsx("div",{"data-card-index":A,className:`absolute inset-0 transition-all duration-300 ease-out cursor-grab active:cursor-grabbing ${R?"z-40 scale-100 rotate-0":B?"z-30 scale-95 rotate-1 translate-y-2":V?"z-20 scale-90 rotate-2 translate-y-4":"z-10 scale-85 rotate-3 translate-y-6 opacity-50"}`,onMouseDown:X=>{if(!R)return;const ee=X.clientX,Y=X.clientY,re=X.currentTarget;let le=!1;const te=ie=>{const Z=ie.clientX-ee,ne=ie.clientY-Y;if(!le&&(Math.abs(Z)>5||Math.abs(ne)>5)&&(le=!0),le){const oe=Z*.1;re.style.transform=`translate(${Z}px, ${ne}px) rotate(${oe}deg)`,re.style.opacity=String(Math.max(.3,1-Math.abs(Z)/300))}},de=ie=>{if(le){const Z=ie.clientX-ee;if(Math.abs(Z)>100){const ne=Z>0?"right":"left";if(ne==="right"){const oe="150%",U="30deg";re.style.transform=`translate(${oe}, ${Z*.5}px) rotate(${U})`,re.style.opacity="0",setTimeout(()=>{re.style.transform="",re.style.opacity="",I(ne)},300)}else re.style.transform="",re.style.opacity="",I(ne),setTimeout(()=>{var U;const oe=(U=re.parentElement)==null?void 0:U.querySelector('[data-card-index="0"]');oe&&(oe.style.transform="translate(150%, 0) rotate(30deg)",oe.style.opacity="0",setTimeout(()=>{oe.style.transform="",oe.style.opacity="",oe.style.transition="transform 300ms ease-out, opacity 300ms ease-out",setTimeout(()=>{oe.style.transition=""},300)},10))},10)}else re.style.transform="",re.style.opacity=""}document.removeEventListener("mousemove",te),document.removeEventListener("mouseup",de)};document.addEventListener("mousemove",te),document.addEventListener("mouseup",de)},onTouchStart:X=>{if(!R)return;const ee=X.touches[0].clientX,Y=X.touches[0].clientY,re=X.currentTarget;let le=!1;const te=ie=>{const Z=ie.touches[0].clientX-ee,ne=ie.touches[0].clientY-Y;if(!le&&(Math.abs(Z)>5||Math.abs(ne)>5)&&(le=!0),le){ie.preventDefault();const oe=Z*.1;re.style.transform=`translate(${Z}px, ${ne}px) rotate(${oe}deg)`,re.style.opacity=String(Math.max(.3,1-Math.abs(Z)/300))}},de=ie=>{if(le){const Z=ie.changedTouches[0].clientX-ee;if(Math.abs(Z)>100){const ne=Z>0?"right":"left";if(ne==="right"){const oe="150%",U="30deg";re.style.transform=`translate(${oe}, ${Z*.5}px) rotate(${U})`,re.style.opacity="0",setTimeout(()=>{re.style.transform="",re.style.opacity="",I(ne)},300)}else re.style.transform="",re.style.opacity="",I(ne),setTimeout(()=>{var U;const oe=(U=re.parentElement)==null?void 0:U.querySelector('[data-card-index="0"]');oe&&(oe.style.transform="translate(150%, 0) rotate(30deg)",oe.style.opacity="0",setTimeout(()=>{oe.style.transform="",oe.style.opacity="",oe.style.transition="transform 300ms ease-out, opacity 300ms ease-out",setTimeout(()=>{oe.style.transition=""},300)},10))},10)}else re.style.transform="",re.style.opacity=""}document.removeEventListener("touchmove",te),document.removeEventListener("touchend",de)};document.addEventListener("touchmove",te,{passive:!1}),document.addEventListener("touchend",de)},onClick:()=>{R&&(console.log(`Clicked on ${P.title}`),t(P.sector))},children:n.jsxs("div",{className:`bg-gradient-to-br ${P.gradient} rounded-2xl p-5 md:p-6 h-full relative overflow-hidden shadow-xl border-2 border-white/10 flex flex-col`,children:[n.jsx("div",{className:"absolute bottom-0 right-0 w-20 h-20 md:w-24 md:h-24 opacity-20",children:n.jsx("div",{className:"w-full h-full bg-gradient-to-br from-white/20 to-white/10 rounded-full"})}),n.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[n.jsx("div",{className:"text-[10px] md:text-[9px] text-white/90 mb-1 md:mb-1.5 uppercase tracking-wider font-semibold",children:P.title}),n.jsx("h3",{className:"text-lg md:text-base font-bold text-white mb-3 md:mb-3 leading-snug flex-grow",children:P.subtitle.split(`
`).map((X,ee)=>n.jsx("div",{className:"block",children:X},ee))}),n.jsx(H,{className:`bg-white ${P.buttonColor} hover:bg-gray-100 px-3 py-1.5 md:px-3 md:py-1 rounded-full text-xs md:text-[11px] font-semibold shadow-lg w-fit`,onClick:()=>{if(R){const X=localStorage.getItem("currentUserId"),ee=localStorage.getItem("currentUserEmail");if(!X||!ee){console.log(" User not authenticated, redirecting to login"),window.location.href="/login";return}a?O():C(P.title,P.sector)}},disabled:d&&R,children:n.jsxs("div",{className:"flex items-center gap-2",children:[R&&d?n.jsx(hse,{className:"w-4 h-4 animate-spin"}):R&&a?n.jsx(G2,{className:"w-4 h-4"}):n.jsx(Ui,{className:"w-4 h-4"}),n.jsx("span",{children:R&&d?"Generating...":R&&a?"Pause":P.buttonText})]})})]}),n.jsx("div",{className:"absolute top-2 right-2 md:top-1.5 md:right-1.5 text-xl md:text-lg filter drop-shadow-lg",children:P.icon}),!R&&n.jsx("div",{className:"absolute inset-0 bg-black/10 rounded-2xl"})]})},P.id)})})}const yMe=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname.includes("replit.dev")||window.location.port==="5000",vMe="",ha=t=>t.startsWith("http")?t:`${vMe}${t}`;function ib(){var Z1,$v,gx,Og,xx;const[t,e]=Jy();e5e();const{theme:r,toggleTheme:s}=OA(),[a,i]=g.useState("trading-home"),[o,l]=g.useState(!1),[d,h]=g.useState(0),[f,m]=g.useState(0),[x,b]=g.useState(!1),[j,N]=g.useState(!1),[w,C]=g.useState(null),[T,O]=g.useState("overview"),[I,P]=g.useState("1"),[A,R]=g.useState(!1),[B,V]=g.useState("home"),[X,ee]=g.useState(!1),[Y,re]=g.useState(null),[le,te]=g.useState(""),[de,ie]=g.useState(!1),[Z,ne]=g.useState(!1),[oe,U]=g.useState(!1),[W,be]=g.useState("");g.useEffect(()=>{localStorage.removeItem("tradingDataByDate"),console.log(" Cleared old localStorage tradingDataByDate - using AWS only")},[]);const[pe,ge]=g.useState(!1),[Ce,he]=g.useState(!1),{currentUser:ue}=h1();g.useEffect(()=>{const y=localStorage.getItem("currentUserId"),E=localStorage.getItem("currentUserEmail");if(y&&E&&y!=="null"&&E!=="null")console.log(" Auth initialized from localStorage:",{userId:y,userEmail:E}),ge(!0),he(!1);else{const M=setTimeout(()=>{const z=localStorage.getItem("currentUserId"),K=localStorage.getItem("currentUserEmail");!z||!K||z==="null"||K==="null"?(console.log(" No auth found - enabling view-only mode (no redirect)"),he(!0),ge(!0)):(console.log(" Auth initialized after delay:",{finalUserId:z,finalUserEmail:K}),ge(!0),he(!1))},500);return()=>clearTimeout(M)}},[]),g.useEffect(()=>{X&&ue&&lK().then(y=>{re(y)}).catch(()=>{re(!1)})},[X,ue]);const ce=async()=>{ie(!0),be("");try{await iK(),U(!0)}catch(y){be((y==null?void 0:y.message)||"Failed to send verification code")}finally{ie(!1)}},Ee=async()=>{if(!le||le.length!==6){be("Please enter a valid 6-digit code");return}ne(!0),be("");try{await oK(le),re(!0),U(!1),te("")}catch(y){(y==null?void 0:y.name)==="CodeMismatchException"?be("Invalid verification code. Please try again."):(y==null?void 0:y.name)==="ExpiredCodeException"?be("Code expired. Please request a new one."):be((y==null?void 0:y.message)||"Verification failed")}finally{ne(!1)}},[Le,Ie]=g.useState(""),[Ue,Ae]=g.useState(!1),[We,ot]=g.useState(""),[It,tr]=g.useState(!1),[Ct,we]=g.useState(!1),[Fe,Ye]=g.useState(!1),[lt,pt]=g.useState([]),[nt,wt]=g.useState(""),[Lr,Tr]=g.useState("1Y");g.useEffect(()=>{const y=()=>{const E=window.aiAssistantSelectedTimeframe||"1Y";Tr(E)};return window.addEventListener("timeframeChange",y),()=>window.removeEventListener("timeframeChange",y)},[]),g.useEffect(()=>{var z;if(!We||!Ue)return;const y=window.companyInsightsData,E=window.aiAssistantStockData;let M=(y==null?void 0:y.symbol)||"";!M&&(E!=null&&E.name)&&(M=((z=E.name.split(`
`)[0])==null?void 0:z.trim())||""),!(!M||M===nt)&&(console.log(" Fetching news for search results symbol:",M),wt(M),pt([]),(async()=>{try{const G=await(await fetch(`/api/stock-news/${encodeURIComponent(M.toUpperCase())}?refresh=${Date.now()}`)).json(),$=Array.isArray(G)?G:G.articles||G.data||[];if($&&$.length>0){const ae=u=>{try{const p=new Date(u),k=new Date().getTime()-p.getTime(),_=Math.floor(k/1e3),F=Math.floor(_/60),se=Math.floor(F/60),J=Math.floor(se/24),xe=Math.floor(J/7);return _<60?"Just now":F<60?`${F}m ago`:se<24?`${se}h ago`:J<7?`${J}d ago`:xe<4?`${xe}w ago`:"Recently"}catch{return"Recently"}},c=$.map(u=>({title:u.title,source:u.source||"Market News",time:ae(u.publishedAt||u.date||new Date().toISOString()),url:u.url||u.link||"#"}));console.log(" News fetched successfully:",c.length,"articles"),pt(c)}else console.log(" No news articles found for:",M)}catch(K){console.warn("Failed to fetch news for symbol:",M,K)}})())},[We,Ue]);const[Mr,ta]=g.useState("FINANCE"),[st,zt]=g.useState([]),[Ft,pr]=g.useState(!1),[kt,Mt]=g.useState(null),[Ke,Ne]=g.useState(0),[Oe,me]=g.useState(0),[je,ke]=g.useState(!0),Te=[{symbol:"NIFTY",price:"59273.80",change:1.24,isProfit:!0},{symbol:"BANKNIFTY",price:"52841.35",change:.87,isProfit:!0},{symbol:"SENSEX",price:"85138.27",change:-.45,isProfit:!1},{symbol:"Top Gainers",price:"TCS +2.1%",change:2.1,isProfit:!0},{symbol:"Top Losers",price:"SUNPHARMA -1.8%",change:-1.8,isProfit:!1}],[Je,Q]=g.useState(!1),[tt,it]=g.useState(""),[ft,He]=g.useState(new Set),[Vt,Zt]=g.useState(""),[vr,Dt]=g.useState(!1);g.useEffect(()=>{if(!Ce){const y=setTimeout(()=>{ke(!1)},2e3);return()=>clearTimeout(y)}},[Ce]),g.useEffect(()=>{if(!Ce&&!je){const y=setInterval(()=>{me(E=>(E+1)%Te.length)},3e3);return()=>clearInterval(y)}},[Te.length,Ce,je]),g.useEffect(()=>(window.toggleNav=()=>{R(y=>!y)},()=>{delete window.toggleNav}),[]);const Xt=["trading-home","dashboard","backtest"],qt=y=>{Xt.includes(y)&&!ft.has(y)?(Zt(y),Q(!0)):ur(y)},ar=()=>{if(tt==="1302"){const y=new Set(ft);y.add(Vt),He(y),ur(Vt),Q(!1),it(""),Zt("")}else it("")},Cr=()=>{Q(!1),it(""),Zt("")},[An,br]=g.useState(!1),{toast:yr}=Ia(),[Qn,Ws]=g.useState(!1),[oi,qn]=g.useState(null),[Jn,Fr]=g.useState(!1),[ct,yt]=g.useState(!1),[ut,Bt]=g.useState(null);g.useEffect(()=>{const E=new URLSearchParams(window.location.search).get("sharedReport");E&&(yt(!0),Ws(!0),fetch(`/api/verified-reports/${E}`).then(M=>M.json()).then(M=>{M.success&&M.report?(Bt(M.report),qn(M.report.shareUrl)):(Ws(!1),yt(!1))}).catch(M=>{console.error("Failed to load shared report:",M),Ws(!1),yt(!1)}))},[]);const Nt=()=>{Ws(!1),ct&&(window.history.replaceState({},"","/"),yt(!1),Bt(null),qn(null))},ur=y=>{const E=localStorage.getItem("currentUserId"),M=localStorage.getItem("currentUserEmail");return!E||!M||E==="null"||M==="null"?(console.log("[AUTH] Authentication required for tab:",y,"- redirecting to login"),e("/login"),!1):(console.log("[AUTH] User authenticated, setting tab:",y),i(y),!0)},Br=y=>ur(y),Xr=()=>{const y=localStorage.getItem("currentUserId"),E=localStorage.getItem("currentUserEmail");if(!y||!E||y==="null"||E==="null"){console.log("[AUTH] Authentication required for Trading Master - redirecting to login"),e("/login");return}console.log("[AUTH] User authenticated for Trading Master check - email:",E),E==="chiranjeevi.perala99@gmail.com"?i("trading-master"):br(!0)},Er=async()=>{try{Fr(!0);const y=Oh(),E=Object.keys(y).sort();let M=0,z=0,K=0,G=0;const $=[];let ae=0;E.forEach(k=>{var J,xe;const _=y[k],F=((J=_==null?void 0:_.tradingData)==null?void 0:J.performanceMetrics)||(_==null?void 0:_.performanceMetrics),se=((xe=_==null?void 0:_.tradingData)==null?void 0:xe.tradingTags)||(_==null?void 0:_.tradingTags)||[];if(F){const ye=F.netPnL||0;M+=ye,z+=F.totalTrades||0,K+=F.winningTrades||0,Array.isArray(se)&&se.some(Pe=>Pe.toLowerCase()==="fomo")&&G++,ye>0?ae++:ye<0&&ae>0&&($.push(ae),ae=0)}}),ae>0&&$.push(ae);const c=$.length>0?Math.max(...$):0,u=z>0?K/z*100:0,v=await(await fetch("/api/verified-reports",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:(ue==null?void 0:ue.userId)||"demo",username:(ue==null?void 0:ue.displayName)||(ue==null?void 0:ue.email)||"Demo User",reportData:{tradingDataByDate:y,totalPnL:M,totalTrades:z,winRate:Number(u.toFixed(2)),fomoCount:G,maxStreak:c,userId:(ue==null?void 0:ue.userId)||"demo",username:(ue==null?void 0:ue.displayName)||(ue==null?void 0:ue.email)||"Demo User",tagline:"rethink & reinvest"}})})).json();if(v.success&&v.report)qn(v.report.shareUrl),yr({title:"Shareable link created!",description:"Your trading report is ready to share. Link expires in 7 days."});else throw new Error(v.error||"Failed to create shareable link")}catch(y){console.error("[SHARE] Error creating shareable link:",y),yr({title:"Error",description:"Failed to create shareable link. Please try again.",variant:"destructive"})}finally{Fr(!1)}},Sn=async y=>{var E,M,z;try{console.log(` AI Search fetching real data for ${y}...`);const G=await(await fetch(`/api/stock-analysis/${y}`)).json();return G&&G.priceData?(console.log(` AI Search got real data for ${y}:`,G.priceData),{symbol:y,price:G.priceData.close||G.priceData.price||0,change:(G.priceData.close||0)-(G.priceData.open||0),changePercent:(E=G.sentiment)!=null&&E.score?(G.priceData.close-G.priceData.open)/G.priceData.open*100:0,volume:G.priceData.volume||"N/A",marketCap:((M=G.valuation)==null?void 0:M.marketCap)||"N/A",pe:((z=G.valuation)==null?void 0:z.peRatio)||0,high:G.priceData.high||0,low:G.priceData.low||0,open:G.priceData.open||0,sentiment:G.sentiment||null,indicators:G.indicators||null}):null}catch(K){return console.error(` AI Search failed to fetch data for ${y}:`,K),null}},kr=async y=>{var K,G,$,ae,c,u,p,v,k,_,F,se,J,xe;let E=y||Le;if(!E.trim())return;E.includes("-")&&E.toUpperCase()===E&&(E=E.split("-")[0].toLowerCase(),console.log(` [SYMBOL-DETECTED] Converted ${y} to human language: ${E}`));const M=localStorage.getItem("currentUserId"),z=localStorage.getItem("currentUserEmail");if(!M||!z||M==="null"||z==="null"){console.log("[AUTH] Authentication required for search - redirecting to login"),e("/login");return}if(!It){tr(!0);try{const ye=E.toLowerCase(),De=["reliance","tcs","infy","infosys","hdfcbank","icicibank","bhartiartl","itc","nifty","banknifty","sbin","adaniports","asianpaint","bajfinance","wipro","techm"].find(Ve=>ye.includes(Ve));console.log(" [TRADING-AGENT] Triggering AI Trading Agent (Tool Calling Enabled)...");try{const Ve=await fetch(ha("/api/trading-agent"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:E,context:{userId:(ue==null?void 0:ue.userId)||localStorage.getItem("currentUserId")}})});if(Ve.ok){const Xe=await Ve.json();if(Xe.success&&Xe.message){let Me=Xe.message;if(Xe.charts&&Xe.charts.length>0&&(window.tradingAgentCharts=Xe.charts,console.log(" [TRADING-AGENT] Received chart data:",Xe.charts.length,"charts")),Xe.stocks&&Xe.stocks.length>0&&(window.tradingAgentStocks=Xe.stocks,console.log(" [TRADING-AGENT] Received stock insights:",Xe.stocks.length,"stocks")),Xe.companyInsights){window.companyInsightsData=Xe.companyInsights,console.log(" [TRADING-AGENT] Received company insights:",Xe.companyInsights.symbol,Xe.companyInsights.trend),window.aiAssistantStockData={name:Xe.companyInsights.name||Xe.companyInsights.symbol,price:Xe.companyInsights.price||0,change:(Xe.companyInsights.price||0)-(Xe.companyInsights.open||0),changePercent:(Xe.companyInsights.price-(Xe.companyInsights.open||Xe.companyInsights.price))/(Xe.companyInsights.open||Xe.companyInsights.price||1)*100,symbol:Xe.companyInsights.symbol},window.aiAssistantSelectedTimeframe="1Y";try{const ze=Xe.companyInsights.symbol||"";if(ze){const Ze=await fetch(ha(`/api/stock-chart-data/${ze}?timeframe=1Y`));if(Ze.ok){const vt=await Ze.json();vt&&vt.length>0&&(window.aiAssistantPriceChartData=vt,Me=`[CHART:PRICE_CHART]
`+Me,console.log(" [TRADING-AGENT] Fetched price chart data:",vt.length,"candles"))}}}catch(ze){console.warn(" Could not fetch price chart data:",ze)}}else window.companyInsightsData=null;if(Xe.sources&&Xe.sources.length>0&&(Me+=`

---
**Sources:** ${Xe.sources.join(" | ")}`),ot(Me),E.toLowerCase().includes("news")||E.toLowerCase().includes("market")||E.toLowerCase().includes("update")||E.toLowerCase().includes("financial"))try{const ze=["IT","FINANCE","COMMODITY","GLOBAL","BANKS","AUTOMOBILE"].map(jt=>fetch("/api/daily-news",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sector:jt})}).then(Gt=>Gt.json()).then(Gt=>({...Gt,url:"#",source:jt,time:new Date().toLocaleTimeString()})).catch(Gt=>null)),vt=(await Promise.all(ze)).filter(jt=>jt!==null);vt.length>0&&pt(vt)}catch(ze){console.warn("Error fetching news:",ze)}console.log(" [TRADING-AGENT] Query processing complete!"),tr(!1);return}}console.log(" [TRADING-AGENT] Falling back to advanced query...");let Be=[];try{const Xe=await fetch(ha("/api/journal/all-dates"));if(Xe.ok){const Me=await Xe.json();Object.entries(Me).forEach(([_e,ze])=>{ze.tradeHistory&&Array.isArray(ze.tradeHistory)&&Be.push(...ze.tradeHistory.map(Ze=>({...Ze,date:_e})))})}}catch(Xe){console.warn(" Could not load journal data:",Xe)}const et=await fetch(ha("/api/advanced-query"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:E,journalTrades:Be})});if(et.ok){const Xe=await et.json();Xe.companyInsights&&(window.companyInsightsData=Xe.companyInsights),ot(Xe.answer),tr(!1);return}}catch(Ve){console.error(" [TRADING-AGENT] Error:",Ve)}if(ye.includes("rsi")||ye.includes("ema")||ye.includes("macd")||ye.includes("bollinger")||ye.includes("moving average")||ye.includes("technical")){const Ve=(De||"RELIANCE").toUpperCase(),Be=await Sn(Ve);if(Be){const et=`##  Technical Analysis: ${Ve}

** Technical Indicators (Live Data):**
 **RSI (14):** ${((K=Be.indicators)==null?void 0:K.rsi)||"Calculating..."} ${parseFloat(((G=Be.indicators)==null?void 0:G.rsi)||"50")>70?" Overbought":parseFloat((($=Be.indicators)==null?void 0:$.rsi)||"50")<30?" Oversold":" Neutral"}
 **EMA 50:** ${((ae=Be.indicators)==null?void 0:ae.ema50)||"Loading..."}
 **MACD:** ${((c=Be.indicators)==null?void 0:c.macd)||"Processing..."}
 **Volume:** ${Be.volume} ${parseInt(String(Be.volume))>1e6?"(High Volume)":"(Normal Volume)"}

** Price Action:**
 **Current:** ${Be.price.toLocaleString()} (${Be.changePercent.toFixed(2)}%)
 **Support:** ${(Be.price*.98).toFixed(0)} | **Resistance:** ${(Be.price*1.02).toFixed(0)}
 **Trend:** ${Be.changePercent>0?"Bullish momentum":"Bearish pressure"}

** Trading Signals:**
${parseFloat(((u=Be.indicators)==null?void 0:u.rsi)||"50")>70?" RSI suggests overbought condition - Consider profit booking":parseFloat(((p=Be.indicators)==null?void 0:p.rsi)||"50")<30?" RSI shows oversold levels - Potential buying opportunity":" RSI in neutral zone - Wait for clear signals"}

** Technical Strategy:**
Use Trading Master for detailed chart analysis with all 14 timeframes and advanced indicators.`;ot(et)}else ot(` **Technical Analysis Hub**

Access advanced technical indicators through:
 **Trading Master:** Full charting suite with RSI, MACD, Bollinger Bands
 **Live Options:** Greeks and technical levels
 **Community Analysis:** Social Feed technical discussions

 Switch to Trading Master for comprehensive technical analysis.`)}else if(ye.includes("social")||ye.includes("community")||ye.includes("discussion")||ye.includes("trending")||ye.includes("sentiment"))try{const Ve=new AbortController,Be=setTimeout(()=>Ve.abort(),2e3),et=await fetch(ha("/api/social-posts?limit=5"),{signal:Ve.signal});if(clearTimeout(Be),et.ok){const Xe=await et.json();let Me=Xe;De&&(Me=Xe.filter(Ze=>Ze.content&&Ze.content.toLowerCase().includes(De)));const _e=Array.from(new Set(Xe.flatMap(Ze=>{var vt;return(((vt=Ze.content)==null?void 0:vt.match(/\b[A-Z]{3,}\b/g))||[]).slice(0,3)}))).slice(0,8),ze=`##  Social Feed Intelligence ${De?`- ${De.toUpperCase()}`:""}

** Trending Discussions:**
${_e.map(Ze=>` ${Ze}`).join(`
`)||" General market discussions"}

** Community Insights (${Me.length} posts):**
${Me.slice(0,5).map((Ze,vt)=>`${vt+1}. **${Ze.authorUsername||"Trader"}:** ${(Ze.content||"").substring(0,120)}...`).join(`

`)}

** Sentiment Analysis:**
${Me.length>0?`Community is actively discussing ${De?De.toUpperCase()+" with":"market with"} ${Me.some(Ze=>{var vt,jt;return((vt=Ze.content)==null?void 0:vt.toLowerCase().includes("bullish"))||((jt=Ze.content)==null?void 0:jt.toLowerCase().includes("buy"))})?"bullish sentiment":Me.some(Ze=>{var vt,jt;return((vt=Ze.content)==null?void 0:vt.toLowerCase().includes("bearish"))||((jt=Ze.content)==null?void 0:jt.toLowerCase().includes("sell"))})?"bearish sentiment":"mixed sentiment"}`:"Limited recent discussions on this topic"}

** Platform Integration:**
 **Full Feed:** Access complete Social Feed for detailed discussions  
 **Real-time Updates:** Live community posts and market reactions
 **Expert Analysis:** Professional trader insights and strategies

 **Quick Access:** Switch to Social Feed tab for complete community analysis.`;ot(ze)}else ot(` **Social Feed Center**

Access community insights:
 **Live Discussions:** Real-time market conversations
 **Expert Analysis:** Professional trader perspectives
 **Trending Topics:** What the community is discussing

 Switch to Social Feed tab for full community analysis.`)}catch{ot(` **Social Feed Access**

Connect with the trading community through our Social Feed tab for:
 Live market discussions
 Community sentiment analysis
 Expert trading insights

 Navigate to Social Feed for real-time community intelligence.`)}else if(ye.includes("journal")||ye.includes("trades")||ye.includes("history")||ye.includes("performance")||ye.includes("pnl"))ot(`##  Trading Journal & Performance Hub

** Performance Analytics Available:**
 **Daily P&L Tracking:** Comprehensive trade-by-trade analysis
 **Strategy Performance:** Success rates and optimization insights  
 **Risk Management:** Drawdown analysis and position sizing
 **Pattern Recognition:** Identify winning and losing patterns

** Journal Features:**
 **Trade Documentation:** Screenshots, notes, and market context
 **Tag System:** Categorize trades by strategy, emotion, setup
 **Performance Metrics:** Win rate, average profit/loss, Sharpe ratio
 **Calendar View:** Visual P&L heatmap and trading frequency

** Quick Journal Actions:**
 **Today's Trades:** Check current session performance
 **Weekly Review:** Analyze recent trading patterns  
 **Monthly Summary:** Comprehensive performance overview
 **Strategy Analysis:** Deep dive into specific trading approaches

** Performance Insights:**
 **Best Performing Days:** Identify optimal trading conditions
 **Loss Analysis:** Understand and fix problematic patterns
 **Time Analysis:** Find your most profitable trading hours
 **Risk Metrics:** Monitor and optimize risk-adjusted returns

** Platform Integration:**
Use Journal tab for detailed performance tracking and trade analysis.`);else if(ye.includes("add")||ye.includes("watchlist")||ye.includes("alert")||ye.includes("notification")){const Ve=`##  Quick Actions Hub

** Watchlist Management:**
${De?` **Add ${De.toUpperCase()}:** Monitor price movements and alerts
 **Set Price Alert:** Get notified at target levels
 **Technical Alert:** RSI/MACD signal notifications
 **News Alert:** Breaking news for ${De.toUpperCase()}`:` **Add Stocks:** Build your monitoring portfolio
 **Create Lists:** Sector-wise or strategy-based groupings
 **Bulk Actions:** Import/export watchlist data
 **Smart Alerts:** AI-powered signal notifications`}

** Alert System:**
 **Price Targets:** Get notified at support/resistance levels
 **Technical Signals:** RSI overbought/oversold alerts
 **News Alerts:** Breaking developments on watched stocks
 **Volume Alerts:** Unusual trading activity notifications

** Quick Setup Actions:**
 **Portfolio Sync:** Connect with Trading Master for live tracking
 **Risk Alerts:** Position size and stop-loss monitoring  
 **Calendar Alerts:** Earnings, dividends, and event reminders
 **Community Alerts:** Social Feed mentions and discussions

** Automation Features:**
 **Smart Scanning:** Auto-detect trading opportunities
 **Pattern Alerts:** Chart pattern recognition notifications
 **Sector Rotation:** Industry momentum change alerts
 **Market Regime:** Bull/bear market transition signals

** Platform Integration:**
Configure alerts through Trading Master and monitor via Social Feed updates.`;ot(Ve)}else if(ye.includes("price")||ye.includes("stock")||ye.includes("nifty")||ye.includes("sensex")||ye.includes("live")){const Ve=(De||"RELIANCE").toUpperCase();ot(` **Loading ${Ve} Data...**

 Fetching live market data...`);let Be=null;try{Be=await Promise.race([Sn(Ve),new Promise((et,Xe)=>setTimeout(()=>Xe(new Error("Timeout")),4e3))])}catch{console.log("Stock data timeout, using fallback")}if(Be){let et="";try{const jt=await fetch(ha("/api/social-posts?limit=5"));if(jt.ok){const xr=(await jt.json()).filter(as=>as.content&&(as.content.toLowerCase().includes(Ve.toLowerCase())||as.content.toLowerCase().includes("market")||as.content.toLowerCase().includes("analysis")));xr.length>0&&(et=`
** Community Analysis:**
${xr.slice(0,2).map((as,Nn)=>`${Nn+1}. ${as.content.substring(0,150)}...`).join(`
`)}
`)}}catch{console.log("Social data not available")}const Xe=Be.changePercent>0?"bullish":"bearish",Me=Xe==="bullish"?"":"",_e=((v=Be.sentiment)==null?void 0:v.trend)==="Bullish"?"":((k=Be.sentiment)==null?void 0:k.trend)==="Bearish"?"":"",ze=((_=Be.sentiment)==null?void 0:_.trend)||"Neutral",Ze=((F=Be.sentiment)==null?void 0:F.confidence)||"Medium",vt=`## ${Ve} Stock Analysis ${Me}

** Live Market Data (Fyers API):**
 **Current Price:** ${Be.price.toLocaleString()} (${Be.changePercent.toFixed(2)}%)
 **Open:** ${Be.open.toLocaleString()} | **High:** ${Be.high.toLocaleString()}
 **Low:** ${Be.low.toLocaleString()} | **Volume:** ${Be.volume}
 **Market Cap:** ${Be.marketCap}
 **P/E Ratio:** ${Be.pe||"N/A"}

** Market Sentiment:** ${_e} ${ze} (${Ze} confidence)

** Technical Indicators:**
 **RSI:** ${((se=Be.indicators)==null?void 0:se.rsi)||"Calculating..."}
 **EMA 50:** ${((J=Be.indicators)==null?void 0:J.ema50)||"Loading..."}
 **Trend:** ${Xe==="bullish"?"Upward momentum":"Consolidation phase"}
 **Support:** ${(Be.price*.98).toFixed(0)} | **Resistance:** ${(Be.price*1.02).toFixed(0)}
${et}
** AI Trading Insight:**
${Xe==="bullish"?`Strong buying momentum with ${Be.volume} volume. Consider position entry with stop-loss below ${(Be.price*.95).toFixed(0)}.`:`Cautious sentiment prevailing. Wait for confirmation above ${(Be.price*1.02).toFixed(0)} for bullish reversal.`}

** Risk Level:** ${Be.changePercent>5?"High":Be.changePercent>2?"Medium":"Low"} Volatility | ${Ze} Confidence

 **Platform Features:** Use Trading Master for advanced charts and options analysis.`;ot(vt)}else ot(` **${Ve} Stock Analysis**

 **Data Status:** Real-time data temporarily unavailable

** Alternative Data Sources:**
 **Trading Master:** Live charts, options chain, technical indicators
 **Social Feed:** Community analysis and discussions
 **Market Dashboard:** Real-time quotes and market sentiment

** Platform Features Available:**
 **Live Options Chain:** Greeks calculation and analysis
 **Technical Charts:** 14 timeframes with indicators
 **Community Insights:** Social trading feed
 **Risk Management:** Journal and performance tracking

 **Quick Access:** Switch to Trading Master tab for live ${Ve} data and analysis.`)}else if(ye.includes("news")||ye.includes("market")||ye.includes("update"))try{const Ve=De?De.toUpperCase():"Indian stock market finance news",et=await(await fetch(`/api/stock-news?query=${encodeURIComponent(Ve)}`)).json();if(et.success&&et.articles&&et.articles.length>0){const Xe=et.articles.slice(0,6),_e=(vt=>{const jt=["growth","profit","gain","rise","bullish","strong","beat","up","higher","surge"],Gt=["loss","decline","fall","bearish","weak","miss","concern","down","lower","crash"];let xr=0,as=0;return vt.forEach(Nn=>{const Su=(Nn.title+" "+(Nn.description||"")).toLowerCase();jt.forEach(Lv=>{Su.includes(Lv)&&xr++}),Gt.forEach(Lv=>{Su.includes(Lv)&&as++})}),xr>as?{sentiment:"Bullish",score:xr-as}:as>xr?{sentiment:"Bearish",score:as-xr}:{sentiment:"Neutral",score:0}})(Xe),Ze=`##  Latest ${De?De.toUpperCase():"Market"} News & Analysis

** News Sentiment Analysis:**
 **Overall Tone:** ${_e.sentiment} ${_e.sentiment==="Bullish"?"":_e.sentiment==="Bearish"?"":""}
 **Confidence Score:** ${Math.abs(_e.score)} signals detected
 **Market Impact:** ${_e.sentiment==="Bullish"?"Positive momentum expected":_e.sentiment==="Bearish"?"Caution advised":"Mixed signals, focus on fundamentals"}

** Trading Implications:**
${_e.sentiment==="Bullish"?` Positive news flow may support price appreciation
 Consider gradual position building on dips
 Monitor for continuation patterns`:_e.sentiment==="Bearish"?` Negative sentiment may create selling pressure
 Wait for news clarity before fresh positions
 Look for oversold bounce opportunities`:` Mixed news requires balanced approach
 Focus on technical levels over news sentiment
 Maintain risk management discipline`}

** Recent Headlines (${Xe.length} articles):**
${Xe.map((vt,jt)=>`${jt+1}. **${vt.title}**
   ${vt.description||"Breaking market development"}
   _Source: ${vt.source||"Market News"}_`).join(`

`)}

** Platform Integration:**
 **Social Feed:** Community discussions about these developments
 **Trading Master:** Technical analysis with news correlation
 **Journal:** Track news-driven trading decisions

 **Next Steps:** Use Social Feed for community insights on these news developments.`;ot(Ze)}else ot(` **Market News Dashboard**

** News Sources Available:**
 **Social Feed:** Real-time community discussions and market insights
 **Trading Platform:** Live market updates and analysis
 **Community Posts:** User-generated market commentary

** Platform Features:**
 **Breaking News:** Check Social Feed for latest developments
 **Market Analysis:** Community-driven insights and discussions
 **Technical Updates:** Trading Master for chart-based news correlation

** Alternative Sources:**
 Switch to Social Feed tab for community market discussions
 Check Trading Master for technical news impact analysis
 Monitor Journal for news-driven trading patterns

 **Quick Access:** Social Feed contains the most up-to-date market discussions.`)}catch(Ve){console.error("News fetch error:",Ve),ot(` **News Center**

Access the latest market news through our platform features:

 **Social Feed:** Community market discussions
 **Trading Master:** Technical analysis and market updates
 **Platform Dashboard:** Real-time market information

 Use Social Feed for the most current market insights.`)}else if(ye.includes("ipo")||ye.includes("listing")||ye.includes("upcoming"))ot(` **IPO Market Intelligence**

**Current IPO Landscape:**
The IPO market is experiencing selective activity with quality companies commanding premium valuations. Key focus areas:

 **Technology Sector:** Fintech and SaaS companies leading the pipeline with strong digital transformation themes
 **Green Energy:** Renewable energy firms gaining significant investor attention amid sustainability focus
 **Healthcare:** Specialty pharma and medical device companies benefiting from health sector growth
 **Financial Services:** NBFCs and insurance companies exploring listings amid credit growth cycle

**Investment Framework for IPO Analysis:**

**1. Fundamental Due Diligence:**
 Business model sustainability and competitive moats
 Revenue growth consistency and profit margins
 Management track record and corporate governance
 Industry positioning and market opportunity size

**2. Valuation Assessment:**
 Compare with listed peers in same sector
 Evaluate growth prospects vs. premium pricing
 Assess price band reasonableness
 Consider post-listing price performance patterns

**3. Risk Evaluation:**
 Market timing and overall sentiment
 Lock-in period implications for promoters
 Regulatory environment and compliance history
 Competition intensity and market share sustainability

**Professional IPO Strategy:**
 **Research Phase:** Thorough analysis of DRHP and company financials
 **Application Strategy:** Multiple family member applications for better allocation
 **Post-Listing:** Monitor for 3-6 months before major position changes
 **Portfolio Integration:** Limit IPO exposure to 5-10% of total portfolio

**Current Market Dynamics:**
 Quality companies with clear business models preferred
 Premium valuations acceptable for proven growth stories
 Retail participation remains strong but selective
 Institutional investors focusing on long-term value creation

 **Platform Integration:** Use our Social Feed for community IPO discussions and Trading Master for technical analysis of newly listed stocks.`);else if(ye.includes("fundamental")||ye.includes("analysis")||ye.includes("financials"))try{const Ve=De?De.toUpperCase():"MARKET",[Be,et]=await Promise.all([De?Sn(Ve):Promise.resolve(null),fetch("/api/social-posts?limit=10")]);let Xe="";if(et.ok){const _e=(await et.json()).filter(ze=>ze.content&&(ze.content.toLowerCase().includes("pe ratio")||ze.content.toLowerCase().includes("p/e")||ze.content.toLowerCase().includes("valuation")||ze.content.toLowerCase().includes("earnings")||ze.content.toLowerCase().includes("fundamental")||ze.content.toLowerCase().includes("financial")||ze.content.toLowerCase().includes("balance sheet")||ze.content.toLowerCase().includes("revenue")||ze.content.toLowerCase().includes("profit margin")||De&&ze.content.toLowerCase().includes(De.toLowerCase())));_e.length>0&&(Xe=`** Community Fundamental Analysis:**
${_e.slice(0,3).map((ze,Ze)=>`${Ze+1}. ${ze.content.substring(0,200)}...`).join(`

`)}

`)}if(Be&&De){const Me=`## ${Ve} Fundamental Analysis 

** Key Financial Metrics (Live Data):**
 **Current Price:** ${Be.price.toLocaleString()}
 **Market Capitalization:** ${Be.marketCap}
 **P/E Ratio:** ${Be.pe||"N/A"} ${Be.pe?Be.pe<15?"(Attractive)":Be.pe<25?"(Fair)":"(Premium)":""}
 **Daily Volume:** ${Be.volume}
 **Price Change:** ${Be.changePercent.toFixed(2)}% (${Be.changePercent>0?"Positive momentum":"Under pressure"})

** Valuation Assessment:**
${Be.pe>0?` P/E of ${Be.pe} suggests ${Be.pe<15?"**undervalued** opportunity":Be.pe<25?"**fairly valued** with reasonable premium":"**premium valuation** requiring strong growth"}
 Sector comparison needed for complete picture`:` P/E data unavailable - focus on revenue and earnings trends
 Check recent quarterly results for growth trajectory`}

** Investment Framework:**
 **Growth Quality:** Consistent revenue and earnings expansion
 **Financial Health:** Strong balance sheet with manageable debt levels
 **Market Position:** Competitive advantages and market share trends
 **Management:** Track record of value creation and strategic vision

** Risk Analysis:**
 **Volatility Level:** ${Be.changePercent>5?"High":Be.changePercent>2?"Medium":"Low"} (based on recent price movement)
 **Sentiment Risk:** ${((xe=Be.sentiment)==null?void 0:xe.confidence)||"Medium"} confidence level
 **Liquidity:** ${Be.volume!=="N/A"?"Good trading volumes":"Limited liquidity"}

${Xe}** Platform Resources:**
 **Trading Master:** Complete financial ratios and technical analysis
 **Social Feed:** Community fundamental discussions and insights
 **Market Dashboard:** Real-time valuation metrics

 **Next Steps:** Check Social Feed for community fundamental analysis discussions.`;ot(Me)}else{const Me=` **Fundamental Analysis Center**

** Platform Data Sources:**
 **Social Feed:** Community fundamental analysis and insights
 **Trading Master:** Complete financial ratios and valuation metrics
 **Market Data:** Real-time price and volume information

${Xe}** Essential Analysis Framework:**

**1. Profitability Ratios:**
 **ROE (Return on Equity):** >15% indicates efficient capital use
 **ROA (Return on Assets):** >10% shows strong asset management
 **Net Margin:** >10% suggests healthy profitability
 **EBITDA Margin:** Industry-specific operational efficiency

**2. Valuation Metrics:**
 **P/E Ratio:** Compare with sector average and growth rate
 **P/B Ratio:** <3 generally attractive for most sectors
 **EV/EBITDA:** Comprehensive valuation including debt structure
 **PEG Ratio:** <1 indicates growth at reasonable price

**3. Financial Strength:**
 **Debt-to-Equity:** <0.5 preferred for financial stability
 **Current Ratio:** >1.5 shows good short-term liquidity
 **Interest Coverage:** >5x indicates comfortable debt servicing
 **Free Cash Flow:** Positive and growing cash generation

** Sector-Wise Opportunities:**

**Banking (P/E: 12-15x)**
 Post-cycle recovery phase with improving asset quality
 Focus: Private banks with strong digital transformation

**Technology (P/E: 20-25x)**
 Premium justified by consistent growth and global exposure
 Focus: Export-oriented companies with recurring revenue models

**FMCG (P/E: 35-45x)**
 Quality premium for stable cash flows and market leadership
 Focus: Rural recovery themes and premiumization trends

** Red Flags to Avoid:**
 Declining revenue for 3+ consecutive quarters
 Rising debt without corresponding asset growth
 Frequent management changes or governance issues
 Sector headwinds without clear resolution path

** Platform Integration:**
 **Social Feed:** Real-time community fundamental discussions
 **Trading Master:** Detailed financial ratio analysis
 **Journal:** Track fundamental-based investment decisions

 **Quick Access:** Social Feed contains active fundamental analysis discussions.`;ot(Me)}}catch(Ve){console.error("Fundamental analysis error:",Ve),ot(` **Fundamental Analysis Hub**

** Available Resources:**
 **Social Feed:** Community fundamental discussions
 **Trading Master:** Financial ratios and analysis tools
 **Platform Data:** Real-time market and company information

 Check Social Feed for active fundamental analysis discussions.`)}else{console.log(` Using Advanced AI Agent for query: ${E}`);try{const Be=await(await fetch(ha("/api/advanced-search"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:E,includeWebSearch:!0})})).json();if(Be.success&&Be.answer){let et=`##  AI Assistant

${Be.answer}`;Be.sources&&Be.sources.length>0&&(et+=`

** Sources:**
${Be.sources.map(Xe=>` ${Xe}`).join(`
`)}`),ot(et)}else throw new Error("AI search failed")}catch(Ve){console.error("Advanced AI search error:",Ve),ot(` **AI Trading Assistant Ready!**

I can help you with comprehensive trading and investment analysis:

 **Live Stock Prices & Analysis:**
 Real-time market data and technical indicators
 Sector performance and trend analysis
 Support/resistance levels and price targets

 **Market News & Updates:**
 Latest financial news and market movements
 Economic indicators and policy impacts
 Corporate earnings and sector trends

 **IPO Analysis & Information:**
 Upcoming IPO calendar and subscription details
 Post-listing performance tracking
 Investment recommendations and risk assessment

 **Fundamental Analysis:**
 Company financials and valuation metrics
 Sector comparisons and growth prospects
 Risk analysis and investment recommendations

 **Try asking:** "Get NIFTY price", "Latest market news", "IPO updates", or "Analyze fundamentals"`)}}}catch(ye){console.error("AI Search error:",ye),ot(` I'm here to help with all your trading and finance questions! I can assist with:

 Stock analysis and live quotes
 Market news and IPO updates
 Trading strategies and risk management
 Platform features (Trading Master, Journal, Social Feed)
 Options trading and Greeks calculation

What would you like to know more about?`)}finally{tr(!1)}}},mn=y=>{Ie(y),Ae(!0),kr(y)},Yr=async()=>{tr(!0),Ae(!0),Ie("Trading Journal Performance Analysis");try{const y=await fetch(ha("/api/journal/all-dates")),M=y.ok?await y.json():{};if(Object.keys(M).length===0){ot(`##  Trading Journal Analysis

 **No journal data found**

Please add some trading entries in the Journal tab to see your performance analysis.`),tr(!1);return}let z=0,K=0,G=0,$=0,ae=0,c=0,u=0,p={},v=[];Object.entries(M).forEach(([Xe,Me])=>{if(Me&&typeof Me=="object"){const _e=Me.tradeHistory||Me.trades||[],ze=Me.tradingNotes||Me.notes||"",Ze=Me.tradingTags||Me.selectedTags||[];let vt=0;_e.forEach(jt=>{z++;let Gt=0;if(jt.pnl&&typeof jt.pnl=="string"){const xr=jt.pnl.replace(/[,+\s]/g,"");Gt=parseFloat(xr)||0}else typeof jt.pnl=="number"&&(Gt=jt.pnl);vt+=Gt,Gt>0?(K++,$+=Gt):Gt<0&&(G++,ae+=Math.abs(Gt))}),Ze.forEach(jt=>{p[jt]=(p[jt]||0)+1,jt.toLowerCase().includes("fomo")&&u++}),vt!==0&&v.push({date:Xe,pnl:vt}),c+=vt}});const k=z>0?Math.round(K/z*100):0,_=K>0?Math.round($/K):0,F=G>0?Math.round(ae/G):0,se=Object.entries(p).sort(([,Xe],[,Me])=>Me-Xe).slice(0,3).map(([Xe,Me])=>`${Xe} (${Me}x)`).join(", "),J=v.slice(-10),xe=J.map(Xe=>Xe.pnl).join(","),ye=Math.max(...J.map(Xe=>Xe.pnl)),Pe=Math.min(...J.map(Xe=>Xe.pnl)),De=ye-Pe;let Ve="";De>0&&J.forEach(Xe=>{const Me=Math.round((Xe.pnl-Pe)/De*10);Ve+=Me>=5?"":Me>=3?"":""});const Be=J.map((Xe,Me)=>({day:`Day ${Me+1}`,value:Xe.pnl,date:Xe.date})),et=`##  Trading Journal AI Performance Report

###  **Overall Performance Metrics**
** Total Trades:** ${z}
** Winning Trades:** ${K} (${k}% Win Rate)
** Losing Trades:** ${G}
** Net P&L:** ${c.toLocaleString("en-IN")} ${c>=0?"":""}

###  **Detailed Analytics**
** Total Profit:** ${$.toLocaleString("en-IN")}
** Total Loss:** ${ae.toLocaleString("en-IN")}
** Average Win:** ${_.toLocaleString("en-IN")}
** Average Loss:** ${F.toLocaleString("en-IN")}

###  **Psychology Analysis**
** FOMO Trades:** ${u} trades
** Top Patterns:** ${se||"No patterns identified"}

###  **Performance Trend (Recent)**
[CHART:PERFORMANCE_TREND]
*${J.length} trading sessions tracked*

###  **AI Insights & Recommendations**
${k>=60?" **Strong Performance:** Your win rate shows good trading discipline!":k>=40?" **Moderate Performance:** Focus on improving entry/exit timing.":" **Needs Improvement:** Consider reviewing your trading strategy and risk management."}

${u>z*.2?" **FOMO Alert:** High emotional trading detected. Consider implementing cooling-off periods.":" **Good Discipline:** Low FOMO trading indicates strong emotional control."}

** Next Steps:**
 Review losing trades for common patterns
 Maintain detailed trade notes for better analysis
 ${c<0?"Focus on risk management and position sizing":"Continue current strategy with slight optimizations"}

---
* Use Journal tab for detailed trade entries and analysis*`;window.performanceTrendChartData=Be,ot(et)}catch(y){console.error("Error generating journal report:",y),ot(`##  Trading Journal Analysis

 **Error loading journal data**

Please try again or check your internet connection.`)}finally{tr(!1)}},li=async y=>{pr(!0);try{const E=await fetch(ha("/api/trending-podcasts"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sector:y})});if(E.ok){const M=await E.json();zt(M.podcasts||[])}else throw new Error("Failed to fetch trending podcasts")}catch(E){console.error("Error fetching trending podcasts:",E),zt([])}finally{pr(!1)}},Ca=y=>{ta(y),li(y),Mt(null)},Y0=()=>{const y=new Date().getHours();return y>=5&&y<12?"Hey, Good Morning! ":y>=12&&y<17?"Hey, Good Afternoon! ":y>=17&&y<21?"Hey, Good Evening! ":"Hey, Good Night! "},K0=y=>{Mt(y)};$e.useEffect(()=>{li("FINANCE")},[]);const[gf,xf]=g.useState({symbol:"NSE:INFY-EQ",timeframe:"1",fromDate:ho(new Date,"yyyy-MM-dd"),toDate:ho(new Date,"yyyy-MM-dd")}),Nl=y=>"",[jl,Kc]=g.useState(!1),[_1,Im]=g.useState(!1),[Ds,Ju]=g.useState(null),[Wo,Yo]=g.useState(!1),[Mm,Zu]=g.useState(null),[Qt,Gc]=g.useState(()=>{if(typeof window<"u"){const y=localStorage.getItem("zerodha_broker_funds");return y?parseFloat(y):null}return null}),[is,Sl]=g.useState(null),[eh,yf]=g.useState(!1),[lg,Ys]=g.useState(!0),[Om,ps]=g.useState(!1),[Xc,Ma]=g.useState([]),[Rm,Pr]=g.useState(null),[gs,vf]=g.useState(""),[Qc,Oa]=g.useState(""),[ln,th]=g.useState(!1),[os,rh]=g.useState(null),[Jc,Wd]=g.useState(null),[Zc,ed]=g.useState(null);g.useEffect(()=>{os&&fetch("/api/upstox/profile").then(y=>y.json()).then(y=>{if(y.success){const E=y.userId&&y.userId!=="undefined"?y.userId:null,M=y.userName&&y.userName!=="undefined"?y.userName:null;E&&(Wd(E),localStorage.setItem("upstox_user_id",E)),M&&(ed(M),localStorage.setItem("upstox_user_name",M))}}).catch(y=>console.error("Failed to fetch Upstox profile:",y))},[os]);const[sn,kl]=g.useState(null),[ci,nh]=g.useState(!1),[Ra,di]=g.useState(null),[Ko,_n]=g.useState(!1);g.useEffect(()=>{console.log(" [ZERODHA] Checking localStorage on mount...");const y=localStorage.getItem("zerodha_token");if(console.log(" [ZERODHA] Saved token:",y?"FOUND ":"NOT FOUND "),y){Ju(y),Yo(!0),console.log(" [ZERODHA] Connection restored from localStorage");const M=localStorage.getItem("zerodha_client_id");M&&(Zu(M),console.log(" [ZERODHA] Client ID restored from localStorage"))}else console.log(" [ZERODHA] No saved token in localStorage");const E=localStorage.getItem("zerodha_user_name");E&&E!=="undefined"&&(Sl(E),console.log(" [ZERODHA] User Name restored from localStorage"))},[]),g.useEffect(()=>{console.log(" [UPSTOX] Checking localStorage on mount...");const y=localStorage.getItem("upstox_token");if(console.log(" [UPSTOX] Saved token:",y?"FOUND ":"NOT FOUND "),y){rh(y),th(!0),console.log(" [UPSTOX] Connection restored from localStorage");const E=localStorage.getItem("upstox_user_id"),M=localStorage.getItem("upstox_user_name");E&&(Wd(E),console.log(" [UPSTOX] User ID restored from localStorage")),M&&M!=="undefined"&&(ed(M),console.log(" [UPSTOX] User Name restored from localStorage"))}else console.log(" [UPSTOX] No saved token in localStorage")},[]),g.useEffect(()=>{console.log(" [ANGEL ONE] Checking localStorage on mount...");const y=localStorage.getItem("angel_one_token");console.log(" [ANGEL ONE] Saved token:",y?"FOUND ":"NOT FOUND "),y?(kl(y),nh(!0),console.log(" [ANGEL ONE] Connection restored from localStorage")):console.log(" [ANGEL ONE] No saved token in localStorage")},[]),g.useEffect(()=>{console.log(" [DHAN] Checking localStorage on mount...");const y=localStorage.getItem("dhan_token");console.log(" [DHAN] Saved token:",y?"FOUND ":"NOT FOUND "),y?(di(y),_n(!0),console.log(" [DHAN] Connection restored from localStorage")):console.log(" [DHAN] No saved token in localStorage")},[]),g.useEffect(()=>{if(Ds){const y=localStorage.getItem("zerodha_client_id"),E=localStorage.getItem("zerodha_user_name");if(y&&E&&!Mm){Zu(y),Sl(E),console.log(" [ZERODHA] Profile restored from cache");return}(!Mm||!is)&&(async()=>{try{const z=await fetch("/api/broker/zerodha/profile",{headers:{Authorization:`Bearer ${Ds}`}});if(z.ok){const K=await z.json();K.profile&&K.profile.userId&&K.profile.userName&&(localStorage.setItem("zerodha_client_id",K.profile.userId),localStorage.setItem("zerodha_user_name",K.profile.userName),Zu(K.profile.userId),Sl(K.profile.userName),Pr(K.profile),console.log(" [ZERODHA] Profile fetched and saved:",K.profile.userId))}}catch(z){console.error(" [ZERODHA] Failed to fetch profile:",z)}})()}},[Ds]),g.useEffect(()=>{(async()=>{console.log(" [ZERODHA] Checking URL for callback token...");const M=new URLSearchParams(window.location.search).get("zerodha_token");console.log(" [ZERODHA] Token in URL:",M?" FOUND":" NOT FOUND"),M&&(console.log(" [ZERODHA] Token received in URL:",M.substring(0,20)+"..."),localStorage.setItem("zerodha_token",M),document.cookie=`zerodha_token=${M}; path=/; SameSite=Lax; Secure`,Ju(M),Yo(!0),Ju(M),Yo(!0),window.opener&&(console.log(" Sending token to opener:",window.opener.location.origin),window.opener.postMessage({type:"ZERODHA_TOKEN",token:M},"*"),console.log(" Sent token to parent window")),setTimeout(()=>{ps(!0),fetch("/api/broker/zerodha/trades",{headers:{Authorization:`Bearer ${M}`}}).then(z=>z.json()).then(z=>{var K;Ma(z.trades||[]),yf(!0),console.log(" Zerodha trades fetched:",(K=z.trades)==null?void 0:K.length),window.opener&&setTimeout(()=>window.close(),2e3)}).catch(z=>console.error("Error fetching Zerodha trades:",z)).finally(()=>ps(!1))},300),window.history.replaceState({},document.title,window.location.pathname))})()},[]),g.useEffect(()=>{const y=E=>{if(console.log(" [MESSAGE] Received message:",E.data.type,E.data),E.data.type==="ZERODHA_TOKEN"&&E.data.token){const M=E.data.token;console.log(" [ZERODHA] Token received from popup:",M.substring(0,20)+"..."),localStorage.setItem("zerodha_token",M),document.cookie=`zerodha_token=${M}; path=/; SameSite=Lax; Secure`,Ju(M),Yo(!0),Ju(M),Yo(!0),Im(!1),console.log(" [ZERODHA] Connection established and saved to localStorage"),setTimeout(()=>{fetch("/api/broker/zerodha/profile",{headers:{Authorization:`Bearer ${M}`}}).then(z=>z.json()).then(z=>{z.profile&&(Pr(z.profile),Zu(z.profile.userId),Sl(z.profile.userName),localStorage.setItem("zerodha_client_id",z.profile.userId),localStorage.setItem("zerodha_user_name",z.profile.userName),console.log(" [ZERODHA] Profile fetched:",z.profile.email))}).catch(z=>console.error(" [ZERODHA] Error fetching profile:",z)),console.log(" [ZERODHA] Fetching trades with token..."),ps(!0),fetch("/api/broker/zerodha/trades",{headers:{Authorization:`Bearer ${M}`}}).then(z=>z.json()).then(z=>{var K;Ma(z.trades||[]),yf(!0),console.log(" [ZERODHA] Trades fetched:",((K=z.trades)==null?void 0:K.length)||0,"trades")}).catch(z=>{console.error(" [ZERODHA] Error fetching trades:",z)}).finally(()=>ps(!1))},300)}else if(E.data.type==="ZERODHA_ERROR")console.error(" [ZERODHA] Error from callback:",E.data.error),alert("Zerodha error: "+E.data.error);else if(E.data.type==="DHAN_TOKEN"&&E.data.token){const M=E.data.token;console.log(" [DHAN] Token received from popup:",M.substring(0,20)+"..."),localStorage.setItem("dhan_token",M),localStorage.setItem("dhan_token",M),localStorage.setItem("dhan_user_id","dhan_user"),localStorage.setItem("dhan_user_name","Dhan Account"),document.cookie=`dhan_token=${M}; path=/; SameSite=Lax; Secure`,_n(!0),Im(!1),console.log(" [DHAN] Connection established and saved to localStorage")}else if(E.data.type==="ANGEL_ONE_TOKEN"&&E.data.token){const M=E.data.token;console.log(" [ANGEL ONE] Token received from popup:",M.substring(0,20)+"..."),localStorage.setItem("angel_one_token",M),document.cookie=`angel_one_token=${M}; path=/; SameSite=Lax; Secure`,kl(M),nh(!0),Im(!1),console.log(" [ANGEL ONE] Connection established and saved to localStorage")}else E.data.type==="ANGEL_ONE_ERROR"?(console.error(" [ANGEL ONE] Error from callback:",E.data.error),alert("Angel One error: "+E.data.error)):E.data.type==="DHAN_ERROR"&&(console.error(" [DHAN] Error from callback:",E.data.error),alert("Dhan error: "+E.data.error))};return window.addEventListener("message",y),()=>window.removeEventListener("message",y)},[]);const Go=async()=>{try{console.log(" Starting Zerodha OAuth flow...");const E=await(await fetch("/api/broker/zerodha/login-url")).json();if(E.error){alert(`Setup Error:
`+E.message+`

Steps to fix:
1. Go to https://developers.kite.trade
2. Click your app
3. Find "Redirect URL" and register:
https://YOUR_APP_DOMAIN/api/broker/zerodha/callback
4. Save and try again`);return}const{loginUrl:M}=E;console.log(" Zerodha login URL:",M);const z=window.open(M,"zerodha_oauth","width=600,height=800,resizable=yes,scrollbars=yes");if(!z){console.warn(" Popup blocked, falling back to main window"),alert("Popup blocked. Please enable popups and try again.");return}console.log(" Popup opened, waiting for OAuth callback...");let K=0;const G=setInterval(()=>{if(K++,z.closed){clearInterval(G),console.log(" Zerodha popup closed");return}K>300&&(clearInterval(G),z.close(),console.log(" Zerodha popup timeout"))},1e3)}catch(y){console.error(" Zerodha error:",y),alert("Error: "+(y instanceof Error?y.message:"Failed to connect"))}},Or=async()=>{try{console.log(" Starting Upstox OAuth flow...");const E=await(await fetch("/api/upstox/auth-url")).json();if(!E.authUrl){alert("Error: Could not generate Upstox authorization URL");return}console.log(" Upstox auth URL:",E.authUrl);const M=window.open(E.authUrl,"upstox_oauth","width=600,height=800,resizable=yes,scrollbars=yes");if(!M){console.warn(" Popup blocked, falling back to main window"),alert("Popup blocked. Please enable popups and try again.");return}console.log(" Upstox popup opened, waiting for OAuth callback...");const z=$=>{$.data.type==="UPSTOX_AUTH_SUCCESS"?(console.log(" Upstox authentication successful!"),localStorage.setItem("upstox_token",$.data.token),localStorage.setItem("upstox_user_id",$.data.userId||""),localStorage.setItem("upstox_user_email",$.data.userEmail||""),localStorage.setItem("upstox_user_name",$.data.userName||""),rh($.data.token),th(!0),window.removeEventListener("message",z),yr({title:"Success",description:"Upstox connected successfully!"})):$.data.type==="UPSTOX_AUTH_ERROR"&&(console.error(" Upstox authentication failed:",$.data.error),window.removeEventListener("message",z),yr({title:"Error",description:$.data.error||"Failed to authenticate with Upstox",variant:"destructive"}))};window.addEventListener("message",z);let K=0;const G=setInterval(()=>{if(K++,M.closed){clearInterval(G),window.removeEventListener("message",z),console.log(" Upstox popup closed");return}K>300&&(clearInterval(G),window.removeEventListener("message",z),M.close(),console.log(" Upstox popup timeout"))},1e3)}catch(y){console.error(" Upstox error:",y),alert("Error: "+(y instanceof Error?y.message:"Failed to connect to Upstox"))}},Da=async()=>{try{const y=os;if(!y){localStorage.removeItem("upstox_token"),localStorage.removeItem("upstox_user_id"),localStorage.removeItem("upstox_user_email"),localStorage.removeItem("upstox_user_name"),rh(null),th(!1);return}const E=await fetch("https://api.upstox.com/v2/logout",{method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${y}`}});console.log(" Upstox logout response:",E.status),localStorage.removeItem("upstox_token"),localStorage.removeItem("upstox_user_id"),localStorage.removeItem("upstox_user_email"),localStorage.removeItem("upstox_user_name"),rh(null),th(!1)}catch(y){console.error(" Upstox disconnect error:",y),localStorage.removeItem("upstox_token"),localStorage.removeItem("upstox_user_id"),localStorage.removeItem("upstox_user_email"),localStorage.removeItem("upstox_user_name"),rh(null),th(!1)}},Dm=async()=>{try{console.log(" Starting Angel One OAuth redirect flow...");const E=await(await fetch("/api/angelone/auth-url")).json();if(!E.authUrl){alert("Error: Could not generate Angel One authorization URL");return}console.log(" Angel One auth URL:",E.authUrl);const M=500,z=600,K=window.screenX+(window.outerWidth-M)/2,G=window.screenY+(window.outerHeight-z)/2;if(!window.open(E.authUrl,"AngelOneLogin",`width=${M},height=${z},left=${K},top=${G}`)){alert("Popup blocked! Please enable popups for this site.");return}const ae=c=>{c.data.type==="ANGELONE_AUTH_SUCCESS"?(console.log(" Angel One authentication successful!"),localStorage.setItem("angelone_token",c.data.token),localStorage.setItem("angel_one_token",c.data.token),c.data.feedToken&&localStorage.setItem("angelone_feed_token",c.data.feedToken),localStorage.setItem("angel_one_client_code",c.data.clientCode||"P176266"),kl(c.data.token),nh(!0),window.removeEventListener("message",ae),yr({title:"Success",description:"Angel One connected successfully"}),setConnectDialogOpen(!1)):c.data.type==="ANGELONE_AUTH_ERROR"&&(console.error(" Angel One auth error:",c.data.error),yr({variant:"destructive",title:"Error",description:c.data.error||"Login failed"}),window.removeEventListener("message",ae))};window.addEventListener("message",ae)}catch(y){console.error(" Angel One error:",y),alert("Error: "+(y instanceof Error?y.message:"Failed to connect"))}},$m=async()=>{try{console.log(" Starting Dhan OAuth flow...");const E=await(await fetch("/api/broker/dhan/login-url")).json();if(E.error){alert(`Setup Error:
`+E.error);return}const{loginUrl:M}=E;console.log(" Dhan login URL:",M);const z=window.open(M,"dhan_oauth","width=600,height=800,resizable=yes,scrollbars=yes");if(!z){console.warn(" Popup blocked"),alert("Popup blocked. Please enable popups and try again.");return}console.log(" Popup opened, waiting for OAuth callback...");let K=0;const G=setInterval(()=>{if(K++,z.closed){clearInterval(G),console.log(" Dhan popup closed");return}K>300&&(clearInterval(G),z.close(),console.log(" Dhan popup timeout"))},1e3)}catch(y){console.error(" Dhan error:",y),alert("Error: "+(y instanceof Error?y.message:"Failed to connect"))}},[cg,ui]=g.useState([]),[sh,ah]=g.useState(!1),[Rr,Es]=g.useState({sampleLine:"",positions:{time:[],order:[],symbol:[],type:[],qty:[],price:[]},displayValues:{time:"",order:"",symbol:"",type:"",qty:"",price:""}}),[Cl,ih]=g.useState(""),[bf,Ln]=g.useState(!1),[wf,ls]=g.useState(["Zerodha","Groww","Angel One","Upstox","5paisa","Fyers","Paytm Money","Alice Blue","Shoonya by Finvasia","Samco Securities","Motilal Oswal","Coinbase","Kraken","Binance","Delta Exchange","WazirX","Bybit","OKX","Huobi","Kucoin","FTX","Gemini","Bitstamp","Upbit","Bithumb","Crypto.com","Bitcoin India","CoinDCX","Zebpay","BTCXIndia","Unocoin","BTCXINDIA","Paxful","LocalBitcoins","Coinswitch","ICICI Securities","HDFC Securities","Kotak Securities","Axis Securities","SBI Securities","Sharekhan","IIFL Securities","JM Financial","Geojit Financial","Edelweiss Broking","Religare Broking","Centrum Broking","YES Bank Securities","IDBI Bank Securities","RBL Bank","Aditya Birla Money","Federal Bank Securities","Bandhan Bank Securities","Arihant Capital","Ashika Stock Broking","Augment Financial","B. D. Ranka","Bhavik Shares & Stock Brokers","Bombay Bullion","Bosch Stock Broking","BrightMoney","Brokerking","CARE Broking","Choice Equities","Cityline Stock Brokers","Claire Equity","Clearly Brokerage","D. A. Stock Broking","Deepak Stock Brokers","Dhanraj Brokers","Dharwani Equities","DHI Finance","Dolat Brokerage","Edelweiss Private","ERM Stock Brokers","Equity Infotech","Euro Exim Securities","Exclusive Equities","Federal Bank Broking","Fimpro Financial","Fincare Stock Broking","Finquest Securities","Finvasia","Fiscal Broking","Flat Securities","Flipstone Consultancy","Fortis Broking","Forward Broking","Fortwell Equities","Four Stone Consultants","Frances Commodities","Franklin Securities","Gajjar Securities","Ganesh Securities","Garuda Capstock","Gaurav Stock Brokers","GCL Securities","Genesis Broking","Geo Securities","Ginodia Stock Brokers","Global Capital","Global Equities","Global Funds","Global Securities","Globe Brokers","Glorious Capital","Good Sign Equities","Grand Finserve","Grapes Broking","Gravesham Broking","Grin Broking","GT Securities","Guide Stock Brokers","Gulimex Broking","Gumption Securities","Gupta Securities","Guru Arjun Consultants","Gurukul Equities","Gyan Capital","Gyan Securities","H. R. Equities","Harsh Broking","Harveys Broking","Hasib Securities","Haycroft Broking","Helix Securities","H Equities","Heritage Broking","Heston Brokers","Hi-Tech Securities","Hi-Wealth Stock Brokers","Himalayan Equities","Himalaya Capital","Hind Securities","Hindsight Broking","Hippo Broking","Hoho Equities","Holistic Investments","Holmes Broking","Home Capital","Homestead Equities","Honing Brokers","Horizon Equities","Horizon Securities","Horizo Broking","Horseplay Broking","Hot Stock Brokers","House of Brokers","Houston Capital","Hovercraft Brokers","Howdy Equities","Hullark Brokers","Hullabaloo Capital","Humana Securities","Humble Brokers","Humidor Equities","Humility Securities","Humor Capital","Hump Day Brokers","Huntec Capital","Huntsman Equities","Hurdles Broking","Hurray Securities","Hurricane Capital","Hurried Brokers","Hurtling Equities","Husband Broking","Hush Capital","Hustle Brokers","Hustlers Equities","Hut Stock Brokers","Hydrogen Capital","Hyped Equities","Hype Broking","Hypothesis Capital","Hyundai Securities","Hyve Broking","Invested","Indiabulls Securities","IIFL Wealth","IndiaMart Securities","Jagjeet Stock Brokers","Jaiprakash Securities","Jal Stock Broking","Jalamar Brokers","Jalata Equities","Jamboree Capital","Jambul Brokers","Jamestown Securities","Jan Capital","Janata Broking","Janglee Equities","Janitor Securities","Jannat Capital","Janta Brokers","Jaswant Broking","Jata Securities","Jayant Brokers","Jayesh Equities","Jayesh Securities","Jb Capital","Jdm Securities","Jeera Broking","Jeeva Equities","Jehandad Capital","Jen Stock Broking","Jenco Securities","Jericho Brokers","Jerkin Equities","Jeroboam Capital","Jerry's Broking","Jet Brokers","Jetpack Securities","Jetta Capital","Jetton Equities","Jewell Securities","Jfc Capital","Jha Stock Brokers","Jhon Broking","Jhoti Securities","Jhunjhunwala Brokers","Jig Securities","Jigsaw Brokers","Jihad Capital","Jila Equities","Jill's Broking","Jilt Securities","Jimbo Brokers","Jimnastic Capital","Jimmy's Equities","Jin Capital","Jingle Broking","Jingle Bells Securities","Jingle Jangle Brokers","Jingly Equities","Jingoism Capital","Jinxed Securities","Jirawala Brokers","Jism Equities","Jitney Capital","Jitter Broking","Jittery Securities","Jiuzhaigou Brokers","Jive Capital","Jive Equities","Jive Turkey Brokers","Jiver Securities","Jjim Capital","Job Broking","Jobber Equities","Jobcentre Capital","Jobless Securities","Jobname Brokers","Jobsworth Equities","Jock Capital","Jockey Broking","Jockeys Securities","Jocular Brokers","Jocund Equities","Jodeci Capital","Jodhpur Securities","Jodhpurs Broking","Jodi Brokers","Joe Capital","Joes Equities","Joey's Broking","Joeys Securities","Jog Capital","Jogee Brokers","Jogging Equities","Joggs Securities","Joghurt Capital","Jogles Broking","John Deere Brokers","John Equities","Johns Capital","Johnny Broking","Johnny's Securities","Johnnys Brokers","Johny's Capital","Join Equities","Joined Securities","Joining Capital","Joins Broking","Joint Equities","Joint Venture Securities","Jointed Brokers","Jointless Capital","Joists Equities","Joist Securities","Joke Capital","Joker Broking","Jokers Equities","Jokes Securities","Jokester Capital","Jokily Broking","Jokiness Equities"]),[$a,Hn]=g.useState({}),[Ci,La]=g.useState(null),[Xo,gr]=g.useState(null),[Lm,td]=g.useState(!1),El=g.useRef(null),dg=Cl.trim()?wf.filter(y=>y.toLowerCase().includes(Cl.toLowerCase())):[],oh=Rr.positions.time.length>0&&Rr.positions.order.length>0&&Rr.positions.symbol.length>0&&Rr.positions.type.length>0&&Rr.positions.qty.length>0&&Rr.positions.price.length>0,Tl=[];Rr.positions.time.length===0&&Tl.push("Time"),Rr.positions.order.length===0&&Tl.push("Order"),Rr.positions.symbol.length===0&&Tl.push("Symbol"),Rr.positions.type.length===0&&Tl.push("Type"),Rr.positions.qty.length===0&&Tl.push("Qty"),Rr.positions.price.length===0&&Tl.push("Price");const Fm=async(y,E,M)=>{if(!(ue!=null&&ue.userId))return yr({title:"Authentication Required",description:"Please log in to save formats",variant:"destructive"}),!1;try{const z=await ks();if(!z)return!1;const K=`${M}_${y}_${Date.now()}_${Math.random().toString(36).substr(2,6)}`,G={...E,id:K,label:y};console.log(` Saving format "${y}" to ${M} library with ID: ${K}`);const $=await fetch("/api/broker-formats/save",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${z}`},body:JSON.stringify({brokerName:M,formatName:y,sampleLine:E.sampleLine,positions:E.positions,displayValues:E.displayValues,userId:ue.userId})}),ae=await $.json();if($.ok){console.log(` Format saved to ${M} library`);const c={...$a,[K]:G};return Hn(c),La(G),gr(y),(await fetch(`/api/user-formats/${ue.userId}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${z}`},body:JSON.stringify(c)})).ok&&console.log(" Format also synced to personal formats for live preview"),yr({title:"Format Saved Successfully",description:`Your format "${y}" has been saved to the ${M} library!`}),!0}else return console.error(" Failed to save format:",ae.error),yr({title:"Save Failed",description:ae.error||"Failed to save format to library",variant:"destructive"}),!1}catch(z){return console.error(" Error saving format:",z),yr({title:"Network Error",description:"Could not connect to server",variant:"destructive"}),!1}};g.useEffect(()=>{(async()=>{if(console.log(" loadUserFormats triggered, currentUser:",ue!=null&&ue.userId?`userId: ${ue.userId}`:"NO USER"),!(ue!=null&&ue.userId)){console.log(" No authenticated user, skipping format load"),Hn({}),td(!1);return}td(!0);try{console.log(" Loading user formats for userId:",ue.userId);const E=await ks();if(!E){console.error(" Failed to get Cognito ID token"),td(!1);return}console.log(" Got Cognito ID token, making request to /api/user-formats/",ue.userId);const M=await fetch(`/api/user-formats/${ue.userId}`,{headers:{Authorization:`Bearer ${E}`}});if(console.log(" Response status:",M.status,M.statusText),M.ok){const z=await M.json();console.log(" Loaded formats from AWS:",Object.keys(z).length,"formats",z),Hn(z),Object.keys(z).length>0&&console.log(" Formats available in dropdown:",Object.keys(z).join(", "))}else{const z=await M.text();console.log(" No saved formats found in AWS, status:",M.status,"error:",z),Hn({})}}catch(E){console.error(" Error loading user formats:",E),Hn({})}finally{td(!1)}})()},[ue==null?void 0:ue.userId]),g.useEffect(()=>{jl&&(ue!=null&&ue.userId)&&(console.log(" Import dialog opened, reloading formats..."),td(!0),(async()=>{try{const y=await ks();if(y){const E=await fetch(`/api/user-formats/${ue.userId}`,{headers:{Authorization:`Bearer ${y}`}});if(E.ok){const M=await E.json();console.log(" Dialog opened - formats reloaded:",Object.keys(M).length),Hn(M),Object.keys(M).length>0&&console.log(" Formats now available in dropdown:",Object.keys(M).join(", "))}}}catch(y){console.error(" Failed to reload formats on dialog open:",y)}finally{td(!1)}})())},[jl,ue==null?void 0:ue.userId]);const[Pl,lh]=g.useState(null);g.useEffect(()=>{if(!gs.trim()){La(null),gr(null);return}if(Pl&&$a[Pl]){console.log(` Respecting user's manual format selection: ${Pl}`);const E=$a[Pl],M=gs.trim().split(`
`)[0],z=fx(E,M);La(z),gr(E.label||Pl);return}if(Object.keys($a).length>0&&!Pl){const E=Object.keys($a)[0],M=$a[E],z=gs.trim().split(`
`)[0],K=fx(M,z),G=M.label||E;console.log(` Auto-applying saved format: "${G}" with recalculated positions for live preview`),console.log("   Original positions:",M.positions),console.log("   Recalculated positions:",K.positions),La(K),gr(G);return}(async()=>{try{const E=gs.trim().split(`
`)[0],M=await fetch("/api/broker-formats/detect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstLine:E})});if(M.ok){const z=await M.json();z.success&&z.format?(console.log(` Auto-detected format from universal library - ${z.brokerName}: ${z.format.formatName} (${(z.confidence*100).toFixed(0)}% confidence)`),La(z.format),gr(`${z.brokerName}/${z.format.formatName}`)):(La(null),gr(null))}}catch(E){console.error(" Auto-detection error:",E),La(null),gr(null)}})()},[gs,$a,jl,Pl]);const[G0,ug]=g.useState(!1),[X0,I1]=g.useState(""),[M1,O1]=g.useState({apiKey:"",apiSecret:"",clientId:""}),[R1,D1]=g.useState(!1),[$1,L1]=g.useState(""),[Yd,jo]=g.useState(!1),[Nf,Q0]=g.useState("history");g.useEffect(()=>{if(Nf==="positions"&&(Ds||os||sn||Ra)){const y=async()=>{Z0(!0);try{let M="",z="",K="";if(Ds?(M="/api/broker/zerodha/positions",z=Ds,K="Zerodha"):os?(M="/api/broker/upstox/positions",z=os,K="Upstox"):sn?(M="/api/broker/angelone/positions",z=sn,K="Angel One"):Ra&&(M="/api/broker/dhan/positions",z=Ra,K="Dhan"),!M||!z)return;let ae=(await(await fetch(M,{headers:{Authorization:`Bearer ${z}`}})).json()).positions||[];ae.length>0&&(ae=await Promise.all(ae.map(async u=>{try{const p=u.symbol||"",v=await fetch(`/api/live-quotes/NSE:${p}-EQ`);if(v.ok){const k=await v.json();return{...u,currentPrice:k.price||u.currentPrice||u.current_price||0}}}catch{console.warn(` [LIVE-PRICE] Could not fetch live price for ${u.symbol}`)}return u}))),Kd(ae),console.log(" [POSITIONS]",K,"Fetched",ae.length,"positions with live prices via WebSocket")}catch(M){console.error(" [POSITIONS] Error fetching positions:",M),Kd([])}finally{Z0(!1)}};y();const E=setInterval(y,700);return()=>clearInterval(E)}},[Ds,os,sn,Ra,Nf]);const[dc,Bm]=g.useState([]),[J0,hg]=g.useState(!1),[ch,Kd]=g.useState([]),[fg,Z0]=g.useState(!1),[Gd,mg]=g.useState({symbol:"",action:"Buy",orderType:"Market",quantity:"",price:"",stopLoss:"",target:""}),dh=g.useRef(0),rd=g.useRef(0),[kv,Xd]=g.useState(!1),[wn,nd]=g.useState(null),[cn,Ya]=g.useState([]);g.useEffect(()=>{if(Nf==="history"&&(Ds||os||sn||Ra)){const y=async()=>{hg(!0);try{let M="",z="",K="";if(Ds?(M="/api/broker/zerodha/trades",z=Ds,K="Zerodha"):os?(M="/api/broker/upstox/trades",z=os,K="Upstox"):sn?(M="/api/broker/angelone/trades",z=sn,K="Angel One"):Ra&&(M="/api/broker/dhan/trades",z=Ra,K="Dhan"),!M||!z)return;const $=await(await fetch(M,{headers:{Authorization:`Bearer ${z}`}})).json();Bm($.trades||[]),console.log(" [ORDERS]",K,"Fetched",($.trades||[]).length,"trades")}catch(M){console.error(" [ORDERS] Error fetching trades:",M),Bm([])}finally{hg(!1)}};y();const E=setInterval(y,1e3);return()=>clearInterval(E)}},[Ds,os,sn,Ra,Nf]),g.useEffect(()=>{if(Yd&&(Ds||os)){const y=async()=>{try{const K=await fetch(Ds?"/api/broker/zerodha/margins":"/api/broker/upstox/margins",{headers:{Authorization:`Bearer ${Ds||os}`}}),G=await K.json();K.ok&&G.success&&G.availableCash!==void 0?(Gc(G.availableCash),localStorage.setItem("zerodha_broker_funds",G.availableCash.toString()),console.log(" [BROKER] Fetched available funds:",G.availableCash)):(console.error(" [BROKER] Failed to fetch funds:",G.error||"Invalid response"),Gc(null))}catch(M){console.error(" [BROKER] Failed to fetch funds:",M)}};y();const E=setInterval(y,2e3);return()=>clearInterval(E)}},[Yd,Ds]),g.useEffect(()=>{if(Ds&&!Qt){const y=localStorage.getItem("zerodha_broker_funds");y&&Gc(parseFloat(y))}},[Ds,Qt]),g.useEffect(()=>{if(Yd&&(Ds||os||sn||Ra)){const y=async()=>{try{let M="",z="",K="";if(Ds?(M="/api/broker/zerodha/margins",z=Ds,K="Zerodha"):os?(M="/api/broker/upstox/margins",z=os,K="Upstox"):sn?(M="/api/broker/angelone/margins",z=sn,K="Angel One"):Ra&&(M="/api/broker/dhan/margins",z=Ra,K="Dhan"),!M||!z)return;const $=await(await fetch(M,{headers:{Authorization:`Bearer ${z}`}})).json();Gc($.availableCash||$.availableFunds||0),console.log(" [FUNDS]",K,"Fetched available funds:",$.availableCash||$.availableFunds)}catch(M){console.error(" [FUNDS] Error fetching broker funds:",M),Gc(0)}};y();const E=setInterval(y,2e3);return()=>clearInterval(E)}},[Yd,Ds,os,sn,Ra]);const[pg,Um]=g.useState(!1),[jf,So]=g.useState(!1),[Ka,dn]=g.useState(!1),[xs,Qd]=g.useState(!1),[ko,uc]=g.useState(null),sd=g.useRef(0),Sf=g.useRef(0),[Qo,Ea]=g.useState(()=>{if(typeof window<"u"){const y=localStorage.getItem("paperTradingCapital");return y?parseFloat(y):18e5}return 18e5}),[Jd,Zd]=g.useState(()=>{if(typeof window<"u"){const y=localStorage.getItem("paperTradingRealizedPnl");return y?parseFloat(y):0}return 0}),[kn,Ta]=g.useState(()=>{if(typeof window<"u"){const y=localStorage.getItem("paperPositions");return y?JSON.parse(y):[]}return[]}),[Ts,cs]=g.useState(()=>{if(typeof window<"u"){const y=localStorage.getItem("paperTradeHistory");return y?JSON.parse(y):[]}return[]}),[ad,Co]=g.useState(!1),[gg,Ei]=g.useState(!1),Ki=g.useRef(null),zm=g.useCallback(async()=>{const y=localStorage.getItem("currentUserId");if(!(!y||y==="null"))try{const E=await ks();if(!E){console.log(" No Cognito token for paper trading AWS load");return}console.log(" Loading paper trading data from AWS for user:",y);const M=await fetch(`/api/paper-trading/${y}`,{headers:{Authorization:`Bearer ${E}`}});if(M.ok){const z=await M.json();z.success&&z.data&&(console.log(" Loaded paper trading data from AWS:",z.isNew?"(new user, defaults)":""),Ea(z.data.capital||18e5),Ta(z.data.positions||[]),cs(z.data.tradeHistory||[]),Zd(z.data.realizedPnl||0),localStorage.setItem("paperTradingCapital",String(z.data.capital||18e5)),localStorage.setItem("paperPositions",JSON.stringify(z.data.positions||[])),localStorage.setItem("paperTradeHistory",JSON.stringify(z.data.tradeHistory||[])),localStorage.setItem("paperTradingRealizedPnl",String(z.data.realizedPnl||0))),Co(!0)}else console.warn(" Failed to load paper trading data from AWS:",M.status),Co(!0)}catch(E){console.error(" Error loading paper trading from AWS:",E),Co(!0)}},[]),hc=g.useCallback(async(y,E,M,z)=>{const K=localStorage.getItem("currentUserId");if(!(!K||K==="null"))try{const G=await ks();if(!G){console.log(" No Cognito token for paper trading AWS save");return}Ei(!0);const $=E.reduce((c,u)=>c+(u.pnl||0),0),ae=await fetch(`/api/paper-trading/${K}`,{method:"POST",headers:{Authorization:`Bearer ${G}`,"Content-Type":"application/json"},body:JSON.stringify({capital:y,positions:E,tradeHistory:M,totalPnl:$,realizedPnl:z})});ae.ok?console.log(" Paper trading data saved to AWS"):console.warn(" Failed to save paper trading data to AWS:",ae.status)}catch(G){console.error(" Error saving paper trading to AWS:",G)}finally{Ei(!1)}},[]);g.useEffect(()=>{if(!ad)return;const y=localStorage.getItem("currentUserId");if(!(!y||y==="null"))return Ki.current&&clearTimeout(Ki.current),Ki.current=setTimeout(()=>{hc(Qo,kn,Ts,Jd)},2e3),()=>{Ki.current&&clearTimeout(Ki.current)}},[Qo,kn,Ts,Jd,ad,hc]),g.useEffect(()=>{const y=localStorage.getItem("currentUserId");y&&y!=="null"&&pe&&!Ce&&!ad&&zm()},[pe,Ce,ad,zm]);const[cr,hi]=g.useState(""),[fc,Gi]=g.useState(""),[id,Xi]=g.useState([]),[Eo,uh]=g.useState(!1),[ts,od]=g.useState(null),[en,ld]=g.useState("STOCK"),[Ti,To]=g.useState(""),[Ks,an]=g.useState(""),[ex,Al]=g.useState("BUY"),[tn,Pi]=g.useState(null),[eu,Ga]=g.useState(!1),[kf,cd]=g.useState(!1),[mc,pc]=g.useState(!1),[F1,Vm]=g.useState(""),[jr,dd]=g.useState("price"),[rs,Qi]=g.useState(""),[$s,_l]=g.useState("5m"),[fi,tu]=g.useState("min"),[Fa,ru]=g.useState(!1);g.useRef(new Set);const[nu,xa]=g.useState("disconnected"),[zr,gc]=g.useState(new Map),Ur=g.useRef(new Map),hh=g.useRef(Date.now());g.useEffect(()=>{if(zr.size===0||kn.length===0)return;const y=kn.map(E=>{const M=zr.get(E.symbol);if(M&&M!==E.currentPrice){const z=(M-E.entryPrice)*E.quantity,K=(M-E.entryPrice)/E.entryPrice*100;return{...E,currentPrice:M,pnl:E.action==="BUY"?z:-z,pnlPercent:E.action==="BUY"?K:-K}}return E});JSON.stringify(y)!==JSON.stringify(kn)&&Ta(y)},[zr]);const Ps=y=>{switch(y){case"STOCK":return"NSE,BSE";case"FUTURES":return"NFO,BFO";case"OPTIONS":return"NFO,BFO";case"MCX":return"MCX,NCDEX";default:return"NSE,BSE"}},fh=(y,E)=>{const M={NIFTY:75,BANKNIFTY:35,FINNIFTY:65,MIDCPNIFTY:40,SENSEX:20,BANKEX:15,NIFTYIT:50,NIFTYPHARMA:50,NIFTYINFRA:50,NIFTYAUTO:50,NIFTYBANK:50},z={GOLD:100,SILVER:30,CRUDEOIL:100,NATURALGAS:250,COPPER:1,LEAD:1,NICKEL:1,ZINC:1,ALUMMINI:1,COTTON:1,MENTHAOIL:1},K=y.replace(/\d.*$/i,"").toUpperCase();switch(E){case"FUTURES":return M[K]||1;case"OPTIONS":return M[K]||1;case"MCX":return z[K]||1;case"STOCK":default:return 1}},tx=y=>{const E=new Date;E.setHours(0,0,0,0);const M={index:[],futuresNear:[],futuresNext:[],futuresFar:[],options:[],others:[]};return y.forEach(z=>{var G;const K=z.instrumentType||"";if(K==="FUTIDX"||K==="OPTIDX"||(G=z.symbol)!=null&&G.match(/^(NIFTY50|NIFTY|BANKNIFTY|FINNIFTY|MIDCPNIFTY)$/i))K==="OPTIDX"?M.options.push(z):M.index.push(z);else if(K==="FUTSTK"||K==="FUTIDX"||K==="FUTCOM")if(z.expiry){const $=new Date(z.expiry);$.setHours(0,0,0,0);const ae=Math.floor(($.getTime()-E.getTime())/(1e3*60*60*24));ae<=7?M.futuresNear.push(z):ae<=37?M.futuresNext.push(z):M.futuresFar.push(z)}else M.futuresNear.push(z);else K==="OPTSTK"||K==="OPTFUT"||K==="OPTIDX"?M.options.push(z):M.others.push(z)}),[...M.index,...M.futuresNear,...M.futuresNext,...M.futuresFar,...M.options,...M.others]},xg=async y=>{if(!y||y.length<1){Xi([]);return}uh(!0);try{const E=Ps(en);console.log(` [PAPER-TRADE] Searching for "${y}" on exchange: ${E} (type: ${en})`);const M=`/api/angelone/search-instruments?query=${encodeURIComponent(y)}&exchange=${encodeURIComponent(E)}&limit=50`;console.log(` [PAPER-TRADE] API URL: ${M}`);const z=await fetch(M);if(z.ok){const K=await z.json();console.log(" [PAPER-TRADE] API Response:",K);const G=K.instruments||K.results||[];console.log(` [PAPER-TRADE] Found ${G.length} instruments`);const $=G.map(c=>({symbol:c.symbol||c.tradingSymbol||"",name:c.name||c.symbol||"",token:c.token||c.symbolToken||"",exchange:c.exchange||"",instrumentType:c.instrumentType||"",type:c.type||en,lotSize:c.lotSize||1,expiry:c.expiry||null})),ae=tx($);console.log(` [PAPER-TRADE] Formatted and sorted ${ae.length} results:`,ae.slice(0,3)),ae.forEach((c,u)=>{u<3&&console.log(`  [${u}] ${c.symbol} | Token: ${c.token} | Exchange: ${c.exchange} | Type: ${c.instrumentType}`)}),Xi(ae)}else console.error(` [PAPER-TRADE] API error: ${z.status}`),Xi([])}catch(E){console.error("Paper trading search error:",E),Xi([])}finally{uh(!1)}},Po=async y=>{const E=y||ts;if(!E){console.warn(" [PAPER-TRADE-PRICE] No instrument selected");return}if(Ur.current.has(E.symbol)){const M=Ur.current.get(E.symbol);M&&M.close(),Ur.current.delete(E.symbol)}if(console.log(" [PAPER-TRADE-PRICE] Selected instrument:",{symbol:E.symbol,token:E.token,exchange:E.exchange,instrumentType:E.instrumentType,type:E.type}),!E.symbol||!E.exchange){console.error(" [PAPER-TRADE-PRICE] Missing required fields:",{symbol:E.symbol,token:E.token,exchange:E.exchange}),Ga(!1);return}Ga(!0),xa("connecting");try{const M=`/api/angelone/live-stream-ws?symbol=${E.symbol}&symbolToken=${E.token}&exchange=${E.exchange}&tradingSymbol=${E.symbol}&interval=0`;console.log(` [PAPER-TRADE-PRICE] Opening CONTINUOUS live price stream for ${E.symbol} (NSE, BSE, MCX, NCDEX, NFO, BFO, CDS)`),console.log(`  URL: ${M}`);const z=new EventSource(M);Ur.current.set(E.symbol,z);let K=!1;const G=setTimeout(()=>{K||(console.warn(` [PAPER-TRADE-PRICE] No price received for ${E.symbol} after 5s`),Ga(!1))},5e3);z.onopen=()=>{console.log(` [PAPER-TRADE-PRICE] WebSocket STREAMING for ${E.symbol} @ 700ms`),xa("connected")},z.onmessage=$=>{try{const ae=JSON.parse($.data),c=ae.ltp||ae.close;c&&c>0&&(K||(console.log(` [PAPER-TRADE-PRICE] Got initial price for ${E.symbol}: ${c}`),clearTimeout(G),Ga(!1),K=!0),Pi(c),gc(u=>new Map(u).set(E.symbol,c)))}catch(ae){console.error(`[PAPER-TRADE-PRICE] Parse error for ${E.symbol}:`,ae)}},z.onerror=$=>{console.error(` [PAPER-TRADE-PRICE] Connection error for ${E.symbol}:`,$),clearTimeout(G),z.close(),Ur.current.delete(E.symbol),xa("disconnected"),K||Ga(!1)}}catch(M){console.error(" [PAPER-TRADE-PRICE] Exception:",M),Ga(!1),xa("disconnected")}},Il=()=>{const y=en==="STOCK"?Ti:Ks;if(!cr||!y||!tn){yr({title:"Invalid Trade",description:`Please select a symbol and enter ${en==="STOCK"?"quantity":"lots"}`,variant:"destructive"});return}let E=parseInt(y);if(en!=="STOCK"){const z=fh(cr,en);E=E*z}const M=E*tn;if(ex==="BUY"){if(M>Qo){yr({title:"Insufficient Capital",description:`Need ${M.toLocaleString()} but only ${Qo.toLocaleString()} available`,variant:"destructive"});return}let z,K;if(Fa&&rs){if(jr==="price")z=parseFloat(rs);else if(jr==="percent"){const k=parseFloat(rs);z=tn*(1-k/100)}else if(jr==="duration"){const k=parseFloat(rs),_=fi==="hr"?60:1;K=Date.now()+k*_*60*1e3}}const G={id:`PT-${Date.now()}`,symbol:cr,type:en,action:"BUY",quantity:E,entryPrice:tn,currentPrice:tn,entryTime:new Date().toLocaleTimeString(),pnl:0,pnlPercent:0,isOpen:!0,symbolToken:(ts==null?void 0:ts.token)||"0",exchange:(ts==null?void 0:ts.exchange)||(en==="MCX"?"MCX":en==="FUTURES"||en==="OPTIONS"?"NFO":"NSE"),slEnabled:Fa,slType:Fa?jr:void 0,slValue:Fa?rs:void 0,slTimeframe:Fa?$s:void 0,slDurationUnit:Fa?fi:void 0,slTriggerPrice:z,slExpiryTime:K},$=[...kn,G];Ta($),localStorage.setItem("paperPositions",JSON.stringify($));const ae={symbol:G.symbol,exchange:G.exchange,token:G.symbolToken,name:G.symbol};Po(ae);const c=Qo-M;Ea(c),localStorage.setItem("paperTradingCapital",String(c));const u={id:G.id,symbol:cr,type:"MIS",action:"BUY",quantity:E,price:tn,time:new Date().toLocaleTimeString()},p=[...Ts,u];cs(p),localStorage.setItem("paperTradeHistory",JSON.stringify(p));let v=`Bought ${E} ${cr} @ ${tn.toFixed(2)}`;Fa&&z?v+=` | SL: ${z.toFixed(2)}`:Fa&&K&&(v+=` | SL: ${rs} ${fi}`),yr({title:"Trade Executed",description:v}),ru(!1),Qi(""),cd(!1)}else{const z=kn.find(v=>v.symbol===cr&&v.isOpen);if(!z){yr({title:"No Open Position",description:`You don't have an open position in ${cr} to sell`,variant:"destructive"});return}const K=(tn-z.entryPrice)*z.quantity,G=(tn-z.entryPrice)/z.entryPrice*100,$=kn.map(v=>v.id===z.id?{...v,isOpen:!1,currentPrice:tn,pnl:K,pnlPercent:G,symbolToken:v.symbolToken,exchange:v.exchange}:v);Ta($),localStorage.setItem("paperPositions",JSON.stringify($));const ae=z.quantity*tn,c=Qo+ae;Ea(c),localStorage.setItem("paperTradingCapital",String(c));const u={id:`PT-${Date.now()}`,symbol:cr,type:"MIS",action:"SELL",quantity:z.quantity,price:tn,time:new Date().toLocaleTimeString(),pnl:`${K.toFixed(2)}`,closedAt:new Date().toLocaleTimeString()},p=[...Ts,u];cs(p),localStorage.setItem("paperTradeHistory",JSON.stringify(p)),yr({title:K>=0?"Profit Booked!":"Loss Booked",description:`Sold ${z.quantity} ${cr} @ ${tn.toFixed(2)} | P&L: ${K.toFixed(2)}`})}hi(""),To(""),an(""),Pi(null),Gi("")},Ml=async()=>{Ea(18e5),Ta([]),cs([]),hi(""),To(""),an(""),Pi(null),localStorage.setItem("paperTradingCapital","1800000"),localStorage.setItem("paperPositions","[]"),localStorage.setItem("paperTradeHistory","[]"),Zd(0),localStorage.setItem("paperTradingRealizedPnl","0"),Co(!1);const y=localStorage.getItem("currentUserId");if(y&&y!=="null"){try{const E=await ks();E&&(await fetch(`/api/paper-trading/${y}`,{method:"DELETE",headers:{Authorization:`Bearer ${E}`}}),console.log(" Paper trading AWS data reset"))}catch(E){console.error(" Error resetting AWS paper trading data:",E)}Co(!0)}yr({title:"Account Reset",description:"Paper trading account reset to 18,00,000"})},Ji=()=>{if(Ts.length===0){yr({title:"No Trades",description:"No trade history to record",variant:"destructive"});return}Qr&&(console.log(" Auto-switching to personal mode to record trades..."),tl(!1)),console.log(" Converting paper trades to journal format...");const y=Ts.map(u=>({time:u.time,order:u.action,symbol:u.symbol,type:u.type||"MIS",qty:u.quantity,price:u.price,pnl:u.pnl||"-",duration:u.closedAt?"0m 0s":"-"})),E=Ov(y);Ya(E);const M=new Date,z=ju(M),K=Gs[z]||{},G=K.tradeHistory||[],$=Ts.map(u=>({symbol:u.symbol,type:u.type||"MIS",action:u.action,quantity:u.quantity,price:u.price,time:u.time,pnl:u.pnl,closedAt:u.closedAt})),ae=[...G,...$],c={...K,tradeHistory:ae,profitLossAmount:ae.reduce((u,p)=>{if(p.pnl&&p.pnl!=="-"){const v=String(p.pnl).replace("","").replace("+","");return u+(parseFloat(v)||0)}return u},0),totalTrades:ae.length};ya(u=>({...u,[z]:c})),localStorage.setItem("personalTradingDataByDate",JSON.stringify({...As,[z]:c})),yu(z),Sd(M),Um(!1),tl(!1),yr({title:"Trades Recorded",description:`Recorded ${y.length} trades to today's summary and personal tradebook`}),console.log(" Paper trades recorded to journal summary and heatmap"),xc(u=>u+1)},qm=()=>{if(dc.length===0){yr({title:"No Orders",description:"No broker orders to record",variant:"destructive"});return}const y=dc.filter(p=>p.status==="COMPLETE");if(y.length===0){yr({title:"No Complete Orders",description:"Only COMPLETE orders are imported. Skipping REJECTED, CANCELLED, and PENDING orders.",variant:"destructive"});return}Qr&&(console.log(" Auto-switching to personal mode to record broker orders..."),tl(!1)),console.log(" Converting broker orders to journal format (COMPLETE orders only)..."),console.log(` Importing ${y.length} COMPLETE orders (skipped ${dc.length-y.length} non-complete orders)`);const E=y.map(p=>({time:p.time,order:p.order,symbol:p.symbol,type:p.type||"MIS",qty:p.qty,price:p.price,pnl:p.pnl||"-",duration:p.duration||"-"})),M=Ov(E);Ya(M);const z=new Date,K=ju(z),G=Gs[K]||{},$=G.tradeHistory||[],ae=y.map(p=>({symbol:p.symbol,type:p.type||"MIS",action:p.order,quantity:p.qty,price:p.price,time:p.time,pnl:p.pnl,duration:p.duration})),c=[...$,...ae],u={...G,tradeHistory:c,profitLossAmount:c.reduce((p,v)=>{if(v.pnl&&v.pnl!=="-"){const k=String(v.pnl).replace("","").replace("+","");return p+(parseFloat(k)||0)}return p},0),totalTrades:c.length};ya(p=>({...p,[K]:u})),localStorage.setItem("personalTradingDataByDate",JSON.stringify({...As,[K]:u})),yu(K),Sd(z),jo(!1),yr({title:"Orders Recorded",description:`Recorded ${y.length} orders`}),console.log(" Broker orders recorded to journal summary and heatmap"),xc(p=>p+1)};g.useEffect(()=>{const E=dc.filter(M=>M.status==="COMPLETE").length;E>rd.current&&E>0&&(console.log(` [AUTO-TAP] Detected ${E} COMPLETE orders (was ${rd.current}), auto-recording only success orders...`),setTimeout(()=>{qm()},500)),rd.current=E,dh.current=dc.length},[dc]);const Jo=()=>{if(openPositions.length===0){yr({title:"No Positions",description:"No open positions to exit",variant:"destructive"});return}let y=0,E=Qo;const M=[],z=new Date().toLocaleTimeString(),K=kn.map($=>{if(!$.isOpen)return $;const ae=($.currentPrice-$.entryPrice)*$.quantity,c=($.currentPrice-$.entryPrice)/$.entryPrice*100;y+=ae;const u=$.quantity*$.currentPrice;E+=u;const p={id:`PT-EXIT-${Date.now()}-${$.id}`,symbol:$.symbol,type:$.type,action:"SELL",quantity:$.quantity,price:$.currentPrice,time:z,pnl:`${ae.toFixed(2)}`,closedAt:z};return M.push(p),{...$,isOpen:!1,pnl:ae,pnlPercent:c}});Ta(K),localStorage.setItem("paperPositions",JSON.stringify(K)),Ea(E),localStorage.setItem("paperTradingCapital",String(E));const G=[...Ts,...M];cs(G),localStorage.setItem("paperTradeHistory",JSON.stringify(G)),Zd($=>{const ae=$+y;return localStorage.setItem("paperTradingRealizedPnl",String(ae)),ae}),yr({title:y>=0?"All Positions Closed - Profit!":"All Positions Closed - Loss",description:`Exited ${openPositions.length} position${openPositions.length>1?"s":""} | Total P&L: ${y>=0?"+":""}${y.toFixed(2)}`})},Zo=y=>{const E=kn.find(ae=>ae.id===y);if(!E){yr({title:"Position Not Found",description:"Could not find the position to exit",variant:"destructive"});return}const M=E.pnl,z=E.currentPrice,K=kn.map(ae=>ae.id===y?{...ae,isOpen:!1}:ae);Ta(K),localStorage.setItem("paperPositions",JSON.stringify(K));const G={id:`exit-${y}`,symbol:E.symbol,type:E.type,action:E.action==="BUY"?"SELL":"BUY",quantity:E.quantity,price:z,time:new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),pnl:`${M>=0?"+":""}${M.toFixed(0)}`,closedAt:new Date().toISOString()},$=[...Ts,G];cs($),localStorage.setItem("paperTradeHistory",JSON.stringify($)),Zd(ae=>{const c=ae+M;return localStorage.setItem("paperTradingRealizedPnl",String(c)),c}),uc(null),yr({title:"Position Exited",description:`${E.symbol} exited at ${z.toFixed(2)} | P&L: ${M.toFixed(0)}`,duration:2e3})};g.useEffect(()=>{localStorage.setItem("paperPositions",JSON.stringify(kn))},[kn]),g.useEffect(()=>{const y=kn.filter(K=>K.isOpen),E=new Set(y.map(K=>K.symbol));if(!(pg||a==="journal"&&B==="paper-trade")||y.length===0){Ur.current.forEach(K=>{K.close()}),Ur.current.clear(),xa("disconnected");return}return Ur.current.forEach((K,G)=>{E.has(G)||(console.log(` [PAPER-TRADING] Closing stale connection: ${G}`),K.close(),Ur.current.delete(G))}),xa("connecting"),console.log(` [PAPER-TRADING] Starting live stream for ${y.length} positions`),y.forEach(K=>{if(Ur.current.has(K.symbol))return;const G=K.symbolToken||"0",$=K.exchange||"NSE",ae=`/api/angelone/live-stream-ws?symbol=${K.symbol}&symbolToken=${G}&exchange=${$}&tradingSymbol=${K.symbol}&interval=0`;console.log(` [PAPER-TRADING] Subscribing to ${K.symbol} live stream`);const c=new EventSource(ae);Ur.current.set(K.symbol,c),c.onopen=()=>{console.log(` [PAPER-TRADING] Connected: ${K.symbol}`),xa("connected")},c.onmessage=u=>{try{const p=JSON.parse(u.data),v=p.ltp||p.close;v&&v>0&&(hh.current=Date.now(),gc(k=>{const _=new Map(k);return _.set(K.symbol,v),_}),Ta(k=>k.map(_=>{if(_.symbol===K.symbol&&_.isOpen){const F=_.action==="BUY"?v-_.entryPrice:_.entryPrice-v,se=F*_.quantity,J=F/_.entryPrice*100;return{..._,currentPrice:v,pnl:se,pnlPercent:J}}return _})))}catch(p){console.error(`[PAPER-TRADING] Parse error for ${K.symbol}:`,p)}},c.onerror=()=>{console.warn(` [PAPER-TRADING] Connection error: ${K.symbol}`),setTimeout(()=>{if(Ur.current.has(K.symbol)){const u=Ur.current.get(K.symbol);u&&u.close(),Ur.current.delete(K.symbol)}},5e3)}}),()=>{console.log(" [PAPER-TRADING] Cleaning up live stream connections"),Ur.current.forEach(K=>{K.close()}),Ur.current.clear()}},[pg,a,B,kn.filter(y=>y.isOpen).map(y=>`${y.symbol}:${y.action}`).join(",")]);const In=g.useMemo(()=>{const y=kn.filter(E=>E.isOpen).reduce((E,M)=>E+(M.pnl||0),0);return Jd+y},[kn,Jd]);g.useEffect(()=>{const y=kn.filter(E=>E.isOpen);y.length!==0&&y.forEach(E=>{const M=E;if(!M.slEnabled)return;let z=!1,K="";if(M.slTriggerPrice&&M.currentPrice>0&&(M.action==="BUY"?M.currentPrice<=M.slTriggerPrice&&(z=!0,K=`Price SL hit at ${M.currentPrice.toFixed(2)} (SL: ${M.slTriggerPrice.toFixed(2)})`):M.currentPrice>=M.slTriggerPrice&&(z=!0,K=`Price SL hit at ${M.currentPrice.toFixed(2)} (SL: ${M.slTriggerPrice.toFixed(2)})`)),M.slExpiryTime&&Date.now()>=M.slExpiryTime&&(z=!0,K=`Time SL expired (${M.slValue} ${M.slDurationUnit})`),z){console.log(` [SL-TRIGGER] Auto-exiting ${M.symbol}: ${K}`);const G=M.action==="BUY"?M.currentPrice-M.entryPrice:M.entryPrice-M.currentPrice,$=G*M.quantity,ae=G/M.entryPrice*100;Ta(p=>{const v=p.map(k=>k.id===M.id?{...k,isOpen:!1,pnl:$,pnlPercent:ae}:k);return localStorage.setItem("paperPositions",JSON.stringify(v)),v});const c=M.quantity*M.currentPrice;Ea(p=>{const v=p+c;return localStorage.setItem("paperTradingCapital",String(v)),v});const u={id:`PT-${Date.now()}`,symbol:M.symbol,type:"MIS",action:"SELL",quantity:M.quantity,price:M.currentPrice,time:new Date().toLocaleTimeString(),pnl:`${$>=0?"+":""}${$.toFixed(2)}`};cs(p=>{const v=[...p,u];return localStorage.setItem("paperTradeHistory",JSON.stringify(v)),v}),yr({title:"Stop Loss Triggered",description:`${M.symbol}: ${K} | P&L: ${$>=0?"+":""}${$.toFixed(2)}`,variant:$>=0?"default":"destructive"})}})},[kn.map(y=>`${y.id}:${y.currentPrice}:${y.isOpen}`).join(",")]);const[Fn,el]=g.useState({}),[As,ya]=g.useState({}),[Ol,xc]=g.useState(0),[Qr,tl]=g.useState(()=>{if(typeof window<"u"){const y=localStorage.getItem("tradingJournalDemoMode");if(y!==null)return y==="true";if(!localStorage.getItem("currentUserId"))return console.log(" Auto-default: Demo mode ON (no userId found)"),!0}return console.log(" Default: Personal mode (userId found)"),!1}),[Hm,Rl]=g.useState(!1);g.useEffect(()=>{console.log(" Startup cleanup: Removing stale localStorage trading data caches..."),localStorage.removeItem("personalTradingDataByDate"),localStorage.removeItem("calendarData"),localStorage.removeItem("heatmapDataCache"),console.log(" Stale localStorage caches cleared - will fetch fresh data from AWS")},[]);const[su,Cf]=g.useState(!1),Gs=g.useMemo(()=>{const y=Qr?Fn:As;return console.log(` tradingDataByDate recomputed [Mode: ${Qr?"DEMO":"PERSONAL"}, Revision: ${Ol}, Dates: ${Object.keys(y).length}]`),y},[Qr,Fn,As,Ol]),Ai=g.useMemo(()=>{const E=Object.keys(As).length>0?As:Fn;if(Object.keys(E).length===0)return{points:"0,12 20,12 40,12",hasData:!1,trend:"neutral"};const z=Object.keys(E).sort().slice(-7);let K=0;const G=[];if(z.forEach(v=>{const k=E[v],_=(k==null?void 0:k.totalPnL)||(k==null?void 0:k.pnl)||0;K+=_,G.push(K)}),G.length===0)return{points:"0,12 20,12 40,12",hasData:!1,trend:"neutral"};const $=Math.min(...G),c=Math.max(...G)-$||1,u=G.map((v,k)=>{const _=k/(G.length-1||1)*40,F=20-(v-$)/c*16;return`${_.toFixed(1)},${F.toFixed(1)}`}).join(" "),p=G[G.length-1]>=G[0]?"up":"down";return{points:u,hasData:!0,trend:p}},[As,Fn]),Xa=Qr?el:ya,Dl=()=>{if(typeof window>"u")return null;const y=localStorage.getItem("currentUserId");return y?(console.log(` Using AWS user ID: ${y}`),y):(console.log(" No AWS user logged in - getUserId() returns null"),null)};g.useEffect(()=>{(async()=>{if(a!=="journal"){console.log(` Skipping heatmap load - not on journal tab (current: ${a})`);return}const E=ue==null?void 0:ue.userId;console.log(` Loading heatmap data - userId: ${E||"NO USER (demo)"}`);try{if(Rl(!0),!E){console.log(" No user ID found - heatmap requires login"),ya({}),bu({}),Rl(!1);return}console.log(" HEATMAP: Fetching user data from AWS for userId:",E);const M=await fetch(ha(`/api/user-journal/${E}/all`));if(M.ok){const z=await M.json();console.log(" HEATMAP data loaded:",Object.keys(z).length,"dates"),Xa(z),bu(z),setTimeout(async()=>{console.log(" Ultra-fast auto-clicking all PERSONAL dates for heatmap colors...");const K=Object.keys(z).map(async ae=>{try{const c=await fetch(ha(`/api/user-journal/${E}/${ae}`));if(c.ok){const u=await c.json();if(u&&Object.keys(u).length>0)return{dateStr:ae,journalData:u}}}catch(c){console.error(` Error auto-loading PERSONAL date ${ae}:`,c)}return null}),$=(await Promise.all(K)).filter(ae=>ae!==null);if($.length>0){const ae={...z};$.forEach(c=>{c&&(ae[c.dateStr]=c.journalData)}),Xa(ae),bu(ae),console.log(` Ultra-fast PERSONAL heatmap population complete! Loaded ${$.length} dates in parallel.`)}if(!lo&&Object.keys(z).length>0){const c=Object.keys(z).sort((p,v)=>new Date(v).getTime()-new Date(p).getTime())[0],u=new Date(c);console.log(" Auto-selecting latest PERSONAL date:",c),Sd(u),await Hf(u)}},100)}else console.log(" No personal data found for user:",E)}catch(M){console.error(" Error loading heatmap data:",M),console.error("Error type:",typeof M),console.error("Error message:",M instanceof Error?M.message:"Unknown error"),console.error("Error stack:",M instanceof Error?M.stack:"No stack")}finally{Rl(!1)}})()},[a,ue==null?void 0:ue.userId]);const[B1,Qa]=g.useState([]),au=g.useRef(null),[Cn,mh]=g.useState("NSE:NIFTY50-INDEX"),[$l,_i]=g.useState("5"),[Ao,iu]=g.useState(!1),[Ll,Zi]=g.useState("minutes"),[Mn,Cv]=g.useState(""),[ir,yg]=g.useState([]),[eo,la]=g.useState([]),[rt,to]=g.useState(!1),[ud,ou]=g.useState(""),[Fl,ph]=g.useState("STOCK"),[hd,lu]=g.useState([]),[yc,Bl]=g.useState(0),[gh,cu]=g.useState(!1),[Vr,xh]=g.useState(null),[yh,Ef]=g.useState(!1),[vh,fd]=g.useState(""),[_o,Tf]=g.useState("NIFTY"),[ro,du]=g.useState(""),Pf=y=>{if(!y)return null;if(typeof y=="string")try{return new Date(y).toISOString().split("T")[0]}catch{return null}return null},Af=(y,E)=>y?E?y.filter(M=>M.expiry?Pf(M.expiry)===E:!0):y:[],Wm=()=>{if(ro)return ro;const y=vc();return y.length>0?y[0].value:null},vc=y=>{if(!Vr)return[];let E=(Vr==null?void 0:Vr.expiryDates)||(Vr==null?void 0:Vr.expiries)||[];if(!E||E.length===0){const K=[...(Vr==null?void 0:Vr.calls)||[],...(Vr==null?void 0:Vr.puts)||[]],G=new Set(K.map($=>$.expiry).filter($=>$&&typeof $=="string"));E=Array.from(G).sort(),console.log(" Extracted expiry dates from options:",E)}const M=new Date;return M.setHours(0,0,0,0),E.filter(K=>{try{const G=new Date(K);return G.setHours(0,0,0,0),G>=M}catch{return!1}}).slice(0,10).map(K=>({value:String(K),label:(()=>{try{return new Date(K).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return String(K)}})()}))};g.useEffect(()=>{if(Vr!=null&&Vr.expiryDates&&Vr.expiryDates.length>0&&!ro){const y=new Date;y.setHours(0,0,0,0);const E=Vr.expiryDates.filter(M=>{const z=new Date(M);return z.setHours(0,0,0,0),z>=y});E.length>0&&du(E[0])}},[Vr,ro]),g.useEffect(()=>{gh&&_o&&Ii(_o)},[gh,_o]);const no=y=>{if(!Ro)return y||(cr?cr.replace(/-..*$/,"").toUpperCase():"NIFTY");const E=Ro.symbol.replace("-EQ","").replace("-INDEX","").toUpperCase();if(E.includes("NIFTY50")||E==="NIFTY 50")return"NIFTY";if(E.includes("BANKNIFTY")||E.includes("NIFTY BANK"))return"BANKNIFTY";if(E.includes("FINNIFTY"))return"FINNIFTY";if(E.includes("MIDCPNIFTY"))return"MIDCPNIFTY";if(E.includes("FUT")){const M=E.match(/^([A-Z]+)/);if(M)return M[1]}return E},Ii=async(y,E)=>{var z,K;const M=no(y);if(M){Ef(!0);try{const G=E?`&expiry=${encodeURIComponent(E)}`:"",$=`/api/options/chain?symbol=${M}${G}`;console.log(" [OPTIONS] Fetching from:",$);const ae=await fetch($,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}});if(console.log(" [OPTIONS] Response status:",ae.status,ae.statusText),!ae.ok)throw new Error(`API error: ${ae.status} ${ae.statusText}`);const c=await ae.json();if(console.log(" [OPTIONS] Data received:",c.success?"":"",c),c.success&&c.data){xh(c.data),console.log(" [OPTIONS] Option chain loaded:",((z=c.data.calls)==null?void 0:z.length)||0,"calls,",((K=c.data.puts)==null?void 0:K.length)||0,"puts");const u=c.data.expiryDates||c.data.expiries||[];if(u&&u.length>0){const p=u[0];ro||(du(p),console.log(" [OPTIONS] Auto-selected first expiry:",p))}}else console.warn(" [OPTIONS] Invalid response format:",c),xh(null)}catch(G){console.error(" [OPTIONS] Error fetching option chain:",G),xh(null)}finally{Ef(!1)}}},[Ba,rx]=g.useState("all"),[bc,md]=g.useState("2025-09-12"),[qr,bh]=g.useState([]),[so,Io]=g.useState(!1),[Mi,vg]=g.useState("5"),[_f,Ym]=g.useState(!1),[wh,Mo]=g.useState(!1),[pd,If]=g.useState(!0),[wc,Mf]=g.useState(!1),[ra,Km]=g.useState(()=>{const y=localStorage.getItem("watchlistSymbols");return y?JSON.parse(y):[{symbol:"RELIANCE-EQ",name:"Reliance Industries",token:"2885",exchange:"NSE",displayName:"RELIANCE",tradingSymbol:"RELIANCE-EQ"},{symbol:"TCS-EQ",name:"Tata Consultancy Services",token:"11536",exchange:"NSE",displayName:"TCS",tradingSymbol:"TCS-EQ"},{symbol:"HDFCBANK-EQ",name:"HDFC Bank",token:"1333",exchange:"NSE",displayName:"HDFCBANK",tradingSymbol:"HDFCBANK-EQ"}]}),[ns,Wn]=g.useState("RELIANCE-EQ"),[gd,Nh]=g.useState(""),[Of,Nc]=g.useState([]),[bg,jc]=g.useState(!1),[ss,Ls]=g.useState([]),[Xs,Oo]=g.useState(!1),[uu,Sc]=g.useState({}),[Gm,ca]=g.useState(!1),[xd,Rf]=g.useState("1D"),[hu,rl]=g.useState("1D"),{data:Fs=[],isLoading:fu}=xn({queryKey:["stock-chart","NIFTY50",xd],queryFn:()=>fetch(`/api/stock-chart-data/NIFTY50?timeframe=${xd}`).then(y=>y.json()),refetchInterval:xd==="1D"?6e4:3e5,staleTime:0,gcTime:6e5,refetchOnMount:!0,refetchOnWindowFocus:!1}),{data:Oi=[],isLoading:Xm}=xn({queryKey:["stock-chart",ns,hu],queryFn:()=>{const y=ns.replace("-EQ","").replace("-BE","");return fetch(`/api/stock-chart-data/${y}?timeframe=${hu}`).then(E=>E.json())},refetchInterval:hu==="1D"?6e4:3e5,staleTime:0,gcTime:6e5,refetchOnMount:!0,refetchOnWindowFocus:!1}),Qm=y=>Array.isArray(y)?y.map(E=>({time:E.time||new Date(E.timestamp*1e3).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),price:Number(E.price)||Number(E.close)||0})):[],Jm=Qm(Fs),wg=Qm(Oi),kc=()=>{var y,E;return Fs&&Fs.length>0&&(((y=Fs[Fs.length-1])==null?void 0:y.price)||((E=Fs[Fs.length-1])==null?void 0:E.close))||0},mu=()=>{var y,E;return Oi&&Oi.length>0&&(((y=Oi[Oi.length-1])==null?void 0:y.price)||((E=Oi[Oi.length-1])==null?void 0:E.close))||0},Zm=()=>{var y,E;return!Fs||Fs.length===0?kc():((y=Fs[0])==null?void 0:y.price)||((E=Fs[0])==null?void 0:E.close)||kc()},ep=()=>{var y,E;return!Oi||Oi.length===0?mu():((y=Oi[0])==null?void 0:y.price)||((E=Oi[0])==null?void 0:E.close)||mu()},nl=()=>{const y=kc(),E=Zm();return y-E},Ul=()=>{const y=mu(),E=ep();return y-E};g.useEffect(()=>{localStorage.setItem("watchlistSymbols",JSON.stringify(ra))},[ra]),g.useEffect(()=>{if(!nt){Sc({});return}(async()=>{ca(!0);try{const E=nt.replace("-EQ","").replace("-BE",""),M=await fetch(`/api/quarterly-results/${E}`);if(M.ok){const z=await M.json();Sc({[nt]:z.results||[]})}}catch(E){console.error("Error fetching quarterly data:",E),Sc({[nt]:[]})}finally{ca(!1)}})()},[nt]),g.useEffect(()=>{ns&&We.includes("[CHART:WATCHLIST]")&&wt(ns)},[ns,We]),g.useEffect(()=>{ns&&(wc||We.includes("[CHART:WATCHLIST]"))&&(async()=>{Oo(!0);try{const E=ns.replace("-EQ","").replace("-BE",""),M=await fetch(`/api/stock-news/${E}?refresh=${Date.now()}`);if(M.ok){const z=await M.json(),K=Array.isArray(z)?z:z.news||[];Ls(K.slice(0,20))}}catch(E){console.error("Error fetching watchlist news:",E)}finally{Oo(!1)}})()},[ns,wc,We]),g.useEffect(()=>{nt&&We.includes("[CHART:SEARCH_RESULTS]")&&(async()=>{Oo(!0);try{const E=nt.replace("-EQ","").replace("-BE",""),M=await fetch(`/api/stock-news/${E}?refresh=${Date.now()}`);if(M.ok){const z=await M.json(),K=Array.isArray(z)?z:z.news||[];Ls(K.slice(0,20))}}catch(E){console.error("Error fetching search results news:",E)}finally{Oo(!1)}})()},[nt,We]);const tp=async y=>{if(!y.trim()||y.length<2){Nc([]);return}jc(!0);try{const E=await fetch(`/api/angelone/search-instruments?query=${encodeURIComponent(y)}&exchange=NSE,BSE,MCX&limit=10`);if(E.ok){const M=await E.json(),K=(M.instruments||M||[]).slice(0,10).map(G=>({symbol:G.symbol||G.trading_symbol||"",displayName:G.symbol||G.trading_symbol||"",name:G.name||G.company_name||G.instrument_name||"",token:G.token||G.exch_instrument_token||"",exchange:G.exch_seg||"NSE",tradingSymbol:G.symbol||G.trading_symbol||""})).filter(G=>G.symbol);Nc(K)}}catch(E){console.error("Error searching stocks:",E),Nc([])}finally{jc(!1)}};g.useEffect(()=>{const y=setTimeout(()=>{gd.trim().length>0?tp(gd):Nc([])},300);return()=>clearTimeout(y)},[gd]),g.useEffect(()=>{ns&&(async()=>{try{const E=await fetch(`/api/trading-agent?symbol=${encodeURIComponent(ns)}`);if(E.ok){const M=await E.json();M.companyInsights&&(window.companyInsightsData=M.companyInsights)}}catch(E){console.error("Error fetching watchlist company insights:",E)}})()},[ns]);const Df=y=>{ra.find(E=>E.symbol===y.symbol)||(Km(E=>[...E,y]),Wn(y.symbol)),Nh(""),Nc([])},$f=y=>{var E;if(Km(M=>M.filter(z=>z.symbol!==y)),ns===y&&ra.length>1){const M=ra.filter(z=>z.symbol!==y);Wn(((E=M[0])==null?void 0:E.symbol)||"")}},Ng=y=>{const E=new Date,M=new Date(y),z=E.getTime()-M.getTime(),K=Math.floor(z/(1e3*60)),G=Math.floor(z/(1e3*60*60)),$=Math.floor(z/(1e3*60*60*24));return K<60?`${K}m ago`:G<24?`${G}h ago`:`${$}d ago`},jh=[{value:"1",label:"1min"},{value:"3",label:"3min"},{value:"5",label:"5min"},{value:"10",label:"10min"},{value:"15",label:"15min"},{value:"30",label:"30min"},{value:"60",label:"1hr"},{value:"120",label:"2hr"},{value:"1D",label:"1D"}],yd=y=>{const E=jh.find(M=>M.value===y);return E?E.label:y},rp=y=>({"1D":"1440","1W":"10080","1M":"43200"})[y]||y,Lf={all:[{symbol:"RELIANCE-EQ",name:"Reliance Industries",token:"2885",exchange:"NSE",instrumentType:"",displayName:"RELIANCE",tradingSymbol:"RELIANCE-EQ"},{symbol:"TCS-EQ",name:"Tata Consultancy Services",token:"11536",exchange:"NSE",instrumentType:"",displayName:"TCS",tradingSymbol:"TCS-EQ"},{symbol:"INFY-EQ",name:"Infosys Limited",token:"1594",exchange:"NSE",instrumentType:"",displayName:"INFY",tradingSymbol:"INFY-EQ"},{symbol:"HDFCBANK-EQ",name:"HDFC Bank",token:"1333",exchange:"NSE",instrumentType:"",displayName:"HDFCBANK",tradingSymbol:"HDFCBANK-EQ"},{symbol:"Nifty 50",name:"Nifty 50 Index",token:"99926000",exchange:"NSE",instrumentType:"AMXIDX",displayName:"NIFTY 50",tradingSymbol:"Nifty 50"},{symbol:"Nifty Bank",name:"Nifty Bank Index",token:"99926009",exchange:"NSE",instrumentType:"AMXIDX",displayName:"BANK NIFTY",tradingSymbol:"Nifty Bank"}],stock:[{symbol:"RELIANCE-EQ",name:"Reliance Industries",token:"2885",exchange:"NSE",instrumentType:"",displayName:"RELIANCE",tradingSymbol:"RELIANCE-EQ"},{symbol:"TCS-EQ",name:"Tata Consultancy Services",token:"11536",exchange:"NSE",instrumentType:"",displayName:"TCS",tradingSymbol:"TCS-EQ"},{symbol:"INFY-EQ",name:"Infosys Limited",token:"1594",exchange:"NSE",instrumentType:"",displayName:"INFY",tradingSymbol:"INFY-EQ"},{symbol:"HDFCBANK-EQ",name:"HDFC Bank",token:"1333",exchange:"NSE",instrumentType:"",displayName:"HDFCBANK",tradingSymbol:"HDFCBANK-EQ"},{symbol:"ICICIBANK-EQ",name:"ICICI Bank",token:"4963",exchange:"NSE",instrumentType:"",displayName:"ICICIBANK",tradingSymbol:"ICICIBANK-EQ"},{symbol:"SBIN-EQ",name:"State Bank of India",token:"3045",exchange:"NSE",instrumentType:"",displayName:"SBIN",tradingSymbol:"SBIN-EQ"},{symbol:"BHARTIARTL-EQ",name:"Bharti Airtel",token:"10604",exchange:"NSE",instrumentType:"",displayName:"BHARTIARTL",tradingSymbol:"BHARTIARTL-EQ"},{symbol:"KOTAKBANK-EQ",name:"Kotak Mahindra Bank",token:"1922",exchange:"NSE",instrumentType:"",displayName:"KOTAKBANK",tradingSymbol:"KOTAKBANK-EQ"}],commodity:[],fo:[],index:[{symbol:"Nifty 50",name:"Nifty 50 Index",token:"99926000",exchange:"NSE",instrumentType:"AMXIDX",displayName:"NIFTY 50",tradingSymbol:"Nifty 50"},{symbol:"Nifty Bank",name:"Nifty Bank Index",token:"99926009",exchange:"NSE",instrumentType:"AMXIDX",displayName:"BANK NIFTY",tradingSymbol:"Nifty Bank"},{symbol:"Nifty IT",name:"Nifty IT Index",token:"99926013",exchange:"NSE",instrumentType:"AMXIDX",displayName:"NIFTY IT",tradingSymbol:"Nifty IT"},{symbol:"NIFTY NEXT 50",name:"Nifty Next 50 Index",token:"99926001",exchange:"NSE",instrumentType:"AMXIDX",displayName:"NIFTY NEXT 50",tradingSymbol:"NIFTY NEXT 50"},{symbol:"Nifty Midcap 50",name:"Nifty Midcap 50 Index",token:"99926027",exchange:"NSE",instrumentType:"AMXIDX",displayName:"NIFTY MIDCAP",tradingSymbol:"Nifty Midcap 50"},{symbol:"INDIA VIX",name:"India VIX",token:"99926004",exchange:"NSE",instrumentType:"AMXIDX",displayName:"INDIA VIX",tradingSymbol:"INDIA VIX"}]},jg={commodity:["gold","silver","crude","copper","natural gas","aluminium","zinc","nickel"],fo:["nifty","banknifty","finnifty","reliance","tcs","infy","hdfcbank"],currency:["usdinr","eurinr","gbpinr","jpyinr","eurusd"]},[Ff,vd]=g.useState([]),[Bf,np]=g.useState(!1),[Ro,sp]=g.useState(null);g.useEffect(()=>{if(Ro){const y=`${Ro.exchange}:${Ro.symbol}`;mh(y),console.log(` SYNC FIX: Updated selectedJournalSymbol to "${y}" (was: ${Cn})`)}},[Ro]);const ao=g.useRef(null),Sg=g.useRef(null),Sh=g.useRef(null),ys=g.useRef(null),Ja=g.useRef(null),bd=g.useRef(null),Uf=g.useRef(null),kg=g.useRef(null),ap=g.useRef(null),mi=g.useRef([]),[Cg,kh]=g.useState({ema12:null,ema26:null}),[nx,ip]=g.useState(null),[sx,pu]=g.useState(!1),io=g.useRef(null),[Eg,Ch]=g.useState(null),[Ri,gu]=g.useState(null),[da,Cc]=g.useState("search"),[Bs,Eh]=g.useState([]),[Tg,va]=g.useState(!1),[na,Pg]=g.useState("1"),[xu,Th]=g.useState(""),[ua,yu]=g.useState(""),[S,L]=g.useState([]),D=g.useRef(null),q=g.useRef(null),fe=g.useRef(null),Se=g.useRef(null),ve=g.useRef(null),Ge=g.useRef(null),Qe=g.useRef(null),ht=g.useRef([]),[Et,Pt]=g.useState(null),rr={NIFTY50:{token:"99926000",exchange:"NSE",tradingSymbol:"Nifty 50"},NIFTY:{token:"99926000",exchange:"NSE",tradingSymbol:"Nifty 50"},BANKNIFTY:{token:"99926009",exchange:"NSE",tradingSymbol:"Nifty Bank"},NIFTYIT:{token:"99926013",exchange:"NSE",tradingSymbol:"Nifty IT"},NIFTYNEXT50:{token:"99926001",exchange:"NSE",tradingSymbol:"NIFTY NEXT 50"},NIFTYMIDCAP50:{token:"99926027",exchange:"NSE",tradingSymbol:"Nifty Midcap 50"},INDIAVIX:{token:"99926004",exchange:"NSE",tradingSymbol:"INDIA VIX"},RELIANCE:{token:"2885",exchange:"NSE",tradingSymbol:"RELIANCE-EQ"},TCS:{token:"11536",exchange:"NSE",tradingSymbol:"TCS-EQ"},HDFCBANK:{token:"1333",exchange:"NSE",tradingSymbol:"HDFCBANK-EQ"},INFY:{token:"1594",exchange:"NSE",tradingSymbol:"INFY-EQ"},ICICIBANK:{token:"4963",exchange:"NSE",tradingSymbol:"ICICIBANK-EQ"},SBIN:{token:"3045",exchange:"NSE",tradingSymbol:"SBIN-EQ"},BHARTIARTL:{token:"10604",exchange:"NSE",tradingSymbol:"BHARTIARTL-EQ"},ITC:{token:"1660",exchange:"NSE",tradingSymbol:"ITC-EQ"},KOTAKBANK:{token:"1922",exchange:"NSE",tradingSymbol:"KOTAKBANK-EQ"},LT:{token:"11483",exchange:"NSE",tradingSymbol:"LT-EQ"},AXISBANK:{token:"5900",exchange:"NSE",tradingSymbol:"AXISBANK-EQ"},WIPRO:{token:"3787",exchange:"NSE",tradingSymbol:"WIPRO-EQ"},TATASTEEL:{token:"3499",exchange:"NSE",tradingSymbol:"TATASTEEL-EQ"},SENSEX:{token:"99919000",exchange:"BSE",tradingSymbol:"SENSEX"},GOLD:{token:"232801",exchange:"MCX",tradingSymbol:"GOLD"},CRUDEOIL:{token:"232665",exchange:"MCX",tradingSymbol:"CRUDEOIL"},SILVER:{token:"234977",exchange:"MCX",tradingSymbol:"SILVER"}},[hr,Tt]=g.useState(null),$t=y=>{let E=y.replace(/^(NSE|BSE|MCX|NCDEX|NFO|BFO|CDS):/,"").replace(/-EQ$/,"").replace(/-INDEX$/,"").replace(/-COM$/,"").replace(/-FUT$/,"").replace(/-OPT$/,"");return E=E.replace(/\s+/g,"").toUpperCase(),rr[E]?E:{NIFTY50:"NIFTY50",NIFTYBANK:"BANKNIFTY",NIFTYIT:"NIFTYIT",BANKNIFTY:"BANKNIFTY",INDIAVIX:"INDIAVIX",SENSEX:"SENSEX",GOLD:"GOLD",CRUDEOIL:"CRUDEOIL",SILVER:"SILVER"}[E]||E},vs=y=>{switch(y){case"STOCK":return"NSE,BSE";case"COMMODITY":return"MCX,NCDEX";case"F&O":return"NFO,BFO";default:return"NSE,BSE"}},er=async(y,E)=>{if(!y||y.trim().length<2){vd([]);return}np(!0);try{const M=vs(E);console.log(` [JOURNAL-CHART] Searching for "${y}" on exchange: ${M} (type: ${E})`);const K=await(await fetch(`/api/angelone/search-instruments?query=${encodeURIComponent(y)}&exchange=${encodeURIComponent(M)}&limit=50`)).json();K.success&&K.instruments?(console.log(` [JOURNAL-CHART] Found ${K.instruments.length} instruments`),vd(K.instruments)):vd([])}catch(M){console.error(" Failed to fetch instruments:",M),vd([])}finally{np(!1)}};g.useEffect(()=>{const y=setTimeout(()=>{ud.length>=2?er(ud,Fl):vd([])},300);return()=>clearTimeout(y)},[ud,Fl]);const[On,Hr]=g.useState(2),[dr,Dr]=g.useState(!1),Wt=(y,E)=>{if(y.length===0)return[];const M=2/(E+1),z=[];let K=y.slice(0,E).reduce((G,$)=>G+$,0)/E;z.push(K);for(let G=E;G<y.length;G++)K=y[G]*M+K*(1-M),z.push(K);return z},Bn=g.useCallback(async()=>{try{if(console.log(" [SEARCH CHART] Destroying old chart..."),ys.current){try{ys.current.remove()}catch{}ys.current=null,Ja.current=null,bd.current=null,Uf.current=null,kg.current=null}if(!Cn){console.warn(" [SEARCH CHART] No symbol selected"),Io(!1);return}console.log(` [SEARCH CHART] Fetching ${Cn} (manual search)`),Io(!0);let y=hr,E=Cn;if(y?(console.log(` [SEARCH CHART] Using direct token from search: ${Cn}, Token: ${y.token}`),E=$t(Cn)):(E=$t(Cn),y=rr[E],console.log(` [SEARCH CHART] Symbol: ${E}, Token: ${y==null?void 0:y.token}`)),!y){console.warn(` [SEARCH CHART] No token for: ${Cn}`),Io(!1);return}const M=rp(Mi),z=new Date,K=new Date(z.getTime()-14400*60*1e3),G=(p,v)=>{const k=p.getFullYear(),_=String(p.getMonth()+1).padStart(2,"0"),F=String(p.getDate()).padStart(2,"0");return`${k}-${_}-${F} ${v}`},$={exchange:y.exchange,symbolToken:y.token,interval:M,fromDate:G(K,"09:15"),toDate:G(z,"15:30")};console.log(" [SEARCH CHART] API Request:",$);const ae=await fetch(ha("/api/angelone/historical"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify($)});if(!ae.ok){const p=await ae.text();throw console.error(` [SEARCH CHART] API Error ${ae.status}: ${p}`),new Error(`Failed to fetch chart data: ${ae.status}`)}const c=await ae.json();let u=[];c.success&&c.candles&&Array.isArray(c.candles)&&(u=c.candles.map(p=>{let v;if(typeof p.timestamp=="string"){const[k,_]=p.timestamp.split(" "),[F,se,J]=k.split("-").map(Number),[xe,ye]=_.split(":").map(Number),Pe=new Date(Date.UTC(F,se-1,J,xe,ye,0)),De=5.5*60*60*1e3;v=Math.floor((Pe.getTime()-De)/1e3)}else v=p.timestamp>1e10?Math.floor(p.timestamp/1e3):p.timestamp;return{time:v,open:parseFloat(p.open),high:parseFloat(p.high),low:parseFloat(p.low),close:parseFloat(p.close),volume:parseInt(p.volume)||0}})),console.log(` [SEARCH CHART] Chart ready: ${u.length} candles for ${E}`),bh(u),i("journal")}catch(y){console.error(" [SEARCH CHART] Error:",y),bh([])}finally{Io(!1)}},[Cn,Mi]);g.useEffect(()=>{if(!Cn||a!=="journal")return;const y=setTimeout(()=>{console.log(` [AUTO-FETCH] Triggering auto-fetch for ${Cn}`),Cc("search"),Bn()},500);return()=>clearTimeout(y)},[Cn,a,Bn]),g.useEffect(()=>{!Cn||!sn||a!=="journal"||(console.log(" [TOKEN-REFRESH] Journal chart refetching with new Angel One token"),Bn())},[sn,Cn,a,Bn]);const _s=g.useCallback(async(y,E)=>{try{if(console.log(` [HEATMAP FETCH] Starting fetch for ${y} on ${E}`),q.current){try{q.current.remove()}catch{}q.current=null,fe.current=null,Se.current=null,ve.current=null,Ge.current=null}if(!y){console.warn(" [HEATMAP FETCH] No symbol provided"),va(!1);return}if(!E){console.warn(" [HEATMAP FETCH] No date provided"),va(!1);return}va(!0),Eh([]);let M="";if(typeof E=="string")M=E;else if(E&&typeof E.getFullYear=="function"){const v=E;M=`${v.getFullYear()}-${String(v.getMonth()+1).padStart(2,"0")}-${String(v.getDate()).padStart(2,"0")}`}else M=String(E);Th(y),yu(M),console.log(` [HEATMAP SYNC] Updated header - Date: ${M}, Symbol: ${y}`);let z=y.replace(/^(NSE|BSE):/,"").replace(/-INDEX$/,"").replace(/-EQ$/,"");const K=z.split(" ");if(K.length>1){const v=K[0];v==="NIFTY"?z="NIFTY50":["SENSEX","BANKNIFTY","FINNIFTY","MIDCPNIFTY"].includes(v)&&(z=v)}const G=rr[z];if(console.log(` [HEATMAP FETCH] Symbol: ${z}, Token: ${G==null?void 0:G.token}`),!G){console.warn(` [HEATMAP FETCH] No token for: ${z}`),va(!1);return}const $=rp(na),ae={exchange:G.exchange,symbolToken:G.token,interval:$,date:E};console.log(" [HEATMAP FETCH] API Request:",ae);const c=await fetch(ha("/api/angelone/historical"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ae)});if(!c.ok){const v=await c.text();throw console.error(` [HEATMAP FETCH] API Error ${c.status}: ${v}`),new Error(`Failed to fetch heatmap chart data: ${c.status}`)}const u=await c.json();let p=[];u.success&&u.candles&&Array.isArray(u.candles)&&(p=u.candles.map(v=>{let k;if(typeof v.timestamp=="string"){const[_,F]=v.timestamp.split(" "),[se,J,xe]=_.split("-").map(Number),[ye,Pe]=F.split(":").map(Number),De=new Date(Date.UTC(se,J-1,xe,ye,Pe,0)),Ve=5.5*60*60*1e3;k=Math.floor((De.getTime()-Ve)/1e3)}else k=v.timestamp>1e10?Math.floor(v.timestamp/1e3):v.timestamp;return{time:k,open:parseFloat(v.open),high:parseFloat(v.high),low:parseFloat(v.low),close:parseFloat(v.close),volume:parseInt(v.volume)||0}})),console.log(` [HEATMAP FETCH] Chart ready: ${p.length} candles for ${z} on ${E}`),Eh(p);try{const v=Dl();let k,_=null;if(v&&(k=await fetch(ha(`/api/user-journal/${v}/${M}`)),k.ok)){const F=await k.json();F.tradeHistory&&Array.isArray(F.tradeHistory)&&(_=F,console.log(` [HEATMAP FETCH] Loaded ${F.tradeHistory.length} trades from user data for markers`))}if(!_&&(k=await fetch(ha(`/api/journal/${M}`)),k.ok)){const F=await k.json();F.tradeHistory&&Array.isArray(F.tradeHistory)&&(_=F,console.log(` [HEATMAP FETCH] Loaded ${F.tradeHistory.length} trades from demo data for markers`))}_!=null&&_.tradeHistory&&Array.isArray(_.tradeHistory)?L(_.tradeHistory):(console.warn(" [HEATMAP FETCH] No trade history found"),L([]))}catch(v){console.warn(" [HEATMAP FETCH] Could not fetch journal data for markers:",v),L([])}Cc("heatmap")}catch(M){console.error(" [HEATMAP FETCH] Error:",M),Eh([])}finally{va(!1)}},[na]);g.useEffect(()=>{if(Bs&&Bs.length>0){const y=Bs[Bs.length-1];Pt({open:y.open,high:y.high,low:y.low,close:y.close,change:y.close-y.open,changePercent:y.open>0?(y.close-y.open)/y.open*100:0,time:y.time}),console.log(" [HEATMAP] OHLC loaded, showing latest candle")}else Pt(null)},[Bs]),g.useEffect(()=>{ht.current=Bs},[Bs]),g.useEffect(()=>{da==="heatmap"&&ua&&xu&&(console.log(` [HEATMAP TIMEFRAME] Changed to ${yd(na)} - re-fetching chart for ${ua}`),_s(xu,ua))},[na,da,_s]),g.useEffect(()=>{if(qr&&qr.length>0){const y=qr[qr.length-1];gu({open:y.open,high:y.high,low:y.low,close:y.close,change:y.close-y.open,changePercent:y.open>0?(y.close-y.open)/y.open*100:0,time:y.time}),console.log(" JOURNAL OHLC: 1-minute candles loaded, showing latest candle")}else gu(null)},[qr]),g.useEffect(()=>{if(a!=="journal"){io.current&&(io.current.close(),io.current=null,pu(!1),ip(null),console.log(" [SSE] Disconnected from live stream (tab change)"));return}},[a]),g.useEffect(()=>{if(a!=="journal")return;let y;if(da==="search"){const G=$t(Cn);y=rr[G],console.log(` [SSE SEARCH MODE] Using selectedJournalSymbol: ${Cn}  ${G}, Token: ${y==null?void 0:y.token}`)}else if(Ro)y={token:Ro.token,exchange:Ro.exchange,tradingSymbol:Ro.tradingSymbol},console.log(" [SSE HEATMAP MODE] Using dynamically selected instrument:",Ro);else{const G=$t(Cn);y=rr[G],console.log(" [SSE FALLBACK] Using hardcoded token mapping for:",G)}if(!y){console.warn(` [SSE] No token found for symbol: ${Cn} (mode: ${da})`);return}io.current&&(io.current.close(),io.current=null);const E=qr&&qr.length>0?qr[qr.length-1]:void 0,M=parseInt($l||"1")*60;let z=ha(`/api/angelone/live-stream-ws?symbol=${y.tradingSymbol}&symbolToken=${y.token}&exchange=${y.exchange}&tradingSymbol=${y.tradingSymbol}&interval=${M}`);E&&E.close>0&&(z+=`&open=${E.open}&high=${E.high}&low=${E.low}&close=${E.close}&volume=${E.volume||0}`,console.log(" [SSE] Initial fallback OHLC:",{open:E.open,high:E.high,low:E.low,close:E.close})),console.log(` [SSE] Connecting with timeframe: ${$l}min (${M}s candle interval)`);const K=new EventSource(z);return io.current=K,K.onopen=()=>{console.log(" [SSE] Connected to:",z),pu(!0)},K.onmessage=G=>{try{console.log(" [SSE MESSAGE] Raw data:",G.data.substring(0,100));const $=JSON.parse(G.data);if(console.log(" [PRICE] LTP:",$.close,"Open:",$.open,"Time:",$.time),$.close>0&&kn.length>0&&(Ta(ae=>ae.map(c=>{if(c.isOpen&&c.symbol===Cn.replace("NSE:","").replace("-INDEX","")){const u=($.close-c.entryPrice)*c.quantity,p=($.close-c.entryPrice)/c.entryPrice*100;return{...c,currentPrice:$.close,pnl:u,pnlPercent:p}}return c})),cr&&Cn.includes(cr)&&Pi($.close)),Ja.current&&ys.current&&$.close>0){const ae=parseInt($l||"1")*60;console.log(` [INTERVAL] Using ${$l}min = ${ae}s for countdown`);const c=mi.current;if(!c||c.length===0){console.warn(" Chart data ref is empty, skipping update");return}const u=c[c.length-1];if(!u)return;const p=Math.floor($.time/ae)*ae,v=Math.floor(u.time/ae)*ae,k=Math.floor(Date.now()/1e3),_=p+ae,F=Math.max(0,_-k),se=Math.floor(F/60),J=F%60,xe=$.isMarketOpen===!0||$.marketStatus==="live"||$.marketStatus==="delayed",ye=xe?se>0?`${se}:${J.toString().padStart(2,"0")}`:`${F}s`:"";if(Ja.current&&(ap.current&&Ja.current.removePriceLine(ap.current),ap.current=Ja.current.createPriceLine({price:$.close,color:$.close>=$.open?"#16a34a":"#dc2626",lineWidth:1,lineStyle:2,axisLabelVisible:!0,title:xe?ye:""})),ip({ltp:$.close,countdown:{remaining:xe?F:0,total:ae,formatted:xe?ye:"Market Closed"},currentCandle:{time:$.time,open:$.open,high:$.high,low:$.low,close:$.close,volume:$.volume||0},isMarketOpen:xe}),p===v){const Pe=u.open,De=Math.max(u.high,$.close),Ve=Math.min(u.low,$.close),Be=$.close,et=Pe>0?(Be-Pe)/Pe*100:0;window.journalLastFinalizedOHLC={open:Pe,high:De,low:Ve,close:Be,time:u.time},Ch({open:Pe,high:De,low:Ve,close:Be,change:et}),setTimeout(()=>{var Xe;try{(Xe=Ja.current)==null||Xe.update({time:u.time,open:Pe,high:De,low:Ve,close:Be})}catch(Me){console.warn(" Chart update skipped (time conflict)",Me)}},50),console.log(` [UPDATE] Same candle interval, OHLC: O${Pe} H${De} L${Ve} C${Be}`)}else if(p>v&&xe){console.log(" [NEW CANDLE] New interval detected, adding new candle to chart (market is open)");const Pe=window.journalLastFinalizedOHLC,De=(Pe==null?void 0:Pe.open)||u.open,Ve=(Pe==null?void 0:Pe.high)||u.high,Be=(Pe==null?void 0:Pe.low)||u.low,et=(Pe==null?void 0:Pe.close)||u.close;console.log(` [USING SAVED OHLC] From last update: O${De} H${Ve} L${Be} C${et} (NOT from new candle with close: ${$.close})`);const Xe={time:p,open:$.close,high:$.close,low:$.close,close:$.close,volume:$.volume||0};console.log(` [NEW CANDLE INIT] Initialized O/H/L/C all to ${$.close} (will update H/L with future prices)`);const Me=(()=>{const Ze=mi.current||[];if(Ze.some(Gt=>Gt.time===p))return Ze;const jt=[...Ze];return jt.length>0&&(jt[jt.length-1]={...jt[jt.length-1],open:De,high:Ve,low:Be,close:et}),jt.push(Xe),jt})();bh(Me),mi.current=Me;let _e=null;if(ys.current)try{_e=ys.current.timeScale().getVisibleRange()}catch(Ze){console.warn(" Could not save viewport range",Ze)}setTimeout(()=>{if(Ja.current&&ys.current)try{if(Ja.current.update({time:u.time,open:De,high:Ve,low:Be,close:et}),console.log(` [CANDLE FINALIZED] Previous candle locked with OHLC: O${De} H${Ve} L${Be} C${et}`),Ja.current.update({time:p,open:Xe.open,high:Xe.high,low:Xe.low,close:Xe.close}),console.log(` [CANDLE ADDED] New candle: O${Xe.open} H${Xe.high} L${Xe.low} C${Xe.close}`),_e)try{ys.current.timeScale().setVisibleRange(_e),console.log(" [VIEWPORT RESTORED] Smooth transition complete")}catch(Ze){console.warn(" Viewport restoration skipped",Ze)}}catch(Ze){console.warn(" Candle update skipped (time conflict)",Ze)}},20);const ze=Xe.open>0?(Xe.close-Xe.open)/Xe.open*100:0;Ch({open:Xe.open,high:Xe.high,low:Xe.low,close:Xe.close,change:ze}),Sg.current&&(Sg.current.textContent=`${c.length+1}`),console.log(` [CANDLE ADDED] Time: ${new Date(p*1e3).toLocaleTimeString()} OHLC: O${Xe.open} H${Xe.high} L${Xe.low} C${Xe.close}`)}if(Sh.current){const Pe=F/ae*100;Sh.current.style.width=`${Pe}%`,Sh.current.style.transformOrigin="right center",Sh.current.title=`${F}s / ${ae}s`}}else console.log(" Chart not ready yet:",{hasRef:!!Ja.current,hasChart:!!ys.current})}catch($){console.error(" SSE parse error:",$ instanceof Error?$.message:String($))}},K.onerror=G=>{console.error(" [SSE ERROR]:",G),pu(!1)},()=>{K&&K.close(),pu(!1)}},[a,Cn,$l,da]),g.useEffect(()=>{mi.current=qr},[qr]),g.useEffect(()=>{if(a!=="journal"){if(ys.current){try{ys.current.remove()}catch{}ys.current=null,Ja.current=null,bd.current=null,Uf.current=null}return}if(ao.current&&!(!qr||qr.length===0))return console.log(` Rendering chart with ${qr.length} candles`),ao.current.innerHTML="",requestAnimationFrame(()=>{if(ao.current)try{const y=ao.current.clientWidth||800,E=ao.current.clientHeight||400;console.log(" Chart container dimensions:",{containerWidth:y,containerHeight:E});const M=JF(ao.current,{layout:{background:{type:E2.Solid,color:"#ffffff"},textColor:"#1f2937"},grid:{vertLines:{color:"#f3f4f6",style:1},horzLines:{color:"#f3f4f6",style:1}},crosshair:{mode:1,vertLine:{color:"#9ca3af",width:1,style:2,labelBackgroundColor:"#f3f4f6"},horzLine:{color:"#9ca3af",width:1,style:2,labelBackgroundColor:"#f3f4f6"}},rightPriceScale:{visible:!0,borderVisible:!0,borderColor:"#e5e7eb",scaleMargins:{top:.1,bottom:.25},autoScale:!0},timeScale:{visible:!0,borderVisible:!0,borderColor:"#e5e7eb",timeVisible:!0,secondsVisible:!1,barSpacing:12,minBarSpacing:4,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,tickMarkFormatter:J=>{const xe=new Date(J*1e3),ye=new Date(xe.getTime()+330*60*1e3),Pe=ye.getUTCHours().toString().padStart(2,"0"),De=ye.getUTCMinutes().toString().padStart(2,"0");return`${Pe}:${De}`}},localization:{timeFormatter:J=>{const xe=new Date(J*1e3),ye=new Date(xe.getTime()+330*60*1e3),Pe=ye.getUTCHours().toString().padStart(2,"0"),De=ye.getUTCMinutes().toString().padStart(2,"0"),Ve=ye.getUTCDate().toString().padStart(2,"0"),Be=(ye.getUTCMonth()+1).toString().padStart(2,"0");return`${Ve}/${Be} ${Pe}:${De} IST`}},width:y,height:E}),z=M.addSeries(r9,{upColor:"#16a34a",downColor:"#dc2626",borderUpColor:"#15803d",borderDownColor:"#b91c1c",wickUpColor:"#15803d",wickDownColor:"#b91c1c"}),K=M.addSeries(n9,{priceFormat:{type:"volume"},priceScaleId:"",color:"rgba(22, 163, 74, 0.3)"});K.priceScale().applyOptions({scaleMargins:{top:.85,bottom:0}});const G=M.addSeries(t9,{color:"#0066ff",lineWidth:2,priceLineVisible:!1,lastValueVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4}),$=M.addSeries(t9,{color:"#ff6600",lineWidth:2,priceLineVisible:!1,lastValueVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4});ys.current=M,Ja.current=z,bd.current=G,Uf.current=$,kg.current=K,M.subscribeCrosshairMove(J=>{if(!J.time||!J.point){const ye=qr[qr.length-1];if(ye){const Pe=qr[qr.length-2],De=(Pe==null?void 0:Pe.close)||ye.open,Ve=ye.close-De,Be=De>0?Ve/De*100:0;gu({open:ye.open,high:ye.high,low:ye.low,close:ye.close,change:Ve,changePercent:Be,time:ye.time})}return}const xe=J.seriesData.get(z);if(xe&&"open"in xe){const ye=[...qr].sort((Xe,Me)=>Xe.time-Me.time),Pe=ye.findIndex(Xe=>Xe.time===J.time),De=Pe>0?ye[Pe-1]:null,Ve=(De==null?void 0:De.close)||xe.open,Be=xe.close-Ve,et=Ve>0?Be/Ve*100:0;gu({open:xe.open,high:xe.high,low:xe.low,close:xe.close,change:Be,changePercent:et,time:J.time})}});const ae=[...qr].sort((J,xe)=>J.time-xe.time),c=ae.map(J=>({time:J.time,open:J.open,high:J.high,low:J.low,close:J.close}));if(z.setData(c),ae.length>0){const J=ae[ae.length-1],xe=ae.length>1?ae[ae.length-2]:null,ye=(xe==null?void 0:xe.close)||J.open,Pe=J.close-ye,De=ye>0?Pe/ye*100:0;gu({open:J.open,high:J.high,low:J.low,close:J.close,change:Pe,changePercent:De,time:J.time})}const u=ae.map(J=>({time:J.time,value:J.volume||0,color:J.close>=J.open?"rgba(38, 166, 154, 0.5)":"rgba(239, 83, 80, 0.5)"}));K.setData(u);const p=ae.map(J=>J.close),v=Wt(p,12),k=Wt(p,26),_=v.map((J,xe)=>{var ye;return{time:(ye=ae[xe+11])==null?void 0:ye.time,value:J}}).filter(J=>J.time),F=k.map((J,xe)=>{var ye;return{time:(ye=ae[xe+25])==null?void 0:ye.time,value:J}}).filter(J=>J.time);_.length>0&&(G.setData(_),kh(J=>{var xe;return{...J,ema12:((xe=_[_.length-1])==null?void 0:xe.value)||null}})),F.length>0&&($.setData(F),kh(J=>{var xe;return{...J,ema26:((xe=F[F.length-1])==null?void 0:xe.value)||null}})),setTimeout(()=>{ys.current&&(ys.current.timeScale().fitContent(),ys.current.timeScale().applyOptions({rightOffset:10}))},100);const se=()=>{ao.current&&ys.current&&ys.current.applyOptions({width:ao.current.clientWidth})};window.addEventListener("resize",se)}catch(y){console.error(" Error rendering journal chart:",y instanceof Error?y.message:String(y)),y instanceof Error&&console.error("Stack:",y.stack),ao.current&&(ao.current.innerHTML=`
            <div style="display: flex; align-items: center; justify-center; height: 100%; font-size: 12px; color: #e74c3c;">
              Chart render error: ${y instanceof Error?y.message:"Unknown error"}
            </div>
          `)}}),()=>{ao.current&&ys.current&&window.removeEventListener("resize",()=>{})}},[a,Cn,Mi,qr]),g.useEffect(()=>{if(a!=="journal"){if(q.current){try{q.current.remove()}catch{}q.current=null,fe.current=null}return}if(D.current&&!(!Bs||Bs.length===0))return console.log(` [HEATMAP CHART] Rendering with ${Bs.length} candles for date: ${ua}`),requestAnimationFrame(()=>{if(D.current)try{if(q.current){try{q.current.remove()}catch{}q.current=null,fe.current=null}D.current.innerHTML="";const y=D.current.clientWidth||800,E=D.current.clientHeight||400;console.log(" [HEATMAP CHART] Container dimensions:",{containerWidth:y,containerHeight:E});const M=JF(D.current,{layout:{background:{type:E2.Solid,color:"#ffffff"},textColor:"#1f2937"},grid:{vertLines:{color:"#f3f4f6",style:1},horzLines:{color:"#f3f4f6",style:1}},crosshair:{mode:1,vertLine:{color:"#9ca3af",width:1,style:2,labelBackgroundColor:"#f3f4f6"},horzLine:{color:"#9ca3af",width:1,style:2,labelBackgroundColor:"#f3f4f6"}},rightPriceScale:{visible:!0,borderVisible:!0,borderColor:"#e5e7eb",scaleMargins:{top:.1,bottom:.25},autoScale:!0},timeScale:{visible:!0,borderVisible:!0,borderColor:"#e5e7eb",timeVisible:!0,secondsVisible:!1,barSpacing:12,minBarSpacing:4,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,tickMarkFormatter:u=>{const p=new Date(u*1e3),v=new Date(p.getTime()+330*60*1e3),k=v.getUTCHours().toString().padStart(2,"0"),_=v.getUTCMinutes().toString().padStart(2,"0");return`${k}:${_}`}},localization:{timeFormatter:u=>{const p=new Date(u*1e3),v=new Date(p.getTime()+330*60*1e3),k=v.getUTCHours().toString().padStart(2,"0"),_=v.getUTCMinutes().toString().padStart(2,"0"),F=v.getUTCDate().toString().padStart(2,"0"),se=(v.getUTCMonth()+1).toString().padStart(2,"0");return`${F}/${se} ${k}:${_} IST`}},width:y,height:E}),z=M.addSeries(r9,{upColor:"#16a34a",downColor:"#dc2626",borderUpColor:"#15803d",borderDownColor:"#b91c1c",wickUpColor:"#15803d",wickDownColor:"#b91c1c"}),K=M.addSeries(n9,{priceFormat:{type:"volume"},priceScaleId:"",color:"rgba(147, 51, 234, 0.3)"});K.priceScale().applyOptions({scaleMargins:{top:.85,bottom:0}}),q.current=M,fe.current=z,M.subscribeCrosshairMove(u=>{if(!u.time||!u.point){const v=Bs[Bs.length-1];if(v){const k=Bs[Bs.length-2],_=(k==null?void 0:k.close)||v.open,F=v.close-_,se=_>0?F/_*100:0;Pt({open:v.open,high:v.high,low:v.low,close:v.close,change:F,changePercent:se,time:v.time})}return}const p=u.seriesData.get(z);if(p&&"open"in p){const v=[...Bs].sort((xe,ye)=>xe.time-ye.time),k=v.findIndex(xe=>xe.time===u.time),_=k>0?v[k-1]:null,F=(_==null?void 0:_.close)||p.open,se=p.close-F,J=F>0?se/F*100:0;Pt({open:p.open,high:p.high,low:p.low,close:p.close,change:se,changePercent:J,time:u.time})}});const G=[...Bs].sort((u,p)=>u.time-p.time),$=G.map(u=>({time:u.time,open:u.open,high:u.high,low:u.low,close:u.close})),ae=G.map(u=>({time:u.time,value:u.volume||0,color:u.close>=u.open?"rgba(147, 51, 234, 0.4)":"rgba(220, 38, 38, 0.4)"}));if(z.setData($),K.setData(ae),S&&S.length>0){const u=[];let p=xu.replace(/^(NSE|BSE):/,"").replace(/-INDEX$/,"").replace(/-EQ$/,"");if(console.log(` [HEATMAP MARKERS] Processing ${S.length} trades, filtering for symbol: ${p}...`),S.forEach(v=>{let F=(v.symbol||"").split(" ")[0];if(F==="NIFTY"&&(F="NIFTY50"),F!==p){console.log(` [HEATMAP MARKERS] Skipping trade for ${F} (current chart: ${p})`);return}const se=v.time||"";if(!se){console.warn(` [HEATMAP MARKERS] Trade has no time: ${JSON.stringify(v)}`);return}console.log(` [HEATMAP MARKERS] Processing trade: ${JSON.stringify(v)}`);try{const J=se.match(/(\d+):(\d+)(?::(\d+))?\s*(AM|PM)?/i);if(!J){console.warn(` [HEATMAP MARKERS] Could not parse time: "${se}"`);return}let xe=parseInt(J[1]);const ye=parseInt(J[2]),Pe=J[3]?parseInt(J[3]):0,De=J[4]?J[4].toUpperCase():null;De==="PM"&&xe!==12&&(xe+=12),De==="AM"&&xe===12&&(xe=0),console.log(`  [HEATMAP MARKERS] Trade "${v.order}" at ${se} -> ${xe}:${ye} IST`);const Ve=G.find(Be=>{const et=new Date(Be.time*1e3),Xe=new Date(et.getTime()+330*60*1e3),Me=Xe.getUTCHours(),_e=Xe.getUTCMinutes();return Me===xe&&_e===ye});if(Ve){const Be=v.order==="BUY";u.push({time:Ve.time,position:Be?"belowBar":"aboveBar",color:Be?"#16a34a":"#dc2626",shape:Be?"arrowUp":"arrowDown",text:`${v.order}`}),console.log(` [HEATMAP MARKERS] Matched "${v.order}" at ${se} to candle time ${Ve.time}`)}else console.warn(` [HEATMAP MARKERS] No matching candle found for time ${se} (${xe}:${ye})`)}catch(J){console.error(` [HEATMAP MARKERS] Parse error for "${se}":`,J)}}),u.length>0){Qe.current=k_e(z),Qe.current.setMarkers(u);const v=S.filter(_=>_.order==="BUY").length,k=S.filter(_=>_.order==="SELL").length;console.log(` [HEATMAP] Successfully added ${u.length} trade markers (${v} BUY, ${k} SELL)`)}else console.warn(` [HEATMAP] No markers created despite ${S.length} trades`)}setTimeout(()=>{q.current&&(q.current.timeScale().fitContent(),q.current.timeScale().applyOptions({rightOffset:10}))},100);const c=()=>{D.current&&q.current&&q.current.applyOptions({width:D.current.clientWidth})};window.addEventListener("resize",c),console.log(" [HEATMAP CHART] Successfully rendered")}catch(y){console.error(" [HEATMAP CHART] Error rendering:",y instanceof Error?y.message:String(y))}}),()=>{D.current&&q.current&&window.removeEventListener("resize",()=>{})}},[a,Bs,S,ua]);const bs=g.useCallback(()=>{if(!cn||cn.length===0||!qr||qr.length===0)return console.log(" MARKER ABORT: No trade or chart data",{trades:(cn==null?void 0:cn.length)||0,candles:(qr==null?void 0:qr.length)||0}),[];console.log(" MARKER START: Processing",cn.length,"trades against",qr.length,"candles");const y=[];return cn.forEach((E,M)=>{try{const z=E.time;if(!z){console.log(` Trade #${M+1}: No time found`);return}const[K,G]=z.split(" "),[$,ae,c]=K.split(":").map(Number);let u=$;(G==null?void 0:G.toUpperCase())==="PM"&&$!==12?u=$+12:(G==null?void 0:G.toUpperCase())==="AM"&&$===12&&(u=0);const p=u*60+ae;console.log(` Trade #${M+1}: ${z}  24h: ${u}:${String(ae).padStart(2,"0")} (${p}min) [${E.order}]`);let v=-1,k=1/0;qr.forEach((se,J)=>{const xe=new Date(se.time*1e3),Pe=(xe.getUTCHours()*60+xe.getUTCMinutes()+330)%1440,De=Math.abs(Pe-p);De<k&&(k=De,v=J)});const _=parseInt(Mi)||1,F=Math.max(Math.ceil(_/2),1);if(v!==-1&&k<=F){const se=qr[v],J=E.order==="BUY"?se.low:se.high;y.push({candleIndex:v,price:E.price||J,type:E.order.toLowerCase(),symbol:E.symbol,quantity:E.qty,time:E.time,pnl:E.pnl}),console.log(` Marker added: ${E.order} @ ${E.time}  Candle #${v} (diff: ${k}min)`)}else console.log(` No matching candle for trade @ ${E.time} (closest diff: ${k}min, tolerance: ${F}min)`)}catch(z){console.error("Error parsing trade for markers:",E,z)}}),console.log(" Generated trade markers:",y.length,"markers from",cn.length,"trades (TIME-BASED matching)"),y},[cn,qr,Mi]);g.useEffect(()=>{if(a!=="journal"||!Ja.current||!ys.current||!pd||!qr||qr.length===0||!cn||cn.length===0)return;const y=bs();console.log(" MARKER DEBUG (TIME-BASED) - Trades:",cn.length,"Chart candles:",qr.length),console.log("  - Generated markers:",y.length,"Visible:",pd),y.forEach((E,M)=>{console.log(`   [${M}] Candle#${E.candleIndex} TIME: ${E.time} - ${E.type.toUpperCase()} @ ${E.price}`)});try{if(y.length>0){const E=y.map((M,z)=>{const K=qr[M.candleIndex],G=K==null?void 0:K.time,$={time:G,position:M.type==="buy"?"belowBar":"aboveBar",color:M.type==="buy"?"#22c55e":"#ef4444",shape:M.type==="buy"?"arrowUp":"arrowDown",text:`${M.type==="buy"?"BUY":"SELL"} ${M.time}`};return console.log(`   [${z}] time:${G} ${$.shape} pos:${$.position} text:${$.text}`),$}).filter((M,z)=>{const K=M.time!==void 0;return K||console.log(`   Filtered marker ${z} - undefined time`),K});E.sort((M,z)=>M.time-z.time),console.log(`   Final markers to apply: ${E.length}`),console.log("  Markers disabled in this version")}else console.log(" No markers to apply - clearing")}catch(E){console.error("  Marker Error:",E)}},[a,qr,cn,bs,pd,Cn]);const[Jr,oo]=g.useState(()=>typeof window<"u"&&localStorage.getItem("tradingNotes")||""),[Lt,sl]=g.useState(!1),[wd,Nd]=g.useState(Jr),[al,zl]=g.useState(()=>{if(typeof window<"u"){const y=localStorage.getItem("tradingTags");return y?JSON.parse(y):[]}return[]}),[op,Ph]=g.useState(!1),[il,Vl]=g.useState(()=>{if(typeof window<"u"){const y=localStorage.getItem("tradingDailyFactors");return y?JSON.parse(y):[]}return[]}),[zf,ql]=g.useState(!1),lp={financial:{name:"Financial",color:"amber",maxSelections:3,tags:["debt","money shortage","total risk high","borrowed money","unexpected expense","loan pressure"]},physical:{name:"Physical & Sleep",color:"orange",maxSelections:3,tags:["poor sleep","exhausted","hungry","sick","hangover","jet lag"]},stress:{name:"Work & Stress",color:"red",maxSelections:3,tags:["work stress","family tension","relationship issues","health anxiety","deadline pressure","personal crisis"]},distraction:{name:"Distraction & Calls",color:"yellow",maxSelections:3,tags:["telegram calls","youtube calls","social media","whatsapp messages","family calls","others suggestions"]}},Yn=y=>{Vl(E=>{const M=E.includes(y)?E.filter(z=>z!==y):[...E,y];return typeof window<"u"&&localStorage.setItem("tradingDailyFactors",JSON.stringify(M)),M})},Za=()=>{Vl([]),typeof window<"u"&&localStorage.setItem("tradingDailyFactors",JSON.stringify([]))},[ei,Ah]=g.useState(()=>{if(typeof window<"u"){const y=localStorage.getItem("tradingIndicators");return y?JSON.parse(y):[]}return[]}),[cp,ol]=g.useState(()=>typeof window<"u"&&localStorage.getItem("indicatorTimeframe")||"5min"),[U1,jd]=g.useState(!1),[Sk,ax]=g.useState(!1),[Ag,ix]=g.useState(""),z1=["Moving Average","EMA","MACD","RSI","Stochastic","Bollinger Bands","ATR","Volume","ADX","Ichimoku","Fibonacci","Pivot Points","Price Action"],V1=[{value:"1min",label:"1 Min"},{value:"5min",label:"5 Min"},{value:"15min",label:"15 Min"},{value:"30min",label:"30 Min"},{value:"1h",label:"1 Hour"},{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"}],dp=y=>{Ah(E=>{const M=E.includes(y)?E.filter(z=>z!==y):[...E,y];return typeof window<"u"&&localStorage.setItem("tradingIndicators",JSON.stringify(M)),M})},Ev=()=>{Ah([]),typeof window<"u"&&localStorage.setItem("tradingIndicators",JSON.stringify([]))},[Ec,En]=g.useState(!1),[pi,ba]=g.useState(!1),[Di,Do]=g.useState(!1),_h={psychology:{name:"Psychology",color:"red",maxSelections:2,tags:["fomo","greedy","overtrading","hero zero","fear","euphoric","revenge trading","disciplined","patient","confident","anxious","impulsive"]},strategy:{name:"Strategy",color:"blue",maxSelections:2,tags:["planned","unplanned","scalping","swing trading","intraday","position","btst","breakout","trend following","counter trend","momentum","mean reversion"]},market:{name:"Market Conditions",color:"green",maxSelections:2,tags:["trending","sideways","volatile","low volume","high volume","news driven","technical setup","gap up","gap down","pre market","post market","expiry day"]},timeframe:{name:"Timeframe",color:"purple",maxSelections:1,tags:["short terms","intraday","swing","investment","long term"]},setup:{name:"Trade Setup",color:"orange",maxSelections:2,tags:["no setup","blind trades","technical analysis","fundamental analysis","news based","price action","indicator based","pattern based"]}},Pa={maxTotalTags:8},_g=()=>Object.values(_h).flatMap(y=>y.tags),$o=y=>{const E=_g();return y.filter(M=>E.includes(M))},ox=y=>{const E=$o(al),M=E.includes(y)?E.filter(K=>K!==y):[...E,y];if(!E.includes(y)){if(M.length>Pa.maxTotalTags){alert(`Maximum ${Pa.maxTotalTags} tags allowed`);return}const K=Tv(y);if(K&&M.filter($=>K.tags.includes($)).length>K.maxSelections){alert(`Maximum ${K.maxSelections} ${K.name.toLowerCase()} tags allowed`);return}}const z=$o(M);zl(z),localStorage.setItem("tradingTags",JSON.stringify(z))},Tv=y=>{for(const[E,M]of Object.entries(_h))if(M.tags.includes(y))return{key:E,...M};return null},[lx,ll]=g.useState(new Date),[lo,Sd]=g.useState(null),[vu,bu]=g.useState(()=>{if(typeof window<"u"){const y=localStorage.getItem("calendarData");return y?JSON.parse(y):{}}return{}}),[Ot,Tc]=g.useState(null),[Kr,wu]=g.useState({pnl:!0,trend:!0,fomo:!0,winRate:!0,streak:!0,overtrading:!1,topTags:!1,aiAnalysis:!1,planned:!1});g.useEffect(()=>{const y=localStorage.getItem("magicBarPrefs");if(y)try{const E=JSON.parse(y);wu(E)}catch{console.log("Could not load Magic Bar preferences")}},[]);const Ig=g.useRef(null),up=g.useRef(null),cx=g.useRef(null),$i=g.useRef(null);g.useRef(null);const dx=g.useRef(null),[Lo,Nu]=g.useState(0),[kd,co]=g.useState(0);g.useEffect(()=>{if(!Ot||Ot.tag!=="fomo"&&Ot.tag!=="overtrading"&&Ot.tag!=="planned")return;const y=$i.current;if(!y)return;const E=y.querySelector(".overflow-x-auto");if(!E){const G=setTimeout(()=>{const $=y.querySelector(".overflow-x-auto");$&&K($)},10);return()=>clearTimeout(G)}let M=null;const z=()=>{Nu(G=>G+1),M!==null&&cancelAnimationFrame(M),M=requestAnimationFrame(()=>{Nu(G=>G+1),M=null})},K=G=>{G.addEventListener("scroll",z,{passive:!0}),window.addEventListener("resize",z,{passive:!0}),console.log(" Attached ULTRA-FAST scroll listener to heatmap")};return K(E),()=>{E.removeEventListener("scroll",z),window.removeEventListener("resize",z),M!==null&&cancelAnimationFrame(M)}},[Ot]);const[ux,Pv]=g.useState(null);g.useEffect(()=>{if(!ux||ux.tag!=="fomo")return;const y=dx.current;if(!y)return;const E=y;if(!E)return;let M=null;const z=()=>{co(K=>K+1),M!==null&&cancelAnimationFrame(M),M=requestAnimationFrame(()=>{co(K=>K+1),M=null})};return E.addEventListener("scroll",z,{passive:!0}),window.addEventListener("resize",z,{passive:!0}),console.log(" Attached scroll listener to share dialog heatmap"),()=>{E.removeEventListener("scroll",z),window.removeEventListener("resize",z),M!==null&&cancelAnimationFrame(M)}},[ux]);const[Ua,Av]=g.useState(null),Cd=g.useRef(null),Ed=g.useRef(null),[q1,Ih]=g.useState(0);g.useEffect(()=>{if(!Ua||Ua.tag!=="fomo")return;const y=Ed.current;if(!y)return;const E=y.querySelector(".overflow-x-auto");if(!E){const G=setTimeout(()=>{const $=y.querySelector(".overflow-x-auto");$&&K($)},10);return()=>clearTimeout(G)}let M=null;const z=()=>{Ih(G=>G+1),M!==null&&cancelAnimationFrame(M),M=requestAnimationFrame(()=>{Ih(G=>G+1),M=null})},K=G=>{G.addEventListener("scroll",z,{passive:!0}),window.addEventListener("resize",z,{passive:!0}),console.log(" Attached scroll listener to report dialog heatmap")};return K(E),()=>{E.removeEventListener("scroll",z),window.removeEventListener("resize",z),M!==null&&cancelAnimationFrame(M)}},[Ua]);const[Mh,hp]=g.useState(null),[Vf,kk]=g.useState(null),[fp,_v]=g.useState(new Date().getFullYear()),[OI,H1]=g.useState(!1),[Ck,W1]=g.useState({}),[cl,Ek]=g.useState(null),[qf,Y1]=g.useState(()=>typeof window<"u"?localStorage.getItem("hasManuallyToggledMode")==="true":!1),sa=y=>{if(console.log(` Received heatmap data update: ${Object.keys(y).length} dates [Mode: ${Qr?"DEMO":"PERSONAL"}]`),Qr?(console.log(" Updating DEMO heatmap state"),el(y)):(console.log(" Updating PERSONAL heatmap state"),ya(y)),W1(y),!Qr&&Dl()&&!qf){const E=Object.values(y).some(M=>{var G,$;const z=((G=M==null?void 0:M.tradingData)==null?void 0:G.performanceMetrics)||(M==null?void 0:M.performanceMetrics),K=(($=M==null?void 0:M.tradingData)==null?void 0:$.tradeHistory)||(M==null?void 0:M.tradeHistory);return z&&z.netPnL!==void 0&&z.netPnL!==0||Array.isArray(K)&&K.length>0});!E&&Object.keys(y).length===0?(console.log(" No personal trades found - auto-switching to Demo mode"),tl(!0),localStorage.setItem("tradingJournalDemoMode","true"),setTimeout(()=>{if($i.current){const M=$i.current.querySelector('[style*="overflow"]');M&&(M.scrollLeft=M.scrollWidth,console.log(" Scrolled to latest data view"))}},500)):E||console.log(" Personal data exists but has no actual trade data (all zero P&L)")}},K1=y=>{console.log(" Date range changed:",y),Ek(y)},Oh=()=>{const y=Gs,E=Object.keys(y).length;if(!cl){const $=Object.fromEntries(Object.entries(y).filter(([ae,c])=>{var p;const u=((p=c==null?void 0:c.tradingData)==null?void 0:p.performanceMetrics)||(c==null?void 0:c.performanceMetrics);return((u==null?void 0:u.totalTrades)||0)>0}));return Object.keys($).length,$}const M={},z=cl.from.getTime(),K=cl.to.getTime();console.log(` Filtering ${E} dates by range: ${cl.from.toISOString().slice(0,10)} to ${cl.to.toISOString().slice(0,10)} [Mode: ${Qr?"DEMO":"PERSONAL"}]`),Object.keys(y).forEach($=>{var c;const ae=new Date($).getTime();if(isNaN(ae)){console.warn(` Could not parse date key: ${$}, skipping`);return}if(ae>=z&&ae<=K){const u=y[$],p=((c=u==null?void 0:u.tradingData)==null?void 0:c.performanceMetrics)||(u==null?void 0:u.performanceMetrics);((p==null?void 0:p.totalTrades)||0)>0&&(M[$]=u)}});const G=Object.keys(M).length;return console.log(` Filtered heatmap data: ${G} dates (from ${E} total) [Mode: ${Qr?"DEMO":"PERSONAL"}]`),G===0&&E>0&&(console.warn(` WARNING: Filtering dropped all ${E} entries! Check date key format compatibility.`),console.log("Sample keys:",Object.keys(y).slice(0,5))),M};g.useEffect(()=>{H1(!!(Mh&&Vf))},[Mh,Vf]);const[RI,G1]=g.useState(!1),X1=async()=>{if(Qr){console.log(" Auto-click only works in Personal mode");return}const y=Dl();if(!y){console.log(" No user ID found - cannot auto-click personal dates"),alert(" Please log in with your AWS account to use personal mode");return}G1(!0);try{console.log(` Auto-clicking personal dates for year ${fp}${Mh&&Vf?` (range: ${Mh.toLocaleDateString()} - ${Vf.toLocaleDateString()})`:""}...`);const E=await fetch(ha(`/api/user-journal/${y}/all`));if(!E.ok)throw new Error("Failed to fetch personal data");const M=await E.json();let z=Object.keys(M);if(Mh&&Vf){const ae=Mh.getTime(),c=Vf.getTime();z=z.filter(u=>{const p=new Date(u).getTime();return p>=ae&&p<=c}),console.log(` Filtered to ${z.length} dates within selected range`)}else z=z.filter(ae=>new Date(ae).getFullYear()===fp),console.log(` Filtered to ${z.length} dates for year ${fp}`);if(z.length===0){console.log(" No personal dates found for the selected period");return}const K=z.map(async ae=>{try{const c=await fetch(ha(`/api/user-journal/${y}/${ae}`));if(c.ok){let u=await c.json();if(u&&u.tradingData&&(u=u.tradingData,console.log(` Unwrapped AWS tradingData for ${ae}`)),u&&Object.keys(u).length>0)return{dateStr:ae,journalData:u}}}catch(c){console.error(` Error loading personal date ${ae}:`,c)}return null}),$=(await Promise.all(K)).filter(ae=>ae!==null);if($.length>0){const ae={...As};$.forEach(c=>{c&&(ae[c.dateStr]=c.journalData)}),ya(ae),bu(ae),localStorage.setItem("personalTradingDataByDate",JSON.stringify(ae)),console.log(` Auto-click completed! Loaded ${$.length} personal dates for heatmap colors. March 3,4,5 should now show colors!`)}}catch(E){console.error(" Error during auto-click:",E),console.log(" No personal data found - user will see demo heatmap")}finally{G1(!1)}};g.useEffect(()=>{a==="journal"&&dn(!0)},[a]),g.useEffect(()=>{(a==="journal"||a==="trading-home")&&(Qr?(console.log(" Demo mode - loading from AWS DynamoDB journal-database..."),(async()=>{try{const y=await fetch(ha("/api/journal/all-dates"));if(y.ok){const E=await y.json(),M=Object.keys(E).length;el(E),bu(E),console.log(` Loaded ${M} real dates from AWS`)}}catch(y){console.error(" Error loading from AWS:",y)}})()):Dl()?(console.log(" Personal mode - loading personal data instantly..."),X1()):qf?console.log(" No userId but user manually selected personal mode - respecting choice"):(console.log(" No userId found - auto-switching to Demo mode"),tl(!0),localStorage.setItem("tradingJournalDemoMode","true")))},[Qr,a,fp]);const Q1=y=>{let E=0;y.forEach(K=>{if(K.duration&&K.duration!=="-"){const G=K.duration.match(/(\d+)m\s*(\d+)s/);if(G){const $=parseInt(G[1]),ae=parseInt(G[2]);E+=$+ae/60}}});const M=Math.floor(E/60),z=Math.floor(E%60);return M>0?`${M}h ${z}m`:z>0?`${z}m`:"0m"},Tk=()=>{Nd(Jr),sl(!0)},Hl=async()=>{try{oo(wd),sl(!1);const y=ju(lo),M={...Gs[y]||{},tradingNotes:wd,selectedDailyFactors:il,selectedIndicators:ei,selectedTags:$o(al)};(await fetch(`/api/journal/${y}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(M)})).ok?(console.log(" Notes saved successfully"),Xa(K=>({...K,[y]:M}))):console.error(" Failed to save notes")}catch(y){console.error(" Error saving notes:",y)}},Iv=()=>{Nd(Jr),sl(!1)},J1=y=>{zl(E=>{const M=E.includes(y)?E.filter(K=>K!==y):[...E,y],z=$o(M);return typeof window<"u"&&localStorage.setItem("tradingTags",JSON.stringify(z)),z})},Rh=()=>{zl([]),Vl([]),Ah([])},ju=y=>{const E=y.getFullYear(),M=String(y.getMonth()+1).padStart(2,"0"),z=String(y.getDate()).padStart(2,"0");return`${E}-${M}-${z}`},Dh=y=>{if(!Array.isArray(y))return[];const E=new Map,M={NIFTY:"NIFTY50",BANKNIFTY:"BANKNIFTY",SENSEX:"SENSEX",NIFTYIT:"NIFTYIT",FINNIFTY:"FINNIFTY",MIDCPNIFTY:"MIDCPNIFTY",NIFTYINFRA:"NIFTYINFRA",NIFTY50:"NIFTY50"};y.forEach(K=>{var c;let G=K.symbol||K.tradingSymbol||"";if(!G)return;G=G.replace("NSE:","").replace("NFO:","").replace("MCX:","").replace("NCDEX:","").trim();const $=((c=G.match(/^([A-Z]+)/))==null?void 0:c[1])||"";if(!$)return;const ae=M[$.toUpperCase()]||$.toUpperCase();Object.values(M).includes(ae)&&(E.set(ae,(E.get(ae)||0)+1),console.log(` Mapped "${G}"  "${ae}"`))});const z=Array.from(E.entries()).sort(([,K],[,G])=>G-K).map(([K])=>K);return console.log(" Final extracted symbols:",z),z},Hf=async(y,E)=>{const M=ju(y);if(console.log(` DATE SELECTED: ${M}`),ys.current){try{ys.current.remove(),console.log(" Chart destroyed in handleDateSelect")}catch{}ys.current=null,Ja.current=null,bd.current=null,Uf.current=null}Sd(y),bh([]),Ch(null),oo(""),Nd(""),zl([]),Vl([]),Ah([]),Ya([]),Qa([]),lu([]),Bl(0),Rl(!0);const z=ju(y);if(E!==void 0){console.log(` Using FRESH AWS data from PersonalHeatmap for ${z}:`,E);let K=E;if(K&&K.tradingData&&(K=K.tradingData,console.log(" Unwrapped AWS tradingData:",K)),K&&Object.keys(K).length>0){console.log(" Populating UI with FRESH AWS data:",K);const G=K.notes||K.tradingNotes||K.notesContent||"";G&&(oo(G),Nd(G),console.log(" Loaded notes from AWS:",G));const $=K.tags||K.tradingTags||K.selectedTags||[];Array.isArray($)&&zl($);const ae=K.dailyFactors||K.selectedDailyFactors||[];Array.isArray(ae)&&(Vl(ae),console.log(" Loaded daily factors from AWS:",ae));const c=K.indicators||K.selectedIndicators||[];if(Array.isArray(c)&&(Ah(c),console.log(" Loaded indicators from AWS:",c),console.log(" Loaded tags from AWS:",$)),K.tradeHistory&&Array.isArray(K.tradeHistory)){Ya(K.tradeHistory),console.log(" Loaded trade history from AWS:",K.tradeHistory.length,"trades");const p=Dh(K.tradeHistory);if(p.length>0){lu(p),Bl(0),console.log(" Extracted traded symbols:",p);const v=p[0];Th(`NSE:${v}-INDEX`),yu(M),console.log(` [TRADE BOOK SELECT] Syncing heatmap header with date: ${M}, symbol: ${v}`),_s(`NSE:${v}-INDEX`,M)}}const u=K.images||K.tradingImages||[];Array.isArray(u)&&(Qa(u),console.log(" Loaded images from AWS:",u.length,"images")),console.log(" Successfully loaded all FRESH AWS data for:",z)}else console.log(` No AWS data for: ${z}`);Rl(!1);return}try{let K;const G=Dl();if(G?K=await fetch(ha(`/api/user-journal/${G}/${z}`)):K=await fetch(ha(`/api/journal/${z}`)),console.log(` Load response status: ${K.status}`,K),K.ok){let $=await K.json();if(console.log(" Journal data received:",$),$&&$.tradingData&&($=$.tradingData,console.log(" Unwrapped AWS tradingData:",$)),(!$||Object.keys($).length===0)&&G){console.log(` User journal empty for ${z}, falling back to shared demo data`);const ae=await fetch(ha(`/api/journal/${z}`));ae.ok&&($=await ae.json(),console.log(" Loaded from shared demo endpoint:",$))}if($&&Object.keys($).length>0){console.log(" Found journal data from Google Cloud journal-database, populating UI:",$);const ae=$.notes||$.tradingNotes||$.notesContent||"";ae&&(oo(ae),Nd(ae),console.log(" Loaded notes from journal-database:",ae));const c=$.tags||$.tradingTags||$.selectedTags||[];Array.isArray(c)&&zl(c);const u=$.dailyFactors||$.selectedDailyFactors||[];Array.isArray(u)&&(Vl(u),console.log(" Loaded daily factors from AWS:",u));const p=$.indicators||$.selectedIndicators||[];if(Array.isArray(p)&&(Ah(p),console.log(" Loaded indicators from AWS:",p),console.log(" Loaded tags from journal-database:",c)),$.tradeHistory&&Array.isArray($.tradeHistory)&&$.tradeHistory.length>0){Ya($.tradeHistory),console.log(" Loaded REAL trade history from AWS:",$.tradeHistory.length,"trades"),console.log(" Trade data source: FIREBASE (no hardcoded data)");const _=Dh($.tradeHistory);if(_.length>0){lu(_),Bl(0),console.log(" Extracted traded symbols:",_);const F=_[0];Th(`NSE:${F}-INDEX`),yu(M),console.log(` [TRADE BOOK SELECT] Syncing heatmap header with date: ${M}, symbol: ${F}`)}}else Ya([]),console.log(" No trade history in AWS for this date - showing empty state");$.images&&Array.isArray($.images)&&(Qa($.images),console.log(" Loaded images from journal-database:",$.images.length,"images")),En(!0),ba(!0),Do(!0);const v={...vu,[z]:$};bu(v);const k={...Gs,[z]:$};Xa(k),localStorage.setItem("tradingDataByDate",JSON.stringify(k)),localStorage.setItem("calendarData",JSON.stringify(v)),console.log(" Successfully loaded and saved all journal data for:",z)}else console.log(" No journal data found for:",z),En(!0),ba(!0),Do(!0)}else{const $=await K.text();console.error(` Load failed with status ${K.status}:`,$),console.log(" Keeping existing data visible instead of clearing UI")}}catch(K){console.error(" Error loading journal data:",K),console.log(" Error loading data - UI will remain empty")}finally{Rl(!1)}},Mv=async()=>{var y;console.log(" SAVE BUTTON CLICKED! Current selectedDate:",lo);try{if(!lo){console.log(" No date selected for save operation"),alert(" Please select a date on the calendar first!");return}console.log(" Date is selected, proceeding with save...");const E=ju(lo),M=Array.isArray(cn)?cn:[],z=typeof Jr=="string"?Jr:"",K=Array.isArray(al)?al:[],G=((y=au.current)==null?void 0:y.getCurrentImages())||[],$=Array.isArray(G)?G:[],ae=Pc||{totalTrades:M.length,winningTrades:0,losingTrades:0,totalPnL:0,netPnL:0,winRate:0,avgWin:0,avgLoss:0,profitFactor:0},c={tradeHistory:M,tradingNotes:z,tradingTags:K,images:$,performanceMetrics:ae,timestamp:new Date().toISOString()};console.log(` SAVE SUMMARY for ${E}:`),console.log(`   Trade History: ${M.length} trades`),console.log(`   Notes: ${z?z.substring(0,50)+"...":"None"}`),console.log(`   Tags: ${K.length} tags - ${K.join(", ")}`),console.log(`   Images: ${$.length} images`),console.log(`   Net P&L: ${ae.netPnL}`),console.log(` Attempting to save data for date: ${E}`,c);let u;if(Qr)console.log(" Saving to demo data (shared)"),u=await fetch(`/api/journal/${E}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});else{const p=Dl();if(!p)throw console.error(" Cannot save in personal mode - no AWS user logged in"),alert(` Please log in with your AWS account to save personal trading data.

Switch to Demo mode or log in to continue.`),new Error("No AWS user logged in - cannot save to personal mode");console.log(` Saving to user-specific data (userId: ${p})`),u=await fetch("/api/user-journal",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:p,date:E,tradingData:c})})}if(console.log(` Save response status: ${u.status}`,u),u.ok){const p=await u.json();console.log(" Save response data:",p);const v={...Gs,[E]:c};if(Xa(v),xc(k=>k+1),console.log(` All trading data saved successfully for ${E}`,c),console.log(" Reloading FULL heatmap data to sync all windows..."),Qr){console.log(" Refreshing demo mode heatmap...");const k=await fetch("/api/journal/all-dates");if(k.ok){const _=await k.json();console.log(` Heatmap refreshed with ${Object.keys(_).length} dates`),Xa(_)}}else{const k=Dl();if(k){console.log(` Refreshing personal mode heatmap for user: ${k}`);const _=await fetch(`/api/user-journal/${k}/all`);if(_.ok){const F=await _.json();console.log(` Heatmap refreshed with ${Object.keys(F).length} dates`),Xa(F)}}}if(console.log(" Reloading current date to refresh UI..."),await Hf(lo),typeof window<"u"){const k=lo.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"});nd({formattedDate:k,saveLocation:Qr?"Demo":"Personal",trades:M.length,notes:z?"":"",tags:K.length>0?K.join(", "):"None",images:$.length,netPnL:ae.netPnL.toLocaleString("en-IN")}),Xd(!0)}}else{const p=await u.text();throw console.error(` Save failed with status ${u.status}:`,p),new Error(`Failed to save to Google Cloud: ${u.status} ${p}`)}}catch(E){console.error(" Error saving to Google Cloud journal database:",E);const M=E instanceof Error?E.message:"Unknown error occurred";nd({error:!0,errorMessage:M}),Xd(!0)}},Pc=g.useMemo(()=>{if(!cn||cn.length===0)return{totalTrades:0,winningTrades:0,losingTrades:0,totalProfit:0,totalLoss:0,netPnL:0,winRate:"0.0"};const y=cn.map(u=>{const p=(u.pnl||"").replace(/[,+\s]/g,"");return parseFloat(p)||0}),E=y.length,M=y.filter(u=>u>0).length,z=y.filter(u=>u<0).length,K=y.filter(u=>u>0).reduce((u,p)=>u+p,0),G=Math.abs(y.filter(u=>u<0).reduce((u,p)=>u+p,0)),$=y.reduce((u,p)=>u+p,0),ae=M+z,c=ae>0?M/ae*100:0;return{totalTrades:E,winningTrades:M,losingTrades:z,totalProfit:K,totalLoss:G,netPnL:$,winRate:c.toFixed(1)}},[cn]),Pk=y=>{if(y<0)return"-";const E=Math.floor(y/1e3),M=Math.floor(E/86400),z=Math.floor(E%86400/3600),K=Math.floor(E%3600/60),G=E%60,$=[];return M>0&&$.push(`${M}d`),z>0&&$.push(`${z}h`),K>0&&$.push(`${K}m`),G>0&&$.push(`${G}s`),$.length>0?$.join(" "):"0s"},hx=y=>{if(!y||y==="-")return"-";if(/\d+[dhms]/.test(y))return y;const E=y.match(/(\d+)m/),M=y.match(/(\d+)s/),z=E?parseInt(E[1]):0,K=M?parseInt(M[1]):0,G=z*60+K,$=Math.floor(G/86400),ae=Math.floor(G%86400/3600),c=Math.floor(G%3600/60),u=G%60,p=[];return $>0&&p.push(`${$}d`),ae>0&&p.push(`${ae}h`),c>0&&p.push(`${c}m`),u>0&&p.push(`${u}s`),p.length>0?p.join(" "):"-"},Ov=y=>{const E=[...y],M={};for(let z=0;z<E.length;z++){const K=E[z],G=K.symbol;if(M[G]||(M[G]={qty:0,avgPrice:0,firstTradeTime:K.time}),K.order==="BUY"){const $=M[G].qty*M[G].avgPrice,ae=K.qty*K.price,c=M[G].qty+K.qty;c>0&&(M[G].avgPrice=($+ae)/c),M[G].qty=c,M[G].qty===K.qty&&(M[G].firstTradeTime=K.time)}else if(K.order==="SELL"&&M[G].qty>0){const ae=(K.price-M[G].avgPrice)*K.qty,c=new Date(`1970-01-01 ${M[G].firstTradeTime}`),p=new Date(`1970-01-01 ${K.time}`).getTime()-c.getTime(),v=Pk(p);E[z].pnl=`${ae.toFixed(2)}`,E[z].duration=v,M[G].qty-=K.qty,M[G].qty<=0&&(M[G]={qty:0,avgPrice:0,firstTradeTime:""})}}return E.sort((z,K)=>{const G=Rv(z.time),$=Rv(K.time);return G.localeCompare($)}),E},Rv=y=>{try{let E=y.trim();if(!E.includes("AM")&&!E.includes("PM"))return E.padStart(8,"0");const M=E.match(/(\d{1,2}):(\d{2}):(\d{2})\s*(AM|PM)/i);if(M){let z=parseInt(M[1]);const K=M[2],G=M[3],$=M[4].toUpperCase();return $==="AM"&&z===12?z=0:$==="PM"&&z!==12&&(z+=12),`${z.toString().padStart(2,"0")}:${K}:${G}`}return E}catch{return y}},fx=(y,E)=>{if(!E||!y.displayValues)return y;const M={time:[],order:[],symbol:[],type:[],qty:[],price:[]},z=E.split(/\t+/).flatMap(p=>p.split(/\s+/)).filter(p=>p.trim()),K=z.findIndex(p=>p.toUpperCase()==="BUY"||p.toUpperCase()==="SELL");K>=0&&(M.order=[K]);const G=z.findIndex(p=>/^\d{1,2}:\d{2}(:\d{2})?$/.test(p));G>=0&&(M.time=[G]);const $=z.findIndex(p=>["MIS","NRML","CNC","INTRADAY","DELIVERY","MARGIN"].includes(p.toUpperCase()));$>=0&&(M.type=[$]);const ae=[];z.forEach((p,v)=>{const k=p.replace(/[$,]/g,""),_=parseFloat(k);!isNaN(_)&&_>0&&v!==K&&v!==G&&v!==$&&ae.push({pos:v,value:_,hasDecimal:k.includes(".")})}),ae.length>=2?(ae.sort((p,v)=>p.pos-v.pos),M.qty=[ae[0].pos],M.price=[ae[ae.length-1].pos]):ae.length===1&&(y.positions.qty.length>0?M.qty=[ae[0].pos]:M.price=[ae[0].pos]);const c=new Set([...M.time,...M.order,...M.type,...M.qty,...M.price]),u=[];for(let p=0;p<z.length;p++)if(!c.has(p)){const v=z[p];(["NFO","NSE","BSE","MCX","w","CE","PE","FUT","OPT"].includes(v.toUpperCase())||/[A-Za-z]/.test(v))&&u.push(p)}return M.symbol=u,console.log(" SMART Recalculated format positions:",{original:y.positions,recalculated:M,currentWords:z,displayValues:y.displayValues}),{...y,sampleLine:E,positions:M}},Mg=(y,E)=>{var K,G,$;const M={trades:[],errors:[]},z=y.split(`
`).filter(ae=>ae.trim());if(z.length===0)return M.errors.push({line:0,content:"",reason:"No data found"}),M;for(let ae=0;ae<z.length;ae++){const c=z[ae].trim();if(!c)continue;const u=c.split(/\t+/).flatMap(p=>p.split(/\s+/)).filter(p=>p.trim());try{const p={};if(E.positions.time.length>0&&(p.time=E.positions.time.map(F=>u[F]||"").join(" ")),E.positions.order.length>0&&(p.order=E.positions.order.map(F=>u[F]||"").join(" ")),E.positions.symbol.length>0&&(p.symbol=E.positions.symbol.map(F=>u[F]||"").join(" ")),E.positions.type.length>0&&(p.type=E.positions.type.map(F=>u[F]||"").join(" ")),E.positions.qty.length>0&&(p.qty=E.positions.qty.map(F=>u[F]||"").join(" ")),E.positions.price.length>0&&(p.price=E.positions.price.map(F=>u[F]||"").join(" ")),!p.order||!p.qty||!p.price){M.errors.push({line:ae+1,content:c,reason:"Missing required fields (order, qty, or price)"});continue}const v=(K=p.order)==null?void 0:K.toUpperCase();if(v!=="BUY"&&v!=="SELL"){M.errors.push({line:ae+1,content:c,reason:`Invalid order type: ${p.order}`});continue}const k=parseFloat(p.qty),_=parseFloat(((G=p.price)==null?void 0:G.replace(/[$,]/g,""))||"0");if(isNaN(k)||k<=0){M.errors.push({line:ae+1,content:c,reason:`Invalid quantity: ${p.qty}`});continue}if(isNaN(_)||_<=0){M.errors.push({line:ae+1,content:c,reason:`Invalid price: ${p.price}`});continue}M.trades.push({time:p.time||"",order:v,symbol:p.symbol||"",type:(($=p.type)==null?void 0:$.toUpperCase())||"MIS",qty:Math.floor(k),price:_,pnl:"-",duration:"-"})}catch(p){M.errors.push({line:ae+1,content:c,reason:p instanceof Error?p.message:"Parsing error"})}}return console.log(" Parsed trades using positions:",E.positions,"Result:",M),M},mx=()=>{try{if(Oa(""),ui([]),!gs.trim()){Oa("Please paste trade data");return}const{trades:y,errors:E}=Ci?Mg(gs,Ci):d9(gs);if(ui(E),y.length===0){E.length>0?Oa(`No valid trades found. ${E.length} error(s) detected. See details below.`):Oa("No valid trades found in the data. Please check the format.");return}const M=Ov(y);if(Ya(z=>[...M,...z]),E.length>0)console.log(` Imported ${y.length} trades successfully.  ${E.length} line(s) had errors.`);else{const z=Xo?` using "${Xo}" format`:"";console.log(` Successfully imported ${y.length} trades${z}! Added to existing trade history.`)}Ci&&Xo&&console.log(` Used auto-detected "${Xo}" format for parsing!`),E.length===0?(Kc(!1),vf(""),jo(!0),lh(null)):jo(!0)}catch(y){Oa(y instanceof Error?y.message:"Unknown error occurred")}},Dv=y=>{var M;const E=(M=y.target.files)==null?void 0:M[0];if(E&&E.type==="text/csv"){const z=new FileReader;z.onload=K=>{var $;const G=($=K.target)==null?void 0:$.result;vf(G)},z.readAsText(E)}else Oa("Please upload a valid CSV file")},px=y=>{const E=y.map(M=>({time:new Date(M.executedAt).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),order:M.action,symbol:M.symbol,type:"MKT",qty:M.quantity,price:M.price,pnl:M.pnl?`${M.pnl}`:"-",duration:"-"}));Ya(M=>[...E,...M]),ug(!1)};return g.useEffect(()=>(window.getActiveTab=()=>(console.log("[TAB] Getting active tab:",a),a),window.setActiveTab=y=>{console.log("[TAB] Setting active tab to:",y),i(y)},console.log("[TAB] Tab functions exposed, current tab:",a),()=>{delete window.getActiveTab,delete window.setActiveTab}),[a]),g.useEffect(()=>{const E=new URLSearchParams(window.location.search).get("tab");E&&["strategy-build","dashboard","cb","chart","check","4candle","scanner","complete-flexible","backtest","simulator","documentation","journal","insights","voice","portfolio","risk-management"].includes(E)&&i(E)},[t]),a==="voice"?n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white",children:n.jsx("main",{className:"h-screen w-full",children:n.jsx(CJ,{onBackClick:()=>ur("trading-home")})})}):a==="tutor"?n.jsxs("div",{className:"min-h-screen bg-slate-900 p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-8",children:[n.jsx("div",{className:"flex items-center gap-6",children:n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl px-4 py-3 flex items-center gap-3 shadow-lg border border-gray-700",children:[n.jsx("div",{className:"w-8 h-8 bg-purple-600 rounded-lg flex items-center justify-center",children:n.jsx("span",{className:"text-white font-bold text-sm",children:"M"})}),n.jsxs("div",{children:[n.jsx("div",{className:"text-white font-semibold text-sm",children:"MiniCast"}),n.jsx("div",{className:"text-gray-400 text-xs",children:"Premium Podcasts"})]})]})}),n.jsx("div",{className:"flex items-center gap-6"})]}),n.jsx("div",{className:"mb-8",children:n.jsx("h1",{className:"text-3xl font-normal text-white mb-2",children:Y0()})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mb-8",children:[n.jsx("div",{className:"lg:col-span-4 space-y-6",children:n.jsx("div",{className:"relative h-80 pl-[80px] pr-[56px]",children:n.jsx($3,{onSectorChange:Ca,selectedSector:Mr})})}),n.jsx("div",{className:"lg:col-span-8 space-y-6",children:n.jsxs("div",{className:"bg-slate-800 rounded-2xl p-6 border border-slate-700",children:[n.jsx("div",{className:"mb-6"}),n.jsx("div",{children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"relative h-48 rounded-2xl overflow-hidden bg-gradient-to-br from-purple-600 via-purple-700 to-indigo-800 p-6 cursor-pointer hover:scale-105 transition-transform duration-300",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600/20 to-transparent"}),n.jsxs("div",{className:"relative z-10 h-full flex flex-col justify-center items-center text-center",children:[n.jsx("div",{className:"text-6xl mb-4",children:""}),n.jsx("div",{className:"text-white text-2xl font-bold",children:"Study"}),n.jsx("div",{className:"text-white/60 text-sm mt-2",children:"Learning Materials"})]})]}),n.jsxs("div",{className:"relative h-48 rounded-2xl overflow-hidden bg-gradient-to-br from-emerald-600 via-teal-700 to-cyan-800 p-6 cursor-pointer hover:scale-105 transition-transform duration-300",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-600/20 to-transparent"}),n.jsxs("div",{className:"relative z-10 h-full flex flex-col justify-center items-center text-center",children:[n.jsx("div",{className:"text-6xl mb-4",children:""}),n.jsx("div",{className:"text-white text-2xl font-bold",children:"Courses"}),n.jsx("div",{className:"text-white/60 text-sm mt-2",children:"Training Programs"})]})]}),n.jsxs("div",{className:"relative h-48 rounded-2xl overflow-hidden bg-gradient-to-br from-amber-500 via-yellow-600 to-orange-700 p-6 cursor-pointer hover:scale-105 transition-transform duration-300",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-amber-500/20 to-transparent"}),n.jsxs("div",{className:"relative z-10 h-full flex flex-col justify-center items-center text-center",children:[n.jsx("div",{className:"text-6xl mb-4",children:""}),n.jsx("div",{className:"text-white text-2xl font-bold",children:"Live"}),n.jsx("div",{className:"text-white/60 text-sm mt-2",children:"Live Sessions"})]})]})]})})]})})]}),n.jsxs("div",{className:"mb-8 flex gap-6",children:[n.jsx("div",{className:"w-[70%]",children:n.jsx("div",{className:"bg-slate-800 rounded-2xl p-6 border border-slate-700",children:n.jsxs(zA,{value:T,onValueChange:O,className:"w-full",children:[n.jsx("div",{className:"flex items-center justify-between mb-6",children:n.jsxs(hS,{className:"bg-slate-700 border-slate-600",children:[n.jsxs(Yh,{value:"overview",className:"text-slate-300 data-[state=active]:bg-slate-600 data-[state=active]:text-white flex items-center gap-2",children:[n.jsx(ia,{className:"w-4 h-4"}),"Podcast"]}),n.jsxs(Yh,{value:"setup",className:"text-slate-300 data-[state=active]:bg-slate-600 data-[state=active]:text-white flex items-center gap-2",children:[n.jsx(Ax,{className:"w-4 h-4"}),"Events"]})]})}),n.jsx(Kh,{value:"overview",className:"mt-0",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-white text-xl font-bold mb-6",children:["TRENDING PODCASTS - ",Mr==="FINANCE"?"FINANCE":Mr==="IT"?"TECH":Mr==="COMMODITY"?"COMMODITY":Mr==="GLOBAL"?"GLOBAL":Mr==="BANKS"?"BANKING":Mr==="AUTOMOBILE"?"AUTO":"FINANCE"]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsx("div",{className:"lg:col-span-2",children:n.jsxs("div",{className:"bg-gradient-to-br from-pink-500 via-purple-600 to-indigo-700 rounded-3xl p-8 relative overflow-hidden min-h-[280px]",children:[n.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-white/10 rounded-full -mr-20 -mt-20"}),n.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-white/5 rounded-full -ml-16 -mb-16"}),n.jsxs("div",{className:"flex items-center gap-6 relative z-10 h-full",children:[n.jsx("div",{className:"w-40 h-40 rounded-2xl overflow-hidden bg-gradient-to-br from-purple-400 to-pink-500 flex items-center justify-center",children:n.jsx(qN,{className:"w-20 h-20 text-white"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"bg-yellow-400 text-black px-3 py-1 rounded-full text-xs font-medium inline-block mb-4",children:"PODCAST OF THE WEEK"}),n.jsx("h2",{className:"text-3xl font-bold mb-2 ${paperTradingTotalPnl >= 0 ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'}",children:"Rich Mindset"}),n.jsx("p",{className:"text-white/80 mb-4",children:"Finance Expert"}),n.jsx(H,{className:"bg-white/20 hover:bg-white/30 backdrop-blur-sm text-white border-0 w-12 h-12 rounded-full p-0",children:n.jsx(Ui,{className:"w-6 h-6 ml-1"})})]})]})]})}),n.jsx("div",{className:"lg:col-span-1",children:n.jsxs("div",{className:"bg-slate-800 rounded-2xl p-4",children:[n.jsx("h3",{className:"text-white text-lg font-bold mb-4",children:"Saved Podcast"}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-12 h-12 bg-orange-500 rounded-lg flex items-center justify-center flex-shrink-0",children:n.jsx(Aq,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"text-white font-medium text-sm",children:"Budget Planning"}),n.jsx("p",{className:"text-slate-400 text-xs",children:"Money Expert"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-2 bg-blue-500 rounded-full"}),n.jsx("span",{className:"text-slate-400 text-xs",children:"03:13"}),n.jsx(H,{size:"sm",variant:"ghost",className:"w-6 h-6 p-0 text-slate-400 hover:text-white",children:n.jsx(lb,{className:"w-3 h-3"})}),n.jsx(H,{size:"sm",variant:"ghost",className:"w-6 h-6 p-0 text-slate-400 hover:text-white",children:n.jsx(Ui,{className:"w-3 h-3"})})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center flex-shrink-0",children:n.jsx(qN,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"text-white font-medium text-sm",children:"Psychology of Money"}),n.jsx("p",{className:"text-slate-400 text-xs",children:"Mind & Money"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-2 bg-green-500 rounded-full"}),n.jsx("span",{className:"text-slate-400 text-xs",children:"05:26"}),n.jsx(H,{size:"sm",variant:"ghost",className:"w-6 h-6 p-0 text-slate-400 hover:text-white",children:n.jsx(lb,{className:"w-3 h-3"})}),n.jsx(H,{size:"sm",variant:"ghost",className:"w-6 h-6 p-0 text-slate-400 hover:text-white",children:n.jsx(Ui,{className:"w-3 h-3"})})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-12 h-12 bg-purple-500 rounded-lg flex items-center justify-center flex-shrink-0",children:n.jsx(yb,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"text-white font-medium text-sm",children:"Entrepreneur Mindset"}),n.jsx("p",{className:"text-slate-400 text-xs",children:"Business Weekly"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-2 bg-yellow-500 rounded-full"}),n.jsx("span",{className:"text-slate-400 text-xs",children:"02:51"}),n.jsx(H,{size:"sm",variant:"ghost",className:"w-6 h-6 p-0 text-slate-400 hover:text-white",children:n.jsx(lb,{className:"w-3 h-3"})}),n.jsx(H,{size:"sm",variant:"ghost",className:"w-6 h-6 p-0 text-slate-400 hover:text-white",children:n.jsx(Ui,{className:"w-3 h-3"})})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-12 h-12 bg-teal-500 rounded-lg flex items-center justify-center flex-shrink-0",children:n.jsx(Ax,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"text-white font-medium text-sm",children:"Building Resilience"}),n.jsx("p",{className:"text-slate-400 text-xs",children:"Mental Strength"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-2 bg-teal-500 rounded-full"}),n.jsx("span",{className:"text-slate-400 text-xs",children:"04:12"}),n.jsx(H,{size:"sm",variant:"ghost",className:"w-6 h-6 p-0 text-slate-400 hover:text-white",children:n.jsx(lb,{className:"w-3 h-3"})}),n.jsx(H,{size:"sm",variant:"ghost",className:"w-6 h-6 p-0 text-slate-400 hover:text-white",children:n.jsx(Ui,{className:"w-3 h-3"})})]})]})]})]})})]}),n.jsxs("div",{className:"mt-8",children:[n.jsxs("h3",{className:"text-white text-lg font-medium mb-4",children:["AI-Generated ",Mr," Podcasts"]}),Ft?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-purple-500 border-t-transparent rounded-full mx-auto mb-2"}),n.jsx("p",{className:"text-slate-400 text-sm",children:"Generating trending podcasts..."})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-h-96 overflow-y-auto",children:st.slice(0,10).map((y,E)=>n.jsx("div",{className:`rounded-lg p-4 hover:bg-slate-600/50 transition-colors cursor-pointer group ${(kt==null?void 0:kt.id)===y.id?"bg-purple-600/30 border border-purple-500":"bg-slate-700/50"}`,onClick:()=>K0(y),"data-testid":`podcast-card-${y.id}`,children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-600 rounded-lg flex items-center justify-center flex-shrink-0",children:n.jsxs("span",{className:"text-white font-bold text-lg",children:["#",E+1]})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-start justify-between mb-1",children:[n.jsx("h4",{className:"text-white font-medium text-sm leading-tight",children:y.title}),y.trending&&n.jsx("span",{className:"text-orange-400 text-xs bg-orange-400/20 px-2 py-1 rounded-full",children:"TRENDING"})]}),n.jsx("p",{className:"text-slate-400 text-xs mb-2 line-clamp-2",children:y.description}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:[n.jsxs("span",{children:[" ",y.host]}),n.jsxs("span",{children:[" ",y.duration]}),n.jsxs("span",{children:[" ",y.listeners]})]})]}),n.jsx(H,{size:"sm",className:"w-8 h-8 bg-purple-500/20 hover:bg-purple-500/30 text-purple-400 border-0 rounded-full p-0 opacity-0 group-hover:opacity-100 transition-opacity",children:n.jsx(Ui,{className:"w-4 h-4 ml-0.5"})})]})},y.id))})]}),n.jsxs("div",{className:"mt-8",children:[n.jsx("h3",{className:"text-white text-lg font-medium mb-4",children:"Weekly top tracks"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4",children:[n.jsxs("div",{className:"group cursor-pointer",children:[n.jsxs("div",{className:"w-full aspect-square bg-gradient-to-br from-green-600 to-blue-800 rounded-lg mb-3 relative overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-black/20"}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("span",{className:"text-4xl",children:""})}),n.jsx("div",{className:"absolute bottom-2 left-2 text-white text-xs font-bold",children:"AI FINANCE"}),n.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:n.jsx(H,{size:"sm",className:"w-8 h-8 bg-white/20 hover:bg-white/30 backdrop-blur-sm text-white border-0 rounded-full p-0",children:n.jsx(Ui,{className:"w-4 h-4 ml-0.5"})})})]}),n.jsx("h4",{className:"text-white font-medium text-sm",children:kt?kt.title:`AI in ${Mr==="FINANCE"?"Finance":Mr==="IT"?"Tech":Mr==="COMMODITY"?"Commodity":Mr==="GLOBAL"?"Global":Mr==="BANKS"?"Banking":Mr==="AUTOMOBILE"?"Auto":"Finance"}`}),n.jsx("p",{className:"text-slate-400 text-xs",children:"Tech Weekly"})]}),n.jsxs("div",{className:"group cursor-pointer",children:[n.jsxs("div",{className:"w-full aspect-square bg-gradient-to-br from-yellow-400 to-orange-600 rounded-lg mb-3 relative overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-black/20"}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("span",{className:"text-4xl",children:""})}),n.jsx("div",{className:"absolute bottom-2 left-2 text-white text-xs font-bold",children:"MARKET NEWS"}),n.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:n.jsx(H,{size:"sm",className:"w-8 h-8 bg-white/20 hover:bg-white/30 backdrop-blur-sm text-white border-0 rounded-full p-0",children:n.jsx(Ui,{className:"w-4 h-4 ml-0.5"})})})]}),n.jsx("h4",{className:"text-white font-medium text-sm",children:"Market News"}),n.jsx("p",{className:"text-slate-400 text-xs",children:"Daily Report"})]}),n.jsxs("div",{className:"group cursor-pointer",children:[n.jsxs("div",{className:"w-full aspect-square bg-gradient-to-br from-red-500 to-pink-600 rounded-lg mb-3 relative overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-black/20"}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("span",{className:"text-4xl",children:""})}),n.jsx("div",{className:"absolute bottom-2 left-2 text-white text-xs font-bold",children:"RISK MGMT"}),n.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:n.jsx(H,{size:"sm",className:"w-8 h-8 bg-white/20 hover:bg-white/30 backdrop-blur-sm text-white border-0 rounded-full p-0",children:n.jsx(Ui,{className:"w-4 h-4 ml-0.5"})})})]}),n.jsx("h4",{className:"text-white font-medium text-sm",children:"Risk Management"}),n.jsx("p",{className:"text-slate-400 text-xs",children:"Pro Trader"})]}),n.jsxs("div",{className:"group cursor-pointer",children:[n.jsxs("div",{className:"w-full aspect-square bg-gradient-to-br from-blue-500 to-cyan-400 rounded-lg mb-3 relative overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-black/20"}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("span",{className:"text-4xl",children:""})}),n.jsx("div",{className:"absolute bottom-2 left-2 text-white text-xs font-bold",children:"STARTUP"}),n.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:n.jsx(H,{size:"sm",className:"w-8 h-8 bg-white/20 hover:bg-white/30 backdrop-blur-sm text-white border-0 rounded-full p-0",children:n.jsx(Ui,{className:"w-4 h-4 ml-0.5"})})})]}),n.jsx("h4",{className:"text-white font-medium text-sm",children:"Building Companies"}),n.jsx("p",{className:"text-slate-400 text-xs",children:"Startup Stories"})]}),n.jsxs("div",{className:"group cursor-pointer",children:[n.jsxs("div",{className:"w-full aspect-square bg-gradient-to-br from-purple-600 to-indigo-800 rounded-lg mb-3 relative overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-black/20"}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("span",{className:"text-4xl",children:""})}),n.jsx("div",{className:"absolute bottom-2 left-2 text-white text-xs font-bold",children:"FELLOWSHIP"}),n.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:n.jsx(H,{size:"sm",className:"w-8 h-8 bg-white/20 hover:bg-white/30 backdrop-blur-sm text-white border-0 rounded-full p-0",children:n.jsx(Ui,{className:"w-4 h-4 ml-0.5"})})})]}),n.jsx("h4",{className:"text-white font-medium text-sm",children:"Fellowship Programs"}),n.jsx("p",{className:"text-slate-400 text-xs",children:"Career Growth"})]}),n.jsxs("div",{className:"group cursor-pointer",children:[n.jsxs("div",{className:"w-full aspect-square bg-gradient-to-br from-orange-500 to-red-600 rounded-lg mb-3 relative overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-black/20"}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("span",{className:"text-4xl",children:""})}),n.jsx("div",{className:"absolute bottom-2 left-2 text-white text-xs font-bold",children:"BUSINESS"}),n.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:n.jsx(H,{size:"sm",className:"w-8 h-8 bg-white/20 hover:bg-white/30 backdrop-blur-sm text-white border-0 rounded-full p-0",children:n.jsx(Ui,{className:"w-4 h-4 ml-0.5"})})})]}),n.jsx("h4",{className:"text-white font-medium text-sm",children:"Business Models"}),n.jsx("p",{className:"text-slate-400 text-xs",children:"Strategy Tips"})]}),n.jsxs("div",{className:"group cursor-pointer",children:[n.jsxs("div",{className:"w-full aspect-square bg-gradient-to-br from-emerald-600 to-teal-800 rounded-lg mb-3 relative overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-black/20"}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("span",{className:"text-4xl",children:""})}),n.jsx("div",{className:"absolute bottom-2 left-2 text-white text-xs font-bold",children:"HERO ZERO"}),n.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:n.jsx(H,{size:"sm",className:"w-8 h-8 bg-white/20 hover:bg-white/30 backdrop-blur-sm text-white border-0 rounded-full p-0",children:n.jsx(Ui,{className:"w-4 h-4 ml-0.5"})})})]}),n.jsx("h4",{className:"text-white font-medium text-sm",children:"Hero to Zero Stories"}),n.jsx("p",{className:"text-slate-400 text-xs",children:"Quick Lessons"})]})]})]})]})}),n.jsx(Kh,{value:"trading-charts",className:"mt-0",children:n.jsxs("div",{className:"h-full flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4 flex-shrink-0",children:[n.jsx("h4",{className:"text-white text-lg font-medium",children:"Upcoming Events"}),n.jsxs("div",{className:"flex items-center gap-2 text-slate-400 text-sm",children:[n.jsx("span",{children:"Showing"}),n.jsx("span",{className:"text-white",children:"10"}),n.jsx("span",{children:"out of 48"})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto pr-2",children:[n.jsxs("div",{className:"grid grid-cols-3 gap-4 pb-4",children:[n.jsxs("div",{className:"relative rounded-xl p-4 overflow-hidden bg-gradient-to-br from-blue-400/80 via-cyan-500/60 to-blue-600/80 flex gap-3",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/30 to-purple-600/40"}),n.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),n.jsx("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-white/10 rounded-full -ml-8 -mb-8"}),n.jsxs("div",{className:"relative z-10 flex-1",children:[n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"bg-white/20 backdrop-blur-sm text-white px-2 py-1 rounded-full text-xs font-medium",children:"Startup Summit"}),n.jsx("span",{className:"bg-green-500/80 text-white px-2 py-1 rounded-full text-xs",children:" Active"})]})}),n.jsxs("div",{className:"mb-3",children:[n.jsx("h5",{className:"text-white font-semibold mb-1",children:"Global Startup Summit | Hyderabad 2025"}),n.jsx("p",{className:"text-white/90 text-xs mb-1",children:"Sat, 06 Sept  9:00 AM"}),n.jsx("p",{className:"text-white/70 text-xs",children:" Deccan Serai Hotel, Hitech City, Hyderabad"})]}),n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("div",{className:"flex-1 bg-white/30 rounded-full h-1.5 mr-3",children:n.jsx("div",{className:"bg-white h-1.5 rounded-full w-4/5"})}),n.jsx("span",{className:"text-white/90 text-xs font-medium",children:"85%"})]}),n.jsx("div",{className:"text-white font-bold text-sm",children:"1,299"})]}),n.jsx("div",{className:"relative z-10 w-20 h-20 flex-shrink-0",children:n.jsx("img",{src:Nl(),alt:"Global Startup Summit Hyderabad 2025",className:"w-full h-full object-cover rounded-lg border border-white/20"})})]}),n.jsxs("div",{className:"relative rounded-xl p-4 overflow-hidden bg-gradient-to-br from-indigo-600/80 via-blue-700/70 to-purple-800/80 flex gap-3",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-900/40 to-purple-900/60"}),n.jsx("div",{className:"absolute top-2 right-4 w-1 h-1 bg-white rounded-full opacity-80"}),n.jsx("div",{className:"absolute top-6 right-8 w-0.5 h-0.5 bg-white rounded-full opacity-60"}),n.jsx("div",{className:"absolute top-4 right-12 w-1 h-1 bg-yellow-200 rounded-full opacity-90"}),n.jsx("div",{className:"absolute top-8 right-6 w-0.5 h-0.5 bg-white rounded-full opacity-70"}),n.jsxs("div",{className:"relative z-10 flex-1",children:[n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"bg-white/20 backdrop-blur-sm text-white px-2 py-1 rounded-full text-xs font-medium",children:"Music"}),n.jsx("span",{className:"bg-green-500/80 text-white px-2 py-1 rounded-full text-xs",children:" Active"})]})}),n.jsxs("div",{className:"mb-3",children:[n.jsx("h5",{className:"text-white font-semibold mb-1",children:"TiE Bangalore Founders Summit"}),n.jsx("p",{className:"text-white/90 text-xs mb-1",children:"Feb 10, 2025  9:30 AM"}),n.jsx("p",{className:"text-white/70 text-xs",children:" TiE Bangalore, Koramangala"})]}),n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("div",{className:"flex-1 bg-white/30 rounded-full h-1.5 mr-3",children:n.jsx("div",{className:"bg-white h-1.5 rounded-full w-3/4"})}),n.jsx("span",{className:"text-white/90 text-xs font-medium",children:"75%"})]}),n.jsx("div",{className:"text-white font-bold text-sm",children:"560"})]}),n.jsx("div",{className:"relative z-10 w-20 h-20 flex-shrink-0",children:n.jsx("img",{src:Nl(),alt:"TiE Bangalore Founders Summit",className:"w-full h-full object-cover rounded-lg border border-white/20"})})]}),n.jsxs("div",{className:"relative rounded-xl p-4 overflow-hidden bg-gradient-to-br from-sky-400/80 via-blue-500/70 to-cyan-600/80 flex gap-3",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-sky-400/30 to-blue-600/40"}),n.jsx("div",{className:"absolute top-2 right-2 w-12 h-12 bg-white/10 rounded-full"}),n.jsx("div",{className:"absolute bottom-2 left-2 w-8 h-8 bg-white/10 rounded-full"}),n.jsxs("div",{className:"relative z-10 flex-1",children:[n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"bg-white/20 backdrop-blur-sm text-white px-2 py-1 rounded-full text-xs font-medium",children:"Health & Wellness"}),n.jsx("span",{className:"bg-green-500/80 text-white px-2 py-1 rounded-full text-xs",children:" Active"})]})}),n.jsxs("div",{className:"mb-3",children:[n.jsx("h5",{className:"text-white font-semibold mb-1",children:"Pharma Bio Summit Hyderabad"}),n.jsx("p",{className:"text-white/90 text-xs mb-1",children:"Jan 28, 2025  10:00 AM"}),n.jsx("p",{className:"text-white/70 text-xs",children:" HICC, Hyderabad"})]}),n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("div",{className:"flex-1 bg-white/30 rounded-full h-1.5 mr-3",children:n.jsx("div",{className:"bg-white h-1.5 rounded-full w-2/5"})}),n.jsx("span",{className:"text-white/90 text-xs font-medium",children:"40%"})]}),n.jsx("div",{className:"text-white font-bold text-sm",children:"580"})]}),n.jsx("div",{className:"relative z-10 w-20 h-20 flex-shrink-0",children:n.jsx("img",{src:Nl(),alt:"Pharma Bio Summit Hyderabad",className:"w-full h-full object-cover rounded-lg border border-white/20"})})]}),n.jsxs("div",{className:"relative rounded-xl p-4 overflow-hidden bg-gradient-to-br from-orange-400/80 via-red-500/70 to-pink-500/80 flex gap-3",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-500/30 to-red-600/40"}),n.jsx("div",{className:"absolute top-1 right-1 w-6 h-6 bg-yellow-300/20 rounded-full"}),n.jsx("div",{className:"absolute top-3 right-6 w-4 h-4 bg-orange-300/30 rounded-full"}),n.jsx("div",{className:"absolute bottom-2 left-3 w-5 h-5 bg-red-300/20 rounded-full"}),n.jsxs("div",{className:"relative z-10 flex-1",children:[n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"bg-white/20 backdrop-blur-sm text-white px-2 py-1 rounded-full text-xs font-medium",children:"Food & Culinary"}),n.jsx("span",{className:"bg-green-500/80 text-white px-2 py-1 rounded-full text-xs",children:" Active"})]})}),n.jsxs("div",{className:"mb-3",children:[n.jsx("h5",{className:"text-white font-semibold mb-1",children:"Hyderabad Food Festival"}),n.jsx("p",{className:"text-white/90 text-xs mb-1",children:"Feb 20, 2025  6:00 PM"}),n.jsx("p",{className:"text-white/70 text-xs",children:" Shilpakala Vedika, Hyderabad"})]}),n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("div",{className:"flex-1 bg-white/30 rounded-full h-1.5 mr-3",children:n.jsx("div",{className:"bg-white h-1.5 rounded-full w-3/5"})}),n.jsx("span",{className:"text-white/90 text-xs font-medium",children:"60%"})]}),n.jsx("div",{className:"text-white font-bold text-sm",children:"1,200"})]}),n.jsx("div",{className:"relative z-10 w-20 h-20 flex-shrink-0",children:n.jsx("img",{src:Nl(),alt:"Hyderabad Food Festival",className:"w-full h-full object-cover rounded-lg border border-white/20"})})]}),n.jsxs("div",{className:"relative rounded-xl p-4 overflow-hidden bg-gradient-to-br from-purple-500/80 via-violet-600/70 to-indigo-700/80 flex gap-3",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-600/30 to-indigo-800/40"}),n.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-white/5 transform rotate-45 -mr-8 -mt-8"}),n.jsx("div",{className:"absolute bottom-0 left-0 w-12 h-12 bg-white/5 transform rotate-12 -ml-6 -mb-6"}),n.jsx("div",{className:"absolute top-1/2 right-4 w-2 h-2 bg-cyan-400/60 rounded-full"}),n.jsx("div",{className:"absolute top-1/3 right-8 w-1 h-1 bg-pink-400/60 rounded-full"}),n.jsxs("div",{className:"relative z-10 flex-1",children:[n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"bg-white/20 backdrop-blur-sm text-white px-2 py-1 rounded-full text-xs font-medium",children:"Technology"}),n.jsx("span",{className:"bg-green-500/80 text-white px-2 py-1 rounded-full text-xs",children:" Active"})]})}),n.jsxs("div",{className:"mb-3",children:[n.jsx("h5",{className:"text-white font-semibold mb-1",children:"HITEX IT Expo Hyderabad"}),n.jsx("p",{className:"text-white/90 text-xs mb-1",children:"Mar 5, 2025  9:00 AM"}),n.jsx("p",{className:"text-white/70 text-xs",children:" Hitex Exhibition Centre"})]}),n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("div",{className:"flex-1 bg-white/30 rounded-full h-1.5 mr-3",children:n.jsx("div",{className:"bg-white h-1.5 rounded-full w-1/2"})}),n.jsx("span",{className:"text-white/90 text-xs font-medium",children:"55%"})]}),n.jsx("div",{className:"text-white font-bold text-sm",children:"575"})]}),n.jsx("div",{className:"relative z-10 w-20 h-20 flex-shrink-0",children:n.jsxs("div",{className:"w-full h-full bg-gradient-to-br from-purple-500/30 to-indigo-700/30 rounded-lg border border-white/20 flex items-center justify-center relative overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-violet-600/20 to-indigo-800/20"}),n.jsx("div",{className:"absolute top-1 right-1 w-1 h-1 bg-cyan-400/60 rounded-full"}),n.jsx("div",{className:"absolute bottom-1 left-1 w-1 h-1 bg-pink-400/60 rounded-full"}),n.jsxs("div",{className:"relative z-10 text-center",children:[n.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center mb-1",children:n.jsx(NA,{className:"w-4 h-4 text-white/60"})}),n.jsx("div",{className:"text-white/70 text-[8px] font-medium",children:"TECH"})]})]})})]}),n.jsxs("div",{className:"relative rounded-xl p-4 overflow-hidden bg-gradient-to-br from-purple-400/80 via-indigo-500/70 to-blue-600/80 flex gap-3",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/30 to-blue-700/40"}),n.jsx("div",{className:"absolute top-0 left-0 w-20 h-20 bg-white/5 rounded-full -ml-10 -mt-10"}),n.jsx("div",{className:"absolute bottom-0 right-0 w-24 h-24 bg-white/5 rounded-full -mr-12 -mb-12"}),n.jsx("div",{className:"absolute top-1/2 left-1/2 w-6 h-6 bg-white/10 rounded-full transform -translate-x-1/2 -translate-y-1/2"}),n.jsxs("div",{className:"relative z-10 flex-1",children:[n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"bg-white/20 backdrop-blur-sm text-white px-2 py-1 rounded-full text-xs font-medium",children:"Business"}),n.jsx("span",{className:"bg-green-500/80 text-white px-2 py-1 rounded-full text-xs",children:" Active"})]})}),n.jsxs("div",{className:"mb-3",children:[n.jsx("h5",{className:"text-white font-semibold mb-1",children:"Mumbai Fintech Festival"}),n.jsx("p",{className:"text-white/90 text-xs mb-1",children:"Jan 15, 2025  10:30 AM"}),n.jsx("p",{className:"text-white/70 text-xs",children:" Bombay Exhibition Centre"})]}),n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("div",{className:"flex-1 bg-white/30 rounded-full h-1.5 mr-3",children:n.jsx("div",{className:"bg-white h-1.5 rounded-full w-4/5"})}),n.jsx("span",{className:"text-white/90 text-xs font-medium",children:"65%"})]}),n.jsx("div",{className:"text-white font-bold text-sm",children:"850"})]}),n.jsx("div",{className:"relative z-10 w-20 h-20 flex-shrink-0",children:n.jsx("div",{className:"w-full h-full bg-gradient-to-br from-purple-400/30 to-blue-600/30 rounded-lg border border-white/20 flex items-center justify-center relative overflow-hidden",children:n.jsx("div",{className:"text-white/70 text-[8px] font-medium",children:"BUSINESS"})})})]}),n.jsxs("div",{className:"relative rounded-xl p-4 overflow-hidden bg-gradient-to-br from-emerald-400/80 via-teal-500/70 to-cyan-600/80 flex gap-3",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-500/30 to-cyan-700/40"}),n.jsx("div",{className:"absolute top-2 right-3 w-3 h-3 bg-white/20 rounded-full"}),n.jsx("div",{className:"absolute top-6 right-8 w-2 h-2 bg-white/15 rounded-full"}),n.jsx("div",{className:"absolute bottom-4 left-4 w-4 h-4 bg-white/10 rounded-full"}),n.jsx("div",{className:"absolute top-1/3 left-6 w-1 h-1 bg-yellow-300/60 rounded-full"}),n.jsxs("div",{className:"relative z-10 flex-1",children:[n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"bg-white/20 backdrop-blur-sm text-white px-2 py-1 rounded-full text-xs font-medium",children:"Startup Innovations"}),n.jsx("span",{className:"bg-green-500/80 text-white px-2 py-1 rounded-full text-xs",children:" Active"})]})}),n.jsxs("div",{className:"mb-3",children:[n.jsx("h5",{className:"text-white font-semibold mb-1",children:"Nasscom Product Conclave Bangalore"}),n.jsx("p",{className:"text-white/90 text-xs mb-1",children:"Feb 25, 2025  9:00 AM"}),n.jsx("p",{className:"text-white/70 text-xs",children:" UB City Mall, Bengaluru"})]}),n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("div",{className:"flex-1 bg-white/30 rounded-full h-1.5 mr-3",children:n.jsx("div",{className:"bg-white h-1.5 rounded-full w-4/5"})}),n.jsx("span",{className:"text-white/90 text-xs font-medium",children:"80%"})]}),n.jsx("div",{className:"text-white font-bold text-sm",children:"1,250"})]}),n.jsx("div",{className:"relative z-10 w-20 h-20 flex-shrink-0",children:n.jsx("div",{className:"w-full h-full bg-gradient-to-br from-emerald-400/30 to-cyan-600/30 rounded-lg border border-white/20 flex items-center justify-center relative overflow-hidden",children:n.jsx("div",{className:"text-white/70 text-[8px] font-medium",children:"STARTUP"})})})]}),n.jsxs("div",{className:"relative rounded-xl p-4 overflow-hidden bg-gradient-to-br from-fuchsia-400/80 via-purple-500/70 to-violet-600/80 flex gap-3",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-fuchsia-500/30 to-violet-700/40"}),n.jsx("div",{className:"absolute top-0 right-0 w-14 h-14 bg-white/10 transform rotate-12 -mr-7 -mt-7"}),n.jsx("div",{className:"absolute bottom-0 left-0 w-10 h-10 bg-white/10 transform -rotate-12 -ml-5 -mb-5"}),n.jsx("div",{className:"absolute top-1/2 left-1/2 w-8 h-8 bg-white/5 rounded-full transform -translate-x-1/2 -translate-y-1/2"}),n.jsxs("div",{className:"relative z-10 flex-1",children:[n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"bg-white/20 backdrop-blur-sm text-white px-2 py-1 rounded-full text-xs font-medium",children:"Technology"}),n.jsx("span",{className:"bg-green-500/80 text-white px-2 py-1 rounded-full text-xs",children:" Active"})]})}),n.jsxs("div",{className:"mb-3",children:[n.jsx("h5",{className:"text-white font-semibold mb-1",children:"India AI Summit Mumbai"}),n.jsx("p",{className:"text-white/90 text-xs mb-1",children:"Mar 12, 2025  10:00 AM"}),n.jsx("p",{className:"text-white/70 text-xs",children:" NESCO Goregaon, Mumbai"})]}),n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("div",{className:"flex-1 bg-white/30 rounded-full h-1.5 mr-3",children:n.jsx("div",{className:"bg-white h-1.5 rounded-full w-3/4"})}),n.jsx("span",{className:"text-white/90 text-xs font-medium",children:"70%"})]}),n.jsx("div",{className:"text-white font-bold text-sm",children:"950"})]}),n.jsx("div",{className:"relative z-10 w-20 h-20 flex-shrink-0",children:n.jsx("div",{className:"w-full h-full bg-gradient-to-br from-fuchsia-400/30 to-violet-600/30 rounded-lg border border-white/20 flex items-center justify-center relative overflow-hidden",children:n.jsx("div",{className:"text-white/70 text-[8px] font-medium",children:"AI TECH"})})})]})]}),n.jsxs("div",{className:"flex items-center justify-center gap-2 pt-4",children:[n.jsx(H,{variant:"ghost",size:"sm",className:"text-slate-400 hover:text-white",children:n.jsx(Du,{className:"w-4 h-4"})}),n.jsx(H,{variant:"ghost",size:"sm",className:"bg-purple-600 text-white w-8 h-8 p-0",children:"1"}),n.jsx(H,{variant:"ghost",size:"sm",className:"text-slate-400 hover:text-white w-8 h-8 p-0",children:"2"}),n.jsx(H,{variant:"ghost",size:"sm",className:"text-slate-400 hover:text-white w-8 h-8 p-0",children:"3"}),n.jsx("span",{className:"text-slate-400 px-2",children:"..."}),n.jsx(H,{variant:"ghost",size:"sm",className:"text-slate-400 hover:text-white w-8 h-8 p-0",children:"6"}),n.jsx(H,{variant:"ghost",size:"sm",className:"text-slate-400 hover:text-white",children:n.jsx(Zh,{className:"w-4 h-4"})})]})]})]})})]})})}),n.jsxs("div",{className:"w-[30%] flex flex-col gap-3 h-full",children:[n.jsxs("div",{className:"h-[40%] bg-gradient-to-br from-blue-500 to-cyan-400 rounded-2xl p-4 text-white relative overflow-hidden",children:[n.jsx("div",{className:"absolute top-2 right-2",children:n.jsx("span",{className:"text-xs font-medium opacity-80",children:"Ad"})}),n.jsx("h3",{className:"text-lg font-bold mb-1",children:"Global Startup Summit | Hyderabad 2025"}),n.jsx(H,{className:"bg-white text-blue-600 hover:bg-gray-100 text-sm px-4 py-2",children:"Subscribe"}),n.jsx("div",{className:"absolute bottom-2 right-2 w-20 h-20 opacity-90",children:n.jsx("img",{src:Nl(),alt:"Global Startup Summit Hyderabad 2025",className:"w-full h-full object-cover rounded-lg border border-white/30"})})]}),n.jsxs("div",{className:"h-[50%] bg-slate-800 rounded-2xl p-4 border border-slate-700",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-white text-xs",children:""})}),n.jsx("span",{className:"text-white font-medium text-sm",children:"Live Community"})]}),n.jsx("h3",{className:"text-white font-medium mb-2 text-sm",children:"Join Finance AI Meetups"}),n.jsx("p",{className:"text-slate-400 text-xs mb-3",children:"Connect with startups & finance experts. Create avatars, no login required."}),n.jsxs("div",{className:"space-y-2 mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),n.jsx("span",{className:"text-slate-300 text-xs",children:"AI Trading Discussion - 12 live"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full animate-pulse"}),n.jsx("span",{className:"text-slate-300 text-xs",children:"Startup Pitch Night - 8 live"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),n.jsx("span",{className:"text-slate-300 text-xs",children:"DeFi Study Group - 15 live"})]})]}),n.jsxs("div",{className:"flex -space-x-2 mb-3",children:[n.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full border-2 border-slate-800"}),n.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full border-2 border-slate-800"}),n.jsx("div",{className:"w-6 h-6 bg-orange-500 rounded-full border-2 border-slate-800"}),n.jsx("div",{className:"w-6 h-6 bg-purple-500 rounded-full border-2 border-slate-800"}),n.jsx("div",{className:"w-6 h-6 bg-slate-600 rounded-full border-2 border-slate-800 flex items-center justify-center",children:n.jsx("span",{className:"text-white text-xs",children:"+"})})]}),n.jsx(H,{className:"w-full bg-blue-600 hover:bg-blue-700 text-white text-sm py-2",children:"Explore Now"})]}),n.jsx("div",{className:"h-[20%] bg-slate-800/80 backdrop-blur-md rounded-2xl p-4 border border-slate-700/50",children:n.jsxs("div",{className:"flex items-center gap-3 h-full",children:[n.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-pink-400 to-purple-500 rounded-xl flex items-center justify-center flex-shrink-0",children:n.jsx(wb,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("h4",{className:"text-white text-sm font-medium truncate",children:kt?kt.title:`AI in ${Mr==="FINANCE"?"Finance":Mr==="IT"?"Tech":Mr==="COMMODITY"?"Commodity":Mr==="GLOBAL"?"Global":Mr==="BANKS"?"Banking":Mr==="AUTOMOBILE"?"Auto":"Finance"}`}),n.jsx(qN,{className:"w-3 h-3 text-slate-400 flex-shrink-0"})]}),n.jsx("p",{className:"text-slate-400 text-xs mb-2",children:"19 minutes"}),n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("span",{className:"text-slate-400 text-xs",children:"14:07"}),n.jsx("div",{className:"flex-1 bg-slate-600 rounded-full h-1",children:n.jsx("div",{className:"bg-purple-400 h-1 rounded-full w-3/4"})}),n.jsx("span",{className:"text-slate-400 text-xs",children:"-5:04"})]}),n.jsxs("div",{className:"flex items-center justify-center gap-3",children:[n.jsx(H,{variant:"ghost",size:"sm",className:"text-slate-400 hover:text-white w-6 h-6 p-0",children:n.jsx(gse,{className:"w-3 h-3"})}),n.jsx(H,{variant:"ghost",size:"sm",className:"text-white w-6 h-6 p-0",children:n.jsx(G2,{className:"w-3 h-3"})}),n.jsx(H,{variant:"ghost",size:"sm",className:"text-slate-400 hover:text-white w-6 h-6 p-0",children:n.jsx(xse,{className:"w-3 h-3"})})]})]})]})})]})]})]}):n.jsxs("div",{className:`min-h-screen bg-background overscroll-none touch-pan-y ${ct?"pointer-events-none opacity-30 blur-sm":""}`,children:[n.jsxs("div",{className:"hidden fixed left-0 top-0 bottom-0 w-64 chatgpt-sidebar border-r border-gray-700 flex flex-col z-40 md:bottom-0 bottom-[env(safe-area-inset-bottom)] pb-[env(safe-area-inset-bottom)] touch-none",children:[n.jsx("div",{className:"p-4 border-b border-gray-700",children:n.jsx("h1",{className:"text-xl font-semibold sidebar-text",children:"Trading Platform"})}),n.jsxs("nav",{className:"flex-1 p-4 space-y-2",children:[n.jsxs("div",{className:"space-y-1 bg-white dark:bg-gray-900/50 rounded-lg p-3",children:[n.jsx("p",{className:"text-xs font-medium sidebar-muted uppercase tracking-wide mb-3",children:"Dashboard & Overview"}),n.jsxs("button",{onClick:()=>qt("dashboard"),className:`w-full text-left px-3 py-2 rounded-lg text-sm transition-colors flex items-center gap-2 sidebar-text ${a==="dashboard"?"bg-primary text-primary-foreground":"hover:bg-accent hover:bg-opacity-50"}`,children:[n.jsx(b6,{className:"h-4 w-4"}),"Market Dashboard"]})]}),n.jsxs("div",{className:"space-y-1 pt-4",children:[n.jsx("p",{className:"text-xs font-medium sidebar-muted uppercase tracking-wide mb-3",children:"Core Trading Tools"}),n.jsx("button",{onClick:()=>qt("backtest"),className:`w-full text-left px-3 py-2 rounded-lg text-sm transition-colors sidebar-text ${a==="backtest"?"bg-primary text-primary-foreground":"hover:bg-accent hover:bg-opacity-50"}`,children:"Backtest"}),n.jsx("button",{onClick:Xr,className:`w-full text-left px-3 py-2 rounded-lg text-sm transition-colors sidebar-text ${a==="trading-master"?"bg-primary text-primary-foreground":"hover:bg-accent hover:bg-opacity-50"}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Jl,{className:"h-4 w-4"}),"Trading Master"]})})]}),n.jsxs("div",{className:"space-y-1 pt-4",children:[n.jsx("p",{className:"text-xs font-medium sidebar-muted uppercase tracking-wide mb-3",children:"Analysis & Monitoring"}),n.jsx("button",{onClick:()=>Br("journal"),className:`w-full text-left px-3 py-2 rounded-lg text-sm transition-colors sidebar-text ${a==="journal"?"bg-primary text-primary-foreground":"hover:bg-accent hover:bg-opacity-50"}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(yb,{className:"h-4 w-4"}),"Journal"]})})]}),n.jsxs("div",{className:"space-y-1 pt-4",children:[n.jsx("p",{className:"text-xs font-medium sidebar-muted uppercase tracking-wide mb-3",children:"Tools & Support"}),n.jsx("button",{onClick:()=>qt("trading-home"),className:`w-full text-left px-3 py-2 rounded-lg text-sm transition-colors sidebar-text ${a==="trading-home"?"bg-primary text-primary-foreground":"hover:bg-accent hover:bg-opacity-50"}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(dj,{className:"h-4 w-4"}),"Trading Home"]})}),n.jsx("button",{onClick:()=>Br("voice"),className:`w-full text-left px-3 py-2 rounded-lg text-sm transition-colors sidebar-text ${a==="voice"?"bg-primary text-primary-foreground":"hover:bg-accent hover:bg-opacity-50"}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(l0,{className:"h-4 w-4"}),"Social Feed"]})})]})]}),n.jsxs("div",{className:"p-4 border-t border-gray-700 space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-xs sidebar-muted",children:"Theme"}),n.jsx("button",{onClick:s,className:"flex items-center gap-2 px-2 py-1 rounded-md bg-accent hover:bg-accent/80 transition-colors text-xs sidebar-text border border-border",title:`Switch to ${r==="dark"?"light":"dark"} mode`,children:r==="dark"?n.jsxs(n.Fragment,{children:[n.jsx(sP,{className:"h-3 w-3"}),"Light"]}):n.jsxs(n.Fragment,{children:[n.jsx(nP,{className:"h-3 w-3"}),"Dark"]})})]}),n.jsx("div",{className:"text-xs sidebar-muted text-center",children:"Trading Platform v1.0"})]})]}),n.jsxs("div",{className:"flex flex-col chatgpt-main-content min-h-screen md:min-h-screen min-h-[100dvh] overscroll-none",children:[n.jsx("main",{className:"flex-1 overflow-hidden",children:n.jsxs("div",{className:"h-full overflow-auto",children:[a==="dashboard"&&localStorage.getItem("currentUserEmail")==="chiranjeevi.perala99@gmail.com"&&n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"text-center space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-center gap-3",children:[n.jsx(b6,{className:"h-6 w-6 text-yellow-400"}),n.jsx("h2",{className:"text-2xl font-bold text-orange-400",children:"Trading Dashboard"})]}),n.jsx("p",{className:"text-orange-300",children:"Real-time market data via Angel One SmartAPI"})]}),n.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-lg border border-slate-200 dark:border-slate-800 shadow-sm",children:[n.jsx("div",{className:"border-b border-slate-200 dark:border-slate-800 px-6 py-4",children:n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Angel One Connection"}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Automatic TOTP authentication - No daily token refresh needed"})]})})}),n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-800 rounded-lg p-3",children:n.jsxs("p",{className:"text-sm text-green-800 dark:text-green-200",children:[n.jsx("strong",{children:" Angel One SmartAPI:"})," Free API with automatic authentication. Perfect for real-time trading and market data."]})}),n.jsx(yle,{})]})})]}),n.jsx(Cle,{}),n.jsx(vle,{}),n.jsx(Nle,{}),n.jsx(ble,{}),n.jsx(wle,{})]}),a==="trading-home"&&n.jsxs("div",{className:"relative min-h-screen overflow-hidden",children:[n.jsx("div",{className:"fixed inset-0 bg-gradient-to-b from-blue-800 to-blue-900 z-10 flex items-start justify-end pt-20 px-0 md:items-center md:justify-center md:pt-0 md:px-6",children:n.jsx("div",{className:"w-auto md:w-full md:max-w-sm space-y-6 pr-4 md:pr-0",children:ue.userId?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-4 pb-2",children:[n.jsx("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center flex-shrink-0",children:n.jsx("span",{className:"text-white font-semibold text-xl",children:(ue.displayName||ue.username||"U").charAt(0).toUpperCase()})}),n.jsxs("div",{className:"flex flex-col min-w-0",children:[n.jsx("p",{className:"text-white font-semibold text-base",children:ue.displayName||"User"}),n.jsxs("p",{className:"text-blue-200 text-sm",children:["@",ue.username||"username"]})]})]}),n.jsxs("div",{className:"space-y-3 flex flex-col",children:[n.jsx("button",{className:"w-full px-4 py-3 text-white hover:bg-white/10 rounded-lg transition-colors text-left","data-testid":"nav-profile",children:"profile"}),n.jsx("button",{className:"w-full px-4 py-3 text-white hover:bg-white/10 rounded-lg transition-colors text-left","data-testid":"nav-saved",children:"saved"}),localStorage.getItem("currentUserEmail")==="chiranjeevi.perala99@gmail.com"&&n.jsxs("button",{onClick:()=>{ur("dashboard"),R(!1)},className:"w-full px-4 py-3 text-white hover:bg-white/10 rounded-lg transition-colors flex items-center gap-2","data-testid":"nav-dashboard",children:[n.jsx(ia,{className:"h-4 w-4"}),n.jsx("span",{children:"dashboard"})]}),n.jsxs("button",{onClick:()=>ee(!0),className:"w-full px-4 py-3 text-white hover:bg-white/10 rounded-lg transition-colors text-left flex items-center gap-2","data-testid":"nav-settings",children:[n.jsx(uj,{className:"h-4 w-4"}),n.jsx("span",{children:"setting & privacy"})]}),n.jsx("button",{onClick:s,className:"w-full px-4 py-3 text-white hover:bg-white/10 rounded-lg transition-colors flex items-center gap-2","data-testid":"nav-dark-theme",children:r==="dark"?n.jsxs(n.Fragment,{children:[n.jsx(sP,{className:"h-4 w-4"}),n.jsx("span",{children:"light mode"})]}):n.jsxs(n.Fragment,{children:[n.jsx(nP,{className:"h-4 w-4"}),n.jsx("span",{children:"dark mode"})]})}),n.jsxs("button",{onClick:async()=>{try{await ES(),localStorage.clear(),window.location.href="/login"}catch(y){console.error("Logout error:",y)}},className:"w-full px-4 py-3 text-white hover:bg-white/10 rounded-lg transition-colors flex items-center gap-2","data-testid":"nav-logout",children:[n.jsx(bA,{className:"h-4 w-4"}),n.jsx("span",{children:"logout"})]})]})]}):n.jsx("div",{className:"flex flex-col items-center justify-center space-y-4",children:n.jsx("button",{onClick:()=>{window.location.href="/login"},className:"w-full px-6 py-3 bg-white text-blue-900 hover:bg-blue-50 rounded-lg transition-colors font-semibold text-center","data-testid":"nav-login",children:"Login"})})})}),X&&n.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:()=>ee(!1),children:n.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4 shadow-2xl border border-gray-700",onClick:y=>y.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-white",children:"Settings & Privacy"}),n.jsx("button",{onClick:()=>ee(!1),className:"p-2 hover:bg-gray-700 rounded-lg transition-colors","data-testid":"button-close-settings",children:n.jsx(Wr,{className:"h-5 w-5 text-gray-400"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-900/50 rounded-lg border border-gray-700",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(rP,{className:"h-5 w-5 text-blue-400"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-white font-medium",children:"Email Verification"}),n.jsx("p",{className:"text-sm text-gray-400",children:(ue==null?void 0:ue.email)||localStorage.getItem("currentUserEmail")||"Not available"})]})]}),Y===null?n.jsx("div",{className:"w-5 h-5 border-2 border-gray-500 border-t-transparent rounded-full animate-spin"}):Y?n.jsxs("div",{className:"flex items-center gap-1 text-green-400 text-sm",children:[n.jsx(Bc,{className:"h-4 w-4"}),n.jsx("span",{children:"Verified"})]}):n.jsx("span",{className:"text-yellow-400 text-sm",children:"Not verified"})]}),Y===!1&&n.jsxs("div",{className:"p-4 bg-blue-900/30 rounded-lg border border-blue-700/50 space-y-4",children:[oe?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-2 text-green-400 text-sm mb-3",children:[n.jsx(Bc,{className:"h-4 w-4"}),n.jsx("span",{children:"Verification code sent to your email"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(Nr,{type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:6,placeholder:"Enter 6-digit code",value:le,onChange:y=>{const E=y.target.value.replace(/\D/g,"");te(E)},className:"w-full bg-gray-800 border-gray-600 text-white text-center text-lg tracking-widest","data-testid":"input-verification-code"}),n.jsx("button",{onClick:Ee,disabled:Z||le.length!==6,className:"w-full py-3 bg-green-600 hover:bg-green-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2","data-testid":"button-confirm-verification",children:Z?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),n.jsx("span",{children:"Verifying..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(Bc,{className:"h-4 w-4"}),n.jsx("span",{children:"Confirm"})]})}),n.jsx("button",{onClick:()=>{U(!1),te(""),be("")},className:"w-full py-2 text-gray-400 hover:text-white text-sm transition-colors","data-testid":"button-resend-code",children:"Resend Code"})]})]}):n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"text-sm text-gray-300",children:"Verify your email to secure your account and receive important notifications."}),n.jsx("button",{onClick:ce,disabled:de,className:"w-full py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-800 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2","data-testid":"button-send-verification",children:de?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),n.jsx("span",{children:"Sending..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(rP,{className:"h-4 w-4"}),n.jsx("span",{children:"Verify Email"})]})})]}),W&&n.jsx("p",{className:"text-red-400 text-sm text-center",children:W})]}),Y===!0&&n.jsx("div",{className:"p-4 bg-green-900/30 rounded-lg border border-green-700/50",children:n.jsxs("div",{className:"flex items-center gap-2 text-green-400",children:[n.jsx(Bc,{className:"h-5 w-5"}),n.jsx("span",{children:"Your email is verified and secured"})]})})]})]})}),n.jsxs("button",{onClick:y=>{y.stopPropagation(),R(!A)},className:"md:hidden fixed top-4 right-4 z-50 w-10 h-10 flex flex-col items-center justify-center gap-1.5 bg-transparent hover:bg-black/10 dark:hover:bg-white/10 rounded-lg transition-all duration-300","data-testid":"button-nav-toggle",children:[n.jsx("div",{className:`h-0.5 bg-gray-900 dark:bg-white transition-all duration-300 ${A?"w-5 rotate-45 translate-y-1":"w-5"}`}),n.jsx("div",{className:`h-0.5 bg-gray-900 dark:bg-white transition-all duration-300 ${A?"w-5 -rotate-45 -translate-y-1":"w-4 ml-1"}`})]}),n.jsxs("div",{onClick:()=>A&&R(!1),className:`min-h-screen bg-gray-900 flex flex-col transition-all duration-500 ease-out relative z-20 ${A?"scale-90 -translate-x-[70%] rounded-tr-3xl shadow-2xl":"scale-100 translate-x-0"}`,style:{transformOrigin:"right center"},children:[!We&&n.jsx("div",{className:"w-full flex items-center justify-center py-3",style:{background:r==="dark"?"#1a1a1a":"#e3f2fd"},children:n.jsx("div",{className:"w-full md:max-w-lg flex items-center justify-center",children:n.jsx(XPe,{})})}),n.jsx("div",{className:"w-full hidden bg-blue-900 px-4 py-3 flex justify-center pt-[1px] pb-[1px] pt-[1px] pb-[1px]",children:n.jsx("div",{className:"text-center",children:Ce?n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx(Oc,{className:"h-4 w-4 text-blue-400"}),n.jsx("h1",{className:"text-lg font-normal text-gray-100",children:"Welcome to Trading Platform"})]}):je?n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx(Oc,{className:"h-4 w-4 text-blue-400"}),n.jsxs("h1",{className:"text-lg font-normal text-gray-100",children:["Hey ",(ue==null?void 0:ue.displayName)||(ue==null?void 0:ue.username)||"Trader"]})]}):n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[Te[Oe].isProfit?n.jsx(Gn,{className:"h-4 w-4 text-green-400"}):n.jsx($c,{className:"h-4 w-4 text-red-400"}),n.jsxs("span",{className:`text-sm font-semibold ${Te[Oe].isProfit?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[Te[Oe].symbol,": ",Te[Oe].price]})]})})}),n.jsxs("div",{className:`w-full bg-blue-900 flex flex-col items-center justify-start md:py-6 py-0 md:px-4 px-0 relative overflow-y-auto ${We?"h-screen":"h-[75vh] md:h-[69vh]"}`,children:[n.jsxs("div",{className:"max-w-4xl w-full md:space-y-4",children:[!We&&n.jsxs("div",{className:`relative mx-auto transition-all duration-300 md:block hidden ${Ue?"max-w-4xl":"max-w-2xl"}`,children:[n.jsx(Nr,{placeholder:"Search stocks, technical analysis, social feed, news, journal, alerts, or ask AI anything...",value:Le,onFocus:()=>Ae(!0),onChange:y=>{const E=y.target.value;Ie(E),Ae(E.length>0)},onKeyPress:async y=>{y.key==="Enter"&&Le.trim()&&await kr()},className:`w-full transition-all duration-300 bg-gray-800 border-gray-700 text-gray-100 placeholder-gray-400 pr-12 text-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${Ue?"h-14 rounded-xl":"h-12 rounded-2xl"}`}),n.jsx(H,{size:"sm",className:"absolute right-2 top-1/2 -translate-y-1/2 bg-gray-700 hover:bg-gray-600 text-gray-300 h-6 w-6 p-0",onClick:()=>kr(),disabled:!Le.trim()||It,children:It?n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):n.jsx(Pu,{className:"h-4 w-4"})})]}),We&&n.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 md:block hidden",children:n.jsx("div",{className:"w-full bg-blue-900/30 backdrop-blur-sm border-t border-gray-700 px-4 py-3",children:n.jsxs("div",{className:"max-w-4xl mx-auto flex gap-2",children:[n.jsx(Nr,{placeholder:"New search...",value:Le,onChange:y=>{const E=y.target.value;Ie(E)},onKeyPress:async y=>{y.key==="Enter"&&Le.trim()&&await kr()},className:"flex-1 bg-gray-800 border-gray-700 text-gray-100 placeholder-gray-400 h-10 text-sm"}),n.jsx(H,{size:"sm",className:"bg-gray-700 hover:bg-gray-600 text-gray-300 h-10 px-4",onClick:()=>kr(),disabled:!Le.trim()||It,children:It?n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):n.jsx(Pu,{className:"h-4 w-4"})}),n.jsx(H,{size:"sm",variant:"ghost",className:"text-gray-400 hover:text-gray-200 h-10 px-3",onClick:()=>{Ie(""),Ae(!1),ot("")},children:n.jsx(Wr,{className:"h-4 w-4"})})]})})}),Ue&&n.jsx("div",{className:"max-w-5xl mx-auto mt-4 animate-in slide-in-from-top-4 duration-300 md:block hidden",children:n.jsx("div",{className:"bg-gray-800/50 backdrop-blur-sm border border-gray-700 rounded-xl p-4",children:We?n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"flex items-center gap-2 pb-3 border-b border-transparent",children:We.includes("[CHART:WATCHLIST]")?n.jsxs(n.Fragment,{children:[n.jsx(Au,{className:"h-4 w-4 text-gray-700 dark:text-blue-400"}),n.jsx("h3",{className:"text-lg font-medium text-gray-100",children:"Watchlist"})]}):We.includes("[CHART:TRADE]")?n.jsxs(n.Fragment,{children:[n.jsx(Ac,{className:"h-4 w-4 text-orange-400"}),n.jsx("h3",{className:"text-lg font-medium text-gray-100",children:"Trading Challenge"})]}):n.jsxs(n.Fragment,{children:[n.jsx(Pu,{className:"h-4 w-4 text-blue-400"}),n.jsx("h3",{className:"text-lg font-medium text-gray-100",children:"AI Assistant"})]})}),n.jsxs("div",{className:"prose prose-invert max-w-none",children:[n.jsx("div",{className:"text-gray-300 whitespace-pre-wrap leading-relaxed",children:(()=>{var M,z,K;let y=null,E=We;if(We.includes("[CHART:PRICE_CHART]")){const G=window.aiAssistantPriceChartData||[],$=window.aiAssistantStockData||{};E=We.split("[CHART:PRICE_CHART]")[1]||"";const c=["1D","5D","1M","6M","1Y"],u=Lr,p=G[G.length-1],v=G[0],k=(p==null?void 0:p.price)||0,_=p&&v?p.price-v.price:0,F=v!=null&&v.price?_/v.price*100:0,se=$.name||"Stock Price";y=n.jsxs("div",{className:"flex gap-4",children:[G.length>0&&n.jsxs("div",{className:"flex-1 mb-4 bg-gray-900/50 rounded-lg p-4 border border-gray-600",children:[n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("div",{className:"flex gap-1.5",children:c.map(J=>n.jsx("button",{onClick:async()=>{var ye;Tr(J),window.aiAssistantSelectedTimeframe=J;const xe=((ye=window.companyInsightsData)==null?void 0:ye.symbol)||"";if(xe)try{const Pe=await fetch(ha(`/api/stock-chart-data/${xe}?timeframe=${J}`));if(Pe.ok){const De=await Pe.json();De&&De.length>0&&(window.aiAssistantPriceChartData=De,window.dispatchEvent(new Event("timeframeChange")))}}catch(Pe){console.warn("Failed to fetch chart data for timeframe:",Pe)}},"data-testid":`button-timeframe-${J}`,className:`px-3 py-1 rounded-md text-xs font-medium transition-colors ${u===J?"bg-blue-500 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700"}`,children:J},J))}),n.jsx("div",{className:"text-right",children:n.jsx("div",{className:"flex items-center gap-2 justify-end",children:n.jsxs("div",{children:[n.jsxs("div",{className:"text-sm font-semibold text-gray-100",children:["",k.toLocaleString("en-IN",{maximumFractionDigits:2})]}),n.jsxs("div",{className:`text-xs font-medium ${_>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[_>=0?"":""," ",Math.abs(_).toFixed(2)," (",F>=0?"+":"",F.toFixed(2),"%)"]})]})})})]}),n.jsx("div",{className:"text-sm font-medium text-gray-300 mb-3",children:se})]}),n.jsx("div",{className:"h-56 w-full",children:n.jsx(yi,{width:"100%",height:"100%",children:n.jsxs(Dd,{data:G,margin:{top:5,right:20,left:1.5,bottom:5},children:[n.jsx(Sa,{dataKey:"time",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"#64748b"},tickCount:8}),n.jsx(ma,{domain:["dataMin - 10","dataMax + 10"],axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"#64748b"},width:35,tickFormatter:J=>`${(J/1e3).toFixed(0)}K`}),n.jsx(zs,{content:({active:J,payload:xe,label:ye})=>{if(!J||!xe||!xe.length)return null;const Pe=xe[0].value;return n.jsxs("div",{style:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"6px",color:"#e2e8f0",padding:"8px 16px",fontSize:"13px",minWidth:"140px",boxShadow:"0 4px 12px rgba(0,0,0,0.4)",display:"flex",alignItems:"center",gap:"12px"},children:[n.jsxs("span",{style:{fontSize:"13px",fontWeight:"500"},children:["",Number(Pe).toFixed(2)]}),n.jsx("div",{style:{width:"1px",height:"20px",backgroundColor:"#475569"}}),n.jsx("span",{style:{fontSize:"12px",color:"#94a3b8"},children:ye})]})}}),n.jsx(Is,{type:"linear",dataKey:"price",stroke:"#ef4444",strokeWidth:2,dot:!1,activeDot:{r:4,fill:"#ef4444"}}),k>0&&n.jsx(nf,{y:k,stroke:_>=0?"#22c55e":"#ef4444",strokeDasharray:"4 4",strokeWidth:1,opacity:.6})]})})}),G.length>0&&(()=>{const J=G[0],xe=G[G.length-1],ye=G.map(et=>et.price),Pe=(J==null?void 0:J.price)||0,De=Math.max(...ye),Ve=Math.min(...ye),Be=(xe==null?void 0:xe.price)||0;return n.jsxs("div",{className:"mt-4 grid grid-cols-4 gap-2",children:[n.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-3 border border-gray-700",children:[n.jsx("div",{className:"text-xs font-medium text-gray-400 mb-1",children:"Open"}),n.jsxs("div",{className:"text-sm font-semibold text-gray-100",children:["",Pe.toFixed(2)]})]}),n.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-3 border border-gray-700",children:[n.jsx("div",{className:"text-xs font-medium text-gray-400 mb-1",children:"High"}),n.jsxs("div",{className:"text-sm font-semibold text-green-400",children:["",De.toFixed(2)]})]}),n.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-3 border border-gray-700",children:[n.jsx("div",{className:"text-xs font-medium text-gray-400 mb-1",children:"Low"}),n.jsxs("div",{className:"text-sm font-semibold text-red-400",children:["",Ve.toFixed(2)]})]}),n.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-3 border border-gray-700",children:[n.jsx("div",{className:"text-xs font-medium text-gray-400 mb-1",children:"Close"}),n.jsxs("div",{className:`text-sm font-semibold ${Be>=Pe?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:["",Be.toFixed(2)]}),n.jsxs("div",{className:`text-xs font-medium ${Be>=Pe?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[Be>=Pe?"+":"",((Be-Pe)/Pe*100).toFixed(2),"%"]})]})]})})()]}),n.jsxs("div",{className:"flex-1 bg-gray-900/50 rounded-lg p-4 border border-gray-600",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(sm,{className:"h-4 w-4 text-gray-400"}),n.jsx("h3",{className:"text-sm font-medium text-gray-200",children:"Related News"})]}),n.jsxs(H,{variant:"ghost",size:"sm",className:"h-7 text-xs text-gray-400 hover:text-gray-200",onClick:()=>{var xe;Oo(!0);const J=((xe=window.companyInsightsData)==null?void 0:xe.symbol)||nt;if(J){const ye=J.replace("-EQ","").replace("-BE","");fetch(`/api/stock-news/${ye}?refresh=${Date.now()}`).then(Pe=>Pe.json()).then(Pe=>{const De=Array.isArray(Pe)?Pe:Pe.news||[];Ls(De.slice(0,20))}).finally(()=>Oo(!1))}},"data-testid":"button-refresh-search-news",children:[n.jsx(go,{className:`h-3 w-3 mr-1 ${Xs?"animate-spin":""}`}),"Refresh"]})]}),n.jsx("div",{className:"space-y-3 max-h-[320px] overflow-y-auto mb-4",children:Xs?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(Vo,{className:"h-6 w-6 animate-spin text-gray-400"})}):ss.length>0?ss.map((J,xe)=>n.jsxs("div",{className:"p-3 bg-gray-800/50 rounded-lg hover:bg-gray-700/50 transition-colors cursor-pointer border border-gray-700",onClick:()=>window.open(J.url,"_blank","noopener,noreferrer"),"data-testid":`search-news-item-${xe}`,children:[n.jsxs("h4",{className:"text-gray-200 font-medium text-sm mb-2 hover:text-gray-100 transition-colors line-clamp-2",children:[J.title," ",n.jsx(vb,{className:"h-3 w-3 inline ml-1"})]}),n.jsx("p",{className:"text-gray-400 text-xs line-clamp-3",children:J.summary})]},xe)):n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-gray-400 text-sm",children:"No news available"})})})]})]})}if(We.includes("[CHART:WATCHLIST]")){ra.find($=>$.symbol===ns);const G=ns.replace("-EQ","").replace("-BE","");return y=n.jsxs("div",{className:"flex gap-4 w-full",children:[n.jsxs("div",{className:"flex-1 space-y-4",children:[n.jsx("div",{className:"bg-gray-900/50 rounded-lg p-3 border border-gray-600",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-200",children:"NIFTY 50"}),n.jsxs("span",{className:"text-xs text-green-400 flex items-center gap-1",children:[n.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"}),"Live"]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-sm font-mono text-gray-100",children:["",kc().toLocaleString("en-IN",{maximumFractionDigits:2})]}),n.jsxs("div",{className:`text-xs flex items-center justify-end gap-0.5 ${nl()>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[nl()>=0?"":""," ",Math.abs(nl()).toFixed(2)," (",(nl()/(kc()-nl())*100).toFixed(2),"%)"]})]})]}),n.jsx("div",{className:"flex items-center gap-1",children:["1D","5D","1M","6M","1Y"].map($=>n.jsx(H,{variant:"ghost",size:"sm",onClick:()=>Rf($),className:`px-1.5 py-0.5 text-xs h-6 ${xd===$?"bg-blue-600/20 text-blue-400":"text-gray-400 hover:text-gray-200 hover:bg-gray-700/50"}`,children:$},$))}),n.jsx("div",{className:"h-48 w-full bg-gray-800/30 rounded-lg p-2",children:n.jsx(yi,{width:"100%",height:"100%",children:n.jsxs(Dd,{data:fu?[]:Jm,margin:{top:5,right:15,left:50,bottom:5},children:[n.jsx(Sa,{dataKey:"time",axisLine:!1,tickLine:!1,tick:{fontSize:9,fill:"#64748b"},tickCount:5}),n.jsx(ma,{domain:["dataMin - 50","dataMax + 50"],type:"number",axisLine:!1,tickLine:!1,tick:{fontSize:9,fill:"#64748b"},width:10}),n.jsx(zs,{content:({active:$,payload:ae,label:c})=>{if(!$||!ae||!ae.length)return null;const u=ae[0].value;return n.jsxs("div",{style:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"6px",color:"#e2e8f0",padding:"8px 16px",fontSize:"13px",minWidth:"140px",boxShadow:"0 4px 12px rgba(0,0,0,0.4)",display:"flex",alignItems:"center",gap:"12px"},children:[n.jsxs("span",{style:{fontSize:"13px",fontWeight:"500"},children:["",Number(u).toFixed(2)]}),n.jsx("div",{style:{width:"1px",height:"20px",backgroundColor:"#475569"}}),n.jsx("span",{style:{fontSize:"12px",color:"#94a3b8"},children:c})]})}}),n.jsx(Is,{type:"linear",dataKey:"price",stroke:"#ef4444",strokeWidth:2,dot:!1,activeDot:{r:4,fill:"#ef4444"}}),n.jsx(nf,{y:Zm(),stroke:"#64748b",strokeDasharray:"2 2",strokeWidth:1})]})})})]})}),n.jsx("div",{className:"bg-gray-900/50 rounded-lg p-3 border border-gray-600",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-200",children:((M=ra.find($=>$.symbol===ns))==null?void 0:M.displayName)||ns.replace("-EQ","").replace("-BE","")}),n.jsxs("span",{className:"text-xs text-green-400 flex items-center gap-1",children:[n.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"}),"Live"]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-sm font-mono text-gray-100",children:["",mu().toLocaleString("en-IN",{maximumFractionDigits:2})]}),n.jsxs("div",{className:`text-xs flex items-center justify-end gap-0.5 ${Ul()>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[Ul()>=0?"":""," ",Math.abs(Ul()).toFixed(2)," (",(Ul()/(mu()-Ul())*100).toFixed(2),"%)"]})]})]}),n.jsx("div",{className:"flex items-center gap-1",children:["1D","5D","1M","6M","1Y"].map($=>n.jsx(H,{variant:"ghost",size:"sm",onClick:()=>rl($),className:`px-1.5 py-0.5 text-xs h-6 ${hu===$?"bg-blue-600/20 text-blue-400":"text-gray-400 hover:text-gray-200 hover:bg-gray-700/50"}`,children:$},$))}),n.jsx("div",{className:"h-48 w-full bg-gray-800/30 rounded-lg p-2",children:n.jsx(yi,{width:"100%",height:"100%",children:n.jsxs(Dd,{data:Xm?[]:wg,margin:{top:5,right:15,left:50,bottom:5},children:[n.jsx(Sa,{dataKey:"time",axisLine:!1,tickLine:!1,tick:{fontSize:9,fill:"#64748b"},tickCount:5}),n.jsx(ma,{domain:["dataMin - 50","dataMax + 50"],type:"number",axisLine:!1,tickLine:!1,tick:{fontSize:9,fill:"#64748b"},width:10}),n.jsx(zs,{content:({active:$,payload:ae,label:c})=>{if(!$||!ae||!ae.length)return null;const u=ae[0].value;return n.jsxs("div",{style:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"6px",color:"#e2e8f0",padding:"8px 16px",fontSize:"13px",minWidth:"140px",boxShadow:"0 4px 12px rgba(0,0,0,0.4)",display:"flex",alignItems:"center",gap:"12px"},children:[n.jsxs("span",{style:{fontSize:"13px",fontWeight:"500"},children:["",Number(u).toFixed(2)]}),n.jsx("div",{style:{width:"1px",height:"20px",backgroundColor:"#475569"}}),n.jsx("span",{style:{fontSize:"12px",color:"#94a3b8"},children:c})]})}}),n.jsx(Is,{type:"linear",dataKey:"price",stroke:"#10b981",strokeWidth:2,dot:!1,activeDot:{r:4,fill:"#10b981"}}),n.jsx(nf,{y:ep(),stroke:"#64748b",strokeDasharray:"2 2",strokeWidth:1})]})})})]})}),n.jsxs("div",{className:"bg-gray-900/50 rounded-lg p-3 border border-gray-600",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-200",children:"My Watchlist"}),n.jsxs("span",{className:"text-xs text-gray-400",children:[ra.length," stocks"]})]}),n.jsxs("div",{className:"relative mb-3",children:[n.jsx(Nr,{placeholder:"Search to add stock...",value:gd,onChange:$=>{Nh($.target.value),tp($.target.value)},className:"h-8 text-xs bg-gray-800 border-gray-600 text-gray-200 placeholder:text-gray-500","data-testid":"input-watchlist-search"}),Of.length>0&&n.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-gray-800 border border-gray-600 rounded-lg z-50 max-h-40 overflow-y-auto",children:Of.map(($,ae)=>n.jsxs("div",{className:"px-3 py-2 border-b border-gray-700 last:border-b-0 flex items-center justify-between hover:bg-gray-700/50 transition-colors","data-testid":`watchlist-search-result-${ae}`,children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"text-xs font-medium text-gray-200",children:$.displayName||$.symbol}),n.jsx("div",{className:"text-xs text-gray-400 truncate",children:$.name})]}),n.jsx("button",{onClick:()=>{Df($),Nh("")},className:"ml-2 flex-shrink-0 text-gray-400 hover:text-green-400 transition-colors p-1","data-testid":`button-add-watchlist-${ae}`,children:n.jsx(vi,{className:"h-4 w-4"})})]},ae))})]}),n.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:ra.map(($,ae)=>n.jsxs("div",{className:`flex items-center justify-between px-2 py-2 rounded-lg cursor-pointer transition-colors ${ns===$.symbol?"bg-blue-600/30 border border-blue-500/50":"hover:bg-gray-700/50"}`,onClick:()=>Wn($.symbol),"data-testid":`watchlist-item-${ae}`,children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:`w-2 h-2 rounded-full ${ns===$.symbol?"bg-blue-400":"bg-gray-500"}`}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs font-medium text-gray-200",children:$.displayName||$.symbol.replace("-EQ","")}),n.jsx("div",{className:"text-xs text-gray-500 truncate max-w-[150px]",children:$.name})]})]}),n.jsx("button",{onClick:c=>{c.stopPropagation(),$f($.symbol)},className:"text-gray-500 hover:text-red-400 transition-colors p-1","data-testid":`button-remove-watchlist-${ae}`,children:n.jsx(Wr,{className:"h-3 w-3"})})]},$.symbol))})]})]}),n.jsxs("div",{className:"flex-1 bg-gray-900/50 rounded-lg p-4 border border-gray-600",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(sm,{className:"h-4 w-4 text-gray-400"}),n.jsxs("h3",{className:"text-sm font-medium text-gray-200",children:["Related News for ",G]})]}),n.jsxs(H,{variant:"ghost",size:"sm",className:"h-7 text-xs text-gray-400 hover:text-gray-200",onClick:()=>{Oo(!0),fetch(`/api/stock-news/${G}?refresh=${Date.now()}`).then($=>$.json()).then($=>{const ae=Array.isArray($)?$:$.news||[];Ls(ae.slice(0,20))}).finally(()=>Oo(!1))},"data-testid":"button-refresh-news",children:[n.jsx(go,{className:`h-3 w-3 mr-1 ${Xs?"animate-spin":""}`}),"Refresh"]})]}),n.jsx("div",{className:"space-y-3 max-h-[320px] overflow-y-auto mb-4",children:Xs?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(Vo,{className:"h-6 w-6 animate-spin text-gray-400"})}):ss.length>0?ss.map(($,ae)=>n.jsxs("div",{className:"p-3 bg-gray-800/50 rounded-lg hover:bg-gray-700/50 transition-colors cursor-pointer border border-gray-700",onClick:()=>window.open($.url,"_blank","noopener,noreferrer"),"data-testid":`news-item-${ae}`,children:[n.jsxs("h4",{className:"text-gray-200 font-medium text-sm mb-2 hover:text-gray-100 transition-colors line-clamp-2",children:[$.title," ",n.jsx(vb,{className:"h-3 w-3 inline ml-1"})]}),$.description&&n.jsx("p",{className:"text-gray-400 text-xs mb-2 line-clamp-2",children:$.description}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-500 text-xs",children:$.source}),n.jsx("span",{className:"text-gray-500 text-xs",children:Ng($.publishedAt)})]})]},ae)):n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(HN,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),n.jsxs("p",{className:"text-sm",children:["No news available for ",G]}),n.jsx("p",{className:"text-xs mt-1",children:"Select a stock from the watchlist"})]})}),n.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Gn,{className:"h-4 w-4 text-gray-400"}),n.jsxs("h3",{className:"text-sm font-medium text-gray-200",children:["Quarterly Performance Trend ",n.jsx("span",{className:"text-xs text-gray-500 ml-1",children:"(Net profit)"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[nt&&n.jsx(H,{variant:"ghost",size:"sm",onClick:async()=>{ca(!0);try{const $=nt.replace("-EQ","").replace("-BE",""),ae=await fetch(`/api/quarterly-results/${$}`);if(ae.ok){const c=await ae.json();Sc(u=>({...u,[nt]:c.results||[]}))}}catch($){console.error("Error refreshing quarterly data:",$)}finally{ca(!1)}},"data-testid":"button-refresh-quarterly",className:"h-7 px-2",children:n.jsx(go,{className:`h-3 w-3 ${Gm?"animate-spin":""}`})}),(()=>{var c;if(!nt)return null;const $=uu[nt]||[],ae=$.length>1&&parseFloat(((c=$[$.length-1])==null?void 0:c.change_percent)||"0")>=0;return n.jsx("span",{className:`text-xs px-2 py-1 rounded ${ae?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:ae?" Uptrend":" Downtrend"})})()]})]}),n.jsx("div",{className:"space-y-1",children:Gm?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(Vo,{className:"h-5 w-5 animate-spin text-gray-400"})}):nt?(()=>{var p;const $=uu[nt]||[];if(!$||$.length===0)return Gm?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(Vo,{className:"h-5 w-5 animate-spin text-gray-400 mx-auto mb-2"}),n.jsx("p",{className:"text-xs",children:"Loading quarterly results..."})]}):n.jsx("div",{className:"text-center py-4 text-gray-500 text-xs",children:"No quarterly data available"});const ae=$.length>1&&parseFloat(((p=$[$.length-1])==null?void 0:p.change_percent)||"0")>=0,c=$.map(v=>({quarter:v.quarter,value:parseFloat(v.revenue.replace(/,/g,""))||0,changePercent:parseFloat(v.change_percent)||0})),u=ae?"#22c55e":"#ef4444";return $.length>0?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"h-40 w-full mb-3",children:n.jsx(yi,{width:"100%",height:"100%",children:n.jsxs(Bg,{data:c,margin:{top:10,right:10,left:10,bottom:20},children:[n.jsx("defs",{children:n.jsxs("linearGradient",{id:`grad-${nt}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"0%",stopColor:u,stopOpacity:.4}),n.jsx("stop",{offset:"100%",stopColor:u,stopOpacity:.05})]})}),n.jsx(Sa,{dataKey:"quarter",tick:{fontSize:11,fill:"#9ca3af"},axisLine:!1,tickLine:!1}),n.jsx(ma,{tick:{fontSize:10,fill:"#6b7280"},tickFormatter:v=>`${(v/1e3).toFixed(0)}K Cr`,axisLine:!1,tickLine:!1}),n.jsx(zs,{contentStyle:{background:"#1f2937",border:"1px solid #374151",borderRadius:"6px",fontSize:"11px"},formatter:(v,k,_)=>[`${Number(v).toLocaleString()} Cr`,"Revenue"]}),n.jsx(ec,{type:"monotone",dataKey:"value",stroke:u,strokeWidth:2,fill:`url(#grad-${nt})`,dot:{r:5,stroke:u,strokeWidth:2,fill:"#1f2937"},activeDot:{r:7,stroke:u,strokeWidth:2,fill:"#ffffff"}})]})})}),n.jsxs("div",{className:"flex justify-center gap-4 text-xs text-gray-400",children:[n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"})," Positive Quarter"]}),n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"})," Negative Quarter"]})]}),$.some(v=>v.pdf_url)&&n.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-xs font-medium text-gray-400",children:"Quarterly Results PDFs"}),n.jsx("button",{onClick:()=>{const v=nt||ns;v&&kr(v)},className:"text-xs text-blue-400 hover:text-blue-300 cursor-pointer","data-testid":"button-ai-full-report",children:"View Full Report"})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:$.slice(-4).map((v,k)=>v.pdf_url&&n.jsxs("a",{href:v.pdf_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 px-2 py-1 bg-gray-800 hover:bg-gray-700 rounded text-xs text-gray-300","data-testid":`link-pdf-${k}`,children:[n.jsx(Vk,{className:"h-3 w-3"}),v.quarter]},k))})]})]}):n.jsx("div",{className:"text-center py-4 text-gray-500 text-xs",children:"No quarterly data available"})})():n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(Gn,{className:"h-6 w-6 mx-auto mb-2 opacity-50"}),n.jsx("p",{className:"text-xs",children:"Search for a stock to see quarterly results"})]})})]})]})]}),y}if(E.includes("[CHART:PERFORMANCE_TREND]")){const G=E.split("[CHART:PERFORMANCE_TREND]"),$=window.performanceTrendChartData||[];E=G[1]||"";const ae=n.jsxs(n.Fragment,{children:[G[0],$.length>0&&n.jsx("div",{className:"my-4 bg-gray-900/50 rounded-lg p-3 border border-gray-600",children:n.jsx("div",{className:"h-32 w-full",children:n.jsx(yi,{width:"100%",height:"100%",children:n.jsxs(Bg,{data:$,margin:{top:20,right:20,left:10,bottom:5},children:[n.jsx("defs",{children:n.jsxs("linearGradient",{id:"aiAreaGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"0%",stopColor:"rgb(107, 114, 128)",stopOpacity:.6}),n.jsx("stop",{offset:"100%",stopColor:"rgb(107, 114, 128)",stopOpacity:.1})]})}),n.jsx(Sa,{dataKey:"day",axisLine:!1,tickLine:!1,tick:!1,className:"text-slate-500 dark:text-slate-400"}),n.jsx(ma,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"#64748b"},tickFormatter:c=>`${c>=0?"":"-"}${(Math.abs(c)/1e3).toFixed(0)}K`,domain:["dataMin - 1000","dataMax + 1000"],className:"text-slate-500 dark:text-slate-400"}),n.jsx(zs,{contentStyle:{background:"var(--background)",border:"1px solid var(--border)",borderRadius:"8px",color:"var(--foreground)",fontSize:"11px",padding:"6px 10px"},formatter:c=>[`${c>=0?"":"-"}${Math.abs(c).toLocaleString()}`,"Daily P&L"],labelFormatter:c=>`${c}`}),n.jsx(ec,{type:"monotone",dataKey:"value",stroke:"#000000",strokeWidth:2,fill:"url(#aiAreaGradient)",dot:!1,activeDot:{r:4,stroke:"#000000",strokeWidth:1,fill:"#ffffff"}})]})})})})]});y=y?n.jsxs(n.Fragment,{children:[y,ae]}):ae}if(E.includes("[CHART:COMPANY_INSIGHTS]")){const G=E.split("[CHART:COMPANY_INSIGHTS]"),$=window.companyInsightsData||null,ae=[];$&&$.quarterlyPerformance&&$.quarterlyPerformance.forEach(v=>{const k=v.value||v.revenue||0;ae.push({quarter:v.quarter,value:k,revenue:k,trend:v.changePercent>=0?"positive":"negative",changePercent:v.changePercent||0})});const c=($==null?void 0:$.trend)||(ae.length>1?ae[ae.length-1].value>ae[0].value?"positive":"negative":"neutral"),u=c==="positive"?"#22c55e":c==="negative"?"#ef4444":"#6b7280",p=n.jsxs(n.Fragment,{children:[G[0],ae.length>0&&n.jsxs("div",{className:"my-4 bg-gray-900/50 rounded-lg p-4 border border-gray-600",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Quarterly Performance Trend"}),n.jsx("span",{className:`text-xs px-2 py-1 rounded ${c==="positive"?"bg-green-500/20 text-green-400":c==="negative"?"bg-red-500/20 text-red-400":"bg-gray-500/20 text-gray-400"}`,children:c==="positive"?" Uptrend":c==="negative"?" Downtrend":" Neutral"})]}),n.jsx("div",{className:"h-40 w-full",children:n.jsx(yi,{width:"100%",height:"100%",children:n.jsxs(Bg,{data:ae,margin:{top:10,right:10,left:10,bottom:20},children:[n.jsx("defs",{children:n.jsxs("linearGradient",{id:"companyInsightsGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"0%",stopColor:u,stopOpacity:.4}),n.jsx("stop",{offset:"100%",stopColor:u,stopOpacity:.05})]})}),n.jsx(Sa,{dataKey:"quarter",axisLine:!1,tickLine:!1,tick:{fontSize:11,fill:"#9ca3af"}}),n.jsx(ma,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"#6b7280"},tickFormatter:v=>`${(v/1e3).toFixed(0)}K Cr`,domain:["dataMin - 1000","dataMax + 1000"]}),n.jsx(zs,{contentStyle:{background:"#1f2937",border:"1px solid #374151",borderRadius:"8px",color:"#f3f4f6",fontSize:"12px",padding:"8px 12px"},formatter:(v,k,_)=>[`${Number(v).toLocaleString()} Cr (${_.payload.changePercent>=0?"+":""}${_.payload.changePercent.toFixed(2)}%)`,"Revenue"],labelFormatter:v=>`${v}`}),n.jsx(ec,{type:"monotone",dataKey:"value",stroke:u,strokeWidth:2,fill:"url(#companyInsightsGradient)",dot:{r:4,stroke:u,strokeWidth:2,fill:"#1f2937"},activeDot:{r:6,stroke:u,strokeWidth:2,fill:"#ffffff"}})]})})}),n.jsxs("div",{className:"flex justify-center gap-4 mt-2 text-xs text-gray-400",children:[n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"})," Positive Quarter"]}),n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"})," Negative Quarter"]})]})]}),((z=$==null?void 0:$.annualFinancials)==null?void 0:z.profitLoss)&&$.annualFinancials.profitLoss.length>0&&n.jsxs("div",{className:"my-4 bg-gray-900/50 rounded-lg p-4 border border-gray-600",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Profit & Loss Statement (in Cr)"}),n.jsx("span",{className:"text-xs px-2 py-1 rounded bg-blue-500/20 text-blue-400",children:"Annual Data"})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[n.jsx("th",{className:"text-left py-2 px-2 text-gray-400 font-medium",children:"Particulars"}),$.annualFinancials.years.slice(0,5).map(v=>n.jsx("th",{className:"text-right py-2 px-2 text-gray-400 font-medium",children:v},v))]})}),n.jsx("tbody",{children:$.annualFinancials.profitLoss.map((v,k)=>n.jsxs("tr",{className:`border-b border-gray-800 ${v.label.toLowerCase().includes("net profit")||v.label.toLowerCase().includes("eps")?"bg-gray-800/30 font-medium":""}`,children:[n.jsx("td",{className:"py-2 px-2 text-gray-300",children:v.label}),v.values.slice(0,5).map((_,F)=>{const se=typeof _.value=="string"?parseFloat(_.value.replace(/,/g,"")):Number(_.value),J=isNaN(se)?_.value:se.toLocaleString();return n.jsx("td",{className:`text-right py-2 px-2 ${se>=0?"text-gray-200":"text-red-400"}`,children:J},F)})]},k))})]})})]}),((K=$==null?void 0:$.annualFinancials)==null?void 0:K.balanceSheet)&&$.annualFinancials.balanceSheet.length>0&&n.jsxs("div",{className:"my-4 bg-gray-900/50 rounded-lg p-4 border border-gray-600",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Balance Sheet (in Cr)"}),n.jsx("span",{className:"text-xs px-2 py-1 rounded bg-purple-500/20 text-purple-400",children:"Annual Data"})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-gray-700",children:[n.jsx("th",{className:"text-left py-2 px-2 text-gray-400 font-medium",children:"Particulars"}),$.annualFinancials.years.slice(0,5).map(v=>n.jsx("th",{className:"text-right py-2 px-2 text-gray-400 font-medium",children:v},v))]})}),n.jsx("tbody",{children:$.annualFinancials.balanceSheet.map((v,k)=>n.jsxs("tr",{className:`border-b border-gray-800 ${v.label.toLowerCase().includes("total assets")||v.label.toLowerCase().includes("total liabilities")?"bg-gray-800/30 font-medium":""}`,children:[n.jsx("td",{className:"py-2 px-2 text-gray-300",children:v.label}),v.values.slice(0,5).map((_,F)=>{const se=typeof _.value=="string"?parseFloat(_.value.replace(/,/g,"")):Number(_.value),J=isNaN(se)?_.value:se.toLocaleString();return n.jsx("td",{className:`text-right py-2 px-2 ${se>=0?"text-gray-200":"text-red-400"}`,children:J},F)})]},k))})]})})]}),G[1]||""]});y=y?n.jsxs(n.Fragment,{children:[y,p]}):p}return We.includes("[CHART:TRADE]")&&(y=n.jsxs("div",{className:"w-full bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 rounded-xl p-8 border border-gray-700",children:[n.jsxs("div",{className:"flex flex-col items-center justify-center mb-8",children:[n.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-orange-400 to-orange-600 rounded-full flex items-center justify-center mb-6 shadow-lg",children:n.jsx(Ac,{className:"w-12 h-12 text-white"})}),n.jsx("h2",{className:"text-4xl font-bold text-white mb-2",children:"Trading Challenge"}),n.jsx("p",{className:"text-xl text-gray-400",children:"Coming Soon"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-8",children:[n.jsxs("div",{className:"bg-gradient-to-br from-blue-900/30 to-blue-800/20 border border-blue-700/50 rounded-lg p-6 hover:border-blue-600/70 transition-all",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-600/30 flex items-center justify-center",children:n.jsx(Uo,{className:"w-5 h-5 text-blue-400"})}),n.jsx("h3",{className:"text-lg font-semibold text-white",children:"Compete with Traders"})]}),n.jsx("p",{className:"text-gray-300 text-sm",children:"Join 7-day trading challenges and test your skills against other traders"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-green-900/30 to-green-800/20 border border-green-700/50 rounded-lg p-6 hover:border-green-600/70 transition-all",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-600/30 flex items-center justify-center",children:n.jsx(ia,{className:"w-5 h-5 text-green-400"})}),n.jsx("h3",{className:"text-lg font-semibold text-white",children:"Live P&L Tracking"})]}),n.jsx("p",{className:"text-gray-300 text-sm",children:"Real-time ranking based on your trades with live profit and loss updates"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-yellow-900/30 to-yellow-800/20 border border-yellow-700/50 rounded-lg p-6 hover:border-yellow-600/70 transition-all",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-lg bg-yellow-600/30 flex items-center justify-center",children:n.jsx(Gne,{className:"w-5 h-5 text-yellow-400"})}),n.jsx("h3",{className:"text-lg font-semibold text-white",children:"Leaderboard Rankings"})]}),n.jsx("p",{className:"text-gray-300 text-sm",children:"See your position among all participants and track your progress"})]})]}),n.jsx("div",{className:"mt-8 text-center",children:n.jsx("p",{className:"text-gray-400 text-sm",children:"More features coming soon. Stay tuned!"})})]})),y||E||We})()}),n.jsx("div",{className:"mt-4 pt-3 border-t border-gray-700",children:n.jsx("p",{className:"text-xs text-gray-500 italic",children:"Disclaimer: Financial data is sourced from NSE/BSE and other public sources. This information is for educational purposes only and should not be considered financial advice. Please verify data independently before making investment decisions."})})]}),n.jsx("div",{className:"flex items-center gap-0 pt-0 border-t border-gray-700",children:n.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>{Ie(""),Ae(!1),ot("")},className:"text-gray-400 hover:text-gray-200",children:[n.jsx(Wr,{className:"h-4 w-4 mr-2"}),"Clear"]})})]}):Le&&!It?n.jsxs("div",{className:"text-center text-gray-400 py-8",children:[n.jsx(Pu,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"Press Enter or click the search button to get AI assistance"})]}):It?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("style",{children:`
                                  @keyframes thinkingDot {
                                    0%, 60%, 100% { opacity: 0.3; transform: translateY(0); }
                                    30% { opacity: 1; transform: translateY(-8px); }
                                  }
                                  .thinking-dot {
                                    display: inline-block;
                                    width: 8px;
                                    height: 8px;
                                    border-radius: 50%;
                                    background-color: #3b82f6;
                                    animation: thinkingDot 1.4s infinite;
                                    margin: 0 3px;
                                  }
                                  .thinking-dot:nth-child(2) { animation-delay: 0.2s; }
                                  .thinking-dot:nth-child(3) { animation-delay: 0.4s; }
                                `}),n.jsxs("div",{className:"flex items-center justify-center",children:[n.jsx("div",{className:"thinking-dot"}),n.jsx("div",{className:"thinking-dot"}),n.jsx("div",{className:"thinking-dot"})]})]}):null})}),n.jsxs("div",{className:"md:flex hidden flex-wrap items-center justify-center gap-3 max-w-6xl mx-auto md:mt-6",children:[n.jsx(H,{variant:"secondary",className:"bg-cyan-600 hover:bg-cyan-700  text-white border-0 h-7 px-2 rounded-full text-xs font-medium transition-all duration-200",onClick:()=>{if(Ye(!0),Ae(!0),ot("[CHART:WATCHLIST]"),Mf(!0),ra.length>0&&!ns){const y=ra[0];Wn(y.symbol),wt(y.symbol)}setTimeout(()=>Ye(!1),300)},"data-testid":"button-watchlist",children:n.jsxs("div",{className:"flex items-center justify-center gap-1",children:[Fe?n.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"}):n.jsx(Au,{className:"h-3 w-3"}),n.jsx("span",{children:"Watchlist"})]})}),n.jsx(H,{variant:"secondary",className:"bg-green-600 hover:bg-green-700 text-white border-0 h-7 px-2 rounded-full text-xs font-medium transition-all duration-200",onClick:()=>mn("What are today's top financial news and market updates?"),children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(HN,{className:"h-3 w-3"}),n.jsx("span",{children:"Market News"})]})}),n.jsx(H,{variant:"secondary",className:"bg-pink-600 hover:bg-pink-700  text-white border-0 h-7 px-2 rounded-full text-xs font-medium transition-all duration-200",onClick:()=>mn("Social feed community discussions and trending topics"),children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(wb,{className:"h-3 w-3"}),n.jsx("span",{children:"Social Feed"})]})}),n.jsx(H,{variant:"secondary",className:"bg-indigo-600 hover:bg-indigo-700 text-white border-0 h-7 px-2 rounded-full text-xs font-medium transition-all duration-200",onClick:Yr,"data-testid":"button-trading-journal",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Vk,{className:"h-3 w-3"}),n.jsx("span",{children:"Trading Journal"})]})}),n.jsx(H,{variant:"secondary",className:"bg-red-600 hover:bg-red-700 text-white border-0 h-7 px-2 rounded-full text-xs font-medium transition-all duration-200",onClick:()=>{Ae(!0),ot("[CHART:TRADE]")},"data-testid":"button-trade",children:n.jsxs("div",{className:"flex items-center justify-center gap-1",children:[n.jsx(Ac,{className:"h-3 w-3"}),n.jsx("span",{children:"Trade Challenge"})]})})]}),n.jsxs("div",{className:`${We?"bg-transparent":"bg-white"} md:pt-4 md:pb-4 md:rounded-3xl rounded-3xl relative pointer-events-auto touch-pan-y flex-shrink-0 w-full mt-[21px] mb-[21px] pt-[32px] pb-[16px] ml-[0px] mr-[0px] pl-[0px] pr-[0px]`,children:[n.jsxs("div",{className:"md:hidden absolute -top-3 left-4 right-4 z-50",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Nr,{placeholder:"Search stocks, technical analysis, social feed...",value:Le,onFocus:()=>Ae(!0),onChange:y=>{const E=y.target.value;Ie(E),Ae(E.length>0)},onKeyPress:async y=>{y.key==="Enter"&&Le.trim()&&await kr()},className:"w-full h-12 bg-gray-800 border-gray-700 text-gray-100 placeholder-gray-400 pr-24 text-xs rounded-2xl focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-lg mt-[0px] mb-[0px]"}),Le&&n.jsx(H,{size:"sm",variant:"ghost",className:"absolute right-14 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-200 h-8 w-8 p-0",onClick:()=>{Ie(""),Ae(!1),ot("")},"data-testid":"button-clear-search",children:n.jsx(Wr,{className:"h-4 w-4"})}),n.jsx(H,{size:"sm",className:"absolute right-3 top-1/2 -translate-y-1/2 bg-gray-700 hover:bg-gray-600 text-gray-300",onClick:()=>kr(),disabled:!Le.trim()||It,children:It?n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):n.jsx(Pu,{className:"h-4 w-4"})})]}),Ue&&!We&&n.jsx("div",{className:"md:hidden fixed inset-0 z-40",onClick:()=>{Ie(""),Ae(!1),ot("")}}),Ue&&n.jsxs("div",{className:"mt-2 flex gap-2 overflow-x-auto scrollbar-hide pb-2 relative z-50",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:[n.jsx(H,{variant:"secondary",className:"bg-cyan-600 hover:bg-cyan-700 text-white border-0 h-7 px-2 rounded-full text-xs font-medium transition-all duration-200 whitespace-nowrap flex-shrink-0",onClick:()=>{if(Ye(!0),Ae(!0),ot("[CHART:WATCHLIST]"),Mf(!0),ra.length>0&&!ns){const y=ra[0];Wn(y.symbol),wt(y.symbol)}setTimeout(()=>Ye(!1),300)},"data-testid":"button-watchlist-mobile",children:n.jsxs("div",{className:"flex items-center justify-center gap-1",children:[Fe?n.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"}):n.jsx(Au,{className:"h-3 w-3"}),n.jsx("span",{children:"Watchlist"})]})}),n.jsx(H,{variant:"secondary",className:"bg-green-600 hover:bg-green-700 text-white border-0 h-7 px-2 rounded-full text-xs font-medium transition-all duration-200 whitespace-nowrap flex-shrink-0",onClick:()=>mn("What are today's top financial news and market updates?"),children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(HN,{className:"h-3 w-3"}),n.jsx("span",{children:"Market News"})]})}),n.jsx(H,{variant:"secondary",className:"bg-pink-600 hover:bg-pink-700 text-white border-0 h-7 px-2 rounded-full text-xs font-medium transition-all duration-200 whitespace-nowrap flex-shrink-0",onClick:()=>mn("Social feed community discussions and trending topics"),children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(wb,{className:"h-3 w-3"}),n.jsx("span",{children:"Social Feed"})]})}),n.jsx(H,{variant:"secondary",className:"bg-indigo-600 hover:bg-indigo-700 text-white border-0 h-7 px-2 rounded-full text-xs font-medium transition-all duration-200 whitespace-nowrap flex-shrink-0",onClick:Yr,"data-testid":"button-trading-journal-mobile",children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Vk,{className:"h-3 w-3"}),n.jsx("span",{children:"Trading Journal"})]})}),n.jsx(H,{variant:"secondary",className:"bg-orange-600 hover:bg-orange-700 text-white border-0 h-7 px-2 rounded-full text-xs font-medium transition-all duration-200 whitespace-nowrap flex-shrink-0",onClick:()=>{Ae(!0),ot("[CHART:TRADE]")},"data-testid":"button-trade-challenge-mobile",children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Ac,{className:"h-3 w-3"}),n.jsx("span",{children:"Trade Challenge"})]})})]}),Ue&&We&&n.jsx("div",{className:"md:hidden fixed inset-x-0 top-0 bottom-0 bg-gray-900/95 backdrop-blur-sm z-[60] overflow-y-auto",children:n.jsxs("div",{className:"p-3 space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between pb-2 border-b border-gray-700",children:[n.jsx("div",{className:"flex items-center gap-1.5",children:We.includes("[CHART:WATCHLIST]")?n.jsxs(n.Fragment,{children:[n.jsx(Au,{className:"h-4 w-4 text-gray-700 dark:text-blue-400"}),n.jsx("h3",{className:"text-xs font-medium text-gray-100",children:"Watchlist"})]}):We.includes("[CHART:TRADE]")?n.jsxs(n.Fragment,{children:[n.jsx(Ac,{className:"h-4 w-4 text-red-400"}),n.jsx("h3",{className:"text-xs font-medium text-gray-100",children:"Trade Challenge"})]}):n.jsxs(n.Fragment,{children:[n.jsx(Pu,{className:"h-4 w-4 text-blue-400"}),n.jsx("h3",{className:"text-xs font-medium text-gray-100",children:"Trading Challenge"})]})}),n.jsx(H,{variant:"ghost",size:"sm",onClick:()=>{Ie(""),Ae(!1),ot("")},className:"text-gray-400 hover:text-gray-200 h-6 w-6 p-0",children:n.jsx(Wr,{className:"h-4 w-4"})})]}),n.jsx("div",{className:"prose prose-invert max-w-none",children:n.jsx("div",{className:"text-gray-300 whitespace-pre-wrap leading-tight text-xs",children:We.includes("[CHART:WATCHLIST]")?n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"bg-gray-800/50 rounded-lg p-2 border border-gray-700",children:n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("h4",{className:"text-xs font-semibold text-gray-200",children:"NIFTY 50"}),n.jsxs("span",{className:"text-xs text-green-400 flex items-center gap-0.5",children:[n.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"}),"Live"]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-xs font-mono text-gray-100",children:["",kc().toLocaleString("en-IN",{maximumFractionDigits:2})]}),n.jsxs("div",{className:`text-xs flex items-center justify-end gap-0.5 ${nl()>=0?"text-green-400":"text-red-400"}`,children:[nl()>=0?"":""," ",Math.abs(nl()/(kc()-nl())*100).toFixed(2),"%"]})]})]}),n.jsx("div",{className:"flex items-center gap-0.5",children:["1D","5D","1M"].map(y=>n.jsx(H,{variant:"ghost",size:"sm",onClick:()=>Rf(y),className:`px-1 py-0 text-xs h-5 ${xd===y?"bg-blue-600/20 text-blue-400":"text-gray-400"}`,children:y},y))}),n.jsx("div",{className:"h-24 w-full bg-gray-800/30 rounded p-1",children:n.jsx(yi,{width:"100%",height:"100%",children:n.jsxs(Dd,{data:fu?[]:Jm,margin:{top:2,right:10,left:30,bottom:2},children:[n.jsx(Sa,{dataKey:"time",axisLine:!1,tickLine:!1,tick:{fontSize:8,fill:"#64748b"},tickCount:3}),n.jsx(ma,{domain:["dataMin - 50","dataMax + 50"],axisLine:!1,tickLine:!1,tick:{fontSize:8,fill:"#64748b"},width:8}),n.jsx(zs,{content:({active:y,payload:E})=>{if(!y||!(E!=null&&E.length))return null;const M=E[0].value;return n.jsxs("div",{style:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"4px",color:"#e2e8f0",padding:"4px 8px",fontSize:"11px"},children:["",Number(M).toFixed(2)]})}}),n.jsx(Is,{type:"linear",dataKey:"price",stroke:"#ef4444",strokeWidth:1.5,dot:!1})]})})})]})}),ns&&n.jsx("div",{className:"bg-gray-800/50 rounded-lg p-2 border border-gray-700",children:n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("h4",{className:"text-xs font-semibold text-gray-200",children:ns.replace("-EQ","")}),n.jsx("span",{className:"text-xs text-green-400",children:"Live"})]})}),n.jsx("div",{className:"flex items-center gap-0.5",children:["1D","5D","1M"].map(y=>n.jsx(H,{variant:"ghost",size:"sm",onClick:()=>{},className:"px-1 py-0 text-xs h-5 bg-blue-600/20 text-blue-400",children:y},y))}),n.jsx("div",{className:"h-24 w-full bg-gray-800/30 rounded p-1",children:n.jsx(yi,{width:"100%",height:"100%",children:n.jsxs(Dd,{data:[],margin:{top:2,right:10,left:30,bottom:2},children:[n.jsx(Sa,{dataKey:"time",axisLine:!1,tickLine:!1,tick:{fontSize:8},tickCount:3}),n.jsx(ma,{axisLine:!1,tickLine:!1,tick:{fontSize:8},width:8}),n.jsx(Is,{type:"linear",dataKey:"price",stroke:"#22c55e",strokeWidth:1.5,dot:!1})]})})})]})}),n.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-2 border border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"text-xs font-medium text-gray-200",children:"My Watchlist"}),n.jsxs("span",{className:"text-xs text-gray-400",children:[ra.length," stocks"]})]}),n.jsx("div",{className:"space-y-1 max-h-20 overflow-y-auto",children:ra.map(y=>n.jsx("div",{onClick:()=>Wn(y.symbol),className:`px-2 py-1 rounded text-xs cursor-pointer ${ns===y.symbol?"bg-blue-600/30 border border-blue-500/50":"hover:bg-gray-700/50"}`,children:n.jsx("div",{className:"font-medium text-gray-200",children:y.displayName||y.symbol})},y.symbol))})]})]}):We.includes("[CHART:TRADE]")?n.jsxs("div",{className:"w-full max-w-2xl mx-auto py-12",children:[n.jsxs("div",{className:"flex flex-col items-center mb-8",children:[n.jsx("div",{className:"w-24 h-24 bg-orange-500 rounded-full flex items-center justify-center mb-6 shadow-lg",children:n.jsx(Ac,{className:"h-12 w-12 text-white"})}),n.jsx("h2",{className:"text-3xl font-bold text-white text-center mb-2",children:"Trading Challenge"}),n.jsx("p",{className:"text-gray-400 text-lg",children:"Coming Soon"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-4 flex items-start gap-4",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx(Uo,{className:"h-6 w-6 text-blue-400"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-white font-semibold mb-1",children:"Compete with Traders"}),n.jsx("p",{className:"text-gray-400 text-sm",children:"Join 7-day trading challenges"})]})]}),n.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-4 flex items-start gap-4",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx(ia,{className:"h-6 w-6 text-green-400"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-white font-semibold mb-1",children:"Live P&L Tracking"}),n.jsx("p",{className:"text-gray-400 text-sm",children:"Real-time ranking based on your trades"})]})]}),n.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-4 flex items-start gap-4",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx(Ac,{className:"h-6 w-6 text-yellow-500"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-white font-semibold mb-1",children:"Leaderboard Rankings"}),n.jsx("p",{className:"text-gray-400 text-sm",children:"See your position among all participants"})]})]})]})]}):We})})]})})]}),!We&&n.jsxs("div",{className:"mx-auto max-w-6xl hidden md:grid md:grid-cols-2 lg:grid-cols-4 md:gap-4 md:px-6 md:items-center",children:[n.jsxs("div",{className:"bg-blue-500 rounded-2xl overflow-hidden h-36 w-full relative cursor-pointer hover:scale-105 transition-transform",onClick:()=>Br("voice"),children:[n.jsx("div",{className:"absolute top-3 left-3",children:n.jsx("span",{className:"bg-white bg-opacity-90 text-blue-600 px-2.5 py-1 rounded-full text-xs font-medium",children:"Social Feed"})}),n.jsx("div",{className:"absolute bottom-3 right-3",children:n.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:n.jsx(l0,{className:"h-6 w-6 text-white"})})})]}),n.jsxs("div",{className:"bg-indigo-500 rounded-2xl overflow-hidden h-36 w-full relative cursor-pointer hover:scale-105 transition-transform",onClick:Xr,children:[n.jsx("div",{className:"absolute top-3 left-3",children:n.jsx("span",{className:"bg-white bg-opacity-90 text-indigo-600 px-2.5 py-1 rounded-full text-xs font-medium",children:"Trading Master"})}),n.jsx("div",{className:"absolute bottom-3 right-3",children:n.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:n.jsx(Jl,{className:"h-6 w-6 text-white"})})})]}),n.jsxs("div",{className:"bg-emerald-500 rounded-2xl overflow-hidden h-36 w-full relative cursor-pointer hover:scale-105 transition-transform",onClick:()=>Br("journal"),children:[n.jsx("div",{className:"absolute top-3 left-3",children:n.jsx("span",{className:"bg-white bg-opacity-90 text-emerald-600 px-2.5 py-1 rounded-full text-xs font-medium",children:"Journal"})}),n.jsx("div",{className:"absolute bottom-3 right-3",children:n.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:n.jsx(ia,{className:"h-6 w-6 text-white"})})})]}),n.jsx("div",{className:"relative h-36 w-full flex items-center justify-center",children:n.jsx($3,{onSectorChange:Ca,selectedSector:Mr,onCardIndexChange:Ne,currentCardIndex:Ke})})]}),!We&&n.jsxs("div",{className:"md:hidden mt-6",children:[n.jsxs("div",{className:"grid grid-cols-3 gap-3 px-4 mb-3",children:[n.jsxs("div",{className:"bg-blue-500 rounded-xl overflow-hidden h-20 relative cursor-pointer active:scale-95 transition-transform",onClick:()=>Br("voice"),children:[n.jsx("div",{className:"absolute top-2 left-2",children:n.jsx("span",{className:"bg-white bg-opacity-90 text-blue-600 px-2 py-0.5 rounded-full text-[10px] font-medium",children:"Social Feed"})}),n.jsx("div",{className:"absolute bottom-2 right-2",children:n.jsx("div",{className:"w-10 h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:n.jsx(l0,{className:"h-5 w-5 text-white"})})})]}),n.jsxs("div",{className:"bg-purple-500 rounded-xl overflow-hidden h-20 relative cursor-pointer active:scale-95 transition-transform",onClick:Xr,children:[n.jsx("div",{className:"absolute top-2 left-2",children:n.jsx("span",{className:"bg-white bg-opacity-90 text-purple-600 px-2 py-0.5 rounded-full text-[10px] font-medium",children:"Trading Master"})}),n.jsx("div",{className:"absolute bottom-2 right-2",children:n.jsx("div",{className:"w-10 h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:n.jsx(Jl,{className:"h-5 w-5 text-white"})})})]}),n.jsxs("div",{className:"bg-green-500 rounded-xl overflow-hidden h-20 relative cursor-pointer active:scale-95 transition-transform",onClick:()=>Br("journal"),children:[n.jsx("div",{className:"absolute top-2 left-2",children:n.jsx("span",{className:"bg-white bg-opacity-90 text-green-600 px-2 py-0.5 rounded-full text-[10px] font-medium",children:"Journal"})}),n.jsx("div",{className:"absolute bottom-2 right-2",children:n.jsx("div",{className:"w-10 h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:n.jsx(ia,{className:"h-5 w-5 text-white"})})})]})]}),n.jsx("div",{className:"flex items-center justify-center px-4 pb-0",children:n.jsx($3,{onSectorChange:Ca,selectedSector:Mr,onCardIndexChange:Ne,currentCardIndex:Ke})})]}),!We&&n.jsx("div",{className:"md:hidden absolute -bottom-10 left-1/2 transform -translate-x-1/2 flex gap-2 justify-center z-40",children:[0,1,2,3,4,5].map(y=>n.jsx("button",{"data-testid":`nav-dot-${y}`,onClick:()=>{Ne(y)},className:`w-2 h-2 rounded-full transition-all duration-300 cursor-pointer hover:scale-110 ${y===Ke?"bg-white scale-125":"bg-white/40"}`},y))})]})]}),!We&&n.jsx("div",{className:"fixed bottom-8 left-1/2 transform -translate-x-1/2 z-50 pointer-events-auto",children:n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-0 w-16 h-16 rounded-full bg-gradient-to-r from-violet-600/30 to-indigo-600/30 animate-ping pointer-events-none"}),n.jsx("div",{className:"absolute inset-0 w-16 h-16 rounded-full bg-gradient-to-r from-violet-600/20 to-indigo-600/20 animate-pulse pointer-events-none"}),n.jsx(H,{onClick:()=>ur("tutor"),className:"relative w-16 h-16 rounded-full bg-gradient-to-r from-violet-600 to-indigo-600 hover:from-violet-700 hover:to-indigo-700 shadow-2xl hover:animate-none transition-all duration-300 border-4 border-white/20 pointer-events-auto animate-bounce hover:scale-110",children:n.jsx(Bb,{className:"h-8 w-8 text-gray-400 pointer-events-none"})})]})}),o&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 transition-opacity duration-300",onClick:()=>l(!1)}),n.jsxs("div",{className:"fixed top-0 right-0 h-full w-96 bg-slate-900 z-50 shadow-2xl transition-transform duration-500 ease-out",style:{animation:"slideInFromRight 0.5s ease-out"},children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-700",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-violet-600 to-indigo-600 rounded-lg flex items-center justify-center",children:n.jsx(tse,{className:"h-5 w-5 text-white"})}),n.jsx("span",{className:"text-lg font-semibold text-white",children:"AI Trading Tutor"})]}),n.jsx(H,{variant:"ghost",size:"sm",onClick:()=>l(!1),className:"text-slate-400 hover:text-white hover:bg-slate-800",children:n.jsx(Wr,{className:"h-5 w-5"})})]}),n.jsx("div",{className:"h-full overflow-y-auto pb-20 custom-thin-scrollbar",children:n.jsxs("div",{className:"p-4 space-y-6",children:[n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("h2",{className:"text-xl font-bold text-white",children:"Learn & Master Trading"}),n.jsx("p",{className:"text-slate-300 text-sm",children:"Interactive lessons and personalized guidance"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-slate-800 rounded-xl p-4 hover:bg-slate-700 transition-colors cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center",children:n.jsx(yb,{className:"h-5 w-5 text-white"})}),n.jsx("h3",{className:"text-lg font-semibold text-white",children:"Trading Basics"})]}),n.jsx("p",{className:"text-slate-300 text-sm",children:"Learn fundamental concepts and strategies"})]}),n.jsxs("div",{className:"bg-slate-800 rounded-xl p-4 hover:bg-slate-700 transition-colors cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-lg flex items-center justify-center",children:n.jsx(ia,{className:"h-5 w-5 text-white"})}),n.jsx("h3",{className:"text-lg font-semibold text-white",children:"Chart Analysis"})]}),n.jsx("p",{className:"text-slate-300 text-sm",children:"Master technical analysis and patterns"})]}),n.jsxs("div",{className:"bg-slate-800 rounded-xl p-4 hover:bg-slate-700 transition-colors cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:"w-10 h-10 bg-purple-500 rounded-lg flex items-center justify-center",children:n.jsx(nm,{className:"h-5 w-5 text-white"})}),n.jsx("h3",{className:"text-lg font-semibold text-white",children:"Risk Management"})]}),n.jsx("p",{className:"text-slate-300 text-sm",children:"Protect your capital with smart strategies"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-white",children:"Quick Actions"}),n.jsx("div",{className:"bg-slate-800 rounded-xl p-4 hover:bg-slate-700 transition-colors cursor-pointer",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-orange-500 rounded-lg flex items-center justify-center",children:n.jsx(sse,{className:"h-4 w-4 text-white"})}),n.jsx("span",{className:"text-white font-medium",children:"Trading Tips"})]})}),n.jsx("div",{className:"bg-slate-800 rounded-xl p-4 hover:bg-slate-700 transition-colors cursor-pointer",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-red-500 rounded-lg flex items-center justify-center",children:n.jsx(rv,{className:"h-4 w-4 text-white"})}),n.jsx("span",{className:"text-white font-medium",children:"Market Alerts"})]})}),n.jsx("div",{className:"bg-slate-800 rounded-xl p-4 hover:bg-slate-700 transition-colors cursor-pointer",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-teal-500 rounded-lg flex items-center justify-center",children:n.jsx(Gn,{className:"h-4 w-4 text-white"})}),n.jsx("span",{className:"text-white font-medium",children:"Performance Insights"})]})})]})]})})]})]}),n.jsx("style",{children:`
                  @keyframes slideUpFromBottom {
                    from {
                      transform: translateY(100%);
                    }
                    to {
                      transform: translateY(0);
                    }
                  }

                  @keyframes slideInFromRight {
                    from {
                      transform: translateX(100%);
                    }
                    to {
                      transform: translateX(0);
                    }
                  }
                `})]})]})]}),a==="backtest"&&n.jsx("div",{className:"h-full p-6 space-y-6",children:n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsx("div",{className:"flex items-center justify-between mb-6",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-3 bg-primary/10 rounded-lg",children:n.jsx(Jl,{className:"h-6 w-6 text-primary"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Backtest Trading Strategies"}),n.jsx("p",{className:"text-muted-foreground mt-1",children:"Test your trading rules with historical data"})]})]})}),n.jsx("div",{className:"bg-gradient-to-br from-card to-card/50 border border-border rounded-xl p-12",children:n.jsxs("div",{className:"text-center space-y-4",children:[n.jsx("div",{className:"w-20 h-20 mx-auto bg-primary/10 rounded-full flex items-center justify-center",children:n.jsx(Jl,{className:"h-10 w-10 text-primary"})}),n.jsx("h2",{className:"text-2xl font-semibold",children:"Backtest Feature Coming Soon"}),n.jsx("p",{className:"text-muted-foreground max-w-md mx-auto",children:"We're building a powerful backtesting engine to help you validate your trading strategies with historical market data."}),n.jsx("div",{className:"pt-4",children:n.jsx("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-primary/10 text-primary rounded-lg",children:n.jsx("span",{className:"text-sm font-medium",children:"Under Development"})})})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-8",children:[n.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[n.jsx("div",{className:"p-2 bg-blue-500/10 rounded-lg w-fit mb-4",children:n.jsx(ia,{className:"h-5 w-5 text-blue-500"})}),n.jsx("h3",{className:"font-semibold mb-2",children:"Historical Data Analysis"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Test strategies against years of historical market data"})]}),n.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[n.jsx("div",{className:"p-2 bg-green-500/10 rounded-lg w-fit mb-4",children:n.jsx(Gn,{className:"h-5 w-5 text-green-500"})}),n.jsx("h3",{className:"font-semibold mb-2",children:"Performance Metrics"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Comprehensive statistics on returns, drawdowns, and win rates"})]}),n.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[n.jsx("div",{className:"p-2 bg-purple-500/10 rounded-lg w-fit mb-4",children:n.jsx(uj,{className:"h-5 w-5 text-purple-500"})}),n.jsx("h3",{className:"font-semibold mb-2",children:"Custom Rules"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Define your own entry, exit, and risk management rules"})]})]})]})}),a==="trading-master"&&n.jsxs("div",{className:"h-full relative",children:[n.jsx(H,{onClick:()=>ur("trading-home"),variant:"ghost",size:"icon",className:"lg:hidden absolute top-4 right-4 z-50 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full","data-testid":"button-back-to-home-trading-master",children:n.jsx(my,{className:"h-6 w-6"})}),n.jsx(HPe,{})]}),a==="journal"&&n.jsxs("div",{className:"space-y-6 px-0.5 md:px-6 py-0.5 relative",children:[n.jsx(H,{onClick:()=>ur("trading-home"),variant:"ghost",size:"icon",className:"lg:hidden absolute top-4 right-4 z-50 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full","data-testid":"button-back-to-home-journal",children:n.jsx(my,{className:"h-6 w-6"})}),n.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Trading Journal"}),n.jsxs("div",{className:`${B!=="home"?"hidden md:block":"block"}`,children:[n.jsxs("div",{className:"relative mb-6",children:[n.jsxs("div",{className:"md:grid md:grid-cols-3 gap-6",children:[n.jsx("div",{className:`h-[400px] ${On===0?"block":"hidden"} md:block`,children:n.jsx("div",{className:"h-full relative bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-700 rounded-lg overflow-hidden",children:n.jsxs("div",{className:"h-full flex flex-col",children:[n.jsx("div",{className:"flex items-center justify-between px-2 py-2",children:n.jsxs("div",{className:"flex items-center gap-1 md:gap-2 flex-wrap",children:[da==="search"&&n.jsxs(wa,{open:rt,onOpenChange:to,children:[n.jsx(Na,{asChild:!0,children:n.jsxs(H,{variant:"ghost",size:"sm",className:"h-8 px-2 md:px-3 text-xs md:text-sm text-slate-700 dark:text-slate-300","data-testid":"button-stock-search",children:[n.jsx(Zl,{className:"h-3 w-3 md:h-4 md:w-4 md:mr-1"}),n.jsx("span",{className:"hidden md:inline",children:Cn.replace("NSE:","").replace("-EQ","").replace("-INDEX","")})]})}),n.jsx(fa,{className:"w-80 p-3",align:"start",children:n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex gap-1.5",children:[n.jsx(Nr,{placeholder:Fl==="STOCK"?"Search RELIANCE, TCS, INFY...":Fl==="COMMODITY"?"Search GOLD, SILVER, CRUDEOIL...":"Search NIFTY, BANKNIFTY...",value:ud,onChange:y=>ou(y.target.value),className:"text-xs flex-1 h-7 bg-white dark:bg-slate-800 border-gray-200 dark:border-slate-700","data-testid":"input-stock-search"}),n.jsxs("select",{value:Fl,onChange:y=>{ph(y.target.value),ou(""),vd([])},className:"h-7 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 border border-gray-200 dark:border-slate-700 rounded px-2 text-xs font-medium","data-testid":"select-journal-type",children:[n.jsx("option",{value:"STOCK",children:"Stock"}),n.jsx("option",{value:"COMMODITY",children:"Commodity"}),n.jsx("option",{value:"F&O",children:"F&O"})]})]}),n.jsxs("div",{className:"max-h-64 overflow-y-auto space-y-1 custom-thin-scrollbar",children:[Bf&&n.jsxs("div",{className:"flex items-center justify-center py-4",children:[n.jsx("div",{className:"w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),n.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"Searching..."})]}),!Bf&&ud.length>=2&&Ff.filter(y=>{var E;if(Ba==="all")return!0;switch(Ba){case"stock":return(y.exchange==="NSE"||y.exchange==="BSE")&&(!y.instrumentType||y.instrumentType===""||y.instrumentType==="EQ"||((E=y.symbol)==null?void 0:E.endsWith("-EQ"))||y.instrumentType==="AMXIDX");case"commodity":return y.exchange==="MCX"||y.exchange==="NCDEX";case"fo":return y.exchange==="NFO"||y.exchange==="BFO";case"currency":return y.exchange==="CDS";case"index":return y.instrumentType==="AMXIDX"||y.instrumentType==="INDEX";default:return!0}}).length===0&&n.jsxs("div",{className:"px-3 py-4 text-center text-sm text-gray-500",children:["No ",Ba!=="all"?Ba:""," instruments found"]}),ud.length<2&&n.jsx(n.Fragment,{children:((Z1=Lf[Ba])==null?void 0:Z1.length)>0?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-700",children:["Popular ",Ba!=="all"?Ba.charAt(0).toUpperCase()+Ba.slice(1):""," Instruments"]}),(Lf[Ba]||Lf.all).map(y=>n.jsxs("button",{onClick:()=>{const E=`${y.exchange}:${y.symbol}`;mh(E),sp({symbol:y.symbol,token:y.token,exchange:y.exchange,tradingSymbol:y.tradingSymbol,instrumentType:y.instrumentType}),Tt({token:y.token,exchange:y.exchange,tradingSymbol:y.tradingSymbol}),to(!1),ou("")},className:`w-full text-left px-3 py-2 rounded text-sm hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors ${Cn===`${y.exchange}:${y.symbol}`?"bg-blue-100 dark:bg-blue-900 font-medium":""}`,"data-testid":`default-stock-${y.exchange}:${y.symbol}`,children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("span",{className:"flex-1 font-medium",children:y.name}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:`px-1.5 py-0.5 text-xs font-semibold rounded ${y.exchange==="NSE"?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":y.exchange==="BSE"?"bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300":y.exchange==="MCX"?"bg-orange-100 dark:bg-orange-900 text-orange-700 dark:text-orange-300":y.exchange==="NFO"?"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300":y.exchange==="BFO"?"bg-teal-100 dark:bg-teal-900 text-teal-700 dark:text-teal-300":y.exchange==="CDS"?"bg-cyan-100 dark:bg-cyan-900 text-cyan-700 dark:text-cyan-300":y.exchange==="NCDEX"?"bg-amber-100 dark:bg-amber-900 text-amber-700 dark:text-amber-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:y.exchange}),y.instrumentType&&n.jsx("span",{className:"px-1.5 py-0.5 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded",children:y.instrumentType})]})]}),n.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:y.symbol})]},`default-${y.exchange}:${y.symbol}`)),n.jsx("div",{className:"px-3 py-2 text-xs text-gray-400 dark:text-gray-500 border-t border-gray-200 dark:border-gray-700 mt-1",children:"Or type to search more instruments..."})]}):n.jsxs("div",{className:"px-3 py-3 space-y-3",children:[n.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Search for ",Ba==="commodity"?"MCX/NCDEX Commodities":Ba==="currency"?"Currency Derivatives":"F&O Derivatives",":"]}),n.jsx("div",{className:"flex flex-wrap gap-1.5",children:(jg[Ba]||[]).map(y=>n.jsx("button",{onClick:()=>ou(y),className:"px-2.5 py-1.5 text-xs font-medium bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300 rounded-full hover:bg-blue-200 dark:hover:bg-blue-800 transition-colors","data-testid":`search-suggestion-${y}`,children:y},y))}),n.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-500 pt-1 border-t border-gray-200 dark:border-gray-700",children:"Click a suggestion or type to search..."})]})}),!Bf&&ud.length>=2&&Ff.filter(y=>{var E;if(Ba==="all")return!0;switch(Ba){case"stock":return(y.exchange==="NSE"||y.exchange==="BSE")&&(!y.instrumentType||y.instrumentType===""||y.instrumentType==="EQ"||((E=y.symbol)==null?void 0:E.endsWith("-EQ"))||y.instrumentType==="AMXIDX");case"commodity":return y.exchange==="MCX"||y.exchange==="NCDEX";case"fo":return y.exchange==="NFO"||y.exchange==="BFO";case"currency":return y.exchange==="CDS";case"index":return y.instrumentType==="AMXIDX"||y.instrumentType==="INDEX";default:return!0}}).map(y=>n.jsxs("button",{onClick:()=>{const E=`${y.exchange}:${y.symbol}`;mh(E),sp({symbol:y.symbol,token:y.token,exchange:y.exchange,tradingSymbol:y.tradingSymbol,instrumentType:y.instrumentType}),Tt({token:y.token,exchange:y.exchange,tradingSymbol:y.tradingSymbol}),to(!1),ou("")},className:`w-full text-left px-3 py-2 rounded text-sm hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors ${Cn===`${y.exchange}:${y.symbol}`?"bg-blue-100 dark:bg-blue-900 font-medium":""}`,"data-testid":`stock-option-${y.exchange}:${y.symbol}`,children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("span",{className:"flex-1 font-medium",children:y.name}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:`px-1.5 py-0.5 text-xs font-semibold rounded ${y.exchange==="NSE"?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":y.exchange==="BSE"?"bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300":y.exchange==="MCX"?"bg-orange-100 dark:bg-orange-900 text-orange-700 dark:text-orange-300":y.exchange==="NFO"?"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300":y.exchange==="BFO"?"bg-teal-100 dark:bg-teal-900 text-teal-700 dark:text-teal-300":y.exchange==="CDS"?"bg-cyan-100 dark:bg-cyan-900 text-cyan-700 dark:text-cyan-300":y.exchange==="NCDEX"?"bg-amber-100 dark:bg-amber-900 text-amber-700 dark:text-amber-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:y.exchange}),n.jsx("span",{className:"px-1.5 py-0.5 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded",children:y.instrumentType})]})]}),y.symbol!==y.name&&n.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:y.symbol})]},`${y.exchange}:${y.symbol}`))]})]})})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[da==="heatmap"&&n.jsx("span",{className:"text-xs font-semibold text-slate-700 dark:text-slate-300 px-2 py-1 rounded bg-slate-100 dark:bg-slate-800/50",children:(()=>{const y=xu.replace("NSE:","").replace("-INDEX","").replace("-EQ",""),E=y.split(" ");if(E.length>1){const M=E[0];if(M==="NIFTY")return"NIFTY50";if(["SENSEX","BANKNIFTY","FINNIFTY","MIDCPNIFTY"].includes(M))return M}return y||"No symbol"})()}),da==="heatmap"&&hd.length>1&&n.jsx(H,{variant:"ghost",size:"sm",className:"h-8 px-2 text-xs text-slate-700 dark:text-slate-300",onClick:()=>{console.log(`  NEXT CLICKED | Mode: HEATMAP | Index: ${yc}/${hd.length}`);const y=(yc+1)%hd.length,E=hd[y];if(console.log(`  Switching: ${hd[yc]}  ${E}`),q.current){try{q.current.remove(),console.log("  Heatmap chart destroyed")}catch{}q.current=null,fe.current=null,Se.current=null,ve.current=null}Bl(y);const M=`NSE:${E}-INDEX`;Th(M),Eh([]),Pt(null),console.log(`  [HEATMAP] Symbol updated to ${E}, refetching chart...`),ua&&_s(M,ua)},"data-testid":"button-next-symbol",children:n.jsx(Zh,{className:"w-3 h-3"})}),da==="search"&&n.jsxs(wa,{open:_f,onOpenChange:Ym,children:[n.jsx(Na,{asChild:!0,children:n.jsxs(H,{variant:"ghost",className:"h-8 px-2 text-xs min-w-[60px] justify-between text-slate-700 dark:text-slate-300","data-testid":"button-journal-timeframe-dropdown",children:[n.jsx("span",{children:yd(Mi)}),n.jsx(Mp,{className:"w-3 h-3 ml-1"})]})}),n.jsx(fa,{className:"w-56 p-2 bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700",align:"start",children:n.jsx("div",{className:"grid gap-1",children:jh.map(y=>n.jsx("button",{className:`w-full text-left px-2 py-1.5 rounded text-xs transition-colors ${Mi===y.value?"bg-slate-200 dark:bg-slate-700 text-slate-900 dark:text-slate-100 font-medium":"text-slate-900 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"}`,onClick:()=>{vg(y.value),_i(y.value),Ym(!1)},"data-testid":`timeframe-option-${y.value}`,children:y.label},y.value))})})]}),da==="heatmap"&&n.jsxs(wa,{open:wh,onOpenChange:Mo,children:[n.jsx(Na,{asChild:!0,children:n.jsxs(H,{variant:"ghost",className:"h-8 px-2 text-xs min-w-[60px] justify-between text-slate-700 dark:text-slate-300","data-testid":"button-heatmap-timeframe-dropdown",children:[n.jsx("span",{children:yd(na)}),n.jsx(Mp,{className:"w-3 h-3 ml-1"})]})}),n.jsx(fa,{className:"w-56 p-2 bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700",align:"start",children:n.jsx("div",{className:"grid gap-1",children:jh.map(y=>n.jsx("button",{className:`w-full text-left px-2 py-1.5 rounded text-xs transition-colors ${na===y.value?"bg-slate-200 dark:bg-slate-700 text-slate-900 dark:text-slate-100 font-medium":"text-slate-900 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"}`,onClick:()=>{Pg(y.value),_i(y.value),Mo(!1)},"data-testid":`heatmap-timeframe-option-${y.value}`,children:y.label},y.value))})})]}),da==="heatmap"&&n.jsxs(wa,{children:[n.jsx(Na,{asChild:!0,children:(()=>{const y=G=>{var $;if(!G)return 0;if((($=G==null?void 0:G.performanceMetrics)==null?void 0:$.netPnL)!==void 0)return G.performanceMetrics.netPnL;if(G!=null&&G.tradeHistory&&Array.isArray(G.tradeHistory)){let ae=0;return G.tradeHistory.forEach(c=>{if(c.pnl&&typeof c.pnl=="string"){const u=parseFloat(c.pnl.replace(/[,]/g,""));isNaN(u)||(ae+=u)}}),ae}return typeof(G==null?void 0:G.netPnL)=="number"?G.netPnL:typeof(G==null?void 0:G.totalProfit)=="number"||typeof(G==null?void 0:G.totalLoss)=="number"?((G==null?void 0:G.totalProfit)||0)-Math.abs((G==null?void 0:G.totalLoss)||0):0},E=G=>{if(G===0)return"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200";const $=Math.abs(G);return G>0?$>=5e3?"bg-green-800 dark:bg-green-700 text-white":$>=3e3?"bg-green-700 dark:bg-green-600 text-white":$>=1500?"bg-green-600 dark:bg-green-500 text-white":$>=500?"bg-green-500 dark:bg-green-400 text-white":"bg-green-400 dark:bg-green-300 text-gray-800 dark:text-gray-900":$>=5e3?"bg-red-800 dark:bg-red-700 text-white":$>=3e3?"bg-red-700 dark:bg-red-600 text-white":$>=1500?"bg-red-600 dark:bg-red-500 text-white":$>=500?"bg-red-500 dark:bg-red-400 text-white":"bg-red-400 dark:bg-red-300 text-gray-800 dark:text-gray-900"},M=ua?Gs[ua]:null,z=M?y(M):0,K=ua?E(z):"";return n.jsxs(H,{variant:ua?"default":"outline",size:"sm",className:`h-8 px-2 text-xs flex items-center gap-1 font-medium ${K}`,title:ua?`${ua}: P&L ${z.toLocaleString("en-IN")}`:"Click to select date from heatmap","data-testid":"button-open-heatmap-picker",children:[n.jsx(wm,{className:"w-3.5 h-3.5"}),n.jsx("span",{children:ua||"No date selected"})]})})()}),n.jsxs(fa,{className:"w-96 p-2",align:"start",children:[n.jsx("div",{className:"text-xs font-semibold mb-2",children:"Select Date from Heatmap"}),n.jsx("div",{className:"grid grid-cols-7 gap-0.5 max-h-64 overflow-y-auto",children:Object.entries(Gs).filter(([y,E])=>E!=null&&E.tradeHistory&&Array.isArray(E.tradeHistory)&&E.tradeHistory.length>0?!0:((E==null?void 0:E.netPnL)||0||((E==null?void 0:E.totalProfit)||0)-Math.abs((E==null?void 0:E.totalLoss)||0))!==0).sort(([y],[E])=>E.localeCompare(y)).slice(0,10).map(([y,E])=>{const M=$=>{var ae;if(!$)return 0;if(((ae=$==null?void 0:$.performanceMetrics)==null?void 0:ae.netPnL)!==void 0)return $.performanceMetrics.netPnL;if($!=null&&$.tradeHistory&&Array.isArray($.tradeHistory)){let c=0;return $.tradeHistory.forEach(u=>{if(u.pnl&&typeof u.pnl=="string"){const p=parseFloat(u.pnl.replace(/[,]/g,""));isNaN(p)||(c+=p)}}),c}return typeof($==null?void 0:$.netPnL)=="number"?$.netPnL:typeof($==null?void 0:$.totalProfit)=="number"||typeof($==null?void 0:$.totalLoss)=="number"?(($==null?void 0:$.totalProfit)||0)-Math.abs(($==null?void 0:$.totalLoss)||0):0},z=$=>{if($===0)return"bg-gray-100 dark:bg-gray-700";const ae=Math.abs($);return $>0?ae>=5e3?"bg-green-800 dark:bg-green-700":ae>=3e3?"bg-green-700 dark:bg-green-600":ae>=1500?"bg-green-600 dark:bg-green-500":ae>=500?"bg-green-500 dark:bg-green-400":"bg-green-300 dark:bg-green-300":ae>=5e3?"bg-red-800 dark:bg-red-700":ae>=3e3?"bg-red-700 dark:bg-red-600":ae>=1500?"bg-red-600 dark:bg-red-500":ae>=500?"bg-red-500 dark:bg-red-400":"bg-red-300 dark:bg-red-300"},K=M(E),G=z(K);return n.jsx("button",{onClick:()=>{const $=Gs[y];let ae="NSE:NIFTY50-INDEX";if($!=null&&$.tradeHistory&&$.tradeHistory.length>0){const c=$.tradeHistory[0];c.symbol&&(ae=`NSE:${c.symbol.replace(/NSE:|BSE:|-INDEX|-EQ/g,"")}-INDEX`)}console.log(` [HEATMAP CLICK] Date: ${y}, Symbol: ${ae}`),_s(ae,y)},className:`h-6 text-xs font-medium rounded border ${G} ${ua===y?"ring-2 ring-purple-500 ring-offset-1":"border-gray-300 dark:border-gray-600"} hover:opacity-80 transition`,title:`${y}: P&L ${K.toLocaleString("en-IN")}`,"data-testid":`button-heatmap-date-${y}`,children:new Date(y).getDate()},y)})})]})]}),da==="heatmap"&&n.jsx(H,{size:"icon",variant:"outline",className:"h-8 w-8",onClick:()=>{console.log(" Switching from heatmap to manual mode"),Cc("search")},title:"Switch to manual mode","data-testid":"button-exit-heatmap-mode",children:n.jsx(Wr,{className:"w-3.5 h-3.5"})}),da==="search"&&n.jsx(H,{onClick:()=>{console.log(` SEARCH CHART: Fetching ${yd(Mi)} data for manual search`),Bn()},disabled:so,variant:"outline",size:"icon",className:"h-8 w-8",title:`Fetch ${yd(Mi)} chart data (standalone search - last 10 days)`,"data-testid":"button-fetch-journal-chart",children:so?n.jsx("div",{className:"w-3 h-3 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}):n.jsx(go,{className:"w-3.5 h-3.5"})})]})]})}),n.jsxs("div",{className:"flex-1 relative flex flex-col h-full bg-white dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700 p-0",children:[n.jsxs("div",{className:"hidden flex items-center justify-between px-2 py-1 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsxs("button",{onClick:()=>Cc("search"),className:`px-3 py-1 text-xs font-medium rounded-md transition-colors ${da==="search"?"bg-blue-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,"data-testid":"button-chart-mode-search",children:[n.jsx(Zl,{className:"w-3 h-3 inline mr-1"}),"Search"]}),n.jsxs("button",{onClick:()=>Cc("heatmap"),className:`px-3 py-1 text-xs font-medium rounded-md transition-colors ${da==="heatmap"?"bg-purple-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,"data-testid":"button-chart-mode-heatmap",children:[n.jsx(x6,{className:"w-3 h-3 inline mr-1"}),"Heatmap"]})]}),n.jsx("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400",children:da==="search"?n.jsxs("span",{children:["Manual: ",Cn.replace("NSE:","").replace("-INDEX","").replace("-EQ","")||"Select symbol"]}):n.jsxs("span",{children:["Date: ",ua||"Select date"," | ",(()=>{const y=xu.replace("NSE:","").replace("-INDEX","").replace("-EQ",""),E=y.split(" ");if(E.length>1){const M=E[0];if(M==="NIFTY")return"NIFTY50";if(["SENSEX","BANKNIFTY","FINNIFTY","MIDCPNIFTY"].includes(M))return M}return y||"No symbol"})()]})})]}),n.jsxs("div",{className:`flex-1 relative overflow-hidden ${da==="search"?"flex flex-col":"hidden"}`,children:[so&&n.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-white/95 dark:bg-gray-900/95 rounded-lg",children:n.jsxs("div",{className:"flex flex-col items-center gap-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"w-14 h-14 border-4 border-blue-500/20 rounded-full"}),n.jsx("div",{className:"absolute inset-0 w-14 h-14 border-4 border-transparent border-t-blue-500 border-r-blue-500 rounded-full animate-spin"})]}),n.jsx("div",{className:"text-center",children:n.jsxs("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:["Loading ",yd(Mi)," chart..."]})})]})}),Ri&&qr&&qr.length>0&&n.jsxs("div",{className:"absolute top-1 left-2 z-40 flex items-center gap-1 text-xs font-mono pointer-events-none","data-testid":"search-chart-ohlc-display",children:[n.jsxs("span",{className:"text-green-600 dark:text-green-400 font-medium",children:["O",Ri.open.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),n.jsxs("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:["H",Ri.high.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),n.jsxs("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:["L",Ri.low.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),n.jsxs("span",{className:`font-medium ${Ri.close>=Ri.open?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:["C",Ri.close.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),n.jsxs("span",{className:`font-medium ${Ri.change>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[Ri.change>=0?"+":"",Ri.change.toFixed(2)]}),n.jsxs("span",{className:`font-medium ${Ri.changePercent>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:["(",Ri.changePercent>=0?"+":"",Ri.changePercent.toFixed(2),"%)"]})]}),n.jsx("div",{ref:ao,className:"flex-1 w-full relative bg-white dark:bg-gray-800","data-testid":"search-chart-container"}),(!qr||qr.length===0)&&!so&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-16 h-16 mx-auto mb-3 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:n.jsx(Zl,{className:"h-8 w-8 text-blue-500 dark:text-blue-400"})}),n.jsx("div",{className:"text-gray-900 dark:text-gray-100 font-medium mb-1",children:"Search Mode"}),n.jsx("div",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Select a symbol and fetch to view chart"})]})})]}),n.jsxs("div",{className:`flex-1 relative overflow-hidden ${da==="heatmap"?"flex flex-col":"hidden"}`,children:[Tg&&n.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-white/95 dark:bg-gray-900/95 rounded-lg",children:n.jsxs("div",{className:"flex flex-col items-center gap-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"w-14 h-14 border-4 border-purple-500/20 rounded-full"}),n.jsx("div",{className:"absolute inset-0 w-14 h-14 border-4 border-transparent border-t-purple-500 border-r-purple-500 rounded-full animate-spin"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:"Loading heatmap chart..."}),n.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Fetching ",ua," data"]})]})]})}),Et&&Bs&&Bs.length>0&&n.jsxs("div",{className:"absolute top-1 left-2 z-40 flex items-center gap-1 text-xs font-mono pointer-events-none","data-testid":"heatmap-chart-ohlc-display",children:[n.jsxs("span",{className:"text-green-600 dark:text-green-400 font-medium",children:["O",Et.open.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),n.jsxs("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:["H",Et.high.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),n.jsxs("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:["L",Et.low.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),n.jsxs("span",{className:`font-medium ${Et.close>=Et.open?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:["C",Et.close.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),n.jsxs("span",{className:`font-medium ${Et.change>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[Et.change>=0?"+":"",Et.change.toFixed(2)]}),n.jsxs("span",{className:`font-medium ${Et.changePercent>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:["(",Et.changePercent>=0?"+":"",Et.changePercent.toFixed(2),"%)"]})]}),n.jsx("div",{ref:D,className:"flex-1 w-full relative bg-white dark:bg-gray-800","data-testid":"heatmap-chart-container"}),(!Bs||Bs.length===0)&&!Tg&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-16 h-16 mx-auto mb-3 rounded-full bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center",children:n.jsx(x6,{className:"h-8 w-8 text-purple-500 dark:text-purple-400"})}),n.jsx("div",{className:"text-gray-900 dark:text-gray-100 font-medium mb-1",children:"Heatmap Mode"}),n.jsx("div",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Select a date from the heatmap calendar"})]})})]})]})]})})}),n.jsx("div",{className:`h-[400px] ${On===1?"block":"hidden"} md:block`,children:n.jsx(wW,{ref:au,images:B1,onImagesChange:Qa})}),n.jsxs(St,{className:`bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 h-[400px] flex flex-col ${On===2?"block":"hidden"} md:block`,children:[n.jsx("div",{className:"h-[30%] border-b border-gray-200 dark:border-gray-700",children:n.jsxs(Kt,{className:"p-2 h-full",children:[n.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Total Trades"}),n.jsx("p",{className:"text-base font-bold text-gray-800 dark:text-white",children:Pc.totalTrades})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Win Rate"}),n.jsxs("p",{className:"text-xl font-bold text-green-600",children:[Pc.winRate,"%"]})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-xs",children:"Net P&L"}),n.jsxs("p",{className:`text-xl font-bold ${Pc.netPnL>=0?"text-green-600":"text-red-600"}`,children:["",Pc.netPnL.toLocaleString("en-IN")]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2 text-xs",children:[n.jsxs("div",{className:"space-y-0.5 bg-white dark:bg-gray-900/50 rounded-lg p-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Winning Trades:"}),n.jsx("span",{className:"text-green-600 font-medium",children:Pc.winningTrades})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Profit:"}),n.jsxs("span",{className:"text-green-600 font-medium",children:["",Pc.totalProfit.toLocaleString("en-IN")]})]})]}),n.jsxs("div",{className:"space-y-0.5 bg-white dark:bg-gray-900/50 rounded-lg p-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Losing Trades:"}),n.jsx("span",{className:"text-red-600 font-medium",children:Pc.losingTrades})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Loss:"}),n.jsxs("span",{className:"text-red-600 font-medium",children:["",Pc.totalLoss.toLocaleString("en-IN")]})]})]})]})]})}),n.jsx("div",{className:"h-[70%] flex flex-col",children:n.jsxs(Kt,{className:"p-2 flex-1 flex flex-col h-full overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-800 dark:text-white",children:"TRADING NOTES"}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsxs(wa,{open:zf,onOpenChange:ql,children:[n.jsx(Na,{asChild:!0,children:n.jsx(H,{variant:"ghost",size:"icon",className:"h-8 w-8","data-testid":"button-daily-factors-dropdown",children:n.jsx(Jl,{className:"w-4 h-4"})})}),n.jsx(fa,{className:"w-80 p-3",children:n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h4",{className:"font-medium text-sm",children:"Daily Life Factors"}),il.length>0&&n.jsxs(H,{variant:"ghost",size:"sm",onClick:Za,className:"text-xs text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300","data-testid":"button-clear-daily-factors",children:[n.jsx(za,{className:"w-3 h-3 mr-1"}),"Clear All"]})]}),il.length>0&&n.jsx("div",{className:"flex flex-wrap gap-1 p-2 bg-gray-50 dark:bg-gray-900 rounded-md",children:il.map(y=>n.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-amber-100 dark:bg-amber-900 text-amber-800 dark:text-amber-200 rounded-full cursor-pointer hover:bg-amber-200 dark:hover:bg-amber-800 transition-colors",onClick:()=>Yn(y),"data-testid":`selected-daily-factor-${y}`,children:[y,n.jsx(Wr,{className:"w-3 h-3 ml-1"})]},y))}),n.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto custom-thin-scrollbar",children:Object.entries(lp).map(([y,E])=>n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h5",{className:`text-xs font-semibold text-${E.color}-600 dark:text-${E.color}-400`,children:E.name}),n.jsxs("span",{className:"text-xs text-gray-500",children:[il.filter(M=>E.tags.includes(M)).length,"/",E.maxSelections]})]}),n.jsx("div",{className:"grid grid-cols-2 gap-1",children:E.tags.map(M=>{const z=il.includes(M),K=il.filter($=>E.tags.includes($)).length,G=!z&&K>=E.maxSelections;return n.jsx("button",{onClick:()=>Yn(M),disabled:G,className:`
                                                  px-2 py-1.5 text-xs rounded-md border transition-all duration-200 text-left
                                                  ${z?`bg-${E.color}-500 text-white border-${E.color}-500 hover:bg-${E.color}-600`:G?"bg-gray-100 dark:bg-gray-800 text-gray-400 dark:text-gray-600 border-gray-200 dark:border-gray-700 cursor-not-allowed":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"}
                                                `,"data-testid":`daily-factor-option-${M}`,children:M},M)})})]},y))})]})})]}),n.jsxs(wa,{open:U1,onOpenChange:jd,children:[n.jsx(Na,{asChild:!0,children:n.jsx(H,{variant:"ghost",size:"icon",className:"h-8 w-8","data-testid":"button-indicators-dropdown",children:n.jsx(ia,{className:"w-4 h-4"})})}),n.jsx(fa,{className:"w-80 p-3",children:n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h4",{className:"font-medium text-sm",children:"Indicator & Timeframe Tracker"}),ei.length>0&&n.jsxs(H,{variant:"ghost",size:"sm",onClick:Ev,className:"text-xs text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300","data-testid":"button-clear-indicators",children:[n.jsx(za,{className:"w-3 h-3 mr-1"}),"Clear All"]})]}),n.jsxs("div",{className:"space-y-1 bg-white dark:bg-gray-900/50 rounded-lg p-3",children:[n.jsx("label",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300",children:"Timeframe"}),n.jsxs("div",{className:"grid grid-cols-4 gap-1",children:[V1.map(y=>n.jsx("button",{onClick:()=>{ol(y.value),typeof window<"u"&&localStorage.setItem("indicatorTimeframe",y.value)},className:`px-2 py-1.5 text-xs rounded-md border transition-all duration-200 ${cp===y.value?"bg-emerald-500 text-white border-emerald-500 hover:bg-emerald-600":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"}`,"data-testid":`timeframe-${y.value}`,children:y.label},y.value)),!V1.some(y=>y.value===cp)&&n.jsxs("button",{onClick:()=>{},className:"px-2 py-1.5 text-xs rounded-md border bg-emerald-500 text-white border-emerald-500 transition-all duration-200 relative group","data-testid":`timeframe-custom-${cp}`,title:`Custom: ${cp}`,children:[n.jsx("span",{className:"truncate",children:cp}),n.jsx("button",{onClick:y=>{y.stopPropagation(),ol("5min"),localStorage.setItem("indicatorTimeframe","5min")},className:"absolute right-0.5 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity","data-testid":"button-remove-custom-timeframe",children:n.jsx(Wr,{className:"w-2.5 h-2.5"})})]}),n.jsxs(bn,{open:Sk,onOpenChange:ax,children:[n.jsx(Zoe,{asChild:!0,children:n.jsx("button",{className:"px-2 py-1.5 text-xs rounded-md border bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200","data-testid":"button-add-custom-timeframe",children:n.jsx(vi,{className:"w-3 h-3"})})}),n.jsxs(pn,{className:"sm:max-w-[300px]",children:[n.jsx(Zn,{children:n.jsx(Xn,{children:"Custom Timeframe"})}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("input",{type:"text",placeholder:"e.g., 2h, 4h, 3d, 1w",value:Ag,onChange:y=>ix(y.target.value),className:"w-full px-3 py-2 text-xs border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-800 dark:text-white","data-testid":"input-custom-timeframe"}),n.jsxs("div",{className:"flex gap-1.5",children:[n.jsx(H,{variant:"outline",size:"sm",onClick:()=>{ix(""),ax(!1)},className:"flex-1 text-xs","data-testid":"button-cancel-custom-timeframe",children:"Cancel"}),n.jsx(H,{size:"sm",onClick:()=>{Ag.trim()&&(ol(Ag.trim()),typeof window<"u"&&localStorage.setItem("indicatorTimeframe",Ag.trim()),ix(""),ax(!1))},className:"flex-1 text-xs bg-emerald-600 hover:bg-emerald-700 text-white","data-testid":"button-confirm-custom-timeframe",children:"Apply"})]})]})]})]})]})]}),ei.length>0&&n.jsx("div",{className:"flex flex-wrap gap-1 p-2 bg-gray-50 dark:bg-gray-900 rounded-md",children:ei.map(y=>n.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-emerald-100 dark:bg-emerald-900 text-emerald-800 dark:text-emerald-200 rounded-full cursor-pointer hover:bg-emerald-200 dark:hover:bg-emerald-800 transition-colors",onClick:()=>dp(y),"data-testid":`selected-indicator-${y}`,children:[y,n.jsx(Wr,{className:"w-3 h-3 ml-1"})]},y))}),n.jsx("div",{className:"grid grid-cols-2 gap-1",children:z1.map(y=>{const E=ei.includes(y);return n.jsx("button",{onClick:()=>dp(y),className:`px-2 py-1.5 text-xs rounded-md border transition-all duration-200 text-left ${E?"bg-emerald-500 text-white border-emerald-500 hover:bg-emerald-600":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"}`,"data-testid":`indicator-option-${y}`,children:y},y)})})]})})]}),n.jsxs(wa,{open:op,onOpenChange:Ph,children:[n.jsx(Na,{asChild:!0,children:n.jsx(H,{variant:"ghost",size:"icon",className:"h-8 w-8","data-testid":"button-tags-dropdown",children:n.jsx(Xne,{className:"w-4 h-4"})})}),n.jsx(fa,{className:"w-80 p-3",children:n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h4",{className:"font-medium text-sm",children:"Trading Psychology & Strategy Tags"}),al.length>0&&n.jsxs(H,{variant:"ghost",size:"sm",onClick:Rh,className:"text-xs text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300","data-testid":"button-clear-tags",children:[n.jsx(za,{className:"w-3 h-3 mr-1"}),"Clear All"]})]}),$o(al).length>0&&n.jsx("div",{className:"flex flex-wrap gap-1 p-2 bg-gray-50 dark:bg-gray-900 rounded-md",children:$o(al).map(y=>n.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200 rounded-full cursor-pointer hover:bg-indigo-200 dark:hover:bg-indigo-800 transition-colors",onClick:()=>J1(y),"data-testid":`selected-tag-${y}`,children:[y,n.jsx(Wr,{className:"w-3 h-3 ml-1"})]},y))}),n.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto custom-thin-scrollbar",children:Object.entries(_h).map(([y,E])=>n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h5",{className:`text-xs font-semibold text-${E.color}-600 dark:text-${E.color}-400`,children:[E.name,E.required&&n.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),n.jsxs("span",{className:"text-xs text-gray-500",children:[al.filter(M=>E.tags.includes(M)).length,"/",E.maxSelections]})]}),n.jsx("div",{className:"grid grid-cols-2 gap-1",children:E.tags.map(M=>{const z=al.includes(M),K=al.filter($=>E.tags.includes($)).length,G=!z&&K>=E.maxSelections;return n.jsx("button",{onClick:()=>ox(M),disabled:G,className:`
                                                  px-2 py-1.5 text-xs rounded-md border transition-all duration-200 text-left
                                                  ${z?`bg-${E.color}-500 text-white border-${E.color}-500 hover:bg-${E.color}-600`:G?"bg-gray-100 dark:bg-gray-800 text-gray-400 dark:text-gray-600 border-gray-200 dark:border-gray-700 cursor-not-allowed":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"}
                                                `,"data-testid":`tag-option-${M}`,children:M},M)})})]},y))})]})})]}),Lt?n.jsxs(n.Fragment,{children:[n.jsx(H,{size:"icon",variant:"ghost",onClick:Iv,className:"h-7 w-7 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300","data-testid":"button-cancel-notes",children:n.jsx(Wr,{className:"w-3 h-3"})}),n.jsx(H,{size:"icon",onClick:Hl,className:"h-7 w-7 bg-green-600 hover:bg-green-700 text-white","data-testid":"button-save-notes",children:n.jsx(hl,{className:"w-3 h-3"})})]}):n.jsx(H,{size:"sm",variant:"ghost",onClick:Tk,className:"text-xs text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-white","data-testid":"button-edit-notes",children:n.jsx(Bh,{className:"w-3 h-3"})})]})]}),Lt?n.jsx("textarea",{value:wd,onChange:y=>Nd(y.target.value),placeholder:"Write your trading notes, strategies, observations...",className:"flex-1 w-full p-2 text-xs border border-slate-200 dark:border-slate-800 rounded-lg bg-white dark:bg-slate-900 text-gray-800 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 resize-none focus:outline-none focus:ring-2 focus:ring-blue-500","data-testid":"textarea-notes"}):n.jsxs("div",{className:"flex-1 w-full p-2 text-xs border border-slate-200 dark:border-slate-800 rounded-lg bg-white dark:bg-slate-900 text-gray-800 dark:text-white overflow-y-auto custom-thin-scrollbar",children:[il.length>0&&n.jsx("div",{className:"mb-2 pb-2 border-b border-gray-300 dark:border-gray-600",children:n.jsx("div",{className:"flex flex-wrap gap-1",children:il.map(y=>n.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 text-xs font-medium bg-amber-100 dark:bg-amber-800 text-amber-800 dark:text-amber-200 rounded-full cursor-pointer hover:bg-amber-200 dark:hover:bg-amber-700 transition-colors group",onClick:()=>Yn(y),title:"Click to remove daily factor","data-testid":`inline-daily-factor-${y}`,children:[y,n.jsx(Wr,{className:"w-3 h-3 ml-1 opacity-60 group-hover:opacity-100"})]},y))})}),ei.length>0&&n.jsx("div",{className:"mb-2 pb-2 border-b border-gray-300 dark:border-gray-600",children:n.jsx("div",{className:"flex flex-wrap gap-1",children:ei.map(y=>n.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 text-xs font-medium bg-emerald-100 dark:bg-emerald-800 text-emerald-800 dark:text-emerald-200 rounded-full cursor-pointer hover:bg-emerald-200 dark:hover:bg-emerald-700 transition-colors group",onClick:()=>dp(y),title:"Click to remove indicator","data-testid":`inline-indicator-${y}`,children:[y,n.jsx(Wr,{className:"w-3 h-3 ml-1 opacity-60 group-hover:opacity-100"})]},y))})}),$o(al).length>0&&n.jsx("div",{className:"mb-2 pb-2 border-b border-gray-300 dark:border-gray-600",children:n.jsx("div",{className:"flex flex-wrap gap-1",children:$o(al).map(y=>n.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 text-xs font-medium bg-indigo-100 dark:bg-indigo-800 text-indigo-800 dark:text-indigo-200 rounded-full cursor-pointer hover:bg-indigo-200 dark:hover:bg-indigo-700 transition-colors group",onClick:()=>J1(y),title:"Click to remove tag","data-testid":`inline-tag-${y}`,children:[y,n.jsx(Wr,{className:"w-3 h-3 ml-1 opacity-60 group-hover:opacity-100"})]},y))})}),Jr?n.jsx("pre",{className:"font-sans text-xs overflow-y-auto flex-1 whitespace-pre",children:Jr}):n.jsx("p",{className:"text-gray-500 dark:text-gray-400 italic",children:"No trading notes yet. Click Edit to add your first note."})]})]})})]})]}),n.jsxs("div",{className:"md:hidden flex items-center justify-between mt-4 gap-4",children:[n.jsxs(H,{variant:"outline",onClick:()=>Hr(y=>y===0?2:y-1),className:"flex-1 h-12","data-testid":"button-journal-prev",children:[n.jsx(Du,{className:"h-5 w-5 mr-2"}),n.jsx("span",{className:"text-sm font-medium",children:On===0?"Notes":On===1?"Chart":"Upload"})]}),n.jsxs("div",{className:"px-4 py-2 bg-gray-100 dark:bg-gray-800 rounded-md",children:[n.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Current"}),n.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:On===0?"Chart":On===1?"Upload":"Notes"})]}),n.jsxs(H,{variant:"outline",onClick:()=>Hr(y=>y===2?0:y+1),className:"flex-1 h-12","data-testid":"button-journal-next",children:[n.jsx("span",{className:"text-sm font-medium",children:On===0?"Upload":On===1?"Notes":"Chart"}),n.jsx(Zh,{className:"h-5 w-5 ml-2"})]})]})]}),n.jsxs("div",{className:"space-y-4 md:space-y-0 md:grid md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"md:hidden",children:[n.jsxs("div",{onClick:()=>Dr(!dr),className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-900/30 border border-slate-200 dark:border-slate-700 rounded-lg cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800/50 transition-colors","data-testid":"button-toggle-trade-history",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ia,{className:"h-4 w-4 text-slate-600 dark:text-slate-400"}),n.jsx("span",{className:"text-sm font-semibold text-slate-800 dark:text-slate-100",children:"TRADE HISTORY SUMMARY"})]}),dr?n.jsx(Bb,{className:"h-5 w-5 text-slate-600 dark:text-slate-400"}):n.jsx(Mp,{className:"h-5 w-5 text-slate-600 dark:text-slate-400"})]}),dr&&n.jsx(St,{className:"mt-2 bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-800",children:n.jsxs(Kt,{className:"p-3",children:[n.jsxs("div",{className:"flex items-center justify-end gap-1.5 mb-3",children:[n.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>Kc(!0),className:"h-7 text-xs px-2","data-testid":"button-import-pnl",children:[n.jsx(bse,{className:"h-3 w-3 mr-1"}),"Import"]}),n.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>Um(!0),className:"h-7 text-xs px-2 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-300 hidden md:block","data-testid":"button-demo-trade-mobile",children:[n.jsx(Gn,{className:"h-3 w-3 mr-1"}),"Paper Trade"]})]}),n.jsx("div",{className:"max-h-80 overflow-auto border border-slate-200 dark:border-slate-700 custom-thin-scrollbar",children:n.jsxs("table",{className:"w-full text-xs",children:[n.jsx("thead",{className:"bg-blue-50 dark:bg-blue-950 text-blue-600 dark:text-blue-300 sticky top-0",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-1 text-left min-w-[60px]",children:"Time"}),n.jsx("th",{className:"p-1 text-left min-w-[50px]",children:"Order"}),n.jsx("th",{className:"p-1 text-left min-w-[80px]",children:"Symbol"}),n.jsx("th",{className:"p-1 text-left min-w-[50px]",children:"Type"}),n.jsx("th",{className:"p-1 text-left min-w-[40px]",children:"Qty"}),n.jsx("th",{className:"p-1 text-left min-w-[60px]",children:"Price"}),n.jsx("th",{className:"p-1 text-left min-w-[60px]",children:"P&L"}),n.jsx("th",{className:"p-1 text-left min-w-[40px]",children:"%"}),n.jsx("th",{className:"p-1 text-left min-w-[70px]",children:"Duration"})]})}),n.jsx("tbody",{className:"bg-white dark:bg-slate-900 text-slate-600 dark:text-slate-300",children:Hm&&cn.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:9,className:"p-8 text-center",children:n.jsxs("div",{className:"flex flex-col items-center gap-2",children:[n.jsx("div",{className:"w-6 h-6 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),n.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Loading trade history..."})]})})}):cn.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:9,className:"p-8 text-center text-sm text-slate-500 dark:text-slate-400",children:Qr?lo?"No trades for this date":"Select a date from the calendar to view trades":"No personal data yet - switch to Paper Trade mode or start adding your trades!"})}):cn.map((y,E)=>n.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[n.jsx("td",{className:"p-1",children:y.time}),n.jsx("td",{className:"p-1",children:n.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${y.order==="BUY"?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:y.order})}),n.jsx("td",{className:"p-1",children:y.symbol}),n.jsx("td",{className:"p-1",children:y.type}),n.jsx("td",{className:"p-1",children:y.qty}),n.jsxs("td",{className:"p-1",children:["",y.price]}),n.jsx("td",{className:`p-2 ${(y.pnl||"").includes("+")?"text-green-600":(y.pnl||"").includes("-")?"text-red-600":""}`,children:y.pnl}),n.jsx("td",{className:`p-2 font-medium ${(()=>{if(!y.pnl||y.pnl==="-")return"";const M=(y.pnl||"").replace(/[,+\s]/g,""),z=parseFloat(M)||0,G=y.price*y.qty||1,$=z/G*100;return $>0?"text-green-600":$<0?"text-red-600":"text-gray-500"})()}`,children:(()=>{if(!y.pnl||y.pnl==="-")return"-";const M=(y.pnl||"").replace(/[,+\s]/g,""),z=parseFloat(M)||0,G=y.price*y.qty||1,$=z/G*100;return`${$>=0?"+":""}${$.toFixed(2)}%`})()}),n.jsx("td",{className:"p-1",children:hx(y.duration)})]},E))})]})})]})})]}),n.jsx(St,{className:"block bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 h-[420px]",children:n.jsxs(Kt,{className:"p-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3 gap-2",children:[n.jsx("h3",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 uppercase tracking-wide",children:"Trade History"}),n.jsxs("div",{className:"flex gap-1.5",children:[n.jsx(H,{variant:"ghost",size:"sm",onClick:()=>Im(!0),className:"h-7 px-2 text-xs","data-testid":"button-connect",children:"Connect"}),Wo&&n.jsx(H,{variant:"ghost",size:"sm",className:"h-7 px-2 text-xs",onClick:()=>jo(!0),"data-testid":"button-broker-orders-zerodha",title:"View Orders & Positions (Zerodha)",children:n.jsx("img",{src:"https://zerodha.com/static/images/products/kite-logo.svg",alt:"Zerodha",className:"h-4 w-4"})}),ln&&n.jsx(H,{variant:"ghost",size:"sm",className:"h-7 px-2 text-xs",onClick:()=>jo(!0),"data-testid":"button-broker-orders-upstox",title:"View Orders & Positions (Upstox)",children:n.jsx("img",{src:"https://assets.upstox.com/content/assets/images/cms/202494/MediumWordmark_UP(WhiteOnPurple).png",alt:"Upstox",className:"h-4 w-4"})}),ci&&n.jsx(H,{variant:"ghost",size:"sm",className:"h-7 px-2 text-xs",onClick:()=>jo(!0),"data-testid":"button-broker-orders-angelone",title:"View Orders & Positions (Angel One)",children:n.jsx("img",{src:"https://play-lh.googleusercontent.com/Ic8lUYwMCgTePpo-Gbg0VwE_0srDj1xD386BvQHO_mOwsfMjX8lFBLl0Def28pO_Mvk=s48-rw?v=1701",alt:"Angel One",className:"h-4 w-4"})}),Ko&&n.jsx(H,{variant:"ghost",size:"sm",className:"h-7 px-2 text-xs",onClick:()=>jo(!0),"data-testid":"button-broker-orders-dhan",title:"View Orders & Positions (Dhan)",children:n.jsx("img",{src:"https://play-lh.googleusercontent.com/lVXf_i8Gi3C7eZVWKgeG8U5h_kAzUT0MrmvEAXfM_ihlo44VEk01HgAi6vbBNsSzBQ=w240-h480-rw?v=1701",alt:"Dhan",className:"h-4 w-4"})}),n.jsx(H,{variant:"ghost",size:"sm",onClick:()=>Kc(!0),className:"h-7 px-2 text-xs","data-testid":"button-import-pnl",children:"Import"}),n.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>Um(!0),className:"h-7 px-2 text-xs hidden md:flex items-center gap-1","data-testid":"button-paper-trade",children:[n.jsx(Gn,{className:"h-4 w-4 mr-1"}),"Paper Trade"]}),n.jsx(H,{variant:"ghost",size:"icon",onClick:()=>So(!0),className:"h-7 w-7","data-testid":"button-trading-challenge",title:"Trading Challenge",children:n.jsx(Ac,{className:"h-4 w-4"})}),n.jsx(H,{variant:"ghost",size:"icon",onClick:()=>dn(!0),className:"h-7 w-7 bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-full","data-testid":"button-journal-info",title:"Journal Information",children:n.jsx(Iq,{className:"h-4 w-4 text-slate-600 dark:text-slate-400"})}),n.jsxs("div",{className:"h-7 px-3 bg-blue-50 dark:bg-blue-900/30 border border-blue-300 dark:border-blue-700 rounded-md flex items-center justify-center text-xs font-semibold text-blue-600 dark:text-blue-300",children:[n.jsx(yse,{className:"h-4 w-4 mr-1.5"}),Q1(cn)]})]})]}),n.jsx("div",{className:"max-h-80 overflow-y-auto overflow-x-auto custom-thin-scrollbar",children:n.jsxs("table",{className:"text-xs",style:{minWidth:"100%"},children:[n.jsx("thead",{className:"sticky top-0 bg-slate-50 dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-700",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-2 py-2 text-left text-slate-600 dark:text-slate-400 font-medium min-w-[60px]",children:"Time"}),n.jsx("th",{className:"px-2 py-2 text-left text-slate-600 dark:text-slate-400 font-medium min-w-[50px]",children:"Order"}),n.jsx("th",{className:"px-2 py-2 text-left text-slate-600 dark:text-slate-400 font-medium min-w-[80px]",children:"Symbol"}),n.jsx("th",{className:"px-2 py-2 text-left text-slate-600 dark:text-slate-400 font-medium min-w-[45px]",children:"Type"}),n.jsx("th",{className:"px-2 py-2 text-left text-slate-600 dark:text-slate-400 font-medium min-w-[40px]",children:"Qty"}),n.jsx("th",{className:"px-2 py-2 text-left text-slate-600 dark:text-slate-400 font-medium min-w-[60px]",children:"Price"}),n.jsx("th",{className:"px-2 py-2 text-left text-slate-600 dark:text-slate-400 font-medium min-w-[60px]",children:"P&L"}),n.jsx("th",{className:"px-2 py-2 text-left text-slate-600 dark:text-slate-400 font-medium min-w-[45px]",children:"%"}),n.jsx("th",{className:"px-2 py-2 text-left text-slate-600 dark:text-slate-400 font-medium min-w-[50px]",children:"Duration"})]})}),n.jsx("tbody",{className:"bg-white dark:bg-slate-900",children:Hm&&cn.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:9,className:"p-6 text-center",children:n.jsxs("div",{className:"flex flex-col items-center gap-2",children:[n.jsx("div",{className:"w-5 h-5 border-2 border-slate-400 border-t-transparent rounded-full animate-spin"}),n.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Loading..."})]})})}):cn.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:9,className:"p-6 text-center text-xs text-slate-500 dark:text-slate-400",children:Qr?lo?"No trades for this date":"Select a date to view trades":"No data yet"})}):cn.map((y,E)=>n.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-800/50 hover:bg-slate-50 dark:hover:bg-slate-800/30 transition-colors",children:[n.jsx("td",{className:"px-2 py-2 text-slate-600 dark:text-slate-400",children:y.time}),n.jsx("td",{className:"px-2 py-2",children:n.jsx("span",{className:`text-xs font-bold px-1.5 py-0.5 rounded ${y.order==="BUY"?"bg-emerald-100 dark:bg-emerald-900/40 text-emerald-700 dark:text-emerald-300":"bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-300"}`,children:y.order})}),n.jsx("td",{className:"px-2 py-2 text-slate-700 dark:text-slate-300 font-medium",children:(()=>{if(!lo)return y.symbol;const z=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"][lo.getMonth()];return y.symbol.replace(/\b(JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)\b/,z)})()}),n.jsx("td",{className:"px-2 py-2 text-indigo-600 dark:text-indigo-300 font-semibold",children:"MIS"}),n.jsx("td",{className:"px-2 py-2 text-slate-600 dark:text-slate-400",children:y.qty}),n.jsxs("td",{className:"px-2 py-2 text-amber-600 dark:text-amber-300 font-medium",children:["",y.price]}),n.jsx("td",{className:`px-2 py-2 font-bold ${(y.pnl||"").includes("+")?"text-emerald-600 dark:text-emerald-400":(y.pnl||"").includes("-")?"text-red-600 dark:text-red-400":"text-slate-600 dark:text-slate-400"}`,children:y.pnl}),n.jsx("td",{className:`px-2 py-2 font-bold ${(()=>{if(!y.pnl||y.pnl==="-")return"text-slate-400";const M=(y.pnl||"").replace(/[,+\s]/g,""),z=parseFloat(M)||0,G=y.price*y.qty||1,$=z/G*100;return $>0?"text-emerald-600 dark:text-emerald-400":$<0?"text-red-600 dark:text-red-400":"text-slate-600"})()}`,children:(()=>{if(!y.pnl||y.pnl==="-")return"-";const M=(y.pnl||"").replace(/[,+\s]/g,""),z=parseFloat(M)||0,G=y.price*y.qty||1,$=z/G*100;return`${$>=0?"+":""}${$.toFixed(2)}%`})()}),n.jsx("td",{className:"px-2 py-2 text-violet-600 dark:text-violet-300 font-medium",children:hx(y.duration)})]},E))})]})})]})}),n.jsx(bn,{open:_1,onOpenChange:Im,children:n.jsxs(pn,{className:"max-w-md",children:[n.jsx(Zn,{children:n.jsx(Xn,{children:"Connect Your Broker"})}),n.jsxs("div",{className:"space-y-3",children:[Wo?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(H,{variant:"outline",className:"flex-1 h-10 bg-white dark:bg-slate-800 text-black dark:text-white hover:bg-slate-50 dark:hover:bg-slate-700 border-slate-200 dark:border-slate-700 cursor-default","data-testid":"button-zerodha-connected-display",children:[n.jsx("img",{src:"https://zerodha.com/static/images/products/kite-logo.svg",alt:"Zerodha",className:"w-4 h-4 mr-2"}),"Zerodha"]}),n.jsx(H,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 h-10 w-10 border border-slate-200 hover:border-red-100",onClick:()=>{localStorage.removeItem("zerodha_token"),document.cookie="zerodha_token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/",Ju(null),Yo(!1)},title:"Disconnect Zerodha",children:n.jsx(Wr,{className:"h-4 w-4"})})]}):n.jsxs(H,{onClick:Go,variant:"outline",className:`w-full h-10 ${ln||ci||Ko?"bg-slate-100 dark:bg-slate-900 text-slate-400 dark:text-slate-600 border-slate-300 dark:border-slate-700 cursor-not-allowed opacity-50":"bg-white dark:bg-slate-800 text-black dark:text-white hover:bg-slate-50 dark:hover:bg-slate-700 border-slate-200 dark:border-slate-700"}`,"data-testid":"button-zerodha-dialog",disabled:ln||ci||Ko,children:[n.jsx("img",{src:"https://zerodha.com/static/images/products/kite-logo.svg",alt:"Zerodha",className:"w-4 h-4 mr-2"}),"Zerodha"]}),ln?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(H,{variant:"outline",className:"flex-1 h-10 bg-white dark:bg-slate-800 text-black dark:text-white hover:bg-slate-50 dark:hover:bg-slate-700 border-slate-200 dark:border-slate-700 cursor-default","data-testid":"button-upstox-connected-display",children:[n.jsx("img",{src:"https://assets.upstox.com/content/assets/images/cms/202494/MediumWordmark_UP(WhiteOnPurple).png",alt:"Upstox",className:"h-4 mr-2"}),"Upstox"]}),n.jsx(H,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 h-10 w-10 border border-slate-200 hover:border-red-100",onClick:Da,title:"Disconnect Upstox",children:n.jsx(Wr,{className:"h-4 w-4"})})]}):n.jsxs(H,{variant:"outline",className:`w-full h-10 ${Wo||ci||Ko?"bg-slate-100 dark:bg-slate-900 text-slate-400 dark:text-slate-600 border-slate-300 dark:border-slate-700 cursor-not-allowed opacity-50":"bg-white dark:bg-slate-800 text-black dark:text-white hover:bg-slate-50 dark:hover:bg-slate-700 border-slate-200 dark:border-slate-700"}`,"data-testid":"button-upstox-dialog",onClick:Or,disabled:Wo||ci||Ko,children:[n.jsx("img",{src:"https://assets.upstox.com/content/assets/images/cms/202494/MediumWordmark_UP(WhiteOnPurple).png",alt:"Upstox",className:"h-4 mr-2"}),"Upstox"]}),ci?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(H,{variant:"outline",className:"flex-1 h-10 bg-white dark:bg-slate-800 text-black dark:text-white hover:bg-slate-50 dark:hover:bg-slate-700 border-slate-200 dark:border-slate-700 cursor-default","data-testid":"button-angelone-connected-display",children:[n.jsx("img",{src:"https://play-lh.googleusercontent.com/Ic8lUYwMCgTePpo-Gbg0VwE_0srDj1xD386BvQHO_mOwsfMjX8lFBLl0Def28pO_Mvk=s48-rw?v=1701",alt:"Angel One",className:"h-4 mr-2"}),"Angel One"]}),n.jsx(H,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 h-10 w-10 border border-slate-200 hover:border-red-100",onClick:()=>{localStorage.removeItem("angel_one_token"),kl(null),nh(!1)},title:"Disconnect Angel One",children:n.jsx(Wr,{className:"h-4 w-4"})})]}):n.jsxs(H,{variant:"outline",className:`w-full h-10 ${Wo||ln||Ko?"bg-slate-100 dark:bg-slate-900 text-slate-400 dark:text-slate-600 border-slate-300 dark:border-slate-700 cursor-not-allowed opacity-50":"bg-white dark:bg-slate-800 text-black dark:text-white hover:bg-slate-50 dark:hover:bg-slate-700 border-slate-200 dark:border-slate-700"}`,"data-testid":"button-angelone-dialog",onClick:Dm,disabled:Wo||ln||Ko,children:[n.jsx("img",{src:"https://play-lh.googleusercontent.com/Ic8lUYwMCgTePpo-Gbg0VwE_0srDj1xD386BvQHO_mOwsfMjX8lFBLl0Def28pO_Mvk=s48-rw?v=1701",alt:"Angel One",className:"h-4 mr-2"}),"Angel One"]}),Ko?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(H,{variant:"outline",className:"flex-1 h-10 bg-white dark:bg-slate-800 text-black dark:text-white hover:bg-slate-50 dark:hover:bg-slate-700 border-slate-200 dark:border-slate-700 cursor-default","data-testid":"button-dhan-connected-display",children:[n.jsx("img",{src:"https://play-lh.googleusercontent.com/lVXf_i8Gi3C7eZVWKgeG8U5h_kAzUT0MrmvEAXfM_ihlo44VEk01HgAi6vbBNsSzBQ=w240-h480-rw?v=1701",alt:"Dhan",className:"h-4 mr-2"}),"Dhan"]}),n.jsx(H,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 h-10 w-10 border border-slate-200 hover:border-red-100",onClick:()=>{localStorage.removeItem("dhan_token"),di(null),_n(!1)},title:"Disconnect Dhan",children:n.jsx(Wr,{className:"h-4 w-4"})})]}):n.jsxs(H,{onClick:$m,variant:"outline",className:`w-full h-10 ${Wo||ln||ci?"bg-slate-100 dark:bg-slate-900 text-slate-400 dark:text-slate-600 border-slate-300 dark:border-slate-700 cursor-not-allowed opacity-50":"bg-white dark:bg-slate-800 text-black dark:text-white hover:bg-slate-50 dark:hover:bg-slate-700 border-slate-200 dark:border-slate-700"}`,"data-testid":"button-dhan-dialog",disabled:Wo||ln||ci,children:[n.jsx("img",{src:"https://play-lh.googleusercontent.com/lVXf_i8Gi3C7eZVWKgeG8U5h_kAzUT0MrmvEAXfM_ihlo44VEk01HgAi6vbBNsSzBQ=w240-h480-rw?v=1701",alt:"Dhan",className:"h-4 mr-2"}),"Dhan"]}),n.jsx("p",{className:"text-xs text-center text-muted-foreground mt-4",children:"Connect your broker account to auto-import trades"})]})]})}),n.jsx("div",{className:"relative",children:n.jsx(St,{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800",children:n.jsxs(Kt,{className:"p-6 px-0.5 md:px-4 md:py-4 pt-[10px] pb-[10px]",children:[n.jsxs("div",{className:"text-[10px] uppercase tracking-wider text-gray-500 dark:text-gray-400 mb-2 flex items-center justify-between gap-2",children:[n.jsx("div",{children:"Trade Book"}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"text-[10px] text-gray-600 dark:text-gray-400",children:Qr?"Preview":"Personal"}),n.jsx(qA,{checked:Qr,onCheckedChange:y=>{console.log(` Demo mode toggle: ${y?"ON (Preview)":"OFF (Personal)"}`),Y1(!0),localStorage.setItem("hasManuallyToggledMode","true"),tl(y),localStorage.setItem("tradingJournalDemoMode",String(y)),Sd(null),oo(""),Nd(""),zl([]),Vl([]),Ah([]),Ya([]),Qa([]),Xa({}),xc(E=>E+1),console.log(` Switched to ${y?"Preview":"Personal"} mode - CLEARED cache, heatmap fetching fresh AWS data...`)},"data-testid":"switch-demo-mode",className:"scale-75"}),n.jsx(H,{onClick:Mv,size:"sm",variant:"outline",disabled:Qr&&localStorage.getItem("currentUserId")!=="c06ce90c-20a1-7033-d457-efac5a682529",className:`h-5 px-2 text-[10px] border-gray-300 dark:border-gray-700 ${Qr&&localStorage.getItem("currentUserId")!=="c06ce90c-20a1-7033-d457-efac5a682529"?"text-gray-400 dark:text-gray-500 opacity-50 cursor-not-allowed":"text-gray-600 dark:text-gray-400"}`,"data-testid":"button-save-trade-book",children:"Save"})]})]}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{ref:$i,className:"pt-0.5",children:Qr?n.jsx(K5,{onDateSelect:Hf,selectedDate:lo,tradingDataByDate:Gs,onDataUpdate:y=>{sa(y),setTimeout(()=>{if($i.current){const E=$i.current.querySelector('[style*="overflow"]');E&&(E.scrollLeft=E.scrollWidth,console.log(" Demo heatmap: Scrolled to latest data view"))}},300)},onRangeChange:K1,highlightedDates:Ot,refreshTrigger:Ol,onSelectDateForHeatmap:(y,E)=>{console.log(` [HOME] Switching to heatmap mode - Symbol: ${y}, Date: ${E}`),Cc("heatmap"),_s(y,E)}}):n.jsx(ZPe,{userId:Dl(),onDateSelect:Hf,selectedDate:lo,onDataUpdate:sa,onRangeChange:K1,highlightedDates:Ot,refreshTrigger:Ol})}),((Ot==null?void 0:Ot.tag)==="fomo"||(Ot==null?void 0:Ot.tag)==="overtrading"||(Ot==null?void 0:Ot.tag)==="planned")&&Ot.dates.length>0&&(()=>{const y=[],E=(Ot==null?void 0:Ot.tag)==="fomo"?Ig:(Ot==null?void 0:Ot.tag)==="overtrading"?up:cx;if(!E.current||!$i.current)return null;const M=$i.current.scrollWidth||0,z=$i.current.scrollHeight||0,K=$i.current.scrollLeft||0,G=$i.current.scrollTop||0,$=$i.current.getBoundingClientRect(),ae=E.current.getBoundingClientRect(),c=ae.left-$.left+K+ae.width/2,u=ae.top-$.top+G+ae.height/2;return Ot.dates.forEach((p,v)=>{var _;const k=(_=$i.current)==null?void 0:_.querySelector(`[data-date="${p}"]`);if(k){const F=k.getBoundingClientRect(),se=F.left-$.left+K+F.width/2,J=F.top-$.top+G+F.height/2,xe=(c+se)/2,ye=Math.min(u,J)-50,Pe=`M ${c} ${u} Q ${xe} ${ye}, ${se} ${J}`;y.push(n.jsxs("g",{children:[n.jsx("path",{d:Pe,fill:"none",stroke:(Ot==null?void 0:Ot.tag)==="fomo"?"url(#curvedLineGradient)":(Ot==null?void 0:Ot.tag)==="overtrading"?"url(#overtradingLineGradient)":"url(#plannedLineGradient)",strokeWidth:"2.5",strokeDasharray:"6,4",opacity:"0.95"}),n.jsx("circle",{cx:se,cy:J,r:"4",fill:(Ot==null?void 0:Ot.tag)==="fomo"?"#fcd34d":(Ot==null?void 0:Ot.tag)==="overtrading"?"#fb923c":"#4ade80",opacity:"0.9"}),n.jsx("circle",{cx:se,cy:J,r:"3",fill:(Ot==null?void 0:Ot.tag)==="fomo"?"#fbbf24":(Ot==null?void 0:Ot.tag)==="overtrading"?"#f97316":"#22c55e",className:"animate-pulse"})]},`connection-${p}-${v}`))}}),n.jsxs("svg",{style:{position:"absolute",top:0,left:0,width:`${M}px`,height:`${z}px`,pointerEvents:"none",zIndex:10},children:[n.jsxs("defs",{children:[n.jsxs("linearGradient",{id:"curvedLineGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[n.jsx("stop",{offset:"0%",stopColor:"#c084fc",stopOpacity:"1"}),n.jsx("stop",{offset:"50%",stopColor:"#f472b6",stopOpacity:"1"}),n.jsx("stop",{offset:"100%",stopColor:"#fbbf24",stopOpacity:"1"})]}),n.jsxs("linearGradient",{id:"overtradingLineGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[n.jsx("stop",{offset:"0%",stopColor:"#fb923c",stopOpacity:"1"}),n.jsx("stop",{offset:"50%",stopColor:"#f97316",stopOpacity:"1"}),n.jsx("stop",{offset:"100%",stopColor:"#ea580c",stopOpacity:"1"})]}),n.jsxs("linearGradient",{id:"plannedLineGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[n.jsx("stop",{offset:"0%",stopColor:"#4ade80",stopOpacity:"1"}),n.jsx("stop",{offset:"50%",stopColor:"#22c55e",stopOpacity:"1"}),n.jsx("stop",{offset:"100%",stopColor:"#16a34a",stopOpacity:"1"})]})]}),y]})})()]}),n.jsx("div",{className:"mt-2 mb-20 md:mb-2 bg-gradient-to-r from-violet-500 to-purple-600 rounded-md px-2 py-1.5 relative","data-testid":"banner-quick-stats",children:(()=>{const y=Oh(),E=Object.keys(y);let M=0,z=0,K=0,G=0,$=0,ae=0;const c=[],u=[],p=[],v=[];let k=0;const _={},F={};let se=0;E.sort().forEach(De=>{var Xe,Me;const Ve=y[De],Be=((Xe=Ve==null?void 0:Ve.tradingData)==null?void 0:Xe.performanceMetrics)||(Ve==null?void 0:Ve.performanceMetrics),et=((Me=Ve==null?void 0:Ve.tradingData)==null?void 0:Me.tradingTags)||(Ve==null?void 0:Ve.tradingTags)||[];if(Be){const _e=Be.netPnL||0;if(M+=_e,z+=Be.totalTrades||0,K+=Be.winningTrades||0,c.push(_e),(Be.totalTrades||0)>10&&(se++,p.push(De)),Array.isArray(et)&&et.length>0&&et.map(Ze=>Ze.trim().toLowerCase()).includes("overtrading")&&(p.includes(De)||(se++,p.push(De))),Array.isArray(et)&&et.length>0){const ze=et.map(Ze=>Ze.trim().toLowerCase());ze.includes("fomo")&&(G++,u.push(De)),ze.includes("planned")&&(k++,v.push(De)),ze.forEach(Ze=>{_[Ze]=(_[Ze]||0)+1,F[Ze]||(F[Ze]=[]),F[Ze].push(De)})}_e>0?($++,ae=Math.max(ae,$)):_e<0&&($=0)}});const J=z>0?K/z*100:0,xe=M>=0,ye=Object.entries(_).sort(([,De],[,Ve])=>Ve-De).slice(0,3).map(([De,Ve])=>({tag:De,count:Ve})),Pe=De=>{if(De.length===0)return"";const Ve=Math.max(...De),Be=Math.min(...De),et=Ve-Be||1,Xe=40,Me=16;return`M ${De.map((ze,Ze)=>{const vt=Ze/(De.length-1||1)*Xe,jt=Me-(ze-Be)/et*Me;return`${vt},${jt}`}).join(" ").split(" ").join(" L ")}`};return n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center gap-2",children:[n.jsxs("div",{className:`text-white flex-1 flex ${Object.values(Kr).filter(De=>De).length===1?"justify-center":"justify-around"} items-stretch gap-2`,children:[Kr.pnl&&n.jsxs("div",{className:"flex flex-col items-center justify-center","data-testid":"stat-total-pnl",children:[n.jsx("div",{className:"text-[10px] opacity-80",children:"P&L"}),n.jsxs("div",{className:`text-xs font-bold ${xe?"text-green-200":"text-red-200"}`,children:[M>=0?"+":"","",(M/1e3).toFixed(1),"K"]})]}),Kr.trend&&n.jsxs("div",{className:"flex flex-col items-center justify-center","data-testid":"stat-trend",children:[n.jsx("div",{className:"text-[10px] opacity-80",children:"Trend"}),n.jsx("svg",{width:"40",height:"16",className:"mt-0.5",children:n.jsx("path",{d:Pe(c),fill:"none",stroke:"white",strokeWidth:"1.5",opacity:"0.9"})})]}),Kr.fomo&&n.jsxs("button",{ref:Ig,className:`flex flex-col items-center justify-center hover-elevate active-elevate-2 rounded px-1 transition-all ${(Ot==null?void 0:Ot.tag)==="fomo"?"bg-white/30 ring-2 ring-white/50":""}`,onClick:()=>Tc((Ot==null?void 0:Ot.tag)==="fomo"?null:{tag:"fomo",dates:u}),"data-testid":"stat-fomo",title:`Click to ${(Ot==null?void 0:Ot.tag)==="fomo"?"hide":"show"} FOMO dates on heatmap`,children:[n.jsx("div",{className:"text-[10px] opacity-80",children:"FOMO"}),n.jsx("div",{className:"text-xs font-bold",children:G})]}),Kr.winRate&&n.jsxs("div",{className:"flex flex-col items-center justify-center","data-testid":"stat-success-rate",children:[n.jsx("div",{className:"text-[10px] opacity-80",children:"Win%"}),n.jsxs("div",{className:"text-xs font-bold",children:[J.toFixed(0),"%"]})]}),Kr.streak&&n.jsxs("div",{className:"flex flex-col items-center justify-center","data-testid":"stat-win-streak",children:[n.jsx("div",{className:"text-[10px] opacity-80",children:"Streak"}),n.jsx("div",{className:"text-xs font-bold",children:ae})]}),Kr.overtrading&&n.jsxs("button",{ref:up,className:`flex flex-col items-center justify-center hover-elevate active-elevate-2 rounded px-1 transition-all ${(Ot==null?void 0:Ot.tag)==="overtrading"?"bg-white/30 ring-2 ring-white/50":""}`,onClick:()=>Tc((Ot==null?void 0:Ot.tag)==="overtrading"?null:{tag:"overtrading",dates:p}),"data-testid":"stat-overtrading",title:`Click to ${(Ot==null?void 0:Ot.tag)==="overtrading"?"hide":"show"} overtrading dates on heatmap`,children:[n.jsx("div",{className:"text-[10px] opacity-80",children:"OvrTrade"}),n.jsx("div",{className:"text-xs font-bold text-orange-200",children:se})]}),Kr.planned&&n.jsxs("button",{ref:cx,className:`flex flex-col items-center justify-center hover-elevate active-elevate-2 rounded px-1 transition-all ${(Ot==null?void 0:Ot.tag)==="planned"?"bg-white/30 ring-2 ring-white/50":""}`,onClick:()=>Tc((Ot==null?void 0:Ot.tag)==="planned"?null:{tag:"planned",dates:v}),"data-testid":"stat-planned",title:`Click to ${(Ot==null?void 0:Ot.tag)==="planned"?"hide":"show"} planned trade dates on heatmap`,children:[n.jsx("div",{className:"text-[10px] opacity-80",children:"Planned"}),n.jsx("div",{className:"text-xs font-bold text-green-200",children:k})]})]}),n.jsx("button",{className:"flex items-center justify-center w-6 h-6 bg-white/20 rounded hover:bg-white/30 transition-colors",onClick:()=>Ws(!0),"data-testid":"button-share-tradebook",title:"Share tradebook",children:n.jsx(cb,{className:"w-4 h-4 text-white"})}),n.jsxs(wa,{children:[n.jsx(Na,{asChild:!0,children:n.jsx("button",{className:"flex items-center justify-center w-6 h-6 bg-white/20 rounded hover:bg-white/30 transition-colors text-white","data-testid":"button-stats-menu",children:n.jsx(Gl,{className:"w-4 h-4"})})}),n.jsx(fa,{className:"w-56 p-3 bg-white dark:bg-slate-900 border-gray-200 dark:border-slate-700 text-slate-900 dark:text-slate-100",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"text-xs font-semibold text-slate-400 mb-2 flex items-center justify-between",children:[n.jsx("span",{children:"Customize Magic Bar"}),n.jsxs("span",{className:"text-xs opacity-70",children:[Object.values(Kr).filter(De=>De).length,"/6"]})]}),(()=>{const Ve=Object.values(Kr).filter(et=>et).length>=6,Be=(et,Xe)=>{if(Xe&&Ve)return;const Me={...Kr,[et]:Xe};wu(Me),localStorage.setItem("magicBarPrefs",JSON.stringify(Me))};return n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsxs("label",{className:`flex items-center gap-2 text-sm p-1.5 rounded ${!Kr.pnl&&Ve?"opacity-50 cursor-not-allowed":"cursor-pointer hover:bg-slate-800/50"}`,children:[n.jsx("input",{type:"checkbox",checked:Kr.pnl,onChange:et=>Be("pnl",et.target.checked),disabled:!Kr.pnl&&Ve,className:"rounded"}),"P&L"]}),n.jsxs("label",{className:`flex items-center gap-2 text-sm p-1.5 rounded ${!Kr.trend&&Ve?"opacity-50 cursor-not-allowed":"cursor-pointer hover:bg-slate-800/50"}`,children:[n.jsx("input",{type:"checkbox",checked:Kr.trend,onChange:et=>Be("trend",et.target.checked),disabled:!Kr.trend&&Ve,className:"rounded"}),"Trend"]}),n.jsxs("label",{className:`flex items-center gap-2 text-sm p-1.5 rounded ${!Kr.fomo&&Ve?"opacity-50 cursor-not-allowed":"cursor-pointer hover:bg-slate-800/50"}`,children:[n.jsx("input",{type:"checkbox",checked:Kr.fomo,onChange:et=>Be("fomo",et.target.checked),disabled:!Kr.fomo&&Ve,className:"rounded"}),"FOMO"]}),n.jsxs("label",{className:`flex items-center gap-2 text-sm p-1.5 rounded ${!Kr.winRate&&Ve?"opacity-50 cursor-not-allowed":"cursor-pointer hover:bg-slate-800/50"}`,children:[n.jsx("input",{type:"checkbox",checked:Kr.winRate,onChange:et=>Be("winRate",et.target.checked),disabled:!Kr.winRate&&Ve,className:"rounded"}),"Win Rate"]}),n.jsxs("label",{className:`flex items-center gap-2 text-sm p-1.5 rounded ${!Kr.streak&&Ve?"opacity-50 cursor-not-allowed":"cursor-pointer hover:bg-slate-800/50"}`,children:[n.jsx("input",{type:"checkbox",checked:Kr.streak,onChange:et=>Be("streak",et.target.checked),disabled:!Kr.streak&&Ve,className:"rounded"}),"Streak"]}),n.jsx("div",{className:"border-t border-slate-700 my-1"}),n.jsxs("label",{className:`flex items-center gap-2 text-sm p-1.5 rounded ${!Kr.overtrading&&Ve?"opacity-50 cursor-not-allowed":"cursor-pointer hover:bg-slate-800/50"}`,children:[n.jsx("input",{type:"checkbox",checked:Kr.overtrading,onChange:et=>Be("overtrading",et.target.checked),disabled:!Kr.overtrading&&Ve,className:"rounded"}),"Overtrading"]}),n.jsxs("label",{className:`flex items-center gap-2 text-sm p-1.5 rounded ${!Kr.planned&&Ve?"opacity-50 cursor-not-allowed":"cursor-pointer hover:bg-slate-800/50"}`,children:[n.jsx("input",{type:"checkbox",checked:Kr.planned,onChange:et=>Be("planned",et.target.checked),disabled:!Kr.planned&&Ve,className:"rounded"}),"Planned"]}),n.jsxs("label",{className:`flex items-center gap-2 text-sm p-1.5 rounded ${!Kr.topTags&&Ve?"opacity-50 cursor-not-allowed":"cursor-pointer hover:bg-slate-800/50"}`,children:[n.jsx("input",{type:"checkbox",checked:Kr.topTags,onChange:et=>Be("topTags",et.target.checked),disabled:!Kr.topTags&&Ve,className:"rounded"}),"Top Tags"]}),n.jsxs("label",{className:`flex items-center gap-2 text-sm p-1.5 rounded ${!Kr.aiAnalysis&&Ve?"opacity-50 cursor-not-allowed":"cursor-pointer hover:bg-slate-800/50"}`,children:[n.jsx("input",{type:"checkbox",checked:Kr.aiAnalysis,onChange:et=>Be("aiAnalysis",et.target.checked),disabled:!Kr.aiAnalysis&&Ve,className:"rounded"}),"AI Analysis"]})]})})()]})})]})]}),Kr.topTags&&ye.length>0&&n.jsxs("div",{className:"bg-white/10 rounded px-2 py-1 text-xs text-white",children:[n.jsx("div",{className:"opacity-80 mb-1",children:"Top Tags:"}),n.jsx("div",{className:"flex flex-wrap gap-1",children:ye.map(({tag:De,count:Ve})=>n.jsxs("button",{className:`hover-elevate active-elevate-2 rounded px-2 py-0.5 text-xs transition-all ${(Ot==null?void 0:Ot.tag)===De?"bg-white/50 ring-2 ring-white/50":"bg-white/20"}`,onClick:()=>Tc((Ot==null?void 0:Ot.tag)===De?null:{tag:De,dates:F[De]||[]}),"data-testid":`stat-toptag-${De}`,children:[De," ",n.jsxs("span",{className:"text-white/60",children:["(",Ve,")"]})]},De))})]}),Kr.aiAnalysis&&n.jsxs("div",{className:"bg-white/10 rounded px-2 py-1 text-xs text-white",children:[n.jsx("span",{className:"opacity-80",children:"AI Insight: "}),n.jsx("span",{className:"italic text-blue-200",children:z>0?J>60?"Strong performance detected":J>50?"Balanced trading pattern":"Risk management recommended":"No data yet"})]})]})})()})]})})})]})]}),B==="ranking"&&n.jsx("div",{className:"md:hidden p-4",children:n.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[n.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center mb-4",children:n.jsx(Ac,{className:"h-10 w-10 text-white"})}),n.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-2",children:"Trading Challenge"}),n.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-4",children:"Coming Soon"}),n.jsxs("div",{className:"space-y-3 w-full max-w-xs",children:[n.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg text-left",children:[n.jsx(Uo,{className:"h-5 w-5 text-blue-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Compete with Traders"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Join 7-day trading challenges"})]})]}),n.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg text-left",children:[n.jsx(ia,{className:"h-5 w-5 text-green-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Live P&L Tracking"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Real-time ranking based on your trades"})]})]}),n.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg text-left",children:[n.jsx(Ac,{className:"h-5 w-5 text-amber-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Leaderboard Rankings"}),n.jsx("p",{className:"text-xs text-gray-500",children:"See your position among all participants"})]})]})]})]})}),n.jsx("div",{className:`mt-8 space-y-6 ${B!=="insight"?"hidden md:block":"block"}`,children:(()=>{const y=()=>{const ae=Object.values(Gs).filter(ye=>ye&&ye.tradeHistory&&Array.isArray(ye.tradeHistory)&&ye.tradeHistory.length>0);if(ae.length===0)return{tagAnalysis:[],overallStats:{totalTrades:0,winRate:0,totalPnL:0},topPerformers:[],worstPerformers:[],tradingDayAnalysis:[]};const c={},u=[];ae.forEach((ye,Pe)=>{const De=ye.tradeHistory||[],Ve=ye.tradingTags||[],Be=ye.performanceMetrics;Be&&u.push({day:Pe+1,trades:Be.totalTrades||De.length,winRate:parseFloat(Be.winRate)||0,netPnL:Be.netPnL||0,tags:Ve}),Ve.forEach(et=>{c[et]||(c[et]={tag:et,tradingDays:0,totalTrades:0,wins:0,losses:0,totalPnL:0,winRate:0,avgPnL:0,bestDay:0,worstDay:0});const Xe=c[et];Xe.tradingDays++,Be&&(Xe.totalTrades+=Be.totalTrades||0,Xe.wins+=Be.winningTrades||0,Xe.losses+=Be.losingTrades||0,Xe.totalPnL+=Be.netPnL||0,Xe.bestDay=Math.max(Xe.bestDay,Be.netPnL||0),Xe.worstDay=Math.min(Xe.worstDay,Be.netPnL||0))})}),Object.values(c).forEach(ye=>{ye.winRate=ye.totalTrades>0?ye.wins/ye.totalTrades*100:0,ye.avgPnL=ye.tradingDays>0?ye.totalPnL/ye.tradingDays:0});const p=Object.values(c).sort((ye,Pe)=>Pe.totalPnL-ye.totalPnL),v=p.reduce((ye,Pe)=>ye+Pe.totalTrades,0),k=p.reduce((ye,Pe)=>ye+Pe.totalPnL,0),_=p.reduce((ye,Pe)=>ye+Pe.wins,0),F=v>0?_/v*100:0,se={totalTrades:v,winRate:F,totalPnL:k},J=p.slice(0,5),xe=p.slice(-3).reverse();return{tagAnalysis:p,overallStats:se,topPerformers:J,worstPerformers:xe,tradingDayAnalysis:u}},E=Oh(),M=y(),K=(()=>{const ae=Object.keys(E);let c=0,u=0,p=0,v=0;ae.forEach(_=>{var J;const F=E[_],se=((J=F==null?void 0:F.tradingData)==null?void 0:J.performanceMetrics)||(F==null?void 0:F.performanceMetrics);if(se){const xe=se.netPnL||0;xe!==0&&(c+=xe,u+=se.totalTrades||0,p+=se.winningTrades||0,v++)}});const k=u>0?p/u*100:0;return{totalPnL:c,totalTrades:u,winRate:k,datesCount:v}})(),G=K.totalPnL,$=G>=0;return console.log(` Performance Trend using ${cl?"FILTERED":"ALL"} heatmap data: ${K.datesCount} dates, Total P&L: ${G.toFixed(2)}`),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6",children:[n.jsxs("div",{className:`md:col-span-3 rounded-3xl p-6 md:p-8 text-white shadow-2xl ${$?"bg-gradient-to-br from-emerald-500 to-teal-600":"bg-gradient-to-br from-red-500 to-rose-600"}`,children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center",children:n.jsx(nm,{className:"w-6 h-6"})}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-sm opacity-80",children:[cl?"Range":"Total"," P&L"]}),n.jsxs("div",{className:"text-2xl md:text-3xl font-bold",children:[G>=0?"":"-","",Math.abs(G).toLocaleString("en-IN")]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm opacity-80",children:"Total Trades"}),n.jsx("span",{className:"font-semibold",children:K.totalTrades})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm opacity-80",children:"Success Rate"}),n.jsxs("span",{className:"font-semibold",children:[K.winRate.toFixed(1),"%"]})]}),n.jsx("div",{className:"w-full bg-white/20 rounded-full h-2",children:n.jsx("div",{className:"bg-white rounded-full h-2 transition-all duration-1000",style:{width:`${Math.min(K.winRate,100)}%`}})})]})]}),n.jsxs("div",{className:"md:col-span-6 bg-white dark:bg-slate-900 rounded-3xl p-4 md:p-8 shadow-lg border border-slate-200 dark:border-slate-800",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-white",children:"Performance Trend"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:`w-3 h-3 ${$?"bg-emerald-400":"bg-red-400"} rounded-full`}),n.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:$?"Profitable":"Not Profitable"})]})]}),Object.keys(E).length>0?n.jsx("div",{className:"h-64 w-full",children:(()=>{const c=Object.keys(E).sort().map((u,p)=>{var J;const v=new Date(u),k=E[u],_=((J=k==null?void 0:k.tradingData)==null?void 0:J.performanceMetrics)||(k==null?void 0:k.performanceMetrics),F=(_==null?void 0:_.netPnL)||0,se=(_==null?void 0:_.totalTrades)||0;return{day:`${v.getDate()}/${v.getMonth()+1}`,value:F,pnl:F,date:u,trades:se,formattedDate:v.toLocaleDateString("en-IN",{day:"numeric",month:"short"})}}).filter(u=>u.trades>0);return c.reduce((u,p)=>p.value>u.value?p:u,c[0]||{value:0,day:"",pnl:0}),n.jsx("div",{className:"relative h-full",children:n.jsx(yi,{width:"100%",height:"100%",children:(()=>{const u=r==="dark"?"#ffffff":"#000000",p=r==="dark"?"#1e293b":"#ffffff",v=r==="dark"?"#e2e8f0":"#1e293b";return n.jsxs(Bg,{data:c,margin:{top:40,right:30,left:0,bottom:5},children:[n.jsx("defs",{children:n.jsxs("linearGradient",{id:"areaGradientPositive",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"0%",stopColor:"rgb(107, 114, 128)",stopOpacity:.6}),n.jsx("stop",{offset:"100%",stopColor:"rgb(107, 114, 128)",stopOpacity:.1})]})}),n.jsx(Sa,{dataKey:"day",axisLine:!1,tickLine:!1,tick:!1,className:"text-slate-500 dark:text-slate-400"}),n.jsx(ma,{axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:r==="dark"?"#cbd5e1":"#64748b"},tickFormatter:k=>`${k>=0?"":"-"}${(Math.abs(k)/1e3).toFixed(0)}K`,domain:["dataMin - 1000","dataMax + 1000"],className:"text-slate-500 dark:text-slate-400"}),n.jsx(zs,{contentStyle:{background:p,border:`1px solid ${r==="dark"?"#334155":"#e2e8f0"}`,borderRadius:"12px",color:v,fontSize:"12px",padding:"8px 12px"},formatter:(k,_,F)=>[`${k>=0?"":"-"}${Math.abs(k).toLocaleString()}`,"Daily P&L"],labelFormatter:(k,_)=>{if(_&&_[0]&&_[0].payload){const F=_[0].payload;return`${F.formattedDate}  ${F.trades} trades`}return k}}),n.jsx(ec,{type:"natural",dataKey:"value",stroke:u,strokeWidth:3,fill:"url(#areaGradientPositive)",dot:!1,activeDot:{r:6,fill:u,stroke:"white",strokeWidth:2},isAnimationActive:!0,animationDuration:600,animationEasing:"ease-in-out"})]})})()})})})()}):n.jsx("div",{className:"flex items-center justify-center h-48 text-slate-400",children:n.jsxs("div",{className:"text-center",children:[n.jsx(ia,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),n.jsx("p",{children:"No trend data available"})]})})]}),n.jsxs("div",{className:"md:col-span-3 bg-white dark:bg-slate-900 rounded-3xl p-6 shadow-lg border border-slate-200 dark:border-slate-800",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl flex items-center justify-center",children:n.jsx(w6,{className:"w-5 h-5 text-white"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-slate-800 dark:text-white",children:"Top Tags"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Strategy Performance"})]})]}),M.topPerformers.length>0?n.jsx("div",{className:"space-y-4",children:M.topPerformers.slice(0,4).map((ae,c)=>n.jsxs("div",{className:"relative",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:ae.tag}),n.jsxs("span",{className:`text-sm font-semibold ${ae.totalPnL>=0?"text-emerald-600":"text-red-500"}`,children:[ae.totalPnL>=0?"+":"","",Math.abs(ae.totalPnL).toLocaleString()]})]}),n.jsx("div",{className:"w-full h-2 bg-slate-100 dark:bg-slate-700 rounded-full",children:n.jsx("div",{className:`h-2 rounded-full transition-all duration-1000 ${ae.totalPnL>=0?"bg-gradient-to-r from-emerald-400 to-green-500":"bg-gradient-to-r from-red-400 to-rose-500"}`,style:{width:`${Math.min(ae.winRate,100)}%`}})}),n.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[ae.winRate.toFixed(1),"% success rate"]})]},ae.tag))}):n.jsx("div",{className:"flex items-center justify-center h-32 text-slate-400",children:n.jsxs("div",{className:"text-center",children:[n.jsx(w6,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),n.jsx("p",{className:"text-sm",children:"No tag data"})]})})]})]}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:(()=>{const ae=Object.values(Gs).filter(_=>_&&_.performanceMetrics&&_.performanceMetrics.netPnL!==0);if(ae.length===0)return null;const c=ae.length,u=ae.filter(_=>_.performanceMetrics.netPnL>0).length,p=ae.reduce((_,F)=>_+F.performanceMetrics.netPnL,0)/c,v=Math.max(...ae.map(_=>_.performanceMetrics.netPnL));return[{label:"Trading Days",value:c,icon:wm,color:"from-blue-500 to-indigo-600",textColor:"text-blue-600"},{label:"Best Day",value:`${v.toLocaleString()}`,icon:Gn,color:"from-emerald-500 to-green-600",textColor:"text-emerald-600"},{label:"Profitable Days",value:u,icon:nm,color:"from-violet-500 to-purple-600",textColor:"text-violet-600"},{label:"Avg Daily P&L",value:`${Math.abs(p).toLocaleString()}`,icon:ia,color:p>=0?"from-emerald-500 to-green-600":"from-red-500 to-rose-600",textColor:p>=0?"text-emerald-600":"text-red-600"}].map(_=>n.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-3 md:p-6 shadow-lg border border-slate-200 dark:border-slate-700 hover:shadow-xl transition-all duration-300",children:n.jsxs("div",{className:"flex md:flex-col items-center md:items-start gap-3 md:gap-0",children:[n.jsx("div",{className:`w-10 h-10 md:w-12 md:h-12 bg-gradient-to-br ${_.color} rounded-xl flex items-center justify-center md:mb-4 shadow-lg flex-shrink-0`,children:n.jsx(_.icon,{className:"w-5 h-5 md:w-6 md:h-6 text-white"})}),n.jsxs("div",{className:"flex-1 md:space-y-1",children:[n.jsx("div",{className:`text-xl md:text-2xl font-bold ${_.textColor}`,children:_.value}),n.jsx("div",{className:"text-xs md:text-sm text-slate-600 dark:text-slate-400",children:_.label})]})]})},_.label))})()}),n.jsxs("div",{className:"col-span-12 bg-gradient-to-br from-red-500 to-rose-600 rounded-3xl p-8 text-white shadow-2xl mt-6",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center",children:n.jsx($c,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold",children:"Loss Making Analysis"}),n.jsx("p",{className:"opacity-80",children:"Identify and fix problematic patterns"})]})]}),(()=>{const ae=Object.values(Gs).filter(v=>v&&v.tradingTags&&Array.isArray(v.tradingTags)&&v.performanceMetrics);if(ae.length===0)return n.jsxs("div",{className:"bg-white/10 rounded-2xl p-6 text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center mx-auto mb-4",children:n.jsx(N6,{className:"w-8 h-8"})}),n.jsx("p",{className:"text-lg font-medium mb-2",children:"No Data Available"}),n.jsx("p",{className:"opacity-80",children:"Start trading and tagging to identify loss patterns!"})]});const c={},u={emotionalTradingDays:0,impulsiveTrades:0,totalLossingDays:0};ae.forEach(v=>{const k=v.tradingTags||[],_=v.performanceMetrics.netPnL,F=v.performanceMetrics.totalTrades;if(_<0){if(u.totalLossingDays++,Array.isArray(k)&&k.length>0){const se=["fomo","fear","greedy","revenge","impatient"];k.some(xe=>se.includes(xe.toLowerCase().trim()))&&(u.emotionalTradingDays++,console.log(` Loss Analysis: Emotional trading detected with tags: [${k.join(", ")}] | P&L: ${_.toFixed(2)}`))}F>5&&_<0&&(u.impulsiveTrades+=F)}Array.isArray(k)&&k.length>0&&k.forEach(se=>{const J=se.trim().toLowerCase();c[J]||(c[J]={tag:J,displayTag:se,totalPnL:0,lossDays:0,totalDays:0,avgLoss:0,lossFrequency:0});const xe=c[J];xe.totalPnL+=_,xe.totalDays++,_<0&&(xe.lossDays++,console.log(` Tag '${J}': Loss day detected | P&L: ${_.toFixed(2)} | Total losses: ${xe.lossDays}/${xe.totalDays} days`))})}),Object.values(c).forEach(v=>{v.lossFrequency=v.lossDays/v.totalDays*100,v.avgLoss=v.totalPnL/v.totalDays});const p=Object.values(c).filter(v=>v.totalPnL<0).sort((v,k)=>v.totalPnL-k.totalPnL).slice(0,4);return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4",children:[n.jsx("div",{className:"text-2xl font-bold",children:u.totalLossingDays}),n.jsx("div",{className:"text-sm opacity-80",children:"Losing Days"})]}),n.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4",children:[n.jsx("div",{className:"text-2xl font-bold",children:u.emotionalTradingDays}),n.jsx("div",{className:"text-sm opacity-80",children:"Emotional Trading Days"})]}),n.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4",children:[n.jsx("div",{className:"text-2xl font-bold",children:u.impulsiveTrades}),n.jsx("div",{className:"text-sm opacity-80",children:"Impulsive Trades"})]}),n.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4",children:[n.jsxs("div",{className:"text-2xl font-bold",children:[ae.length>0?(u.totalLossingDays/ae.length*100).toFixed(0):0,"%"]}),n.jsx("div",{className:"text-sm opacity-80",children:"Loss Rate"})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-lg font-semibold mb-4",children:" Most Problematic Tags"}),n.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:p.length>0?p.map((v,k)=>n.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center",children:n.jsx(N6,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-semibold text-lg",children:(v.displayTag||v.tag).toUpperCase()}),n.jsxs("div",{className:"text-sm opacity-90 mb-2",children:["Avg Loss: ",Math.abs(v.avgLoss).toFixed(0)," "," ",v.lossFrequency.toFixed(0),"% loss rate"]}),n.jsxs("div",{className:"text-xs bg-red-500/30 rounded-lg p-2",children:["Total Loss: ",Math.abs(v.totalPnL).toLocaleString("en-IN")," ","across ",v.totalDays," days"]})]})]})},k)):n.jsxs("div",{className:"col-span-2 text-center py-8",children:[n.jsx("div",{className:"text-4xl mb-2",children:""}),n.jsx("p",{className:"font-medium",children:"No consistent loss-making patterns detected!"}),n.jsx("p",{className:"text-sm opacity-80",children:"Your trading discipline is on track."})]})})]})]})})()]}),n.jsxs("div",{className:"col-span-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-3xl p-8 text-white shadow-2xl mt-6",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center",children:n.jsx(Ax,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold",children:"Discipline & Risk Management"}),n.jsx("p",{className:"opacity-80",children:"Build consistent, profitable trading habits"})]})]}),(()=>{const ae=Object.values(Gs).filter(Pe=>Pe&&Pe.tradingTags&&Array.isArray(Pe.tradingTags)&&Pe.performanceMetrics);if(ae.length===0)return n.jsxs("div",{className:"bg-white/10 rounded-2xl p-6 text-center",children:[n.jsx("div",{className:"text-4xl mb-3",children:""}),n.jsx("p",{className:"font-medium",children:"Ready for Discipline Analysis"}),n.jsx("p",{className:"opacity-80 text-sm",children:"Start building your trading history!"})]});const c={plannedTrades:0,emotionalTrades:0,consistentDays:0,totalDays:ae.length,avgTradesPerDay:0,winStreaks:0,lossStreaks:0},u=[];let p=0,v=0,k=0,_=0,F=0;ae.forEach((Pe,De)=>{const Ve=Pe.tradingTags,Be=Pe.performanceMetrics.netPnL,et=Pe.performanceMetrics.totalTrades;p+=et,(Ve.includes("planned")||Ve.includes("setup")||Ve.includes("strategy"))&&c.plannedTrades++;const Xe=["fomo","fear","greedy","revenge","impatient","unplanned"];Ve.some(Me=>Xe.includes(Me.toLowerCase()))&&c.emotionalTrades++,Be>0?(v++,k=0,_=Math.max(_,v)):Be<0&&(k++,v=0,F=Math.max(F,k)),et<=5&&c.consistentDays++}),c.avgTradesPerDay=p/c.totalDays,c.winStreaks=_,c.lossStreaks=F;const se=c.plannedTrades/c.totalDays*100,J=c.emotionalTrades/c.totalDays*100,xe=c.consistentDays/c.totalDays*100;se>70?u.push({type:"success",icon:"",title:"Excellent Planning",message:`${se.toFixed(0)}% of your trades are well-planned. Keep this discipline!`}):se<30&&u.push({type:"warning",icon:"",title:"Planning Needed",message:`Only ${se.toFixed(0)}% planned trades. Create setups before trading.`}),J>40&&u.push({type:"danger",icon:"",title:"Emotional Trading Alert",message:`${J.toFixed(0)}% emotional trades detected. Practice mindfulness.`}),c.avgTradesPerDay>8&&u.push({type:"warning",icon:"",title:"Overtrading Risk",message:`Avg ${c.avgTradesPerDay.toFixed(1)} trades/day. Consider quality over quantity.`}),F>3&&u.push({type:"danger",icon:"",title:"Loss Streak Warning",message:`Max loss streak: ${F} days. Implement strict stop-loss rules.`}),xe>80&&u.push({type:"success",icon:"",title:"Great Consistency",message:`${xe.toFixed(0)}% consistent trading days. Excellent discipline!`});const ye=[{icon:"",title:"Pre-Market Planning",tip:"Plan 3 trades max before market open with clear entry/exit rules"},{icon:"",title:"Risk Management",tip:"Never risk more than 2% of capital per trade"},{icon:"",title:"Trading Hours",tip:"Trade only during high-volume hours (9:30-11:30 AM, 2:00-3:15 PM)"},{icon:"",title:"Position Sizing",tip:"Use consistent position sizes based on account balance"}];return n.jsxs("div",{className:"space-y-4 md:space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4 mb-4 md:mb-6",children:[n.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-3 md:p-4 text-center",children:[n.jsxs("div",{className:"text-lg md:text-2xl font-bold",children:[se.toFixed(0),"%"]}),n.jsx("div",{className:"text-xs md:text-sm opacity-80",children:"Planned Trades"})]}),n.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-3 md:p-4 text-center",children:[n.jsx("div",{className:"text-lg md:text-2xl font-bold",children:c.avgTradesPerDay.toFixed(1)}),n.jsx("div",{className:"text-xs md:text-sm opacity-80",children:"Avg Trades/Day"})]}),n.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-3 md:p-4 text-center",children:[n.jsx("div",{className:"text-lg md:text-2xl font-bold",children:_}),n.jsx("div",{className:"text-xs md:text-sm opacity-80",children:"Max Win Streak"})]}),n.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-3 md:p-4 text-center",children:[n.jsxs("div",{className:"text-lg md:text-2xl font-bold",children:[xe.toFixed(0),"%"]}),n.jsx("div",{className:"text-xs md:text-sm opacity-80",children:"Consistent Days"})]})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-lg font-semibold mb-4",children:" Performance Insights"}),n.jsx("div",{className:"space-y-1",children:u.length>0?u.slice(0,4).map((Pe,De)=>n.jsx("div",{className:`p-4 rounded-xl border ${Pe.type==="success"?"bg-emerald-500/20 border-emerald-400/30":Pe.type==="warning"?"bg-amber-500/20 border-amber-400/30":"bg-red-500/20 border-red-400/30"}`,children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"text-xl",children:Pe.icon}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:Pe.title}),n.jsx("div",{className:"text-sm opacity-90",children:Pe.message})]})]})},De)):n.jsxs("div",{className:"text-center py-6",children:[n.jsx("div",{className:"text-3xl mb-2",children:""}),n.jsx("p",{className:"opacity-80",children:"Insights will appear as you build trading history"})]})})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-lg font-semibold mb-4",children:" Professional Tips"}),n.jsx("div",{className:"space-y-1",children:ye.map((Pe,De)=>n.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"text-xl",children:Pe.icon}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-sm",children:Pe.title}),n.jsx("div",{className:"text-xs opacity-90 mt-1",children:Pe.tip})]})]})},De))})]})]})]})})()]})]})})()})]})]})}),n.jsx(xle,{showOrderModal:Yd,setShowOrderModal:jo,orderTab:Nf,setOrderTab:Q0,showUserId:lg,setShowUserId:Ys,zerodhaClientId:Mm,zerodhaUserName:is,brokerOrders:dc,fetchingBrokerOrders:J0,zerodhaAccessToken:Ds,recordAllBrokerOrders:qm,upstoxAccessToken:os,upstoxUserId:Jc,upstoxUserName:Zc,brokerPositions:ch,fetchingBrokerPositions:fg,showBrokerImportModal:G0,setShowBrokerImportModal:ug,handleBrokerImport:px,showImportModal:jl,setShowImportModal:Kc,handleFileUpload:Dv,activeFormat:Ci,detectedFormatLabel:Xo,isBuildMode:sh,setIsBuildMode:ah,brokerSearchInput:Cl,setBrokerSearchInput:ih,showBrokerSuggestions:bf,setShowBrokerSuggestions:Ln,filteredBrokers:dg,buildModeData:Rr,setBuildModeData:Es,allColumnsFilledForSave:oh,missingColumns:Tl,saveFormatToUniversalLibrary:Fm,currentUser:ue,getCognitoToken:ks,setSavedFormats:Hn,importDataTextareaRef:El,brokerFunds:Qt}),n.jsx(xMe,{open:G0,onOpenChange:ug,onSuccess:px}),n.jsx(bn,{open:jl,onOpenChange:Kc,children:n.jsxs(pn,{className:"max-w-2xl max-h-[85vh] overflow-y-auto custom-thin-scrollbar p-0",children:[n.jsx("div",{className:"sticky top-0 z-10 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800 px-4 py-3",children:n.jsx("span",{className:"text-sm font-semibold text-slate-800 dark:text-slate-100",children:"Import P&L Data"})}),n.jsxs("div",{className:"p-4 space-y-4",children:[n.jsxs("div",{children:[n.jsx(Un,{htmlFor:"csv-upload",className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:"Upload CSV"}),n.jsx(Nr,{id:"csv-upload",type:"file",accept:".csv",onChange:Dv,className:"mt-1.5 h-8 text-xs","data-testid":"input-csv-upload"}),n.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Expected: date, symbol, action, qty, entry, exit, pnl, duration"})]}),n.jsxs("div",{children:[n.jsx(Un,{className:"text-xs font-medium text-slate-700 dark:text-slate-300 mb-1.5 block",children:"Or Paste Data"}),n.jsx("div",{className:"flex items-center gap-2 mb-2",children:Ci&&Xo&&n.jsxs("span",{className:"text-xs px-2 py-0.5 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded font-medium",children:["Format: ",Xo]})}),n.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:Ci?`Using "${Xo}" format`:"Paste your trade data. Format will be auto-detected if saved."}),n.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-md bg-slate-50 dark:bg-slate-900/30 p-3 mb-3",children:sh?n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("div",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:"Build Mode - Select text, click +, X to delete"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Nr,{placeholder:"Type broker name or custom name (e.g., Zerodha, Coinbase, MyBroker...)",value:Cl,onChange:y=>{ih(y.target.value),Ln(!0)},onFocus:()=>Ln(!0),onBlur:()=>setTimeout(()=>Ln(!1),200),className:"h-8 w-56 text-xs","data-testid":"input-broker-search"}),bf&&dg.length>0&&n.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded shadow-md z-50 max-h-64 overflow-y-auto",children:dg.map(y=>n.jsx("div",{onMouseDown:E=>{E.preventDefault(),ih(y),Ln(!1)},className:"px-3 py-1.5 text-xs cursor-pointer hover:bg-blue-100 dark:hover:bg-blue-900/30","data-testid":`broker-suggestion-${y}`,children:y},y))})]}),n.jsxs(H,{variant:"ghost",size:"sm",disabled:!(ue!=null&&ue.userId)||!Cl.trim()||!oh,title:ue!=null&&ue.userId?Cl.trim()?oh?"":`Fill all columns: ${Tl.join(", ")}`:"Enter broker or custom name":"Log in to save formats",onClick:async()=>{if(!Cl.trim()){alert("Please enter a broker name");return}if(!oh){alert(`Please fill all columns: ${Tl.join(", ")}`);return}const y=Cl.trim(),E=`${y} Format`;if(await Fm(E,Rr,y)&&(La(Rr),ih(""),console.log(" Format saved to library for:",y,Rr.positions),ue!=null&&ue.userId))try{const z=await ks();if(z){const K=await fetch(`/api/user-formats/${ue.userId}`,{headers:{Authorization:`Bearer ${z}`}});if(K.ok){const G=await K.json();if(Hn(G),Object.keys(G).length>0){const $=Object.keys(G)[0],ae=G[$];La(ae),console.log(" Live preview auto-applying first format:",$)}console.log(" Saved formats reloaded - live preview updated:",Object.keys(G).length)}}}catch(z){console.error(" Failed to reload formats after save:",z)}},"data-testid":"button-save-format",className:"h-8 text-xs px-2",children:[n.jsx(mse,{className:"w-3 h-3 mr-1"}),"Save"]}),n.jsx(H,{variant:"ghost",size:"sm",onClick:()=>ah(!1),"data-testid":"button-close-build-mode",children:n.jsx(Wr,{className:"w-4 h-4"})})]})]}),n.jsx("div",{className:"bg-background rounded border overflow-hidden",children:n.jsxs("table",{className:"w-full font-mono text-xs",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-blue-50 dark:bg-blue-950 border-b border-blue-200 dark:border-blue-800",children:[n.jsx("th",{className:"px-2 py-2 text-left text-blue-600 dark:text-blue-400 font-semibold",children:"Time"}),n.jsx("th",{className:"px-2 py-2 text-left text-blue-600 dark:text-blue-400 font-semibold",children:"Order"}),n.jsx("th",{className:"px-2 py-2 text-left text-blue-600 dark:text-blue-400 font-semibold",children:"Symbol"}),n.jsx("th",{className:"px-2 py-2 text-left text-blue-600 dark:text-blue-400 font-semibold",children:"Type"}),n.jsx("th",{className:"px-2 py-2 text-left text-blue-600 dark:text-blue-400 font-semibold",children:"Qty"}),n.jsx("th",{className:"px-2 py-2 text-left text-blue-600 dark:text-blue-400 font-semibold",children:"Price"})]})}),n.jsx("tbody",{children:n.jsxs("tr",{className:"border-b",children:[n.jsx("td",{className:"px-2 py-2",onDragOver:y=>y.preventDefault(),onDrop:y=>{y.preventDefault();const E=y.dataTransfer.getData("sourceField");E&&E!=="time"&&Es(M=>({...M,positions:{...M.positions,time:M.positions[E],[E]:M.positions.time},displayValues:{...M.displayValues,time:M.displayValues[E],[E]:M.displayValues.time}}))},children:Rr.positions.time.length>0?n.jsxs("div",{draggable:!0,onDragStart:y=>{y.dataTransfer.setData("sourceField","time"),y.dataTransfer.setData("sourceValue",Rr.displayValues.time)},className:"inline-flex flex-col gap-0.5 px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded text-xs cursor-move",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsxs("span",{className:"text-xs text-blue-500 dark:text-blue-400 font-mono",children:["[Pos ",Rr.positions.time.join(", "),"]"]}),n.jsx("button",{onClick:()=>Es(y=>({...y,positions:{...y.positions,time:[]},displayValues:{...y.displayValues,time:""}})),className:"hover:bg-blue-200 dark:hover:bg-blue-900/50 rounded p-0.5","data-testid":"delete-time",title:"Delete all",children:n.jsx(Wr,{className:"w-3 h-3"})})]}),n.jsx("span",{className:"font-medium text-xs",children:Rr.displayValues.time})]}):n.jsx("button",{onClick:()=>{const y=El.current;if(y){const E=y.value.substring(y.selectionStart,y.selectionEnd).trim(),M=y.value.trim().split(`
`)[0]||"";if(E&&M){const z=E.split(/\s+/),K=M.split(/\t+/).flatMap($=>$.split(/\s+/)).filter($=>$.trim()),G=z.map($=>K.findIndex(ae=>ae===$||ae.includes($)||$.includes(ae))).filter($=>$>=0);G.length>0?Es($=>({...$,sampleLine:M,positions:{...$.positions,time:[...$.positions.time,...G]},displayValues:{...$.displayValues,time:$.displayValues.time?`${$.displayValues.time} ${E}`:E}})):alert("Could not find selected text in first line!")}}},className:"inline-flex items-center justify-center w-6 h-6 rounded bg-gray-100 dark:bg-gray-800 text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700","data-testid":"add-time",title:"Select text and click +",children:n.jsx(vi,{className:"w-4 h-4"})})}),n.jsx("td",{className:"px-2 py-2",onDragOver:y=>y.preventDefault(),onDrop:y=>{y.preventDefault();const E=y.dataTransfer.getData("sourceField");E&&E!=="order"&&Es(M=>({...M,positions:{...M.positions,order:M.positions[E],[E]:M.positions.order},displayValues:{...M.displayValues,order:M.displayValues[E],[E]:M.displayValues.order}}))},children:Rr.positions.order.length>0?n.jsxs("div",{draggable:!0,onDragStart:y=>{y.dataTransfer.setData("sourceField","order"),y.dataTransfer.setData("sourceValue",Rr.displayValues.order)},className:"inline-flex flex-col gap-0.5 px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded text-xs cursor-move",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsxs("span",{className:"text-xs text-blue-500 dark:text-blue-400 font-mono",children:["[Pos ",Rr.positions.order.join(", "),"]"]}),n.jsx("button",{onClick:()=>Es(y=>({...y,positions:{...y.positions,order:[]},displayValues:{...y.displayValues,order:""}})),className:"hover:bg-blue-200 dark:hover:bg-blue-900/50 rounded p-0.5","data-testid":"delete-order",title:"Delete all",children:n.jsx(Wr,{className:"w-3 h-3"})})]}),n.jsx("span",{className:"font-medium text-xs",children:Rr.displayValues.order})]}):n.jsx("button",{onClick:()=>{const y=El.current;if(y){const E=y.value.substring(y.selectionStart,y.selectionEnd).trim(),M=y.value.trim().split(`
`)[0]||"";if(E&&M){const z=E.split(/\s+/),K=M.split(/\t+/).flatMap($=>$.split(/\s+/)).filter($=>$.trim()),G=z.map($=>K.findIndex(ae=>ae===$||ae.includes($)||$.includes(ae))).filter($=>$>=0);G.length>0?Es($=>({...$,sampleLine:M,positions:{...$.positions,order:[...$.positions.order,...G]},displayValues:{...$.displayValues,order:$.displayValues.order?`${$.displayValues.order} ${E}`:E}})):alert("Could not find selected text in first line!")}}},className:"inline-flex items-center justify-center w-6 h-6 rounded bg-gray-100 dark:bg-gray-800 text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700","data-testid":"add-order",title:"Select text and click +",children:n.jsx(vi,{className:"w-4 h-4"})})}),n.jsx("td",{className:"px-2 py-2",onDragOver:y=>y.preventDefault(),onDrop:y=>{y.preventDefault();const E=y.dataTransfer.getData("sourceField");E&&E!=="symbol"&&Es(M=>({...M,positions:{...M.positions,symbol:M.positions[E],[E]:M.positions.symbol},displayValues:{...M.displayValues,symbol:M.displayValues[E],[E]:M.displayValues.symbol}}))},children:Rr.positions.symbol.length>0?n.jsxs("div",{draggable:!0,onDragStart:y=>{y.dataTransfer.setData("sourceField","symbol"),y.dataTransfer.setData("sourceValue",Rr.displayValues.symbol)},className:"inline-flex flex-col gap-0.5 px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded text-xs cursor-move",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsxs("span",{className:"text-xs text-blue-500 dark:text-blue-400 font-mono",children:["[Pos ",Rr.positions.symbol.join(", "),"]"]}),n.jsx("button",{onClick:()=>Es(y=>({...y,positions:{...y.positions,symbol:[]},displayValues:{...y.displayValues,symbol:""}})),className:"hover:bg-blue-200 dark:hover:bg-blue-900/50 rounded p-0.5","data-testid":"delete-symbol",title:"Delete all",children:n.jsx(Wr,{className:"w-3 h-3"})})]}),n.jsx("span",{className:"font-medium text-xs",children:Rr.displayValues.symbol})]}):n.jsx("button",{onClick:()=>{const y=El.current;if(y){const E=y.value.substring(y.selectionStart,y.selectionEnd).trim(),M=y.value.trim().split(`
`)[0]||"";if(E&&M){const z=E.split(/\s+/),K=M.split(/\t+/).flatMap($=>$.split(/\s+/)).filter($=>$.trim()),G=z.map($=>K.findIndex(ae=>ae===$||ae.includes($)||$.includes(ae))).filter($=>$>=0);G.length>0?Es($=>({...$,sampleLine:M,positions:{...$.positions,symbol:[...$.positions.symbol,...G]},displayValues:{...$.displayValues,symbol:$.displayValues.symbol?`${$.displayValues.symbol} ${E}`:E}})):alert("Could not find selected text in first line!")}}},className:"inline-flex items-center justify-center w-6 h-6 rounded bg-gray-100 dark:bg-gray-800 text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700","data-testid":"add-symbol",title:"Select text and click +",children:n.jsx(vi,{className:"w-4 h-4"})})}),n.jsx("td",{className:"px-2 py-2",onDragOver:y=>y.preventDefault(),onDrop:y=>{y.preventDefault();const E=y.dataTransfer.getData("sourceField");E&&E!=="type"&&Es(M=>({...M,positions:{...M.positions,type:M.positions[E],[E]:M.positions.type},displayValues:{...M.displayValues,type:M.displayValues[E],[E]:M.displayValues.type}}))},children:Rr.positions.type.length>0?n.jsxs("div",{draggable:!0,onDragStart:y=>{y.dataTransfer.setData("sourceField","type"),y.dataTransfer.setData("sourceValue",Rr.displayValues.type)},className:"inline-flex flex-col gap-0.5 px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded text-xs cursor-move",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsxs("span",{className:"text-xs text-blue-500 dark:text-blue-400 font-mono",children:["[Pos ",Rr.positions.type.join(", "),"]"]}),n.jsx("button",{onClick:()=>Es(y=>({...y,positions:{...y.positions,type:[]},displayValues:{...y.displayValues,type:""}})),className:"hover:bg-blue-200 dark:hover:bg-blue-900/50 rounded p-0.5","data-testid":"delete-type",title:"Delete all",children:n.jsx(Wr,{className:"w-3 h-3"})})]}),n.jsx("span",{className:"font-medium text-xs",children:Rr.displayValues.type})]}):n.jsx("button",{onClick:()=>{const y=El.current;if(y){const E=y.value.substring(y.selectionStart,y.selectionEnd).trim(),M=y.value.trim().split(`
`)[0]||"";if(E&&M){const z=E.split(/\s+/),K=M.split(/\t+/).flatMap($=>$.split(/\s+/)).filter($=>$.trim()),G=z.map($=>K.findIndex(ae=>ae===$||ae.includes($)||$.includes(ae))).filter($=>$>=0);G.length>0?Es($=>({...$,sampleLine:M,positions:{...$.positions,type:[...$.positions.type,...G]},displayValues:{...$.displayValues,type:$.displayValues.type?`${$.displayValues.type} ${E}`:E}})):alert("Could not find selected text in first line!")}}},className:"inline-flex items-center justify-center w-6 h-6 rounded bg-gray-100 dark:bg-gray-800 text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700","data-testid":"add-type",title:"Select text and click +",children:n.jsx(vi,{className:"w-4 h-4"})})}),n.jsx("td",{className:"px-2 py-2",onDragOver:y=>y.preventDefault(),onDrop:y=>{y.preventDefault();const E=y.dataTransfer.getData("sourceField");E&&E!=="qty"&&Es(M=>({...M,positions:{...M.positions,qty:M.positions[E],[E]:M.positions.qty},displayValues:{...M.displayValues,qty:M.displayValues[E],[E]:M.displayValues.qty}}))},children:Rr.positions.qty.length>0?n.jsxs("div",{draggable:!0,onDragStart:y=>{y.dataTransfer.setData("sourceField","qty"),y.dataTransfer.setData("sourceValue",Rr.displayValues.qty)},className:"inline-flex flex-col gap-0.5 px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded text-xs cursor-move",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsxs("span",{className:"text-xs text-blue-500 dark:text-blue-400 font-mono",children:["[Pos ",Rr.positions.qty.join(", "),"]"]}),n.jsx("button",{onClick:()=>Es(y=>({...y,positions:{...y.positions,qty:[]},displayValues:{...y.displayValues,qty:""}})),className:"hover:bg-blue-200 dark:hover:bg-blue-900/50 rounded p-0.5","data-testid":"delete-qty",title:"Delete all",children:n.jsx(Wr,{className:"w-3 h-3"})})]}),n.jsx("span",{className:"font-medium text-xs",children:Rr.displayValues.qty})]}):n.jsx("button",{onClick:()=>{const y=El.current;if(y){const E=y.value.substring(y.selectionStart,y.selectionEnd).trim(),M=y.value.trim().split(`
`)[0]||"";if(E&&M){const z=E.split(/\s+/),K=M.split(/\t+/).flatMap($=>$.split(/\s+/)).filter($=>$.trim()),G=z.map($=>K.findIndex(ae=>ae===$||ae.includes($)||$.includes(ae))).filter($=>$>=0);G.length>0?Es($=>({...$,sampleLine:M,positions:{...$.positions,qty:[...$.positions.qty,...G]},displayValues:{...$.displayValues,qty:$.displayValues.qty?`${$.displayValues.qty} ${E}`:E}})):alert("Could not find selected text in first line!")}}},className:"inline-flex items-center justify-center w-6 h-6 rounded bg-gray-100 dark:bg-gray-800 text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700","data-testid":"add-qty",title:"Select text and click +",children:n.jsx(vi,{className:"w-4 h-4"})})}),n.jsx("td",{className:"px-2 py-2",onDragOver:y=>y.preventDefault(),onDrop:y=>{y.preventDefault();const E=y.dataTransfer.getData("sourceField");E&&E!=="price"&&Es(M=>({...M,positions:{...M.positions,price:M.positions[E],[E]:M.positions.price},displayValues:{...M.displayValues,price:M.displayValues[E],[E]:M.displayValues.price}}))},children:Rr.positions.price.length>0?n.jsxs("div",{draggable:!0,onDragStart:y=>{y.dataTransfer.setData("sourceField","price"),y.dataTransfer.setData("sourceValue",Rr.displayValues.price)},className:"inline-flex flex-col gap-0.5 px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded text-xs cursor-move",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsxs("span",{className:"text-xs text-blue-500 dark:text-blue-400 font-mono",children:["[Pos ",Rr.positions.price.join(", "),"]"]}),n.jsx("button",{onClick:()=>Es(y=>({...y,positions:{...y.positions,price:[]},displayValues:{...y.displayValues,price:""}})),className:"hover:bg-blue-200 dark:hover:bg-blue-900/50 rounded p-0.5","data-testid":"delete-price",title:"Delete all",children:n.jsx(Wr,{className:"w-3 h-3"})})]}),n.jsx("span",{className:"font-medium text-xs",children:Rr.displayValues.price})]}):n.jsx("button",{onClick:()=>{const y=El.current;if(y){const E=y.value.substring(y.selectionStart,y.selectionEnd).trim(),M=y.value.trim().split(`
`)[0]||"";if(E&&M){const z=E.split(/\s+/),K=M.split(/\t+/).flatMap($=>$.split(/\s+/)).filter($=>$.trim()),G=z.map($=>K.findIndex(ae=>ae===$||ae.includes($)||$.includes(ae))).filter($=>$>=0);G.length>0?Es($=>({...$,sampleLine:M,positions:{...$.positions,price:[...$.positions.price,...G]},displayValues:{...$.displayValues,price:$.displayValues.price?`${$.displayValues.price} ${E}`:E}})):alert("Could not find selected text in first line!")}}},className:"inline-flex items-center justify-center w-6 h-6 rounded bg-gray-100 dark:bg-gray-800 text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700","data-testid":"add-price",title:"Select text and click +",children:n.jsx(vi,{className:"w-4 h-4"})})})]})})]})}),Object.keys($a).length>0&&n.jsxs("div",{className:"mt-4 space-y-2",children:[n.jsxs("button",{onClick:()=>Dt(!vr),className:"flex items-center gap-2 text-xs font-medium text-muted-foreground hover:text-foreground transition-colors w-full","data-testid":"button-toggle-saved-formats",children:[n.jsx(Mp,{className:`w-3 h-3 transition-transform ${vr?"rotate-180":""}`})," Saved Formats (",Object.keys($a).length,")"]}),vr&&n.jsx("div",{className:"bg-background rounded border overflow-hidden",children:n.jsxs("table",{className:"w-full text-xs",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-muted/50 border-b",children:[n.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:"Format Label"}),n.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:"Original Trade Line"}),n.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:"Actions"})]})}),n.jsx("tbody",{children:Object.entries($a).map(([y,E])=>{const M=E.label||y;return n.jsxs("tr",{className:"border-b last:border-b-0 hover-elevate",children:[n.jsx("td",{className:"px-3 py-2 font-medium",children:M}),n.jsx("td",{className:"px-3 py-2 font-mono text-muted-foreground truncate max-w-md",children:E.sampleLine||"No sample line saved"}),n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(H,{variant:"outline",size:"sm",className:"h-7 text-xs",onClick:()=>{lh(y),Es(E),La(E),gr(M),console.log(" Format loaded from table:",M,E)},"data-testid":`button-use-format-${M}`,children:"Use"}),n.jsx(H,{variant:"ghost",size:"sm",className:"h-7 text-xs text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-950/30 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!(ue!=null&&ue.userId),title:ue!=null&&ue.userId?"":"Log in to delete formats",onClick:async()=>{if(confirm(`Delete format "${M}"?`)){const z={...$a};delete z[y],Hn(z),await saveFormatsToAWS(z),Ci===E&&La(null),Pl===y&&lh(null),console.log(" Format deleted:",M)}},"data-testid":`button-delete-format-${M}`,children:n.jsx(Wr,{className:"w-3 h-3"})})]})})]},y)})})]})})]})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Live Preview - How Your First Trade Will Import:"}),n.jsx("div",{className:"bg-background rounded border overflow-hidden",children:n.jsxs("table",{className:"w-full font-mono text-xs",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-blue-50 dark:bg-blue-950 border-b border-blue-200 dark:border-blue-800",children:[n.jsx("th",{className:"px-2 py-2 text-left text-blue-600 dark:text-blue-400 font-semibold",children:"Time"}),n.jsx("th",{className:"px-2 py-2 text-left text-blue-600 dark:text-blue-400 font-semibold",children:"Order"}),n.jsx("th",{className:"px-2 py-2 text-left text-blue-600 dark:text-blue-400 font-semibold",children:"Symbol"}),n.jsx("th",{className:"px-2 py-2 text-left text-blue-600 dark:text-blue-400 font-semibold",children:"Type"}),n.jsx("th",{className:"px-2 py-2 text-left text-blue-600 dark:text-blue-400 font-semibold",children:"Qty"}),n.jsx("th",{className:"px-2 py-2 text-left text-blue-600 dark:text-blue-400 font-semibold",children:"Price"})]})}),n.jsx("tbody",{children:(()=>{if(!gs.trim())return n.jsx("tr",{className:"border-b last:border-b-0",children:n.jsx("td",{colSpan:6,className:"px-2 py-3 text-center text-muted-foreground italic",children:"Paste trade data below to see live preview..."})});const{trades:y,errors:E}=Ci?Mg(gs,Ci):d9(gs);if(y.length===0)return n.jsx("tr",{className:"border-b last:border-b-0",children:n.jsx("td",{colSpan:6,className:"px-2 py-3 text-center text-orange-600 dark:text-orange-400",children:" Unable to parse - check format"})});const M=y[0];return n.jsxs("tr",{className:"border-b last:border-b-0 bg-green-50/50 dark:bg-green-950/20",children:[n.jsx("td",{className:"px-2 py-2 text-foreground",children:M.time}),n.jsx("td",{className:"px-2 py-2 text-foreground",children:M.order}),n.jsx("td",{className:"px-2 py-2 text-foreground",children:M.symbol}),n.jsx("td",{className:"px-2 py-2 text-foreground",children:M.type}),n.jsx("td",{className:"px-2 py-2 text-foreground",children:M.qty}),n.jsx("td",{className:"px-2 py-2 text-foreground",children:M.price})]})})()})]})}),n.jsxs("div",{className:"flex items-center justify-between mt-2",children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:" This preview updates automatically as you paste - check your format before importing"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("select",{className:"h-9 px-3 text-sm border rounded-md bg-background disabled:opacity-50",onChange:y=>{if(y.target.value){const E=y.target.value,M=$a[E];lh(E);const z=El.current;if(z&&M){const K=z.value.trim().split(`
`)[0]||"";if(K){const G=fx(M,K);Es(G),La(G),gr(M.label||E)}else Es(M),La(M),gr(M.label||E)}else Es(M),La(M),gr(M.label||E);ah(!0),console.log(" Format manually selected:",M.label||E,M)}},defaultValue:"","data-testid":"select-load-format",disabled:Lm,children:[n.jsx("option",{value:"",children:Lm?"Loading formats...":`Load Saved Format${Object.keys($a).length>0?` (${Object.keys($a).length})`:""}`}),Object.entries($a).map(([y,E])=>n.jsx("option",{value:y,children:E.label||y},y))]}),(ue==null?void 0:ue.userId)&&n.jsx(H,{variant:"ghost",size:"sm",className:"h-9 px-2",onClick:async()=>{console.log(" Manually refreshing formats..."),td(!0);try{const y=await ks();if(y){const E=await fetch(`/api/user-formats/${ue.userId}`,{headers:{Authorization:`Bearer ${y}`}});if(E.ok){const M=await E.json();console.log(" Formats refreshed:",Object.keys(M).length),Hn(M),yr({title:"Refreshed",description:`Loaded ${Object.keys(M).length} format(s)`})}}}catch(y){console.error(" Refresh failed:",y),yr({title:"Refresh Failed",description:"Could not load formats",variant:"destructive"})}finally{td(!1)}},"data-testid":"button-refresh-formats",title:"Refresh saved formats",children:n.jsx(fse,{className:"w-3.5 h-3.5"})}),n.jsxs(H,{variant:"outline",size:"sm",className:"gap-1.5",onClick:()=>{const y=gs.trim().split(`
`)[0]||"",E=y.split(/\s+/);let M=-1,z=-1,K=-1,G=-1,$=-1,ae=-1,c="",u="",p="",v="",k="",_="",F=!1,se=!1,J=!1;const xe=E.length-1;xe>=0&&/^\d+(\.\d+)?$/.test(E[xe])&&($=xe,k=E[xe]),xe>=1&&/^\d+(\.\d+)?$/.test(E[xe-1])&&(ae=xe-1,_=E[xe-1]);for(let ye=0;ye<E.length;ye++){const Pe=E[ye];if(!F&&/^\d{1,2}:\d{2}:\d{2}$/.test(Pe)){M=ye,c=Pe,F=!0;continue}if(!se&&/^(BUY|SELL)$/i.test(Pe)){z=ye,u=Pe.toUpperCase(),se=!0;continue}if(!J&&se&&/^[A-Z]+$/.test(Pe)&&!/^(CE|PE|FUT|MIS|NRML|IOC)$/i.test(Pe)){K=ye,p=Pe,J=!0;continue}J&&!v&&(/(CE|PE|FUT|NRML|MIS|IOC|CALL|PUT)$/i.test(Pe)||/^\d+$/.test(Pe))&&(G=ye,v=Pe)}Es({sampleLine:y,positions:{time:M>=0?[M]:[],order:z>=0?[z]:[],symbol:K>=0?[K]:[],type:G>=0?[G]:[],qty:$>=0?[$]:[],price:ae>=0?[ae]:[]},displayValues:{time:c,order:u,symbol:p,type:v,qty:k,price:_}}),ah(!0),console.log(" Build mode - auto-extracted from first line with CORRECT word positions",{positions:{timePos:M,orderPos:z,symbolPos:K,typePos:G,qtyPos:$,pricePos:ae},displayValues:{timeVal:c,orderVal:u,symbolVal:p,typeVal:v,qtyVal:k,priceVal:_}})},"data-testid":"button-build",children:[n.jsx(rse,{className:"w-3.5 h-3.5"}),"Build"]})]})]})]})}),n.jsx(qp,{ref:El,id:"paste-data",placeholder:"Paste your trade data...",value:gs,onChange:y=>vf(y.target.value),className:"min-h-32 text-xs","data-testid":"textarea-paste-data"})]}),Qc&&n.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md p-3",children:n.jsx("p",{className:"text-xs text-red-600 dark:text-red-400",children:Qc})}),cg.length>0&&n.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-md p-3 max-h-40 overflow-y-auto custom-thin-scrollbar",children:[n.jsxs("p",{className:"text-xs font-medium text-slate-700 dark:text-slate-300 mb-2",children:[cg.length," line(s) could not be parsed"]}),n.jsx("div",{className:"space-y-2",children:cg.map((y,E)=>n.jsxs("div",{className:"bg-white rounded p-2 text-xs border border-yellow-100",children:[n.jsxs("div",{className:"flex justify-between items-start gap-2",children:[n.jsxs("span",{className:"font-mono text-yellow-700",children:["Line ",y.line,":"]}),n.jsx("span",{className:"text-red-600 font-medium",children:y.reason})]}),n.jsx("div",{className:"mt-1 text-gray-600 font-mono truncate",children:y.content})]},E))})]}),n.jsxs("div",{className:"flex justify-end gap-2 pt-3 border-t border-slate-200 dark:border-slate-700",children:[n.jsx(H,{variant:"ghost",size:"sm",onClick:()=>{Kc(!1),vf(""),Oa(""),ui([]),lh(null)},className:"h-8 text-xs",children:"Cancel"}),n.jsx(H,{size:"sm",onClick:mx,className:"h-8 text-xs",children:"Import"})]})]})]})}),n.jsx(bn,{open:jf,onOpenChange:So,children:n.jsxs(pn,{className:"max-w-sm",children:[n.jsxs(Zn,{className:"text-center",children:[n.jsx("div",{className:"flex justify-center mb-4",children:n.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center",children:n.jsx(Ac,{className:"h-8 w-8 text-white"})})}),n.jsx(Xn,{className:"text-xl font-bold text-center",children:"Trading Challenge"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2 text-center",children:"Coming Soon"})]}),n.jsxs("div",{className:"py-4 space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg",children:[n.jsx(Uo,{className:"h-5 w-5 text-blue-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium",children:"Compete with Traders"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Join 7-day trading challenges"})]})]}),n.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg",children:[n.jsx(ia,{className:"h-5 w-5 text-green-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium",children:"Live P&L Tracking"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Real-time ranking based on your trades"})]})]}),n.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg",children:[n.jsx(Ac,{className:"h-5 w-5 text-amber-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium",children:"Leaderboard Rankings"}),n.jsx("p",{className:"text-xs text-gray-500",children:"See your position among all participants"})]})]})]}),n.jsx(H,{onClick:()=>So(!1),className:"w-full","data-testid":"button-close-challenge-modal",children:"Got It"})]})}),n.jsx(Sle,{open:Ka,onOpenChange:dn}),n.jsx(bn,{open:pg,onOpenChange:Um,children:n.jsxs(pn,{className:"w-full h-auto sm:max-w-2xl sm:max-h-[85vh] rounded-none sm:rounded-lg overflow-hidden p-0 bg-white sm:dark:bg-gray-900 hidden sm:flex flex-col",children:[n.jsxs("div",{className:"flex flex-col h-full sm:hidden",children:[n.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 px-5 pt-8 pb-6 relative",children:[n.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"P&L"}),n.jsx("div",{className:`text-3xl font-bold mb-2 ${In>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,"data-testid":"paper-trading-pnl-mobile",children:xs?"***":`${In.toLocaleString("en-IN",{minimumFractionDigits:0,maximumFractionDigits:0})}`}),n.jsxs("div",{className:"text-sm flex items-center gap-1 text-gray-400",children:[n.jsx("span",{children:xs?"***":`${Qo.toLocaleString("en-IN")}`}),n.jsx("span",{className:"text-gray-500 text-xs",children:"Total Capital"})]}),n.jsxs("div",{className:"flex items-center gap-4 mt-4 text-xs",children:[n.jsxs("div",{className:"flex items-center gap-1.5 text-gray-400",children:[n.jsx("span",{children:"Positions:"}),n.jsx("span",{className:"text-white font-medium",children:kn.filter(y=>y.isOpen).length})]}),n.jsxs("div",{className:"flex items-center gap-1.5 text-gray-400",children:[n.jsx("span",{children:"Trades:"}),n.jsx("span",{className:"text-white font-medium",children:Ts.length})]}),n.jsx(H,{onClick:()=>Qd(!xs),size:"icon",variant:"ghost",className:"h-6 w-6 ml-auto text-gray-400 hover:text-white","data-testid":"button-toggle-visibility-mobile",children:xs?n.jsx(o0,{className:"w-4 h-4"}):n.jsx(Au,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto bg-white dark:bg-gray-950 custom-thin-scrollbar",children:[n.jsx("div",{className:"p-4",children:n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-xl p-4 border border-gray-100 dark:border-gray-800",children:[n.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3",children:"New Trade"}),n.jsxs("div",{className:"relative mb-3",children:[n.jsx(Zl,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx(Nr,{type:"text",placeholder:"Search instrument...",value:fc,onChange:y=>{const E=y.target.value;if(!E&&cr&&Ur.current.has(cr)){const M=Ur.current.get(cr);M&&M.close(),Ur.current.delete(cr),xa("disconnected")}Gi(E),hi(""),Pi(null),E.length>0?xg(E):Xi([])},className:"h-10 pl-10 text-sm rounded-lg bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700","data-testid":"input-paper-trade-search-mobile"}),fc&&!cr&&n.jsx("div",{className:"absolute z-[100] left-0 right-0 mt-1 max-h-48 overflow-auto bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg",children:Eo?n.jsxs("div",{className:"px-4 py-3 text-sm text-gray-500 flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}),"Searching..."]}):id.length===0?n.jsx("div",{className:"px-4 py-3 text-sm text-gray-500",children:"No results found"}):id.slice(0,6).map((y,E)=>n.jsxs("button",{onClick:()=>{od(y),hi(y.symbol),Gi(y.symbol),en==="STOCK"?To(""):an("1"),Po(y)},className:"w-full text-left px-4 py-2.5 hover:bg-gray-50 dark:hover:bg-gray-800 flex items-center justify-between text-sm border-b border-gray-100 dark:border-gray-800 last:border-0","data-testid":`select-stock-mobile-${y.symbol}`,children:[n.jsx("span",{className:"font-medium",children:y.symbol}),n.jsx("span",{className:"text-xs text-gray-400 bg-gray-100 dark:bg-gray-800 px-2 py-0.5 rounded",children:y.exchange})]},`${y.symbol}-${y.exchange}-${E}`))})]}),n.jsxs("div",{className:"flex gap-2 mb-3",children:[n.jsxs(Ms,{value:en,onValueChange:y=>{const E=y;if(cr&&Ur.current.has(cr)){const M=Ur.current.get(cr);M&&M.close(),Ur.current.delete(cr)}ld(E),hi(""),Gi(""),Xi([]),Pi(null),od(null),To(""),an(""),xa("disconnected")},children:[n.jsx(Ns,{className:"flex-1 h-10 text-sm rounded-lg","data-testid":"select-paper-trade-type-mobile",children:n.jsx(Os,{})}),n.jsxs(js,{children:[n.jsx(gt,{value:"STOCK",children:"Stock"}),n.jsx(gt,{value:"FUTURES",children:"Futures"}),n.jsx(gt,{value:"OPTIONS",children:"Options"}),n.jsx(gt,{value:"MCX",children:"MCX"})]})]}),n.jsx(H,{onClick:()=>{Ii(),cu(!0)},size:"icon",variant:"outline",className:"h-10 w-10 rounded-lg","data-testid":"button-option-chain-mobile",children:n.jsx(bb,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"flex gap-2 mb-4",children:[en==="STOCK"?n.jsx(Nr,{type:"number",placeholder:"Quantity",value:Ti,onChange:y=>To(y.target.value),className:"flex-1 h-10 text-sm text-center rounded-lg",min:"1","data-testid":"input-paper-trade-qty-mobile"}):n.jsx(Nr,{type:"number",placeholder:"Lots",value:Ks,onChange:y=>an(y.target.value),className:"flex-1 h-10 text-sm text-center rounded-lg",min:"1","data-testid":"input-paper-trade-lots-mobile"}),n.jsx("div",{className:"flex-1 h-10 flex items-center justify-center text-sm font-medium border border-gray-200 dark:border-gray-700 rounded-lg bg-gray-100 dark:bg-gray-800",children:eu?n.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}):tn?n.jsxs("span",{children:["",tn.toFixed(2)]}):n.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Price"})})]}),cr&&tn&&(()=>{const y=en==="STOCK"?Ti:Ks;if(!y)return null;let E=parseInt(y);if(en!=="STOCK"){const M=fh(cr,en);E=E*M}return n.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center mb-3",children:["Trade Value: ",(E*tn).toLocaleString("en-IN")]})})(),n.jsx("div",{className:"flex gap-3",children:(()=>{const y=en==="STOCK"?Ti:Ks;return n.jsxs(n.Fragment,{children:[n.jsx(H,{onClick:()=>{Al("BUY"),Il()},disabled:!cr||!y||!tn,className:"flex-1 h-12 rounded-xl bg-green-600 hover:bg-green-700 text-white font-semibold text-base","data-testid":"button-paper-buy-mobile",children:"BUY"}),n.jsx(H,{onClick:()=>{Al("SELL"),Il()},disabled:!cr||!y||!tn,className:"flex-1 h-12 rounded-xl bg-red-600 hover:bg-red-700 text-white font-semibold text-base","data-testid":"button-paper-sell-mobile",children:"SELL"}),n.jsxs("div",{className:"relative",children:[n.jsx(H,{onClick:()=>pc(!mc),disabled:!cr||!y||!tn,variant:Fa?"default":"outline",className:`h-12 w-12 rounded-xl ${Fa?"bg-orange-500 hover:bg-orange-600 text-white":""}`,"data-testid":"button-paper-sl-mobile",children:Fa?n.jsx(pse,{className:"h-5 w-5"}):n.jsx(Ax,{className:"h-5 w-5"})}),mc&&n.jsx("div",{className:"absolute z-50 bottom-14 right-0 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl shadow-lg",children:n.jsxs("div",{className:"p-4 space-y-3 min-w-[240px]",children:[n.jsx("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Stop Loss Configuration"}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] text-gray-500 uppercase",children:"Type"}),n.jsxs(Ms,{value:jr,onValueChange:E=>dd(E),children:[n.jsx(Ns,{className:"h-9 text-sm mt-1",children:n.jsx(Os,{})}),n.jsxs(js,{children:[n.jsx(gt,{value:"price",children:"Price SL"}),n.jsx(gt,{value:"percent",children:"% SL"}),n.jsx(gt,{value:"duration",children:"Duration"}),n.jsx(gt,{value:"high",children:"Candle High"}),n.jsx(gt,{value:"low",children:"Candle Low"})]})]})]}),(jr==="high"||jr==="low")&&n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] text-gray-500 uppercase",children:"Timeframe"}),n.jsxs(Ms,{value:$s,onValueChange:E=>_l(E),children:[n.jsx(Ns,{className:"h-9 text-sm mt-1",children:n.jsx(Os,{})}),n.jsxs(js,{children:[n.jsx(gt,{value:"1m",children:"1 Minute"}),n.jsx(gt,{value:"5m",children:"5 Minutes"}),n.jsx(gt,{value:"15m",children:"15 Minutes"}),n.jsx(gt,{value:"30m",children:"30 Minutes"}),n.jsx(gt,{value:"1h",children:"1 Hour"}),n.jsx(gt,{value:"4h",children:"4 Hours"}),n.jsx(gt,{value:"1d",children:"1 Day"})]})]})]}),jr==="duration"&&n.jsxs("div",{className:"flex gap-1.5",children:[n.jsx(Nr,{type:"number",placeholder:"Duration",value:rs,onChange:E=>Qi(E.target.value),className:"h-9 text-sm flex-1","data-testid":"input-paper-sl-duration-mobile"}),n.jsxs(Ms,{value:fi,onValueChange:E=>tu(E),children:[n.jsx(Ns,{className:"h-9 text-sm w-20",children:n.jsx(Os,{})}),n.jsxs(js,{children:[n.jsx(gt,{value:"min",children:"Min"}),n.jsx(gt,{value:"hr",children:"Hr"})]})]})]}),jr!=="high"&&jr!=="low"&&jr!=="duration"&&n.jsx(Nr,{type:"number",placeholder:jr==="price"?"Price":"%",value:rs,onChange:E=>Qi(E.target.value),className:"h-9 text-sm","data-testid":"input-paper-sl-value-mobile"}),n.jsxs("div",{className:"flex gap-2 pt-1",children:[n.jsx(H,{onClick:()=>{ru(!1),Qi(""),pc(!1)},size:"sm",variant:"outline",className:"flex-1 h-9","data-testid":"button-clear-paper-sl-mobile",children:"Clear"}),n.jsx(H,{onClick:()=>{(rs||jr==="high"||jr==="low")&&(ru(!0),yr({title:"Stop Loss Set",description:jr==="price"?`SL at ${rs}`:jr==="percent"?`SL at ${rs}% loss`:jr==="duration"?`SL after ${rs} ${fi}`:`SL at ${$s} candle ${jr}`})),pc(!1)},size:"sm",className:"flex-1 h-9 bg-orange-500 hover:bg-orange-600 text-white","data-testid":"button-set-paper-sl-mobile",children:"Set SL"})]})]})})]})]})})()})]})}),kn.filter(y=>y.isOpen).length>0&&n.jsxs("div",{className:"",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider flex items-center gap-2",children:["Open Positions",nu==="connected"&&n.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"})]}),n.jsx(H,{onClick:Jo,size:"sm",variant:"ghost",className:"h-7 px-2 text-xs text-red-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20","data-testid":"button-exit-all-mobile",children:"Exit All"})]}),n.jsx("div",{className:"space-y-2",children:kn.filter(y=>y.isOpen).map(y=>{const E=y.entryTime.match(/(\d+):(\d+):(\d+)\s*(AM|PM)?/i);let M="-";if(E){const z=new Date,K=new Date;let G=parseInt(E[1]);const $=parseInt(E[2]),ae=parseInt(E[3]),c=E[4];c&&(c.toUpperCase()==="PM"&&G!==12&&(G+=12),c.toUpperCase()==="AM"&&G===12&&(G=0)),K.setHours(G,$,ae,0);const u=z.getTime()-K.getTime();if(u>0){const p=Math.floor(u/6e4),v=Math.floor(p/60),k=p%60;M=v>0?`${v}h ${k}m`:`${k}m`}else M="0m"}return n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-xl p-3 border border-gray-100 dark:border-gray-800","data-testid":`position-card-${y.symbol}`,children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium text-sm",children:y.symbol}),n.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${y.action==="BUY"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:y.action})]}),n.jsx("span",{className:"text-xs text-gray-400",children:M})]}),n.jsxs("div",{className:"flex items-center justify-between text-xs",children:[n.jsxs("div",{className:"text-gray-600 dark:text-gray-400",children:["Qty: ",y.quantity," | Avg: ",xs?"***":`${y.entryPrice.toFixed(2)}`]}),n.jsxs("div",{className:`font-semibold ${y.pnl>=0?"text-green-600":"text-red-600"}`,children:[xs?"***":`${y.pnl.toFixed(0)}`,n.jsxs("span",{className:"text-[10px] ml-1",children:["(",y.pnlPercent>=0?"+":"",y.pnlPercent.toFixed(1),"%)"]})]})]}),n.jsxs("div",{className:"text-[10px] text-gray-400 mt-1",children:["LTP: ",y.currentPrice.toFixed(2),y.slTriggerPrice&&n.jsxs("span",{className:"text-orange-500 ml-2",children:["SL: ",y.slTriggerPrice.toFixed(2)]})]})]},y.id)})})]}),Ts.length>0&&n.jsxs("div",{className:"",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Trade History"}),n.jsx(H,{onClick:Ji,size:"sm",variant:"ghost",className:"h-7 px-2 text-xs text-blue-600 hover:text-blue-700 hover:bg-blue-50 dark:hover:bg-blue-900/20","data-testid":"button-record-all-mobile",children:"Record"})]}),n.jsx("div",{className:"space-y-1 bg-white dark:bg-gray-900/50 rounded-lg p-3",children:[...Ts].reverse().slice(0,10).map(y=>n.jsxs("div",{className:"flex items-center justify-between py-2.5 border-b border-gray-100 dark:border-gray-800 last:border-0",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-medium ${y.action==="BUY"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:y.action==="BUY"?"B":"S"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium",children:y.symbol}),n.jsxs("div",{className:"text-[10px] text-gray-400",children:[y.time," | Qty: ",y.quantity]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-sm font-medium",children:["",y.price.toFixed(2)]}),n.jsx("div",{className:`text-xs ${y.pnl?y.pnl.includes("+")?"text-green-600":"text-red-600":"text-gray-600 dark:text-gray-400"}`,children:y.pnl||"-"})]})]},y.id))})]}),n.jsx("div",{className:"px-4 pb-6",children:n.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-100 dark:border-gray-800",children:[n.jsx("button",{onClick:Ml,className:"text-xs text-gray-400 hover:text-red-500 transition-colors","data-testid":"button-reset-mobile",children:"Reset Account"}),n.jsx("span",{className:"text-xs text-gray-400",children:"Demo mode"})]})})]})]}),n.jsxs("div",{className:"hidden sm:block",children:[n.jsx("div",{className:"sticky top-0 z-10 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800 px-4 py-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"Paper Trading"}),n.jsxs("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${nu==="connected"?"bg-green-500/10 text-green-600 dark:text-green-400":"bg-gray-100 dark:bg-gray-800 text-gray-500"}`,"data-testid":"paper-trading-ws-status",children:[n.jsx("span",{className:`inline-block w-1.5 h-1.5 rounded-full mr-1 ${nu==="connected"?"bg-green-500":"bg-gray-400"}`}),nu==="connected"?"Live":"Offline"]})]}),n.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 dark:text-gray-400",children:[n.jsxs("span",{children:["Capital: ",n.jsxs("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:["",Qo.toLocaleString("en-IN")]})]}),n.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:"|"}),n.jsxs("span",{className:In>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",children:["P&L: ",n.jsx("span",{className:"font-medium","data-testid":"paper-trading-total-pnl",children:xs?"***":(In>=0?"+":"")+""+In.toLocaleString("en-IN",{minimumFractionDigits:0,maximumFractionDigits:0})})]})]})]})}),n.jsxs("div",{className:"p-4 space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Positions:"}),n.jsx("span",{className:"font-medium",children:kn.filter(y=>y.isOpen).length})]}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Trades:"}),n.jsx("span",{className:"font-medium",children:Ts.length})]})]}),n.jsxs("div",{className:"border border-gray-200 dark:border-gray-800 rounded-md p-3",children:[n.jsxs("div",{className:"flex flex-wrap items-end gap-2 justify-end",children:[n.jsxs("div",{className:"flex-1 min-w-[180px] relative",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Zl,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-gray-400"}),n.jsx(Nr,{type:"text",placeholder:"Search instrument...",value:fc,onChange:y=>{const E=y.target.value;if(!E&&cr&&Ur.current.has(cr)){const M=Ur.current.get(cr);M&&M.close(),Ur.current.delete(cr),xa("disconnected")}Gi(E),hi(""),Pi(null),E.length>0?xg(E):Xi([])},className:"h-8 pl-8 text-xs","data-testid":"input-paper-trade-search"})]}),fc&&!cr&&n.jsx("div",{className:"absolute z-[100] left-0 right-0 mt-1 max-h-40 overflow-auto bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg",children:Eo?n.jsxs("div",{className:"px-3 py-2 text-xs text-gray-500 flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}),"Searching..."]}):id.length===0?n.jsx("div",{className:"px-3 py-2 text-xs text-gray-500",children:"No results"}):id.slice(0,6).map((y,E)=>n.jsxs("button",{onClick:()=>{od(y),hi(y.symbol),Gi(y.symbol),en==="STOCK"?To(""):an("1"),Po(y)},className:"w-full text-left px-3 py-1.5 hover:bg-gray-50 dark:hover:bg-gray-800 flex items-center justify-between text-xs","data-testid":`select-stock-${y.symbol}`,children:[n.jsx("span",{className:"font-medium truncate",children:y.symbol}),n.jsx("span",{className:"text-[10px] text-gray-400 ml-2",children:y.exchange})]},`${y.symbol}-${y.exchange}-${E}`))})]}),n.jsx(H,{onClick:()=>{Ii(),cu(!0)},size:"icon",variant:"outline",className:"h-8 w-8","data-testid":"button-option-chain",children:n.jsx(bb,{className:"h-4 w-4"})}),n.jsxs(Ms,{value:en,onValueChange:y=>{const E=y;if(cr&&Ur.current.has(cr)){const M=Ur.current.get(cr);M&&M.close(),Ur.current.delete(cr)}ld(E),hi(""),Gi(""),Xi([]),Pi(null),od(null),To(""),an(""),Vm(""),xa("disconnected")},children:[n.jsx(Ns,{className:"w-24 h-8 text-xs","data-testid":"select-paper-trade-type",children:n.jsx(Os,{})}),n.jsxs(js,{children:[n.jsx(gt,{value:"STOCK",children:"Stock"}),n.jsx(gt,{value:"FUTURES",children:"Futures"}),n.jsx(gt,{value:"OPTIONS",children:"Options"}),n.jsx(gt,{value:"MCX",children:"MCX"})]})]}),en==="STOCK"?n.jsx(Nr,{type:"number",placeholder:"Qty",value:Ti,onChange:y=>To(y.target.value),className:"w-20 h-8 text-xs text-center",min:"1","data-testid":"input-paper-trade-qty"}):n.jsx(Nr,{type:"number",placeholder:"Lots",value:Ks,onChange:y=>an(y.target.value),className:"w-20 h-8 text-xs text-center",min:"1","data-testid":"input-paper-trade-lots"}),n.jsx("div",{className:"w-32 h-8 flex items-center justify-center text-xs font-medium border border-gray-200 dark:border-gray-700 rounded-md bg-gray-50 dark:bg-gray-800/50",children:eu?n.jsx("div",{className:"w-3 h-3 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}):tn?n.jsxs("span",{children:["",tn.toFixed(2)]}):n.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"--"})}),(()=>{const y=en==="STOCK"?Ti:Ks;return n.jsxs("div",{className:"flex gap-2 items-center justify-end",children:[n.jsx(H,{onClick:()=>{Al("BUY"),Il()},disabled:!cr||!y||!tn,size:"sm",className:"h-8 px-4 bg-green-600 hover:bg-green-700 text-white text-xs","data-testid":"button-paper-buy",children:"BUY"}),n.jsx(H,{onClick:()=>{Al("SELL"),Il()},disabled:!cr||!y||!tn,size:"sm",className:"h-8 px-4 bg-red-600 hover:bg-red-700 text-white text-xs","data-testid":"button-paper-sell",children:"SELL"}),n.jsxs("div",{className:"relative",children:[n.jsxs(H,{onClick:()=>cd(!kf),disabled:!cr||!y||!tn,size:"sm",variant:Fa?"default":"outline",className:`h-8 px-3 text-xs ${Fa?"bg-orange-500 hover:bg-orange-600 text-white":""}`,"data-testid":"button-paper-sl",children:["SL ",Fa&&""]}),kf&&n.jsx("div",{className:"fixed z-[9999] top-10 -right-2 mt-1 w-64 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg",children:n.jsxs("div",{className:"p-2.5 space-y-1.5",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] text-gray-500 uppercase",children:"Type"}),n.jsxs(Ms,{value:jr,onValueChange:E=>dd(E),children:[n.jsx(Ns,{className:"h-7 text-xs mt-1",children:n.jsx(Os,{})}),n.jsxs(js,{children:[n.jsx(gt,{value:"price",children:"Price SL"}),n.jsx(gt,{value:"percent",children:"% SL"}),n.jsx(gt,{value:"duration",children:"Duration"}),n.jsx(gt,{value:"high",children:"Candle High"}),n.jsx(gt,{value:"low",children:"Candle Low"})]})]})]}),(jr==="high"||jr==="low")&&n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] text-gray-500 uppercase",children:"Timeframe"}),n.jsxs(Ms,{value:$s,onValueChange:E=>_l(E),children:[n.jsx(Ns,{className:"h-6 text-xs mt-0",children:n.jsx(Os,{})}),n.jsxs(js,{children:[n.jsx(gt,{value:"1m",children:"1 Minute"}),n.jsx(gt,{value:"5m",children:"5 Minutes"}),n.jsx(gt,{value:"15m",children:"15 Minutes"}),n.jsx(gt,{value:"30m",children:"30 Minutes"}),n.jsx(gt,{value:"1h",children:"1 Hour"}),n.jsx(gt,{value:"4h",children:"4 Hours"}),n.jsx(gt,{value:"1d",children:"1 Day"})]})]})]}),jr==="duration"&&n.jsxs("div",{className:"flex gap-1.5",children:[n.jsx(Nr,{type:"number",placeholder:"Duration",value:rs,onChange:E=>Qi(E.target.value),className:"h-6 text-xs flex-1","data-testid":"input-paper-sl-duration"}),n.jsxs(Ms,{value:fi,onValueChange:E=>tu(E),children:[n.jsx(Ns,{className:"h-6 text-xs w-14",children:n.jsx(Os,{})}),n.jsxs(js,{children:[n.jsx(gt,{value:"min",children:"Min"}),n.jsx(gt,{value:"hr",children:"Hr"})]})]})]}),jr!=="high"&&jr!=="low"&&jr!=="duration"&&n.jsx(Nr,{type:"number",placeholder:jr==="price"?"Price":"%",value:rs,onChange:E=>Qi(E.target.value),className:"h-6 text-xs","data-testid":"input-paper-sl-value"}),n.jsx(H,{onClick:()=>{(rs||jr==="high"||jr==="low")&&(ru(!0),yr({title:"Stop Loss Set",description:jr==="price"?`SL at ${rs}`:jr==="percent"?`SL at ${rs}% loss`:jr==="duration"?`SL after ${rs} ${fi}`:`SL at ${$s} candle ${jr}`})),cd(!1)},size:"sm",className:"w-full h-6 text-xs bg-gray-600 hover:bg-gray-700 text-white","data-testid":"button-set-paper-sl",children:"Set SL"})]})})]})]})})()]}),cr&&tn&&(()=>{const y=en==="STOCK"?Ti:Ks;if(!y)return null;let E=parseInt(y);if(en!=="STOCK"){const M=fh(cr,en);E=E*M}return n.jsxs("div",{className:"mt-2 text-[10px] text-gray-500 dark:text-gray-400",children:["Value: ",(E*tn).toLocaleString("en-IN")]})})()]}),kn.filter(y=>y.isOpen).length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"text-[10px] uppercase tracking-wider text-gray-500 dark:text-gray-400 mb-2 flex items-center justify-between gap-2",children:[n.jsxs("div",{className:"flex items-center gap-1.5",children:["Open Positions",nu==="connected"&&n.jsx("span",{className:"w-1 h-1 bg-green-500 rounded-full"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(H,{onClick:()=>Qd(!xs),size:"icon",variant:"ghost",className:"h-5 w-5","data-testid":"button-toggle-position-visibility",title:xs?"Show details":"Hide details",children:xs?n.jsx(o0,{className:"w-4 h-4"}):n.jsx(Au,{className:"w-4 h-4"})}),n.jsx(H,{onClick:Jo,size:"sm",variant:"outline",className:"h-5 px-2 text-[10px] text-red-500 border-red-300 hover:bg-red-50 hover:text-red-600 dark:border-red-700 dark:hover:bg-red-900/20","data-testid":"button-exit-all-positions",children:"Exit All"})]})]}),n.jsx("div",{className:"border border-gray-200 dark:border-gray-800 rounded-md overflow-x-auto",children:n.jsxs("table",{className:"w-full text-[11px]",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-800/50 text-gray-500 dark:text-gray-400",children:[n.jsx("th",{className:"px-2 py-1.5 text-left font-medium",children:"Symbol"}),n.jsx("th",{className:"px-2 py-1.5 text-center font-medium",children:"Order"}),n.jsx("th",{className:"px-2 py-1.5 text-right font-medium",children:"Qty"}),n.jsx("th",{className:"px-2 py-1.5 text-right font-medium",children:"Avg"}),n.jsx("th",{className:"px-2 py-1.5 text-right font-medium",children:"LTP"}),n.jsx("th",{className:"px-2 py-1.5 text-right font-medium",children:"SL"}),n.jsx("th",{className:"px-2 py-1.5 text-right font-medium",children:"P&L"}),n.jsx("th",{className:"px-2 py-1.5 text-right font-medium",children:"%"})]})}),n.jsx("tbody",{children:kn.filter(y=>y.isOpen).map(y=>n.jsxs("tr",{className:"border-t border-gray-100 dark:border-gray-800","data-testid":`position-row-${y.symbol}`,children:[n.jsxs("td",{className:"px-2 py-1.5 font-medium flex items-center gap-2",children:[n.jsx("span",{children:y.symbol}),n.jsx("button",{onClick:()=>Zo(y.id),className:"h-5 w-5 text-red-500 hover:text-red-600 hover:opacity-80 transition-all","data-testid":"button-exit-desktop-position",title:"Exit position",children:n.jsx(Wr,{className:"w-3.5 h-3.5"})})]}),n.jsx("td",{className:"px-2 py-1.5 text-center",children:n.jsx("span",{className:`text-[10px] ${y.action==="BUY"?"text-green-600":"text-red-600"}`,children:y.action})}),n.jsx("td",{className:"px-2 py-1.5 text-right",children:y.quantity}),n.jsx("td",{className:"px-2 py-1.5 text-right text-gray-500",children:xs?"***":y.entryPrice.toFixed(2)}),n.jsx("td",{className:"px-2 py-1.5 text-right",children:y.currentPrice.toFixed(2)}),n.jsx("td",{className:"px-2 py-1.5 text-right text-orange-500 text-[10px] font-medium",children:y.slTriggerPrice?`${y.slTriggerPrice.toFixed(2)}`:"-"}),n.jsx("td",{className:`px-2 py-1.5 text-right font-medium ${y.pnl>=0?"text-green-600":"text-red-600"}`,children:xs?"***":`${y.pnl.toFixed(0)}`}),n.jsxs("td",{className:`px-2 py-1.5 text-right text-[10px] ${y.pnlPercent>=0?"text-green-600":"text-red-600"}`,children:[y.pnlPercent>=0?"+":"",y.pnlPercent.toFixed(2),"%"]})]},y.id))})]})})]}),Ts.length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"text-[10px] uppercase tracking-wider text-gray-500 dark:text-gray-400 mb-2 flex items-center justify-between gap-2",children:[n.jsx("div",{children:"History"}),n.jsx(H,{onClick:Ji,size:"sm",variant:"outline",className:"h-5 px-2 text-[10px] text-blue-600 border-blue-300 hover:bg-blue-50 hover:text-blue-700 dark:border-blue-700 dark:hover:bg-blue-900/20","data-testid":"button-record-all-trades",children:"Record"})]}),n.jsx("div",{className:"border border-gray-200 dark:border-gray-800 rounded-md overflow-x-auto max-h-40 overflow-y-auto custom-thin-scrollbar",children:n.jsxs("table",{className:"w-full text-[11px]",children:[n.jsx("thead",{className:"sticky top-0",children:n.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-800/50 text-gray-500 dark:text-gray-400",children:[n.jsx("th",{className:"px-2 py-1.5 text-left font-medium",children:"Time"}),n.jsx("th",{className:"px-2 py-1.5 text-center font-medium",children:"Order"}),n.jsx("th",{className:"px-2 py-1.5 text-left font-medium",children:"Symbol"}),n.jsx("th",{className:"px-2 py-1.5 text-right font-medium",children:"Qty"}),n.jsx("th",{className:"px-2 py-1.5 text-right font-medium",children:"Price"}),n.jsx("th",{className:"px-2 py-1.5 text-right font-medium",children:"P&L"})]})}),n.jsx("tbody",{children:[...Ts].reverse().map(y=>n.jsxs("tr",{className:"border-t border-gray-100 dark:border-gray-800",children:[n.jsx("td",{className:"px-2 py-1.5 text-gray-400",children:y.time}),n.jsx("td",{className:"px-2 py-1.5 text-center",children:n.jsx("span",{className:`text-[10px] font-medium px-1.5 py-0.5 rounded ${y.action==="BUY"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:y.action})}),n.jsx("td",{className:"px-2 py-1.5 font-medium",children:y.symbol}),n.jsx("td",{className:"px-2 py-1.5 text-right",children:y.quantity}),n.jsxs("td",{className:"px-2 py-1.5 text-right",children:["",y.price.toFixed(2)]}),n.jsx("td",{className:`px-2 py-1.5 text-right font-medium ${y.pnl?y.pnl.includes("+")?"text-green-600":"text-red-600":"text-gray-600 dark:text-gray-400"}`,children:y.pnl||"-"})]},y.id))})]})})]}),n.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100 dark:border-gray-800",children:[n.jsx("button",{onClick:Ml,className:"text-[10px] text-gray-400 hover:text-red-500 transition-colors","data-testid":"button-reset-paper-trading",children:"Reset Account"}),n.jsx("span",{className:"text-[10px] text-gray-400",children:"Demo mode - no real trades"})]})]})]})]})}),n.jsx(bn,{open:kv,onOpenChange:Xd,children:n.jsxs(pn,{className:"max-w-sm",children:[n.jsx(Zn,{className:"space-y-2",children:wn!=null&&wn.error?n.jsxs(n.Fragment,{children:[n.jsx(Xn,{className:"text-red-600",children:"Save Failed"}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:wn.errorMessage})]}):n.jsxs(n.Fragment,{children:[n.jsx(Xn,{className:"text-green-600",children:"Saved Successfully"}),n.jsxs("div",{className:"space-y-2 text-sm mt-4",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Date:"}),n.jsx("span",{className:"font-medium",children:wn==null?void 0:wn.formattedDate})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Saved to:"}),n.jsx("span",{className:"font-medium",children:wn==null?void 0:wn.saveLocation})]}),n.jsxs("div",{className:"border-t pt-2 mt-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Trades:"}),n.jsx("span",{children:wn==null?void 0:wn.trades})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Notes:"}),n.jsx("span",{children:wn==null?void 0:wn.notes})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Tags:"}),n.jsx("span",{children:wn==null?void 0:wn.tags})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Images:"}),n.jsx("span",{children:wn==null?void 0:wn.images})]}),n.jsxs("div",{className:"flex justify-between font-semibold",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Net P&L:"}),n.jsxs("span",{children:["",wn==null?void 0:wn.netPnL]})]})]})]})]})}),n.jsx("div",{className:"flex justify-center gap-3 mt-4",children:n.jsx(H,{onClick:()=>Xd(!1),variant:wn!=null&&wn.error?"outline":"default",children:"OK"})})]})}),n.jsx(bn,{open:Je,onOpenChange:Q,children:n.jsxs(pn,{className:"max-w-sm",children:[n.jsx(Zn,{children:n.jsx(Xn,{className:"text-center",children:"Enter Passcode"})}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"text-center text-sm text-muted-foreground",children:"This section is protected. Please enter the passcode to continue."}),n.jsx("div",{className:"flex justify-center",children:n.jsx(Nr,{type:"password",placeholder:"Enter 4-digit passcode",value:tt,onChange:y=>it(y.target.value),className:"w-40 text-center text-lg tracking-widest",maxLength:4,onKeyDown:y=>{y.key==="Enter"&&ar()},autoFocus:!0,"data-testid":"input-passcode"})}),n.jsxs("div",{className:"flex justify-center gap-3",children:[n.jsx(H,{variant:"outline",onClick:Cr,"data-testid":"button-cancel-passcode",children:"Cancel"}),n.jsx(H,{onClick:ar,"data-testid":"button-submit-passcode",children:"Submit"})]})]})]})}),n.jsx(bn,{open:gh,onOpenChange:y=>{cu(y),y&&Ii(_o)},children:n.jsxs(pn,{className:"w-full max-w-2xl md:max-w-2xl p-0 md:p-0 bg-white dark:bg-gray-900 rounded-lg md:rounded-lg border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"block border-b border-gray-200 dark:border-gray-700 px-4 py-2",children:[n.jsx("div",{className:"flex items-center justify-center mb-2",children:n.jsxs("span",{className:"text-xs font-semibold text-green-600 dark:text-green-400",children:["Spot: ",($v=(Vr==null?void 0:Vr.spotPrice)||0)==null?void 0:$v.toLocaleString()]})}),n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsxs(Ms,{value:_o,onValueChange:y=>{Tf(y),du(""),xh(null),setTimeout(()=>Ii(y),0)},children:[n.jsx(Ns,{className:"px-2 py-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded text-gray-900 dark:text-white text-xs w-auto","data-testid":"select-option-index-desktop",children:n.jsx(Os,{})}),n.jsxs(js,{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg",children:[n.jsx(gt,{value:"NIFTY",children:"NIFTY"}),n.jsx(gt,{value:"BANKNIFTY",children:"BANKNIFTY"}),n.jsx(gt,{value:"SENSEX",children:"SENSEX"})]})]}),n.jsxs(Ms,{value:ro||((gx=vc()[0])==null?void 0:gx.value)||"",onValueChange:y=>{du(y),Ii(_o,y)},children:[n.jsx(Ns,{className:"px-2 py-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded text-gray-900 dark:text-white text-xs w-auto","data-testid":"select-option-expiry-date-desktop",children:n.jsx(Os,{})}),n.jsx(js,{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg",children:vc().map(y=>n.jsx(gt,{value:y.value,children:y.label},y.value))})]})]})]}),n.jsxs("div",{className:"block px-6 py-4 overflow-y-auto max-h-96",children:[yh&&n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Loading ",_o," options..."]})]}),!yh&&Vr&&(()=>{const y=()=>{const se=(Vr==null?void 0:Vr.calls)||[],J=(Vr==null?void 0:Vr.puts)||[],xe=Pf(Wm()),ye=Af(se,xe),Pe=Af(J,xe);return{calls:ye,puts:Pe}},{calls:E,puts:M}=y(),z=(Vr==null?void 0:Vr.spotPrice)||0,K=new Set;E.forEach(se=>K.add(se.strikePrice)),M.forEach(se=>K.add(se.strikePrice));const G=Array.from(K);let $=null;G.length>0&&($=G.reduce((se,J)=>Math.abs(J-z)<Math.abs(se-z)?J:se));const ae=(()=>{const se=E.filter(ye=>ye.strikePrice<z&&ye.strikePrice!==$).reverse().slice(0,10).reverse(),J=E.filter(ye=>ye.strikePrice>z&&ye.strikePrice!==$).slice(0,10),xe=$?E.filter(ye=>ye.strikePrice===$).slice(0,1):[];return[...se,...xe,...J].sort((ye,Pe)=>ye.strikePrice-Pe.strikePrice)})(),c=(()=>{const se=M.filter(ye=>ye.strikePrice>z&&ye.strikePrice!==$).slice(0,10),J=M.filter(ye=>ye.strikePrice<z&&ye.strikePrice!==$).reverse().slice(0,10).reverse(),xe=$?M.filter(ye=>ye.strikePrice===$).slice(0,1):[];return[...J,...xe,...se].sort((ye,Pe)=>ye.strikePrice-Pe.strikePrice)})(),u=Math.max(ae.length,c.length),p=(se,J)=>{const xe=new Set;return E.forEach(Pe=>xe.add(Pe.strikePrice)),M.forEach(Pe=>xe.add(Pe.strikePrice)),Array.from(xe).length===0?"OTM":se===$?"ATM":J?se<z?"ITM":"OTM":se>z?"ITM":"OTM"},v=se=>({NIFTY:"NFO",BANKNIFTY:"NFO",SENSEX:"BFO",MIDCPNIFTY:"NFO"})[se]||"NFO",k=async se=>{const{symbol:J,ltp:xe,token:ye,exchange:Pe}=se;if(hi(J),Gi(J),ld("OPTIONS"),an("1"),xe&&xe>0){Pi(xe),Ga(!1);const De={symbol:J,exchange:Pe||v(_o),token:ye||"",name:J};od(De),Po(De)}cu(!1)},_=(se,J)=>{const xe=p(se,J);return xe==="ATM"?"px-2 py-1 bg-yellow-100 dark:bg-yellow-900/20 rounded text-center cursor-pointer hover:bg-yellow-200 dark:hover:bg-yellow-900/40 transition-colors":xe==="ITM"&&J?"px-2 py-1 bg-green-100 dark:bg-green-900/20 rounded text-center cursor-pointer hover:bg-green-200 dark:hover:bg-green-900/40 transition-colors":xe==="ITM"?"px-2 py-1 bg-red-100 dark:bg-red-900/20 rounded text-center cursor-pointer hover:bg-red-200 dark:hover:bg-red-900/40 transition-colors":"px-2 py-1 bg-gray-100 dark:bg-gray-800/40 rounded text-center cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-800/60 transition-colors"},F=(se,J)=>{const xe=p(se,J);return xe==="ATM"?"text-xs text-yellow-700 dark:text-yellow-400 mt-0.5":xe==="ITM"&&J?"text-xs text-green-700 dark:text-green-400 mt-0.5":xe==="ITM"?"text-xs text-red-700 dark:text-red-400 mt-0.5":"text-xs text-gray-600 dark:text-gray-500 mt-0.5"};return u===0?n.jsx("div",{className:"text-center py-8",children:n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["No options available for ",_o," on ",ro]})}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-xs",children:[n.jsx("thead",{className:"sticky top-0 bg-gray-100 dark:bg-gray-800 border-b border-gray-300 dark:border-gray-700",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left py-2 px-3 font-semibold text-gray-900 dark:text-white",children:"CE"}),n.jsx("th",{className:"text-center py-2 px-2 font-semibold text-gray-900 dark:text-white",children:"Strike"}),n.jsx("th",{className:"text-right py-2 px-3 font-semibold text-gray-900 dark:text-white",children:"PE"})]})}),n.jsx("tbody",{children:Array.from({length:u}).map((se,J)=>{var xe,ye,Pe,De;return n.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800",children:[n.jsx("td",{className:"py-2 px-3",children:ae[J]?n.jsx("div",{onClick:()=>k(ae[J]),className:_(ae[J].strikePrice,!0),"data-testid":`option-call-${ae[J].strikePrice}`,children:n.jsxs("div",{className:F(ae[J].strikePrice,!0),children:["",((xe=ae[J].ltp)==null?void 0:xe.toFixed(2))||0]})}):null}),n.jsx("td",{className:"py-2 px-2 text-center font-medium text-gray-700 dark:text-gray-300",children:((ye=ae[J])==null?void 0:ye.strikePrice)||((Pe=c[J])==null?void 0:Pe.strikePrice)||"-"}),n.jsx("td",{className:"py-2 px-3 text-right",children:c[J]?n.jsx("div",{onClick:()=>k(c[J]),className:_(c[J].strikePrice,!1),"data-testid":`option-put-${c[J].strikePrice}`,children:n.jsxs("div",{className:F(c[J].strikePrice,!1),children:["",((De=c[J].ltp)==null?void 0:De.toFixed(2))||0]})}):null})]},J)})})]})})})()]})]})}),n.jsx(bn,{open:An,onOpenChange:br,children:n.jsx(pn,{className:"max-w-md",children:n.jsxs("div",{className:"space-y-6 py-6",children:[n.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",children:[n.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-full flex items-center justify-center animate-pulse",children:n.jsx(Jl,{className:"h-10 w-10 text-white"})}),n.jsx(Zn,{className:"space-y-2",children:n.jsx(Xn,{className:"text-center text-2xl bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent font-bold",children:"Advanced Trading Master"})}),n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("p",{className:"text-lg font-semibold text-foreground",children:"Coming Soon!"}),n.jsx("p",{className:"text-sm text-muted-foreground max-w-xs mx-auto",children:"We're working on bringing you advanced trading features and analytics."})]})]}),n.jsx("div",{className:"flex justify-center",children:n.jsx(H,{onClick:()=>br(!1),className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700","data-testid":"button-close-trading-master-coming-soon",children:"Got It"})})]})})}),n.jsx(bn,{open:j,onOpenChange:N,children:n.jsxs(pn,{className:"max-w-5xl h-[85vh] p-0",children:[n.jsx(Zn,{className:"p-6 pb-4 border-b border-gray-200 dark:border-gray-700",children:n.jsxs(Xn,{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:n.jsx(Pu,{className:"h-5 w-5 text-white"})}),n.jsx("span",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent font-bold",children:"Trading Journal AI Assistant"})]})}),n.jsx("div",{className:"flex-1 h-full overflow-hidden",children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 h-full",children:[n.jsx("div",{className:"lg:col-span-2 p-6 overflow-y-auto",children:n.jsx("div",{className:"prose prose-sm max-w-none dark:prose-invert",children:w!=null&&w.report?n.jsx("div",{className:"whitespace-pre-wrap text-sm leading-relaxed",children:w.report}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading journal analysis..."})]})})}),n.jsx("div",{className:"lg:col-span-1 bg-gray-50 dark:bg-gray-800 p-6 border-l border-gray-200 dark:border-gray-700",children:n.jsxs("div",{className:"h-full flex flex-col",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Performance Trend"}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[n.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full"}),n.jsx("span",{children:"Not Profitable"})]})]}),n.jsx("div",{className:"flex-1 min-h-[250px]",children:w!=null&&w.performanceData&&w.performanceData.length>0?n.jsx(yi,{width:"100%",height:"100%",children:n.jsxs(Bg,{data:w.performanceData,margin:{top:20,right:20,left:20,bottom:20},children:[n.jsx("defs",{children:n.jsxs("linearGradient",{id:"performanceGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"0%",stopColor:"rgb(107, 114, 128)",stopOpacity:.4}),n.jsx("stop",{offset:"100%",stopColor:"rgb(107, 114, 128)",stopOpacity:.1})]})}),n.jsx(Sa,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fontSize:11,fill:"#6B7280"}}),n.jsx(ma,{axisLine:!1,tickLine:!1,tick:{fontSize:11,fill:"#6B7280"},tickFormatter:y=>`${y}`}),n.jsx(zs,{contentStyle:{backgroundColor:"rgba(17, 24, 39, 0.95)",border:"none",borderRadius:"8px",color:"white",fontSize:"12px"},formatter:(y,E)=>[`${parseFloat(y).toFixed(2)}`,"P&L"],labelFormatter:y=>`Day: ${y}`}),n.jsx(ec,{type:"monotone",dataKey:"value",stroke:"rgb(107, 114, 128)",strokeWidth:2,fill:"url(#performanceGradient)"})]})}):n.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 dark:text-gray-400",children:n.jsxs("div",{className:"text-center",children:[n.jsx(ia,{className:"h-12 w-12 mx-auto mb-3 opacity-40"}),n.jsx("p",{className:"text-sm",children:"No performance data available"})]})})})]})})]})})]})}),a==="journal"&&n.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 z-50 pb-4 px-6 pointer-events-none",children:n.jsx("div",{className:"max-w-xs mx-auto bg-white/90 dark:bg-gray-900/90 backdrop-blur-md rounded-full shadow-lg border border-gray-200/50 dark:border-gray-700/50 pointer-events-auto",children:n.jsxs("div",{className:"flex items-center justify-around px-1.5 py-1.5",children:[n.jsx("button",{onClick:()=>V("home"),className:`flex items-center justify-center flex-1 rounded-full px-4 py-2 transition-all duration-200 ${B==="home"?"bg-gray-900 dark:bg-white text-white dark:text-gray-900 shadow-md":"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,"data-testid":"mobile-tab-home",children:n.jsx(dj,{className:`h-5 w-5 ${B==="home"?"fill-current":""}`})}),n.jsx("button",{onClick:()=>V("insight"),className:`flex items-center justify-center flex-1 rounded-full px-4 py-2 transition-all duration-200 ${B==="insight"?"bg-gray-900 dark:bg-white text-white dark:text-gray-900 shadow-md":"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,"data-testid":"mobile-tab-insight",children:n.jsxs("svg",{viewBox:"0 0 24 16",className:"h-5 w-6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[n.jsx("defs",{children:n.jsxs("linearGradient",{id:`navAreaGradient-${B==="insight"?"active":Ai.trend}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"0%",stopColor:B==="insight"?"#d1d5db":Ai.trend==="up"?"#22c55e":Ai.trend==="down"?"#ef4444":"#9ca3af",stopOpacity:"0.4"}),n.jsx("stop",{offset:"100%",stopColor:B==="insight"?"#d1d5db":Ai.trend==="up"?"#22c55e":Ai.trend==="down"?"#ef4444":"#9ca3af",stopOpacity:"0.05"})]})}),n.jsx("polygon",{points:`0,14 ${Ai.points.split(" ").map((y,E)=>{const[M,z]=y.split(",");return`${parseFloat(M)/40*22+1},${parseFloat(z)/24*12+1}`}).join(" ")} 22,14`,fill:`url(#navAreaGradient-${B==="insight"?"active":Ai.trend})`}),n.jsx("polyline",{points:Ai.points.split(" ").map(y=>{const[E,M]=y.split(",");return`${parseFloat(E)/40*22+1},${parseFloat(M)/24*12+1}`}).join(" "),stroke:B==="insight"?"#ffffff":Ai.trend==="up"?"#22c55e":Ai.trend==="down"?"#ef4444":"#9ca3af",strokeWidth:B==="insight"?"2":"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]})}),n.jsx("button",{onClick:()=>V("paper-trade"),className:`flex items-center justify-center flex-1 rounded-full px-4 py-2 transition-all duration-200 ${B==="paper-trade"?"bg-gray-900 dark:bg-white text-white dark:text-gray-900 shadow-md":"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,"data-testid":"mobile-tab-paper-trade",children:n.jsx(Gn,{className:`h-5 w-5 ${B==="paper-trade"?"fill-current":""}`})}),n.jsx("button",{onClick:()=>V("ranking"),className:`flex items-center justify-center flex-1 rounded-full px-4 py-2 transition-all duration-200 ${B==="ranking"?"bg-gray-900 dark:bg-white text-white dark:text-gray-900 shadow-md":"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,"data-testid":"mobile-tab-ranking",children:n.jsx(Ac,{className:`h-5 w-5 ${B==="ranking"?"fill-current":""}`})})]})})}),a==="journal"&&B==="paper-trade"&&n.jsxs("div",{className:"md:hidden fixed inset-0 z-40 bg-gradient-to-b from-gray-50 to-white dark:from-gray-900 dark:to-gray-950 overflow-y-auto pb-20 flex flex-col",children:[n.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 px-5 pt-8 pb-6 relative",children:[n.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"P&L"}),n.jsx("div",{className:`text-3xl font-bold mb-2 ${In>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,"data-testid":"paper-trading-pnl-mobile",children:xs?"***":`${In.toLocaleString("en-IN",{minimumFractionDigits:0,maximumFractionDigits:0})}`}),n.jsxs("div",{className:"text-sm flex items-center gap-1 text-gray-400",children:[n.jsx("span",{children:xs?"***":`${Qo.toLocaleString("en-IN")}`}),n.jsx("span",{className:"text-gray-500 text-xs",children:"Total Capital"})]}),n.jsxs("div",{className:"flex items-center gap-4 mt-4 text-xs",children:[n.jsxs("div",{className:"flex items-center gap-1.5 text-gray-400",children:[n.jsx("span",{children:"Positions:"}),n.jsx("span",{className:"text-white font-medium",children:kn.filter(y=>y.isOpen).length})]}),n.jsxs("div",{className:"flex items-center gap-1.5 text-gray-400",children:[n.jsx("span",{children:"Trades:"}),n.jsx("span",{className:"text-white font-medium",children:Ts.length})]}),n.jsx(H,{onClick:()=>Qd(!xs),size:"icon",variant:"ghost",className:"h-6 w-6 ml-auto text-gray-400 hover:text-white","data-testid":"button-toggle-visibility-mobile",children:xs?n.jsx(o0,{className:"w-4 h-4"}):n.jsx(Au,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto",children:[n.jsx("div",{className:"px-4 py-4",children:n.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl p-4 border border-gray-100 dark:border-gray-800",children:[n.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3",children:"New Trade"}),n.jsxs("div",{className:"relative mb-3",children:[n.jsx(Zl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),n.jsx(Nr,{placeholder:"Search instrument...",value:fc,onChange:y=>{const E=y.target.value;if(!E&&cr&&Ur.current.has(cr)){const M=Ur.current.get(cr);M&&M.close(),Ur.current.delete(cr),xa("disconnected")}Gi(E),hi(""),Pi(null),E.length>0?xg(E):Xi([])},className:"h-10 pl-10 text-sm rounded-lg bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700","data-testid":"input-paper-trade-search-mobile-tab"}),fc&&!cr&&n.jsx("div",{className:"absolute z-[100] left-0 right-0 mt-1 max-h-48 overflow-auto bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg",children:Eo?n.jsxs("div",{className:"px-4 py-3 text-sm text-gray-500 flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}),"Searching..."]}):id.length===0?n.jsx("div",{className:"px-4 py-3 text-sm text-gray-500",children:"No results found"}):id.slice(0,6).map((y,E)=>n.jsxs("button",{onClick:()=>{od(y),hi(y.symbol),Gi(y.symbol),en==="STOCK"?To(""):an("1"),Po(y)},className:"w-full text-left px-4 py-2.5 hover:bg-gray-50 dark:hover:bg-gray-800 flex items-center justify-between text-sm border-b border-gray-100 dark:border-gray-800 last:border-0","data-testid":`select-stock-mobile-tab-${y.symbol}`,children:[n.jsx("span",{className:"font-medium",children:y.symbol}),n.jsx("span",{className:"text-xs text-gray-400 bg-gray-100 dark:bg-gray-800 px-2 py-0.5 rounded",children:y.exchange})]},`${y.symbol}-${y.exchange}-${E}`))})]}),n.jsxs("div",{className:"flex gap-2 mb-3",children:[n.jsxs(Ms,{value:en,onValueChange:y=>{const E=y;if(cr&&Ur.current.has(cr)){const M=Ur.current.get(cr);M&&M.close(),Ur.current.delete(cr)}ld(E),hi(""),Gi(""),Xi([]),Pi(null),od(null),To(""),an(""),Vm(""),xa("disconnected")},children:[n.jsx(Ns,{className:"flex-1 h-10 text-sm rounded-lg","data-testid":"select-paper-trade-type-mobile-tab",children:n.jsx(Os,{})}),n.jsxs(js,{children:[n.jsx(gt,{value:"STOCK",children:"Stock"}),n.jsx(gt,{value:"FUTURES",children:"Futures"}),n.jsx(gt,{value:"OPTIONS",children:"Options"}),n.jsx(gt,{value:"MCX",children:"MCX"})]})]}),n.jsx(H,{onClick:()=>{Ii(),cu(!0)},size:"icon",variant:"outline",className:"h-10 w-10 rounded-lg","data-testid":"button-option-chain-mobile-tab",children:n.jsx(bb,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"flex gap-2 mb-4",children:[en==="STOCK"?n.jsx(Nr,{type:"number",placeholder:"Quantity",value:Ti,onChange:y=>To(y.target.value),className:"flex-1 h-10 text-sm text-center rounded-lg",min:"1","data-testid":"input-paper-trade-qty-mobile-tab"}):n.jsx(Nr,{type:"number",placeholder:"Lots",value:Ks,onChange:y=>an(y.target.value),className:"flex-1 h-10 text-sm text-center rounded-lg",min:"1","data-testid":"input-paper-trade-lots-mobile-tab"}),n.jsx("div",{className:"flex-1 h-10 flex items-center justify-center text-sm font-medium border border-gray-200 dark:border-gray-700 rounded-lg bg-gray-100 dark:bg-gray-800",children:eu?n.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}):tn?n.jsxs("span",{children:["",tn.toFixed(2)]}):n.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Price"})})]}),n.jsx("div",{className:"flex gap-2 mb-3",children:n.jsxs("div",{className:"relative flex-1",children:[n.jsxs(H,{onClick:()=>pc(!mc),disabled:!cr||!(en==="STOCK"?Ti:Ks)||!tn,variant:Fa?"default":"outline",className:`w-full h-10 rounded-lg ${Fa?"bg-orange-500 hover:bg-orange-600 text-white":""}`,"data-testid":"button-paper-sl-mobile-tab",children:[n.jsx(Ax,{className:"h-4 w-4 mr-2"}),Fa?`SL: ${F1}`:"Set SL"]}),mc&&n.jsx("div",{className:"absolute z-50 bottom-1/2 transform translate-y-1/2 left-1/2 -translate-x-1/2 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl shadow-lg w-64",children:n.jsxs("div",{className:"p-4 space-y-3",children:[n.jsx("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Stop Loss Configuration"}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] text-gray-500 uppercase",children:"Type"}),n.jsxs(Ms,{value:jr,onValueChange:y=>dd(y),children:[n.jsx(Ns,{className:"h-9 text-sm mt-1",children:n.jsx(Os,{})}),n.jsxs(js,{children:[n.jsx(gt,{value:"price",children:"Price SL"}),n.jsx(gt,{value:"percent",children:"% SL"}),n.jsx(gt,{value:"duration",children:"Duration"}),n.jsx(gt,{value:"high",children:"Candle High"}),n.jsx(gt,{value:"low",children:"Candle Low"})]})]})]}),(jr==="high"||jr==="low")&&n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] text-gray-500 uppercase",children:"Timeframe"}),n.jsxs(Ms,{value:$s,onValueChange:y=>_l(y),children:[n.jsx(Ns,{className:"h-9 text-sm mt-1",children:n.jsx(Os,{})}),n.jsxs(js,{children:[n.jsx(gt,{value:"1m",children:"1 Minute"}),n.jsx(gt,{value:"5m",children:"5 Minutes"}),n.jsx(gt,{value:"15m",children:"15 Minutes"}),n.jsx(gt,{value:"30m",children:"30 Minutes"}),n.jsx(gt,{value:"1h",children:"1 Hour"}),n.jsx(gt,{value:"4h",children:"4 Hours"}),n.jsx(gt,{value:"1d",children:"1 Day"})]})]})]}),jr==="duration"&&n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] text-gray-500 uppercase",children:"Duration Unit"}),n.jsxs(Ms,{value:fi,onValueChange:y=>tu(y),children:[n.jsx(Ns,{className:"h-9 text-sm mt-1",children:n.jsx(Os,{})}),n.jsxs(js,{children:[n.jsx(gt,{value:"min",children:"Minutes"}),n.jsx(gt,{value:"hr",children:"Hours"})]})]})]}),jr!=="high"&&jr!=="low"&&n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] text-gray-500 uppercase",children:"Value"}),n.jsx(Nr,{type:"number",placeholder:jr==="price"?"Price":"%",value:rs,onChange:y=>Qi(y.target.value),className:"h-9 text-sm mt-1","data-testid":"input-paper-sl-value-mobile-tab"})]}),n.jsxs("div",{className:"flex gap-2 pt-1",children:[n.jsx(H,{onClick:()=>{ru(!1),Qi(""),Vm(""),pc(!1)},size:"sm",variant:"outline",className:"flex-1 h-9","data-testid":"button-clear-sl-mobile-tab",children:"Clear"}),n.jsx(H,{onClick:()=>{(rs||jr==="high"||jr==="low")&&(ru(!0),Vm(rs),yr({title:"Stop Loss Set",description:jr==="price"?`SL at ${rs}`:jr==="percent"?`SL at ${rs}% loss`:jr==="duration"?`SL after ${rs} ${fi}`:`SL at ${$s} candle ${jr}`})),pc(!1)},size:"sm",className:"flex-1 h-9 bg-orange-500 hover:bg-orange-600 text-white","data-testid":"button-set-sl-mobile-tab",children:"Set SL"})]})]})})]})}),n.jsx("div",{className:"flex gap-3",children:(()=>{const y=en==="STOCK"?Ti:Ks;return n.jsxs(n.Fragment,{children:[n.jsx(H,{onClick:()=>{Al("BUY"),Il()},disabled:!cr||!y||!tn,className:"flex-1 h-12 rounded-xl bg-green-600 hover:bg-green-700 text-white font-semibold text-base","data-testid":"button-paper-buy-mobile-tab",children:"BUY"}),n.jsx(H,{onClick:()=>{Al("SELL"),Il()},disabled:!cr||!y||!tn,className:"flex-1 h-12 rounded-xl bg-red-600 hover:bg-red-700 text-white font-semibold text-base","data-testid":"button-paper-sell-mobile-tab",children:"SELL"})]})})()})]})}),(kn.filter(y=>y.isOpen).length>0||Ts.length>0)&&n.jsxs("div",{className:"",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx(H,{onClick:()=>Dr(!dr),size:"icon",variant:"ghost",className:"h-7 w-7 text-gray-400 hover:text-white","data-testid":"button-toggle-mobile-position-history",children:n.jsx(Du,{className:"h-4 w-4"})}),n.jsxs("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider flex items-center gap-2",children:[dr?"Trade History":"Open Positions",!dr&&nu==="connected"&&n.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"})]}),n.jsx(H,{onClick:dr?Ji:Jo,size:"sm",variant:"ghost",className:`h-7 px-2 text-xs ${dr?"text-blue-400 hover:text-blue-500":"text-red-500 hover:text-red-600"}`,"data-testid":dr?"button-record-all-mobile-tab":"button-exit-all-mobile-tab",children:dr?"Record":"Exit All"})]}),!dr&&kn.filter(y=>y.isOpen).length>0&&n.jsx("div",{className:"space-y-2 px-4 divide-gray-200 dark:divide-gray-800",children:kn.filter(y=>y.isOpen).map(y=>n.jsxs("div",{className:"relative bg-red-500 rounded-xl border border-gray-200 dark:border-gray-800 overflow-hidden select-none cursor-grab active:cursor-grabbing h-auto","data-testid":`position-card-tab-${y.symbol}`,onMouseDown:E=>{sd.current=E.clientX,Sf.current=E.clientY,console.log(" MOUSE DOWN on",y.symbol,":",sd.current)},onMouseUp:E=>{const M=E.clientX,z=E.clientY,K=sd.current-M,G=Math.abs(Sf.current-z);console.log(" MOUSE UP on",y.symbol,"- diffX:",K,"diffY:",G),K>25&&G<50?(console.log(" LEFT SWIPE DETECTED - SHOW EXIT BUTTON"),uc(y.id)):K<-25&&G<50&&(console.log(" RIGHT SWIPE DETECTED - HIDE EXIT BUTTON"),uc(null))},onTouchStart:E=>{E.touches&&E.touches[0]&&(sd.current=E.touches[0].clientX,Sf.current=E.touches[0].clientY,console.log(" TOUCH START on",y.symbol,":",sd.current))},onTouchMove:E=>{var M;Math.abs(sd.current-(((M=E.touches[0])==null?void 0:M.clientX)||0))>10&&E.preventDefault()},onTouchEnd:E=>{if(E.changedTouches&&E.changedTouches[0]){const M=E.changedTouches[0].clientX,z=E.changedTouches[0].clientY,K=sd.current-M,G=Math.abs(Sf.current-z);console.log(" TOUCH END on",y.symbol,"- diffX:",K,"diffY:",G),K>25&&G<50?(console.log(" LEFT SWIPE DETECTED - SHOW EXIT BUTTON"),uc(y.id)):K<-25&&G<50&&(console.log(" RIGHT SWIPE DETECTED - HIDE EXIT BUTTON"),uc(null))}},children:[n.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1/5 bg-red-500 flex items-center justify-center",children:n.jsxs("button",{onClick:()=>Zo(y.id),className:"flex flex-col items-center justify-center w-full h-full hover:bg-red-600 transition-colors active:bg-red-700","data-testid":`button-exit-position-${y.symbol}`,title:"Exit position",children:[n.jsx("div",{className:"text-white text-sm font-bold",children:""}),n.jsx("div",{className:"text-[7px] text-white dark:text-white font-bold whitespace-nowrap",children:"EXIT"})]})}),n.jsxs("div",{className:"w-full p-3 bg-white dark:bg-gray-900 cursor-pointer",style:{transform:ko===y.id?"translateX(-20%)":"translateX(0)",transition:"transform 300ms ease-in-out"},onClick:()=>{ko===y.id&&(console.log(" Tapped on content - resetting swipe"),uc(null))},children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium text-sm",children:y.symbol}),n.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${y.action==="BUY"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"}`,children:y.action})]}),ko!==y.id&&n.jsx(Du,{className:"w-4 h-4 text-gray-400 opacity-50"})]}),n.jsxs("div",{className:"flex items-center justify-between text-xs",children:[n.jsxs("div",{className:"text-gray-600 dark:text-gray-400",children:["Qty: ",y.quantity," | Avg: ",xs?"***":`${y.entryPrice.toFixed(2)}`]}),n.jsx("div",{className:`font-semibold ${y.pnl>=0?"text-green-600":"text-red-600"}`,children:xs?"***":`${y.pnl.toFixed(0)}`})]}),n.jsxs("div",{className:"text-[10px] text-gray-400 mt-1",children:[n.jsxs("div",{className:"text-[10px] text-gray-400 mt-1 flex items-center justify-between",children:[n.jsxs("div",{children:["LTP: ",y.currentPrice.toFixed(2),y.slTriggerPrice&&n.jsxs("span",{className:"text-orange-500 ml-2",children:["SL: ",y.slTriggerPrice.toFixed(2)]})]}),n.jsxs("div",{className:`text-[10px] font-semibold ${y.pnlPercent>=0?"text-green-600":"text-red-600"}`,children:[y.pnlPercent>=0?"+":"",y.pnlPercent.toFixed(2),"%"]})]}),y.slTriggerPrice&&n.jsxs("span",{className:"text-orange-500 ml-2",children:["SL: ",y.slTriggerPrice.toFixed(2)]})]})]})]},y.id))}),dr&&Ts.length>0&&n.jsx("div",{className:"space-y-1 bg-white dark:bg-gray-900/50 rounded-lg p-3",children:[...Ts].reverse().slice(0,10).map(y=>n.jsxs("div",{className:"flex items-center justify-between py-2.5 border-b border-gray-200 dark:border-gray-800 last:border-0",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-medium ${y.action==="BUY"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:y.action==="BUY"?"B":"S"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:y.symbol}),n.jsxs("div",{className:"text-[10px] text-gray-400",children:[y.time," | Qty: ",y.quantity]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["",y.price.toFixed(2)]}),n.jsx("div",{className:`text-xs ${y.pnl?y.pnl.includes("+")?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400"}`,children:y.pnl||"-"})]})]},y.id))})]}),n.jsx("div",{className:"px-4 pb-6",children:n.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-800",children:[n.jsx("button",{onClick:Ml,className:"text-xs text-gray-400 hover:text-red-500 transition-colors","data-testid":"button-reset-mobile-tab",children:"Reset Account"}),n.jsx("span",{className:"text-xs text-gray-400",children:"Demo mode"})]})})]})]}),n.jsx(bn,{open:Qn,onOpenChange:y=>{y?Ws(y):(Nt(),Pv(null),Av(null),console.log(" Share Dialog closed - reset tag highlighting and shareable URL"))},children:n.jsxs(pn,{className:"max-w-3xl max-h-[90vh] overflow-hidden flex flex-col","data-testid":"dialog-share-tradebook",children:[n.jsx(Zn,{className:"flex-shrink-0",children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"PERALA"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"rethink & reinvest"})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsx(Xn,{className:"text-lg font-semibold",children:"MY trading report"}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["userID: ",ct&&((Og=ut==null?void 0:ut.reportData)!=null&&Og.username)?ut.reportData.username:(ue==null?void 0:ue.displayName)||(ue==null?void 0:ue.email)||(ue==null?void 0:ue.userId)||"Guest"]}),!ct&&n.jsx("div",{className:"flex flex-col items-end gap-1",children:oi?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(H,{size:"icon",variant:"outline",className:"bg-green-600 hover:bg-green-700 text-white h-8 w-8",onClick:()=>{navigator.clipboard.writeText(oi),yr({title:"Link copied!",description:"Shareable URL copied to clipboard"})},"data-testid":"button-copy-shareable-url",children:n.jsx(Bi,{className:"w-4 h-4"})}),n.jsx(H,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>window.open(oi,"_blank"),"data-testid":"button-open-shareable-url",children:n.jsx(vb,{className:"w-4 h-4"})})]}):n.jsx(H,{size:"icon",onClick:Er,disabled:Jn,className:"bg-green-600 hover:bg-green-700 h-8 w-8","data-testid":"button-create-shareable-link",children:Jn?n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):n.jsx(ase,{className:"w-4 h-4"})})})]})]})}),n.jsxs("div",{className:"flex-1 overflow-auto space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{ref:Ed,className:"max-h-96 overflow-auto border border-gray-200 dark:border-gray-700 rounded-lg",children:n.jsx(K5,{tradingDataByDate:ct&&((xx=ut==null?void 0:ut.reportData)!=null&&xx.tradingDataByDate)?ut.reportData.tradingDataByDate:Oh(),onDateSelect:()=>{},selectedDate:null,onDataUpdate:()=>{},isPublicView:!0,onSelectDateForHeatmap:(y,E)=>{console.log(` [REPORT] Switching to heatmap mode - Symbol: ${y}, Date: ${E}`),Cc("heatmap"),_s(y,E)}})}),(Ua==null?void 0:Ua.tag)==="fomo"&&Ua.dates.length>0&&(()=>{const y=[];if(!Cd.current||!Ed.current)return null;const E=Ed.current.scrollWidth||0,M=Ed.current.scrollHeight||0,z=Ed.current.scrollLeft||0,K=Ed.current.scrollTop||0,G=Ed.current.getBoundingClientRect(),$=Cd.current.getBoundingClientRect(),ae=$.left-G.left+z+$.width/2,c=$.top-G.top+K+$.height/2;return Ua.dates.forEach((u,p)=>{var k;const v=(k=Ed.current)==null?void 0:k.querySelector(`[data-date="${u}"]`);if(v){const _=v.getBoundingClientRect(),F=_.left-G.left+z+_.width/2,se=_.top-G.top+K+_.height/2,J=(ae+F)/2,xe=Math.min(c,se)-50,ye=`M ${ae} ${c} Q ${J} ${xe}, ${F} ${se}`;y.push(n.jsxs("g",{children:[n.jsx("path",{d:ye,fill:"none",stroke:"url(#reportDialogCurvedLineGradient)",strokeWidth:"2.5",strokeDasharray:"6,4",opacity:"0.95"}),n.jsx("circle",{cx:F,cy:se,r:"4",fill:"#fcd34d",opacity:"0.9"}),n.jsx("circle",{cx:F,cy:se,r:"3",fill:"#fbbf24",className:"animate-pulse"})]},`connection-${u}-${p}`))}}),n.jsxs("svg",{style:{position:"absolute",top:0,left:0,width:`${E}px`,height:`${M}px`,pointerEvents:"none",zIndex:10},children:[n.jsx("defs",{children:n.jsxs("linearGradient",{id:"reportDialogCurvedLineGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[n.jsx("stop",{offset:"0%",stopColor:"#c084fc",stopOpacity:"1"}),n.jsx("stop",{offset:"50%",stopColor:"#f472b6",stopOpacity:"1"}),n.jsx("stop",{offset:"100%",stopColor:"#fbbf24",stopOpacity:"1"})]})}),y]})})()]}),(()=>{var k;const y=ct&&((k=ut==null?void 0:ut.reportData)!=null&&k.tradingDataByDate)?ut.reportData.tradingDataByDate:Oh(),E=Object.keys(y).sort();let M=0,z=0,K=0,G=0,$=0,ae=0;const c=[];E.forEach(_=>{var xe,ye;const F=y[_],se=((xe=F==null?void 0:F.tradingData)==null?void 0:xe.performanceMetrics)||(F==null?void 0:F.performanceMetrics),J=((ye=F==null?void 0:F.tradingData)==null?void 0:ye.tradingTags)||(F==null?void 0:F.tradingTags)||[];if(se){const Pe=se.netPnL||0;M+=Pe,z+=se.totalTrades||0,K+=se.winningTrades||0,c.push(Pe),Pe>0?(G++,$=Math.max($,G)):G=0,Array.isArray(J)&&J.forEach(De=>{De.toLowerCase().includes("fomo")&&ae++})}});const u=M>=0,p=z>0?K/z*100:0,v=_=>{if(_.length===0)return"";const F=Math.max(..._,0),se=Math.min(..._,0),J=F-se||1,xe=40,ye=20;return`M ${_.map((De,Ve)=>{const Be=Ve/(_.length-1||1)*xe,et=ye-(De-se)/J*ye;return`${Be},${et}`}).join(" L ")}`};return n.jsx("div",{className:"bg-gradient-to-r from-violet-500 to-purple-600 rounded-md px-2 py-1.5",children:n.jsxs("div",{className:"flex items-center justify-around text-white gap-1",children:[n.jsxs("div",{className:"flex flex-col items-center justify-center",children:[n.jsx("div",{className:"text-[10px] opacity-80",children:"P&L"}),n.jsxs("div",{className:"text-xs font-bold",children:[u?"+":"","",(M/1e3).toFixed(1),"K"]})]}),n.jsxs("div",{className:"flex flex-col items-center justify-center",children:[n.jsx("div",{className:"text-[10px] opacity-80",children:"Trend"}),n.jsx("div",{className:"w-8 h-4",children:n.jsx("svg",{viewBox:"0 0 40 20",className:"w-full h-full",children:n.jsx("path",{d:v(c),fill:"none",stroke:"white",strokeWidth:"1.5",opacity:"0.9",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),n.jsxs("button",{ref:Cd,className:`flex flex-col items-center justify-center hover-elevate active-elevate-2 rounded px-1 transition-all ${(Ua==null?void 0:Ua.tag)==="fomo"?"bg-white/30 ring-2 ring-white/50":""}`,onClick:()=>{var _;if((Ua==null?void 0:Ua.tag)==="fomo")Av(null),console.log(" Deactivated FOMO tag highlighting in report dialog");else{const F=ct&&((_=ut==null?void 0:ut.reportData)!=null&&_.tradingDataByDate)?ut.reportData.tradingDataByDate:Oh(),se=Object.keys(F).sort(),J=[];se.forEach(xe=>{var De;const ye=F[xe],Pe=((De=ye==null?void 0:ye.tradingData)==null?void 0:De.tradingTags)||(ye==null?void 0:ye.tradingTags)||[];Array.isArray(Pe)&&Pe.forEach(Ve=>{Ve.toLowerCase().includes("fomo")&&!J.includes(xe)&&J.push(xe)})}),Av({tag:"fomo",dates:J}),console.log(` Activated FOMO tag highlighting in report dialog for ${J.length} dates:`,J)}},title:`Click to ${(Ua==null?void 0:Ua.tag)==="fomo"?"hide":"show"} FOMO dates on heatmap`,children:[n.jsx("div",{className:"text-[10px] opacity-80",children:"FOMO"}),n.jsx("div",{className:"text-xs font-bold",children:ae})]}),n.jsxs("div",{className:"flex flex-col items-center justify-center",children:[n.jsx("div",{className:"text-[10px] opacity-80",children:"Win%"}),n.jsxs("div",{className:"text-xs font-bold",children:[p.toFixed(0),"%"]})]}),n.jsxs("div",{className:"flex flex-col items-center justify-center",children:[n.jsx("div",{className:"text-[10px] opacity-80",children:"Streak"}),n.jsx("div",{className:"text-xs font-bold",children:$})]})]})})})(),n.jsx("div",{className:"grid grid-cols-3 gap-3",children:(()=>{var p;const y=ct&&((p=ut==null?void 0:ut.reportData)!=null&&p.tradingDataByDate)?ut.reportData.tradingDataByDate:Oh(),E=Object.keys(y).sort();let M=0,z=0,K=0;const G=[],$=new Map;E.forEach(v=>{var se,J;const k=y[v],_=((se=k==null?void 0:k.tradingData)==null?void 0:se.performanceMetrics)||(k==null?void 0:k.performanceMetrics),F=((J=k==null?void 0:k.tradingData)==null?void 0:J.tradingTags)||(k==null?void 0:k.tradingTags)||[];if(_){const xe=_.netPnL||0;M+=xe,z+=_.totalTrades||0,K+=_.winningTrades||0,G.push(xe),xe<0&&Array.isArray(F)&&F.length>0&&F.forEach(ye=>{const Pe=ye.trim().toLowerCase();$.set(Pe,($.get(Pe)||0)+Math.abs(xe))})}});const ae=M>=0,c=z>0?K/z*100:0,u=Array.from($.entries()).sort((v,k)=>k[1]-v[1]).map(([v,k])=>({tag:v,lossAmount:k}));return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-lg p-4 border border-slate-200 dark:border-slate-800 shadow-lg",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("div",{className:"text-[11px] text-slate-600 dark:text-slate-400 uppercase font-semibold mb-2",children:"Total P&L"}),n.jsxs("div",{className:`text-2xl font-bold ${ae?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"}`,children:[ae?"+":"","",(Math.abs(M)/1e3).toFixed(1),"K"]})]}),n.jsxs("div",{className:"space-y-2.5",children:[n.jsxs("div",{className:"flex justify-between text-[12px]",children:[n.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Trades"}),n.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:z})]}),n.jsxs("div",{className:"flex justify-between text-[12px]",children:[n.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Success Rate"}),n.jsxs("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:[c.toFixed(1),"%"]})]}),n.jsx("div",{className:"mt-3",children:n.jsx("div",{className:"h-1.5 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden",children:n.jsx("div",{className:`h-full rounded-full transition-all ${ae?"bg-emerald-500":"bg-red-500"}`,style:{width:`${c}%`}})})})]})]}),n.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-lg p-4 border border-slate-200 dark:border-slate-800 shadow-lg",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsx("div",{className:"text-[11px] text-gray-600 dark:text-gray-400 uppercase font-semibold",children:"Performance Trend"}),n.jsx("div",{className:`text-[10px] px-2 py-1 rounded ${ae?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:ae?"Profitable":"Not Profitable"})]}),G.length>0?n.jsx("div",{className:"h-28 w-full",children:(()=>{const v=G.map((k,_)=>({day:`${_+1}`,value:k,pnl:k}));return n.jsx(yi,{width:"100%",height:"100%",children:n.jsxs(Bg,{data:v,margin:{top:10,right:10,left:0,bottom:0},children:[n.jsx("defs",{children:n.jsxs("linearGradient",{id:"reportTrendGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"0%",stopColor:"rgb(107, 114, 128)",stopOpacity:.4}),n.jsx("stop",{offset:"100%",stopColor:"rgb(107, 114, 128)",stopOpacity:.05})]})}),n.jsx(Sa,{dataKey:"day",axisLine:!1,tickLine:!1,tick:!1}),n.jsx(ma,{axisLine:!1,tickLine:!1,tick:!1,domain:["dataMin - 1000","dataMax + 1000"]}),n.jsx(zs,{contentStyle:{background:"var(--background)",border:"1px solid var(--border)",borderRadius:"8px",fontSize:"11px",padding:"6px 10px"},formatter:k=>[`${k>=0?"":"-"}${Math.abs(k).toLocaleString()}`,"P&L"]}),n.jsx(ec,{type:"natural",dataKey:"value",stroke:ae?"#16a34a":"#dc2626",strokeWidth:2,fill:"url(#reportTrendGradient)",dot:!1,activeDot:{r:4,fill:ae?"#16a34a":"#dc2626",stroke:"white",strokeWidth:2},isAnimationActive:!0,animationDuration:600,animationEasing:"ease-in-out"})]})})})()}):n.jsx("div",{className:"h-28 flex items-center justify-center text-gray-400 text-xs",children:"No data"})]}),n.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-lg p-4 border border-slate-200 dark:border-slate-800 shadow-lg",children:[n.jsx("div",{className:"text-[11px] text-gray-600 dark:text-gray-400 uppercase font-semibold mb-3",children:"Loss Tags"}),u.length>0?n.jsx("div",{className:"bg-red-50 dark:bg-red-950/30 border border-red-200 dark:border-red-800 rounded-md p-3 space-y-2 max-h-32 overflow-y-auto",children:u.map(({tag:v,lossAmount:k})=>n.jsxs("div",{className:"flex items-center justify-between px-2.5 py-1.5 bg-red-100 dark:bg-red-900/50 border border-red-300 dark:border-red-700 rounded-md","data-testid":`tag-loss-${v}`,children:[n.jsx("span",{className:"text-[12px] font-medium text-red-800 dark:text-red-300 capitalize truncate",children:v}),n.jsxs("span",{className:"text-[11px] font-bold text-red-600 dark:text-red-400 ml-2 flex-shrink-0",children:["-",k.toLocaleString("en-IN")]})]},v))}):n.jsx("div",{className:"text-[12px] text-gray-500 dark:text-gray-400 italic py-3",children:"No loss tags"})]})]})})()}),n.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-950/30 dark:to-pink-950/30 rounded-lg p-4 border border-purple-200 dark:border-purple-800 mt-4",children:n.jsx("div",{className:"space-y-2",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-5 h-5 rounded-full bg-gradient-to-br from-purple-600 to-pink-600 flex items-center justify-center flex-shrink-0 mt-0.5",children:n.jsx("span",{className:"text-white text-xs font-bold",children:""})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-gray-800 dark:text-gray-100",children:"Advanced Trading Journal"}),n.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"Tracks emotional decisions  Works on all brokers  NSE, Crypto, Commodity, Forex"})]})]})})})]})]})})]})]})}function D9(){const[t,e]=g.useState(!0),[r,s]=g.useState(!1),[a,i]=g.useState(""),[o,l]=g.useState(""),[d,h]=g.useState(""),[f,m]=g.useState(""),[x,b]=g.useState(""),[j,N]=g.useState(""),[w,C]=g.useState(!1),[T,O]=g.useState(!1),[I,P]=g.useState(!1),[A,R]=g.useState(!1),[B,V]=g.useState(!1),[X,ee]=g.useState(!0),[Y,re]=g.useState(0),[le,te]=g.useState(!1),[de,ie]=g.useState(!1),[Z,ne]=g.useState(!1),{toast:oe}=Ia();g.useEffect(()=>{if(Y>0){const ge=setTimeout(()=>re(Y-1),1e3);return()=>clearTimeout(ge)}},[Y]),g.useEffect(()=>{oc(),(async()=>{try{const Ce=new URLSearchParams(window.location.search),he=Ce.has("code");if(Ce.has("error")){const ce=Ce.get("error_description")||"Authentication failed";console.error(" OAuth error:",ce),oe({title:"Sign-In Failed",description:ce,variant:"destructive"}),window.history.replaceState({},document.title,window.location.pathname),ee(!1);return}if(he){console.log(" [Google OAuth] Callback detected with authorization code, processing...");const ce=await sK();if(ce){console.log(" [Google OAuth] User authenticated:",ce.email),localStorage.setItem("currentUserId",ce.userId),localStorage.setItem("currentUserEmail",ce.email),localStorage.setItem("currentUserName",ce.name);const Ee=await ks();if(Ee)try{await fetch("/api/auth/cognito",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ee}`},body:JSON.stringify({name:ce.name,email:ce.email})})}catch(Le){console.warn("Backend sync failed, continuing...",Le)}console.log(" [Google OAuth] Sign-in successful, redirecting to app..."),window.history.replaceState({},document.title,window.location.pathname),window.location.href="/";return}else console.error(" [Google OAuth] Failed to get user from callback"),oe({title:"Sign-In Failed",description:"Could not complete Google sign-in. Please try again.",variant:"destructive"}),window.history.replaceState({},document.title,window.location.pathname)}}catch(Ce){console.error(" [Google OAuth] Callback error:",Ce),oe({title:"Sign-In Error",description:Ce.message||"An unexpected error occurred during sign-in.",variant:"destructive"}),window.history.replaceState({},document.title,window.location.pathname)}finally{ee(!1)}})()},[]);const U=async()=>{if(!t&&!d){oe({title:"Missing Information",description:"Please enter your name to create an account.",variant:"destructive"});return}if(!a||!o){oe({title:"Missing Information",description:"Please enter email and password.",variant:"destructive"});return}if(o.length<8){oe({title:"Password Too Short",description:"Password must be at least 8 characters long.",variant:"destructive"});return}O(!0);try{let ge;if(t)console.log(" Signing in with AWS Cognito..."),ge=await kP(a,o);else{console.log(" Signing up with AWS Cognito..."),await rK(a,o,d),console.log(" Auto-confirming user...");try{await fetch("/api/auth/cognito/confirm",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a})})}catch(he){console.warn(" Auto-confirm failed, user may already be confirmed:",he)}console.log(" Auto-signing in after signup..."),ge=await kP(a,o),oe({title:"Account Created",description:"Welcome! Your account has been created successfully."})}localStorage.setItem("currentUserId",ge.userId),localStorage.setItem("currentUserEmail",ge.email),localStorage.setItem("currentUserName",ge.name),console.log(" Authentication successful:",{action:t?"login":"register",userId:ge.userId,email:ge.email});const Ce=await ks();if(Ce)try{await fetch("/api/auth/cognito",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ce}`},body:JSON.stringify({name:ge.name,email:ge.email}),signal:AbortSignal.timeout(8e3)})}catch(he){console.warn(" Backend sync failed, but Cognito Auth succeeded. Continuing...",he)}console.log(" Authentication successful, redirecting to app..."),window.location.href="/"}catch(ge){console.error(" Authentication error:",ge);let Ce=ge.message||"Something went wrong. Please try again.";ge.name==="UserNotConfirmedException"?Ce="Please verify your email before signing in. Check your inbox for a verification link.":ge.name==="NotAuthorizedException"?Ce="Incorrect email or password.":ge.name==="UserNotFoundException"?Ce="No account found with this email. Please sign up first.":ge.name==="UsernameExistsException"?Ce="An account with this email already exists.":ge.name==="InvalidPasswordException"&&(Ce="Password does not meet requirements. Use at least 8 characters with uppercase, lowercase, numbers, and symbols."),oe({title:"Authentication Error",description:Ce,variant:"destructive"})}finally{O(!1)}},W=async()=>{if(!a){oe({title:"Missing Email",description:"Enter your email address.",variant:"destructive"});return}if(Y>0){oe({title:"Please Wait",description:`Rate limit active. Try again in ${Y} seconds.`,variant:"destructive"});return}R(!0);try{console.log(" Sending forgot password request via backend...");const ge=await fetch("/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a})}),Ce=await ge.json();if(!ge.ok||!Ce.success)throw{name:Ce.code||"Error",message:Ce.message};console.log(" OTP sent successfully!"),C(!0),oe({title:"Code Sent Successfully",description:"Verification code sent to your email."})}catch(ge){console.error(" Forgot Password Error:",ge.name,ge.message);let Ce=ge.message||"Failed to send code.",he="Error";ge.name==="UserNotFoundException"?(Ce="This email is not registered. Please sign up first.",he="User Not Found"):ge.name==="LimitExceededException"&&(Ce="Rate limit exceeded. Please wait before trying again.",he="Rate Limited",re(300)),oe({title:he,description:Ce,variant:"destructive"})}finally{R(!1)}},be=async()=>{if(!x||!j){oe({title:"Missing Password",description:"Enter new password.",variant:"destructive"});return}if(x!==j){oe({title:"Mismatch",description:"Passwords don't match.",variant:"destructive"});return}if(x.length<8){oe({title:"Too Short",description:"Use 8+ characters.",variant:"destructive"});return}V(!0);try{console.log(" AWS confirmResetPassword:",a,f.length,"chars"),await aK(a,f,x),oe({title:"Success",description:"Password reset. Login now."}),s(!1),C(!1),m(""),b(""),N(""),i(""),e(!0)}catch(ge){console.error(" Error:",ge.name,ge.message);let Ce="Reset failed.";ge.name==="CodeMismatchException"?Ce="Wrong verification code. Please check and try again.":ge.name==="ExpiredCodeException"?(Ce="Code expired. Request new one.",C(!1),m("")):ge.name==="InvalidPasswordException"?Ce="Password needs: uppercase, lowercase, numbers, symbols.":ge.name==="LimitExceededException"&&(Ce="Too many attempts. Wait 5-10 min."),oe({title:"Error",description:Ce,variant:"destructive"})}finally{V(!1)}},pe=()=>{s(!1),C(!1),m(""),b(""),N("")};return X?n.jsx("div",{className:"min-h-screen bg-black flex flex-col items-center justify-center",children:n.jsx("div",{className:"text-white text-lg",children:"Processing authentication..."})}):n.jsxs("div",{className:"min-h-screen bg-black flex flex-col items-center justify-center px-6 py-8",children:[n.jsx("div",{className:"text-center mb-12",children:n.jsx("h1",{className:"text-7xl md:text-8xl font-bold text-white tracking-tight",children:"PERALA"})}),n.jsxs("div",{className:"max-w-xl w-full space-y-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h2",{className:"text-4xl font-bold text-white mb-4",children:"Get Early Access"}),n.jsx("p",{className:"text-gray-400 text-lg mb-2",children:"Type a prompt, get a trading strategy"}),n.jsx("p",{className:"text-gray-400 text-lg mb-6",children:"instantly."}),n.jsx("p",{className:"text-gray-500 text-sm",children:"AI-powered trading insights."})]}),n.jsx("div",{className:"w-full max-w-md mx-auto space-y-4",children:r?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-center mb-4",children:[n.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Reset Password"}),n.jsx("p",{className:"text-gray-400 text-sm",children:"Enter your email to receive a verification code"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(Nr,{type:"email",placeholder:"Email",value:a,onChange:ge=>i(ge.target.value),disabled:w,className:"bg-gray-800 border-gray-700 text-white placeholder-gray-400 h-12 rounded-lg disabled:opacity-50","data-testid":"input-forgot-email"}),Y>0&&n.jsx("div",{className:"p-3 bg-orange-900/30 border border-orange-700 rounded-lg text-center",children:n.jsxs("p",{className:"text-orange-400 text-sm",children:["AWS rate limit active. Wait ",Math.floor(Y/60),":",(Y%60).toString().padStart(2,"0")]})}),w?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"p-3 bg-green-900/30 border border-green-700 rounded-lg text-center",children:n.jsx("p",{className:"text-green-400 text-sm",children:"Verification code sent to your email"})}),n.jsx(Nr,{type:"text",placeholder:"Enter 6-digit verification code",value:f,onChange:ge=>m(ge.target.value.replace(/\D/g,"").slice(0,6)),maxLength:6,className:"bg-gray-800 border-gray-700 text-white placeholder-gray-400 h-12 rounded-lg text-center text-lg tracking-widest","data-testid":"input-otp"}),n.jsxs("div",{className:"relative",children:[n.jsx(Nr,{type:de?"text":"password",placeholder:"New Password (8+ characters)",value:x,onChange:ge=>b(ge.target.value),className:"bg-gray-800 border-gray-700 text-white placeholder-gray-400 h-12 rounded-lg pr-12","data-testid":"input-new-password"}),n.jsx("button",{type:"button",onClick:()=>ie(!de),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-200 transition-colors","data-testid":"button-toggle-new-password-visibility",children:de?n.jsx(o0,{className:"w-4 h-4"}):n.jsx(Au,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Nr,{type:Z?"text":"password",placeholder:"Confirm New Password",value:j,onChange:ge=>N(ge.target.value),className:"bg-gray-800 border-gray-700 text-white placeholder-gray-400 h-12 rounded-lg pr-12","data-testid":"input-confirm-password"}),n.jsx("button",{type:"button",onClick:()=>ne(!Z),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-200 transition-colors","data-testid":"button-toggle-confirm-password-visibility",children:Z?n.jsx(o0,{className:"w-4 h-4"}):n.jsx(Au,{className:"w-4 h-4"})})]}),n.jsxs(H,{onClick:be,disabled:f.length<6||!x||!j||B,className:"w-full bg-purple-600 hover:bg-purple-700 text-white font-medium h-12 rounded-lg disabled:opacity-50","data-testid":"button-save-password",children:[B?"Resetting Password...":"Reset Password",!B&&n.jsx(Uk,{className:"ml-2 h-4 w-4"})]}),n.jsx(H,{variant:"ghost",onClick:W,disabled:A||Y>0,className:"w-full text-gray-400 hover:text-white disabled:opacity-50","data-testid":"button-resend-otp",children:A?"Sending...":Y>0?`Wait ${Math.floor(Y/60)}:${(Y%60).toString().padStart(2,"0")}`:"Resend Code"})]}):n.jsxs(H,{onClick:W,disabled:A||Y>0,className:"w-full bg-purple-600 hover:bg-purple-700 text-white font-medium h-12 rounded-lg disabled:opacity-50","data-testid":"button-send-otp",children:[A?"Sending...":Y>0?`Wait ${Math.floor(Y/60)}:${(Y%60).toString().padStart(2,"0")}`:"Send OTP",!A&&Y===0&&n.jsx(Uk,{className:"ml-2 h-4 w-4"})]}),n.jsx("div",{className:"flex justify-center",children:n.jsx("button",{onClick:pe,className:"text-sm text-gray-400 hover:text-gray-300 transition-colors","data-testid":"button-back-to-login",children:"Back to Login"})})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex gap-2 p-1 bg-gray-800 rounded-lg",children:[n.jsx(H,{variant:"ghost",className:`flex-1 ${t?"bg-gray-700 text-white":"text-gray-400"}`,onClick:()=>e(!0),"data-testid":"button-toggle-login",children:"Login"}),n.jsx(H,{variant:"ghost",className:`flex-1 ${t?"text-gray-400":"bg-gray-700 text-white"}`,onClick:()=>e(!1),"data-testid":"button-toggle-signup",children:"Sign Up"})]}),n.jsxs("div",{className:"space-y-3",children:[!t&&n.jsx(Nr,{type:"text",placeholder:"Name",value:d,onChange:ge=>h(ge.target.value),className:"bg-gray-800 border-gray-700 text-white placeholder-gray-400 h-12 rounded-lg","data-testid":"input-name"}),n.jsx(Nr,{type:"email",placeholder:"Email",value:a,onChange:ge=>i(ge.target.value),className:"bg-gray-800 border-gray-700 text-white placeholder-gray-400 h-12 rounded-lg","data-testid":"input-email"}),n.jsxs("div",{className:"relative",children:[n.jsx(Nr,{type:le?"text":"password",placeholder:"Password",value:o,onChange:ge=>l(ge.target.value),onKeyPress:ge=>ge.key==="Enter"&&U(),className:"bg-gray-800 border-gray-700 text-white placeholder-gray-400 h-12 rounded-lg pr-12","data-testid":"input-password"}),n.jsx("button",{type:"button",onClick:()=>te(!le),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-200 transition-colors","data-testid":"button-toggle-password-visibility",children:le?n.jsx(o0,{className:"w-4 h-4"}):n.jsx(Au,{className:"w-4 h-4"})})]}),n.jsxs(H,{onClick:U,disabled:T||I,className:"w-full bg-purple-600 hover:bg-purple-700 text-white font-medium h-12 rounded-lg","data-testid":"button-email-auth",children:[T?"Processing...":t?"Login":"Create Account",!T&&n.jsx(Uk,{className:"ml-2 h-4 w-4"})]}),t&&n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{onClick:()=>s(!0),className:"text-xs text-gray-400 hover:text-gray-300 transition-colors","data-testid":"button-forgot-password",children:"Forgot password?"})})]})]})}),n.jsxs("div",{className:"flex flex-col items-center space-y-3 text-sm text-gray-400",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),n.jsx("span",{children:"AI Social feed "})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),n.jsx("span",{children:"AI-Journal tracking"})]})]})]})]})}function bMe(){return n.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:n.jsx(St,{className:"w-full max-w-md mx-4",children:n.jsxs(Kt,{className:"pt-6",children:[n.jsxs("div",{className:"flex mb-4 gap-2",children:[n.jsx(rv,{className:"h-8 w-8 text-red-500"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),n.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function $9(){const[t,e]=JI("/share/:userId"),[r,s]=JI("/share/heatmap/:userId"),a=(e==null?void 0:e.userId)||(s==null?void 0:s.userId)||"",[i,o]=g.useState({}),[l,d]=g.useState(!0),[,h]=Jy(),[f,m]=g.useState("Guest");g.useEffect(()=>{a&&(async()=>{try{d(!0);const T=await fetch(`/api/user-journal/${a}/public`);if(T.ok){const O=await T.json();console.log(` Public heatmap data loaded: ${Object.keys(O).length} dates (aggregate metrics only)`);const I={};Object.keys(O).forEach(P=>{var R,B,V,X;const A=O[P];I[P]={performanceMetrics:{netPnL:Number((R=A==null?void 0:A.performanceMetrics)==null?void 0:R.netPnL)||0,totalTrades:Number((B=A==null?void 0:A.performanceMetrics)==null?void 0:B.totalTrades)||0,winningTrades:Number((V=A==null?void 0:A.performanceMetrics)==null?void 0:V.winningTrades)||0,losingTrades:Number((X=A==null?void 0:A.performanceMetrics)==null?void 0:X.losingTrades)||0},tradingTags:Array.isArray(A==null?void 0:A.tradingTags)?A.tradingTags.filter(ee=>typeof ee=="string"):[]}}),o(I)}}catch(T){console.error("Error fetching public heatmap data:",T)}finally{d(!1)}})()},[a]),g.useEffect(()=>{a&&(async()=>{try{const T=await fetch(`/api/user/${a}`);if(T.ok){const O=await T.json();m(O.displayName||O.email||a)}}catch(T){console.log("Could not fetch user info:",T)}})()},[a]);const x=()=>{const C=localStorage.getItem("currentUserId"),T=localStorage.getItem("currentUserEmail");h(C&&T&&C!=="null"&&T!=="null"?"/":"/login")};if(l)return n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading trading calendar..."})]})});const j=(()=>{const C=Object.keys(i).sort();let T=0,O=0,I=0,P=0,A=0,R=0;const B=[],V=new Map;C.forEach(le=>{const te=i[le],de=te==null?void 0:te.performanceMetrics,ie=(te==null?void 0:te.tradingTags)||[];if(de){const ne=de.netPnL||0;T+=ne,O+=de.totalTrades||0,I+=de.winningTrades||0,B.push(ne),ne>0?(A++,R=Math.max(R,A)):A=0,ne<0&&Array.isArray(ie)&&ie.length>0&&ie.forEach(oe=>{const U=oe.trim().toLowerCase();V.set(U,(V.get(U)||0)+1)})}(Array.isArray(ie)?ie.map(ne=>ne.trim().toLowerCase()):[]).includes("fomo")&&P++});const X=O>0?I/O*100:0,ee=T>=0,Y=O>0?I/O*100:0,re=Array.from(V.entries()).sort((le,te)=>te[1]-le[1]).map(([le,te])=>({tag:le,count:te}));return{totalPnL:T,totalTrades:O,winningTrades:I,fomoTrades:P,maxWinStreak:R,winRate:X,isProfitable:ee,successRate:Y,trendData:B,lossTags:re}})(),N=C=>{if(C.length===0)return"";const T=Math.max(...C,0),O=Math.min(...C,0),I=T-O||1,P=40,A=20;return`M ${C.map((B,V)=>{const X=V/(C.length-1||1)*P,ee=A-(B-O)/I*A;return`${X},${ee}`}).join(" L ")}`},w=C=>{if(C.length===0)return"";const T=Math.max(...C,0),O=Math.min(...C,0),I=T-O||1,P=100,A=45;if(C.length===1){const V=P/2,X=A-(C[0]-O)/I*A;return`M ${V} ${X}`}let R="";const B=C.map((V,X)=>{const ee=X/(C.length-1)*P,Y=A-(V-O)/I*A;return{x:ee,y:Y}});R+=`M ${B[0].x} ${B[0].y}`;for(let V=1;V<B.length;V++){const X=B[V],ee=B[V-1],Y=(ee.x+X.x)/2,re=(ee.y+X.y)/2;R+=` Q ${Y} ${re}, ${X.x} ${X.y}`}return R};return n.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 overflow-y-auto",children:n.jsx("div",{className:"w-full max-w-3xl",children:n.jsxs("div",{className:"bg-background border border-gray-200 dark:border-gray-700 rounded-lg shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsxs("div",{className:"flex flex-col gap-2 p-6",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"PERALA"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h2",{className:"text-lg font-semibold",children:"MY trading report"}),n.jsx(H,{variant:"ghost",size:"icon",onClick:x,className:"h-9 w-9","data-testid":"button-close-share-modal",children:n.jsx(Wr,{className:"h-4 w-4"})})]})]}),n.jsxs("div",{className:"flex flex-col space-y-1",children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"rethink & reinvest"}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["userID: ",f]})]})]})}),n.jsxs("div",{className:"flex-1 overflow-auto space-y-4 p-6",children:[n.jsx("div",{className:"max-h-96 overflow-auto border border-gray-200 dark:border-gray-700 rounded-lg",children:n.jsx(K5,{tradingDataByDate:i,onDateSelect:()=>{},selectedDate:null,onDataUpdate:()=>{},isPublicView:!0})}),n.jsx("div",{className:"bg-gradient-to-r from-violet-500 to-purple-600 rounded-md px-2 py-1.5",children:n.jsxs("div",{className:"flex items-center justify-around text-white gap-1",children:[n.jsxs("div",{className:"flex flex-col items-center justify-center",children:[n.jsx("div",{className:"text-[10px] opacity-80",children:"P&L"}),n.jsxs("div",{className:"text-xs font-bold",children:[j.isProfitable?"+":"","",(j.totalPnL/1e3).toFixed(1),"K"]})]}),n.jsxs("div",{className:"flex flex-col items-center justify-center",children:[n.jsx("div",{className:"text-[10px] opacity-80",children:"Trend"}),n.jsx("div",{className:"w-8 h-4",children:n.jsx("svg",{viewBox:"0 0 40 20",className:"w-full h-full",children:n.jsx("path",{d:N(j.trendData),fill:"none",stroke:"white",strokeWidth:"1.5",opacity:"0.9",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),n.jsxs("div",{className:"flex flex-col items-center justify-center",children:[n.jsx("div",{className:"text-[10px] opacity-80",children:"FOMO"}),n.jsx("div",{className:"text-xs font-bold",children:j.fomoTrades})]}),n.jsxs("div",{className:"flex flex-col items-center justify-center",children:[n.jsx("div",{className:"text-[10px] opacity-80",children:"Win%"}),n.jsxs("div",{className:"text-xs font-bold",children:[j.winRate.toFixed(0),"%"]})]}),n.jsxs("div",{className:"flex flex-col items-center justify-center",children:[n.jsx("div",{className:"text-[10px] opacity-80",children:"Streak"}),n.jsx("div",{className:"text-xs font-bold",children:j.maxWinStreak})]})]})}),n.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[n.jsxs("div",{className:`rounded-lg p-4 text-white ${j.isProfitable?"bg-gradient-to-br from-green-500 to-green-600":"bg-gradient-to-br from-red-500 to-red-600"}`,children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsx("div",{className:"text-[11px] opacity-90 uppercase font-semibold",children:"Total P&L"}),n.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-white/50 flex items-center justify-center",children:n.jsx("span",{className:"text-[10px]",children:""})})]}),n.jsxs("div",{className:"text-3xl font-bold mb-3",children:[j.isProfitable?"+":"","",(Math.abs(j.totalPnL)/1e3).toFixed(1),"K"]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-[12px]",children:[n.jsx("span",{children:"Total Trades"}),n.jsx("span",{className:"font-semibold",children:j.totalTrades})]}),n.jsxs("div",{className:"flex justify-between text-[12px]",children:[n.jsx("span",{children:"Success Rate"}),n.jsxs("span",{className:"font-semibold",children:[j.successRate.toFixed(1),"%"]})]}),n.jsx("div",{className:"mt-2",children:n.jsx("div",{className:"h-1.5 bg-white/20 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-white/80 rounded-full transition-all",style:{width:`${j.successRate}%`}})})})]})]}),n.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsx("div",{className:"text-[11px] text-gray-600 dark:text-gray-400 uppercase font-semibold",children:"Performance Trend"}),n.jsx("div",{className:`text-[10px] px-2 py-1 rounded ${j.isProfitable?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"}`,children:j.isProfitable?"Profitable":"Not Profitable"})]}),n.jsxs("svg",{viewBox:"0 0 100 45",className:"w-full",style:{height:"120px"},children:[n.jsx("line",{x1:"0",y1:"22.5",x2:"100",y2:"22.5",stroke:"currentColor",strokeWidth:"0.5",strokeDasharray:"2,2",opacity:"0.2"}),n.jsx("path",{d:w(j.trendData),fill:"none",stroke:j.isProfitable?"#16a34a":"#dc2626",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})]}),n.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[n.jsx("div",{className:"text-[11px] text-gray-600 dark:text-gray-400 uppercase font-semibold mb-3",children:"Loss Tags"}),j.lossTags.length>0?n.jsx("div",{className:"bg-red-50 dark:bg-red-950/30 border border-red-200 dark:border-red-800 rounded-md p-3 space-y-2 max-h-32 overflow-y-auto",children:j.lossTags.map(({tag:C,count:T})=>n.jsxs("div",{className:"flex items-center justify-between px-2.5 py-1.5 bg-red-100 dark:bg-red-900/50 border border-red-300 dark:border-red-700 rounded-md","data-testid":`tag-loss-${C}`,children:[n.jsx("span",{className:"text-[12px] font-medium text-red-800 dark:text-red-300 capitalize truncate",children:C}),n.jsxs("span",{className:"text-[11px] font-bold text-red-600 dark:text-red-400 ml-2 flex-shrink-0",children:["-",(T*100).toFixed(0)]})]},C))}):n.jsx("div",{className:"text-[12px] text-gray-500 dark:text-gray-400 italic py-3",children:"No loss tags"})]})]})]})]})})})}function wMe(){const{reportId:t}=UV(),[,e]=Jy();return g.useEffect(()=>{t&&e(`/?sharedReport=${t}`)},[t,e]),n.jsx("div",{className:"fixed inset-0 bg-background flex items-center justify-center",children:n.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[n.jsx("div",{className:"w-4 h-4 bg-primary rounded-full animate-pulse"}),n.jsx("div",{className:"w-4 h-4 bg-primary rounded-full animate-pulse delay-75"}),n.jsx("div",{className:"w-4 h-4 bg-primary rounded-full animate-pulse delay-150"})]})})}function NMe(){return n.jsx("div",{className:"min-h-screen bg-background p-6",children:n.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-3xl font-semibold text-foreground","data-testid":"text-page-title",children:"Trading Journal"}),n.jsx(H,{variant:"ghost",size:"icon",className:"lg:hidden","data-testid":"button-back",children:n.jsx(Du,{className:"h-5 w-5"})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[n.jsxs(St,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Sr,{variant:"outline",className:"bg-card","data-testid":"badge-symbol",children:"NIFTY50"}),n.jsx(Sr,{variant:"outline",className:"bg-card","data-testid":"badge-timeframe",children:"15m"}),n.jsx(H,{size:"sm",variant:"default",className:"h-7","data-testid":"button-chart-confirm",children:n.jsx("span",{className:"text-xs",children:""})})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(H,{size:"icon",variant:"ghost",className:"h-8 w-8","data-testid":"button-settings",children:n.jsx(bb,{className:"h-4 w-4"})}),n.jsx(H,{size:"icon",variant:"ghost",className:"h-8 w-8","data-testid":"button-more",children:n.jsx(uj,{className:"h-4 w-4"})})]})]}),n.jsxs("div",{className:"bg-muted rounded-lg h-[300px] flex items-center justify-center relative overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("div",{className:"w-full h-full relative",children:n.jsxs("svg",{viewBox:"0 0 600 250",className:"w-full h-full",children:[n.jsx("line",{x1:"0",y1:"50",x2:"600",y2:"50",stroke:"currentColor",strokeWidth:"0.5",className:"text-muted-foreground/20"}),n.jsx("line",{x1:"0",y1:"100",x2:"600",y2:"100",stroke:"currentColor",strokeWidth:"0.5",className:"text-muted-foreground/20"}),n.jsx("line",{x1:"0",y1:"150",x2:"600",y2:"150",stroke:"currentColor",strokeWidth:"0.5",className:"text-muted-foreground/20"}),n.jsx("line",{x1:"0",y1:"200",x2:"600",y2:"200",stroke:"currentColor",strokeWidth:"0.5",className:"text-muted-foreground/20"}),n.jsx("path",{d:"M 50 180 L 200 140 L 350 120 L 500 100 L 580 90",stroke:"#ec4899",strokeWidth:"2",fill:"none"}),n.jsx("path",{d:"M 50 200 L 200 170 L 350 150 L 500 140 L 580 130",stroke:"#ec4899",strokeWidth:"2",fill:"none"}),n.jsx("path",{d:"M 80 190 L 120 170 L 160 150 L 200 145 L 240 135 L 280 125 L 320 130 L 360 115 L 400 110 L 440 105 L 480 100 L 520 95 L 560 92",stroke:"#10b981",strokeWidth:"2.5",fill:"none"}),n.jsx("circle",{cx:"560",cy:"92",r:"4",fill:"#10b981"})]})})}),n.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2",children:n.jsx(Sr,{variant:"secondary",className:"bg-background/80 backdrop-blur","data-testid":"badge-chart-pagination",children:"1 / 2"})}),n.jsx(H,{size:"icon",variant:"ghost",className:"absolute left-2 top-1/2 -translate-y-1/2 h-8 w-8 bg-background/50 backdrop-blur","data-testid":"button-chart-prev",children:n.jsx(Du,{className:"h-4 w-4"})}),n.jsx(H,{size:"icon",variant:"ghost",className:"absolute right-2 top-1/2 -translate-y-1/2 h-8 w-8 bg-background/50 backdrop-blur","data-testid":"button-chart-next",children:n.jsx(Zh,{className:"h-4 w-4"})})]})]}),n.jsxs(St,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-lg font-semibold","data-testid":"text-section-title",children:"TRADE HISTORY SUMMARY"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(H,{size:"sm",variant:"ghost","data-testid":"button-order",children:"Order"}),n.jsx(H,{size:"sm",variant:"ghost","data-testid":"button-import",children:"Import"}),n.jsx(Sr,{variant:"secondary","data-testid":"badge-duration",children:"0m"})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b",children:[n.jsx("th",{className:"text-left py-2 font-medium text-muted-foreground",children:"Time"}),n.jsx("th",{className:"text-left py-2 font-medium text-muted-foreground",children:"Order"}),n.jsx("th",{className:"text-left py-2 font-medium text-muted-foreground",children:"Symbol"}),n.jsx("th",{className:"text-left py-2 font-medium text-muted-foreground",children:"Type"}),n.jsx("th",{className:"text-right py-2 font-medium text-muted-foreground",children:"Qty"}),n.jsx("th",{className:"text-right py-2 font-medium text-muted-foreground",children:"Price"}),n.jsx("th",{className:"text-right py-2 font-medium text-muted-foreground",children:"P&L"}),n.jsx("th",{className:"text-right py-2 font-medium text-muted-foreground",children:"%"}),n.jsx("th",{className:"text-right py-2 font-medium text-muted-foreground",children:"Duration"})]})}),n.jsxs("tbody",{children:[n.jsxs("tr",{className:"border-b","data-testid":"row-trade-1",children:[n.jsx("td",{className:"py-3 text-muted-foreground",children:"12:13:00"}),n.jsx("td",{className:"py-3",children:n.jsx(Sr,{variant:"default",className:"bg-green-600 hover:bg-green-700","data-testid":"badge-buy",children:"BUY"})}),n.jsx("td",{className:"py-3",children:"SENSEX 4th w SEP PE"}),n.jsx("td",{className:"py-3 text-muted-foreground",children:"NRML"}),n.jsx("td",{className:"py-3 text-right",children:"40"}),n.jsx("td",{className:"py-3 text-right",children:"514.3"}),n.jsx("td",{className:"py-3 text-right text-green-600",children:"+1170.00"}),n.jsx("td",{className:"py-3 text-right text-green-600",children:"+5.38%"}),n.jsx("td",{className:"py-3 text-right text-muted-foreground",children:"0m 17s"})]}),n.jsxs("tr",{className:"border-b","data-testid":"row-trade-2",children:[n.jsx("td",{className:"py-3 text-muted-foreground",children:"12:13:17"}),n.jsx("td",{className:"py-3",children:n.jsx(Sr,{variant:"destructive","data-testid":"badge-sell",children:"SELL"})}),n.jsx("td",{className:"py-3",children:"SENSEX 4th w SEP PE"}),n.jsx("td",{className:"py-3 text-muted-foreground",children:"NRML"}),n.jsx("td",{className:"py-3 text-right",children:"40"}),n.jsx("td",{className:"py-3 text-right",children:"543.55"}),n.jsx("td",{className:"py-3 text-right text-green-600",children:"+1170.00"}),n.jsx("td",{className:"py-3 text-right text-green-600",children:"+5.38%"}),n.jsx("td",{className:"py-3 text-right text-muted-foreground",children:"0m 17s"})]})]})]})})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs(St,{className:"p-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{"data-testid":"stat-total-trades",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Trades"}),n.jsx("p",{className:"text-2xl font-bold",children:"2"})]}),n.jsxs("div",{"data-testid":"stat-win-rate",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Win Rate"}),n.jsx("p",{className:"text-2xl font-bold text-green-600",children:"100.0%"})]}),n.jsxs("div",{"data-testid":"stat-net-pnl",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Net P&L"}),n.jsx("p",{className:"text-2xl font-bold text-green-600",children:"1,170"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4 pt-4 border-t",children:[n.jsxs("div",{"data-testid":"stat-winning-trades",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Winning Trades:"}),n.jsx("p",{className:"text-sm",children:"1"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Profit:"}),n.jsx("p",{className:"text-sm text-green-600",children:"1,170"})]}),n.jsxs("div",{"data-testid":"stat-losing-trades",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Losing Trades:"}),n.jsx("p",{className:"text-sm",children:"0"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Loss:"}),n.jsx("p",{className:"text-sm",children:"0"})]})]})]}),n.jsxs(St,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"font-semibold","data-testid":"text-notes-title",children:"TRADING NOTES"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(H,{size:"sm",variant:"ghost","data-testid":"button-tags",children:"Tags (3)"}),n.jsx(H,{size:"sm",variant:"ghost","data-testid":"button-edit",children:"Edit"})]})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[n.jsx(Sr,{variant:"secondary","data-testid":"badge-tag-scalping",children:"scalping"}),n.jsx(Sr,{variant:"secondary","data-testid":"badge-tag-price-action",children:"price action"}),n.jsx(Sr,{variant:"secondary","data-testid":"badge-tag-pattern",children:"pattern based"})]}),n.jsx("p",{className:"text-sm text-muted-foreground","data-testid":"text-note-content",children:"perfect my trendline setup"})]}),n.jsxs(St,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(wm,{className:"h-4 w-4"}),n.jsx("h3",{className:"font-semibold","data-testid":"text-calendar-title",children:"trade book"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Demo"}),n.jsx("div",{className:"w-10 h-5 bg-muted rounded-full relative",children:n.jsx("div",{className:"w-4 h-4 bg-green-600 rounded-full absolute right-0.5 top-0.5"})}),n.jsx(H,{size:"sm","data-testid":"button-save",children:"Save"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h4",{className:"text-sm font-medium","data-testid":"text-calendar-year",children:"Trading Calendar 2025"}),n.jsx("span",{className:"text-xs text-muted-foreground",children:"15 dates with data"})]}),n.jsxs("div",{className:"grid grid-cols-12 gap-1 text-xs",children:[["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((t,e)=>n.jsx("div",{className:"text-center text-muted-foreground col-span-1",children:t},t)),Array.from({length:12}).map((t,e)=>n.jsx("div",{className:"col-span-1 space-y-0.5",children:Array.from({length:5}).map((r,s)=>{const a=e===6&&s===2||e===7&&s===1||e===8&&s===3||e===10&&s===0,i=e===10&&s===0;return n.jsx("div",{className:`h-2 w-2 rounded-sm ${i?"bg-blue-600":a?"bg-green-600":"bg-muted"}`,"data-testid":`calendar-day-${e}-${s}`},s)})},e))]}),n.jsxs("div",{className:"flex items-center justify-between text-xs pt-2 border-t",children:[n.jsx("div",{className:"flex items-center gap-2",children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"h-2 w-2 rounded-full bg-red-600"}),n.jsx("span",{className:"text-muted-foreground",children:"Loss"})]})}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"h-2 w-2 rounded-full bg-green-600"}),n.jsx("span",{className:"text-muted-foreground",children:"Profit"})]})})]}),n.jsxs("div",{className:"flex items-center justify-between pt-3 border-t",children:[n.jsx(H,{size:"icon",variant:"ghost",className:"h-8 w-8","data-testid":"button-date-prev",children:n.jsx(Du,{className:"h-4 w-4"})}),n.jsx("span",{className:"text-sm font-medium","data-testid":"text-selected-date",children:"Monday, November 3, 2025"}),n.jsx(H,{size:"icon",variant:"ghost",className:"h-8 w-8","data-testid":"button-date-next",children:n.jsx(Zh,{className:"h-4 w-4"})})]})]})]})]})]})]})})}function jMe(){const t=$0(),[e,r]=g.useState([]),[s,a]=g.useState(!0),[i,o]=g.useState(null),l=["IT","FINANCE","COMMODITY","GLOBAL","BANKS","AUTOMOBILE"];g.useEffect(()=>{d()},[]);const d=async()=>{a(!0),o(null);try{const h=l.map(x=>fetch("/api/daily-news",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sector:x})}).then(b=>b.json()).then(b=>({sector:x,...b})).catch(b=>(console.error(`Failed to fetch news for ${x}:`,b),null))),m=(await Promise.all(h)).filter(x=>x!==null);r(m)}catch(h){console.error("Error fetching market news:",h),o("Failed to load market news. Please try again.")}finally{a(!1)}};return s?n.jsx("div",{className:"w-full h-full bg-gradient-to-b from-slate-950 to-blue-950 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Vo,{className:"w-8 h-8 text-blue-400 animate-spin mx-auto mb-4"}),n.jsx("p",{className:"text-slate-300",children:"Loading market news from all sectors..."})]})}):n.jsx("div",{className:"w-full h-full bg-gradient-to-b from-slate-950 to-blue-950 overflow-y-auto",children:n.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[n.jsx(H,{variant:"ghost",size:"icon",onClick:()=>t.push("/"),className:"text-white hover:bg-white/10","data-testid":"button-back-market-news",children:n.jsx(my,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-white",children:"Market News"}),n.jsx("p",{className:"text-slate-400 text-sm",children:"Latest news from all sectors"})]})]}),i&&n.jsx(St,{className:"bg-red-500/10 border-red-500/20 p-4 mb-6",children:n.jsx("p",{className:"text-red-400",children:i})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(h=>n.jsxs(St,{className:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 border-slate-700/50 hover:border-blue-500/50 transition-all duration-300 overflow-hidden","data-testid":`card-market-news-${h.sector.toLowerCase()}`,children:[n.jsxs("div",{className:`bg-gradient-to-r ${h.gradient} p-4 relative overflow-hidden`,children:[n.jsx("div",{className:"absolute inset-0 opacity-10 bg-grid-pattern"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"text-4xl block mb-2",children:h.icon}),n.jsx("h3",{className:"text-white font-bold text-lg",children:h.title}),n.jsx("p",{className:"text-white/80 text-xs",children:h.subtitle})]})]}),n.jsxs("div",{className:"p-4 space-y-4",children:[n.jsx("div",{children:n.jsx("p",{className:"text-slate-300 text-sm leading-relaxed",children:h.summary})}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-white font-semibold text-sm mb-2",children:"Top Headlines:"}),n.jsx("ul",{className:"space-y-1",children:h.headlines.slice(0,3).map((f,m)=>n.jsxs("li",{className:"text-slate-400 text-xs leading-relaxed flex gap-2",children:[n.jsx("span",{className:"text-blue-400 flex-shrink-0",children:""}),n.jsx("span",{children:f})]},m))})]})]})]},h.sector))}),e.length===0&&!s&&!i&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx("p",{className:"text-slate-400",children:"No news available at the moment."}),n.jsx(H,{variant:"outline",onClick:d,className:"mt-4","data-testid":"button-retry-market-news",children:"Retry"})]})]})})}function SMe(){var h,f,m,x,b,j;const[t,e]=g.useState(""),[r,s]=g.useState(null),[a,i]=g.useState(!1),[o,l]=g.useState("");g.useEffect(()=>{const N=localStorage.getItem("zerodha_token")||"";e(N)},[]);const d=async()=>{if(!t){l("No Zerodha token found. Please login first.");return}i(!0),l("");try{const N=await fetch("/api/broker/zerodha/profile",{headers:{Authorization:`Bearer ${t}`}}),w=await N.json();N.ok?(s(w),console.log(" REAL ZERODHA PROFILE DATA:",w)):l(`Error: ${w.error||"Failed to fetch profile"}`)}catch(N){l(`Connection error: ${N.message}`)}finally{i(!1)}};return n.jsx("div",{className:"min-h-screen bg-background p-8",children:n.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Zerodha Connection Debug"}),n.jsxs(St,{children:[n.jsx(um,{children:n.jsx(hm,{children:"Zerodha Token Status"})}),n.jsxs(Kt,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Stored Token:"}),n.jsx("p",{className:"font-mono text-xs break-all bg-muted p-3 rounded",children:t?`${t.substring(0,50)}...`:"No token found"})]}),n.jsx(H,{onClick:d,disabled:a||!t,className:"w-full",children:a?"Fetching Real Zerodha Profile...":"Fetch Real Zerodha Profile Data"})]})]}),o&&n.jsx(St,{className:"border-red-200 bg-red-50",children:n.jsx(Kt,{className:"pt-6",children:n.jsx("p",{className:"text-red-700",children:o})})}),r&&n.jsxs(St,{className:"border-green-200 bg-green-50",children:[n.jsx(um,{children:n.jsx(hm,{className:"text-green-900",children:"Real Zerodha Profile Data"})}),n.jsxs(Kt,{className:"space-y-4",children:[n.jsxs("div",{className:"bg-white p-4 rounded-lg border border-green-200",children:[n.jsx("h3",{className:"font-bold text-lg text-green-900 mb-4",children:"Your Real Zerodha Details:"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between items-center border-b pb-2",children:[n.jsx("span",{className:"font-semibold text-green-900",children:"Client ID (user_id):"}),n.jsx("span",{className:"text-lg font-bold text-green-700",children:((h=r.profile)==null?void 0:h.userId)||"N/A"})]}),n.jsxs("div",{className:"flex justify-between items-center border-b pb-2",children:[n.jsx("span",{className:"font-semibold text-green-900",children:"Username:"}),n.jsx("span",{className:"text-green-700",children:((f=r.profile)==null?void 0:f.username)||"N/A"})]}),n.jsxs("div",{className:"flex justify-between items-center border-b pb-2",children:[n.jsx("span",{className:"font-semibold text-green-900",children:"Email:"}),n.jsx("span",{className:"text-green-700",children:((m=r.profile)==null?void 0:m.email)||"N/A"})]}),n.jsxs("div",{className:"flex justify-between items-center border-b pb-2",children:[n.jsx("span",{className:"font-semibold text-green-900",children:"Phone:"}),n.jsx("span",{className:"text-green-700",children:((x=r.profile)==null?void 0:x.phone)||"N/A"})]}),n.jsxs("div",{className:"flex justify-between items-center border-b pb-2",children:[n.jsx("span",{className:"font-semibold text-green-900",children:"Broker:"}),n.jsx("span",{className:"text-green-700",children:((b=r.profile)==null?void 0:b.broker)||"N/A"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"font-semibold text-green-900",children:"Account Type:"}),n.jsx("span",{className:"text-green-700",children:((j=r.profile)==null?void 0:j.accountType)||"N/A"})]})]})]}),n.jsxs("details",{className:"cursor-pointer",children:[n.jsx("summary",{className:"font-semibold text-green-900 hover:text-green-800",children:"Show Full Raw Data (JSON)"}),n.jsx("pre",{className:"bg-white p-4 rounded-lg border border-green-200 mt-2 overflow-x-auto text-xs",children:JSON.stringify(r,null,2)})]}),n.jsx("div",{className:"bg-green-100 p-3 rounded text-sm text-green-900",children:" This data is fetched LIVE from Zerodha API endpoint: https://api.kite.trade/user/profile"})]})]}),!r&&!o&&n.jsx(St,{className:"border-gray-200",children:n.jsx(Kt,{className:"pt-6",children:n.jsx("p",{className:"text-muted-foreground",children:"Click the button above to fetch your real Zerodha profile data"})})})]})})}function kMe(){const[t,e]=g.useState(""),r=[{name:"Research",icon:Zl,color:"bg-gray-700 hover:bg-gray-600 text-gray-200",description:"Search and analyze"},{name:"Claude Sonnet 4",icon:null,color:"bg-blue-600 hover:bg-blue-700 text-white",description:"AI assistance",badge:"1"},{name:"Code",icon:ese,color:"bg-gray-700 hover:bg-gray-600 text-gray-200",description:"Programming help"},{name:"Write",icon:wA,color:"bg-green-600 hover:bg-green-700 text-white",description:"Content creation"},{name:"Strategize",icon:nm,color:"bg-purple-600 hover:bg-purple-700 text-white",description:"Plan and organize"},{name:"Learn",icon:yb,color:"bg-orange-600 hover:bg-orange-700 text-white",description:"Educational content"},{name:"From your apps",icon:bb,color:"bg-pink-600 hover:bg-pink-700 text-white",description:"App integrations"}];return n.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center p-4 sm:p-8",children:n.jsxs("div",{className:"max-w-4xl w-full space-y-8 sm:space-y-12",children:[n.jsx("div",{className:"text-center space-y-4",children:n.jsxs("div",{className:"flex items-center justify-center gap-2 sm:gap-3",children:[n.jsx(Oc,{className:"h-5 w-5 sm:h-6 sm:w-6 text-orange-400"}),n.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-normal text-gray-100",children:"What's new, Esmondrio?"})]})}),n.jsxs("div",{className:"relative max-w-3xl mx-auto",children:[n.jsx(Nr,{placeholder:"How can I help you today?",value:t,onChange:s=>e(s.target.value),className:"w-full h-12 sm:h-14 bg-gray-800 border-gray-700 text-gray-100 placeholder-gray-400 pr-12 text-base sm:text-lg rounded-2xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),n.jsx(H,{size:"sm",className:"absolute right-2 sm:right-3 top-1/2 -translate-y-1/2 bg-gray-700 hover:bg-gray-600 text-gray-300",children:n.jsx(X2,{className:"h-4 w-4"})})]}),n.jsx("div",{className:"flex flex-wrap items-center justify-center gap-2 sm:gap-3 max-w-3xl mx-auto",children:r.map((s,a)=>n.jsx(H,{variant:"secondary",className:`${s.color} border-0 h-10 sm:h-11 px-3 sm:px-4 rounded-full font-medium transition-all duration-200 relative text-sm sm:text-base`,children:n.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[s.icon&&n.jsx(s.icon,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),n.jsx("span",{className:"whitespace-nowrap",children:s.name}),s.badge&&n.jsx(Sr,{variant:"secondary",className:"bg-white text-blue-600 ml-1 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs font-bold",children:s.badge})]})},a))})]})})}function $g({children:t}){const[e,r]=Jy(),{theme:s,toggleTheme:a}=OA(),[i,o]=g.useState(!1),[l,d]=g.useState(""),[h,f]=g.useState(!1),m=$e.useRef({}),x=$e.useRef({}),b=I=>{const P=window.scrollY||document.documentElement.scrollTop;if(m.current[I]=P,I==="/"&&window.getActiveTab){const A=window.getActiveTab();x.current[I]=A,console.log(" Saved tab state:",A,"for path:",I)}},j=I=>{const P=m.current[I],A=x.current[I];console.log(" Restoring for path:",I,"- savedTab:",A,"savedPosition:",P),P!==void 0&&setTimeout(()=>{window.scrollTo(0,P)},50),I==="/"&&A&&window.setActiveTab&&(console.log(" Restoring tab:",A),setTimeout(()=>{var R;(R=window.setActiveTab)==null||R.call(window,A),console.log(" Tab restored to:",A)},150))},N=()=>{l==="1302"?(f(!0),o(!1),d(""),w("/dashboard")):d("")},w=I=>{b(e),(I==="/app"||I==="/trading")&&(delete x.current[I],console.log(" Cleared tab state for main navigation to:",I),window.setActiveTab&&setTimeout(()=>{var P;(P=window.setActiveTab)==null||P.call(window,"trading-home"),console.log(" Force reset to trading-home tab")},50)),I==="/dashboard"&&(delete x.current[I],console.log(" Cleared tab state for dashboard navigation to:",I),window.setActiveTab&&setTimeout(()=>{var P;(P=window.setActiveTab)==null||P.call(window,"dashboard"),console.log(" Force set to dashboard tab")},50)),r(I),j(I)},C=localStorage.getItem("currentUserEmail"),T=localStorage.getItem("currentDisplayName")||localStorage.getItem("currentUsername")||"U",O=[{name:"Home",href:"/app",icon:dj,current:e==="/app"},...C==="chiranjeevi.perala99@gmail.com"?[{name:"Dashboard",href:"/dashboard",icon:Oc,current:e==="/dashboard"}]:[],{name:"Theme",href:"#",icon:s==="dark"?sP:nP,current:!1,isThemeToggle:!0},{name:"Profile",href:"#",icon:null,current:!1,isProfile:!0,displayName:T}];return n.jsxs("div",{className:"min-h-screen bg-gray-900",children:[n.jsx("div",{className:"hidden md:flex fixed right-0 top-0 w-20 h-full bg-gray-950 border-l border-gray-800 flex-col items-center py-6 space-y-6 z-50",children:O.map(I=>{if(I.isProfile)return n.jsx(H,{variant:"ghost",size:"default",className:Ht("w-12 h-12 p-0 rounded-xl transition-all duration-200 flex items-center justify-center","text-gray-400 hover:text-white hover:bg-gray-800"),title:I.name,onClick:()=>{window.toggleNav&&window.toggleNav()},"data-testid":"button-profile-menu-toggle",children:n.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center",children:n.jsx("span",{className:"text-white font-semibold text-sm",children:I.displayName.charAt(0).toUpperCase()})})},I.name);const P=I.icon;return P?n.jsx(H,{variant:"ghost",size:"default",className:Ht("w-12 h-12 p-0 rounded-xl transition-all duration-200",I.current?"bg-indigo-600 text-white hover:bg-indigo-700":"text-gray-400 hover:text-white hover:bg-gray-800"),onClick:()=>{I.isThemeToggle?a():I.href==="/dashboard"&&!h?o(!0):w(I.href)},title:I.name,children:n.jsx(P,{className:"h-6 w-6"})},I.name):null})}),n.jsx("div",{className:"md:mr-20 min-h-screen",children:t}),n.jsx(bn,{open:i,onOpenChange:o,children:n.jsxs(pn,{className:"sm:max-w-md",children:[n.jsx(Zn,{children:n.jsx(Xn,{children:"Enter Passcode"})}),n.jsxs("div",{className:"space-y-4",children:[n.jsx(Nr,{type:"password",placeholder:"Enter passcode",value:l,onChange:I=>d(I.target.value),onKeyPress:I=>{I.key==="Enter"&&N()},autoFocus:!0}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(H,{variant:"outline",onClick:()=>{o(!1),d("")},children:"Cancel"}),n.jsx(H,{onClick:N,children:"Submit"})]})]})]})})]})}function CMe(){return n.jsxs(ure,{children:[n.jsx(Fo,{path:"/login",component:D9}),n.jsx(Fo,{path:"/landing",component:D9}),n.jsx(Fo,{path:"/",children:n.jsx($g,{children:n.jsx(ib,{})})}),n.jsx(Fo,{path:"/app",children:n.jsx($g,{children:n.jsx(ib,{})})}),n.jsx(Fo,{path:"/dashboard",children:n.jsx($g,{children:n.jsx(ib,{})})}),n.jsx(Fo,{path:"/trading",children:n.jsx($g,{children:n.jsx(ib,{})})}),n.jsx(Fo,{path:"/trading-master",children:n.jsx($g,{children:n.jsx(ib,{})})}),n.jsx(Fo,{path:"/voice",children:n.jsx($g,{children:n.jsx(CJ,{})})}),n.jsx(Fo,{path:"/journal-demo",children:n.jsx($g,{children:n.jsx(NMe,{})})}),n.jsx(Fo,{path:"/home",component:kMe}),n.jsx(Fo,{path:"/share/:userId",component:$9}),n.jsx(Fo,{path:"/share/heatmap/:userId",component:$9}),n.jsx(Fo,{path:"/shared/:reportId",component:wMe}),n.jsx(Fo,{path:"/market-news",component:jMe}),n.jsx(Fo,{path:"/zerodha-debug",component:SMe}),n.jsx(Fo,{component:bMe})]})}function EMe(){return g.useEffect(()=>{oc(),(async()=>{try{const e=await nK();if(e&&e.userId){localStorage.setItem("currentUserId",e.userId),localStorage.setItem("currentUserEmail",e.email||""),e.displayName&&(localStorage.setItem("currentDisplayName",e.displayName),localStorage.setItem("currentUserName",e.displayName));const r=await ks();if(r){const s=await fetch("/api/user/profile",{headers:{Authorization:`Bearer ${r}`}});if(s.ok){const a=await s.json();a.success&&a.profile&&(a.profile.username&&localStorage.setItem("currentUsername",a.profile.username),a.profile.displayName&&(localStorage.setItem("currentDisplayName",a.profile.displayName),localStorage.setItem("currentUserName",a.profile.displayName)))}}}}catch(e){console.log("No authenticated user or error:",e)}})()},[]),n.jsx(Rre,{client:Vi,children:n.jsx(Yie,{children:n.jsxs(Hie,{children:[n.jsx(jle,{}),n.jsx(oae,{}),n.jsx(CMe,{})]})})})}console.log("Current URL:",window.location.href);qte.createRoot(document.getElementById("root")).render(n.jsx(EMe,{}));
